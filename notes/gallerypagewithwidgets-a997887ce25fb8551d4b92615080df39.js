YUI.add("sm-cart-helpers", function(e) {
    SM.currentModule = "sm-cart-helpers";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        var r, o, t = SM["import"]("lodash");
        "undefined" != typeof e && e.UA && (r = e.UA.ie && e.UA.ie <= 9, o = e.UA.safari && parseInt(e.UA.safari, 10) < 537);
        var a, n = SM["import"]("sm-resource-album-image"),
            s = SM["import"]("sm-dom"),
            i = SM["import"]("rsvp"),
            m = SM["import"]("sm-accepts-smugmug-cookies"),
            u = SM["import"]("sm-uri"),
            c = SM["import"]("sm-load-external-svg");
        module.exports = {
            deprecatedShowAddToCart: function(t, s, i) {
                return r || o ? SM.load("sm-icartoverlay").then(function() {
                    a || (a = new e.SM.ICartOverlay), a.set("image", t), a.set("album", s), a.show()
                }) : n.loadByKey(s.get("AlbumKey"), t.get("ImageKey"), {
                    expand: ["ImageSizeDetails"]
                }).then(function(e) {
                    return module.exports.showAddToCart(e, i)
                })
            },
            showAddToCart: function(e, r) {
                return m.then(function() {
                    return i.hash({
                        AddToCartController: SM.load("sm-addtocart-controller"),
                        cropMaskSVG: c(SM.env.svgUrls.cropMask),
                        imageSizeDetails: e.expand(["ImageSizeDetails"])
                    }).then(function(o) {
                        o.AddToCartController.mount(t.assign({
                            image: e
                        }, r))
                    })
                }, function() {
                    var r = SM.env.pageOwner,
                        o = new u(s.win.location.href),
                        t = "";
                    o.file && "buy" === o.file.toLowerCase() ? o.queryParams.returnTo ? t = o.query : (t = "returnTo=" + encodeURIComponent(e.get("WebUri")), o.query && (t += "&" + o.query)) : t = "returnTo=" + encodeURIComponent(o.source), s.win.location = e.get("WebUri").replace(r.customDomain, r.nickName.toLowerCase() + "." + r.mainDomain) + "/buy?" + t
                })
            }
        }
    }(), SM.currentModule = null
}, "", {
    requires: ["sm", "lodash", "rsvp", "sm-dom", "sm-uri", "sm-resource", "sm-accepts-smugmug-cookies", "sm-load-external-svg"]
});
YUI.add("sm-events-models", function(e) {
    SM.currentModule = "sm-events-models";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        ! function() {
            var t = e.Base.create("sm-events-models-event", e.Model, [e.SM.ModelSyncAPI, e.ModelRelate], {
                idAttribute: "MarketingEventID",
                apiEndpoint: "event"
            }, {
                ATTRS: {
                    MarketingEventID: {
                        value: null
                    },
                    Name: {
                        value: ""
                    },
                    NiceName: {
                        value: ""
                    },
                    Description: {
                        value: ""
                    },
                    EventDate: {
                        value: ""
                    },
                    EventType: {
                        value: 0
                    },
                    Location: {
                        value: ""
                    },
                    Public: {
                        value: !1
                    },
                    URL: {
                        value: ""
                    },
                    ImageID: {
                        value: 0
                    }
                },
                RELATIONSHIPS: {
                    Image: {
                        type: "toOne",
                        key: "ImageID",
                        relatedModel: "SM.Models.Image",
                        relatedKey: "ImageID"
                    }
                }
            });
            e.namespace("SM.Events.Models").Event = t
        }(),
        function() {
            var t = e.Base.create("sm-events-models-eventlist", e.ModelList, [e.SM.ModelListSyncAPI], {
                model: e.SM.Events.Models.Event,
                apiEndpoint: "event",
                apiCategories: {
                    featured: {
                        method: "featured",
                        expanded: {
                            HighlightImages: e.SM.Models.ImageList
                        }
                    }
                },
                initializer: function(e) {}
            }, {});
            e.namespace("SM.Events.Models").EventList = t
        }()
    }(), SM.currentModule = null
}, "", {
    requires: ["base", "model", "model-list", "model-relate", "sm-api", "sm-image-model", "sm-model-sync-api"]
});
YUI.add("sm-gallery-prefetcher", function(e) {
    SM.currentModule = "sm-gallery-prefetcher";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        var t = e.Event,
            n = e.Lang,
            r = new Image,
            h = !0,
            s = [],
            a = 0,
            i = [],
            c = [],
            u = [],
            o = !1,
            l = 0,
            d = 0,
            f = !1,
            p = e.Base.create("sm-prefetcher", e.Base, [], {
                initializer: function(e) {},
                _handlePreFetch: function(e) {
                    return o === !1 && (d++, (d == i[l] || c[l] === !1) && (c[l] = !1, d = 0, l++), l == a) ? (h = !0, this.detachEvents(), this.set("paused", h), void this.fire("complete")) : void this._start()
                },
                _preFetch: function(e) {
                    r.src != e ? r.src = e : this._handlePreFetch(null)
                },
                _start: function() {
                    var e = null,
                        t = "";
                    if (o = !1, h === !1) {
                        if (t = u.pop(), n.isUndefined(t) || "" === t) {
                            if (t = "", !(a > l)) return void this.pause();
                            if (c[l] !== !0) return void this._handlePreFetch(null);
                            d < i[l] && (e = s[l], t = e[d])
                        } else o = !0;
                        t.length > 0 && this._preFetch(t)
                    }
                },
                attachEvents: function() {
                    f === !1 && (t.attach("load", this._handlePreFetch, r, this), t.attach("error", this._handlePreFetch, r, this), t.attach("abort", this._handlePreFetch, r, this), f = !0)
                },
                detachEvents: function() {
                    t.detach("load", this._handlePreFetch, r), t.detach("error", this._handlePreFetch, r), t.detach("abort", this._handlePreFetch, r), f = !1
                },
                addQueue: function(e) {
                    a++, s.push(e), i.push(e.length), c.push(!0)
                },
                stopCurrent: function() {
                    c[l] = !1
                },
                stopAll: function() {
                    for (var e = 0; a > e; e++) c[e] = !1
                },
                promoteUrl: function(e) {
                    u.push(e)
                },
                run: function() {
                    h === !0 && (this.attachEvents(), h = !1, this.set("paused", h), this._start())
                },
                pause: function() {
                    h = !0, this.set("paused", h)
                }
            }, {
                ATTRS: {
                    paused: {
                        value: !0
                    }
                }
            });
        e.namespace("SM"), e.SM.PreFetcher = p
    }(), SM.currentModule = null
}, "", {
    requires: ["node", "base"]
});
YUI.add("sm-gallery-settings-action-types", function(E) {
    SM.currentModule = "sm-gallery-settings-action-types";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: !0
        });
        exports.SET_NAME = "SET_GALLERY_NAME", exports.SET_DESCRIPTION = "SET_GALLERY_DESCRIPTION", exports.SET_KEYWORDS = "SET_GALLERY_KEYWORDS", exports.SET_VISIBILITY = "SET_GALLERY_VISIBILITY", exports.SET_SECURITY_TYPE = "SET_GALLERY_SECURITY_TYPE", exports.SET_MINIMUM_VISIBILITY = "SET_GALLERY_INHERITED_VISIBILITY", exports.SET_MINIMUM_SECURITY_TYPE = "SET_GALLERY_INHERITED_SECURITY_TYPE", exports.LOAD_GALLERY_SETTINGS_REQUEST = "LOAD_GALLERY_SETTINGS_REQUEST", exports.LOADED_ALBUM_DATA = "LOADED_ALBUM_DATA", exports.LOADED_CONTACT_DATA = "LOADED_CONTACT_DATA", exports.LOADED_NODE_GRANT_DATA = "LOADED_NODE_GRANT_DATA", exports.LOAD_PARENT_URIS = "LOADED_GALLERY_SETTINGS_PARENT_URIS", exports.OPEN_GALLERY_SETTINGS = "GALLERY_SETTINGS_OPEN", exports.CLOSE_GALLERY_SETTINGS = "GALLERY_SETTINGS_CLOSE", exports.SHOW_CONFIRM_CANCEL = "GALLERY_SETTINGS_SHOW_CANCEL", exports.DISCARD_CHANGES = "GALLERY_SETTINGS_CLOSE_DISCARD", exports.CANCEL_CLOSE = "GALLERY_SETTINGS_CLOSE_CANCEL", exports.SAVE_CHANGES_REQUEST = "SAVE_GALLERY_SETTINGS", exports.SAVE_CHANGES_ERROR = "SAVE_GALLERY_SETTINGS_ERROR", exports.SAVE_CHANGES_SUCCESS = "SAVE_GALLERY_SETTINGS_SUCESS", exports.SET_PASSWORD = "SET_GALLERY_PASSWORD", exports.SET_PASSWORD_HINT = "SET_GALLERY_PASSWORD_HINT", exports.CANCEL_GRANT = "GALLERY_CANCEL_GRANT", exports.ADD_GRANT = "GALLERY_ADD_GRANT", exports.CHANGE_PAGE = "GALLERY_SETTINGS_PAGE_CHANGE"
    }(), SM.currentModule = null
}, "", {
    requires: ["sm"]
});
YUI.add("sm-gallery-settings-actions", function(e) {
    SM.currentModule = "sm-gallery-settings-actions";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        "use strict";

        function e() {
            return {
                type: R.OPEN_GALLERY_SETTINGS
            }
        }

        function t() {
            return function(e, t) {
                var a = t(),
                    o = h(a),
                    i = o.galleryKey,
                    s = o.payload,
                    u = void 0 === s ? {} : s,
                    l = o.cancelledGrants,
                    c = void 0 === l ? [] : l,
                    y = D(a, i),
                    d = Object.keys(u).reduce(function(e, t) {
                        return e || y[t] !== u[t]
                    }, !1);
                e(d || c.lenth > 0 ? r() : n())
            }
        }

        function n() {
            return {
                type: R.CLOSE_GALLERY_SETTINGS
            }
        }

        function r() {
            return {
                type: R.SHOW_CONFIRM_CANCEL
            }
        }

        function a() {
            return {
                type: R.CANCEL_CLOSE
            }
        }

        function o(e) {
            return e = e.substring(0, M.GALLERY_NAME_MAX_LENGTH), {
                type: R.SET_NAME,
                name: e
            }
        }

        function i(e) {
            return e = e.substring(0, M.GALLERY_DESCRIPTION_MAX_LENGTH), {
                type: R.SET_DESCRIPTION,
                description: e
            }
        }

        function s(e) {
            return {
                type: R.SET_KEYWORDS,
                keywords: e
            }
        }

        function u(e) {
            return {
                type: R.SET_SECURITY_TYPE,
                securityType: e
            }
        }

        function l(e) {
            return {
                type: R.SET_VISIBILITY,
                visibility: e
            }
        }

        function c(e) {
            return {
                type: R.SET_PASSWORD,
                password: e
            }
        }

        function y(e) {
            return {
                type: R.SET_PASSWORD_HINT,
                passwordHint: e
            }
        }

        function d() {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "";
            return {
                type: R.SET_MINIMUM_VISIBILITY,
                visibility: e
            }
        }

        function p() {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "";
            return {
                type: R.SET_MINIMUM_SECURITY_TYPE,
                securityType: e
            }
        }

        function S(e) {
            if (-1 === M.PAGES.indexOf(e)) throw new Error("Invalid Page Selected");
            return {
                type: R.CHANGE_PAGE,
                page: e
            }
        }

        function E(e) {
            return {
                type: R.ADD_GRANT,
                emailList: e
            }
        }

        function g(e) {
            return {
                type: R.CANCEL_GRANT,
                grantUri: e
            }
        }

        function f() {
            return {
                type: R.SAVE_CHANGES_REQUEST
            }
        }

        function N() {
            return {
                type: R.SAVE_CHANGES_SUCCESS
            }
        }

        function _(e) {
            var t = e.partial,
                n = e.message;
            return n || (n = t ? M.SAVE_ERROR_PARTIAL : M.SAVE_ERROR_FULL), {
                type: R.SAVE_CHANGES_ERROR,
                partial: t,
                message: n
            }
        }

        function m(e) {
            return {
                type: R.LOAD_GALLERY_SETTINGS_REQUEST,
                albumKey: e
            }
        }

        function T(e, t) {
            return {
                type: R.LOADED_ALBUM_DATA,
                payload: e,
                uri: t
            }
        }

        function G(e, t) {
            return {
                type: R.LOADED_NODE_GRANT_DATA,
                payload: e,
                uri: t
            }
        }

        function A(e, t) {
            return {
                type: R.LOADED_CONTACT_DATA,
                payload: e,
                uri: t
            }
        }

        function I(e) {
            return {
                type: R.LOAD_PARENT_URIS,
                uris: e
            }
        }

        function C(e) {
            return babelHelpers["extends"]({}, e.get(), {
                contactUri: U.buildCanonicalUri(e.getExpansionUri("Contact"))
            })
        }

        function v(e) {
            return function(t) {
                return new Promise(function(t) {
                    var n = U.loadLocal("gallerySettingsResource");
                    n ? t(n) : L.loadByKey(e, {
                        expand: ["Node", "Node.NodeGrants", "Node.NodeGrants.Contact", "Node.ParentNodes", "Node.ParentNodes.NodeGrants", "Node.ParentNodes.NodeGrants.Contact"]
                    }).then(function(e) {
                        t(e)
                    })
                }).then(function(n) {
                    t(T(n.get(), n.get("Uri"))), t(m(e));
                    var r = n.getExpansion("Node").get(),
                        a = r.NodeID,
                        o = [],
                        i = n.getExpansion("Node.ParentNodes"),
                        s = 0,
                        u = 0;
                    i.filter(function(e) {
                        return e.get("NodeID") !== a
                    }).forEach(function(e) {
                        var n = e.get(),
                            r = n.Uri,
                            a = n.EffectivePrivacy,
                            i = n.EffectiveSecurityType;
                        o.push(r);
                        var l = e.getExpansion("NodeGrants");
                        if (l) {
                            var c = l.map(C);
                            t(G(c, r))
                        }
                        var y = M.VISIBILITY_OPTIONS.indexOf(a),
                            d = M.SECURITY_OPTIONS.indexOf(i);
                        s = Math.max(y, s), u = Math.max(d, u)
                    });
                    var l = M.VISIBILITY_OPTIONS[s],
                        c = M.SECURITY_OPTIONS[u];
                    t(o.length > 1 || 0 !== s ? d(l) : d()), t(o.length > 1 || 0 !== u ? p(c) : p());
                    var y = U.buildCanonicalUri(n.getExpansionUri("Node")),
                        S = n.getExpansion("Node.NodeGrants") || [],
                        E = S.map(C);
                    t(G(E, y));
                    var g = n.getExpansion("Node.NodeGrants.Contact") || [],
                        f = n.getExpansion("Node.ParentNodes.NodeGrants.Contact") || [];
                    [].concat(babelHelpers.toConsumableArray(f), babelHelpers.toConsumableArray(g)).forEach(function(e) {
                        var n = e.get(),
                            r = n.Uri,
                            a = babelHelpers.objectWithoutProperties(n, ["Uri"]);
                        t(A(a, U.buildCanonicalUri(r)))
                    }), t(I(o))
                })
            }
        }

        function O() {
            return function(e, t) {
                var n = t(),
                    r = h(n),
                    a = r.payload,
                    o = void 0 === a ? {} : a,
                    i = r.galleryKey,
                    s = r.cancelledGrants,
                    u = void 0 === s ? [] : s,
                    l = r.inviteGrants,
                    c = void 0 === l ? "" : l,
                    y = D(n, i),
                    d = Object.keys(o).filter(function(e) {
                        return y[e] !== o[e]
                    }).reduce(function(e, t) {
                        return e[t] = o[t], e
                    }, {}),
                    p = o.SecurityType ? "GrantAccess" === o.SecurityType : "GrantAccess" === y.SecurityType;
                U.patchUri(U.buildCanonicalUri(y.Uri), {
                    data: d
                }).then(function() {
                    p ? ! function() {
                        var t = "/api/v2/node/" + y.NodeID + "!grants",
                            n = c.split(",").filter(function(e) {
                                return e.length
                            }).map(function(e) {
                                return U.postUri(t, {
                                    data: {
                                        Email: e
                                    }
                                })
                            });
                        n.concat(u.map(function(e) {
                            return U.postUri(e + "!cancel")
                        })), Promise.all(n).then(function() {
                            e(N()), P.doc.location.reload(!0)
                        }, function() {
                            e(_({
                                partial: !0
                            }))
                        })
                    }() : (e(N()), P.doc.location.reload(!0))
                }, function() {
                    e(_({
                        partial: !1
                    }))
                })
            }
        }
        Object.defineProperty(exports, "__esModule", {
            value: !0
        }), exports.openGallerySettings = e, exports.closeGallerySettings = t, exports.forceCloseGallerySettings = n, exports.showCancelConfirm = r, exports.cancelCloseGallerySettings = a, exports.setGalleryName = o, exports.setGalleryDescription = i, exports.setGalleryKeywords = s, exports.setGallerySecurityType = u, exports.setGalleryVisibility = l, exports.setGalleryPassword = c, exports.setGalleryPasswordHint = y, exports.setMinumumVisibility = d, exports.setMinumumSecurityType = p, exports.changePage = S, exports.addGrantInvites = E, exports.cancelGrantInvites = g, exports.saveChanges = f, exports.saveChangesSuccess = N, exports.saveChangesError = _, exports.loadGallerySettingsRequest = m, exports.loadAlbumData = T, exports.loadGrantData = G, exports.loadContactData = A, exports.loadParentUris = I, exports.loadGalleryByKey = v, exports.saveGallerySettings = O;
        var R = SM["import"]("sm-gallery-settings-action-types"),
            L = SM["import"]("sm-resource-album"),
            M = SM["import"]("sm-gallery-settings-constants"),
            P = SM["import"]("sm-dom"),
            U = SM["import"]("sm-resource-core"),
            b = SM["import"]("sm-gallery-settings-selectors"),
            D = b.getGalleryDataByKey,
            h = b.getGallerySettings
    }(), SM.currentModule = null
}, "", {
    requires: ["sm", "sm-dom", "sm-gallery-settings-action-types", "sm-gallery-settings-constants", "sm-gallery-settings-selectors", "sm-resource-core", "sm-resource-album"]
});
YUI.add("sm-gallery-settings-cancel-confirm", function(e) {
    SM.currentModule = "sm-gallery-settings-cancel-confirm";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: !0
        });
        var e = SM["import"]("react"),
            n = SM["import"]("sm-component-button"),
            t = SM["import"]("sm-modal"),
            o = SM["import"]("sm-component-panel-base"),
            l = e.PropTypes,
            r = function(l) {
                var r = l.onCancel,
                    c = l.onConfirm;
                return e.createElement(t, {
                    closeOnEscape: !0,
                    onClose: r
                }, e.createElement(o, {
                    headerPosition: o.HEADER_INSIDE
                }, e.createElement(o.Header, null, e.createElement("h1", null, "Discard Changes?")), e.createElement(o.Body, null, e.createElement("p", null, "Discard all unsaved changes? This cannot be undone!")), e.createElement(o.Buttons, null, e.createElement(n, {
                    onClick: c
                }, "Yes"), e.createElement(n, {
                    onClick: r
                }, "Cancel"))))
            };
        r.propTypes = {
            onCancel: l.func.isRequired,
            onConfirm: l.func.isRequired
        }, r.defaultProps = {
            onCancel: function() {},
            onConfirm: function() {}
        }, exports["default"] = r, module.exports = exports["default"]
    }(), SM.currentModule = null
}, "", {
    requires: ["react", "sm", "sm-component-button", "sm-component-panel-base", "sm-modal"]
});
YUI.add("sm-gallery-settings-constants", function(e) {
    SM.currentModule = "sm-gallery-settings-constants";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: !0
        });
        var e = exports.PAGE_GENERAL = "General",
            r = exports.PAGE_ACCESS = "Access",
            s = exports.PAGE_VISIBILITY = "Visibility";
        exports.PAGES = Object.freeze(new Array(e, r, s)), exports.SECURITY_OPTIONS = ["None", "Password", "GrantAccess"], exports.VISIBILITY_OPTIONS = ["Public", "Unlisted", "Private"], exports.SAVE_ERROR_INVALID_FIELD_PARTIAL = "Error: Invalid ", exports.SAVE_ERROR_PARTIAL = "Some changes failed to save, please refresh the page and try again.", exports.SAVE_ERROR_FULL = "Failed to save changes, please try again.", exports.GALLERY_NAME_MAX_LENGTH = 255, exports.GALLERY_DESCRIPTION_MAX_LENGTH = 65233
    }(), SM.currentModule = null
}, "", {
    requires: ["sm"]
});
YUI.add("sm-gallery-settings-field-grant-access-item", function(e) {
    SM.currentModule = "sm-gallery-settings-field-grant-access-item";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: !0
        });
        var e = SM["import"]("react"),
            n = SM["import"]("sm-component-button"),
            t = SM["import"]("sm-icon"),
            r = e.PropTypes,
            l = function(r) {
                var l = r.name,
                    a = r.email,
                    i = r.onCancelClick,
                    c = r.canceled,
                    s = r.grantKey,
                    o = r.inherited,
                    m = a;
                l && l.length > 0 && (m = " (" + a + ")");
                var d = e.createElement(n, {
                    size: "small",
                    noChrome: !0,
                    "data-key": s,
                    onClick: i,
                    disabled: c
                }, e.createElement(t, {
                    name: "XCross",
                    size: "small"
                }));
                return o && (d = e.createElement("p", null, "(Inherited)")), e.createElement("div", {
                    className: "sm-flex sm-grant-access-item",
                    "data-canceled": c
                }, e.createElement("p", null, l, m), d)
            };
        l.propTypes = {
            name: r.string,
            email: r.string.isRequired,
            canceled: r.bool,
            grantKey: r.string.isRequired,
            onCancelClick: r.func,
            inherited: r.bool.isRequired
        }, l.defaultProps = {
            onCancelClick: function() {},
            name: "",
            inherited: !1,
            canceled: !1
        }, exports["default"] = l, module.exports = exports["default"]
    }(), SM.currentModule = null
}, "", {
    requires: ["react", "sm", "sm-component-button"]
});
YUI.add("sm-gallery-settings-field-grant-access", function(e) {
    SM.currentModule = "sm-gallery-settings-field-grant-access";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: !0
        });
        var e = SM["import"]("react"),
            t = SM["import"]("react-redux"),
            n = t.connect,
            a = SM["import"]("sm-gallery-settings-actions"),
            r = SM["import"]("sm-component-adaptiveformfield"),
            s = SM["import"]("sm-dom"),
            i = SM["import"]("sm-gallery-settings-field-grant-access-item"),
            l = SM["import"]("sm-component-textarea"),
            c = SM["import"]("sm-gallery-settings-field-validators"),
            o = SM["import"]("sm-gallery-settings-selectors"),
            m = o.getGalleryDataByKey,
            d = o.getGrantsByNodeUri,
            u = o.getGrantsByNodeKey,
            g = o.getContactByUri,
            p = o.getGallerySettings,
            y = e.PropTypes,
            f = function(t) {
                var n = t.acceptedGrants,
                    a = t.pendingGrants,
                    s = t.invites,
                    o = t.cancelledGrants,
                    m = t.onCancelClick,
                    d = t.onInvitesChange,
                    u = t.onInviteFocus,
                    g = "Verify that your email addresses are formatted properly and separated by commas";
                return c.isGrantAccessEmailsValid(s) && (g = ""), e.createElement("div", {
                    className: "sm-form-modern"
                }, e.createElement(r, {
                    id: "sm-gallery-settings-field-add-grant",
                    label: "Invite People",
                    error: g
                }, e.createElement(l, {
                    value: s,
                    onChange: d,
                    onFocus: u
                })), e.createElement("span", {
                    className: "sm-text-mini"
                }, "Comma separated emails, 200 max"), e.createElement("p", null, "Pending (", a.length, ")"), e.createElement("div", {
                    className: "sm-gallery-settings-grant-list"
                }, a.map(function(t) {
                    var n = t.grantKey,
                        a = t.email;
                    return e.createElement(i, babelHelpers["extends"]({
                        onCancelClick: m,
                        canceled: o.has(n),
                        key: a
                    }, t))
                })), e.createElement("p", null, "Accepted (", n.length, ")"), e.createElement("div", {
                    className: "sm-gallery-settings-grant-list"
                }, n.map(function(t) {
                    var n = t.grantKey,
                        a = t.email;
                    return e.createElement(i, babelHelpers["extends"]({
                        onCancelClick: m,
                        canceled: o.has(n),
                        key: a
                    }, t))
                })))
            },
            v = {
                name: y.string,
                email: y.string.isRequired,
                grantKey: y.string,
                inherited: y.bool.isRequired
            };
        f.propTypes = {
            acceptedGrants: y.arrayOf(y.shape(v)).isRequired,
            pendingGrants: y.arrayOf(y.shape(v)).isRequired,
            invites: y.string.isRequired,
            cancelledGrants: y.instanceOf(Set).isRequired,
            onCancelClick: y.func.isRequired,
            onInvitesChange: y.func.isRequired
        };
        var b = function(e, t) {
                var n = p(e);
                if (!n) return t;
                var a = n.inviteGrants,
                    r = void 0 === a ? "" : a,
                    s = n.cancelledGrants,
                    i = n.parentUris;
                s = new Set(s);
                for (var l = m(e, n.galleryKey), c = i.map(function(t) {
                        return d(e, t)
                    }).reduce(function(e, t) {
                        return [].concat(babelHelpers.toConsumableArray(e), babelHelpers.toConsumableArray(t))
                    }, []), o = u(e, l.NodeID), y = o.map(function(e) {
                        return e.Uri
                    }), f = [], v = [], b = [].concat(babelHelpers.toConsumableArray(c), babelHelpers.toConsumableArray(o)), C = 0; C < b.length; C++) {
                    var M = b[C],
                        h = M.Uri,
                        G = M.Status,
                        S = M.contactUri,
                        E = -1 === y.indexOf(h),
                        x = g(e, S),
                        I = x.Name,
                        q = x.PrimaryEmail;
                    "Pending" === G ? v.push({
                        name: I,
                        email: q,
                        grantKey: h,
                        inherited: E
                    }) : f.push({
                        name: I,
                        email: q,
                        grantKey: h,
                        inherited: E
                    })
                }
                var N = babelHelpers["extends"]({}, t, {
                    acceptedGrants: f,
                    pendingGrants: v,
                    invites: r,
                    cancelledGrants: s
                });
                return N
            },
            C = function(e) {
                return {
                    dispatch: e,
                    onInvitesChange: function(t) {
                        var n = t.target.value;
                        e(a.addGrantInvites(n))
                    },
                    onCancelClick: function(t) {
                        var n = t.currentTarget.getAttribute("data-key");
                        e(a.cancelGrantInvites(n))
                    },
                    onInviteFocus: function(e) {
                        var t = e.target.parentElement;
                        setTimeout(function() {
                            s.scrollIntoViewIfNeeded(t, !0)
                        }, 500)
                    }
                }
            };
        exports["default"] = n(b, C)(f), module.exports = exports["default"]
    }(), SM.currentModule = null
}, "", {
    requires: ["react", "react-redux", "sm", "sm-component-adaptiveformfield", "sm-component-button", "sm-component-textarea", "sm-gallery-settings-actions", "sm-gallery-settings-selectors", "sm-gallery-settings-field-grant-access-item", "sm-gallery-settings-field-validators"]
});
YUI.add("sm-gallery-settings-field-password", function(e) {
    SM.currentModule = "sm-gallery-settings-field-password";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: !0
        });
        var e = SM["import"]("react"),
            s = SM["import"]("react-redux"),
            r = s.connect,
            t = SM["import"]("sm-gallery-settings-actions"),
            a = SM["import"]("sm-component-adaptiveformfield"),
            o = SM["import"]("sm-component-textbox"),
            n = SM["import"]("sm-gallery-settings-selectors"),
            d = n.getGalleryDataByKey,
            i = n.getGallerySettings,
            l = e.PropTypes,
            u = function(s) {
                var r = s.password,
                    t = s.passwordHint,
                    n = s.onPasswordChange,
                    d = s.onPasswordHintChange,
                    i = "Password";
                r || (i += " (Optional)");
                var l = "Password Hint";
                return t || (l += " (Optional)"), e.createElement("div", {
                    className: "sm-form-modern"
                }, e.createElement(a, {
                    label: i
                }, e.createElement(o, {
                    type: "password",
                    autofocus: !0,
                    value: r,
                    onChange: n
                })), e.createElement(a, {
                    label: l
                }, e.createElement(o, {
                    type: "text",
                    value: t,
                    onChange: d
                })))
            };
        u.propTypes = {
            password: l.string.isRequired,
            passwordHint: l.string.isRequired,
            onPasswordChange: l.func.isRequired,
            onPasswordHintChange: l.func.isRequired
        };
        var p = function(e, s) {
                var r = i(e),
                    t = r.payload,
                    a = void 0 === t ? {} : t,
                    o = r.galleryKey,
                    n = babelHelpers["extends"]({}, s),
                    l = d(e, o);
                return void 0 !== a.Password ? n.password = a.Password : n.password = l.Password, void 0 !== a.PasswordHint ? n.passwordHint = a.PasswordHint : n.passwordHint = l.PasswordHint, n
            },
            c = function(e) {
                return {
                    dispatch: e,
                    onPasswordChange: function(s) {
                        var r = s.target.value;
                        e(t.setGalleryPassword(r))
                    },
                    onPasswordHintChange: function(s) {
                        var r = s.target.value;
                        e(t.setGalleryPasswordHint(r))
                    }
                }
            };
        exports["default"] = r(p, c)(u), module.exports = exports["default"]
    }(), SM.currentModule = null
}, "", {
    requires: ["react", "react-redux", "sm", "sm-component-adaptiveformfield", "sm-component-textbox", "sm-gallery-settings-selectors"]
});
YUI.add("sm-gallery-settings-field-validators", function(e) {
    SM.currentModule = "sm-gallery-settings-field-validators";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        "use strict";

        function e(e) {
            return void 0 !== e && e.trim().length > 0
        }

        function r() {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "",
                r = e.split(","),
                t = !0,
                n = !1,
                l = void 0;
            try {
                for (var i, u = r[Symbol.iterator](); !(t = (i = u.next()).done); t = !0) {
                    var a = i.value;
                    if (a.length > 0 && null == a.match(/^.+@.+\..+$/)) return !1
                }
            } catch (s) {
                n = !0, l = s
            } finally {
                try {
                    !t && u["return"] && u["return"]()
                } finally {
                    if (n) throw l
                }
            }
            return !0
        }
        Object.defineProperty(exports, "__esModule", {
            value: !0
        }), exports.isNameValid = e, exports.isGrantAccessEmailsValid = r
    }(), SM.currentModule = null
}, "", {
    requires: ["sm"]
});
YUI.add("sm-gallery-settings-footer", function(e) {
    SM.currentModule = "sm-gallery-settings-footer";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: !0
        });
        var e = SM["import"]("react"),
            r = SM["import"]("sm-component-button"),
            t = SM["import"]("sm-component-panel-base"),
            o = e.PropTypes,
            n = function(o) {
                var n = o.errorMsg,
                    s = o.disableSave,
                    l = o.onClick,
                    a = "accent";
                return s && (a = "submit"), e.createElement("div", {
                    className: "sm-gallery-settings-footer"
                }, e.createElement("p", {
                    className: "sm-formfield-error"
                }, n), e.createElement(t.Buttons, null, e.createElement(r, {
                    disabled: s,
                    skin: a,
                    onClick: l
                }, "Save")))
            };
        n.propTypes = {
            errorMsg: o.string.isRequired,
            disableSave: o.bool.isRequired,
            onClick: o.func.isRequired
        }, n.defaultProps = {
            errorMsg: "",
            disableSave: !1,
            onClick: function() {}
        }, exports["default"] = n, module.exports = exports["default"]
    }(), SM.currentModule = null
}, "", {
    requires: ["react", "sm", "sm-component-button", "sm-component-panel-base"]
});
YUI.add("sm-gallery-settings-launcher", function(e) {
    SM.currentModule = "sm-gallery-settings-launcher";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: !0
        });
        var e = SM["import"]("react"),
            n = SM["import"]("react-redux"),
            t = n.Provider,
            r = n.connect,
            o = SM["import"]("sm-gallery-settings-actions"),
            l = SM["import"]("sm-component-busy"),
            s = SM["import"]("sm-component-button"),
            a = SM["import"]("sm-gallery-settings-modal"),
            i = SM["import"]("sm-gallery-settings-cancel-confirm"),
            c = SM["import"]("sm-icon"),
            u = SM["import"]("sm-modal"),
            m = SM["import"]("sm-redux-store"),
            p = SM["import"]("sm-gallery-settings-selectors"),
            d = p.getGallerySettings,
            C = p.getGalleryDataByKey,
            f = e.PropTypes,
            g = function(n) {
                function r() {
                    return babelHelpers.classCallCheck(this, r), babelHelpers.possibleConstructorReturn(this, (r.__proto__ || Object.getPrototypeOf(r)).apply(this, arguments))
                }
                return babelHelpers.inherits(r, n), babelHelpers.createClass(r, [{
                    key: "render",
                    value: function() {
                        var n = this.props,
                            t = n.onButtonClick,
                            r = n.isOpen,
                            o = n.showCancelConfirm,
                            a = n.hasLoaded,
                            i = babelHelpers.objectWithoutProperties(n, ["onButtonClick", "isOpen", "showCancelConfirm", "hasLoaded"]),
                            u = e.createElement(c, {
                                name: "Gear",
                                size: "small"
                            });
                        return !a && r && (u = e.createElement(l, null)), e.createElement(s, babelHelpers["extends"]({
                            onClick: t,
                            size: "small",
                            title: "Gallery Settings",
                            noChrome: !0
                        }, i), u, a && r ? this._renderModal() : null, o ? this._renderCancelConfirm() : null)
                    }
                }, {
                    key: "_renderModal",
                    value: function() {
                        return e.createElement(u, {
                            centered: !0
                        }, e.createElement(t, {
                            store: m
                        }, e.createElement(a, null)))
                    }
                }, {
                    key: "_renderCancelConfirm",
                    value: function() {
                        var n = this.props,
                            t = n.onCancelConfirm,
                            r = n.onCancelExit;
                        return e.createElement(i, {
                            onCancel: r,
                            onConfirm: t
                        })
                    }
                }]), r
            }(e.Component);
        g.propTypes = {
            isOpen: f.bool.isRequired,
            hasLoaded: f.bool.isRequired,
            showCancelConfirm: f.bool.isRequired,
            onButtonClick: f.func.isRequired
        }, g.defaultProps = {
            isOpen: !1,
            hasLoaded: !1,
            showCancelConfirm: !1,
            onButtonClick: function() {}
        };
        var y = function(e, n) {
                var t = d(e);
                if (!t) return n;
                var r = t.isOpen,
                    o = t.galleryKey,
                    l = t.showCancelConfirm,
                    s = !1;
                if (o) {
                    var a = C(o);
                    s = void 0 !== a
                }
                return babelHelpers["extends"]({}, n, {
                    isOpen: r,
                    showCancelConfirm: l,
                    hasLoaded: s
                })
            },
            b = function(e, n) {
                return babelHelpers["extends"]({}, n, {
                    dispatch: e,
                    onButtonClick: function() {
                        e(o.openGallerySettings())
                    },
                    onCancelConfirm: function() {
                        e(o.forceCloseGallerySettings())
                    },
                    onCancelExit: function() {
                        e(o.cancelCloseGallerySettings())
                    }
                })
            };
        exports["default"] = r(y, b)(g), module.exports = exports["default"]
    }(), SM.currentModule = null
}, "", {
    requires: ["react", "react-redux", "sm", "sm-gallery-settings-actions", "sm-component-button", "sm-icon", "sm-modal", "sm-component-busy", "sm-gallery-settings-selectors", "sm-gallery-settings-modal", "sm-gallery-settings-cancel-confirm", "sm-redux-store"]
});
YUI.add("sm-gallery-settings-modal", function(e) {
    SM.currentModule = "sm-gallery-settings-modal";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: !0
        });
        var e = SM["import"]("react"),
            t = SM["import"]("react-redux"),
            r = t.connect,
            s = SM["import"]("sm-component-panel-base"),
            a = SM["import"]("sm-gallery-settings-page-access"),
            n = SM["import"]("sm-gallery-settings-actions"),
            l = SM["import"]("sm-gallery-settings-footer"),
            i = SM["import"]("sm-gallery-settings-page-general"),
            o = SM["import"]("sm-transitions-slide"),
            g = SM["import"]("sm-gallery-settings-page-visibility"),
            c = SM["import"]("sm-gallery-settings-constants"),
            m = c.PAGE_GENERAL,
            u = c.PAGE_ACCESS,
            p = c.PAGE_VISIBILITY,
            d = c.PAGES,
            S = SM["import"]("sm-gallery-settings-selectors"),
            M = S.getGallerySettings,
            y = e.PropTypes,
            v = e.addons.CSSTransitionGroup,
            b = function(t) {
                var r = t.currentPage,
                    n = t.disableSave,
                    c = t.onSaveClick,
                    d = t.errorMsg,
                    S = void 0,
                    M = !1,
                    y = "right";
                switch (r) {
                    case m:
                    default:
                        S = e.createElement(i, null), M = !0, y = "left";
                        break;
                    case p:
                        S = e.createElement(g, null);
                        break;
                    case u:
                        S = e.createElement(a, null)
                }
                var b = void 0;
                return M && (b = e.createElement(l, {
                    errorMsg: d,
                    disableSave: n,
                    onClick: c
                })), e.createElement(v, {
                    transitionName: "sm-gallery-settings",
                    transitionAppear: !0,
                    transitionAppearTimeout: 150,
                    transitionEnter: !1,
                    transitionLeave: !1
                }, e.createElement(s, {
                    className: "sm-gallery-settings"
                }, e.createElement(o, {
                    direction: y,
                    pageKey: r
                }, S, b)))
            };
        b.propTypes = {
            currentPage: y.oneOf(d),
            disableSave: y.bool,
            onSaveClick: y.func.isRequired,
            errorMsg: y.string
        }, b.defaultProps = {
            onSaveClick: function() {},
            errorMsg: "",
            currentPage: m,
            disableSave: !1
        };
        var f = function(e, t) {
                var r = M(e);
                if (!r) return t;
                var s = r.currentPage,
                    a = r.disableSave,
                    n = r.errorMsg;
                return babelHelpers["extends"]({}, t, {
                    currentPage: s,
                    disableSave: a,
                    errorMsg: n
                })
            },
            E = function(e, t) {
                return babelHelpers["extends"]({}, t, {
                    dispatch: e,
                    onSaveClick: function() {
                        e(n.saveGallerySettings())
                    }
                })
            };
        exports["default"] = r(f, E)(b), module.exports = exports["default"]
    }(), SM.currentModule = null
}, "", {
    requires: ["react", "react-redux", "sm", "sm-component-panel-base", "sm-transitions-slide", "sm-gallery-settings-actions", "sm-gallery-settings-footer", "sm-gallery-settings-page-general", "sm-gallery-settings-page-visibility", "sm-gallery-settings-page-access", "sm-gallery-settings-selectors"]
});
YUI.add("sm-gallery-settings-page-access", function(e) {
    SM.currentModule = "sm-gallery-settings-page-access";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: !0
        });
        var e = SM["import"]("react"),
            s = SM["import"]("react-redux"),
            t = s.connect,
            a = SM["import"]("sm-gallery-settings-actions"),
            r = SM["import"]("sm-component-button"),
            n = SM["import"]("sm-gallery-settings-field-grant-access"),
            l = SM["import"]("sm-icon"),
            i = SM["import"]("sm-page"),
            c = SM["import"]("sm-gallery-settings-field-password"),
            o = SM["import"]("sm-component-underlineformfield"),
            m = SM["import"]("sm-gallery-settings-constants"),
            u = m.PAGE_GENERAL,
            y = SM["import"]("sm-gallery-settings-selectors"),
            d = y.getGalleryDataByKey,
            g = y.getGallerySettings,
            p = e.PropTypes,
            S = "None",
            v = "Password",
            f = "GrantAccess",
            E = function(s) {
                var t = s.access,
                    a = s.switchBack,
                    m = s.onAccessChange,
                    u = s.minimumSecurityType,
                    y = s.visibility,
                    d = void 0,
                    g = 0;
                switch (u) {
                    case S:
                        g = 1;
                        break;
                    case v:
                        g = 2;
                        break;
                    case f:
                        g = 3
                }
                switch (t) {
                    case v:
                        d = e.createElement(c, null);
                        break;
                    case f:
                        d = e.createElement(n, null)
                }
                var p = "Anyone";
                "Unlisted" === y && (p = "Anyone with a Link");
                var E = !i.ownerHasFeature(i.FEATURES.GRANT_ACCESS),
                    M = e.createElement(l, {
                        size: "small",
                        name: "Checkmark"
                    });
                return e.createElement("div", null, e.createElement(r, {
                    noChrome: !0,
                    size: "large",
                    className: "sm-flex",
                    onClick: a
                }, e.createElement("div", {
                    className: "sm-flex"
                }, " ", e.createElement(l, {
                    name: "NavigateBack",
                    size: "large"
                }), e.createElement("h2", null, "Access"))), e.createElement("div", {
                    className: "sm-form-modern"
                }, 1 >= g && e.createElement(o, {
                    label: "Public"
                }, e.createElement(r, {
                    noChrome: !0,
                    size: "small",
                    "data-access-level": "None",
                    onClick: m
                }, p, " ", "None" === t ? M : null)), 2 >= g && e.createElement(o, {
                    label: "Password"
                }, e.createElement(r, {
                    noChrome: !0,
                    size: "small",
                    "data-access-level": "Password",
                    onClick: m
                }, "People with Password ", "Password" === t ? M : null)), 3 >= g && !E && e.createElement(o, {
                    label: "Invitation Only"
                }, e.createElement(r, {
                    noChrome: !0,
                    size: "small",
                    "data-access-level": "GrantAccess",
                    onClick: m
                }, "People I Choose ", "GrantAccess" === t ? M : null)), d))
            };
        E.propTypes = {
            access: p.string.isRequired,
            visibility: p.string.isRequired,
            switchBack: p.func.isRequired,
            onAccessChange: p.func.isRequired,
            minimumSecurityType: p.string.isRequired
        };
        var M = function(e, s) {
                var t = g(e),
                    a = t.payload,
                    r = void 0 === a ? {} : a,
                    n = t.galleryKey,
                    l = t.minimumSecurityType,
                    i = babelHelpers["extends"]({}, s),
                    c = d(e, n);
                return r.SecurityType ? i.access = r.SecurityType : i.access = c.SecurityType, r.Privacy ? i.visibility = r.Privacy : i.visibility = c.Privacy, i.minimumSecurityType = l, i
            },
            h = function(e) {
                return {
                    dispatch: e,
                    onAccessChange: function(s) {
                        var t = s.target.getAttribute("data-access-level");
                        e(a.setGallerySecurityType(t))
                    },
                    switchBack: function() {
                        e(a.changePage(u))
                    }
                }
            };
        exports["default"] = t(M, h)(E), module.exports = exports["default"]
    }(), SM.currentModule = null
}, "", {
    requires: ["react", "react-redux", "sm", "sm-component-button", "sm-component-underlineformfield", "sm-icon", "sm-page", "sm-gallery-settings-actions", "sm-gallery-settings-constants", "sm-gallery-settings-selectors", "sm-gallery-settings-field-grant-access", "sm-gallery-settings-field-password"]
});
YUI.add("sm-gallery-settings-page-general", function(e) {
    SM.currentModule = "sm-gallery-settings-page-general";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: !0
        });
        var e = SM["import"]("react"),
            i = SM["import"]("react-redux"),
            t = i.connect,
            s = SM["import"]("sm-gallery-settings-actions"),
            n = SM["import"]("sm-component-adaptiveformfield"),
            r = SM["import"]("sm-component-button"),
            a = SM["import"]("sm-gallery-settings-constants"),
            l = SM["import"]("sm-icon"),
            o = SM["import"]("sm-component-textarea"),
            c = SM["import"]("sm-component-textbox"),
            m = SM["import"]("sm-component-underlineformfield"),
            u = SM["import"]("sm-gallery-settings-field-validators"),
            d = SM["import"]("sm-gallery-settings-selectors"),
            y = d.getGalleryDataByKey,
            p = d.getGallerySettings,
            g = e.PropTypes,
            h = function(i) {
                function t(e) {
                    babelHelpers.classCallCheck(this, t);
                    var i = babelHelpers.possibleConstructorReturn(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this, e));
                    return i._switchVisibility = i._switchVisibility.bind(i), i._switchAccess = i._switchAccess.bind(i), i
                }
                return babelHelpers.inherits(t, i), babelHelpers.createClass(t, [{
                    key: "render",
                    value: function() {
                        var i = this.props,
                            t = i.name,
                            s = i.description,
                            a = i.keywords,
                            d = i.visibility,
                            y = i.access,
                            p = i.minimumVisibility,
                            g = i.minimumSecurityType,
                            h = i.disableSecurity,
                            b = i.hasPassword,
                            f = i.onGalleryNameChange,
                            v = i.onDescriptionChange,
                            S = i.onKeywordsChange,
                            w = i.onClose,
                            C = y,
                            M = d,
                            P = !0;
                        switch (y) {
                            case "Password":
                                C = "People with Password", P = !b;
                                break;
                            case "GrantAccess":
                                C = "People I Choose";
                                break;
                            case "None":
                            default:
                                C = "Unlisted" === d ? "Anyone with a Link" : "Public", P = !1
                        }
                        y === g && P && (C += " (Inherited)"), p === d && h && (M = "Inheriting " + d);
                        var E = "Invalid Gallery Name - Must not be empty";
                        return u.isNameValid(t) && (E = ""), e.createElement("div", null, e.createElement(r, {
                            noChrome: !0,
                            size: "large",
                            className: "sm-gallery-settings-title",
                            onClick: w
                        }, e.createElement("div", {
                            className: "sm-flex"
                        }, " ", e.createElement("h2", null, "Gallery Settings"), e.createElement(l, {
                            name: "Close",
                            size: "large"
                        }))), e.createElement("form", {
                            className: "sm-form-modern"
                        }, e.createElement(n, {
                            label: "Gallery Name",
                            error: E
                        }, e.createElement(c, {
                            value: t,
                            onChange: f,
                            autofocus: !0
                        })), e.createElement(n, {
                            label: "Description"
                        }, e.createElement(o, {
                            value: s,
                            onChange: v
                        })), e.createElement(n, {
                            label: "Keywords"
                        }, e.createElement(c, {
                            value: a,
                            onChange: S
                        })), e.createElement(m, {
                            label: "Visibility"
                        }, e.createElement(r, {
                            noChrome: !0,
                            size: "small",
                            onClick: this._switchVisibility,
                            className: "sm-flex"
                        }, e.createElement("div", {
                            className: "sm-flex"
                        }, " ", M, e.createElement(l, {
                            name: "AngleBracketRight",
                            size: "small"
                        })))), !h && e.createElement(m, {
                            label: "Access"
                        }, e.createElement(r, {
                            noChrome: !0,
                            size: "small",
                            onClick: this._switchAccess,
                            className: "sm-flex"
                        }, e.createElement("div", {
                            className: "sm-flex"
                        }, " ", C, e.createElement(l, {
                            name: "AngleBracketRight",
                            size: "small"
                        }))))))
                    }
                }, {
                    key: "_switchAccess",
                    value: function() {
                        var e = this.props.onPageSwitch;
                        e(a.PAGE_ACCESS)
                    }
                }, {
                    key: "_switchVisibility",
                    value: function() {
                        var e = this.props.onPageSwitch;
                        e(a.PAGE_VISIBILITY)
                    }
                }]), t
            }(SM["import"]("sm-component-pure-render"));
        h.propTypes = {
            name: g.string.isRequired,
            description: g.string.isRequired,
            keywords: g.string.isRequired,
            visibility: g.string.isRequired,
            access: g.string.isRequired,
            hasPassword: g.bool.isRequired,
            minimumVisibility: g.string.isRequired,
            minimumSecurityType: g.string.isRequired,
            disableSecurity: g.bool.isRequired,
            onGalleryNameChange: g.func.isRequired,
            onDescriptionChange: g.func.isRequired,
            onKeywordsChange: g.func.isRequired,
            onClose: g.func.isRequired,
            onPageSwitch: g.func.isRequired
        }, h.defaultProps = {
            name: "",
            description: "",
            keywords: "",
            visibility: "",
            access: "",
            minimumVisibility: "",
            disableSecurity: !1,
            onGalleryNameChange: function() {},
            onDescriptionChange: function() {},
            onKeywordsChange: function() {},
            onClose: function() {},
            onPageSwitch: function() {}
        };
        var b = function(e, i) {
                var t = p(e);
                if (!t) return i;
                var s = y(e, t.galleryKey),
                    n = t.payload || {},
                    r = {
                        name: "Name",
                        description: "Description",
                        keywords: "Keywords",
                        access: "SecurityType",
                        visibility: "Privacy"
                    },
                    a = babelHelpers["extends"]({}, i),
                    l = !0,
                    o = !1,
                    c = void 0;
                try {
                    for (var m, u = Object.entries(r)[Symbol.iterator](); !(l = (m = u.next()).done); l = !0) {
                        var d = babelHelpers.slicedToArray(m.value, 2),
                            g = d[0],
                            h = d[1];
                        void 0 === n[h] ? a[g] = s[h] : a[g] = n[h]
                    }
                } catch (b) {
                    o = !0, c = b
                } finally {
                    try {
                        !l && u["return"] && u["return"]()
                    } finally {
                        if (o) throw c
                    }
                }
                return a.disableSecurity = "Private" === a.visibility, a.minimumVisibility = t.minimumVisibility, a.minimumSecurityType = t.minimumSecurityType, a.hasPassword = !(!s.Password || 0 === s.Password.length), a
            },
            f = function(e, i) {
                return babelHelpers["extends"]({}, i, {
                    dispatch: e,
                    onGalleryNameChange: function(i) {
                        e(s.setGalleryName(i.target.value))
                    },
                    onDescriptionChange: function(i) {
                        e(s.setGalleryDescription(i.target.value))
                    },
                    onKeywordsChange: function(i) {
                        e(s.setGalleryKeywords(i.target.value))
                    },
                    onClose: function() {
                        e(s.closeGallerySettings())
                    },
                    onPageSwitch: function(i) {
                        e(s.changePage(i))
                    }
                })
            };
        exports["default"] = t(b, f)(h), module.exports = exports["default"]
    }(), SM.currentModule = null
}, "", {
    requires: ["react", "react-redux", "sm", "sm-component-adaptiveformfield", "sm-component-button", "sm-component-textarea", "sm-component-textbox", "sm-component-underlineformfield", "sm-icon", "sm-gallery-settings-actions", "sm-gallery-settings-constants", "sm-gallery-settings-selectors", "sm-gallery-settings-field-validators", "sm-component-pure-render"]
});
YUI.add("sm-gallery-settings-page-visibility", function(e) {
    SM.currentModule = "sm-gallery-settings-page-visibility";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: !0
        });
        var e = SM["import"]("react"),
            i = SM["import"]("react-redux"),
            t = i.connect,
            l = SM["import"]("sm-gallery-settings-actions"),
            s = SM["import"]("sm-component-button"),
            n = SM["import"]("sm-icon"),
            a = SM["import"]("sm-page"),
            r = SM["import"]("sm-component-underlineformfield"),
            m = SM["import"]("sm-gallery-settings-constants"),
            c = m.PAGE_GENERAL,
            o = SM["import"]("sm-gallery-settings-selectors"),
            u = o.getGalleryDataByKey,
            y = o.getGallerySettings,
            d = e.PropTypes,
            g = "Public",
            v = "Unlisted",
            b = "Private",
            p = function(i) {
                var t = i.visibility,
                    l = i.switchBack,
                    m = i.onVisiblityChange,
                    c = i.minimumVisibility,
                    o = 0;
                switch (c) {
                    case g:
                    case v:
                        o = 1;
                        break;
                    case b:
                        o = 3
                }
                var u = a.user.isAssistant,
                    y = e.createElement(n, {
                        size: "small",
                        name: "Checkmark"
                    });
                return e.createElement("div", null, e.createElement(s, {
                    noChrome: !0,
                    size: "large",
                    className: "sm-flex",
                    onClick: l
                }, e.createElement("div", {
                    className: "sm-flex"
                }, " ", e.createElement(n, {
                    name: "NavigateBack",
                    size: "large"
                }), e.createElement("h2", null, "Visibility"))), e.createElement("div", {
                    className: "sm-form-modern"
                }, 1 >= o && e.createElement(r, {
                    label: "Public"
                }, e.createElement(s, {
                    noChrome: !0,
                    size: "small",
                    "data-visibility-level": "Public",
                    onClick: m
                }, "Anyone ", "Public" === t ? y : null)), 2 >= o && e.createElement(r, {
                    label: "Unlisted"
                }, e.createElement(s, {
                    noChrome: !0,
                    size: "small",
                    "data-visibility-level": "Unlisted",
                    onClick: m
                }, "Anyone with the Link ", "Unlisted" === t ? y : null)), 3 >= o && !u && e.createElement(r, {
                    label: "Private"
                }, e.createElement(s, {
                    noChrome: !0,
                    size: "small",
                    "data-visibility-level": "Private",
                    onClick: m
                }, "Only Me ", "Private" === t ? y : null))))
            };
        p.propTypes = {
            visibility: d.string.isRequired,
            switchBack: d.func.isRequired,
            onVisiblityChange: d.func.isRequired,
            minimumVisibility: d.string.isRequired
        };
        var f = function(e, i) {
                var t = y(e);
                if (!t) return i;
                var l = babelHelpers["extends"]({}, i),
                    s = u(e, t.galleryKey);
                return t.payload && t.payload.Privacy ? l.visibility = t.payload.Privacy : l.visibility = s.Privacy, l.minimumVisibility = t.minimumVisibility, l
            },
            M = function(e) {
                return {
                    dispatch: e,
                    onVisiblityChange: function(i) {
                        var t = i.target.getAttribute("data-visibility-level");
                        e(l.setGalleryVisibility(t))
                    },
                    switchBack: function() {
                        e(l.changePage(c))
                    }
                }
            };
        exports["default"] = t(f, M)(p), module.exports = exports["default"]
    }(), SM.currentModule = null
}, "", {
    requires: ["react", "react-redux", "sm", "sm-component-button", "sm-component-underlineformfield", "sm-icon", "sm-gallery-settings-actions", "sm-gallery-settings-constants", "sm-gallery-settings-selectors"]
});
YUI.add("sm-gallery-settings-reducers", function(e) {
    SM.currentModule = "sm-gallery-settings-reducers";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        "use strict";

        function e(e, r) {
            var s = e.payload,
                t = void 0 === s ? {} : s;
            switch (r.type) {
                case i.SET_NAME:
                    return babelHelpers["extends"]({}, e, {
                        payload: babelHelpers["extends"]({}, t, {
                            Name: r.name
                        })
                    });
                case i.SET_DESCRIPTION:
                    return babelHelpers["extends"]({}, e, {
                        payload: babelHelpers["extends"]({}, t, {
                            Description: r.description
                        })
                    });
                case i.SET_KEYWORDS:
                    return babelHelpers["extends"]({}, e, {
                        payload: babelHelpers["extends"]({}, t, {
                            Keywords: r.keywords
                        })
                    });
                case i.SET_VISIBILITY:
                    if (-1 === d.VISIBILITY_OPTIONS.indexOf(r.visibility)) throw new Error("Invalid Visibility Option");
                    return babelHelpers["extends"]({}, e, {
                        payload: babelHelpers["extends"]({}, t, {
                            Privacy: r.visibility
                        })
                    });
                case i.SET_SECURITY_TYPE:
                    if (-1 === d.SECURITY_OPTIONS.indexOf(r.securityType)) throw new Error("Invalid Security Option");
                    return babelHelpers["extends"]({}, e, {
                        payload: babelHelpers["extends"]({}, t, {
                            SecurityType: r.securityType
                        })
                    });
                case i.SET_PASSWORD:
                    return babelHelpers["extends"]({}, e, {
                        payload: babelHelpers["extends"]({}, t, {
                            Password: r.password
                        })
                    });
                case i.SET_PASSWORD_HINT:
                    return babelHelpers["extends"]({}, e, {
                        payload: babelHelpers["extends"]({}, t, {
                            PasswordHint: r.passwordHint
                        })
                    });
                case i.SET_MINIMUM_VISIBILITY:
                    return babelHelpers["extends"]({}, e, {
                        minimumVisibility: r.visibility
                    });
                case i.SET_MINIMUM_SECURITY_TYPE:
                    return babelHelpers["extends"]({}, e, {
                        minimumSecurityType: r.securityType
                    });
                default:
                    return e
            }
        }

        function r(e, r) {
            switch (r.type) {
                case i.SET_NAME:
                    return babelHelpers["extends"]({}, e, {
                        disableSave: !b.isNameValid(r.name)
                    });
                case i.ADD_GRANT:
                    return babelHelpers["extends"]({}, e, {
                        disableSave: !b.isGrantAccessEmailsValid(r.emailList)
                    });
                case i.LOAD_PARENT_URIS:
                    return babelHelpers["extends"]({}, e, {
                        parentUris: r.uris
                    });
                case i.CHANGE_PAGE:
                    return babelHelpers["extends"]({}, e, {
                        currentPage: r.page
                    });
                case i.LOAD_GALLERY_SETTINGS_REQUEST:
                    return babelHelpers["extends"]({}, e, {
                        galleryKey: r.albumKey
                    });
                case i.SAVE_CHANGES_REQUEST:
                    return babelHelpers["extends"]({}, e, {
                        disableSave: !0,
                        errorMsg: ""
                    });
                case i.SAVE_CHANGES_SUCCESS:
                    return babelHelpers["extends"]({}, e, {
                        isOpen: !1
                    });
                case i.SAVE_CHANGES_ERROR:
                    return babelHelpers["extends"]({}, e, {
                        errorMsg: r.message,
                        disableSave: r.partial
                    });
                case i.OPEN_GALLERY_SETTINGS:
                    return babelHelpers["extends"]({}, e, {
                        isOpen: !0
                    });
                case i.CLOSE_GALLERY_SETTINGS:
                    var s = e.galleryKey,
                        t = e.parentUris,
                        a = e.minimumVisibility,
                        n = e.minimumSecurityType;
                    return {
                        galleryKey: s,
                        parentUris: t,
                        minimumVisibility: a,
                        minimumSecurityType: n,
                        isOpen: !1
                    };
                case i.SHOW_CONFIRM_CANCEL:
                    return babelHelpers["extends"]({}, e, {
                        showCancelConfirm: !0
                    });
                case i.CANCEL_CLOSE:
                    return babelHelpers["extends"]({}, e, {
                        showCancelConfirm: !1
                    });
                default:
                    return e
            }
        }

        function s(e, r) {
            switch (r.type) {
                case i.ADD_GRANT:
                    return babelHelpers["extends"]({}, e, {
                        inviteGrants: r.emailList.toLowerCase()
                    });
                case i.CANCEL_GRANT:
                    var s = e.cancelledGrants,
                        t = void 0 === s ? [] : s;
                    return t = new Set([].concat(babelHelpers.toConsumableArray(t), [r.grantUri])), babelHelpers["extends"]({}, e, {
                        cancelledGrants: [].concat(babelHelpers.toConsumableArray(t))
                    });
                default:
                    return e
            }
        }

        function t(e, r) {
            switch (r.type) {
                case i.LOADED_ALBUM_DATA:
                    var s = e.Album,
                        t = void 0 === s ? {} : s;
                    return babelHelpers["extends"]({}, e, {
                        Album: babelHelpers["extends"]({}, t, babelHelpers.defineProperty({}, r.uri, babelHelpers["extends"]({}, t[r.uri] = {}, r.payload)))
                    });
                case i.LOADED_NODE_GRANT_DATA:
                    var a = e.NodeGrant,
                        n = void 0 === a ? {} : a;
                    return babelHelpers["extends"]({}, e, {
                        NodeGrant: babelHelpers["extends"]({}, n, babelHelpers.defineProperty({}, r.uri, r.payload))
                    });
                case i.LOADED_CONTACT_DATA:
                    var l = e.Contact,
                        d = void 0 === l ? {} : l;
                    return babelHelpers["extends"]({}, e, {
                        Contact: babelHelpers["extends"]({}, d, babelHelpers.defineProperty({}, r.uri, babelHelpers["extends"]({}, d[r.uri] = {}, r.payload)))
                    });
                default:
                    return e
            }
        }

        function a() {
            for (var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, r = arguments[1], s = e, a = [t], n = 0; n < a.length; n++) {
                var l = a[n];
                s = l(s, r)
            }
            return s
        }

        function n() {
            for (var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, a = arguments[1], n = t.gallerySettings, l = void 0 === n ? {} : n, i = [e, r, s], d = 0; d < i.length; d++) {
                var b = i[d];
                l = b(l, a)
            }
            return babelHelpers["extends"]({}, t, {
                gallerySettings: l
            })
        }

        function l() {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
                r = arguments[1],
                s = p({
                    ui: n,
                    data: a
                });
            return s(e, r)
        }
        Object.defineProperty(exports, "__esModule", {
            value: !0
        }), exports.DATA = a, exports.UI = n, exports.combined = l;
        var i = SM["import"]("sm-gallery-settings-action-types"),
            d = SM["import"]("sm-gallery-settings-constants"),
            b = SM["import"]("sm-gallery-settings-field-validators"),
            u = SM["import"]("redux"),
            p = u.combineReducers
    }(), SM.currentModule = null
}, "", {
    requires: ["sm", "redux", "sm-gallery-settings-action-types", "sm-gallery-settings-constants", "sm-gallery-settings-field-validators"]
});
YUI.add("sm-gallery-settings-selectors", function(r) {
    SM.currentModule = "sm-gallery-settings-selectors";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        "use strict";

        function r(r, e) {
            var t = n.getUriForKey(e),
                a = r.data;
            a = void 0 === a ? {} : a;
            var o = a.Album;
            o = void 0 === o ? {} : o;
            var u = o[t],
                i = void 0 === u ? {} : u;
            return i
        }

        function e(r, e) {
            var t = r.data;
            t = void 0 === t ? {} : t;
            var a = t.NodeGrant;
            a = void 0 === a ? {} : a;
            var o = a[e],
                n = void 0 === o ? [] : o;
            return n
        }

        function t(r, t) {
            var a = "/api/v2/node/" + t;
            return e(r, a)
        }

        function a(r, e) {
            var t = r.data;
            t = void 0 === t ? {} : t;
            var a = t.Contact;
            a = void 0 === a ? {} : a;
            var o = a[e],
                n = void 0 === o ? {} : o;
            return n
        }

        function o(r) {
            var e = r.ui;
            e = void 0 === e ? {} : e;
            var t = e.gallerySettings;
            return t
        }
        Object.defineProperty(exports, "__esModule", {
            value: !0
        }), exports.getGalleryDataByKey = r, exports.getGrantsByNodeUri = e, exports.getGrantsByNodeKey = t, exports.getContactByUri = a, exports.getGallerySettings = o;
        var n = SM["import"]("sm-resource-album")
    }(), SM.currentModule = null
}, "", {
    requires: ["sm", "sm-resource-album"]
});
YUI.add("sm-gallery-settings", function(e) {
    SM.currentModule = "sm-gallery-settings";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: !0
        });
        var e = SM["import"]("react"),
            r = SM["import"]("react-redux"),
            t = r.Provider,
            u = SM["import"]("sm-redux-store"),
            l = SM["import"]("sm-gallery-settings-launcher");
        exports["default"] = function() {
            return e.createElement(t, {
                store: u
            }, e.createElement(l, null))
        }, module.exports = exports["default"]
    }(), SM.currentModule = null
}, "", {
    requires: ["react", "react-redux", "sm", "sm-gallery-settings-launcher", "sm-redux-store"]
});
YUI.add("sm-gallery-views", function(e) {
    SM.currentModule = "sm-gallery-views";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        "use strict";
        var t = SM["import"]("sm-gallerydownload-panel"),
            i = SM["import"]("sm-imagesrcconfig"),
            a = SM["import"]("sm-analytics"),
            s = SM["import"]("sm-page"),
            n = SM["import"]("sm-redux-store"),
            o = SM["import"]("sm-image-preloader"),
            r = SM["import"]("sm-uri"),
            l = SM["import"]("sm-image-performance-logger"),
            g = SM["import"]("sm-gallery-settings-actions"),
            h = SM["import"]("sm-dom"),
            d = SM["import"]("sm-uploader-file-reader"),
            m = d.ERROR_TYPES,
            u = d.getDroppedFiles,
            c = d.getErrorMessage,
            _ = SM["import"]("sm-uploader-tracking"),
            p = "!",
            y = "#",
            f = "/",
            v = "-",
            w = "#!",
            I = {
                ALBUM: "album",
                KEYWORD: "keyword",
                POPULAR: "popular",
                DATE: "date"
            },
            b = {
                SLIDESHOW: "slideshow"
            },
            C = {
                A: !0,
                S: !0,
                M: !0,
                L: !0,
                XL: !0,
                X2: !0,
                X3: !0,
                X4: !0,
                X5: !0,
                "4K": !0,
                "5K": !0,
                320: !0,
                640: !0,
                960: !0,
                1280: !0,
                1920: !0,
                O: !0
            },
            S = {
                parseImageKey: function(e) {
                    var t, i = e.split("-");
                    return 2 === i.length && "i" === i[0] && (t = i[1]), t
                },
                parseUrl: function() {
                    var t = window.location.href.replace("http://", "").replace("https://", ""),
                        i = t.indexOf(y) > -1,
                        a = t.split(f),
                        s = a.length,
                        n = a[1],
                        o = "",
                        r = 0,
                        l = "",
                        g = "",
                        h = 0,
                        d = "",
                        m = null,
                        u = 0,
                        c = [],
                        _ = 0,
                        p = null,
                        v = 0,
                        I = "",
                        b = [];
                    switch (n) {
                        case "date":
                        case "keyword":
                        case "popular":
                            o = n;
                            break;
                        default:
                            o = "album"
                    }
                    for (var M = 0; s > M; M++) m = e.Lang.trim(a[M]), m.indexOf(y) > -1 && (m = m.split(y)[0]), m.indexOf("?") > -1 && (m = m.split("?")[0]), m.length && c.push(m);
                    if (_ = c.length) {
                        u = _ - 1, m = c[u];
                        var T, P = c[_ - 2];
                        for (P && (T = S.parseImageKey(P)), (T && C[m] || "buy" === m.toLowerCase() || "download" === m || "verified" === m) && (u--, g = m); u >= 0;) {
                            if (m = c[u], m.indexOf("_") > 0) {
                                if (p = m.split("_"), v = e.Lang.isNumber(parseInt(p[0], 10)) ? parseInt(p[0], 10) : 0, I = p[1], v && I) {
                                    b = [], i || 0 !== r || "" !== l ? (h = v, d = I) : (r = v, l = I), u--;
                                    continue
                                }
                            } else if (0 === m.indexOf("i-")) {
                                l = m.substr(2), u--;
                                continue
                            }
                            if (m !== y && m !== w && u > 0) switch (o) {
                                case "date":
                                    b.push(m);
                                    break;
                                case "keyword":
                                    b.push(m);
                                    break;
                                case "popular":
                                    b.push(m);
                                    break;
                                default:
                                    b.push(m)
                            }
                            u--
                        }
                    }
                    return b.push(""), "album" === o && "gallery" === b[b.length - 2] && r && l && 0 === h && 0 === d.length && (h = r, d = l, r = 0, l = ""), b.reverse(), "album" === o && h && d && b.push(h + "_" + d), {
                        i: r ? r : 0,
                        k: l ? l : "",
                        p: 0,
                        s: g,
                        r: b.join(f)
                    }
                },
                parseUrlHash: function() {
                    var t, i, a = window.location.href.replace("http://", "").replace("https://", ""),
                        s = a.split(y),
                        n = s[1] || "",
                        o = {
                            i: 0,
                            k: "",
                            p: 0,
                            s: ""
                        };
                    return n && n.charAt(0) !== p && (t = n.split(v), "P" !== t[0] && (i = t[0].split("_"), o.i = parseInt(i[0], 10), o.k = i[1], "LB" === t[2] && (o.s = t[1] || o.s)), e.Lang.isNumber(o.i) || /([a-z0-9]{5})/i.test(o.k) || (o.i = 0, o.k = ""), o.s && !/^(A|S|M|L|XL|X2|X3|O)$/.test(o.s) && (o.s = "A")), o
                }
            },
            M = e.Base.create("sm-gallery-baseview", e.View, [], {
                containerTemplate: '<div class="sm-gallery"></div>',
                headerTemplate: '<div class="sm-gallery-header"><p class="sm-gallery-description"></p><div class="sm-gallery-headerbuttons"><span id="sm-gallery-settings-button"></span><span class="sm-gallery-slideshow-button"></span><span class="sm-gallery-download-button"></span><span class="sm-gallery-buymenu"></span></div></div>',
                emptyInfoTemplate: '<p class="sm-inlineedit-empty sm-inlineedit-node" data-name="All"><% if (data.tile.CanEdit) { %><span class="sm-inlineedit-placeholder sm-muted">add <span data-singlefield="Title" class="sm-inlineedit-specific">title</span>, <span data-singlefield="CaptionRaw" class="sm-inlineedit-specific">caption</span>, <% if (data.tile.ShowKeywords) { %><span data-singlefield="Keywords" class="sm-inlineedit-specific">keywords</span>, or <span class="sm-inlineedit-specific">all</span><% } else { %>or <span class="sm-inlineedit-specific">both</span><% } %></span><span class="sm-inlineedit-hover-button sm-fonticon-small sm-fonticon-Pencil"></span><% } %></p>',
                titleTemplate: '<% var canEdit = data.tile.CanEdit; %><% var inlineClass = canEdit ? "sm-inlineedit-node" : ""; %><p class="sm-tile-title <%= inlineClass %>" data-name="Title" data-placeholder="add title"><% if (data.tile.Title) { %><%= data.tile.Title %><% } else if (canEdit) { %><span class="sm-inlineedit-placeholder sm-muted">add title</span><% } %><% if (canEdit) { %><span class="sm-inlineedit-hover-button sm-fonticon-small sm-fonticon-Pencil"></span><% } %></p>',
                captionTemplate: '<% var canEdit = data.tile.CanEdit; %><% var inlineClass = canEdit ? "sm-inlineedit-node" : ""; %><p class="sm-tile-caption <%= inlineClass %>" data-type="textarea" data-name="CaptionRaw" data-placeholder="add caption"><% if (data.tile.Caption) { %><%== data.tile.Caption %><% } else if (data.tile.ShowFileName) { %><%== data.tile.FileName %><% } else if (data.tile.CanEdit) { %><span class="sm-inlineedit-placeholder sm-muted">add caption</span><% } %><% if (data.tile.CanEdit) { %><span class="sm-inlineedit-hover-button sm-fonticon-small sm-fonticon-Pencil"></span><% } %></p>',
                imageKeywordsTemplate: '<% var canEdit = data.tile.CanEdit; %><% var inlineClass = canEdit ? "sm-inlineedit-node" : ""; %><% var photoBy = data.tile.PhotoBy; %><% var keywords = data.tile.Keywords; %><p class="sm-tile-keywords <%= inlineClass %>" data-name="Keywords" data-placeholder="add keywords"><% if (keywords && keywords.length) { %><span class="sm-fonticon sm-fonticon-small sm-fonticon-Tags"></span><% for (var i = 0; i < keywords.length; i++) {%><% var keyword = keywords[i]; %><% if (photoBy.user.url) { %><a class="sm-muted" href="<%= photoBy.user.url %>/keyword/<%= encodeURIComponent(keyword) %>"><%= keyword %></a><% } else { %><a class="sm-muted" href="/keyword/<%= encodeURIComponent(keyword) %>"><%= keyword %></a><% } %><% } %><% } else if (data.tile.CanEdit && data.tile.ShowKeywords) { %><span class="sm-inlineedit-placeholder sm-muted">add keywords</span><% } %><% if (data.tile.CanEdit && data.tile.ShowKeywords) { %><span class="sm-inlineedit-hover-button sm-fonticon-small sm-fonticon-Pencil"></span><% } %></p>',
                imageExtraInfoTemplate: '<% var photoBy = data.tile.PhotoBy; %><% var keywords = data.tile.Keywords; %><% if (photoBy.user.name ) { %><span class="sm-muted sm-text-mini"><% if (photoBy.user.name) { %><a href="<%= photoBy.user.url %>" class="sm-muted"><%= photoBy.user.name %></a><% if (photoBy.album.url) { %>, from <% } %><% } %></span><% } %><% if (photoBy.album.url) { %><p class="sm-muted sm-text-mini"><% if (!photoBy.user.name) { %>From <% } %><a href="<%= photoBy.album.url %>" class="sm-muted"><%= photoBy.album.name %></a></p><% } %>',
                layoutTemplate: '<div class="sm-gallery-images"></div>',
                footerTemplate: '<div class="sm-gallery-footer"></div>',
                emptyTemplate: '<div class="sm-gallery-header"><p class="sm-gallery-description"></p></div><div class="sm-gallery-empty"><div class="sm-gallery-empty-icon sm-fonticon sm-fonticon-small sm-fonticon-Gallery"></div><div class="sm-gallery-empty-owner">' + e.SM.Templates.button({
                    icon: "Upload",
                    size: "small",
                    skin: "accent",
                    value: "upload",
                    label: "UPLOAD PHOTOS"
                }) + '</div><div class="sm-gallery-empty-guest"><h2>Gallery is Empty</h2></div></div>',
                commentsTemplate: '<div class="sm-gallery-comments-container"></div>',
                keywordsTemplate: e.Template.Micro.compile('<% if ((data.relatedKeywords && data.relatedKeywords.length > 0) || (data.currentKeywords && data.currentKeywords.length > 0)) { %><div class="sm-gallery-keywords"><% if (data.relatedKeywords && data.relatedKeywords.length > 0) { %><div class="sm-gallery-related-keywords">Related keywords: <% for (var i = 0; i < data.relatedKeywords.length; i++) { %><% var keyword = Y.Lang.trim(data.relatedKeywords[i]); %><a class="sm-muted" href="/keyword/<%= encodeURIComponent(keyword) %>"><%= keyword %></a><% } %></div><div class="sm-gallery-combine-with">Combine with: <% for (var i = 0; i < data.relatedKeywords.length; i++) { %><% var keyword = Y.Lang.trim(data.relatedKeywords[i]); %><% var combinedKeywords = (data.currentKeywords || []).concat(keyword); %><a class="sm-muted" href="/keyword/<%= Y.Array.map(combinedKeywords, encodeURIComponent).join(";") %>">+<%= keyword %></a><% } %></div><% } %><% if (data.currentKeywords && data.currentKeywords.length > 1) { %><div class="sm-gallery-remove-keywords">Remove: <% for (var i = 0; i < data.currentKeywords.length; i++) { %><% var removedKeyword = Y.Lang.trim(data.currentKeywords[i]); %><% var remainingKeywords = data.currentKeywords.slice(0, i).concat(data.currentKeywords.slice(i+1)); %><a class="sm-muted" href="/keyword/<%= Y.Array.map(remainingKeywords, encodeURIComponent).join(";") %>">-<%= removedKeyword %></a><% } %></div><% } %></div><% } %>'),
                initializer: function() {
                    this._eventHandles = [], this._winHeight = 0, this._winWidth = 0, this._containerWidth = 0, this._rootURL = "/", this._prefetcher = new e.SM.PreFetcher, this._pageSize = 10, this._tileSize = "Ti", this._lightboxSize = "S", this._minNumImagesForDownloadAll = 3, this._galleryUnlocked = [], this._currentImage = null, this._currentImageIndex = null, this._currentAlbum = null, this._enablePrefetching = this.get("enablePrefetching"), this._enableRouting = this.get("enableRouting"), this._syncDOMSizes(), this._initializeState(), this._enableRouting && this._initializeRouter(), this._bindEvents(), this.get("private") && (e.SM.Page.isPrivate = !0)
                },
                destructor: function() {
                    e.Array.each(this._eventHandles, function(e) {
                        e.detach()
                    }), this._detachDropEvents(), this._images && this._images.destroy(), this._lightbox && this._lightbox.destroy({
                        remove: !0
                    }), this._prefetcher && this._prefetcher.destroy(), this._router && this._router.destroy(), this._buyMenu && this._buyMenu.destroy(), this._calendar && this._calendar.destroy(), this._calendarPanel && this._calendarPanel.destroy(), this._commentsView && this._commentsView.destroy({
                        remove: !0
                    }), this._downloadNode && this._downloadNode.destroy(), this._slideshowNode && this._slideshowNode.destroy(), this._buyMenuNode && this._buyMenuNode.destroy(), this._headerNode && this._headerNode.destroy(), this._footerNode && this._footerNode.destroy()
                },
                _compileTemplates: function() {
                    if (!this._compiledTemplates) {
                        var t = e.Template.Micro;
                        this._compiledTemplates = {
                            imageInfo: t.compile(this.imageExtraInfoTemplate),
                            imageEmpty: t.compile(this.emptyInfoTemplate),
                            imageTitle: t.compile(this.titleTemplate),
                            imageCaption: t.compile(this.captionTemplate),
                            imageKeywords: t.compile(this.imageKeywordsTemplate)
                        }
                    }
                    return this._compiledTemplates
                },
                _initializeState: function() {
                    var t, i = S.parseUrl();
                    this._enableRouting && (!i.k && window.location.href.indexOf(y) > -1 && (e.HistoryHash.hashPrefix = "!", t = new e.HistoryHash, i = e.merge(i, t.get()), i.s || "1" !== i.lb || (i.s = "A"), i.i && i.k || (i = e.merge(i, S.parseUrlHash()))), this._rootURL = i.r), this._updateGalleryState({
                        imageId: parseInt(i.i, 10) || 0,
                        imageKey: i.k || "",
                        size: i.s || ""
                    })
                },
                render: function() {
                    var e, t = this,
                        i = this.get("container"),
                        a = this.get("largestSize"),
                        o = this._galleryState;
                    return a && i.addClass("sm-gallery-image-" + a.toLowerCase()), this._setContainerSize(), this._renderHeader(), this._renderLayout(), this._renderFooter(), e = this._loadImages(this._getGalleryRequestData(0, o.imageId, o.imageKey)), e.then(function(e) {
                        var a, r = i.one(".sm-gallery-empty");
                        if (r && r.remove(!0), t._renderDescription(), e.size())
                            if (t._galleryState.imageKey || (a = e.item(0), t._updateGalleryState({
                                    imageId: a.get("ImageID"),
                                    imageKey: a.get("ImageKey")
                                })), t._renderImages(e), t._renderMenus(), t._enableRouting) {
                                var h = window.location.href,
                                    d = "";
                                "/" !== h.charAt(h.length - 1) && (d = h + "/"), t._router.hasRoute(h) ? t._router.dispatch() : d && t._router.hasRoute(d) ? t._router.replace("/") : (a || (a = t._getCurrentImage()), t._router.replace(t._createImageRoute(a.get("ImageID"), a.get("ImageKey"), o.size ? o.size : "")))
                            } else t._routeImageKey();
                        else t._router.replace("/");
                        setTimeout(l, 10), t._setPageAlbum();
                        var m = t._getAlbumResource();
                        if (m && s.isOwnerOrAdmin()) {
                            var u = m.get("AlbumKey");
                            n.dispatch(g.loadGalleryByKey(u))
                        }
                    }), e
                },
                _bindEvents: function() {
                    this._eventHandles.push(e.on("keyup", this._onKeyUp, document, this), e.on("layout:widthchange", this._onWindowResize, this), e.on("image:updated", this._onImageUpdated, this)), e.UA.mobile || e.UA.android ? this._eventHandles.push(e.on("orientationchange", this._onWindowResize, window, this)) : this._eventHandles.push(e.on("windowresize", this._onWindowResize, null, this)), this._attachDropEvents()
                },
                _attachDropEvents: function() {
                    this._detachDropEvents(), this._dropHandlers = [];
                    var e = h.doc;
                    this._dropHandlers.push(h.addEventListener(e, "dragEnter", this._onDragEnter, this), h.addEventListener(e, "dragover", this._onDragOver, this), h.addEventListener(e, "drop", this._onDrop, this))
                },
                _detachDropEvents: function() {
                    var e = this._dropHandlers;
                    e && e.forEach(function(e) {
                        h.removeEventListener(e)
                    })
                },
                _initializeRouter: function() {
                    e.HistoryHash.hashPrefix = "!", this._router = new e.Router({
                        root: this._getRouterRoot(),
                        routes: this._getRouterRoutes()
                    })
                },
                _getRouterRoot: function() {
                    return this._rootURL
                },
                _getRouterRoutes: function() {
                    var t = this,
                        i = function() {
                            t._commentsTimer && t._commentsTimer.cancel(), t._commentsTimer = e.later(250, t, function() {
                                this._updateComments(this._getCurrentImage())
                            })
                        },
                        a = function(e) {
                            var i = t._images.getById(e);
                            return i
                        },
                        s = function(e, a, s) {
                            t._clearCurrentImageAlbum(), t._updateGalleryState({
                                imageId: e,
                                imageKey: a,
                                action: "",
                                size: ""
                            }), t.closeLightbox(), t._routeImageKey(s), i()
                        };
                    return [{
                        path: "/",
                        callbacks: function(e) {
                            var i = t._images.item(0),
                                a = t._getCurrentPage();
                            1 === a ? s(i.get("ImageID"), i.get("ImageKey"), e) : a > 1 ? t._changePageForImageKey() : t._renderEmpty()
                        }
                    }, {
                        path: "/:imageidkey",
                        callbacks: function(e) {
                            var i = S.parseImageKey(e.params.imageidkey),
                                n = a(i);
                            n ? s(n.get("ImageID"), n.get("ImageKey"), e) : t._changePageForImageKey(i)
                        }
                    }, {
                        path: "/:imageidkey/:size",
                        callbacks: function(e) {
                            var i, n, o = S.parseImageKey(e.params.imageidkey),
                                r = t._galleryState,
                                l = a(o),
                                g = e.params.size;
                            if (l && !C[g]) {
                                if (s(l.get("ImageID"), l.get("ImageKey"), e), t._updateSocialMetadata(l), "buy" === g.toLowerCase() && (i = t._getGalleryAlbum(), i && i.get("IsSellable"))) {
                                    if (e.query.returnTo) {
                                        var h = SM["import"]("sm-smuglog");
                                        h.add("sm-cart-helpers", {
                                            message: "Redirected from " + e.query.returnTo + " for AddToCart"
                                        }, h.LEVEL_NOTICE), n = function() {
                                            window.location = e.query.returnTo
                                        }
                                    } else n = function() {
                                        t._router.save(t._createImageRoute(l.get("ImageID"), l.get("ImageKey")))
                                    };
                                    var d = SM["import"]("sm-cart-helpers");
                                    d.deprecatedShowAddToCart(l, i, {
                                        selection: e.query,
                                        onClose: n
                                    }).then(null, n)
                                }
                                return void(("download" === g || "verified" === g) && (t._router.save(t._createImageRoute(l.get("ImageID"), l.get("ImageKey"))), "verified" === g ? t._downloadGallery(null, !0) : t._downloadGallery()))
                            }
                            l ? (r.imageId !== l.get("ImageID") || r.size !== e.params.size || "lightbox" !== r.action) && (t._clearCurrentImageAlbum(), r = t._updateGalleryState({
                                imageId: l.get("ImageID"),
                                imageKey: l.get("ImageKey"),
                                action: "lightbox",
                                size: e.params.size
                            }), t.openLightbox(l), t._preCacheLightboxImages(l), t._updateSocialMetadata(l)) : t._changePageForImageKey(o), SM.Tracker.trackPageview(window.location.href)
                        }
                    }]
                },
                _routeImageKey: function() {
                    return this
                },
                openLightbox: function(e) {
                    var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : !1,
                        i = this._galleryState,
                        a = this.initLightbox();
                    e || (e = this._getCurrentImage()), a.setAttrs({
                        imageSize: i.size || "A",
                        image: e,
                        launchAsSlideshow: t
                    }), a.get("visible") || a.show(), this._calcLightboxNavArrows(e)
                },
                _preCacheLightboxImages: function(e) {
                    var t = this._images.indexOf(e),
                        i = this._images.item(t + 1),
                        a = this._images.item(t - 1);
                    i && this._preCacheLightboxImage(i), a && this._preCacheLightboxImage(a)
                },
                _calcLightboxNavArrows: function(e) {
                    var t, i, a = this._getCurrentPage(),
                        s = this._images.get("TotalPages"),
                        n = this._images.get("TotalItems"),
                        o = this._images.indexOf(e);
                    a > 1 && s > a ? (t = !0, i = !0) : 1 === a ? (t = 0 === o ? !1 : !0, i = o === n - 1 ? !1 : !0) : a === s && (i = o === this._images.get("ItemsOnPage").length - 1 ? !1 : !0, s > 1 && (t = !0)), this._lightbox.nav.toggleNavArrows(t, i)
                },
                closeLightbox: function() {
                    this._lightbox && this._lightbox.get("visible") && this._lightbox.set("visible", !1, {
                        src: "gallery"
                    })
                },
                _getButtonNode: function(e) {
                    return e.ancestor(".sm-button", !0, ".sm-tile-info")
                },
                _getImageButtonContext: function(e) {
                    var t = e.get("parentNode"),
                        i = t.getData("ImageKey"),
                        a = this._images.getById(i),
                        s = {
                            image: null,
                            album: null,
                            galleryAlbum: null
                        };
                    return a || (a = this._getCurrentImage()), a && (s = {
                        image: a,
                        album: a.getRelated("Album"),
                        galleryAlbum: this._getGalleryAlbum(),
                        requestData: this.get("galleryRequestData"),
                        realGallery: !0
                    }), s
                },
                _getCurrentImage: function() {
                    var e = this._galleryState;
                    return this._currentImage || (this._currentImage = this._images.getById(e.imageKey) || this._images.item(0)), this._currentImage
                },
                _getCurrentImageIndex: function() {
                    if (null === this._currentImageIndex) {
                        var e = this._getCurrentImage();
                        this._currentImageIndex = this._images.indexOf(e)
                    }
                    return this._currentImageIndex
                },
                _getCurrentAlbum: function() {
                    if (!this._currentAlbum) {
                        var e = this._getCurrentImage();
                        e ? this._currentAlbum = e.getRelated("Album") : this._currentAlbum = null
                    }
                    return this._currentAlbum
                },
                _getGalleryAlbum: function() {
                    var t = this.get("galleryType"),
                        i = this.get("galleryRequestData");
                    return this._galleryAlbum || t !== I.ALBUM || (this._galleryAlbum = e.ModelStore.find(e.SM.Models.Album, i.albumId)), this._galleryAlbum
                },
                _clearCurrentImageAlbum: function() {
                    this._currentImage = null, this._currentImageIndex = null, this._currentAlbum = null
                },
                _renderMenus: function(e) {
                    var t = this._getGalleryAlbum(),
                        i = this.get("galleryStyle"),
                        a = this.get("galleryType");
                    this.get("showBuyButton") && (t && t.get("IsSellable") || I.ALBUM !== a) && (this._renderBuyButton(), this._renderBuyMenu()), this._enableRouting && (!t || t && t.get("Slideshow") && b.SLIDESHOW !== i) && this._router.onceAfter("ready", function() {
                        this._renderSlideshowButton()
                    }, this), I.ALBUM === a && t && t.get("AllowDownloads") && this._images.get("TotalItems") >= this._minNumImagesForDownloadAll && this._renderDownloadButton()
                },
                _updateMenus: function() {
                    return this
                },
                _renderDownloadButton: function() {
                    this._downloadNode = this.get("container").one(".sm-gallery-download-button"), this._downloadNode && (this._downloadNode.setHTML(e.SM.Templates.button({
                        icon: "Download",
                        size: "small",
                        value: "download",
                        label: "Download All"
                    })), this._eventHandles.push(this._downloadNode.on("click", this._downloadGallery, this)))
                },
                _renderSlideshowButton: function() {
                    this._slideshowNode = this.get("container").one(".sm-gallery-slideshow-button"), this._slideshowNode && (this._slideshowNode.setHTML(e.SM.Templates.button({
                        icon: "PlayerPlay",
                        size: "small",
                        value: "slideshow",
                        label: "Slideshow"
                    })), this._eventHandles.push(this._slideshowNode.on("click", this._showSlideshow, this)))
                },
                _renderBuyMenu: function() {
                    this._buyMenu = new e.SM.Menus.Buy({
                        galleryAlbum: this._getGalleryAlbum()
                    }), this._buyMenu.menu.render()
                },
                _renderBuyButton: function() {
                    this._buyMenuNode = this.get("container").one(".sm-gallery-buymenu"), this._buyMenuNode && (this._buyMenuNode.setHTML(e.SM.Templates.button({
                        icon: "CartAdd",
                        label: "Buy Photos",
                        skin: "accent",
                        size: "small"
                    })), this._eventHandles.push(this._buyMenuNode.on("click", this._handleBuyButtonClick, this)))
                },
                _handleBuyButtonClickAnalytic: function() {
                    a.Tracker.createEvent(a.CATEGORY.BUY, "Start", {
                        property: "Gallery",
                        isOwner: s.user ? s.user.isOwner : !1
                    }).addContext(a.CONTEXT.NODE, {
                        node_type: "Gallery",
                        node_id: s.nodeId,
                        node_uri: s.model.get("UrlPath"),
                        gallery_style: this.get("galleryStyle")
                    }).log()
                },
                _handleBuyButtonClick: function(t) {
                    e.SM.Page.uxdisabled || (this._handleBuyButtonClickAnalytic(), this._buyMenu._loadMenu(), this._buyMenu.menu.show({
                        anchorPoint: t.target
                    }))
                },
                _onImageUpdated: function() {
                    return this
                },
                _setPageAlbum: function() {
                    e.SM.Page.user && e.SM.Page.owner && (e.SM.Page.user.nickName === e.SM.Page.owner.nickName || e.SM.Page.user.isAdmin) && I.ALBUM === this.get("galleryType") && (e.SM.Page.album = new e.SM.Models.Album(this._getGalleryAlbum().getAttrs()))
                },
                _onWindowResize: function() {
                    this._resizeTimer && this._resizeTimer.cancel(), this._resizeTimer = e.later(150, this, function() {
                        this._syncDOMSizes(), this._resize()
                    })
                },
                _syncDOMSizes: function() {
                    var t = this.get("container");
                    this._winHeight = e.DOM.winHeight(), this._winWidth = e.DOM.winWidth(), this._containerXY = t.getXY(), this._containerWidth = t.get("offsetWidth"), this._usableWinHeight = this._winHeight - 168, this._lightboxSize = this._calculateLightboxSize()
                },
                _resize: function() {},
                _loadImages: function(t, i) {
                    var a = this,
                        s = this.get("container").one(".sm-gallery-empty") ? !0 : !1;
                    return new e.Promise(function(n) {
                        a._images || (a._images = new e.SM.Models.GalleryImageList);
                        var r = 0 === t.PageNumber;
                        r ? t.imageSizes = a._getPrefetchSizes() : delete t.imageSizes, a._prefetcher.stopAll(), a._images.load({
                            apiCategory: a.get("galleryType"),
                            data: t,
                            freshRequest: s || i || a._forceFreshRequest ? !0 : !1,
                            prefetchNext: a._enablePrefetching
                        }, function(e, t) {
                            if (!e) {
                                delete a._images._lastApiRequest.data.imageSizes;
                                var i = a._getPrefetchUrls(a._images, r),
                                    s = a._getLightBoxPrefetchSizes(a._images);
                                o.prefetch(i.concat(s)), n(a._images), a._nextPageImageUrl = t.NextImageUrl, a._prevPageImageUrl = t.PrevImageUrl, a._nextPageImageKey = t.NextImageKey, a._prevPageImageKey = t.PrevImageKey
                            }
                        }), a._enablePrefetching && e.once("modelListPrefetchComplete", function(e) {
                            var t, i = e.response;
                            i && (t = i.results.Images || null), a._prefetchImages(a._images, t || [])
                        })
                    })
                },
                _getGalleryRequestData: function(e, t, i) {
                    var a = this.get("galleryRequestData");
                    return a.PageNumber = e || 0, a.imageId = t || 0, a.imageKey = i || "", a.returnModelList = !0, a.PageSize = this._pageSize, a
                },
                _prefetchImages: function() {
                    return this
                },
                _preCacheLightboxImage: function(t) {
                    var a, s = this._galleryState,
                        n = s.size,
                        o = e.SM.Views.Lightbox.IMAGE_ZOOM_MULTIPLIER;
                    if ("O" !== n) {
                        if (n && "A" !== n) a = i.get({
                            sources: t.fakeImageSizeDetails(),
                            shortSize: n
                        });
                        else {
                            var r = this._winWidth,
                                l = this._winHeight;
                            e.UA.touchEnabled && (e.UA.ios || e.UA.android) && (r *= o, l *= o), a = i.get({
                                sources: t.fakeImageSizeDetails(),
                                minWidth: r,
                                minHeight: l
                            })
                        }
                        this._prefetcher.promoteUrl(a.url), this._prefetcher.run()
                    }
                },
                _renderHeader: function() {
                    var t = this.get("container");
                    this._headerNode = e.Node.create(this.headerTemplate), t.append(this._headerNode)
                },
                _handleImageDownloadButtonClick: function(t) {
                    if (!e.SM.Page.uxdisabled) {
                        var i, a, s, n = this._getButtonNode(t.currentTarget),
                            o = this._getImageButtonContext(n),
                            l = e.SM.Page.user,
                            g = "//" + SM.env.host.photos;
                        o.image && o.album && (a = o.image, i = o.album, s = new r(a.getUrlForSize("D")), g += s.path, !i.get("HasDownloadPassword") || !0 === this._galleryUnlocked[a.get("AlbumKey")] || l && (l.isAdmin || l.isOwner) ? h.isStandalone ? h.escapeMobileWebApp(g) : h.doc.location.href = g : this._downloadGallery(null, !1, g))
                    }
                },
                _downloadGallery: function(i, a, s) {
                    if (!e.SM.Page.uxdisabled) {
                        var n = this._getCurrentAlbum(),
                            o = this,
                            r = e.SM.Page.user,
                            l = {
                                albumKey: n.get("AlbumKey"),
                                imageUrl: s ? s : "",
                                downloadEnabled: !!n.get("AllowDownloads"),
                                downloadPassword: !!n.get("HasDownloadPassword"),
                                isLoggedInUser: !!r,
                                isOwner: !(!r || !r.isAdmin && !r.isOwner),
                                unlockStateCallback: function(e) {
                                    o._galleryUnlocked[n.get("AlbumKey")] = e
                                }
                            };
                        !0 === a && (l.verifiedAction = !0), this._galleryUnlocked[n.get("AlbumKey")] && (l.downloadPassword = !1), t.mount(l)
                    }
                },
                _showSlideshow: function() {
                    if (!e.SM.Page.uxdisabled) {
                        this.openLightbox(this._getCurrentImage(), !0);
                        var t, i = this._lightbox;
                        i.slideshow.handleSlideshowClick(null, "Gallery"), t = i.on("exitfullscreen", function() {
                            i.hide(), t.detach()
                        })
                    }
                },
                _renderFooter: function() {
                    var t = this.get("container");
                    this._footerNode = e.Node.create(this.footerTemplate), t.append(this._footerNode)
                },
                _renderDescription: function() {
                    switch (this.get("galleryType")) {
                        case I.ALBUM:
                            this._addDescription(this._getGalleryAlbum().get("Description"));
                            break;
                        case I.KEYWORD:
                            var t = new e.SM.API,
                                i = this.get("galleryRequestData");
                            t.sendRequest({
                                method: "rpc.keyword.getrelated",
                                data: {
                                    nickName: e.SM.Page.owner ? e.SM.Page.owner.nickName : "",
                                    keywords: i.keywords
                                },
                                freshRequest: !0,
                                callback: {
                                    success: function(t) {
                                        this._addDescription(e.Node.create(this.keywordsTemplate({
                                            relatedKeywords: t.response.results.RelatedKeywords,
                                            currentKeywords: i.keywords.split("-")
                                        })))
                                    },
                                    context: this
                                },
                                cfg: {
                                    method: "POST"
                                }
                            });
                            break;
                        case I.POPULAR:
                            break;
                        case I.DATE:
                            this._renderDatePicker()
                    }
                },
                _addDescription: function(e) {
                    var t = this.get("container"),
                        i = t.one(".sm-gallery-description");
                    "" !== e && i ? (this._headerNode.addClass("sm-gallery-header-has-description"), i.setHTML(e)) : this._headerNode.removeClass("sm-gallery-header-has-description")
                },
                _renderDatePicker: function() {
                    var t = this.get("container").one(".sm-gallery-description"),
                        i = e.Node.create('<div class="sm-gallery-date-container"></div>'),
                        a = this.get("galleryRequestData").date.split(","),
                        s = a[1];
                    this._headerNode.addClass("sm-gallery-header-has-description"), t.append(i), t.addClass("sm-date-description"), this.startDate = a[0], i.append("<h3>" + this.startDate + " to " + s + "</h3>");
                    var n = e.Node.create(e.SM.Templates.button({
                        icon: "Calendar",
                        size: "small",
                        noChrome: !0
                    }));
                    i.append(n), n.after("click", this._showCalendarPanel, this)
                },
                _showCalendarPanel: function() {
                    this._calendarPanel ? this._calendarPanel.show() : e.use("sm-calendar", e.bind(function() {
                        this._calendar = new e.SM.Calendar({
                            startDate: new Date(this.startDate)
                        }), this._calendarPanel = new e.SM.Panel({
                            hideOn: [{
                                eventName: "clickoutside"
                            }],
                            align: {
                                node: e.one(".sm-gallery-description"),
                                points: [e.WidgetPositionAlign.TL, e.WidgetPositionAlign.BL]
                            },
                            smbuttons: [{
                                value: "cancel",
                                label: "Cancel"
                            }, {
                                value: "update",
                                label: "Update",
                                skin: "submit",
                                disabled: !0
                            }]
                        });
                        var t = this._calendar.calendar,
                            i = new Date(1971, 0, 1);
                        t.set("minimumDate", i), this._calendarPanel.render(".sm-user-overlay-container"), this._calendarPanel.on("hide", function() {
                            var e = t.get("contentBox");
                            e.setStyle("visibility", null), e.all("table").setStyle("visibility", null)
                        }), this._calendarPanel.setStdModContent("body", "<div></div>"), this._calendar.render(this._calendarPanel.getStdModNode("body"));
                        var a = this._calendarPanel.get("boundingBox"),
                            s = a.one("button[data-value=update]");
                        s.on("click", function() {
                            var e, i, a = t.get("selectedDates"),
                                s = a[0],
                                n = a[a.length - 1];
                            s && n && (e = s.getFullYear() + "-" + (s.getMonth() + 1) + "-" + s.getDate(), i = n.getFullYear() + "-" + (n.getMonth() + 1) + "-" + n.getDate(), window.location.href = "/date/" + e + "/" + i)
                        }), a.one("button[data-value=cancel]").on("click", function() {
                            this._calendarPanel.hide()
                        }, this), t.once("selectionChange", function() {
                            s.removeAttribute("disabled")
                        })
                    }, this))
                },
                _renderLayout: function() {
                    var t = this.get("container"),
                        i = e.Node.create(this.layoutTemplate);
                    return t.append(i), i
                },
                _renderImages: function() {
                    return this
                },
                initLightbox: function(t) {
                    if (!this._lightbox || t) {
                        this._lightbox && this._lightbox.destroy();
                        var i = this._getGalleryAlbum(),
                            a = {};
                        if (a = e.merge({
                                autoHideControls: !0
                            }, this.get("lightboxConfig"), {
                                visible: !1,
                                galleryRequestData: this.get("galleryRequestData")
                            }), this._lightbox = new e.SM.Views.Lightbox(a), this._lightbox.plug(e.SM.Views.Lightbox.Plugins.Nav), this._lightbox.plug(e.SM.Views.Lightbox.Plugins.Basic, {
                                galleryAlbum: i,
                                galleryType: this.get("galleryType"),
                                requestData: this.get("galleryRequestData"),
                                imageSizeChange: "manual",
                                buyButtonSkin: a.buyButtonSkin,
                                buyButtonStyle: a.buyButtonStyle,
                                showTitle: a.showTitle,
                                showCaption: a.showCaption,
                                showKeywords: a.showKeywords
                            }), !i || i && i.get("Slideshow")) {
                            var s = this.get("slideshowConfig");
                            this._lightbox.plug(e.SM.Views.Lightbox.Plugins.Slideshow, {
                                galleryData: this.get("galleryRequestData"),
                                modelList: this._images,
                                slideshowConfig: s,
                                showExternalPlayButton: a.playButton
                            })
                        }
                        e.one("html").hasClass("sm-user-ui") ? this._lightbox.render(".sm-user-overlay-container") : this._lightbox.render(), this._lightbox.after("visibleChange", this._afterLightboxVisibleChange, this), this._lightbox.basic.after("imageSizeSelected", this._afterLightboxImageSizeSelected, this), this._lightbox.nav.after("navigate", this._afterLightboxNavigate, this)
                    }
                    return this._lightbox
                },
                _initializeComments: function() {
                    if (this.get("showComments") && !this._commentsInitialized) {
                        var t = e.Node.create(this.commentsTemplate);
                        this._commentsView = new e.SM.Views.CommentList.Generic({
                            container: e.Node.create('<div class="sm-gallery-comments"></div>')
                        }), t.append(this._commentsView.get("container")), this._footerNode.append(t), this._commentsInitialized = !0
                    }
                },
                _updateComments: function(e) {
                    if (this.get("showComments")) {
                        var t = e.get("CanComment");
                        this._commentsInitialized || this._initializeComments(), t ? (this._commentsView.setAttrs({
                            type: "Image",
                            typeId: e.get("ImageID"),
                            typeKey: e.get("ImageKey")
                        }), this._commentsView.render(), this._commentsView.get("container").show()) : this._commentsView.get("container").hide()
                    }
                },
                _updateSocialMetadata: function(t) {
                    var i = new e.SM.Page.SocialMetadata;
                    i.render(t)
                },
                _afterLightboxImageSizeSelected: function(e) {
                    if (this._enableRouting) {
                        var t = this._getCurrentImage(),
                            i = e.size;
                        this._router.save(this._createImageRoute(t.get("ImageID"), t.get("ImageKey"), i))
                    }
                },
                _afterLightboxVisibleChange: function(e) {
                    if (this._enableRouting) {
                        var t = this._getCurrentImage();
                        e.newVal || "gallery" === e.src || this._router.save(this._createImageRoute(t.get("ImageID"), t.get("ImageKey")))
                    }
                },
                _afterLightboxNavigate: function(e) {
                    if (this._enableRouting) {
                        var t, i, a = e.direction,
                            s = this._galleryState,
                            n = this._getCurrentPage();
                        this._clearCurrentImageAlbum(), "left" === a ? (i = this._getPreviousImage(), t = n - 1) : "right" === a && (i = this._getNextImage(), t = n + 1), i ? this._router.save(this._createImageRoute(i.get("ImageID"), i.get("ImageKey"), s.size)) : this._changePage(t)
                    }
                },
                _onKeyUp: function(t) {
                    if (this._enableRouting) {
                        var i, a, s, n, o = t.target.get("tagName").toLowerCase(),
                            r = t.charCode;
                        if (!(e.Array.indexOf(["textarea", "input", "object"], o) > -1 || e.SM.Page.uxdisabled)) {
                            i = this._getCurrentImage();
                            var l = SM["import"]("sm-smuglog");
                            if (i) {
                                if (a = i.get("ImageID"), s = i.get("ImageKey"), 65 === r) n = "A";
                                else if (83 === t.charCode) n = "S";
                                else if (77 === t.charCode) n = "M";
                                else if (76 === t.charCode) n = "L";
                                else if (49 === t.charCode) n = "XL";
                                else if (50 === t.charCode) n = "X2";
                                else if (51 === t.charCode) n = "X3";
                                else if (79 === t.charCode) n = "O";
                                else if (72 === t.charCode) return void(this._imageEditMenu && this._imageEditMenu.handleHideAction(i, this._getCurrentAlbum(), this._getGalleryAlbum()));
                                n && (l.add("sm-gallery-views", {
                                    message: "Lightbox Opened by Keyboard",
                                    size: n,
                                    nickName: e.SM.Page.user.nickName
                                }, l.LEVEL_NOTICE), this._router.save(this._createImageRoute(a, s, n)))
                            }
                        }
                    }
                },
                _renderEmpty: function() {
                    var t, i, a = this.get("container"),
                        n = e.Node.create(this.emptyTemplate),
                        o = this.get("galleryType");
                    if (a.setHTML(n), this._headerNode = t = a.one(".sm-gallery-header"), t.addClass("sm-gallery-header-empty-gallery"), o === I.ALBUM) {
                        if (i = this._getGalleryAlbum(), this._addDescription(i.get("Description")), !e.SM.Page.user) return;
                        a.one(".sm-button").on("click", function() {
                            if ((e.UA.android || e.UA.ios) && e.DOM.winWidth() <= e.SM.Page.responsiveDesign.mobileMaxWidth) window.location.href = "/upload/" + i.get("AlbumKey");
                            else {
                                this._detachDropEvents();
                                var t = this;
                                e.SM.Page.nav.upload.showUploadPanel(i.get("Title"), {
                                    albumKey: i.get("AlbumKey"),
                                    nodeId: s.nodeId
                                }, function(e) {
                                    t._attachDropEvents(), e && (window.location.href = window.location.href)
                                })
                            }
                        }, this), i.get("GuestUploadURL") && a.one(".sm-gallery-empty-owner").append("<div>Guest Upload URL: " + i.get("GuestUploadURL") + "</div>")
                    } else o === I.KEYWORD ? (t.addClass("sm-gallery-header-has-description"), a.one(".sm-gallery-empty-owner").setHTML("<h2>No Photos found.</h2>")) : o === I.DATE ? (t.addClass("sm-gallery-header-has-description"), this._renderDatePicker(), a.one(".sm-gallery-empty-owner").setHTML("<h2>No Photos found.</h2>")) : a.one(".sm-gallery-empty-owner").setHTML("<h2>No Photos found.</h2>");
                    this.closeLightbox()
                },
                _createImageRoute: function(e, t, i) {
                    var a = [];
                    return a.push(""), a.push("i-" + t), i && a.push(i), a.join("/")
                },
                _calculateLightboxSize: function() {
                    return e.SM.Models.Image.getLargestStandardSize(this._winWidth, this._winHeight)
                },
                _updateGalleryState: function(t) {
                    return this._galleryState = this._galleryState || {
                        imageId: 0,
                        imageKey: "",
                        action: "",
                        size: ""
                    }, this._galleryState = e.merge(this._galleryState, t), this._galleryState
                },
                _getPreviousImage: function() {
                    var e = this._getCurrentImageIndex();
                    return this._images.item(e - 1)
                },
                _getNextImage: function() {
                    var e = this._getCurrentImageIndex();
                    return this._images.item(e + 1)
                },
                _onImageDeleted: function() {
                    var e, t = this._images.get("PageNumber"),
                        i = this._getCurrentImageIndex(),
                        a = this._images.item(i + 1);
                    e = a ? a.get("ImageKey") : e ? this._nextPageImageKey : i > 0 ? this._images.item(i - 1).get("ImageKey") : t > 1 ? this._prevPageImageKey : null, this._changePageForImageKey(e)
                },
                _destroyPagination: function() {},
                _renderPagination: function() {},
                _getCurrentPage: function() {
                    return this._images.get("PageNumber")
                },
                _changePageForImageKey: function(e) {
                    var t = this,
                        i = this._loadImages(this._getGalleryRequestData(0, null, e), !0);
                    return i.then(function(i) {
                        var a = i.getById(e);
                        t._clearCurrentImageAlbum(), t._updateGalleryState({
                            imageId: a ? a.get("ImageID") : 0,
                            imageKey: a ? a.get("ImageKey") : ""
                        }), i.size() ? (t._renderImages(i), t._destroyPagination(), t._renderPagination(i), a ? ("lightbox" === t._galleryState.action && (t._lightbox.set("image", a), t._preCacheLightboxImages(a)), t._updateSocialMetadata(a), t._routeImageKey()) : t._router.replace("/")) : (t._router.replace("/"), t._renderEmpty())
                    }), i
                },
                _changePage: function(e, t) {
                    var i, a, s = this,
                        n = this._getCurrentPage(),
                        o = this._galleryState;
                    return e && e <= this._images.get("TotalPages") ? (i = this._loadImages(this._getGalleryRequestData(e), t), i.then(function(t) {
                        var i;
                        s._renderImages(t), i = n > e ? t.item(t.size() - 1) : t.item(0), "lightbox" === o.action && o.size && (a = o.size), s._router.save(s._createImageRoute(i.get("ImageID"), i.get("ImageKey"), a, e)), s._destroyPagination(), s._renderPagination(t)
                    }), i) : !1
                },
                _getLightBoxPrefetchSizes: function(t) {
                    var i = this._winWidth,
                        a = this._winHeight,
                        s = t.map(function(t) {
                            var s = e.SM.Views.Tile.getImageSize(t, "fit", i, {
                                maxHeight: a
                            });
                            return e.SM.Models.Image.getUrl(t, s)
                        });
                    return s
                },
                _getPrefetchSizes: function() {
                    return ""
                },
                _getPrefetchUrls: function(e, t) {
                    return []
                },
                _handleInlineEditClick: function(t, i) {
                    var a, s = t.currentTarget,
                        n = s.getData("name"),
                        o = this;
                    if (i = i || this._getCurrentImage(), !s.hasClass("sm-inlineedit-plugged") && "A" !== t.target.getDOMNode().tagName && i.get("CanEdit"))
                        if ("All" === n) {
                            var r = ["Title", "CaptionRaw"],
                                l = s.get("parentNode"),
                                g = t.target.getData("singlefield");
                            i.get("ShowKeywords") && r.push("Keywords"), a = s.ancestor(".sm-inlineedit-no-info"), a && a.removeClass("sm-inlineedit-no-info"), g ? this._plugInlineNode(l.one('[data-name="' + g + '"]'), i) : e.use("sm-nodeedit", function() {
                                e.Array.each(r, function(e) {
                                    var t = l.one('[data-name="' + e + '"]');
                                    o._plugInlineNode(t, i)
                                });
                                var t = a.one('[data-name="Title"] input').getDOMNode();
                                t.focus(), t.selectionStart = t.selectionEnd = i.get("Title").length
                            })
                        } else this._plugInlineNode(s, i)
                },
                _plugInlineNode: function(t, i) {
                    var a, s = t.getData("name"),
                        n = t.getData("type"),
                        o = t.getData("placeholder"),
                        r = this;
                    if ("Keywords" === s) {
                        var l = i.get("Keywords");
                        if (1 === l.length) {
                            var g = l[0];
                            a = -1 === g.indexOf(" ") ? g : '"' + g + '"'
                        } else a = i.get("Keywords").join("; ")
                    } else a = i.get(s);
                    t.unplug(), e.use("sm-nodeedit", function() {
                        t.plug(e.SM.Plugin.InlineEdit, {
                            value: a,
                            type: n,
                            placeholder: o
                        }), t.inlineedit.set("image", i), t.inlineedit.on("save", r._handleInlineEditSave, r, s), t.inlineedit.after("cancel", r._handleInlineEditCancel, r, s)
                    })
                },
                _handleInlineEditSave: function(t, i) {
                    var a = t.value,
                        s = t.currentTarget,
                        n = s.get("image"),
                        o = this._getGalleryAlbum();
                    this._currentInlineNode = s.get("host"), n.set(i, a), n.save({
                        data: {
                            ImageID: n.get("ImageID"),
                            ImageKey: n.get("ImageKey"),
                            GalleryAlbumID: o ? o.get("AlbumID") : 0,
                            GalleryAlbumKey: o ? o.get("AlbumKey") : ""
                        }
                    }, e.bind(this._afterInlineEditSave, this, i, n)), this._forceFreshRequest = !0
                },
                _handleInlineEditCancel: function() {},
                _onDragEnter: function(e) {
                    e.preventDefault()
                },
                _onDragOver: function(e) {
                    e.preventDefault()
                },
                _onDrop: function(e) {
                    var t = this,
                        i = this._getGalleryAlbum(),
                        a = i && i.get("IsOwner");
                    h.querySelector(".sm-modal .sm-uploader") || i && a && (e.preventDefault(), u(e).then(function(e) {
                        SM.load("sm-uploader").then(function(a) {
                            t._detachDropEvents();
                            var n = a.showAsModal({
                                albumKey: i.get("AlbumKey"),
                                nodeId: s.nodeId,
                                nodeName: i.get("Title"),
                                onClose: function(e) {
                                    e ? window.location.href = window.location.href : t._attachDropEvents()
                                }
                            });
                            n.addFiles(e, {
                                eventLabel: "Gallery Drag And Drop"
                            })
                        })
                    })["catch"](function(e) {
                        e.type !== m.NO_FILES_DROPPED.type && (_.trackEvent(_.ACTIONS.error, {
                            params: {
                                label: e.label || "SmugMug Error",
                                property: e.type
                            },
                            screenName: "Gallery"
                        }), s.alert(c(e, {
                            isAlbumNode: !0
                        })))
                    }))
                },
                _setContainerSize: function() {
                    var e = this.get("container");
                    this._containerWidth <= s.responsiveDesign.tabletMaxWidth ? e.setAttribute("data-size", "medium") : e.setAttribute("data-size", "large")
                }
            }, {
                ATTRS: {
                    galleryType: {
                        value: I.ALBUM
                    },
                    galleryRequestData: {
                        value: {
                            albumId: 0,
                            albumKey: ""
                        }
                    },
                    largestSize: {},
                    showComments: {
                        value: !0
                    },
                    enablePrefetching: {
                        value: !0
                    },
                    showBuyButton: {
                        value: !0
                    },
                    showDownloadButton: {
                        value: !0
                    },
                    enableRouting: {
                        value: !0
                    },
                    slideshowConfig: {},
                    lightboxConfig: {},
                    galleryStyle: {
                        value: "unknown"
                    }
                },
                GALLERY_TYPES: I
            });
        e.namespace("SM.Gallery").TYPES = I;
        var T = void 0;
        ! function() {
            var t = SM["import"]("sm-component-button"),
                i = SM["import"]("sm-dom"),
                a = SM["import"]("sm-gallery-cover"),
                s = SM["import"]("sm-image-sizes"),
                n = SM["import"]("sm-modal"),
                o = SM["import"]("sm-component-panel-base"),
                r = SM["import"]("sm-page"),
                l = SM["import"]("react"),
                g = SM["import"]("react-dom"),
                h = SM["import"]("sm-resource-core"),
                d = "Album",
                m = "NodeCoverImage",
                u = "ImageSizeDetails",
                c = "PointOfInterest",
                _ = "Regions",
                p = .45,
                y = 48,
                f = "sm-gallery-cover-container",
                v = "sm-right-click-message",
                w = ".sm-gallery-header",
                b = 500,
                C = 375,
                S = 312,
                P = .5,
                A = .5,
                R = .25,
                B = 3;
            T = e.Base.create("sm-gallery-coverview", M, [], {
                destructor: function() {
                    g.unmountComponentAtNode(this._galleryCoverContainer)
                },
                _renderHeader: function() {
                    T.superclass._renderHeader.call(this), this._renderCoverHeader()
                },
                _renderCoverHeader: function() {
                    if (this._showBreadcrumb = this.get("showBreadcrumb"), this._headerContainer = i.querySelector(w), this._headerContainer) switch (this.get("galleryType")) {
                        case I.ALBUM:
                            this._galleryCoverContainer = this._headerContainer, i.classList(this._galleryCoverContainer).add(f), this._renderCoverContent();
                            break;
                        case I.DATE:
                        case I.KEYWORD:
                        case I.POPULAR:
                            this._galleryCoverContainer = i.doc.createElement("div"), i.classList(this._galleryCoverContainer).add(f), this._headerContainer.appendChild(this._galleryCoverContainer), this._showBreadcrumb = !1, this._renderCoverContent()
                    }
                },
                _renderCoverContent: function(t) {
                    var i = this;
                    if (this._cover) this._cover = l.cloneElement(this._cover, t);
                    else {
                        var s = {
                                breadcrumbs: this.get("breadcrumbs"),
                                onBuyButtonClick: function(t) {
                                    t.target = e.one(t.target), i._handleBuyButtonClick(t)
                                },
                                onDownloadButtonClick: function() {
                                    return i._downloadGallery()
                                },
                                onImageDragEnd: function(e) {
                                    return i._handleRepositionEnd(e)
                                },
                                onRepositionCancelClick: function() {
                                    return i._handleRepositionCancelClick()
                                },
                                onRepositionSaveClick: function() {
                                    return i._handleRepositionSaveClick()
                                },
                                onRepositionStartClick: function() {
                                    return i._handleRepositionStartClick()
                                },
                                onSlideshowButtonClick: function() {
                                    return i._showSlideshow()
                                },
                                showBreadcrumb: this._showBreadcrumb,
                                tileSpacing: parseInt(this.get("tileSpacing"), 10)
                            },
                            n = this._calculateCoverDimensions();
                        s.height = n.height, s.width = n.width;
                        var o = this._getNodeResource();
                        if (o && (s.description = o.get("FormattedValues").Description.html, s.title = o.get("Name"), s.showImage = this.get("supportCoverImage") && o.get("ShowCoverImage"), s.showImage)) {
                            var h = this._getCoverImageResource();
                            h && (s.image = this._calculateCoverImageSizeDetail(), s.imageOffset = this._calculateCoverImageDisplayOffset(), this._getAlbumResource().get("Protected") && (s.onImageRightClick = this._handleRightClickMessage), s.showRepositionStartButton = r.isOwnerOrAdmin())
                        }
                        this._cover = l.createElement(a, Object.assign(s, t))
                    }
                    g.render(this._cover, this._galleryCoverContainer)
                },
                _renderCoverRepositionMode: function() {
                    this._renderCoverContent({
                        disableRepositionSaveButton: !0,
                        imageDraggable: !0,
                        showBreadcrumb: !1,
                        showCoverButtons: !1,
                        showInfo: !1,
                        showMask: !0,
                        showRepositionButtons: !0
                    }), r.disablePageScroll(!0);
                    var e = i.getAbsoluteBoundingRect(this._galleryCoverContainer);
                    i.win.scroll(Math.min(i.win.pageXOffset, e.left - y), Math.min(i.win.pageYOffset, e.top - y))
                },
                _renderCoverViewMode: function() {
                    var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : !1;
                    this._renderCoverContent({
                        imageDraggable: !1,
                        imageOffset: this._calculateCoverImageDisplayOffset(e),
                        showBreadcrumb: this._showBreadcrumb,
                        showCoverButtons: !0,
                        showInfo: !0,
                        showMask: !1,
                        showRepositionButtons: !1,
                        showProgressBar: !1
                    }), r.enablePageScroll()
                },
                _renderEmpty: function() {
                    g.unmountComponentAtNode(this._galleryCoverContainer), T.superclass._renderEmpty.call(this), this._renderCoverHeader()
                },
                _renderMessagePanel: function() {
                    var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "",
                        i = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : "",
                        a = n.mount(l.createElement(n, null, l.createElement(o, null, l.createElement(o.Header, null, l.createElement("h1", null, e)), l.createElement(o.Body, null, l.createElement("p", null, i)), l.createElement(o.Buttons, null, l.createElement(t, {
                            onClick: function() {
                                n.unmount(a)
                            }
                        }, "Close")))))
                },
                _renderBuyButton: function() {
                    this._cover ? this._renderCoverContent({
                        showBuyButton: this._containerWidth >= r.responsiveDesign.mobileMaxWidth
                    }) : T.superclass._renderBuyButton.call(this)
                },
                _renderDownloadButton: function() {
                    this._cover ? this._renderCoverContent({
                        showDownloadButton: "iOS" !== SM.env.platform && "Android" !== SM.env.platform && this._containerWidth >= r.responsiveDesign.mobileMaxWidth
                    }) : T.superclass._renderDownloadButton.call(this)
                },
                _renderSlideshowButton: function() {
                    this._cover ? this._renderCoverContent({
                        showSlideshowButton: !0
                    }) : T.superclass._renderSlideshowButton.call(this)
                },
                _calculateContainerHeight: function(e) {
                    var t = Math.floor(this._winHeight * p);
                    return t = Math.max(t, S), t = e < r.responsiveDesign.tabletMaxWidth ? Math.min(t, C) : Math.min(t, b)
                },
                _calculateContainerWidth: function() {
                    return i.getElementScrollingWidth(this.get("container").getDOMNode())
                },
                _calculateCoverDimensions: function() {
                    var e = this._calculateContainerWidth(),
                        t = this._calculateContainerHeight(e);
                    return {
                        height: t,
                        width: e
                    }
                },
                _calculateCoverImageDisplayOffset: function() {
                    var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : !1,
                        t = this._calculateCoverDimensions(),
                        i = this._calculateCoverImageScaledDimensions(),
                        a = this._getCoverImageFocusPoint(e),
                        s = a.horizontal,
                        n = a.vertical;
                    return {
                        left: s * (t.width - i.width),
                        top: n * (t.height - i.height)
                    }
                },
                _calculateCoverImageScaledDimensions: function() {
                    var e = this._calculateCoverDimensions(),
                        t = this._calculateCoverImageSizeDetail(),
                        i = e.height,
                        a = e.width,
                        s = t.DisplayHeight,
                        n = t.DisplayWidth,
                        o = a / i,
                        r = n / s,
                        l = o > r ? a / n : i / s;
                    return {
                        height: s * l,
                        width: n * l
                    }
                },
                _calculateCoverImageSizeDetail: function() {
                    var e = this._calculateCoverDimensions(),
                        t = void 0,
                        i = this._getCoverImageResource();
                    return i && (t = new s(i.getExpansion(u)).cover(e.width, e.height)), t
                },
                _handleRightClickMessage: function(e) {
                    e.preventDefault(), r.Tooltip.showAtXY(SM.env.rightClickMessage, e.pageX, e.pageY, {
                        className: v
                    })
                },
                _handleRepositionStartClick: function() {
                    this._renderCoverRepositionMode()
                },
                _handleRepositionCancelClick: function() {
                    this._renderCoverViewMode(!0)
                },
                _handleRepositionEnd: function(e) {
                    var t = !1,
                        i = this._calculateCoverDimensions(),
                        a = this._getCoverImageFocusPoint(),
                        s = this._calculateCoverImageDisplayOffset(),
                        n = this._calculateCoverImageScaledDimensions(),
                        o = e.deltaX,
                        r = e.deltaY;
                    if (o) {
                        var l = s.left + o,
                            g = l / (i.width - n.width);
                        g = Math.max(g, 0), g = Math.min(g, 1), a.horizontal !== g && (a.horizontal = g, t = !0)
                    }
                    if (r) {
                        var h = s.top + r,
                            d = h / (i.height - n.height);
                        d = Math.max(d, 0), d = Math.min(d, 1), a.vertical !== d && (a.vertical = d, t = !0)
                    }
                    t && this._renderCoverContent({
                        disableRepositionSaveButton: !1
                    })
                },
                _handleRepositionSaveClick: function() {
                    var e = this,
                        t = this._getCoverImageFocusPoint(),
                        a = this._getCoverImageResource();
                    this._renderCoverContent({
                        showProgressBar: !0,
                        showRepositionButtons: !1
                    }), h.postUri(a.getExpansionUri(_), {
                        data: {
                            Height: 0,
                            Type: B,
                            Width: 0,
                            X: t.horizontal,
                            Y: t.vertical
                        }
                    }).then(function() {
                        e._getPointOfInterestResourceFromApi().then(function() {
                            e._renderCoverViewMode()
                        }, function() {
                            i.doc.location.reload(!0)
                        })
                    }, function() {
                        e._renderCoverViewMode(!0), e._renderMessagePanel("Oops...", "We couldn't save your gallery cover position. Please try again.")
                    })
                },
                _resize: function() {
                    this._setContainerSize(), this._resizeCover()
                },
                _resizeCover: function() {
                    if (this._cover) {
                        var e = this._calculateCoverDimensions(),
                            t = {
                                height: e.height,
                                width: e.width
                            };
                        this._getCoverImageResource() && (t.imageOffset = this._calculateCoverImageDisplayOffset()), this._renderCoverContent(t), this._renderMenus()
                    }
                },
                _getAlbumResource: function() {
                    return !this._albumResource && this._getNodeResource() && (this._albumResource = this._getNodeResource().getExpansion(d)), this._albumResource
                },
                _getCoverImageResource: function() {
                    return !this._coverImageResource && this._getNodeResource() && (this._coverImageResource = this._getNodeResource().getExpansion(m)), this._coverImageResource
                },
                _getNodeResource: function() {
                    return this._nodeResource || (this._nodeResource = h.loadLocal("nodeResource")), this._nodeResource
                },
                _getPointOfInterestResource: function() {
                    return !this._pointOfInterestResource && this._getCoverImageResource() && (this._pointOfInterestResource = this._getCoverImageResource().getExpansion(c)), this._pointOfInterestResource
                },
                _getPointOfInterestResourceFromApi: function() {
                    var e = this;
                    return this._getCoverImageResource().expand(c, {
                        refresh: !0
                    }).then(function(t) {
                        return e._pointOfInterestResource = t
                    })
                },
                _getCoverImageFocusPoint: function() {
                    var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : !1;
                    if (!this._coverImageFocusPoint || e) {
                        var t = this._calculateCoverImageSizeDetail(),
                            i = P,
                            a = void 0;
                        a = t.DisplayHeight > t.DisplayWidth ? R : A;
                        var s = this._getPointOfInterestResource();
                        s && (i = parseFloat(s.get("X")) || i, a = parseFloat(s.get("Y")) || a), this._coverImageFocusPoint = {
                            horizontal: i,
                            vertical: a
                        }
                    }
                    return this._coverImageFocusPoint
                }
            }, {
                ATTRS: {
                    breadcrumbs: {
                        value: []
                    },
                    showBreadcrumb: {
                        value: !1
                    },
                    supportCoverImage: {
                        value: !1
                    }
                }
            })
        }(),
        function() {
            var t = {
                    768: "sm-gallery-viewport-768",
                    1024: "sm-gallery-viewport-1024",
                    1280: "sm-gallery-viewport-1280",
                    1366: "sm-gallery-viewport-1366",
                    1440: "sm-gallery-viewport-1440",
                    1680: "sm-gallery-viewport-1680",
                    1920: "sm-gallery-viewport-1920",
                    2560: "sm-gallery-viewport-2560"
                },
                i = {
                    M: "sm-gallery-image-m",
                    L: "sm-gallery-image-l",
                    XL: "sm-gallery-image-xl",
                    X2: "sm-gallery-image-x2",
                    X3: "sm-gallery-image-x3"
                },
                a = {
                    FIVE: 480,
                    SIX: 576
                },
                s = {
                    THREE: 432,
                    FOUR: 576,
                    FIVE: 720,
                    SIX: 864,
                    SEVEN: 1008
                },
                n = {
                    TI: 100,
                    TH: 150
                };
            e.namespace("SM.Gallery").SmugMugView = e.Base.create("sm-gallery-smugmugview", T, [], {
                layoutTemplate: '<div class="sm-gallery-images yui3-g"><div class="yui3-u sm-gallery-image-container"><div class="sm-gallery-image"></div><div class="sm-gallery-image-bar"><div class="sm-gallery-image-pagination"></div><div class="sm-gallery-image-tools">' + e.SM.ImageButtons.getHTML("share") + e.SM.ImageButtons.getHTML("tools") + e.SM.ImageButtons.getHTML("info") + e.SM.ImageButtons.getHTML("download") + '</div><div class="sm-gallery-image-action">' + e.SM.ImageButtons.getHTML("favorite", {
                    label: "Favorite"
                }) + e.SM.ImageButtons.getHTML("favorites", {
                    label: "See All"
                }) + '</div></div><div class="sm-tile-info"></div></div><div class="yui3-u sm-gallery-tiles-container"><div class="sm-gallery-tilesnav"><a class="sm-gallery-nav sm-gallery-nav-left"><span class="sm-fonticon sm-fonticon-AngleBracketLeftSlim"></span></a><a class="sm-gallery-nav sm-gallery-nav-right"><span class="sm-fonticon sm-fonticon-AngleBracketRightSlim"></span></a><div class="sm-gallery-tiles"></div></div><div class="sm-gallery-tiles-bar"><div class="sm-gallery-tiles-pagination"></div></div></div></div>',
                destructor: function() {
                    var a = this.get("container");
                    this._tilesView && this._tilesView.destroy({
                        remove: !0
                    }), this._imageView && this._imageView.destroy({
                        remove: !0
                    }), this._leftArrowNode && this._leftArrowNode.destroy(), this._rightArrowNode && this._rightArrowNode.destroy(), this._pageSelect && this._pageSelect.destroy(), this._tilesContainer && this._tilesContainer.destroy(), this._tilesNavContainer && this._tilesNavContainer.destroy(), this._imageContainer && this._imageContainer.destroy(), this._paginationContainer && this._paginationContainer.destroy(), this._imagePaginationContainer && this._imagePaginationContainer.destroy(), e.Object.each(t, function(e) {
                        a.removeClass(e)
                    }), e.Object.each(i, function(e) {
                        a.removeClass(e)
                    }), a.removeClass("sm-gallery-flipped"), a.setData("viewport-class", null), a.setData("imagesize-class", null)
                },
                _renderLayout: function() {
                    var t = e.SM.Gallery.SmugMugView.superclass._renderLayout.call(this);
                    this._tilesContainer = t.one(".sm-gallery-tiles"), this._tilesNavContainer = t.one(".sm-gallery-tilesnav"), this._imageContainer = t.one(".sm-gallery-image"), this._paginationContainer = t.one(".sm-gallery-tiles-pagination"), this._tilesBar = t.one(".sm-gallery-tiles-bar"), this._imagePaginationContainer = t.one(".sm-gallery-image-pagination"), this._imageInfoContainer = t.one(".sm-tile-info"), this._imageButtons = new e.SM.ImageButtons({
                        container: t.one(".sm-gallery-image-bar")
                    }), this._imageButtons.hideAll(), this._applyContainerClasses()._setSizes(), this._eventHandles.push(t.one(".sm-gallery-tiles-container").delegate("click", this._onNavClick, ".sm-gallery-nav", this), this._imagePaginationContainer.delegate("click", this._onImagePaginationClick, ".sm-button", this), t.delegate("click", this._handleImageDownloadButtonClick, ".sm-button-image-download", this), t.delegate("click", this._handleInlineEditClick, ".sm-inlineedit-node", this))
                },
                _afterInlineEditSave: function(e) {
                    var t = this._compileTemplates(),
                        i = this._imageInfoContainer,
                        a = this._getCurrentImage(),
                        s = a.getAttrs();
                    "Title" === e ? i.one('[data-name="Title"]').replace(t.imageTitle({
                        tile: s
                    })) : "CaptionRaw" === e ? i.one('[data-name="CaptionRaw"]').replace(t.imageCaption({
                        tile: s
                    })) : "Keywords" === e && i.one('[data-name="Keywords"]').replace(t.imageKeywords({
                        tile: s
                    })), this._checkReloadInfo({
                        afterSave: !0
                    })
                },
                _handleInlineEditCancel: function() {
                    this._checkReloadInfo()
                },
                _checkReloadInfo: function(t) {
                    var i = this._imageInfoContainer.all(".sm-inlineedit-plugged"),
                        a = i.size();
                    t = e.merge({}, t), t.afterSave || a--, 0 === a && this._renderImage()
                },
                _afterLightboxVisibleChange: function(t) {
                    e.SM.Gallery.SmugMugView.superclass._afterLightboxVisibleChange.call(this, t), this._imageButtons.closeAll()
                },
                _renderImageInfo: function(t) {
                    var i = this._compileTemplates(),
                        a = t.getAttrs();
                    this._imageInfoContainer.nodeedit && this._imageInfoContainer.unplug(e.SM.Plugin.NodeEdit), this._imageInfoContainer.setHTML(i.imageEmpty({
                        tile: a
                    }) + i.imageTitle({
                        tile: a
                    }) + i.imageCaption({
                        tile: a
                    }) + i.imageKeywords({
                        tile: a
                    }) + i.imageInfo({
                        tile: a
                    })), t.get("Title") || t.get("Caption") || t.get("ShowFileName") || t.get("Keywords").length ? this._imageInfoContainer.removeClass("sm-inlineedit-no-info") : this._imageInfoContainer.addClass("sm-inlineedit-no-info"), e.SM.Page.image = t
                },
                _updateMenus: function() {
                    var e = this._getCurrentImage(),
                        t = this._getCurrentAlbum(),
                        i = this._getGalleryAlbum();
                    this._imageButtons.setContext({
                        image: e,
                        album: t,
                        galleryAlbum: i,
                        requestData: this.get("galleryRequestData"),
                        realGallery: !0
                    }), this._imageButtons.updateAll(), this._buyMenu && this._buyMenu.update(e, t, i)
                },
                _destroyPagination: function() {
                    this._pageSelect && (this._pageSelect.destroy(!0), this._pageSelect = null)
                },
                _renderPagination: function(t) {
                    var i, a = this.get("container"),
                        s = t.get("TotalPages"),
                        n = t.get("PageNumber"),
                        o = [];
                    if (this._leftArrowNode || (this._leftArrowNode = a.one(".sm-gallery-nav-left")), this._rightArrowNode || (this._rightArrowNode = a.one(".sm-gallery-nav-right")), this._prevPageImageUrl && this._leftArrowNode.set("href", this._prevPageImageUrl), this._nextPageImageUrl && this._rightArrowNode.set("href", this._nextPageImageUrl), this._paginationContainer.setHTML(""), s > 1) {
                        for (i = 0; s > i; i++) o.push([i + 1, i + 1 + " / " + s]);
                        this._pageSelect = e.Node.create(e.SM.Templates.select({
                            options: o,
                            value: n,
                            noChrome: !0
                        })), this._paginationContainer.append(this._pageSelect), this._pageSelect.one("select").on("change", function(t) {
                            t.preventDefault(), e.SM.Page.uxdisabled || this._changePage(t.currentTarget.get("value"))
                        }, this)
                    }
                    1 === n ? this._leftArrowNode.addClass("sm-gallery-nav-disabled") : this._leftArrowNode.removeClass("sm-gallery-nav-disabled"), n === s ? this._rightArrowNode.addClass("sm-gallery-nav-disabled") : this._rightArrowNode.removeClass("sm-gallery-nav-disabled")
                },
                _renderImagePagination: function() {
                    var t, i, a = this._images.get("TotalItems"),
                        s = this._images.get("PageNumber"),
                        n = this._images.get("PageSize"),
                        o = this._getCurrentImageIndex(),
                        r = (s - 1) * n + (o + 1);
                    t = e.SM.Templates.button({
                        icon: "AngleBracketLeftSlim",
                        value: "left",
                        size: "small",
                        noChrome: !0,
                        disabled: 1 === r
                    }), i = e.SM.Templates.button({
                        icon: "AngleBracketRightSlim",
                        value: "right",
                        size: "small",
                        noChrome: !0,
                        disabled: r === a
                    }), this._imagePaginationContainer.setHTML(t + '<span class="sm-gallery-image-totals">' + r + " / " + a + "</span>" + i)
                },
                _renderTiles: function(t) {
                    return this._tilesView && this._tilesView.destroy({
                        remove: !0
                    }), this._tilesView = new e.SM.Views.Tiles({
                        autoResize: !1,
                        resources: t,
                        clickable: !0,
                        layout: e.SM.Views.Tiles.LAYOUTS.GRID,
                        pagination: e.SM.Views.Tiles.PAGINATION_TYPES.NONE,
                        parentNode: this._tilesContainer,
                        layoutOptions: {
                            imageSize: this._tileSize,
                            showHover: !0,
                            showInfo: !1,
                            showStatus: !0,
                            spacing: this.get("tileSpacing"),
                            containerWidth: this._tilesContainerWidth
                        },
                        dataMap: {
                            Url: "GalleryUrl"
                        }
                    }), this._tilesView.render(), this._tilesView.on("tileClick", this._onTileClick, this), this
                },
                _renderImage: function(t) {
                    var i = this._imageView,
                        a = this._getCurrentImage();
                    if (i) {
                        if ("sm-video-view" === i.name && i.get("model").get("ImageID") === a.get("ImageID")) return;
                        i.destroy({
                            remove: !0
                        })
                    }
                    return t || (t = a), this._imageView = new e.SM.Views.Tile({
                        autoResize: !1,
                        center: !0,
                        clickable: !0,
                        maxHeight: this._imageContainerHeight,
                        dataMap: {
                            Url: "GalleryUrl"
                        },
                        imageCrop: "none",
                        imageSize: "fit",
                        resource: t,
                        parentNode: this._imageContainer,
                        showInfo: "never",
                        showStatus: !0
                    }), this._imageView.render(), this._imageView.on("tileClick", this._onMainTileClick, this), this._renderImageInfo(t), this
                },
                _renderVideo: function(t) {
                    var i = this._imageView,
                        a = t.getLargestVideoSizeForContainer(this._imageContainerWidth),
                        s = i.get("container").one(".sm-image");
                    return this._imageView = new e.SM.Views.Video({
                        model: t,
                        size: a,
                        verticalCenter: !0,
                        autoPlay: !0,
                        width: s.get("offsetWidth"),
                        height: s.get("offsetHeight")
                    }), this._imageContainer.setHTML(this._imageView.get("container")), this._imageView.render(), i && i.destroy(), this
                },
                _prefetchImages: function(t, i) {
                    var a, s, n, o = [],
                        r = t.size(),
                        l = [],
                        g = i.length,
                        h = this._tileSize,
                        d = this._imageContainerWidth,
                        m = this._imageContainerHeight;
                    if (g) {
                        for (a = 0; g > a; a++) l.push(e.SM.Models.Image.getUrl(i[a], h));
                        this._prefetcher.addQueue(l), this._prefetcher.run()
                    }
                    if (r) {
                        for (a = 0; r > a; a++) n = t.item(a), s = e.SM.Views.Tile.getImageSize(n, "fit", d, {
                            maxHeight: m
                        }), o.push(n.getUrlForSize(s));
                        this._prefetcher.addQueue(o), this._prefetcher.run()
                    }
                },
                _resize: function() {
                    var e, t = this,
                        i = this._pageSize,
                        a = this._galleryState;
                    this._applyContainerClasses()._setSizes(), i !== this._pageSize && (this._tilesView && this._tilesView.destroy(), e = this._loadImages(this._getGalleryRequestData(0, a.imageId, a.imageKey)), e.then(function(e) {
                        e && e.size() && (t._renderImage(t._getCurrentImage()), t._renderTiles(e), t._renderPagination(e), t._updateMenus()), t._clearCurrentImageAlbum(), t._lightbox && t._lightbox.set("image", t._getCurrentImage())
                    })), this._setContainerSize(), this._resizeCover()
                },
                _applyContainerClasses: function() {
                    var e = this.get("container"),
                        n = this._containerWidth,
                        o = this._usableWinHeight,
                        r = e.getData("viewport-class"),
                        l = e.getData("imagesize-class"),
                        g = t[768],
                        h = "";
                    return 800 >= n ? g = t[768] : 1024 >= n ? (g = t[1024], o >= a.FIVE && (h = i.L)) : 1280 >= n ? (g = t[1280], o >= a.FIVE && (h = i.L)) : 1540 >= n ? (g = t[1440], o >= s.FOUR && (h = i.XL)) : 1680 >= n ? (g = t[1680], n >= 1580 && o >= s.FIVE && (h = i.X2)) : 2048 >= n ? (g = t[1920], h = o >= s.SIX ? i.X2 : o >= s.FIVE ? i.XL : o >= s.FOUR ? i.L : i.M) : (g = t[2560], h = o >= s.SEVEN ? i.X3 : o >= s.SIX ? i.X2 : o >= s.FIVE ? i.XL : o >= s.FOUR ? i.L : i.M), r !== g && (e.setData("viewport-class", g), e.addClass(g), e.removeClass(r)), l !== h && (e.setData("imagesize-class", h), e.addClass(h), e.removeClass(l)), this.get("flipped") && e.addClass("sm-gallery-flipped"), this
                },
                _setSizes: function() {
                    var e = this._tilesContainer.one(".sm-tiles"),
                        t = this._imageContainer.one(".sm-tile-single");
                    return e && e.hide(), t && t.hide(), this._tilesNavContainer.setStyles({
                        width: "100%",
                        height: "auto"
                    }), this._tilesContainerWidth = this._tilesContainer.get("offsetWidth"), this._tilesContainerHeight = this._tilesContainer.get("offsetHeight"), this._imageContainerWidth = this._imageContainer.get("offsetWidth"), this._imageContainerHeight = this._imageContainer.get("offsetHeight"), this._tilesNavContainerWidth = this._tilesNavContainer.get("offsetWidth"), this._tilesNavContainerHeight = this._tilesNavContainer.get("offsetHeight"), e && e.show(), t && t.show(), this._pageSize = this._calculatePageSize(), this._tileSize = this._calculateTileSize(), this
                },
                _calculatePageSize: function() {
                    var e, i, a, s, o = this.get("container"),
                        r = this._tilesContainerWidth,
                        l = this._tilesNavContainerHeight,
                        g = this._calculateTileSize(),
                        h = "Ti" === g ? n.TI : n.TH;
                    return o.getData("viewport-class") === t[768] ? (e = Math.ceil(r / h), a = r / e, i = Math.floor(l / a)) : (i = Math.ceil(l / h), a = l / i, e = Math.floor(r * (a / h) / a), s = (e * a + 84) / this._tilesNavContainerWidth * 100, this._tilesNavContainer.setStyle("width", s + "%"), this._tilesBar.setStyle("width", s + "%"), this._tilesContainerWidth = this._tilesContainer.get("offsetWidth")), e * i
                },
                _calculateTileSize: function() {
                    var e = this.get("thumbnailSize"),
                        i = "Ti";
                    if ("auto" === e) {
                        var a = this.get("container"),
                            s = a.getData("viewport-class");
                        (s === t[1680] || s === t[1920] || s === t[2560]) && (i = "Th")
                    } else i = e;
                    return i
                },
                _calculateImageSize: function() {
                    return e.SM.Models.Image.getLargestStandardSize(this._imageContainerWidth, this._tilesContainerHeight, !1, !0)
                },
                _onTileClick: function(t) {
                    if (t.preventDefault(), !e.SM.Page.uxdisabled && this._enableRouting) {
                        var i = t.tile,
                            a = this._galleryState;
                        a.imageId !== i.get("ImageID") && this._router.save(this._createImageRoute(i.get("ImageID"), i.get("ImageKey")))
                    }
                },
                _onMainTileClick: function(t) {
                    if (t.preventDefault(), !e.SM.Page.uxdisabled && this._enableRouting) {
                        var i = this._galleryState,
                            a = this._getCurrentImage(),
                            s = i.imageId,
                            n = i.imageKey;
                        a.get("IsVideo") ? this._renderVideo(a) : this._router.save(this._createImageRoute(s, n, "A"))
                    }
                },
                _routeImageKey: function() {
                    this._renderImage(this._getCurrentImage()), this._renderImagePagination(), this._tilesRendered || (this._renderTiles(this._images), this._renderPagination(this._images), this._tilesRendered = !0, this._images.on("reset", this._onModelListReset, this)), this._routeTimer && this._routeTimer.cancel(), this._routeTimer = e.later(250, this, function() {
                        this._updateMenus(), this._enablePrefetching && this._preCacheLightboxImage(this._getCurrentImage())
                    }), this._updateSocialMetadata(this._getCurrentImage()), SM.Tracker.trackPageview(window.location.href)
                },
                _onModelListReset: function(e) {
                    this._tilesRendered && this._tilesView && this._tilesView.render({
                        clear: !0,
                        tiles: e.models
                    })
                },
                _onNavClick: function(t) {
                    if (t.preventDefault(), !e.SM.Page.uxdisabled) {
                        var i = this._images.get("PageNumber"),
                            a = t.currentTarget;
                        a.hasClass("sm-gallery-nav-left") ? i-- : i++, this._changePage(i)
                    }
                },
                _onKeyUp: function(t) {
                    if (!(e.SM.Page.uxdisabled || this._lightbox && !this._lightbox.nav.get("enableKeyboard"))) {
                        var i = this._galleryState,
                            a = t.charCode;
                        t.preventDefault(), 37 !== a || i.action ? 39 !== a || i.action ? e.SM.Gallery.SmugMugView.superclass._onKeyUp.call(this, t) : t.shiftKey ? this._routeToNextPage() : this._routeToNextImage() : t.shiftKey ? this._routeToPrevPage() : this._routeToPrevImage()
                    }
                },
                _routeToPrevPage: function() {
                    var e = this._images.get("PageNumber"),
                        t = e - 1;
                    this._changePage(t)
                },
                _routeToNextPage: function() {
                    var e = this._images.get("PageNumber"),
                        t = e + 1;
                    this._changePage(t)
                },
                _routeToPrevImage: function() {
                    if (this._enableRouting) {
                        var e = this._images,
                            t = this._getPreviousImage(),
                            i = e.get("PageNumber"),
                            a = i - 1;
                        t ? this._router.save(this._createImageRoute(t.get("ImageID"), t.get("ImageKey"))) : a && this._changePage(a)
                    }
                },
                _routeToNextImage: function() {
                    if (this._enableRouting) {
                        var e = this._images,
                            t = this._getNextImage(),
                            i = e.get("PageNumber"),
                            a = i + 1;
                        t ? this._router.save(this._createImageRoute(t.get("ImageID"), t.get("ImageKey"))) : a && this._changePage(a)
                    }
                },
                _onImageUpdated: function(e) {
                    var t = e.image,
                        i = e.updates;
                    "undefined" != typeof i.Status || "undefined" != typeof i.IsFavorite ? (this._tilesView.render({
                        tiles: [t]
                    }), this._renderImage(t)) : "undefined" != typeof i.Title || "undefined" != typeof i.Caption || "undefined" != typeof i.Keywords ? this._renderImageInfo(t) : "undefined" != typeof i.Deleted && this._onImageDeleted(t), this._forceFreshRequest = !0
                },
                _getPrefetchSizes: function() {
                    return e.SM.Views.Tile.estimatePrefetchSizes("fit", this._imageContainerWidth, {
                        maxHeight: this._imageContainerHeight
                    })
                },
                _getPrefetchUrls: function(t, i) {
                    var a = this._tileSize,
                        s = this._imageContainerHeight,
                        n = this._imageContainerWidth,
                        o = [],
                        r = [];
                    return t && t.each(function(t) {
                        o.push(e.SM.Models.Image.getUrl(t, a));
                        var i = e.SM.Views.Tile.getImageSize(t, "fit", n, {
                            maxHeight: s
                        });
                        r.push(e.SM.Models.Image.getUrl(t, i))
                    }), i ? r : o.concat(r)
                },
                _onImagePaginationClick: function(t) {
                    if (!e.SM.Page.uxdisabled) {
                        var i = t.currentTarget,
                            a = i.getData("value");
                        t.preventDefault(), "left" === a ? this._routeToPrevImage() : "right" === a && this._routeToNextImage()
                    }
                }
            }, {
                ATTRS: {
                    flipped: {},
                    tileSpacing: {
                        value: 6
                    },
                    thumbnailSize: {
                        value: "auto"
                    },
                    galleryStyle: {
                        value: "smugmug"
                    }
                }
            })
        }(), e.namespace("SM.Gallery").ThumbnailView = e.Base.create("sm-gallery-thumbnailview", T, [], {
            _tilesLayout: e.SM.Views.Tiles.LAYOUTS.GRID,
            layoutTemplate: '<div class="sm-gallery-images"><div class="sm-gallery-tiles-container"></div></div>',
            destructor: function() {
                this._tilesView && this._tilesView.destroy({
                    remove: !0
                }), this._lightboxImages && this._lightboxImages.destroy(), this._tilesContainer && this._tilesContainer.destroy()
            },
            _renderLayout: function() {
                var t = e.SM.Gallery.ThumbnailView.superclass._renderLayout.call(this);
                return this._tilesContainer = t.one(".sm-gallery-tiles-container"), "onhover" === this.get("buyButtonDisplay") && this._tilesContainer.addClass("sm-gallery-buy-onhover"), this._setSizes(), this._eventHandles.push(this._tilesContainer.delegate("click", this._handleImageBuyButtonClick, ".sm-button-image-buy", this), this._tilesContainer.delegate("click", this._handleImageDownloadButtonClick, ".sm-button-image-download", this)), this._imageButtons = new e.SM.ImageButtons({
                    container: t,
                    getContextFn: e.bind(this._getImageButtonContext, this)
                }), t
            },
            _routeImageKey: function(e) {
                !e || !e.params.imageidkey || e.params.size && "buy" === e.params.size.toLowerCase() || (this._galleryState.size = "A", this.openLightbox(this._getCurrentImage()))
            },
            _changePageForImageKey: function(e) {
                e || this.closeLightbox(), this._clearCurrentImageAlbum(), this._updateGalleryState({
                    imageId: 0,
                    imageKey: "",
                    size: ""
                })
            },
            _renderImages: function(e) {
                this.get("enableRouting") && !this._initialPageNumber && (this._initialPageNumber = e.get("PageNumber"), this._initialPageNumber > 1) || (e.get("PageNumber") > 1 ? this._tilesView && this._tilesView.render({
                    tiles: e
                }) : this._renderTiles(e))
            },
            openLightbox: function(e) {
                var t, i = this._galleryState;
                t = this.initLightbox(), e || (e = this._getCurrentImage()), t.setAttrs({
                    imageSize: i.size,
                    image: e
                }), t.get("visible") || t.show(), this._calcLightboxNavArrows(e), this._initialPageNumber && this._initialPageNumber > 1 && !this._lightboxVisibleHandler && (this._lightboxVisibleHandler = t.once("visibleChange", this._onceLightboxVisibleChange, this))
            },
            _onceLightboxVisibleChange: function(e) {
                e.newVal || (this._updateGalleryState({
                    imageId: 0,
                    imageKey: "",
                    action: ""
                }), this._initialPageNumber = 1, this._changePage(1))
            },
            _loadLightboxImages: function(t) {
                var i = this,
                    a = this.get("container").one(".sm-gallery-empty") ? !0 : !1;
                return new e.Promise(function(s) {
                    i._lightboxImages || (i._lightboxImages = new e.SM.Models.GalleryImageList), i._prefetcher.stopAll(), i._lightboxImages.load({
                        apiCategory: i.get("galleryType"),
                        data: t,
                        freshRequest: a ? !0 : !1,
                        prefetchNext: !0
                    }, function(e) {
                        e || (s(i._lightboxImages), i._enablePrefetching && i._loadAkamaiPrefetch(t))
                    })
                })
            },
            _renderTiles: function(t) {
                return this._tilesView && this._tilesView.destroy({
                    remove: !0
                }), this._tilesView = new e.SM.Views.Tiles(this._getTileOptions(t)), this._tilesView.render(), this._eventHandles.push(this._tilesView.on("tileClick", this._onTileClick, this)), this
            },
            _getTileOptions: function(t) {
                var i, a = this.get("showInfo"),
                    s = this.get("infoHover");
                i = "hide" !== s || "over" !== a && "cover" !== a ? this._getImageInfoTemplate() : e.SM.Views.Tiles.Templates.Base.info;
                var n = this._getGalleryAlbum(),
                    o = n && n.get("IsSellable") || t.item(0).get("CanDownload") || t.item(0).get("CanFavorite"),
                    r = t.size() > 0 && o;
                return {
                    autoResize: !1,
                    resources: t,
                    clickable: !0,
                    dataMap: {
                        Caption: "CaptionText",
                        CaptionFallback: "FileName",
                        Url: "GalleryUrl"
                    },
                    layout: this._tilesLayout,
                    pagination: e.SM.Views.Tiles.PAGINATION_TYPES.INFINITE,
                    parentNode: this._tilesContainer,
                    layoutOptions: {
                        imageSize: this._tileSize,
                        imageCrop: this.get("imageCrop"),
                        spacing: this.get("tileSpacing"),
                        showStatus: !0,
                        containerWidth: this._containerWidth,
                        showInfo: a,
                        infoAlignment: this.get("infoAlignment"),
                        forceShowOverInfo: r,
                        infoHover: s,
                        infoTemplate: i,
                        varyHeight: this.get("varyHeight")
                    }
                }
            },
            _resize: function() {
                var e = this._tileSize;
                this._setSizes(), e !== this._tileSize ? this._renderTiles(this._images) : this._tilesView && this._tilesView.resize(), this._setContainerSize(), this._resizeCover()
            },
            _getCurrentPage: function() {
                var e, t, i = this._getCurrentImage();
                return i ? (t = i.get("Index"), e = Math.floor(t / this._images.get("PageSize")) + 1) : e = 0, e
            },
            _calculatePageSize: function() {
                var e, t, i;
                return e = Math.ceil(this._containerWidth / 240), i = this._containerWidth / e, t = Math.floor(this._winHeight / i), e * t
            },
            _onTileClick: function(t) {
                if (!e.SM.Page.uxdisabled && this._enableRouting) {
                    var i = this._getButtonNode(t.originEvent.target),
                        a = t.tile;
                    t.preventDefault();
                    var s = ["buy", "download", "favorite", "favorites"];
                    i && s.includes(i.getData("value")) || this._router.save(this._createImageRoute(a.get("ImageID"), a.get("ImageKey"), "A"))
                }
            },
            _afterLightboxVisibleChange: function(e) {
                if (this._enableRouting && !e.newVal) {
                    var t, i = this._getCurrentImage();
                    e.newVal || "gallery" === e.src || this._router.save("/"), t = this.get("container").one("[data-clientid=" + i.get("clientId") + "]"), t ? window.scrollTo(0, t.getY() - 12) : window.scrollTo(0, 0)
                }
            },
            _setSizes: function() {
                this._pageSize = this._calculatePageSize(), this._tileSize = this._imageSize = this._winWidth >= 768 ? this.get("imageSize") || "S" : "Th"
            },
            _createImageRoute: function(t, i, a) {
                return a ? e.SM.Gallery.ThumbnailView.superclass._createImageRoute.call(this, t, i, a) : "/"
            },
            _prefetchImages: function(t, i) {
                var a, s, n, o = [];
                if (i.length) {
                    for (s = new e.SM.Models.GalleryImageList, s.add(i), n = s.size(), a = 0; n > a; a++) o.push(s.item(a).getUrlForSize(this._tileSize));
                    this._prefetcher.addQueue(o), this._prefetcher.run(), s.destroy()
                }
            },
            _handleBuyButtonClick: function(t) {
                if (!e.SM.Page.uxdisabled) {
                    var i = this._getCurrentImage(),
                        a = this._getCurrentAlbum(),
                        s = this._getGalleryAlbum();
                    this._handleBuyButtonClickAnalytic(), this._buyMenu._loadMenu(), this._buyMenu.image = null, this._buyMenu.galleryAlbum = s, this._buyMenu.menu.show({
                        anchorPoint: t.target
                    }), this._buyMenu.update(i, a, s, !0, !1)
                }
            },
            _handleImageBuyButtonClick: function(t) {
                var i = SM["import"]("sm-cart-helpers"),
                    a = this._getButtonNode(t.target),
                    s = this._getImageButtonContext(a);
                this._handleBuyButtonClickAnalytic(), t.halt(), this._containerWidth < e.SM.Page.responsiveDesign.mobileMaxWidth ? i.deprecatedShowAddToCart(s.image, s.album) : (this._buyMenu || (this._buyMenu = new e.SM.Menus.Buy({
                    galleryAlbum: s.galleryAlbum
                }), this._buyMenu.menu.render()), this._buyMenu.update(s.image, s.album, s.galleryAlbum), this._buyMenu.menu.show({
                    anchorPoint: a
                }))
            },
            _onImageUpdated: function(e) {
                var t = e.image,
                    i = e.updates;
                "undefined" != typeof i.Status || "undefined" != typeof i.IsFavorite || "undefined" != typeof i.Title || "undefined" != typeof i.Caption || "undefined" != typeof i.Keywords ? this._tilesView.render({
                    tiles: [t]
                }) : "undefined" != typeof i.Deleted && this._onImageDeleted(t), this._forceFreshRequest = !0
            },
            _onImageDeleted: function() {
                window.location.reload()
            },
            _getPrefetchSizes: function() {
                return e.SM.Views.Tiles.estimatePrefetchSizes(this._tilesLayout, this._containerWidth, this._tileSize, this.get("imageCrop"))
            },
            _getPrefetchUrls: function(t, i) {
                var a = this._tileSize,
                    s = [];
                return i || t && (s = t.map(function(t) {
                    return e.SM.Models.Image.getUrl(t, a)
                })), s
            },
            _getImageInfoTemplate: function() {
                return '<div class="sm-gallery-image-tools" data-ImageKey="<%= data.image.get("ImageKey") %>"><% if (data.image.get("CanFavorite")) { %><%== Y.SM.Templates.button({className: "sm-button-image-favorite"+(data.image.get("IsFavorite")? " sm-button-image-favorited" : ""),icon:     "Heart",size:     "small",noChrome: true,value:    "favorite"}) %><% } %><% if (data.image.get("CanFavorite")) { %>' + e.SM.ImageButtons.getHTML("favorites", {
                    label: ""
                }) + '<% } %><% if (data.image.get("CanDownload")) { %><%== Y.SM.Templates.button({' + this._getDownloadButtonConfigTemplate() + '}) %><% } %><% if (data.image.get("IsSellable")) { %><%== Y.SM.Templates.button({' + this._getBuyButtonConfigTemplate() + "}) %><% } %></div>" + e.SM.Views.Tiles.Templates.Base.info
            },
            _getDownloadButtonConfigTemplate: function() {
                return ['className: "sm-button-image-download"', 'icon: "Download"', "noChrome: true", 'size: "small"', 'title: "Download"', 'value: "download"'].join(",")
            },
            _getBuyButtonConfigTemplate: function() {
                var e = ['className: "sm-button-image-buy"', 'title: "Buy"', 'value: "buy"'],
                    t = this.get("buyButtonStyle");
                switch (e.push('size: "' + this.get("buyButtonSize") + '"'), this.get("buyButtonSkin")) {
                    case "accent":
                        e.push('skin: "accent"');
                        break;
                    case "submit":
                        e.push('skin: "submit"');
                        break;
                    default:
                        e.push('skin: "default"')
                }
                return "button" === t ? e.push('label: "Buy"') : "iconbutton" === t ? e.push('icon: "CartAdd"') : e.push('icon: "CartAdd"', "noChrome: true"), e.join(",")
            }
        }, {
            ATTRS: {
                showComments: {
                    value: !1
                },
                tileSpacing: {
                    value: 12
                },
                imageCrop: {
                    value: "1x1"
                },
                showInfo: {
                    value: "over"
                },
                infoAlignment: {
                    value: "left"
                },
                infoHover: {
                    value: "show"
                },
                imageSize: {
                    value: "S"
                },
                varyHeight: {
                    value: !1
                },
                buyButtonDisplay: {},
                buyButtonStyle: {
                    value: "icon"
                },
                buyButtonSkin: {
                    value: "submit"
                },
                buyButtonSize: {
                    value: "small"
                },
                galleryStyle: {
                    value: "thumbnail"
                },
                supportCoverImage: {
                    value: !0
                }
            }
        }), e.namespace("SM.Gallery").JournalView = e.Base.create("sm-gallery-journalview", e.SM.Gallery.ThumbnailView, [], {
            _tilesLayout: e.SM.Views.Tiles.LAYOUTS.VERTICAL,
            layoutTemplate: '<div class="sm-gallery-images"><div class="sm-gallery-nav sm-gallery-nav-top"></div><div class="sm-gallery-tiles-container"></div><div class="sm-gallery-nav sm-gallery-nav-bottom"></div></div>',
            destructor: function() {
                this._destroyPagination(), this._tilesView && this._tilesView.destroy({
                    remove: !0
                }), this._lightboxImages && this._lightboxImages.destroy(), this._tilesContainer && this._tilesContainer.destroy()
            },
            _getTileOptions: function(t) {
                return {
                    resources: t,
                    clickable: !0,
                    dataMap: {
                        CaptionFallback: "FileName"
                    },
                    pagination: e.SM.Views.Tiles.PAGINATION_TYPES.NONE,
                    layout: e.SM.Views.Tiles.LAYOUTS.VERTICAL,
                    parentNode: this._tilesContainer,
                    layoutOptions: {
                        imageSize: "fit",
                        imageCrop: this.get("imageCrop"),
                        infoTemplate: this._getImageInfoTemplate(),
                        showInfo: "after",
                        showStatus: !0,
                        spacing: 0,
                        containerWidth: this._containerWidth
                    }
                }
            },
            _afterInlineEditSave: function(e, t) {
                var i = this._currentInlineNode.ancestor(".sm-tile-info").one(".sm-journal-inlineedit"),
                    a = this._compileTemplates();
                "Title" === e ? i.one('[data-name="Title"]').replace(a.imageTitle({
                    tile: t.getAttrs()
                })) : "CaptionRaw" === e ? i.one('[data-name="CaptionRaw"]').replace(a.imageCaption({
                    tile: t.getAttrs()
                })) : "Keywords" === e && i.one('[data-name="Keywords"]').replace(a.imageKeywords({
                    tile: t.getAttrs()
                })), this._checkReloadInfo(i, {
                    afterSave: !0,
                    image: t
                })
            },
            _handleInlineEditCancel: function(e) {
                var t = e.currentTarget,
                    i = t.get("host").ancestor(".sm-tile-info").one(".sm-journal-inlineedit"),
                    a = t.get("image");
                this._checkReloadInfo(i, {
                    image: a
                })
            },
            _checkReloadInfo: function(t, i) {
                var a = t.all(".sm-inlineedit-plugged"),
                    s = a.size();
                i = e.merge({}, i), i.afterSave || s--, 0 === s && this._tilesView.render({
                    tiles: [i.image]
                })
            },
            _handleInlineEditClick: function(t) {
                var i = t.currentTarget.ancestor(".sm-tile-info").one(".sm-journal-inlineedit"),
                    a = i.getData("ImageKey"),
                    s = this._images.getById(a);
                this._currentInlineEditImage = s, e.SM.Gallery.JournalView.superclass._handleInlineEditClick.call(this, t, s)
            },
            _renderLayout: function() {
                var t = e.SM.Gallery.JournalView.superclass._renderLayout.call(this);
                return this._topNavContainer = t.one(".sm-gallery-nav-top"), this._bottomNavContainer = t.one(".sm-gallery-nav-bottom"), this._imageButtons = new e.SM.ImageButtons({
                    container: t,
                    getContextFn: e.bind(this._getImageButtonContext, this)
                }), this._eventHandles.push(t.delegate("click", this._handleImageBuyButtonClick, ".sm-gallery-buy-icon", this), t.delegate("click", this._handleInlineEditClick, ".sm-inlineedit-node", this)), t
            },
            _renderImages: function(e) {
                this._renderTiles(e), this._attachImageLoadPromises(e), this._renderPagination(e)
            },
            _renderDescription: function() {
                e.SM.Gallery.JournalView.superclass._renderDescription.call(this);
                var t = new e.SM.API,
                    i = this._getGalleryAlbum();
                i && t.sendRequest({
                    method: "rpc.gallery.getbuyitems",
                    data: {
                        albumId: i.get("AlbumID"),
                        albumKey: i.get("AlbumKey")
                    }
                })
            },
            _destroyPagination: function() {
                this._paginationTopView && this._paginationTopView.destroy(), this._paginationBottomView && this._paginationBottomView.destroy(), this._topNavContainer.empty(), this._bottomNavContainer.empty(), this._paginationRendered = !1
            },
            _renderPagination: function(t) {
                if (this._paginationRendered) this._paginationTopView && (this._paginationTopView.set("leftHref", this._prevPageImageUrl), this._paginationTopView.set("rightHref", this._nextPageImageUrl)), this._paginationBottomView && (this._paginationBottomView.set("leftHref", this._prevPageImageUrl), this._paginationBottomView.set("rightHref", this._nextPageImageUrl));
                else {
                    var i = t.get("TotalPages"),
                        a = t.get("PageNumber");
                    i > 1 && (this._paginationTopView = new e.SM.Views.Pagination.Basic({
                        total: i,
                        page: a,
                        leftHref: this._prevPageImageUrl,
                        rightHref: this._nextPageImageUrl
                    }), this._paginationTopView.render(), this._topNavContainer.append(this._paginationTopView.get("container")), this._paginationBottomView = new e.SM.Views.Pagination.Basic({
                        total: i,
                        page: a,
                        leftHref: this._prevPageImageUrl,
                        rightHref: this._nextPageImageUrl
                    }), this._paginationBottomView.render(), this._bottomNavContainer.append(this._paginationBottomView.get("container")), this._eventHandles.push(this._paginationTopView.after("pageChange", this._afterPageChange, this, "top"), this._paginationBottomView.after("pageChange", this._afterPageChange, this, "bottom")))
                }
                this._paginationRendered = !0
            },
            _afterPageChange: function(t, i) {
                var a = t.newVal;
                e.SM.Page.uxdisabled || t.silent || ("top" === i ? this._paginationBottomView.set("page", a, {
                    silent: !0
                }) : "bottom" === i && this._paginationTopView.set("page", a, {
                    silent: !0
                }), "button" === t.src && (this._changePage(a), window.scrollTo(0, 0)))
            },
            _attachImageLoadPromises: function(t) {
                var i = this._getCurrentImage(),
                    a = i.get("clientId"),
                    s = this;
                this._imageLoadPromises = [], t.some(function(t) {
                    var i = t.get("clientId"),
                        n = s.get("container").one("[data-clientid=" + i + "]");
                    return s._imageLoadPromises.push(new e.Promise(function(e) {
                        var t = n.one(".sm-image");
                        t ? (t.on("load", function() {
                            e()
                        }), t.on("error", function() {
                            e()
                        })) : e()
                    })), i === a ? !0 : void 0
                })
            },
            _prefetchImages: function(t, i) {
                var a, s, n, o, r, l = [];
                if (i.length) {
                    for (s = new e.SM.Models.GalleryImageList, s.add(i), n = s.size(), a = 0; n > a; a++) r = s.item(a), o = e.SM.Views.Tile.getImageSize(r, "fit", this._winWidth, {
                        maxHeight: this._winHeight
                    }), l.push(r.getUrlForSize(o));
                    this._prefetcher.addQueue(l), this._prefetcher.run()
                }
            },
            closeLightbox: function() {
                this._lightbox && this._lightbox.get("visible") && this._lightbox.set("visible", !1, {
                    src: "gallery"
                })
            },
            _afterLightboxVisibleChange: function(e) {
                if (this._enableRouting) {
                    if (!e.newVal) {
                        var t, i = this._getCurrentImage();
                        e.newVal || "gallery" === e.src || this._router.save(this._createImageRoute(i.get("ImageID"), i.get("ImageKey"))), t = this.get("container").one("[data-clientid=" + i.get("clientId") + "]"), window.scrollTo(0, t.getY() - 12)
                    }
                    this._imageButtons.closeAll()
                }
            },
            _createImageRoute: function(t, i, a, s) {
                var n = this._lightbox && this._lightbox.get("visible");
                return 1 !== s || n ? e.SM.Gallery.ThumbnailView.superclass._createImageRoute.call(this, t, i, a) : "/"
            },
            _setSizes: function() {
                this._pageSize = 48, this._tileSize = "fit"
            },
            _onImageDeleted: function(t) {
                return this._updateGalleryState({
                    imageId: t.get("ImageID"),
                    imageKey: t.get("ImageKey")
                }), this._clearCurrentImageAlbum(), e.SM.Gallery.ThumbnailView.superclass._onImageDeleted.call(this)
            },
            _changePageForImageKey: function(t) {
                e.SM.Gallery.ThumbnailView.superclass._changePageForImageKey.call(this, t)
            },
            _getCurrentPage: function() {
                return this._images.get("PageNumber")
            },
            _routeImageKey: function(t) {
                function i(e, t) {
                    return Math.floor(Math.random() * (t - e + 1)) + e
                }
                if (t && t.route && "/" !== t.route.path) {
                    var a = this._getCurrentImage(),
                        s = a.get("clientId"),
                        n = this.get("container").one("[data-clientid=" + s + "]");
                    e.Promise.all(this._imageLoadPromises).then(function() {
                        window.scrollTo(0, n.getY() - i(10, 20))
                    })
                }
            },
            _resize: function() {
                this._setContainerSize(), this._resizeCover()
            },
            _getImageInfoTemplate: function() {
                return '<div class="sm-gallery-image-bar"><div class="sm-gallery-image-tools" data-ImageKey="<%= data.image.get("ImageKey") %>"><% if (data.image.get("CanFavorite")) { %><%== Y.SM.Templates.button({className: "sm-button-image-favorite"+(data.image.get("IsFavorite")? " sm-button-image-favorited" : ""),icon:     "Heart",size:     "small",noChrome: true,value:    "favorite",label: data.image.get("IsFavorite") ? "Unfavorite" : "Favorite"}) %>' + e.SM.ImageButtons.getHTML("favorites", {
                    label: "See All"
                }) + '<% } %><% if ((data.image.get("CanShare") || data.image.get("IsOwner")) && data.image.get("Status") === "Open") { %>' + e.SM.ImageButtons.getHTML("share") + '<% } %><% if (data.image.get("CanComment")) { %>' + e.SM.ImageButtons.getHTML("comment") + '<% } %><% if (data.image.get("CanEdit") || data.image.get("CanRemove")) { %>' + e.SM.ImageButtons.getHTML("tools") + '<% } %><% if (data.image.get("CanDownload")) { %>' + e.SM.ImageButtons.getHTML("download") + '<% } %><% if ((data.image.get("CanMap") && data.image.get("Latitude") != 0 && data.image.get("Longitude") != 0) || data.image.get("ShowEXIF")) { %>' + e.SM.ImageButtons.getHTML("info") + '<% } %><% if (data.image.get("IsSellable")) { %><%== Y.SM.Templates.button({' + this._getBuyButtonConfigTemplate() + '}) %><% } %></div></div><% if (data.image.get("Title") || data.image.get("Caption") || data.image.get("ShowFileName") || data.image.get("Keywords").length) { %><div class="sm-journal-inlineedit" data-ImageKey="<%= data.image.get("ImageKey") %>"><% } else { %><div class="sm-journal-inlineedit sm-inlineedit-no-info" data-ImageKey="<%= data.image.get("ImageKey") %>"><% } %>' + M.prototype.emptyInfoTemplate + M.prototype.titleTemplate + M.prototype.captionTemplate + M.prototype.imageKeywordsTemplate + M.prototype.imageExtraInfoTemplate + "</div>"
            },
            _getBuyButtonConfigTemplate: function() {
                var e = ['className: "sm-gallery-buy-icon"', 'title: "Buy"', 'label: "Buy"', 'value: "buy"', 'size: "small"'];
                switch (this.get("buyButtonSkin")) {
                    case "accent":
                        e.push('skin: "accent"');
                        break;
                    case "submit":
                        e.push('skin: "submit"');
                        break;
                    default:
                        e.push('skin: "default"')
                }
                return e.join(",")
            }
        }, {
            ATTRS: {
                showBuyButton: {
                    value: !1
                },
                imageCrop: {
                    value: "none"
                },
                buyButtonSkin: {
                    value: "accent"
                },
                galleryStyle: {
                    value: "journal"
                },
                supportCoverImage: {
                    value: !1
                }
            }
        }), e.namespace("SM.Gallery").RowOrganicView = e.Base.create("sm-gallery-roworganicview", e.SM.Gallery.ThumbnailView, [], {
            _tilesLayout: e.SM.Views.Tiles.LAYOUTS.ROW_ORGANIC,
            _setSizes: function() {
                this._pageSize = this._calculatePageSize(), this._tileSize = this._imageSize = this.get("imageSize") || "S"
            },
            _resize: function() {
                this._setSizes(), this._tilesView && this._tilesView.resize(), this._setContainerSize(), this._resizeCover()
            }
        }, {
            ATTRS: {
                galleryStyle: {
                    value: "row-organic"
                }
            }
        }), e.namespace("SM.Gallery").ColumnOrganicView = e.Base.create("sm-gallery-columnorganicview", e.SM.Gallery.ThumbnailView, [], {
            _tilesLayout: e.SM.Views.Tiles.LAYOUTS.COLUMN_ORGANIC,
            _setSizes: function() {
                this._pageSize = this._calculatePageSize(), this._tileSize = this._imageSize = this.get("imageSize") || "S"
            },
            _resize: function() {
                this._setSizes(), this._tilesView && this._tilesView.resize(), this._setContainerSize(), this._resizeCover()
            }
        }, {
            ATTRS: {
                showInfo: {
                    value: "after"
                },
                galleryStyle: {
                    value: "column-organic"
                }
            }
        }), e.namespace("SM.Gallery").SlideshowView = e.Base.create("sm-gallery-slideshowview", T, [], {
            layoutTemplate: '<div class="sm-gallery-images"><div class="sm-gallery-tiles-container"></div></div>',
            bodyTemplate: '<div class="sm-lightbox-body"></div>',
            destructor: function() {
                this._slideshow && this._slideshow.destroy({
                    remove: !0
                })
            },
            _renderLayout: function() {
                var t = e.SM.Gallery.SmugMugView.superclass._renderLayout.call(this);
                this._tilesContainer = t.one(".sm-gallery-tiles-container")
            },
            _renderImages: function() {
                this._slideshow && this._slideshow.destroy();
                var t = this;
                e.use(["sm-slideshow-view", "sm-slideshow-gallery-plugin"], function() {
                    t._slideshow = new e.SM.Views.Slideshow(t._getSlideshowOptions()), t._slideshow.plug(e.SM.SlideshowGalleryPlugin), t._slideshow.on("currentImageChange", t._imageChange, t), t._tilesContainer.setHTML(t._slideshow.get("container").addClass("sm-slideshow-no-border")), t._slideshow.render()
                })
            },
            _getLightBoxPrefetchSizes: function() {
                return []
            },
            _getSlideshowOptions: function() {
                var e = SM.env.pageOwner.features.Customization ? this.get("showCaptions") : !0,
                    t = {
                        modelList: this._images,
                        autoStart: !0,
                        heightSource: "auto",
                        heightRatio: "4x3",
                        showCaptions: e,
                        showNavigation: this.get("showNavigation"),
                        showFullscreen: this.get("showFullscreen"),
                        showPlayButton: this.get("showPlayButton"),
                        transition: this.get("transition"),
                        keyboardControls: !0,
                        clickable: !1
                    },
                    i = this.get("transitionSpeed"),
                    a = this.get("speed");
                return i && (t.transitionSpeed = i), a && (t.speed = a), t
            },
            _imageChange: function(e) {
                this._enableRouting && (this._slideshow.get("fullScreen") || this._router.save(this._createImageRoute(e.newVal.get("ImageID"), e.newVal.get("ImageKey"), this._galleryState.size)))
            },
            _renderBuyMenu: function() {
                e.SM.Gallery.SlideshowView.superclass._renderBuyMenu.call(this), this._buyMenu.update(this._getCurrentImage(), this._getCurrentAlbum(), this._getGalleryAlbum(), !0)
            }
        }, {
            ATTRS: {
                showComments: {
                    value: !1
                },
                showCaptions: {
                    value: !1
                },
                showNavigation: {
                    value: !0
                },
                showPlayButton: {
                    value: !0
                },
                showFullscreen: {
                    value: !0
                },
                transition: {
                    value: "fade"
                },
                transitionSpeed: {},
                speed: {},
                galleryStyle: {
                    value: "slideshow"
                }
            }
        })
    }(), SM.currentModule = null
}, "", {
    requires: ["base", "history-hash", "promise", "react-dom", "react", "router", "sm-album-model", "sm-analytics", "sm-api", "sm-cart-helpers", "sm-comment-view-deprecated", "sm-component-button", "sm-component-panel-base", "sm-dom", "sm-gallery-cover", "sm-gallery-prefetcher", "sm-gallery-settings", "sm-gallerydownload-panel", "sm-image-buttons", "sm-image-model", "sm-image-performance-logger", "sm-image-preloader", "sm-image-sizes", "sm-imagesrcconfig", "sm-lightbox-view", "sm-modal", "sm-page-alert", "sm-page-socialmetadata", "sm-page", "sm-pagination-view", "sm-resource-core", "sm-templates-button", "sm-tile-view", "sm-tiles-view", "sm-uploader-file-reader", "sm-uploader-tracking", "sm-uri", "sm-video-view", "template-micro", "view"]
});
YUI.add("sm-image-info-panel-exif-utils", function(e) {
    SM.currentModule = "sm-image-info-panel-exif-utils";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        "use strict";

        function e(e) {
            return function(t) {
                return t.get(e) ? "" + t.get(e) : ""
            }
        }

        function t(e) {
            var t = e.split(" "),
                a = babelHelpers.slicedToArray(t, 2),
                r = a[0],
                n = a[1];
            void 0 === n && (n = r, r = 0);
            var i = n.split("/"),
                l = babelHelpers.slicedToArray(i, 2),
                u = l[0],
                o = l[1];
            void 0 === o && (o = 1);
            var d = +u / +o;
            d || (d = 0), r = +r, r || (r = 0);
            var g = "" + (+r + d).toFixed(5);
            return "" + +g
        }
        var a = SM["import"]("sm-pretty-size"),
            r = [{
                label: "Camera",
                value: function(e) {
                    return e.get("Camera") ? e.get("Camera") : e.get("Make") ? e.get("Make") + " " + e.get("Model") : ""
                },
                field: ["Camera", "Model", "Make"]
            }, {
                label: "Lens",
                value: e("Lens"),
                field: "Lens"
            }, {
                label: "ISO",
                value: e("ISO"),
                field: "ISO"
            }, {
                label: "Focal Length",
                value: function(e) {
                    return e.get("FocalLength") && !e.get("FocalLength35mm") ? e.get("FocalLength") : e.get("FocalLength") ? e.get("FocalLength") + " (" + e.get("FocalLength35mm") + " in 35mm)" : ""
                },
                field: ["FocalLength", "FocalLength35mm"]
            }, {
                label: "Aperture",
                value: function(e) {
                    return +e.get("Aperture") ? "f/" + e.get("Aperture") : e.get("Aperture")
                },
                field: "Aperture"
            }, {
                label: "Exposure Time",
                value: function(e) {
                    var a = e.get("Exposure");
                    if (a) {
                        var r = t("" + a);
                        return "0" === r ? a : r + "s (" + a + ")"
                    }
                    return ""
                },
                field: "Exposure"
            }, {
                label: "Name",
                value: e("FileName")
            }, {
                label: "Size",
                value: function(e) {
                    return e.get("OriginalWidth") + " x " + e.get("OriginalHeight")
                }
            }, {
                label: "File Size",
                value: function(e) {
                    return e.get("OriginalSize") ? "" + a(e.get("OriginalSize")) : ""
                }
            }, {
                label: "Date Taken",
                value: function(e) {
                    var t = ["DateTimeCreated", "DateTimeOriginal"],
                        a = !0,
                        r = !1,
                        n = void 0;
                    try {
                        for (var i, l = t[Symbol.iterator](); !(a = (i = l.next()).done); a = !0) {
                            var u = i.value;
                            if (e.get(u)) return e.get(u).replace("T", " ")
                        }
                    } catch (o) {
                        r = !0, n = o
                    } finally {
                        try {
                            !a && l["return"] && l["return"]()
                        } finally {
                            if (r) throw n
                        }
                    }
                    return ""
                },
                field: ["DateTimeCreated", "DateCreated", "TimeCreated", "MicroDateTimeCreated", "MicroDateTimeDigitized", "DateDigitized", "DateTime", "DateTimeOriginal"]
            }, {
                label: "Date Modified",
                value: function(e) {
                    var t = e.get("DateTimeModified");
                    return t ? t.replace("T", " ") : ""
                },
                field: "DateTimeModified"
            }, {
                label: "Latitude",
                value: function(e) {
                    var t = +e.get("Latitude") || +e.get("GPSLatitude");
                    return t ? "" + t.toFixed(5) : ""
                },
                field: ["Latitude", "LatitudeReference", "GPSLatitude"]
            }, {
                label: "Longitude",
                value: function(e) {
                    var t = +e.get("Longitude") || +e.get("GPSLongitude");
                    return t ? "" + t.toFixed(5) : ""
                },
                field: ["Longitude", "LongitudeReference", "GPSLongitude"]
            }, {
                label: "Copyright",
                value: e("Copyright"),
                field: "Copyright"
            }],
            n = {
                Title: {
                    label: "",
                    value: function() {
                        return ""
                    }
                },
                Caption: {
                    label: "",
                    value: function() {
                        return ""
                    }
                },
                Keywords: {
                    label: "",
                    value: function() {
                        return ""
                    }
                },
                ExposureCompensation: {
                    label: "Exposure Bias",
                    value: function(e) {
                        return e.get("ExposureCompensation") ? e.get("ExposureCompensation") + " EV" : ""
                    }
                },
                ResponseLevel: {
                    label: "",
                    value: function() {
                        return ""
                    }
                }
            },
            i = r.filter(function(e) {
                return e.field
            }).reduce(function(e, t) {
                return e.concat(t.field)
            }, []);
        exports.BASIC_EXIF_DATA = r, exports.BASIC_EXIF_FIELDS = i, exports.EXTENDED_EXIF_DATA = n
    }(), SM.currentModule = null
}, "", {
    requires: ["classnames", "lodash", "react-dom", "react", "sm", "sm-component-busy", "sm-component-button", "sm-component-draggable", "sm-component-icon", "sm-component-panel-base", "sm-component-tabview", "sm-dom", "sm-ua", "sm-map", "sm-pretty-size"]
});
YUI.add("sm-image-info-panel", function(e) {
    SM.currentModule = "sm-image-info-panel";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: !0
        });
        var t = SM["import"]("lodash"),
            a = SM["import"]("react"),
            n = SM["import"]("react-dom"),
            i = SM["import"]("sm-component-panel-base"),
            s = SM["import"]("sm-component-draggable"),
            r = SM["import"]("sm-component-busy"),
            m = SM["import"]("sm-component-icon"),
            o = SM["import"]("sm-component-button"),
            l = SM["import"]("sm-dom"),
            d = SM["import"]("sm-component-tabview"),
            c = SM["import"]("sm-component-tabview-tab"),
            u = SM["import"]("classnames"),
            p = SM["import"]("sm-ua"),
            h = SM["import"]("sm-image-info-panel-exif-utils"),
            f = h.BASIC_EXIF_DATA,
            v = h.BASIC_EXIF_FIELDS,
            g = h.EXTENDED_EXIF_DATA,
            E = "MAP_CONTAINER",
            M = "DRAGGABLE",
            b = ["Exif", "Map"],
            _ = "sm-noscroll",
            y = function(h) {
                function y(e) {
                    babelHelpers.classCallCheck(this, y);
                    var t = babelHelpers.possibleConstructorReturn(this, (y.__proto__ || Object.getPrototypeOf(y)).call(this, e));
                    return t.state = {
                        expanded: !1,
                        tab: b[0],
                        expandAdvanced: !1,
                        disableMap: !1
                    }, e.initialImage && (t.state.image = e.initialImage, t.state.metadata = e.initialImageMetadata), t
                }
                return babelHelpers.inherits(y, h), babelHelpers.createClass(y, [{
                    key: "componentWillUpdate",
                    value: function(e, t) {
                        t.expanded && !this._shouldHaveMap(t) && this.setState({
                            expanded: !1
                        })
                    }
                }, {
                    key: "componentDidMount",
                    value: function() {
                        this._attachMap(), this._attachDragEvent();
                        var e = l.classList(l.doc.body);
                        e.contains(_) && "Android" === (new p).os && (e.remove(_), this._reAttachNoScroll = !0)
                    }
                }, {
                    key: "componentWillUnmount",
                    value: function() {
                        if (this._reAttachNoScroll) {
                            var e = l.classList(l.doc.body);
                            e.add(_)
                        }
                    }
                }, {
                    key: "componentDidUpdate",
                    value: function(e, t) {
                        var a = this.state;
                        this._attachDragEvent(), this.map && t.image === a.image ? (this.map.rerender(n.findDOMNode(this.refs[E])), this.map.addImageMarker(this.state.image)) : this._attachMap()
                    }
                }, {
                    key: "render",
                    value: function() {
                        var e = this.state.expanded,
                            t = u({
                                "sm-panel-imageinfo": !0,
                                "sm-imageinfo-expanded": e,
                                "sm-imageinfo-tabs": this._shouldHaveMap(this.state) && !e
                            }),
                            n = u({
                                "sm-panel-imageinfo-wrapper": !0,
                                "sm-user-ui": !0,
                                "sm-imageinfo-expanded": e
                            });
                        return a.createElement(s, {
                            key: n,
                            ref: M
                        }, a.createElement("div", {
                            className: n
                        }, a.createElement(i, {
                            className: t,
                            headerPosition: i.HEADER_INSIDE
                        }, a.createElement(s.DraggableHandle, null, a.createElement(i.Header, null, a.createElement("h2", null, "Photo Info"), a.createElement(i.CloseButton, {
                            onClick: this.props.closeHandler
                        }))), a.createElement(i.Body, null, this._renderContents()))))
                    }
                }, {
                    key: "_renderBasicExifData",
                    value: function() {
                        var e = this;
                        return f.map(function(t) {
                            var a = void 0,
                                n = t.label,
                                i = t.value,
                                s = e.state;
                            switch (n) {
                                case "Name":
                                case "Size":
                                case "File Size":
                                    return e._renderBasicRow(n, i(s.image));
                                case "Latitude":
                                case "Longitude":
                                    if (s.disableMap) return null;
                                    a = e._renderBasicRow(n, i(s.image))
                            }
                            return s.metadata ? a || e._renderBasicRow(n, i(s.metadata)) : void 0
                        })
                    }
                }, {
                    key: "_renderBasicRow",
                    value: function(e, n) {
                        return t.isEmpty(n) ? null : a.createElement("tr", {
                            "data-metadata": e,
                            key: e
                        }, a.createElement("td", {
                            className: "sm-text-mini sm-imageinfo-label"
                        }, e), a.createElement("td", {
                            className: "sm-text-mini sm-imageinfo-value sm-emphasized"
                        }, n))
                    }
                }, {
                    key: "_renderContents",
                    value: function() {
                        var e = this.state,
                            t = e.image ? e.image.get("ImageKey") : "-1",
                            n = a.createElement("div", {
                                className: "sm-imageinfo-container"
                            }, this._renderMetadata(), this._renderExpandMetadataButton()),
                            i = this._renderMapContainer(t);
                        return this._shouldHaveMap(this.state) ? this.state.expanded ? i : a.createElement(d, {
                            selectedTabKey: this.state.tab,
                            onTabSelect: this._onTabSelect.bind(this)
                        }, a.createElement(c, {
                            label: "Exif",
                            tabKey: b[0]
                        }, a.createElement("div", {
                            className: "sm-imageinfo-container"
                        }, this._renderMetadata(), this._renderExpandMetadataButton())), a.createElement(c, {
                            label: "Map",
                            tabKey: b[1]
                        }, i)) : n
                    }
                }, {
                    key: "_renderExpandButton",
                    value: function() {
                        var e = this,
                            t = this.state,
                            n = function() {
                                e.setState({
                                    expanded: !t.expanded
                                })
                            },
                            i = t.expanded ? "ScreenContract" : "ScreenExpand";
                        return a.createElement("div", {
                            className: "sm-map-toggle"
                        }, a.createElement(o, {
                            onClick: n,
                            size: "small"
                        }, a.createElement(m, {
                            icon: i,
                            size: "small"
                        })))
                    }
                }, {
                    key: "_renderExpandMetadataButton",
                    value: function() {
                        var e = this,
                            t = this.state.expandAdvanced,
                            n = function() {
                                return e.setState({
                                    expandAdvanced: !t
                                })
                            },
                            i = t ? "Show Less" : "Show More";
                        return this._hasAdvancedMetadata() ? a.createElement(o, {
                            className: "sm-imageinfo-advanced-btn",
                            onClick: n
                        }, i) : void 0
                    }
                }, {
                    key: "_renderAdvancedExifData",
                    value: function() {
                        var e = this;
                        if (!this.state.metadata) return [];
                        var n = this.state.metadata.get(),
                            i = Object.keys(n),
                            s = t.difference(i, v),
                            r = s.map(function(a) {
                                if (!t.startsWith(a, "Uri")) {
                                    var i = a,
                                        s = n[a];
                                    if ("State" !== i && "Country" !== i || !e.state.disableMap) return t.has(g, i) && (i = g[a].label, s = g[a].value(e.state.metadata)), e._renderAdvancedRow(i, s)
                                }
                            });
                        r = t.compact(r);
                        var m = a.createElement("tr", {
                            key: "advanced_header"
                        }, a.createElement("td", {
                            className: "sm-imageinfo-table-header sm-emphasized"
                        }, "Advanced"));
                        return r.length && r.unshift(m), r
                    }
                }, {
                    key: "_renderAdvancedRow",
                    value: function(e, n) {
                        return e = t.words(e).join(" "), "number" == typeof n && 0 !== n && (n = String(n)), t.isEmpty(n) ? void 0 : "string" != typeof n ? null : a.createElement("tr", {
                            "data-metadata": e,
                            key: e
                        }, a.createElement("td", {
                            className: "sm-text-mini sm-imageinfo-label"
                        }, e), a.createElement("td", {
                            className: "sm-text-mini sm-imageinfo-value"
                        }, n))
                    }
                }, {
                    key: "_renderMapContainer",
                    value: function(e) {
                        return a.createElement("div", {
                            key: e,
                            className: "sm-map-container",
                            ref: E
                        }, this._renderExpandButton())
                    }
                }, {
                    key: "_renderMetadata",
                    value: function() {
                        var e = this.state;
                        return e.image ? a.createElement("table", {
                            cellSpacing: "4",
                            cellPadding: "4"
                        }, a.createElement("tbody", null, this._renderBasicExifData(), e.expandAdvanced ? this._renderAdvancedExifData() : null)) : a.createElement(r, null)
                    }
                }, {
                    key: "_attachDragEvent",
                    value: function() {
                        this.refs[M].draggableLib.on("drag", function() {
                            var e = l.querySelector(".sm-panel-imageinfo-wrapper");
                            e && (e.className = "")
                        })
                    }
                }, {
                    key: "_attachMap",
                    value: function() {
                        if (this.state.image && (this.map && (this.map.mapNode = null, this.map.destroy(), this.map = null), this._shouldHaveMap(this.state))) {
                            var t = n.findDOMNode(this.refs[E]);
                            if (t) {
                                t.style.display = "", this.map = new e.SM.Map({
                                    container: t,
                                    minZoom: 1,
                                    satellite: !0,
                                    clusters: !1
                                }), this.map.render();
                                var a = this.map.addImageMarker(this.state.image);
                                this.map.map.setView(a.getLatLng(), 13)
                            }
                        }
                    }
                }, {
                    key: "_hasAdvancedMetadata",
                    value: function() {
                        return this.state.metadata && this._renderAdvancedExifData().length > 0
                    }
                }, {
                    key: "_onTabSelect",
                    value: function(e) {
                        this.setState({
                            tab: e
                        }), l.doc.documentElement.focus()
                    }
                }, {
                    key: "_shouldHaveMap",
                    value: function(e) {
                        if (e.disableMap) return !1;
                        var t = e.image,
                            a = e.metadata;
                        return t && 0 !== +t.get("Latitude") && 0 !== +t.get("Longitude") ? !!a : a ? a.get("Latitude") && a.get("Longitude") : !1
                    }
                }]), y
            }(a.Component);
        exports["default"] = y;
        var S = a.PropTypes;
        y.propTypes = {
            initialImage: S.object,
            initialImageMetadata: S.object,
            closeHandler: S.func.isRequired
        }, module.exports = exports["default"]
    }(), SM.currentModule = null
}, "", {
    requires: ["classnames", "lodash", "react-dom", "react", "sm", "sm-component-busy", "sm-component-button", "sm-component-draggable", "sm-component-icon", "sm-component-panel-base", "sm-component-tabview", "sm-dom", "sm-ua", "sm-map", "sm-pretty-size", "sm-image-info-panel-exif-utils"]
});
YUI.add("sm-login", function(e) {
    SM.currentModule = "sm-login";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        var i = SM["import"]("sm-analytics"),
            o = {
                Email: "Invalid Email",
                Password: "Invalid Password",
                OTPCode: "Invalid OTP",
                Login: "Invalid Email Or Password"
            };
        e.namespace("SM.Login").Form = function(i) {
            this._fieldMap = {}, i = i || {}, this._eventHandles = [], this._authCustomDomain = i.authCustomDomain || "", this._fbEnabled = i.fbEnabled, this._fbPermissions = i.fbPermissions, this._fbServiceID = i.fbServiceID, this._fbServiceType = i.fbServiceType, this._isOauthLogin = i.isOauthLogin || 0, this._password = i.password || "", this._signupLink = i.signupLink || "", this._submitButtonLabel = i.submitButtonLabel || "Log In", this._username = i.username || "", this._verifyLogin = i.verifyLogin || !1, this._fbEnabled && (this._facebook = new e.SM.Facebook, this._facebookLinkedAccountFields = null)
        }, e.SM.Login.Form.prototype = {
            renderModal: function(i) {
                var o = new e.SM.Panel({
                        titleLocation: "outside",
                        title: e.SM.Login.Form.CONSTANTS.loginTitle,
                        modal: !0,
                        centered: !0,
                        width: 340,
                        hideOn: [],
                        closable: "undefined" === i ? !1 : i
                    }),
                    t = e.one(document.createDocumentFragment());
                this.render(t), o.set("bodyContent", t), o.render(), o.get("boundingBox").addClass("sm-login-overlay"), this.on("titleChange", function(e) {
                    o.set("title", e)
                });
                var s = o.getStdModNode(e.WidgetStdMod.HEADER);
                if (s.addClass("sm-login-panel-header"), this.focusFirstField(), i) {
                    var n = e.one("document").once("key", function(e) {
                        e.preventDefault(), o.hide()
                    }, "esc");
                    o.after("hide", function() {
                        o.destroy(), n.detach(), this.destroy()
                    }, this)
                }
                return e.UA.mobile || this._eventHandles.push(e.on("windowresize", function() {
                    o.centered()
                })), o
            },
            render: function(i) {
                var o = e.Node.create('<form class="sm-login-form sm-nui" novalidate="novalidate"></form>');
                o.on("submit", function(e) {
                    e.preventDefault()
                }), this._form = o, this._setStyleState(e.SM.Login.Form.CONSTANTS.loginModeClass), this._verifyLogin && this._setStyleState(e.SM.Login.Form.CONSTANTS.verifyModeClass), this._fieldMap.Email = new e.SM.Fields.Textbox({
                    type: "email",
                    name: "username",
                    size: "large",
                    value: this._username,
                    placeholder: "email",
                    iconPrefix: "Mail"
                }).render(e.Node.create("<div>").appendTo(o)), this._fieldMap.Email.field.setData("fieldmap", "Email"), this._fieldMap.Email.container.addClass("sm-login-emailField"), this._fieldMap.Password = new e.SM.Fields.Textbox({
                    type: "password",
                    name: "password",
                    size: "large",
                    value: this._password,
                    placeholder: "password",
                    iconPrefix: "Key"
                }).render(e.Node.create("<div>").appendTo(o)), this._fieldMap.Password.field.setData("fieldmap", "Password"), this._fieldMap.Password.container.addClass("sm-login-passwordField"), this._fieldMap.OTPCode = new e.SM.Fields.Textbox({
                    type: "text",
                    name: "OTPCode",
                    size: "large",
                    placeholder: "two-factor code"
                }).render(e.Node.create("<div>").appendTo(o)), this._fieldMap.OTPCode.container.addClass("sm-login-otpField");
                var t = e.Node.create('<div class="sm-login-buttons-container"></div>');
                o.append(t), this._loginButton = e.Node.create(e.SM.Templates.button({
                    label: this._submitButtonLabel,
                    skin: "accent",
                    value: "login"
                })), t.append(this._loginButton), this.renderFacebookLogin(t);
                var s = e.Node.create('<div class="sm-login-remember-me-container"></div>');
                o.append(s);
                var n = e.Cookie.get("rememberKeepMeLoggedIn");
                this._fieldMap.RememberMe = new e.SM.Fields.Checkbox({
                    name: "rememberMe",
                    label: "Remember me",
                    value: "1",
                    unselectedValue: "0",
                    selected: null === n || "1" === n
                }).render(s), this._fieldMap.RememberMe.field.on("click", this._onRememberMeClick, this), null === n && this._setRememberMeCookie();
                var a = e.Node.create(e.SM.Login.Form.TEMPLATES.FORGOT_PASSWORD);
                return s.append(a), this._signupLink && o.append(e.SM.Login.Form.TEMPLATES.SIGNUP({
                    link: this._signupLink
                })), i.append(o), i.append(e.SM.Login.Form.TEMPLATES.TOS), this._loginButton.on("click", this._onLoginClick, this), o.delegate("keydown", this._formFieldEnterCheck, "input[type=text], input[type=email], input[type=password]", this), o.delegate("keydown", this._clearFormFieldErrors, "input[type=text], input[type=email], input[type=password]", this), this
            },
            _setStyleState: function(i) {
                this._form.removeClass(e.SM.Login.Form.CONSTANTS.loginModeClass), this._form.removeClass(e.SM.Login.Form.CONSTANTS.verifyModeClass), this._form.addClass(i)
            },
            renderFacebookLogin: function(i) {
                this._fbEnabled && (this._facebookLoginNode = e.Node.create('<div class="sm-login-facebook"></div>'), this._fbLoginButton = e.Node.create(e.SM.Templates.button({
                    skin: "none",
                    icon: "Facebook",
                    value: "facebook"
                })), this._facebookLoginNode.append(this._fbLoginButton), this._fbLoginButton.on("click", this._onFacebookLoginClick, this), this._facebook.getLoginStatus(!0).then(e.bind(function(e) {
                    this._fbLoginStatus = e
                }, this)), i.addClass("sm-login-facebook-visible"), i.append(this._facebookLoginNode))
            },
            _onFacebookLoginClick: function() {
                "connected" != this._fbLoginStatus.status ? this._facebook.login(this._fbPermissions).then(e.bind(this._onFacebookLoginResponse, this)) : this._checkFacebookAccount(this._fbLoginStatus)
            },
            _onFacebookLoginResponse: function(e) {
                this._fbLoginStatus = e, this._checkFacebookAccount(this._fbLoginStatus)
            },
            _checkFacebookAccount: function(o) {
                var t = o.authResponse,
                    s = 1;
                1 == this._fieldMap.RememberMe.getValue() && (s = 0), e.io("/rpc/social/", {
                    method: "POST",
                    data: {
                        socialID: t.userID,
                        serviceID: this._fbServiceID,
                        sessionKey: t.accessToken,
                        publicterminal: s,
                        method: "getAccountType",
                        IsOAuth: 1 == this._isOauthLogin ? 1 : 0
                    },
                    on: {
                        success: function(o, t) {
                            var n = e.JSON.parse(t.responseText);
                            if (1 == n.ServiceType || 2 == n.ServiceType)
                                if (1 == n.ValidUser) {
                                    var a = e.QueryString.stringify({
                                            socialLogin: "valid",
                                            serviceID: n.ServiceID,
                                            publicterminal: s
                                        }),
                                        r = function() {
                                            window.location.href = "/login?" + a
                                        };
                                    i.Tracker.createEvent(i.CATEGORY.LOGIN, "Login", {
                                        label: "Facebook"
                                    }).addContext(i.CONTEXT.AUTHENTICATION, {
                                        is_oauth: 1 == this._isOauthLogin,
                                        remember_me: 1 == this._fieldMap.RememberMe.getValue()
                                    }).log().then(r, r)
                                } else this._enableFacebookLink();
                            else this._enableFacebookLink()
                        }
                    },
                    context: this
                })
            },
            _enableFacebookLink: function() {
                this.fire("titleChange", e.SM.Login.Form.CONSTANTS.verifyTitle), this._facebook.getProfile().then(e.bind(function(i) {
                    var o = this._facebook.generateSocialAccountProfile(i),
                        t = e.JSON.stringify(o);
                    this._facebookLinkedAccountFields = {
                        SocialID: i.id,
                        ServiceID: this._fbServiceID,
                        LinkAccounts: 1,
                        ServiceType: this._fbServiceType,
                        ProfileData: t
                    }
                }, this))
            },
            _onRememberMeClick: function(e) {
                this._setRememberMeCookie()
            },
            _setRememberMeCookie: function() {
                e.Cookie.set("rememberKeepMeLoggedIn", this._fieldMap.RememberMe.getValue(), {
                    domain: window.SM.env.host.session,
                    path: "/",
                    expires: new Date(+new Date + 31536e6)
                })
            },
            _clearFormFieldErrors: function(e) {
                var i = e.currentTarget.getData("fieldmap") || e.currentTarget.get("name");
                this._clearFormFieldErrorsWithName(i)
            },
            _clearFormFieldErrorsWithName: function(e) {
                this._fieldMap[e] && this._fieldMap[e].clearError()
            },
            _formFieldEnterCheck: function(e) {
                13 === e.keyCode && (e.halt(), this._submitForm())
            },
            _onLoginClick: function() {
                this._submitForm("rpc.user.login", this._onLoginSuccess)
            },
            _submitForm: function(i, o) {
                this._loginButton.set("disabled", "disabled"), this._fbEnabled && this._fbLoginButton.set("disabled", "disabled");
                var t = {
                    Email: this._fieldMap.Email.getValue(),
                    Password: this._fieldMap.Password.getValue(),
                    OTPCode: this._fieldMap.OTPCode.getValue(),
                    KeepLoggedIn: this._fieldMap.RememberMe.getValue(),
                    IsOAuth: 1 == this._isOauthLogin ? 1 : 0
                };
                this._facebookLinkedAccountFields && (t = e.merge(t, this._facebookLinkedAccountFields)), new e.SM.API({
                    source: "https://" + SM.env.host.ssl + e.SM.API.URL
                }).sendRequest({
                    apiMethod: i || "rpc.user.login",
                    httpMethod: "POST",
                    data: t,
                    withCredentials: !0,
                    cacheResponse: !1
                }).then((o || this._onLoginSuccess).bind(this), this._formSubmitFailure.bind(this))
            },
            login: function() {
                this._submitForm()
            },
            _onLoginSuccess: function(o) {
                var t = o.response.results,
                    s = this._authCustomDomain || t.Domain,
                    n = i.Tracker.createEvent(i.CATEGORY.LOGIN, "Login", {
                        label: "Email"
                    }).addContext(i.CONTEXT.AUTHENTICATION, {
                        is_oauth: 1 == this._isOauthLogin,
                        remember_me: 1 == this._fieldMap.RememberMe.getValue()
                    }).log(),
                    a = e.QueryString.parse(window.location.search.substr(1)),
                    r = window.location.href;
                if (t.VerifiedGoTo && a.goTo && (r = a.goTo), (r === "http://" + SM.env.host.main + "/" || r === "https://" + SM.env.host.main + "/") && (r = t.DefaultPage), s) {
                    var l = e.QueryString.stringify({
                        SessionID: t.SessionID,
                        skey: t.Key,
                        goTo: r
                    });
                    r = "http://" + s + "/cookiemonster.mg?" + l
                }
                var d = function() {
                    window.location.href = r
                };
                n.then(d, d)
            },
            _formSubmitFailure: function(t) {
                this._loginButton.set("disabled", ""), this._fbEnabled && this._fbLoginButton.set("disabled", "");
                var s = !1;
                t.error.errors ? e.Array.each(t.error.errors, function(t) {
                    this._fieldMap[t.Field] ? this._fieldMap[t.Field].setError(e.SM.Login.Form.ERROR_MESSAGES[t.Message]) : "Login" == t.Field ? (this._fieldMap.Email.setError(""), this._fieldMap.Password.setError(e.SM.Login.Form.ERROR_MESSAGES.invalidLogin)) : "OTPRequired" == t.Field && (this._fieldMap.Email.setError(""), this._fieldMap.Password.setError(""), this.fire("titleChange", e.SM.Login.Form.CONSTANTS.otpTitle), this._setStyleState(e.SM.Login.Form.CONSTANTS.otpModeClass), this._form.one(".sm-login-buttons-container").removeClass("sm-login-facebook-visible"), this._fieldMap.OTPCode.field.focus(), this._fbEnabled && (this._facebookLoginNode.remove(), this._fbLoginButton.set("disabled", "disabled"))), !s && o[t.Field] && (s = !0, i.Tracker.createEvent(i.CATEGORY.LOGIN, "Login Error", {
                        label: o[t.Field],
                        systemAction: !0
                    }).addContext(i.CONTEXT.AUTHENTICATION, {
                        is_oauth: 1 == this._isOauthLogin
                    }).log())
                }, this) : (this._fieldMap.Email.setError(""), this._fieldMap.Password.setError(e.SM.Login.Form.ERROR_MESSAGES.serverError))
            },
            focusFirstField: function() {
                this._fieldMap.Email.getValue() ? this._fieldMap.Password.field.focus() : this._fieldMap.Email.field.focus()
            },
            destroy: function() {
                e.Array.each(this._eventHandles, function(e) {
                    e.detach()
                }), this.detachAll(), this._form.remove().destroy(!0), this._facebook && this._facebook.destroy()
            }
        }, e.SM.Login.Form.TEMPLATES = {
            FORGOT_PASSWORD: '<a class="sm-login-forgot-password-link" href="/passwordreset/request">Forgot your password?</a>',
            TOS: '<div class="sm-login-tos"><p class="sm-text-mini"><span>By logging in, you agree to SmugMug\'s </span><a href="' + SM.env.host.http + SM.env.host.main + '/about/terms">Terms of Use</a><span> and </span><a href="' + SM.env.host.http + SM.env.host.main + '/about/privacy">Privacy Policy</a></p></div>',
            SIGNUP: e.Template.Micro.compile('<div class="sm-login-signup"><a class="sm-muted" href="<%= data.link %>">Don\'t have an account yet?</a></div>')
        }, e.SM.Login.Form.ERROR_MESSAGES = {
            missingEmail: "Please enter your email",
            missingPassword: "Please enter your password",
            invalidEmail: "Please check your email and try again",
            invalidPassword: "Please check your password and try again",
            invalidLogin: "Please check your username and password",
            serverError: "Oops... There was an error on the server.",
            invalidOTP: "Double check your two-factor code.",
            cannotLinkAssistant: "Only account owner can link an account."
        }, e.SM.Login.Form.CONSTANTS = {
            loginModeClass: "sm-login-form-login-mode",
            otpModeClass: "sm-login-form-otp-mode",
            verifyModeClass: "sm-login-form-verify-mode",
            loginTitle: "Login",
            verifyTitle: "Verify Login",
            otpTitle: "Two-Factor Verification",
            desiredWidth: 340,
            minimumWidth: 310
        }, e.augment(e.SM.Login.Form, e.EventTarget)
    }(), SM.currentModule = null
}, "", {
    requires: ["cookie", "event-resize", "history", "io", "querystring-parse", "sm", "sm-analytics", "sm-facebook", "sm-fields", "sm-image-model", "sm-page", "sm-panel", "sm-templates-button", "sm-templates-form", "transition"]
});
YUI.add("sm-mobile-app-instructions", function(e) {
    SM.currentModule = "sm-mobile-app-instructions";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        ! function() {
            var e = SM["import"]("react"),
                t = SM["import"]("sm-icon"),
                n = SM["import"]("sm-ua"),
                o = SM["import"]("sm-banner"),
                r = function(r) {
                    var a = void 0;
                    switch ((new n).os) {
                        case "iOS":
                            a = e.createElement(o.Message, null, "Tap ", e.createElement(t, {
                                name: "ActionAlt",
                                size: "small"
                            }), ' and then "Add to Home Screen".');
                            break;
                        case "Windows Phone":
                            a = e.createElement(o.Message, null, "Swipe up from the bottom of your screen and tap ", e.createElement(t, {
                                name: "StarOutlined",
                                size: "small"
                            }), ".");
                            break;
                        case "Android":
                        default:
                            a = e.createElement(o.Message, null, "Tap ", e.createElement(t, {
                                name: "MoreVert",
                                size: "small"
                            }), ' and then "Add to Homescreen".')
                    }
                    return e.createElement(o, r, e.createElement(o.Title, null, "To Install:"), a)
                };
            module.exports = exports = r
        }(), ! function() {
            var e = SM["import"]("sm-dom"),
                t = SM["import"]("sm-ua"),
                n = SM["import"]("sm-uri"),
                o = SM["import"]("sm-page"),
                r = SM["import"]("react"),
                a = SM["import"]("react-dom"),
                m = exports;
            o.on("page:init", function() {
                var o = n(e.win.location.href),
                    s = o.queryParams.mobile;
                if (s && !e.isStandalone) {
                    var i = e.doc.createElement("div");
                    switch (e.doc.body.insertBefore(i, e.doc.getElementById("sm-page-content")), (new t).os) {
                        case "Android":
                        case "iOS":
                        case "Windows Phone":
                            var c = a.render(r.createElement(m, {
                                onClose: function() {
                                    return a.unmountComponentAtNode(c)
                                }
                            }), i)
                    }
                }
            })
        }()
    }(), SM.currentModule = null
}, "", {
    requires: ["react", "react-dom", "sm", "sm-dom", "sm-ua", "sm-uri", "sm-icon", "sm-component-button", "sm-banner"]
});
YUI.add("sm-share-panel", function(e) {
    SM.currentModule = "sm-share-panel";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        ! function() {
            var e, t = SM["import"]("sm-component-busy"),
                n = SM["import"]("sm-image-sizes"),
                a = SM["import"]("sm-component-panel-base"),
                i = SM["import"]("react"),
                s = SM["import"]("react-dom"),
                o = SM["import"]("sm-component-tabview"),
                r = o.Tab,
                l = SM["import"]("sm-ua"),
                c = SM["import"]("sm-component-draggable"),
                m = SM["import"]("sm-dom"),
                u = SM["import"]("sm-analytics"),
                p = SM["import"]("sm-page"),
                d = "photo-tab",
                h = "gallery-tab",
                b = "social-tab",
                g = "buy-tab",
                S = (e = {}, babelHelpers.defineProperty(e, d, {
                    Photo: "Photo",
                    Video: "Video"
                }), babelHelpers.defineProperty(e, h, "Gallery"), babelHelpers.defineProperty(e, b, "Social"), babelHelpers.defineProperty(e, g, "Cart"), e),
                y = "DRAGGABLE",
                f = function(e) {
                    function f(e) {
                        babelHelpers.classCallCheck(this, f);
                        var t = babelHelpers.possibleConstructorReturn(this, (f.__proto__ || Object.getPrototypeOf(f)).call(this, e));
                        return t.state = {
                            imageSizeDetails: null,
                            albumImageResource: e.albumImageResource,
                            albumImageShareUrisResource: e.albumImageShareUrisResource,
                            imageSizes: null,
                            embedVideo: e.embedVideo,
                            selectedTabKey: d
                        }, t._logScreenViewAnalytics(d), "ontouchstart" in m.doc.documentElement || ("Mac OS X" === (new l).os ? t._copyInstructions = "CMD + C to copy" : t._copyInstructions = "CTRL + C to copy"), t
                    }
                    return babelHelpers.inherits(f, e), babelHelpers.createClass(f, [{
                        key: "_attachDragEvent",
                        value: function() {
                            this.refs[y].draggableLib.on("drag", function() {
                                var e = m.querySelector(".sm-share-panel-wrapper");
                                e && (e.className = "")
                            })
                        }
                    }, {
                        key: "_onTabSelect",
                        value: function(e) {
                            var t = this;
                            if (this.state.selectedTabKey !== e) {
                                var n = {
                                    selectedTabKey: e
                                };
                                this.setState(n, function() {
                                    t._focusAndSelect(), t._logScreenViewAnalytics(e)
                                })
                            }
                        }
                    }, {
                        key: "_focusAndSelect",
                        value: function(e) {
                            var t = s.findDOMNode(e);
                            t && t.value && (t.focus(), this._select(t))
                        }
                    }, {
                        key: "_select",
                        value: function(e) {
                            var t = s.findDOMNode(e);
                            t && t.value && (t.select(), t.setSelectionRange && t.setSelectionRange(0, t.value.length))
                        }
                    }, {
                        key: "_thenImageExpanded",
                        value: function(e) {
                            for (var t = e.ImageSizeDetails, a = t.get(), i = a.UsableSizes.length, s = i, o = s - 1; o >= 0; o--) {
                                var r = a.UsableSizes[o],
                                    l = a[r];
                                l.Url === e.LargestImage.get("Url") && (s = o)
                            }
                            a.UsableSizes.splice(s + 1, i - s), a.VideoSMIL && (a = t), this.setState({
                                imageSizeDetails: t,
                                imageSizes: new n(a, {
                                    pixelRatio: 1
                                }),
                                embedVideo: e.EmbedVideo
                            })
                        }
                    }, {
                        key: "_updateImage",
                        value: function() {
                            var e = this.state.albumImageResource;
                            e.expand(["ImageSizeDetails", "EmbedVideo", "LargestImage"], {
                                io: {
                                    cache: !0
                                }
                            }).then(this._thenImageExpanded.bind(this))
                        }
                    }, {
                        key: "_logScreenViewAnalytics",
                        value: function(e) {
                            var t = void 0;
                            if (e === d) {
                                var n = S[e];
                                t = this.state.albumImageResource.get("IsVideo") ? n.Video : n.Photo
                            } else t = S[e];
                            var a = u.Tracker.createEvent(u.CATEGORY.SHARE_PANEL, "Screen View", {
                                label: t
                            }).addContext(u.CONTEXT.SCREEN, {
                                screen_name: t
                            });
                            return a.log()
                        }
                    }, {
                        key: "_logCopyLinkAnalytics",
                        value: function(e) {
                            var t = this.state.albumImageResource,
                                n = p.model,
                                a = u.Tracker.createEvent(u.CATEGORY.SHARE_PANEL, "Copy Link", {
                                    label: e.linkType,
                                    property: e.link
                                }).addContext(u.CONTEXT.IMAGE, {
                                    image_key: t.get("ImageKey")
                                }).addContext(u.CONTEXT.SCREEN, {
                                    screen_name: e.screen
                                }).addContext(u.CONTEXT.NODE, {
                                    node_type: n.getTypeName(),
                                    node_id: n.get("NodeID")
                                });
                            return a.log()
                        }
                    }, {
                        key: "componentWillMount",
                        value: function() {
                            this._updateImage()
                        }
                    }, {
                        key: "componentDidUpdate",
                        value: function(e, t) {
                            t.albumImageResource === this.state.albumImageResource && this.state.imageSizes || this._updateImage()
                        }
                    }, {
                        key: "componentDidMount",
                        value: function() {
                            this._attachDragEvent()
                        }
                    }, {
                        key: "render",
                        value: function() {
                            var e = this.state,
                                n = e.imageSizes,
                                s = e.imageSizeDetails,
                                l = e.embedVideo,
                                m = this.props,
                                u = module.exports,
                                p = m.albumResource,
                                S = e.albumImageResource,
                                f = m.albumShareUrisResource,
                                v = e.albumImageShareUrisResource,
                                k = m.userResource,
                                E = v.get("BuyUri"),
                                C = u.SocialButtons,
                                T = u.PhotoTab,
                                _ = u.GalleryTab,
                                I = u.CartTab,
                                z = S.get("IsVideo") ? "Video" : "Photo",
                                R = [];
                            return n && s && R.push(i.createElement(r, {
                                label: z,
                                tabKey: d,
                                key: d
                            }, i.createElement(T, {
                                albumImageResource: S,
                                albumImageShareUrisResource: v,
                                imageSizeDetails: s,
                                embedVideo: l,
                                imageSizes: n,
                                focusAndSelectText: this._focusAndSelect.bind(this),
                                copyInstructions: this._copyInstructions,
                                onCopyLink: this._logCopyLinkAnalytics.bind(this)
                            }))), R.push(i.createElement(r, {
                                label: "Gallery",
                                tabKey: h,
                                key: h
                            }, i.createElement(_, {
                                ref: "gallery",
                                albumResource: p,
                                albumShareUrisResource: f,
                                focusAndSelectText: this._focusAndSelect.bind(this),
                                copyInstructions: this._copyInstructions,
                                onCopyLink: this._logCopyLinkAnalytics.bind(this)
                            }))), (k && k.get("QuickShare") || k && SM.env.loggedInUser && SM.env.loggedInUser.nickName === k.get("NickName")) && R.push(i.createElement(r, {
                                label: "Social",
                                tabKey: b,
                                key: b
                            }, i.createElement(C, {
                                albumResource: p,
                                albumImageResource: S
                            }))), E && R.push(i.createElement(r, {
                                label: "Cart",
                                tabKey: g,
                                key: g
                            }, i.createElement(I, {
                                albumImageResource: S,
                                albumImageShareUrisResource: v,
                                focusAndSelectText: this._focusAndSelect.bind(this),
                                copyInstructions: this._copyInstructions,
                                onCopyLink: this._logCopyLinkAnalytics.bind(this)
                            }))), i.createElement(c, {
                                ref: y
                            }, i.createElement("div", {
                                className: "sm-share-panel-wrapper"
                            }, i.createElement(a, {
                                className: "sm-share-panel",
                                headerPosition: "inside",
                                width: m.width
                            }, i.createElement(c.DraggableHandle, null, i.createElement(a.Header, null, i.createElement(a.CloseButton, {
                                onClick: m.onDone
                            }), i.createElement("h2", null, "Share"))), i.createElement(a.Body, null, !n && !s && i.createElement(t, null), n && s && i.createElement(o, {
                                selectedTabKey: e.selectedTabKey,
                                onTabSelect: this._onTabSelect.bind(this)
                            }, R)))))
                        }
                    }]), f
                }(i.Component),
                v = i.PropTypes;
            f.propTypes = {
                albumResource: v.object.isRequired,
                albumShareUrisResource: v.object.isRequired,
                onDone: v.func.isRequired,
                userResource: v.object.isRequired,
                width: v.number
            }, f.defaultProps = {
                width: 336
            }, module.exports = exports = f
        }(), ! function() {
            var e, t = SM["import"]("sm-image-sizes"),
                n = SM["import"]("sm-component-button"),
                a = SM["import"]("sm-component-buttongroup"),
                i = SM["import"]("react"),
                s = SM["import"]("sm-component-select"),
                o = SM["import"]("sm-component-textbox"),
                r = SM["import"]("sm-component-textarea"),
                l = SM["import"]("sm-component-underlineformfield"),
                c = SM["import"]("sm-page"),
                m = SM["import"]("sm-component-pure-render"),
                u = {
                    VideoSize320: "EmbedSize320",
                    VideoSize640: "EmbedSize640",
                    VideoSize960: "EmbedSize960",
                    VideoSize1280: "EmbedSize1280",
                    VideoSize1920: "EmbedSize1920"
                },
                p = {
                    VideoSize320: "ImageSizeSmall",
                    VideoSize640: "ImageSizeMedium",
                    VideoSize960: "ImageSizeXLarge",
                    VideoSize1280: "ImageSizeX2Large",
                    VideoSize1920: "ImageSizeX3Large"
                },
                d = {
                    ImageSizeTiny: "VideoSize320",
                    ImageSizeThumb: "VideoSize320",
                    ImageSizeSmall: "VideoSize320",
                    ImageSizeMedium: "VideoSize640",
                    ImageSizeLarge: "VideoSize640",
                    ImageSizeXLarge: "VideoSize960",
                    ImageSizeX2Large: "VideoSize1280",
                    ImageSizeX3Large: "VideoSize1920",
                    ImageSizeOriginal: "VideoSize1920"
                },
                h = {
                    ImageSizeTiny: "Tiny",
                    ImageSizeThumb: "Thumb",
                    ImageSizeSmall: "Small",
                    ImageSizeMedium: "Medium",
                    ImageSizeLarge: "Large",
                    ImageSizeXLarge: "XLarge",
                    ImageSizeX2Large: "X2Large",
                    ImageSizeX3Large: "X3Large",
                    ImageSizeOriginal: "Original",
                    VideoSize320: "Low Def",
                    VideoSize640: "Standard Def",
                    VideoSize960: "Quarter High Def",
                    VideoSize1280: "High Def",
                    VideoSize1920: "Full High Def"
                },
                b = "imageOnly",
                g = "html",
                S = "bbcode",
                y = (e = {}, babelHelpers.defineProperty(e, b, {
                    Photo: "Photo Only",
                    Video: "Video Only"
                }), babelHelpers.defineProperty(e, g, "HTML"), babelHelpers.defineProperty(e, S, "BBCode"), e),
                f = function(e) {
                    function m(e) {
                        babelHelpers.classCallCheck(this, m);
                        var t = babelHelpers.possibleConstructorReturn(this, (m.__proto__ || Object.getPrototypeOf(m)).call(this, e));
                        return t.state = {
                            selectedSize: "",
                            embedType: b
                        }, t
                    }
                    return babelHelpers.inherits(m, e), babelHelpers.createClass(m, [{
                        key: "componentWillUpdate",
                        value: function(e, n) {
                            var a = n.selectedSize,
                                i = e.imageSizeDetails,
                                s = e.imageSizes,
                                o = e.albumImageResource.get("IsVideo");
                            if (!i.get(a) && "" !== a) {
                                var r = s.getLargestSize();
                                a = r.Name, this.setState({
                                    selectedSize: a
                                })
                            }
                            if (o && -1 === a.indexOf(t.TYPE_VIDEO)) {
                                var l = d[a];
                                a = l || "", this.setState({
                                    selectedSize: a
                                })
                            } else if (!o && -1 === a.indexOf(t.TYPE_PHOTO)) {
                                var c = p[a];
                                a = c || "", this.setState({
                                    selectedSize: a
                                })
                            }
                        }
                    }, {
                        key: "_getEmbedText",
                        value: function() {
                            var e = this.props,
                                t = this.state,
                                n = t.selectedSize,
                                a = e.albumImageResource,
                                i = e.imageSizeDetails,
                                s = a.get("IsVideo");
                            if (!n || !i.get(n)) return "";
                            switch (t.embedType) {
                                case b:
                                    return i.get(n).Url;
                                case g:
                                    if (s) {
                                        var o = u[n];
                                        return o ? e.embedVideo.get(o) : ""
                                    }
                                    return '<a href="' + this._getLightboxUri() + '"><img src="' + i.get(n).Url + '" alt="' + a.get("Title") + '"></a>';
                                case S:
                                    var r = "";
                                    return r = s ? i.get(p[n]).Url : i.get(n).Url, "[url=" + this._getLightboxUri() + "][img]" + r + "[/img][/url]"
                            }
                        }
                    }, {
                        key: "_getLightboxUri",
                        value: function() {
                            return this.props.albumImageShareUrisResource.get("LightboxUri")
                        }
                    }, {
                        key: "_getOptions",
                        value: function() {
                            var e = this.props.albumImageResource.get("IsVideo") ? t.TYPE_VIDEO : t.TYPE_PHOTO;
                            return [i.createElement(s.SelectOption, {
                                key: "choose-a-size",
                                value: ""
                            }, "Choose a size")].concat(babelHelpers.toConsumableArray(this._getOptionsForSourceUrls(e)))
                        }
                    }, {
                        key: "_getOptionsForSourceUrls",
                        value: function(e) {
                            for (var t = this.props, n = t.albumImageResource, a = t.imageSizes, o = [], r = a.getSortedSizes({
                                    type: e
                                }), l = 0; l < r.length; l++) {
                                var c = r[l],
                                    m = this._getSizeName(n, c);
                                m && o.push(i.createElement(s.SelectOption, {
                                    value: c.Name,
                                    key: "size-option-" + c.Name
                                }, m))
                            }
                            return o
                        }
                    }, {
                        key: "_onChangeSize",
                        value: function(e) {
                            this.setState({
                                selectedSize: e.target.value
                            })
                        }
                    }, {
                        key: "_onEmbedTypeClick",
                        value: function(e) {
                            this.setState({
                                embedType: e
                            })
                        }
                    }, {
                        key: "_getSizeName",
                        value: function(e, t) {
                            var n = h[t.Name];
                            return n ? e.get("IsVideo") ? n : n + ": " + t.DisplayWidth + " x " + t.DisplayHeight : null
                        }
                    }, {
                        key: "render",
                        value: function() {
                            var e = this,
                                t = this.state,
                                m = this.props,
                                u = m.albumImageResource,
                                p = u.get("IsVideo") ? "Video" : "Photo";
                            return i.createElement("div", {
                                className: "sm-share-panel-content"
                            }, i.createElement("p", {
                                className: "sm-text-mini sm-share-panel-link-label"
                            }, p, " Link"), i.createElement(o, {
                                type: "text",
                                value: this._getLightboxUri(),
                                readOnly: !0,
                                ref: "linkText",
                                tabIndex: 1,
                                onClick: function() {
                                    m.focusAndSelectText(e.refs.linkText)
                                },
                                onCopy: function(e) {
                                    m.onCopyLink({
                                        linkType: p + " Link",
                                        link: e.target.value,
                                        screen: p
                                    })
                                }
                            }), c.isOwnerOrAdmin() && i.createElement("div", {
                                className: "sm-share-panel-photo-embed-section"
                            }, i.createElement("p", {
                                className: "sm-text-mini sm-share-panel-embed-label"
                            }, "Embed ", p), i.createElement(l, {
                                className: "sm-share-panel-size-dropdown",
                                label: "Size"
                            }, i.createElement(s.Select, {
                                noChrome: !0,
                                onChange: this._onChangeSize.bind(this),
                                value: this.state.selectedSize
                            }, this._getOptions())), i.createElement(a, {
                                size: "small",
                                className: "sm-share-panel-embed-type"
                            }, i.createElement(n, {
                                onClick: this._onEmbedTypeClick.bind(this, b),
                                skin: t.embedType === b ? "submit" : "default"
                            }, p, " Only"), i.createElement(n, {
                                onClick: this._onEmbedTypeClick.bind(this, g),
                                skin: t.embedType === g ? "submit" : "default"
                            }, "HTML"), i.createElement(n, {
                                onClick: this._onEmbedTypeClick.bind(this, S),
                                skin: t.embedType === S ? "submit" : "default"
                            }, "BBCode")), i.createElement("div", {
                                className: "sm-share-panel-photo-embed-text"
                            }, i.createElement(r, {
                                placeholder: "Please choose a size!",
                                value: this._getEmbedText(),
                                readOnly: !0,
                                ref: "embedText",
                                tabIndex: 2,
                                onClick: m.focusAndSelectText.bind(null, this.refs.embedText),
                                onCopy: function(t) {
                                    var n = e.state.embedType,
                                        a = "Embed " + p + " - ";
                                    a += n === b ? y[n][p] : y[n], m.onCopyLink({
                                        linkType: a,
                                        link: t.target.value,
                                        screen: p
                                    })
                                }
                            }))), i.createElement("span", {
                                className: "sm-text-mini sm-share-panel-copy-instructions"
                            }, m.copyInstructions))
                        }
                    }]), m
                }(m),
                v = i.PropTypes;
            f.propTypes = {
                albumImageResource: v.object.isRequired,
                albumImageShareUrisResource: v.object.isRequired,
                imageSizeDetails: v.object.isRequired,
                imageSizes: v.object.isRequired,
                embedVideo: v.object,
                focusAndSelectText: v.func.isRequired,
                copyInstructions: v.string,
                onCopyLink: v.func
            }, exports.PhotoTab = f
        }(), ! function() {
            var t = SM["import"]("sm-component-checkbox"),
                n = SM["import"]("sm-component-inlinenumber"),
                a = SM["import"]("react"),
                i = SM["import"]("sm-component-select"),
                s = SM["import"]("sm-component-underlineformfield"),
                o = SM["import"]("sm-component-textbox"),
                r = SM["import"]("sm-component-textarea"),
                l = SM["import"]("sm-component-button"),
                c = SM["import"]("sm-component-buttongroup"),
                m = SM["import"]("sm-page"),
                u = SM["import"]("sm-uri"),
                p = (SM["import"]("sm-dom"), "fullscreen"),
                d = "embed",
                h = function(h) {
                    function b(e) {
                        babelHelpers.classCallCheck(this, b);
                        var t = babelHelpers.possibleConstructorReturn(this, (b.__proto__ || Object.getPrototypeOf(b)).call(this, e));
                        return t.state = {
                            slideshowType: p,
                            autoStart: !0,
                            captions: !1,
                            navigation: !1,
                            playButton: !1,
                            randomize: !1,
                            speed: 3,
                            transition: "fade",
                            transitionSpeed: 2,
                            showTransitionSpeed: !0
                        }, t
                    }
                    return babelHelpers.inherits(b, h), babelHelpers.createClass(b, [{
                        key: "_buildSlideshowOptions",
                        value: function() {
                            var e = this,
                                n = this.state;
                            return a.createElement("div", null, a.createElement("p", {
                                className: "sm-text-mini sm-share-panel-options-label"
                            }, "Options"), a.createElement("div", {
                                className: "sm-share-panel-slideshow-options"
                            }, a.createElement(s, {
                                label: "Auto Start"
                            }, a.createElement(t, {
                                ref: "autoStart",
                                checked: n.autoStart,
                                onChange: function(t) {
                                    e._onChangeField("autoStart", t)
                                }
                            })), a.createElement(s, {
                                label: "Randomize Photos"
                            }, a.createElement(t, {
                                ref: "randomize",
                                checked: n.randomize,
                                onChange: function(t) {
                                    e._onChangeField("randomize", t)
                                }
                            })), a.createElement(s, {
                                label: "Captions"
                            }, a.createElement(t, {
                                ref: "captions",
                                checked: n.captions,
                                onChange: function(t) {
                                    e._onChangeField("captions", t)
                                }
                            })), a.createElement(s, {
                                label: "Navigation"
                            }, a.createElement(t, {
                                ref: "navigation",
                                checked: n.navigation,
                                onChange: function(t) {
                                    e._onChangeField("navigation", t)
                                }
                            })), a.createElement(s, {
                                label: "Play Button"
                            }, a.createElement(t, {
                                ref: "playButton",
                                checked: n.playButton,
                                onChange: function(t) {
                                    e._onChangeField("playButton", t)
                                }
                            })), a.createElement(s, {
                                label: "Speed"
                            }, this._buildSpeedField()), a.createElement(s, {
                                label: "Transition"
                            }, a.createElement(i.Select, {
                                ref: "transition",
                                defaultValue: n.transition,
                                noChrome: !0,
                                onChange: this._onChangeTransition.bind(this)
                            }, a.createElement(i.SelectOption, {
                                value: "none"
                            }, "None"), a.createElement(i.SelectOption, {
                                value: "fade"
                            }, "Fade"))), this._buildTransitionSpeedOptions()))
                        }
                    }, {
                        key: "_buildSpeedField",
                        value: function() {
                            var t = this,
                                s = [0, 1, 2, 3, 4, 5, 10, 15],
                                o = this.state,
                                r = s.map(function(e) {
                                    return a.createElement(i.SelectOption, {
                                        value: "" + e
                                    }, e + "s")
                                });
                            return e.UA.android ? a.createElement(i.Select, {
                                ref: "speed",
                                onChange: function(e) {
                                    t._onChangeField("speed", e.target.value)
                                },
                                defaultValue: o.speed,
                                noChrome: !0
                            }, r) : a.createElement(n, {
                                ref: "speed",
                                units: "seconds",
                                onChange: function(e) {
                                    t._onChangeField("speed", e.target.value)
                                },
                                defaultValue: o.speed
                            })
                        }
                    }, {
                        key: "_buildTransitionSpeedOptions",
                        value: function() {
                            var t = this,
                                o = [0, 1, 2, 3, 4, 5],
                                r = this.state,
                                l = o.map(function(e) {
                                    return a.createElement(i.SelectOption, {
                                        value: "" + e
                                    }, e + "s")
                                });
                            return r.showTransitionSpeed ? e.UA.android ? a.createElement(s, {
                                label: "Transition Speed"
                            }, a.createElement(i.Select, {
                                defaultValue: r.transitionSpeed,
                                ref: "transitionSpeed",
                                onChange: function(e) {
                                    t._onChangeField("transitionSpeed", e.target.value)
                                },
                                noChrome: !0
                            }, l)) : a.createElement(s, {
                                label: "Transition Speed"
                            }, a.createElement(n, {
                                defaultValue: r.transitionSpeed,
                                ref: "transitionSpeed",
                                units: "seconds",
                                onChange: function(e) {
                                    t._onChangeField("transitionSpeed", e.target.value)
                                }
                            })) : null
                        }
                    }, {
                        key: "_getMobileURL",
                        value: function() {
                            var e = u(this.props.albumResource.get("WebUri"));
                            e.queryParams.mobile = !0;
                            var t = u.stringifyQuery(e.queryParams),
                                n = e.fragment ? "#" + e.fragment : "";
                            return e.protocol + "://" + e.host + e.path + "?" + t + n
                        }
                    }, {
                        key: "_getSlideshowParams",
                        value: function() {
                            var e = this.state,
                                t = {
                                    autoStart: e.autoStart ? 1 : 0,
                                    captions: e.captions ? 1 : 0,
                                    navigation: e.navigation ? 1 : 0,
                                    playButton: e.playButton ? 1 : 0,
                                    randomize: e.randomize ? 1 : 0,
                                    speed: e.speed,
                                    transition: e.transition
                                };
                            return "none" !== t.transition && (t.transitionSpeed = e.transitionSpeed), t
                        }
                    }, {
                        key: "_getSlideshowURL",
                        value: function() {
                            var e = this.props.albumShareUrisResource.get("SlideshowUri");
                            return e + "&" + u.stringifyQuery(this._getSlideshowParams())
                        }
                    }, {
                        key: "_getSlideshowEmbed",
                        value: function() {
                            return '<iframe src="' + this._getSlideshowURL() + '" width="800" height="600" frameborder="no" scrolling="no"></iframe>'
                        }
                    }, {
                        key: "_onChangeField",
                        value: function(e, t) {
                            this.setState(babelHelpers.defineProperty({}, e, t))
                        }
                    }, {
                        key: "_onChangeTransition",
                        value: function(e) {
                            var t = e.target.value;
                            this.setState({
                                transition: t,
                                showTransitionSpeed: "none" !== t
                            })
                        }
                    }, {
                        key: "_onSlideshowTypeClick",
                        value: function(e) {
                            this.setState({
                                slideshowType: e
                            })
                        }
                    }, {
                        key: "render",
                        value: function() {
                            var e = this,
                                t = this.state,
                                n = this.props;
                            return a.createElement("div", {
                                className: "sm-share-panel-content"
                            }, a.createElement("p", {
                                className: "sm-text-mini sm-share-panel-gallery-label"
                            }, "Gallery Link"), a.createElement(o, {
                                tabIndex: 1,
                                type: "text",
                                value: n.albumResource.get("WebUri"),
                                readOnly: !0,
                                ref: "linkText",
                                onClick: function() {
                                    n.focusAndSelectText(e.refs.linkText)
                                },
                                onCopy: function(e) {
                                    n.onCopyLink({
                                        linkType: "Gallery Link",
                                        link: e.target.value,
                                        screen: "Gallery"
                                    })
                                }
                            }), a.createElement("p", {
                                className: "sm-text-mini sm-share-panel-gallery-label"
                            }, "Mobile App Link"), a.createElement(o, {
                                tabIndex: 2,
                                type: "text",
                                value: this._getMobileURL(),
                                readOnly: !0,
                                ref: "mobileAppText",
                                onClick: function() {
                                    n.focusAndSelectText(e.refs.mobileAppText)
                                }
                            }), a.createElement("p", {
                                className: "sm-text-mini sm-share-panel-slideshow-label"
                            }, "Slideshow"), m.isOwnerOrAdmin() && a.createElement(c, {
                                size: "small",
                                className: "sm-share-panel-slideshow-type"
                            }, a.createElement(l, {
                                onClick: this._onSlideshowTypeClick.bind(this, p),
                                skin: t.slideshowType === p ? "submit" : "default"
                            }, "Fullscreen"), a.createElement(l, {
                                onClick: this._onSlideshowTypeClick.bind(this, d),
                                skin: t.slideshowType === d ? "submit" : "default"
                            }, "Embed")), this.state.slideshowType === p && a.createElement("div", {
                                className: "sm-share-panel-fullscreen-section"
                            }, a.createElement("p", {
                                className: "sm-share-panel-fullscreen-instructions"
                            }, "Copy the link below to share this gallery as a fullscreen slideshow."), a.createElement("div", {
                                className: "sm-share-panel-fullscreen-text"
                            }, a.createElement(o, {
                                tabIndex: 3,
                                type: "text",
                                value: this._getSlideshowURL() + "&clickable=1",
                                readOnly: !0,
                                ref: "fullscreenText",
                                onClick: function() {
                                    n.focusAndSelectText(e.refs.fullscreenText)
                                },
                                onCopy: function(e) {
                                    n.onCopyLink({
                                        linkType: "Slideshow - Fullscreen",
                                        link: e.target.value,
                                        screen: "Gallery"
                                    })
                                }
                            })), a.createElement("span", {
                                className: "sm-text-mini sm-share-panel-copy-instructions"
                            }, n.copyInstructions), this._buildSlideshowOptions()), m.isOwnerOrAdmin() && this.state.slideshowType === d && a.createElement("div", {
                                className: "sm-share-panel-embed-section"
                            }, a.createElement("p", {
                                className: "sm-share-panel-embed-instructions"
                            }, "Copy the HTML below to embed a gallery slideshow into a website, blog, etc."), a.createElement("div", {
                                className: "sm-share-panel-photo-embed-text"
                            }, a.createElement(r, {
                                value: this._getSlideshowEmbed(),
                                readOnly: !0,
                                ref: "embedText",
                                tabIndex: 3,
                                onClick: function() {
                                    n.focusAndSelectText(e.refs.embedText)
                                },
                                onCopy: function(e) {
                                    n.onCopyLink({
                                        linkType: "Slideshow - Embed",
                                        link: e.target.value,
                                        screen: "Gallery"
                                    })
                                }
                            })), a.createElement("span", {
                                className: "sm-text-mini sm-share-panel-copy-instructions"
                            }, n.copyInstructions), this._buildSlideshowOptions()))
                        }
                    }]), b
                }(a.Component),
                b = a.PropTypes;
            h.propTypes = {
                albumResource: b.object.isRequired,
                albumShareUrisResource: b.object.isRequired,
                focusAndSelectText: b.func.isRequired,
                copyInstructions: b.string,
                onCopyLink: b.func
            }, exports.GalleryTab = h
        }(), ! function() {
            var e = SM["import"]("sm-component-button"),
                t = SM["import"]("sm-component-icon"),
                n = SM["import"]("react"),
                a = SM["import"]("sm-analytics"),
                i = SM["import"]("sm-page"),
                s = "menubar=no,toolbar=no,resizable=yes,scrollbars=yes",
                o = "Twitter",
                r = "Facebook",
                l = "Google Plus",
                c = "Email",
                m = function(m) {
                    function u() {
                        return babelHelpers.classCallCheck(this, u), babelHelpers.possibleConstructorReturn(this, (u.__proto__ || Object.getPrototypeOf(u)).apply(this, arguments))
                    }
                    return babelHelpers.inherits(u, m), babelHelpers.createClass(u, [{
                        key: "_getImageWebUri",
                        value: function() {
                            return this.props.albumImageResource.get("WebUri")
                        }
                    }, {
                        key: "_onClickFacebook",
                        value: function() {
                            var e = "https://www.facebook.com/sharer/sharer.php?u=" + this._getImageWebUri();
                            window.open(e, "sharer", s + ",width=626,height=436"), this._logSocialShareAnalytics(r, e)
                        }
                    }, {
                        key: "_onClickTwitter",
                        value: function() {
                            var e = "https://twitter.com/intent/tweet?url=" + this._getImageWebUri();
                            window.open(e, "sharer", s + ",width=626,height=436"), this._logSocialShareAnalytics(o, e)
                        }
                    }, {
                        key: "_onClickGooglePlus",
                        value: function() {
                            var e = "https://plus.google.com/share?url=" + this._getImageWebUri();
                            window.open(e, "sharer", s + ",width=600,height=600"), this._logSocialShareAnalytics(l, e)
                        }
                    }, {
                        key: "_onClickEmail",
                        value: function() {
                            var e = this.props,
                                t = e.albumResource,
                                n = e.albumImageResource,
                                a = "/gallery/share.mg?AlbumKey=" + t.get("AlbumKey") + "&ImageKey=" + n.get("ImageKey");
                            this._logSocialShareAnalytics(c, a).then(function() {
                                document.location.href = a
                            }, function() {
                                document.location.href = a
                            })
                        }
                    }, {
                        key: "_logSocialShareAnalytics",
                        value: function(e, t) {
                            var n = this.props.albumImageResource,
                                s = i.model,
                                o = a.Tracker.createEvent(a.CATEGORY.SHARE_PANEL, "Social Share", {
                                    label: e,
                                    property: t
                                }).addContext(a.CONTEXT.IMAGE, {
                                    image_key: n.get("ImageKey")
                                }).addContext(a.CONTEXT.SCREEN, {
                                    screen_name: "Social"
                                }).addContext(a.CONTEXT.NODE, {
                                    node_type: s.getTypeName(),
                                    node_id: s.get("NodeID")
                                });
                            return o.log()
                        }
                    }, {
                        key: "render",
                        value: function() {
                            var a = this.props.albumImageResource,
                                i = a.get("IsVideo") ? "video" : "photo",
                                s = "Share this " + i + " to a social network";
                            return SM.env.loggedInUser && (s += " or send an email to anyone"), s += ".", n.createElement("div", null, n.createElement("p", {
                                className: "sm-share-panel-content sm-text-mini"
                            }, s), n.createElement("div", {
                                className: "sm-share-panel-buttons"
                            }, n.createElement(e, {
                                "data-service": "facebook",
                                size: "small",
                                skin: "submit",
                                onClick: this._onClickFacebook.bind(this)
                            }, n.createElement(t, {
                                icon: "Facebook",
                                size: "small"
                            })), n.createElement(e, {
                                "data-service": "twitter",
                                size: "small",
                                skin: "submit",
                                onClick: this._onClickTwitter.bind(this)
                            }, n.createElement(t, {
                                icon: "Twitter",
                                size: "small"
                            })), n.createElement(e, {
                                "data-service": "google",
                                size: "small",
                                skin: "submit",
                                onClick: this._onClickGooglePlus.bind(this)
                            }, n.createElement(t, {
                                icon: "GooglePlus",
                                size: "small"
                            })), SM.env.loggedInUser && n.createElement(e, {
                                skin: "submit",
                                size: "small",
                                onClick: this._onClickEmail.bind(this)
                            }, n.createElement(t, {
                                icon: "Mail",
                                size: "small"
                            }))))
                        }
                    }]), u
                }(n.Component),
                u = n.PropTypes;
            m.propTypes = {
                albumResource: u.object.isRequired,
                albumImageResource: u.object.isRequired
            }, exports.SocialButtons = m
        }(), ! function() {
            var e = SM["import"]("react"),
                t = SM["import"]("sm-component-textarea"),
                n = function(n) {
                    function a() {
                        return babelHelpers.classCallCheck(this, a), babelHelpers.possibleConstructorReturn(this, (a.__proto__ || Object.getPrototypeOf(a)).apply(this, arguments))
                    }
                    return babelHelpers.inherits(a, n), babelHelpers.createClass(a, [{
                        key: "render",
                        value: function() {
                            var n = this,
                                a = this.props,
                                i = a.albumImageResource,
                                s = a.albumImageShareUrisResource,
                                o = i.get("IsVideo") ? "video" : "photo";
                            return e.createElement("div", {
                                className: "sm-share-panel-content"
                            }, e.createElement("p", {
                                className: "sm-text-mini"
                            }, "A direct link for visitors to purchase this ", o, "."), e.createElement("div", {
                                className: "sm-share-panel-photo-embed-text"
                            }, e.createElement(t, {
                                value: s.get("BuyUri"),
                                readOnly: !0,
                                ref: "cartText",
                                onClick: function() {
                                    a.focusAndSelectText(n.refs.cartText)
                                },
                                onCopy: function(e) {
                                    a.onCopyLink({
                                        linkType: "Cart",
                                        link: e.target.value,
                                        screen: "Cart"
                                    })
                                }
                            })), e.createElement("span", {
                                className: "sm-text-mini sm-share-panel-copy-instructions"
                            }, a.copyInstructions))
                        }
                    }]), a
                }(e.Component),
                a = e.PropTypes;
            n.propTypes = {
                albumImageResource: a.object.isRequired,
                albumImageShareUrisResource: a.object.isRequired,
                focusAndSelectText: a.func.isRequired,
                copyInstructions: a.string,
                onCopyLink: a.func
            }, exports.CartTab = n
        }()
    }(), SM.currentModule = null
}, "", {
    requires: ["react", "react-dom", "sm", "sm-analytics", "sm-component-busy", "sm-component-button", "sm-component-buttongroup", "sm-component-checkbox", "sm-component-icon", "sm-component-inlinenumber", "sm-component-panel-base", "sm-component-panel-modal", "sm-component-radio", "sm-component-select", "sm-component-tabview", "sm-component-textarea", "sm-component-textbox", "sm-component-underlineformfield", "sm-image-sizes", "sm-page", "sm-ua", "sm-uri", "sm-component-draggable", "sm-dom", "sm-component-pure-render"]
});
YUI.add("sm-uploader-file-reader", function(e) {
    SM.currentModule = "sm-uploader-file-reader";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        "use strict";

        function e(e) {
            for (var r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}, o = [], t = [], n = function(n, l) {
                    var a = e[n],
                        s = new FileReader;
                    t.push(new Promise(function(e, t) {
                        s.onprogress = function(n) {
                            n.target.abort(), r.allowFolders ? t(d.error(m, E.FILES_NOT_ALLOWED)) : (o.push(new u(a)), e())
                        }, s.onerror = function(e) {
                            var r = e.target.error;
                            d.add(m, {
                                error: r.type || r.code,
                                message: "Treating file read error as unsupported folder",
                                url: document.URL
                            }, d.LEVEL_NOTICE), t(d.error(m, E.FOLDER_NOT_SUPPORTED))
                        }, s.readAsArrayBuffer(a)
                    }))
                }, l = 0, a = e.length; a > l; l++) n(l, a);
            return Promise.all(t).then(function() {
                return o
            })
        }

        function r(e) {
            var r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
            r = Object.assign({}, {
                allowFiles: !0,
                allowFolders: !1,
                allowMixedFilesAndFolders: !1,
                ignoreHiddenFiles: !0
            }, r);
            for (var o = [], t = [], n = 0, a = 0, u = function(i, u) {
                    var f = e[i],
                        p = void 0;
                    if (f.getAsEntry ? p = f.getAsEntry() : f.webkitGetAsEntry ? p = f.webkitGetAsEntry() : "function" == typeof f.getAsFile && (d.add(m, {
                            message: "Older MS Edge drag/drop upload",
                            ua: navigator.userAgent,
                            url: document.URL
                        }, d.LEVEL_NOTICE), o.push(f.getAsFile())), p) {
                        p.isFile ? n++ : a++;
                        var g = void 0;
                        g = !r.allowFiles && n > 0 ? Promise.reject(d.error(m, E.FILES_NOT_ALLOWED)) : !r.allowFolders && a > 0 ? Promise.reject(d.error(m, E.FOLDER_NOT_ALLOWED)) : l(p, r).then(function(e) {
                            return Array.isArray(e) ? r.allowFolders ? s.flattenDeep(e) : (d.add(m, {
                                details: p,
                                message: "readEntry returned array while allowFolders is false",
                                url: document.URL
                            }, d.LEVEL_NOTICE), []) : e
                        }), t.push(g)
                    }
                }, f = 0, p = e.length; p > f; f++) u(f, p);
            return i.allSettled(t).then(function(e) {
                if (!r.allowMixedFilesAndFolders && n > 0 && a > 0) throw d.error(m, E.MIXED_TYPES_NOT_ALLOWED);
                var t = [];
                if (e.forEach(function(e) {
                        if ("rejected" === e.state) throw d.error(m, e.reason);
                        t = t.concat(e.value)
                    }), a > 0 && !o.length && !t.length) throw d.error(m, E.EMPTY_FOLDER);
                return [].concat(o, babelHelpers.toConsumableArray(t))
            })
        }

        function o(e) {
            return e.name.startsWith(".")
        }

        function t(e) {
            var r = [];
            return new Promise(function(o, t) {
                var n = function l() {
                    e.readEntries(function(e) {
                        e.length ? (r = r.concat(e), l()) : o(r.sort())
                    }, function(e) {
                        d.add(m, {
                            details: e,
                            method: "FileSystemDirectoryReader#readEntries()",
                            url: document.URL
                        }, d.LEVEL_ERROR), e.type = E.DIRECTORY_READER_ERROR.type, e.label = E.DIRECTORY_READER_ERROR.label, t(e)
                    })
                };
                n()
            })
        }

        function n(e, r) {
            var n = e.fullPath,
                a = e.name;
            if (r.ignoreHiddenFiles && o(e) && n !== "/" + a) return Promise.resolve([]);
            var s = e.createReader();
            return t(s).then(function(e) {
                var o = e.map(function(e) {
                    return l(e, r)
                });
                return Promise.all(o)
            })
        }

        function l(e, r) {
            var o = e.isDirectory;
            return o && !r.allowFolders ? Promise.reject(d.error(m, E.FOLDER_NOT_ALLOWED)) : o ? n(e, r) : a(e, r)
        }

        function a(e, r) {
            return r.ignoreHiddenFiles && o(e) ? Promise.resolve([]) : new Promise(function(r, o) {
                e.file(function(o) {
                    var t = new u(o);
                    t.path = e.fullPath, r(t)
                }, function(e) {
                    d.add(m, {
                        details: e,
                        method: "FileSystemFileEntry#file()",
                        url: document.URL
                    }, d.LEVEL_ERROR), e.type = E.FILE_ENTRY_ERROR.type, o(e)
                })
            })
        }
        Object.defineProperty(exports, "__esModule", {
            value: !0
        });
        var s = SM["import"]("lodash"),
            i = SM["import"]("rsvp"),
            d = SM["import"]("sm-smuglog"),
            u = SM["import"]("sm-uploader-file"),
            E = exports.ERROR_TYPES = {
                DIRECTORY_READER_ERROR: {
                    label: "Folder Upload Error",
                    type: "Directory Reader Error"
                },
                EMPTY_FOLDER: {
                    label: "Folder Upload Error",
                    message: "Oops! Looks like there aren't any photos in this folder.",
                    type: "Empty Folder"
                },
                FILE_ENTRY_ERROR: {
                    type: "File Entry Error"
                },
                FILES_NOT_ALLOWED: {
                    label: "Folder Upload Error",
                    message: "Oops! Only folders from your computer can be uploaded to a SmugMug folder.",
                    type: "Files Not Allowed"
                },
                FOLDER_NOT_ALLOWED: {
                    label: "Folder Upload Error",
                    message: "Oops! Only individual photos can be uploaded to a SmugMug gallery.",
                    type: "Folders Not Allowed"
                },
                FOLDER_NOT_SUPPORTED: {
                    label: "Folder Upload Error",
                    message: "Looks like your browser doesnt support uploading folders.",
                    type: "Folders Not Supported"
                },
                MIXED_TYPES_NOT_ALLOWED: {
                    label: "Folder Upload Error",
                    message: "Oops! Only folders from your computer can be uploaded to a SmugMug folder.",
                    type: "Mixed Types Not Allowed"
                },
                NO_FILES_DROPPED: {
                    message: "No files dropped.",
                    type: "No Files Dropped"
                }
            },
            m = "sm-uploader-file-reader";
        exports.getDroppedFiles = function(o) {
            var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {},
                n = o.dataTransfer,
                l = n.types,
                a = l.indexOf ? -1 !== l.indexOf("Files") : l.contains("Files");
            return n && a ? n.files && !n.files.length ? Promise.reject(d.error(m, E.FOLDER_NOT_SUPPORTED)) : n.items && n.items.length ? r(n.items, t) : e(n.files, t) : Promise.reject(d.error(m, E.NO_FILES_DROPPED))
        }, exports.getErrorMessage = function(e) {
            var r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
            return e.type === E.MIXED_TYPES_NOT_ALLOWED.type && r.isAlbumNode ? E.FOLDER_NOT_ALLOWED.message : e.message
        }, exports.getInputFiles = function(e) {
            var r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
            return r = Object.assign({}, {
                allowFolders: !1,
                ignoreHiddenFiles: !0
            }, r), new Promise(function(t, n) {
                var l = Array.from(e).filter(function(e) {
                        var t = o(e);
                        return !t || t && !r.ignoreHiddenFiles
                    }),
                    a = l.map(function(e) {
                        var o = new u(e);
                        return e.webkitRelativePath ? o.path = e.webkitRelativePath : !e.webkitRelativePath && r.allowFolders && n(d.error(m, E.FILES_NOT_ALLOWED)), o
                    });
                t(a)
            })
        }
    }(), SM.currentModule = null
}, "", {
    requires: ["lodash", "rsvp", "sm-smuglog", "sm-uploader-file"]
});
YUI.add("sm-uploader-file", function(e) {
    SM.currentModule = "sm-uploader-file";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";

        function e() {
            return "sm-uploader-file-" + ++a
        }
        Object.defineProperty(exports, "__esModule", {
            value: !0
        });
        var t = SM["import"]("sm-dom"),
            i = SM["import"]("sm-pretty-size"),
            s = SM["import"]("sm-smuglog"),
            r = function() {
                function r(i) {
                    babelHelpers.classCallCheck(this, r);
                    var a = i instanceof t.win.Blob,
                        n = i.isSmugMugResource && "ExternalResource" === i.resourceType;
                    if (!a && !n) throw s.error("sm-uploader-file-reader", {
                        details: i,
                        message: "Expected native DOM object or third party resource"
                    });
                    if (a) this.name = i.name, this.size = i.size, this.type = i.type, this.nativeObject = i;
                    else {
                        var o = i.get();
                        this.external = !0, this.name = o.Name, this.size = o.ResourceDetails.OriginalSize, this.type = o.FileType.toLowerCase(), this.uri = o.Uri
                    }
                    i.fullPath && (this.path = i.fullPath), this.id = e()
                }
                return babelHelpers.createClass(r, [{
                    key: "hasRelativePath",
                    value: function() {
                        var e = this.path;
                        return !(!e || e === this.name)
                    }
                }, {
                    key: "augmentedPath",
                    get: function() {
                        var e = this._pathInfo;
                        if (e) return e.augmented || e.original
                    },
                    set: function(e) {
                        this._pathInfo = Object.assign({}, this._pathInfo, {
                            augmented: e
                        })
                    }
                }, {
                    key: "displayName",
                    get: function() {
                        var e = this._pathInfo;
                        return e ? e.original : this.name
                    }
                }, {
                    key: "formattedSize",
                    get: function() {
                        return this.size && i(this.size) || ""
                    }
                }, {
                    key: "path",
                    get: function() {
                        return this._pathInfo && this._pathInfo.original
                    },
                    set: function(e) {
                        this._pathInfo = Object.assign({}, this._pathInfo, {
                            original: e.replace(/^\//, "")
                        })
                    }
                }]), r
            }();
        exports["default"] = r;
        var a = 0;
        module.exports = exports["default"]
    }(), SM.currentModule = null
}, "", {
    requires: ["sm-dom", "sm-pretty-size", "sm-smuglog"]
});
YUI.add("sm-uploader-queue", function(e) {
    SM.currentModule = "sm-uploader-queue";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: !0
        });
        var e, t = SM["import"]("sm-dom"),
            a = SM["import"]("sm-page"),
            r = SM["import"]("sm-resource-core"),
            i = SM["import"]("sm-smuglog"),
            s = SM["import"]("sm-uploader-file"),
            o = SM["import"]("sm-uploader-tracking"),
            l = SM["import"]("sm-io-core"),
            n = SM["import"]("sm-dom"),
            u = n.win;
        SM["import"]("sm-uploader-transaction");
        var d = 2,
            c = 2,
            p = 1048576,
            h = 1024 * p,
            m = "sm-uploader-queue",
            _ = SM.env.limits,
            f = _.archiveBytes,
            v = _.nodeMaxChildren,
            g = _.photoBytes,
            y = _.videoBytes,
            U = g / p + " MB",
            E = f / h + " GB",
            k = y / h + " GB",
            b = /^(gif|jpe?g|png)$/,
            I = /^(3g2|3gpp?|avi|m2ts|m4v|mkv|move?|mp4|mpe?g|mts|raf|webm|wmv)$/,
            P = 1,
            O = 5,
            T = 16,
            R = 60,
            C = 61,
            M = 62,
            S = 63,
            L = 64,
            N = 65,
            V = 66,
            A = 67,
            D = 68,
            w = 70,
            F = 71,
            x = 72,
            B = 99,
            j = 10,
            Q = 20,
            H = 40,
            q = (e = {}, babelHelpers.defineProperty(e, j, {
                full: "Oops! You already have a %type% named %name% here.",
                type: "Node Name Conflict"
            }), babelHelpers.defineProperty(e, H, {
                full: "Oops! We only support " + v + " folders or galleries in a single folder.",
                type: "Node Children Count Conflict"
            }), babelHelpers.defineProperty(e, Q, {
                full: "Oops! Your folders are nested too deeply for us to upload here.",
                type: "Node Depth Conflict"
            }), e),
            G = {
                Album: "gallery",
                Folder: "folder",
                Page: "page"
            },
            K = 400,
            Y = 404,
            z = function(e) {
                function n() {
                    var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
                    babelHelpers.classCallCheck(this, n);
                    var t = babelHelpers.possibleConstructorReturn(this, (n.__proto__ || Object.getPrototypeOf(n)).call(this));
                    return t.config = Object.assign({}, {
                        checkDuplicates: !0,
                        duplicateAction: "skip"
                    }, e), t._initProperties(), t._loadSmugVaultStatus(), t
                }
                return babelHelpers.inherits(n, e), babelHelpers.createClass(n, [{
                    key: "add",
                    value: function(e) {
                        var t = this;
                        if (!e) return Promise.reject(i.error(m, "No files passed to Uploader queue"));
                        Array.isArray(e) || (e = [e]);
                        var a = e.map(function(e) {
                            var a = e instanceof s ? e : new s(e),
                                r = t._createUploadData(e.id, a);
                            return r.valid && (t._uploadsQueue.push(r), t._uploadsMap[e.id] = r), r
                        });
                        return this._batchTotal += a.length, a
                    }
                }, {
                    key: "clearAll",
                    value: function() {
                        for (var e = this._uploadsQueue, t = 0, a = e.length; a > t; t++) {
                            var r = e[t];
                            this._releaseUploadIO(r), this._releaseFile(r)
                        }
                        return this._initProperties(), this
                    }
                }, {
                    key: "destroy",
                    value: function() {
                        this.clearAll(), this._detachBeforeUnload()
                    }
                }, {
                    key: "pause",
                    value: function() {
                        return this._stopped = !0, this
                    }
                }, {
                    key: "precheckFiles",
                    value: function(e) {
                        var t = this;
                        Array.isArray(e) || (e = [e]);
                        var a = {},
                            s = {};
                        return e.forEach(function(e, t) {
                            e.hasRelativePath() && (a[e.id] = e.path, s[e.id] = t)
                        }), Object.keys(a).length ? new Promise(function(o, l) {
                            r.postUri("/api/v2/node/" + encodeURIComponent(t.config.nodeId) + "!uploadconflicts", {
                                data: {
                                    RelativePaths: a
                                },
                                io: {
                                    apiRoot: "https://" + SM.env.host.upload
                                }
                            }).then(function(t) {
                                var a = t.get("FolderUploadPathAugmentations");
                                Object.keys(a).forEach(function(t) {
                                    e[s[t]].augmentedPath = a[t]
                                }), o(e)
                            }, function(e) {
                                var t = e.error.response,
                                    a = t && t.Code;
                                409 !== a && l();
                                var s = r._makeResources(t),
                                    o = s.get("PathsConflictsDetails"),
                                    u = void 0,
                                    d = void 0,
                                    c = void 0;
                                for (var p in o) {
                                    var h = o[p][0];
                                    u = h.Code, d = h.Uri, c = n.getConflictMessage(h.Code);
                                    break
                                }
                                u === j ? r.loadUri(d).then(function(e) {
                                    c = c.replace("%name%", e.get("Name"));
                                    var t = G[e.get("Type")] || "folder";
                                    c = c.replace("%type%", t), l(i.error(m, {
                                        message: c,
                                        type: q[u].type
                                    }))
                                }, l) : l(i.error(m, {
                                    message: c,
                                    type: q[u].type
                                }))
                            })
                        }) : Promise.resolve(e)
                    }
                }, {
                    key: "removeById",
                    value: function(e) {
                        var t = this._getUploadById(e) || null;
                        if (t) {
                            switch (t = this._releaseUploadIO(t), this._removed++, t.status) {
                                case "processing":
                                    this._active--, t.file && delete this._fileNames[t.file.name], delete this._activeProgress[e];
                                    break;
                                case "complete":
                                    this._completed--;
                                    break;
                                case "error":
                                    this._failed--, t.file && delete this._fileNames[t.file.name];
                                    break;
                                case "verifying":
                                    this._inVerification--
                            }
                            t = this._releaseFile(t)
                        }
                        return delete this._uploadsMap[e], t
                    }
                }, {
                    key: "restart",
                    value: function() {
                        return this._currentIndex = 0, this.run()
                    }
                }, {
                    key: "run",
                    value: function() {
                        var e = this._uploadsQueue,
                            t = e.length;
                        for (this._stopped = !1, this._currentIndex; this._currentIndex < t && this.activeUploads !== d; this._currentIndex++) this._processUpload(e[this._currentIndex]);
                        return this._checkCompleted(), this._active > 0
                    }
                }, {
                    key: "_attachBeforeUnload",
                    value: function() {
                        this._detachBeforeUnload(), this._beforeUnload = t.addEventListener(u, "beforeunload", function(e) {
                            var t = "Navigating away from this page will cancel uploads currently in progress.";
                            return o.trackScreenView("Browser Confirm Navigation"), e.returnValue = t, t
                        })
                    }
                }, {
                    key: "_checkCompleted",
                    value: function() {
                        var e = this._uploadsQueue.length;
                        this._currentIndex === e && 0 === this.activeUploads && 0 === this._inVerification && (this.emit(n.EVENT_QUEUE_COMPLETE, {
                            completed: this.completedUploads,
                            failed: this._batchFailed,
                            total: this._batchTotal
                        }), this._batchFailed = 0, this._batchTotal = 0, this._detachBeforeUnload())
                    }
                }, {
                    key: "_createUploadData",
                    value: function(e, t) {
                        var a = t.name,
                            r = void 0,
                            i = void 0,
                            s = this._getReplaceImageData(a),
                            o = void 0,
                            l = this._validateFile(t);
                        return l.valid ? s === !1 && (o = "Photo to replace not found") : o = l.message, s && (r = s.ImageID, i = s.AlbumID), {
                            attempts: 0,
                            duplicateAlbumId: i || null,
                            duplicateImageId: r || null,
                            file: t,
                            io: null,
                            message: o || "",
                            status: "",
                            type: l.type,
                            uploadId: e,
                            valid: l.valid
                        }
                    }
                }, {
                    key: "_detachBeforeUnload",
                    value: function() {
                        this._beforeUnload && (t.removeEventListener(this._beforeUnload), this._beforeUnload = null)
                    }
                }, {
                    key: "_getDuplicate",
                    value: function(e) {
                        var t = this,
                            i = this.config.albumKey,
                            s = a.owner && a.isOwnerOrAdmin() ? a.owner.nickName : "";
                        if (!this.config.checkDuplicates || !i || !s) return Promise.resolve(!1);
                        var o = "/api/v2/user/" + encodeURIComponent(s) + "!duplicateimagesearch";
                        return r.loadUri(o, {
                            data: {
                                AlbumUri: "/api/v2/album/" + i,
                                FileName: e
                            }
                        }).then(function(a) {
                            return a.length ? a[0] : t._getLocalDuplicate(e)
                        })["catch"](function() {
                            return !1
                        })
                    }
                }, {
                    key: "_getLocalDuplicate",
                    value: function(e) {
                        return !!this._fileNames[e]
                    }
                }, {
                    key: "_getReplaceImageData",
                    value: function(e) {
                        var t = this.config.replaceImagesData;
                        if (t && e) {
                            for (var a = void 0, r = 0, i = t.length; i > r; r++)
                                if (a = t[r], e.toLowerCase() === a.FileName.toLowerCase()) return a;
                            return !1
                        }
                        return null
                    }
                }, {
                    key: "_getUploadById",
                    value: function(e) {
                        return this._uploadsMap[e] || null
                    }
                }, {
                    key: "_initProperties",
                    value: function() {
                        this._active = 0, this._activeProgress = {}, this._completed = 0, this._currentIndex = 0, this._failed = 0, this._fileNames = {}, this._inVerification = 0, this._removed = 0, this._stopped = !0, this._uploadsMap = {}, this._uploadsQueue = [], this._batchFailed = 0, this._batchTotal = 0
                    }
                }, {
                    key: "_isExternalVideo",
                    value: function(e) {
                        return e.external && "video" === e.type
                    }
                }, {
                    key: "_loadSmugVaultStatus",
                    value: function() {
                        var e = this,
                            t = a.owner;
                        if (t) {
                            var i = "/api/v2/smugvault/" + encodeURIComponent(t.nickName);
                            return r.loadUri(i).then(function(t) {
                                e._hasSmugVault = "Open" === t.get("Status")
                            })["catch"](function() {
                                e._hasSmugVault = !1
                            })
                        }
                    }
                }, {
                    key: "_processUpload",
                    value: function(e) {
                        var t = this,
                            a = this.config.duplicateAction;
                        if (this._stopped || !e.file || e.status) return e;
                        if (null !== e.duplicateImageId && "skip" === a) return e;
                        var r = e.file.name;
                        return this._active++, this._getDuplicate(r).then(function(i) {
                            return "allow" !== a && (i === !0 || i.isSmugMugResource && "skip" === a) ? (e.errorLabel = e.message = "Duplicate File", t.emit(n.EVENT_UPLOAD_ERROR, {
                                type: "warning",
                                upload: e
                            }), t._active--, void(!t._stopped && t.run())) : (i && "replace" === a ? (e.duplicateImageId = i.get("UploadKey"), e.duplicateImageUri = i.get("Uri")) : t._fileNames[r] = !0, void t._sendFile(e))
                        }), e
                    }
                }, {
                    key: "_releaseFile",
                    value: function(e) {
                        return e.file = null, e
                    }
                }, {
                    key: "_releaseUploadIO",
                    value: function(e) {
                        return e.io && e.io.abort(), e.io = null, e
                    }
                }, {
                    key: "_sendFile",
                    value: function(e) {
                        var t = this;
                        e.attempts++, e.status = "processing", this._attachBeforeUnload(), this.emit(n.EVENT_UPLOAD_START, {
                            upload: e
                        });
                        var a = e.file.external,
                            r = void 0;
                        r = a ? this._sendThirdPartyFile(e) : this._sendLocalFile(e), r.then(function(r) {
                            a && e.duplicateImageUri ? t._onThirdPartyReplaceComplete(r, e.uploadId) : t._onUploadComplete(r, e.uploadId)
                        })["catch"](function(a) {
                            t._onSendError(e, a)
                        })
                    }
                }, {
                    key: "_sendLocalFile",
                    value: function(e) {
                        var t = this,
                            a = e.io = l({
                                type: "uploader",
                                uploadData: e,
                                requestData: this.config
                            });
                        return a.on("load", function(a) {
                            t._onUploadProgress(a, e.uploadId)
                        }), a.on("progress", function(a) {
                            t._onUploadProgress(a, e.uploadId)
                        }), a
                    }
                }, {
                    key: "_sendThirdPartyFile",
                    value: function(e) {
                        var t = {
                                data: {
                                    Uri: e.file.uri
                                },
                                io: {
                                    apiRoot: "https://" + SM.env.host.upload
                                }
                            },
                            a = "/api/v2/album/" + encodeURIComponent(this.config.albumKey) + "!uploadfromexternalresource";
                        return "replace" === this.config.duplicateAction && e.duplicateImageUri && (a = e.duplicateImageUri + "!replacefromexternalresource", t.returnRawResponse = !0), r.postUri(a, t)["catch"](function(t) {
                            var a = r.getProblems(t),
                                s = Object.keys(a);
                            if (0 === s.length) return t.error && t.error.message || (i.add(m, {
                                details: t,
                                file: e.file,
                                message: "Error, but not field or standard error",
                                url: document.URL
                            }, i.LEVEL_NOTICE), t.error.message = "Unknown error"), t;
                            var o = s[0],
                                l = a[o][0];
                            throw "Uri" !== o && i.add(m, {
                                details: a,
                                field: o,
                                file: e.file,
                                message: "Problem field not Uri",
                                url: document.URL
                            }, i.LEVEL_NOTICE), t.error.message = l, t
                        })
                    }
                }, {
                    key: "_validateFile",
                    value: function(e) {
                        var t = e.name,
                            r = e.size,
                            i = t.lastIndexOf("."),
                            s = i > 0 ? t.substr(i + 1).toLowerCase() : "",
                            o = {
                                message: "",
                                type: "",
                                valid: !1
                            },
                            l = void 0,
                            n = void 0;
                        return s && this._hasSmugVault ? (o.type = "Vault", o.valid = !0, s.match(b) ? o.type = "Image" : (s.match(I) || this._isExternalVideo(e)) && (o.type = "Video"), l = f, n = E) : s && s.match(b) ? (o.type = "Image", o.valid = !0, l = g, n = U) : s && s.match(I) || this._isExternalVideo(e) ? a.ownerHasFeature(a.FEATURES.VIDEO) ? (o.type = "Video", o.valid = !0, l = y, n = k) : o.message = "We are sorry, but your plan level does not support video." : o.message = "Unknown file type", o.valid && r > l && (o.message = "Exceeds maximum size of " + n, o.valid = !1), o
                    }
                }, {
                    key: "_onSendError",
                    value: function(e) {
                        var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {},
                            a = t.error;
                        e.file && e.file.external && i.add(m, {
                            response: t,
                            file: e.file,
                            message: "Error uploading from third party",
                            url: document.URL
                        }, i.LEVEL_ERROR), a && a.message ? e.message = a.message : e.message = "Connection error", e.status = "error", a && a.response && (e.errorLabel = n.getErrorType(a.response.Code)), this._active--, this._failed++, this._batchFailed++, this._checkCompleted(), !this._stopped && this.run(), this.emit(n.EVENT_UPLOAD_ERROR, {
                            upload: e
                        })
                    }
                }, {
                    key: "_onThirdPartyReplaceComplete",
                    value: function(e, t) {
                        var a = this._getUploadById(t);
                        delete this._activeProgress[t], this._active--, a = this._releaseUploadIO(a), a = this._releaseFile(a), a.status = "complete", this._completed++, this.emit(n.EVENT_UPLOAD_COMPLETE, {
                            upload: a
                        }), this._stopped || this.run()
                    }
                }, {
                    key: "_onUploadComplete",
                    value: function(e, t) {
                        var a = this._getUploadById(t),
                            r = !1,
                            i = !1,
                            s = "verifying" === a.status,
                            o = {
                                upload: a
                            };
                        "ok" === e.stat || e.isSmugMugResource && "Image" === e.resourceType ? r = !0 : (i = !0, a.errorLabel = n.getErrorType(e.code), a.message = e.message || "Unknown error"), delete this._activeProgress[t], s ? this._inVerification-- : this._active--, a = this._releaseUploadIO(a), r ? (a = this._releaseFile(a), a.status = "complete", a.imageData = e.Image || e.get(), this._completed++, this.emit(n.EVENT_UPLOAD_COMPLETE, o), this._stopped || (s ? this._checkCompleted() : this.run())) : !i && a.attempts < c ? this._stopped || (delete a.status, delete this._fileNames[a.file.name], this._processUpload(a)) : (a.status = "error", this._failed++, this._batchFailed++, this.emit(n.EVENT_UPLOAD_ERROR, o), !this._stopped && this.run()), this._stopped && 0 === this.activeUploads && this._detachBeforeUnload()
                    }
                }, {
                    key: "_onUploadProgress",
                    value: function(e, t) {
                        var a = this,
                            r = e.loaded || 0,
                            i = e.total || 0;
                        this._progressTimers || (this._progressTimers = {}), clearTimeout(this._progressTimers[t]);
                        var s = this._getUploadById(t);
                        r && i && r === i && "verifying" !== s.status && (s.status = "verifying", this._active--, this._inVerification++, !this._stopped && this.run()), this._progressTimers[t] = setTimeout(function() {
                            var e = 0;
                            s && "complete" !== s.status && (r && i && (e = a._activeProgress[t] = r / i), a.emit(n.EVENT_UPLOAD_PROGRESS, {
                                percentComplete: e,
                                uploadId: t
                            }))
                        }, 17)
                    }
                }, {
                    key: "activeUploads",
                    get: function() {
                        return this._active
                    }
                }, {
                    key: "completedUploads",
                    get: function() {
                        return this._completed
                    }
                }, {
                    key: "failedUploads",
                    get: function() {
                        return this._failed
                    }
                }, {
                    key: "percentComplete",
                    get: function() {
                        var e = this.completedUploads + this.failedUploads,
                            t = this._uploadsQueue.length - this.removedUploads;
                        return Object.values(this._activeProgress).forEach(function(t) {
                            e += t
                        }), Math.min(e, t) / t
                    }
                }, {
                    key: "removedUploads",
                    get: function() {
                        return this._removed
                    }
                }, {
                    key: "totalUploads",
                    get: function() {
                        return this._uploadsQueue.length - this.removedUploads
                    }
                }], [{
                    key: "getErrorType",
                    value: function(e) {
                        var t = void 0;
                        switch (e) {
                            case R:
                            case C:
                            case T:
                            case M:
                            case Y:
                                t = "Network Error";
                                break;
                            case D:
                            case K:
                            case P:
                            case S:
                            case B:
                            case O:
                            case V:
                            case A:
                            case L:
                            case w:
                            case N:
                            case F:
                            case x:
                                t = "SmugMug Error";
                                break;
                            default:
                                t = "Unknown Error"
                        }
                        return t
                    }
                }, {
                    key: "getConflictMessage",
                    value: function(e) {
                        var t = q[e];
                        return t && t.full || "Unknown conflict."
                    }
                }]), n
            }(SM["import"]("sm-event-emitter"));
        exports["default"] = z, z.EVENT_QUEUE_COMPLETE = "queuecomplete", z.EVENT_UPLOAD_COMPLETE = "uploadcomplete", z.EVENT_UPLOAD_ERROR = "uploaderror", z.EVENT_UPLOAD_PROGRESS = "uploadprogress", z.EVENT_UPLOAD_START = "uploadstart", z.IMAGE_SIZE = g, z.IMAGE_SIZE_STRING = U, module.exports = exports["default"]
    }(), SM.currentModule = null
}, "", {
    requires: ["sm-dom", "sm-event-emitter", "sm-io-core", "sm-page", "sm-resource-core", "sm-smuglog", "sm-uploader-file", "sm-uploader-tracking", "sm-uploader-transaction"]
});
YUI.add("sm-uploader-tracking", function(e) {
    SM.currentModule = "sm-uploader-tracking";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        var e = SM["import"]("lodash"),
            r = SM["import"]("sm-analytics"),
            a = {
                addNumber: "Add Mobile Number",
                addNumberError: "Add Mobile Number Error",
                buttonClick: "Button Click",
                changeDuplicate: "Change Duplicate Setting",
                close: "Close",
                complete: "Upload Complete",
                createGallery: "Create New Gallery",
                createGalleryError: "Create New Gallery Error",
                error: "Upload Error",
                failures: "Upload Failures",
                paused: "Uploads Paused",
                queue: "Queue Upload",
                remove: "Remove Upload",
                screen: "Screen View",
                selectAll: "Select All",
                selectGallery: "Select Gallery",
                sendLink: "Send Upload Link",
                sendLinkAgain: "Send Upload Link Again",
                sendLinkError: "Send Upload Link Error",
                verifyNumber: "Verify Mobile Number",
                verifyNumberError: "Verify Mobile Number Error"
            },
            l = {
                COLLECTION: r.CONTEXT.COLLECTION,
                IMAGE: r.CONTEXT.IMAGE,
                NODE: r.CONTEXT.NODE,
                SCREEN: r.CONTEXT.SCREEN
            },
            n = module.exports = {
                ACTIONS: a,
                CONTEXTS: l,
                trackEvent: function(n) {
                    var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
                    if (!n || -1 === e.values(a).indexOf(n)) return Promise.reject("Invalid Upload action.");
                    var o = t.contexts,
                        u = t.params,
                        d = t.screenName,
                        i = r.Tracker.createEvent(r.CATEGORY.UPLOAD, n, u);
                    d || (d = "Uploader"), i.addContext(l.SCREEN, babelHelpers.defineProperty({}, r.CONTEXT_PARAM[l.SCREEN].SCREEN_NAME, d));
                    for (var s in o) i.addContext(s, o[s]);
                    return i.log()
                },
                trackScreenView: function() {
                    var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "Uploader",
                        r = arguments[1];
                    return n.trackEvent(a.screen, {
                        params: {
                            label: e
                        },
                        screenName: r || e
                    })
                }
            }
    }(), SM.currentModule = null
}, "", {
    requires: ["lodash", "sm-analytics"]
});
YUI.add("sm-uploader-transaction", function(e) {
    SM.currentModule = "sm-uploader-transaction";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: !0
        });
        var t = "https://" + SM.env.host.upload,
            a = function(e) {
                function a() {
                    var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
                    return babelHelpers.classCallCheck(this, a), babelHelpers.possibleConstructorReturn(this, (a.__proto__ || Object.getPrototypeOf(a)).call(this, Object.assign({}, e, {
                        lazy: !0
                    })))
                }
                return babelHelpers.inherits(a, e), babelHelpers.createClass(a, [{
                    key: "_getHeaders",
                    value: function() {
                        var e = this.request,
                            t = e.requestData,
                            a = e.uploadData,
                            r = a.file,
                            n = {
                                "Content-Type": "",
                                "X-Smug-ResponseType": "JSON",
                                "X-Smug-Uploader": "HTML5",
                                "X-Smug-FileName": encodeURIComponent(r.name)
                            };
                        t.nodeId ? n["X-Smug-NodeUri"] = "/api/v2/node/" + t.nodeId : n["X-Smug-AlbumID"] = a.duplicateAlbumId || t.albumId, r.hasRelativePath() && (n["X-Smug-RelativePath"] = encodeURIComponent(r.augmentedPath)), "replace" === t.duplicateAction && a.duplicateImageId && (n["X-Smug-ImageID"] = a.duplicateImageId);
                        var o = r.name.match(/^smuploadfail_(\d{1,3})/);
                        return o && (n["X-Smug-ErrorCode"] = o[1]), a.attempts && a.attempts > 1 && (n["X-Smug-RetryCount"] = a.attempts - 1), n
                    }
                }, {
                    key: "_init",
                    value: function() {
                        var e = this;
                        this.request = {
                            data: this.request.uploadData.file.nativeObject,
                            headers: this._getHeaders(),
                            method: "PUT",
                            url: t,
                            withCredentials: !0,
                            on: {
                                upload: {
                                    load: function() {
                                        for (var t = arguments.length, a = Array(t), r = 0; t > r; r++) a[r] = arguments[r];
                                        if (e._notifier) {
                                            var n;
                                            (n = e._notifier).fire.apply(n, ["load"].concat(a))
                                        }
                                    },
                                    progress: function() {
                                        for (var t = arguments.length, a = Array(t), r = 0; t > r; r++) a[r] = arguments[r];
                                        if (e._notifier) {
                                            var n;
                                            (n = e._notifier).fire.apply(n, ["progress"].concat(a))
                                        }
                                    }
                                }
                            }
                        }
                    }
                }]), a
            }(SM["import"]("sm-io-xhr-transaction"));
        exports["default"] = a, e.SM.io.Transaction.uploader = a, module.exports = exports["default"]
    }(), SM.currentModule = null
}, "", {
    requires: ["sm-io-xhr-transaction"]
});
YUI.add("sm-w9-action-types", function(E) {
    SM.currentModule = "sm-w9-action-types";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: !0
        });
        exports.LOAD_W9_DATA = "LOAD_W9_DATA", exports.LOAD_SAVED_STATE = "LOAD_SAVED_STATE", exports.LOAD_LOCALE_OPTIONS = "LOAD_LOCALE_OPTIONS", exports.SET_SIMPLE_FIELD = "SET_SIMPLE_FIELD", exports.SET_FORM_STEP = "SET_FORM_STEP", exports.SELECT_US = "SELECT_US", exports.SELECT_INTERNATIONAL = "SELECT_INTERNATIONAL", exports.SELECT_W9_TYPE = "SELECT_W9_TYPE", exports.SELECT_TIN_TYPE = "SELECT_TIN_TYPE", exports.CHANGE_TIN_FIELD = "CHANGE_TIN_FIELD", exports.CHANGE_LEGAL_NAME = "CHANGE_LEGAL_NAME", exports.SET_ROUTING_VALIDITY = "SET_ROUTING_VALIDITY", exports.VALIDATE_ACH_MATCH = "VALIDATE_ACH_MATCH", exports.CHANGE_ACH_FIELD = "CHANGE_ACH_FIELD", exports.CHANGE_PAYPAL_FIELD = "CHANGE_PAYPAL_FIELD", exports.CHANGE_CHECK_FIELD = "CHANGE_CHECK_FIELD", exports.SET_FORM_RESPONSE_SUCCESS = "SET_FORM_RESPONSE_SUCCESS"
    }(), SM.currentModule = null
}, "", {});
YUI.add("sm-w9-constants", function(e) {
    SM.currentModule = "sm-w9-constants";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: !0
        });
        var e = SM["import"]("immutable"),
            A = e.List,
            T = e.Map,
            a = e.OrderedMap,
            l = (exports.VQ = 3, exports.ACH_NAME_ON_ACCOUNT_LIMIT = 22, "Type"),
            _ = "PaymentType",
            E = "Name",
            n = "AdditionalName",
            C = (exports.W9_FIELDS = a({
                TYPE: l,
                PAYMENT_TYPE: _,
                NAME: E,
                ADDITIONAL_NAME: n
            }), "ACHType"),
            S = "ACHType2",
            t = "ACHNameOnAccount",
            i = "ACHRouting",
            N = "ACHRouting2",
            P = "ACHAccount",
            I = "ACHAccount2",
            L = "_achRoutingValid",
            o = "_achRoutingMatch",
            r = "_achAccountMatch",
            s = (exports.ACH_FIELDS = a({
                ACH_TYPE: C,
                ACH_TYPE2: S,
                ACH_NAME_ON_ACCOUNT: t,
                ACH_ROUTING: i,
                ACH_ROUTING2: N,
                ACH_ACCOUNT: P,
                ACH_ACCOUNT2: I,
                ACH_ROUTING_VALID: L,
                ACH_ROUTING_MATCH: o,
                ACH_ACCOUNT_MATCH: r
            }), "Country"),
            U = "ChecksMailableTo",
            D = "Street1",
            H = "Street2",
            R = "City",
            u = "State",
            d = "Zip",
            Y = "ChecksPayableTo",
            O = (exports.CHECK_FIELDS = a({
                COUNTRY: s,
                CHECKS_MAILABLE_TO: U,
                STREET_1: D,
                STREET_2: H,
                CITY: R,
                STATE: u,
                ZIP: d,
                CHECKS_PAYABLE_TO: Y
            }), "PayPalAddress"),
            M = "PayPalAddress2",
            c = "PayPalCurrency",
            p = (exports.PAYPAL_FIELDS = a({
                PAYPAL_ADDRESS: O,
                PAYPAL_ADDRESS2: M,
                PAYPAL_CURRENCY: c
            }), {
                label: "ssnA",
                maxLength: 3
            }),
            h = {
                label: "ssnB",
                maxLength: 2
            },
            y = {
                label: "ssnC",
                maxLength: 4
            },
            F = {
                label: "einA",
                maxLength: 2
            },
            b = {
                label: "einB",
                maxLength: 7
            },
            m = {
                label: "verifyEinA",
                maxLength: 2
            },
            B = {
                label: "verifyEinB",
                maxLength: 7
            },
            g = {
                label: "TIN"
            },
            w = (exports.TIN_FIELDS = T({
                SSN_FIELD_A: p,
                SSN_FIELD_B: h,
                SSN_FIELD_C: y,
                EIN_FIELD_A: F,
                EIN_FIELD_B: b,
                VERIFY_EIN_FIELD_A: m,
                VERIFY_EIN_FIELD_B: B,
                CHANGED_TIN: g
            }), "auth1"),
            x = "auth2",
            K = "auth3",
            f = "intlAuth1",
            G = "intlAuth2",
            V = "intlAuth3",
            v = (exports.AUTH_FIELDS = T({
                AUTH_1: w,
                AUTH_2: x,
                AUTH_3: K,
                INTL_AUTH_1: f,
                INTL_AUTH_2: G,
                INTL_AUTH_3: V
            }), exports.PROTECTED_FIELDS = A(["Uri", "UriDescription", "vq", "nickname", "PayPalVerified"]), "ssn"),
            $ = "ein",
            k = (exports.TIN_TYPES = T({
                SSN: v,
                EIN: $
            }), "ACH Direct Deposit"),
            W = "PayPal",
            Z = "Mailed Paper Checks",
            J = k,
            q = W,
            X = (exports.PAYMENT_TYPES = T({
                ACH: k,
                PAYPAL: W,
                CHECK: Z,
                DEFAULT_US_PAYMENT: J,
                DEFAULT_INTL_PAYMENT: q
            }), "Checking"),
            j = "Savings",
            Q = "Personal",
            z = "Business",
            ee = (exports.ACH_ACCOUNT_TYPES = T({
                CHECKING: X,
                SAVINGS: j
            }), exports.ACH_OWNER_TYPES = T({
                PERSONAL: Q,
                BUSINESS: z
            }), {
                label: "Individual (I don't file taxes as a business)",
                allowedTinTypes: [v]
            }),
            Ae = {
                label: "Sole Proprietor",
                allowedTinTypes: [v, $]
            },
            Te = {
                label: "Partnership",
                allowedTinTypes: [$]
            },
            ae = {
                label: "Corporation",
                allowedTinTypes: [$]
            },
            le = {
                label: "LLC-Single Member",
                allowedTinTypes: [v, $]
            },
            _e = {
                label: "LLC-Partnership",
                allowedTinTypes: [$]
            },
            Ee = {
                label: "LLC-Corporation",
                allowedTinTypes: [$]
            },
            ne = {
                label: "Non-Profit / Government",
                allowedTinTypes: [$]
            },
            Ce = {
                label: "International (I don't file taxes in the US)",
                allowedTinTypes: []
            },
            Se = (exports.W9_TYPES = a({
                TYPE_INDIVIDUAL: ee,
                TYPE_SOLE_PROPERIETOR: Ae,
                TYPE_PARTNERSHIP: Te,
                TYPE_CORPORATION: ae,
                TYPE_LLC_DISREGARDED: le,
                TYPE_LLC_PARTNERSHIP: _e,
                TYPE_LLC_CORPORATION: Ee,
                TYPE_NONPROFIT: ne,
                TYPE_INTERNATIONAL: Ce
            }), "DEFAULT"),
            te = "US1A",
            ie = "US1B",
            Ne = "US2A",
            Pe = "US2B",
            Ie = "US3",
            Le = "US4A",
            oe = "US4B",
            re = "US4C",
            se = "INTL1",
            Ue = "INTL2A",
            De = "INTL2B",
            He = "INTL2C",
            Re = "REVIEW",
            ue = (exports.FORM_STEPS = T({
                DEFAULT: Se,
                US1A: te,
                US1B: ie,
                US2A: Ne,
                US2B: Pe,
                US3: Ie,
                US4A: Le,
                US4B: oe,
                US4C: re,
                INTL1: se,
                INTL2A: Ue,
                INTL2B: De,
                INTL2C: He,
                REVIEW: Re
            }), exports.JUMP_TO_STEPS = T({
                "ach-epay-info": Re
            }), "$ - US Dollar"),
            de = "CA$ - Canadian Dollar",
            Ye = " - British Pound Sterling",
            Oe = " - Euro",
            Me = "A$ - Australian Dollar",
            ce = "MX$ - Mexican Peso",
            pe = " - Japanese Yen",
            he = "CHF - Swiss Franc",
            ye = "NZ$ - New Zealand Dollar",
            Fe = "SEK - Swedish Krona",
            be = "HK$ - Hong Kong Dollar";
        exports.PAYPAL_CURRENCIES = a({
            USD: ue,
            CAD: de,
            GBP: Ye,
            EUR: Oe,
            AUD: Me,
            MXN: ce,
            JPY: pe,
            CHF: he,
            NZD: ye,
            SEK: Fe,
            HKD: be
        })
    }(), SM.currentModule = null
}, "", {
    requires: ["immutable"]
});
YUI.add("sm-w9-reducers", function(e) {
    SM.currentModule = "sm-w9-reducers";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        "use strict";

        function e(e, s) {
            switch (s.type) {
                case d.LOAD_W9_DATA:
                    return babelHelpers["extends"]({}, e, {
                        w9Data: babelHelpers["extends"]({}, s.w9Data)
                    });
                default:
                    return e
            }
        }

        function s(e, s) {
            var l = e.localeOptions,
                r = void 0 === l ? {} : l,
                t = e.fields,
                n = void 0 === t ? {} : t,
                a = e.fields;
            a = void 0 === a ? {} : a;
            var i = a.w9Fields,
                u = void 0 === i ? {} : i,
                o = a.checkFields,
                c = void 0 === o ? {} : o,
                H = a.paypalFields,
                T = void 0 === H ? {} : H,
                E = a.tinFields,
                f = void 0 === E ? {} : E,
                x = a.achFields,
                _ = void 0 === x ? {} : x;
            switch (s.type) {
                case d.LOAD_LOCALE_OPTIONS:
                    return babelHelpers["extends"]({}, e, {
                        localeOptions: babelHelpers["extends"]({}, r, {
                            countries: s.countries,
                            states: s.states
                        })
                    });
                case d.LOAD_SAVED_STATE:
                    var m = s.savedState;
                    return babelHelpers["extends"]({}, e, m);
                case d.SET_SIMPLE_FIELD:
                    return babelHelpers["extends"]({}, e, babelHelpers.defineProperty({}, s.simpleField, s.simpleValue));
                case d.SET_FORM_STEP:
                    return babelHelpers["extends"]({}, e, {
                        step: s.formStep,
                        formResponseSuccess: !1
                    });
                case d.SELECT_US:
                    return babelHelpers["extends"]({}, e, {
                        isUs: !0,
                        fields: babelHelpers["extends"]({}, n, {
                            w9Fields: babelHelpers["extends"]({}, u, {
                                Type: "",
                                PaymentType: e.payTypeOverride || p.get("DEFAULT_US_PAYMENT")
                            })
                        })
                    });
                case d.SELECT_INTERNATIONAL:
                    return babelHelpers["extends"]({}, e, {
                        isUs: !1,
                        fields: babelHelpers["extends"]({}, n, {
                            w9Fields: babelHelpers["extends"]({}, u, {
                                Type: b.get("TYPE_INTERNATIONAL"),
                                PaymentType: e.payTypeOverride || p.get("DEFAULT_INTL_PAYMENT")
                            })
                        })
                    });
                case d.SELECT_W9_TYPE:
                    var S = s.w9Type.allowedTinTypes,
                        A = 1 === S.length ? S[0] : "",
                        y = A === e.tinType ? e.fields.tinFields.TIN : "";
                    return babelHelpers["extends"]({}, e, {
                        tinType: A,
                        fields: babelHelpers["extends"]({}, n, {
                            w9Fields: babelHelpers["extends"]({}, u, {
                                Type: s.w9Type
                            }),
                            tinFields: babelHelpers["extends"]({}, f, {
                                TIN: y
                            })
                        })
                    });
                case d.SELECT_TIN_TYPE:
                    return babelHelpers["extends"]({}, e, {
                        tinType: s.tinType,
                        fields: babelHelpers["extends"]({}, n, {
                            tinFields: {
                                ssnA: "",
                                ssnB: "",
                                ssnC: "",
                                einA: "",
                                einB: "",
                                verifyEinA: "",
                                verifyEinB: "",
                                TIN: ""
                            }
                        })
                    });
                case d.CHANGE_TIN_FIELD:
                    return babelHelpers["extends"]({}, e, {
                        fields: babelHelpers["extends"]({}, n, {
                            tinFields: babelHelpers["extends"]({}, f, babelHelpers.defineProperty({
                                lastChanged: s.tinField
                            }, s.tinField, s.value))
                        })
                    });
                case d.CHANGE_LEGAL_NAME:
                    return babelHelpers["extends"]({}, e, {
                        legalNameStored: !1,
                        fields: babelHelpers["extends"]({}, n, {
                            w9Fields: babelHelpers["extends"]({}, u, babelHelpers.defineProperty({}, s.nameField, s.nameValue))
                        })
                    });
                case d.SET_ROUTING_VALIDITY:
                    return babelHelpers["extends"]({}, e, {
                        fields: babelHelpers["extends"]({}, n, {
                            achFields: babelHelpers["extends"]({}, _, {
                                _achRoutingValid: s.isValid
                            })
                        })
                    });
                case d.VALIDATE_ACH_MATCH:
                    return babelHelpers["extends"]({}, e, {
                        fields: babelHelpers["extends"]({}, n, {
                            achFields: babelHelpers["extends"]({}, _, babelHelpers.defineProperty({}, s.matchField, s.isMatch))
                        })
                    });
                case d.CHANGE_ACH_FIELD:
                    return babelHelpers["extends"]({}, e, {
                        achFieldsStored: !1,
                        fields: babelHelpers["extends"]({}, n, {
                            achFields: babelHelpers["extends"]({}, _, babelHelpers.defineProperty({}, s.achField, s.achValue))
                        })
                    });
                case d.CHANGE_PAYPAL_FIELD:
                    return babelHelpers["extends"]({}, e, {
                        fields: babelHelpers["extends"]({}, n, {
                            paypalFields: babelHelpers["extends"]({}, T, babelHelpers.defineProperty({}, s.field, s.fieldValue))
                        })
                    });
                case d.CHANGE_CHECK_FIELD:
                    return babelHelpers["extends"]({}, e, {
                        fields: babelHelpers["extends"]({}, n, {
                            checkFields: babelHelpers["extends"]({}, c, babelHelpers.defineProperty({}, s.field, s.fieldValue))
                        })
                    });
                case d.SET_FORM_RESPONSE_SUCCESS:
                    return babelHelpers["extends"]({}, e, {
                        formSubmitting: !1,
                        formResponseSuccess: s.formResponseSuccess,
                        formResponseErrorMsg: s.error || {}
                    });
                default:
                    return e
            }
        }

        function l() {
            for (var s = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, l = arguments[1], r = s, t = [e], n = 0; n < t.length; n++) {
                var a = t[n];
                r = a(r, l)
            }
            return r
        }

        function r() {
            for (var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, l = arguments[1], r = e.w9, t = void 0 === r ? {} : r, n = [s], a = 0; a < n.length; a++) {
                var d = n[a];
                t = d(t, l)
            }
            return babelHelpers["extends"]({}, e, {
                w9: t
            })
        }

        function t() {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
                s = arguments[1],
                t = a({
                    ui: r,
                    data: l
                });
            return t(e, s)
        }
        Object.defineProperty(exports, "__esModule", {
            value: !0
        }), exports.DATA = l, exports.UI = r, exports.combined = t;
        var n = SM["import"]("redux"),
            a = n.combineReducers,
            d = SM["import"]("sm-w9-action-types"),
            i = SM["import"]("sm-w9-constants"),
            b = i.W9_TYPES,
            p = i.PAYMENT_TYPES
    }(), SM.currentModule = null
}, "", {
    requires: ["redux", "sm-w9-constants", "sm-w9-action-types"]
});
YUI.add("classnames", function(e) {
    SM.currentModule = "classnames";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        /*!
          Copyright (c) 2015 Jed Watson.
          Licensed under the MIT License (MIT), see
          http://jedwatson.github.io/classnames
        */
        ! function() {
            "use strict";

            function e() {
                for (var n = "", r = 0; r < arguments.length; r++) {
                    var t = arguments[r];
                    if (t) {
                        var u = typeof t;
                        if ("string" === u || "number" === u) n += " " + t;
                        else if (Array.isArray(t)) n += " " + e.apply(null, t);
                        else if ("object" === u)
                            for (var s in t) t.hasOwnProperty(s) && t[s] && (n += " " + s)
                    }
                }
                return n.substr(1)
            }
            "undefined" != typeof module && module.exports ? module.exports = e : "function" == typeof define && "object" == typeof define.amd && define.amd ? define(function() {
                return e
            }) : window.classNames = e
        }()
    }(), SM.currentModule = null
}, "", {
    requires: []
});
YUI.add("codemirror", function(e) {
    SM.currentModule = "codemirror";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        var e = function() {
            return module.exports
        };
        ! function(e) {
            if ("object" == typeof exports && "object" == typeof module) module.exports = e();
            else {
                if ("function" == typeof define && define.amd) return define([], e);
                this.CodeMirror = e()
            }
        }(function() {
            "use strict";

            function e(r, n) {
                if (!(this instanceof e)) return new e(r, n);
                this.options = n = n ? zi(n) : {}, zi(Ko, n, !1), h(n);
                var i = n.value;
                "string" == typeof i && (i = new ma(i, n.mode)), this.doc = i;
                var o = new e.inputStyles[n.inputStyle](this),
                    a = this.display = new t(r, i, o);
                a.wrapper.CodeMirror = this, c(this), l(this), n.lineWrapping && (this.display.wrapper.className += " CodeMirror-wrap"), n.autofocus && !ko && a.input.focus(), v(this), this.state = {
                    keyMaps: [],
                    overlays: [],
                    modeGen: 0,
                    overwrite: !1,
                    delayingBlurEvent: !1,
                    focused: !1,
                    suppressEdits: !1,
                    pasteIncoming: !1,
                    cutIncoming: !1,
                    draggingText: !1,
                    highlight: new Si,
                    keySeq: null,
                    specialChars: null
                };
                var s = this;
                fo && 11 > ho && setTimeout(function() {
                    s.display.input.reset(!0)
                }, 20), jt(this), Gi(), vt(this), this.curOp.forceUpdate = !0, Un(this, i), n.autofocus && !ko || s.hasFocus() ? setTimeout(Pi(fr, this), 20) : dr(this);
                for (var u in _o) _o.hasOwnProperty(u) && _o[u](this, n[u], $o);
                k(this), n.finishInit && n.finishInit(this);
                for (var f = 0; f < Qo.length; ++f) Qo[f](this);
                bt(this), po && n.lineWrapping && "optimizelegibility" == getComputedStyle(a.lineDiv).textRendering && (a.lineDiv.style.textRendering = "auto")
            }

            function t(e, t, r) {
                var n = this;
                this.input = r, n.scrollbarFiller = Ei("div", null, "CodeMirror-scrollbar-filler"), n.scrollbarFiller.setAttribute("cm-not-content", "true"), n.gutterFiller = Ei("div", null, "CodeMirror-gutter-filler"), n.gutterFiller.setAttribute("cm-not-content", "true"), n.lineDiv = Ei("div", null, "CodeMirror-code"), n.selectionDiv = Ei("div", null, null, "position: relative; z-index: 1"), n.cursorDiv = Ei("div", null, "CodeMirror-cursors"), n.measure = Ei("div", null, "CodeMirror-measure"), n.lineMeasure = Ei("div", null, "CodeMirror-measure"), n.lineSpace = Ei("div", [n.measure, n.lineMeasure, n.selectionDiv, n.cursorDiv, n.lineDiv], null, "position: relative; outline: none"), n.mover = Ei("div", [Ei("div", [n.lineSpace], "CodeMirror-lines")], null, "position: relative"), n.sizer = Ei("div", [n.mover], "CodeMirror-sizer"), n.sizerWidth = null, n.heightForcer = Ei("div", null, null, "position: absolute; height: " + Ma + "px; width: 1px;"), n.gutters = Ei("div", null, "CodeMirror-gutters"), n.lineGutter = null, n.scroller = Ei("div", [n.sizer, n.heightForcer, n.gutters], "CodeMirror-scroll"), n.scroller.setAttribute("tabIndex", "-1"), n.wrapper = Ei("div", [n.scrollbarFiller, n.gutterFiller, n.scroller], "CodeMirror"), fo && 8 > ho && (n.gutters.style.zIndex = -1, n.scroller.style.paddingRight = 0), po || so && ko || (n.scroller.draggable = !0), e && (e.appendChild ? e.appendChild(n.wrapper) : e(n.wrapper)), n.viewFrom = n.viewTo = t.first, n.reportedViewFrom = n.reportedViewTo = t.first, n.view = [], n.renderedView = null, n.externalMeasured = null, n.viewOffset = 0, n.lastWrapHeight = n.lastWrapWidth = 0, n.updateLineNumbers = null, n.nativeBarWidth = n.barHeight = n.barWidth = 0, n.scrollbarsClipped = !1, n.lineNumWidth = n.lineNumInnerWidth = n.lineNumChars = null, n.alignWidgets = !1, n.cachedCharWidth = n.cachedTextHeight = n.cachedPaddingH = null, n.maxLine = null, n.maxLineLength = 0, n.maxLineChanged = !1, n.wheelDX = n.wheelDY = n.wheelStartX = n.wheelStartY = null, n.shift = !1, n.selForContextMenu = null, n.activeTouch = null, r.init(n)
            }

            function r(t) {
                t.doc.mode = e.getMode(t.options, t.doc.modeOption), n(t)
            }

            function n(e) {
                e.doc.iter(function(e) {
                    e.stateAfter && (e.stateAfter = null), e.styles && (e.styles = null)
                }), e.doc.frontier = e.doc.first, He(e, 100), e.state.modeGen++, e.curOp && zt(e)
            }

            function i(e) {
                e.options.lineWrapping ? (Va(e.display.wrapper, "CodeMirror-wrap"), e.display.sizer.style.minWidth = "", e.display.sizerWidth = null) : (Ba(e.display.wrapper, "CodeMirror-wrap"), d(e)), a(e), zt(e), it(e), setTimeout(function() {
                    y(e)
                }, 100)
            }

            function o(e) {
                var t = gt(e.display),
                    r = e.options.lineWrapping,
                    n = r && Math.max(5, e.display.scroller.clientWidth / mt(e.display) - 3);
                return function(i) {
                    if (vn(e.doc, i)) return 0;
                    var o = 0;
                    if (i.widgets)
                        for (var a = 0; a < i.widgets.length; a++) i.widgets[a].height && (o += i.widgets[a].height);
                    return r ? o + (Math.ceil(i.text.length / n) || 1) * t : o + t
                }
            }

            function a(e) {
                var t = e.doc,
                    r = o(e);
                t.iter(function(e) {
                    var t = r(e);
                    t != e.height && Xn(e, t)
                })
            }

            function l(e) {
                e.display.wrapper.className = e.display.wrapper.className.replace(/\s*cm-s-\S+/g, "") + e.options.theme.replace(/(^|\s)\s*/g, " cm-s-"), it(e)
            }

            function s(e) {
                c(e), zt(e), setTimeout(function() {
                    w(e)
                }, 20)
            }

            function c(e) {
                var t = e.display.gutters,
                    r = e.options.gutters;
                Fi(t);
                for (var n = 0; n < r.length; ++n) {
                    var i = r[n],
                        o = t.appendChild(Ei("div", null, "CodeMirror-gutter " + i));
                    "CodeMirror-linenumbers" == i && (e.display.lineGutter = o, o.style.width = (e.display.lineNumWidth || 1) + "px")
                }
                t.style.display = n ? "" : "none", u(e)
            }

            function u(e) {
                var t = e.display.gutters.offsetWidth;
                e.display.sizer.style.marginLeft = t + "px"
            }

            function f(e) {
                if (0 == e.height) return 0;
                for (var t, r = e.text.length, n = e; t = un(n);) {
                    var i = t.find(0, !0);
                    n = i.from.line, r += i.from.ch - i.to.ch
                }
                for (n = e; t = fn(n);) {
                    var i = t.find(0, !0);
                    r -= n.text.length - i.from.ch, n = i.to.line, r += n.text.length - i.to.ch
                }
                return r
            }

            function d(e) {
                var t = e.display,
                    r = e.doc;
                t.maxLine = Kn(r, r.first), t.maxLineLength = f(t.maxLine), t.maxLineChanged = !0, r.iter(function(e) {
                    var r = f(e);
                    r > t.maxLineLength && (t.maxLineLength = r, t.maxLine = e)
                })
            }

            function h(e) {
                var t = Ai(e.gutters, "CodeMirror-linenumbers"); - 1 == t && e.lineNumbers ? e.gutters = e.gutters.concat(["CodeMirror-linenumbers"]) : t > -1 && !e.lineNumbers && (e.gutters = e.gutters.slice(0), e.gutters.splice(t, 1))
            }

            function p(e) {
                var t = e.display,
                    r = t.gutters.offsetWidth,
                    n = Math.round(e.doc.height + Be(e.display));
                return {
                    clientHeight: t.scroller.clientHeight,
                    viewHeight: t.wrapper.clientHeight,
                    scrollWidth: t.scroller.scrollWidth,
                    clientWidth: t.scroller.clientWidth,
                    viewWidth: t.wrapper.clientWidth,
                    barLeft: e.options.fixedGutter ? r : 0,
                    docHeight: n,
                    scrollHeight: n + qe(e) + t.barHeight,
                    nativeBarWidth: t.nativeBarWidth,
                    gutterWidth: r
                }
            }

            function g(e, t, r) {
                this.cm = r;
                var n = this.vert = Ei("div", [Ei("div", null, null, "min-width: 1px")], "CodeMirror-vscrollbar"),
                    i = this.horiz = Ei("div", [Ei("div", null, null, "height: 100%; min-height: 1px")], "CodeMirror-hscrollbar");
                e(n), e(i), ka(n, "scroll", function() {
                    n.clientHeight && t(n.scrollTop, "vertical")
                }), ka(i, "scroll", function() {
                    i.clientWidth && t(i.scrollLeft, "horizontal")
                }), this.checkedOverlay = !1, fo && 8 > ho && (this.horiz.style.minHeight = this.vert.style.minWidth = "18px")
            }

            function m() {}

            function v(t) {
                t.display.scrollbars && (t.display.scrollbars.clear(), t.display.scrollbars.addClass && Ba(t.display.wrapper, t.display.scrollbars.addClass)), t.display.scrollbars = new e.scrollbarModel[t.options.scrollbarStyle](function(e) {
                    t.display.wrapper.insertBefore(e, t.display.scrollbarFiller), ka(e, "mousedown", function() {
                        t.state.focused && setTimeout(function() {
                            t.display.input.focus()
                        }, 0)
                    }), e.setAttribute("cm-not-content", "true")
                }, function(e, r) {
                    "horizontal" == r ? Jt(t, e) : Qt(t, e)
                }, t), t.display.scrollbars.addClass && Va(t.display.wrapper, t.display.scrollbars.addClass)
            }

            function y(e, t) {
                t || (t = p(e));
                var r = e.display.barWidth,
                    n = e.display.barHeight;
                b(e, t);
                for (var i = 0; 4 > i && r != e.display.barWidth || n != e.display.barHeight; i++) r != e.display.barWidth && e.options.lineWrapping && W(e), b(e, p(e)), r = e.display.barWidth, n = e.display.barHeight
            }

            function b(e, t) {
                var r = e.display,
                    n = r.scrollbars.update(t);
                r.sizer.style.paddingRight = (r.barWidth = n.right) + "px", r.sizer.style.paddingBottom = (r.barHeight = n.bottom) + "px", n.right && n.bottom ? (r.scrollbarFiller.style.display = "block", r.scrollbarFiller.style.height = n.bottom + "px", r.scrollbarFiller.style.width = n.right + "px") : r.scrollbarFiller.style.display = "", n.bottom && e.options.coverGutterNextToScrollbar && e.options.fixedGutter ? (r.gutterFiller.style.display = "block", r.gutterFiller.style.height = n.bottom + "px", r.gutterFiller.style.width = t.gutterWidth + "px") : r.gutterFiller.style.display = ""
            }

            function x(e, t, r) {
                var n = r && null != r.top ? Math.max(0, r.top) : e.scroller.scrollTop;
                n = Math.floor(n - Re(e));
                var i = r && null != r.bottom ? r.bottom : n + e.wrapper.clientHeight,
                    o = Zn(t, n),
                    a = Zn(t, i);
                if (r && r.ensure) {
                    var l = r.ensure.from.line,
                        s = r.ensure.to.line;
                    o > l ? (o = l, a = Zn(t, Qn(Kn(t, l)) + e.wrapper.clientHeight)) : Math.min(s, t.lastLine()) >= a && (o = Zn(t, Qn(Kn(t, s)) - e.wrapper.clientHeight), a = s)
                }
                return {
                    from: o,
                    to: Math.max(a, o + 1)
                }
            }

            function w(e) {
                var t = e.display,
                    r = t.view;
                if (t.alignWidgets || t.gutters.firstChild && e.options.fixedGutter) {
                    for (var n = S(t) - t.scroller.scrollLeft + e.doc.scrollLeft, i = t.gutters.offsetWidth, o = n + "px", a = 0; a < r.length; a++)
                        if (!r[a].hidden) {
                            e.options.fixedGutter && r[a].gutter && (r[a].gutter.style.left = o);
                            var l = r[a].alignable;
                            if (l)
                                for (var s = 0; s < l.length; s++) l[s].style.left = o
                        }
                    e.options.fixedGutter && (t.gutters.style.left = n + i + "px")
                }
            }

            function k(e) {
                if (!e.options.lineNumbers) return !1;
                var t = e.doc,
                    r = C(e.options, t.first + t.size - 1),
                    n = e.display;
                if (r.length != n.lineNumChars) {
                    var i = n.measure.appendChild(Ei("div", [Ei("div", r)], "CodeMirror-linenumber CodeMirror-gutter-elt")),
                        o = i.firstChild.offsetWidth,
                        a = i.offsetWidth - o;
                    return n.lineGutter.style.width = "", n.lineNumInnerWidth = Math.max(o, n.lineGutter.offsetWidth - a) + 1, n.lineNumWidth = n.lineNumInnerWidth + a, n.lineNumChars = n.lineNumInnerWidth ? r.length : -1, n.lineGutter.style.width = n.lineNumWidth + "px", u(e), !0
                }
                return !1
            }

            function C(e, t) {
                return String(e.lineNumberFormatter(t + e.firstLineNumber))
            }

            function S(e) {
                return e.scroller.getBoundingClientRect().left - e.sizer.getBoundingClientRect().left
            }

            function L(e, t, r) {
                var n = e.display;
                this.viewport = t, this.visible = x(n, e.doc, t), this.editorIsHidden = !n.wrapper.offsetWidth, this.wrapperHeight = n.wrapper.clientHeight, this.wrapperWidth = n.wrapper.clientWidth, this.oldDisplayWidth = Ge(e), this.force = r, this.dims = P(e), this.events = []
            }

            function M(e) {
                var t = e.display;
                !t.scrollbarsClipped && t.scroller.offsetWidth && (t.nativeBarWidth = t.scroller.offsetWidth - t.scroller.clientWidth, t.heightForcer.style.height = qe(e) + "px", t.sizer.style.marginBottom = -t.nativeBarWidth + "px", t.sizer.style.borderRightWidth = qe(e) + "px", t.scrollbarsClipped = !0)
            }

            function T(e, t) {
                var r = e.display,
                    n = e.doc;
                if (t.editorIsHidden) return It(e), !1;
                if (!t.force && t.visible.from >= r.viewFrom && t.visible.to <= r.viewTo && (null == r.updateLineNumbers || r.updateLineNumbers >= r.viewTo) && r.renderedView == r.view && 0 == Ft(e)) return !1;
                k(e) && (It(e), t.dims = P(e));
                var i = n.first + n.size,
                    o = Math.max(t.visible.from - e.options.viewportMargin, n.first),
                    a = Math.min(i, t.visible.to + e.options.viewportMargin);
                r.viewFrom < o && o - r.viewFrom < 20 && (o = Math.max(n.first, r.viewFrom)), r.viewTo > a && r.viewTo - a < 20 && (a = Math.min(i, r.viewTo)), No && (o = gn(e.doc, o), a = mn(e.doc, a));
                var l = o != r.viewFrom || a != r.viewTo || r.lastWrapHeight != t.wrapperHeight || r.lastWrapWidth != t.wrapperWidth;
                Et(e, o, a), r.viewOffset = Qn(Kn(e.doc, r.viewFrom)), e.display.mover.style.top = r.viewOffset + "px";
                var s = Ft(e);
                if (!l && 0 == s && !t.force && r.renderedView == r.view && (null == r.updateLineNumbers || r.updateLineNumbers >= r.viewTo)) return !1;
                var c = Ri();
                return s > 4 && (r.lineDiv.style.display = "none"), I(e, r.updateLineNumbers, t.dims), s > 4 && (r.lineDiv.style.display = ""), r.renderedView = r.view, c && Ri() != c && c.offsetHeight && c.focus(), Fi(r.cursorDiv), Fi(r.selectionDiv), r.gutters.style.height = 0, l && (r.lastWrapHeight = t.wrapperHeight, r.lastWrapWidth = t.wrapperWidth, He(e, 400)), r.updateLineNumbers = null, !0
            }

            function A(e, t) {
                for (var r = t.force, n = t.viewport, i = !0;; i = !1) {
                    if (i && e.options.lineWrapping && t.oldDisplayWidth != Ge(e)) r = !0;
                    else if (r = !1, n && null != n.top && (n = {
                            top: Math.min(e.doc.height + Be(e.display) - Ue(e), n.top)
                        }), t.visible = x(e.display, e.doc, n), t.visible.from >= e.display.viewFrom && t.visible.to <= e.display.viewTo) break;
                    if (!T(e, t)) break;
                    W(e);
                    var o = p(e);
                    We(e), O(e, o), y(e, o)
                }
                t.signal(e, "update", e), (e.display.viewFrom != e.display.reportedViewFrom || e.display.viewTo != e.display.reportedViewTo) && (t.signal(e, "viewportChange", e, e.display.viewFrom, e.display.viewTo), e.display.reportedViewFrom = e.display.viewFrom, e.display.reportedViewTo = e.display.viewTo)
            }

            function N(e, t) {
                var r = new L(e, t);
                if (T(e, r)) {
                    W(e), A(e, r);
                    var n = p(e);
                    We(e), O(e, n), y(e, n), r.finish()
                }
            }

            function O(e, t) {
                e.display.sizer.style.minHeight = t.docHeight + "px";
                var r = t.docHeight + e.display.barHeight;
                e.display.heightForcer.style.top = r + "px", e.display.gutters.style.height = Math.max(r + qe(e), t.clientHeight) + "px"
            }

            function W(e) {
                for (var t = e.display, r = t.lineDiv.offsetTop, n = 0; n < t.view.length; n++) {
                    var i, o = t.view[n];
                    if (!o.hidden) {
                        if (fo && 8 > ho) {
                            var a = o.node.offsetTop + o.node.offsetHeight;
                            i = a - r, r = a
                        } else {
                            var l = o.node.getBoundingClientRect();
                            i = l.bottom - l.top
                        }
                        var s = o.line.height - i;
                        if (2 > i && (i = gt(t)), (s > .001 || -.001 > s) && (Xn(o.line, i), z(o.line), o.rest))
                            for (var c = 0; c < o.rest.length; c++) z(o.rest[c])
                    }
                }
            }

            function z(e) {
                if (e.widgets)
                    for (var t = 0; t < e.widgets.length; ++t) e.widgets[t].height = e.widgets[t].node.offsetHeight
            }

            function P(e) {
                for (var t = e.display, r = {}, n = {}, i = t.gutters.clientLeft, o = t.gutters.firstChild, a = 0; o; o = o.nextSibling, ++a) r[e.options.gutters[a]] = o.offsetLeft + o.clientLeft + i, n[e.options.gutters[a]] = o.clientWidth;
                return {
                    fixedPos: S(t),
                    gutterTotalWidth: t.gutters.offsetWidth,
                    gutterLeft: r,
                    gutterWidth: n,
                    wrapperWidth: t.wrapper.clientWidth
                }
            }

            function I(e, t, r) {
                function n(t) {
                    var r = t.nextSibling;
                    return po && Co && e.display.currentWheelTarget == t ? t.style.display = "none" : t.parentNode.removeChild(t), r
                }
                for (var i = e.display, o = e.options.lineNumbers, a = i.lineDiv, l = a.firstChild, s = i.view, c = i.viewFrom, u = 0; u < s.length; u++) {
                    var f = s[u];
                    if (f.hidden);
                    else if (f.node && f.node.parentNode == a) {
                        for (; l != f.node;) l = n(l);
                        var d = o && null != t && c >= t && f.lineNumber;
                        f.changes && (Ai(f.changes, "gutter") > -1 && (d = !1), D(e, f, c, r)), d && (Fi(f.lineNumber), f.lineNumber.appendChild(document.createTextNode(C(e.options, c)))), l = f.node.nextSibling
                    } else {
                        var h = q(e, f, c, r);
                        a.insertBefore(h, l)
                    }
                    c += f.size
                }
                for (; l;) l = n(l)
            }

            function D(e, t, r, n) {
                for (var i = 0; i < t.changes.length; i++) {
                    var o = t.changes[i];
                    "text" == o ? j(e, t) : "gutter" == o ? B(e, t, r, n) : "class" == o ? R(t) : "widget" == o && V(e, t, n)
                }
                t.changes = null
            }

            function H(e) {
                return e.node == e.text && (e.node = Ei("div", null, null, "position: relative"), e.text.parentNode && e.text.parentNode.replaceChild(e.node, e.text), e.node.appendChild(e.text), fo && 8 > ho && (e.node.style.zIndex = 2)), e.node
            }

            function E(e) {
                var t = e.bgClass ? e.bgClass + " " + (e.line.bgClass || "") : e.line.bgClass;
                if (t && (t += " CodeMirror-linebackground"), e.background) t ? e.background.className = t : (e.background.parentNode.removeChild(e.background), e.background = null);
                else if (t) {
                    var r = H(e);
                    e.background = r.insertBefore(Ei("div", null, t), r.firstChild)
                }
            }

            function F(e, t) {
                var r = e.display.externalMeasured;
                return r && r.line == t.line ? (e.display.externalMeasured = null, t.measure = r.measure, r.built) : Pn(e, t)
            }

            function j(e, t) {
                var r = t.text.className,
                    n = F(e, t);
                t.text == t.node && (t.node = n.pre), t.text.parentNode.replaceChild(n.pre, t.text), t.text = n.pre, n.bgClass != t.bgClass || n.textClass != t.textClass ? (t.bgClass = n.bgClass, t.textClass = n.textClass, R(t)) : r && (t.text.className = r)
            }

            function R(e) {
                E(e), e.line.wrapClass ? H(e).className = e.line.wrapClass : e.node != e.text && (e.node.className = "");
                var t = e.textClass ? e.textClass + " " + (e.line.textClass || "") : e.line.textClass;
                e.text.className = t || ""
            }

            function B(e, t, r, n) {
                t.gutter && (t.node.removeChild(t.gutter), t.gutter = null);
                var i = t.line.gutterMarkers;
                if (e.options.lineNumbers || i) {
                    var o = H(t),
                        a = t.gutter = Ei("div", null, "CodeMirror-gutter-wrapper", "left: " + (e.options.fixedGutter ? n.fixedPos : -n.gutterTotalWidth) + "px; width: " + n.gutterTotalWidth + "px");
                    if (e.display.input.setUneditable(a), o.insertBefore(a, t.text), t.line.gutterClass && (a.className += " " + t.line.gutterClass), !e.options.lineNumbers || i && i["CodeMirror-linenumbers"] || (t.lineNumber = a.appendChild(Ei("div", C(e.options, r), "CodeMirror-linenumber CodeMirror-gutter-elt", "left: " + n.gutterLeft["CodeMirror-linenumbers"] + "px; width: " + e.display.lineNumInnerWidth + "px"))), i)
                        for (var l = 0; l < e.options.gutters.length; ++l) {
                            var s = e.options.gutters[l],
                                c = i.hasOwnProperty(s) && i[s];
                            c && a.appendChild(Ei("div", [c], "CodeMirror-gutter-elt", "left: " + n.gutterLeft[s] + "px; width: " + n.gutterWidth[s] + "px"))
                        }
                }
            }

            function V(e, t, r) {
                t.alignable && (t.alignable = null);
                for (var n, i = t.node.firstChild; i; i = n) {
                    var n = i.nextSibling;
                    "CodeMirror-linewidget" == i.className && t.node.removeChild(i)
                }
                G(e, t, r)
            }

            function q(e, t, r, n) {
                var i = F(e, t);
                return t.text = t.node = i.pre, i.bgClass && (t.bgClass = i.bgClass), i.textClass && (t.textClass = i.textClass), R(t), B(e, t, r, n), G(e, t, n), t.node
            }

            function G(e, t, r) {
                if (U(e, t.line, t, r, !0), t.rest)
                    for (var n = 0; n < t.rest.length; n++) U(e, t.rest[n], t, r, !1)
            }

            function U(e, t, r, n, i) {
                if (t.widgets)
                    for (var o = H(r), a = 0, l = t.widgets; a < l.length; ++a) {
                        var s = l[a],
                            c = Ei("div", [s.node], "CodeMirror-linewidget");
                        s.handleMouseEvents || c.setAttribute("cm-ignore-events", "true"), K(s, c, r, n), e.display.input.setUneditable(c), i && s.above ? o.insertBefore(c, r.gutter || r.text) : o.appendChild(c), yi(s, "redraw")
                    }
            }

            function K(e, t, r, n) {
                if (e.noHScroll) {
                    (r.alignable || (r.alignable = [])).push(t);
                    var i = n.wrapperWidth;
                    t.style.left = n.fixedPos + "px", e.coverGutter || (i -= n.gutterTotalWidth, t.style.paddingLeft = n.gutterTotalWidth + "px"), t.style.width = i + "px"
                }
                e.coverGutter && (t.style.zIndex = 5, t.style.position = "relative", e.noHScroll || (t.style.marginLeft = -n.gutterTotalWidth + "px"))
            }

            function _(e) {
                return Oo(e.line, e.ch)
            }

            function $(e, t) {
                return Wo(e, t) < 0 ? t : e
            }

            function X(e, t) {
                return Wo(e, t) < 0 ? e : t
            }

            function Y(e) {
                e.state.focused || (e.display.input.focus(), fr(e))
            }

            function Z(e) {
                return e.options.readOnly || e.doc.cantEdit
            }

            function Q(e, t, r, n, i) {
                var o = e.doc;
                e.display.shift = !1, n || (n = o.sel);
                var a = Ua(t),
                    l = null;
                e.state.pasteIncoming && n.ranges.length > 1 && (zo && zo.join("\n") == t ? l = n.ranges.length % zo.length == 0 && Ni(zo, Ua) : a.length == n.ranges.length && (l = Ni(a, function(e) {
                    return [e]
                })));
                for (var s = n.ranges.length - 1; s >= 0; s--) {
                    var c = n.ranges[s],
                        u = c.from(),
                        f = c.to();
                    c.empty() && (r && r > 0 ? u = Oo(u.line, u.ch - r) : e.state.overwrite && !e.state.pasteIncoming && (f = Oo(f.line, Math.min(Kn(o, f.line).text.length, f.ch + Ti(a).length))));
                    var d = e.curOp.updateInput,
                        h = {
                            from: u,
                            to: f,
                            text: l ? l[s % l.length] : a,
                            origin: i || (e.state.pasteIncoming ? "paste" : e.state.cutIncoming ? "cut" : "+input")
                        };
                    if (xr(e.doc, h), yi(e, "inputRead", e, h), t && !e.state.pasteIncoming && e.options.electricChars && e.options.smartIndent && c.head.ch < 100 && (!s || n.ranges[s - 1].head.line != c.head.line)) {
                        var p = e.getModeAt(c.head),
                            g = Uo(h),
                            m = !1;
                        if (p.electricChars) {
                            for (var v = 0; v < p.electricChars.length; v++)
                                if (t.indexOf(p.electricChars.charAt(v)) > -1) {
                                    m = Ir(e, g.line, "smart");
                                    break
                                }
                        } else p.electricInput && p.electricInput.test(Kn(o, g.line).text.slice(0, g.ch)) && (m = Ir(e, g.line, "smart"));
                        m && yi(e, "electricInput", e, g.line)
                    }
                }
                zr(e), e.curOp.updateInput = d, e.curOp.typing = !0, e.state.pasteIncoming = e.state.cutIncoming = !1
            }

            function J(e) {
                for (var t = [], r = [], n = 0; n < e.doc.sel.ranges.length; n++) {
                    var i = e.doc.sel.ranges[n].head.line,
                        o = {
                            anchor: Oo(i, 0),
                            head: Oo(i + 1, 0)
                        };
                    r.push(o), t.push(e.getRange(o.anchor, o.head))
                }
                return {
                    text: t,
                    ranges: r
                }
            }

            function ee(e) {
                e.setAttribute("autocorrect", "off"), e.setAttribute("autocapitalize", "off"), e.setAttribute("spellcheck", "false")
            }

            function te(e) {
                this.cm = e, this.prevInput = "", this.pollingFast = !1, this.polling = new Si, this.inaccurateSelection = !1, this.hasSelection = !1, this.composing = null
            }

            function re() {
                var e = Ei("textarea", null, null, "position: absolute; padding: 0; width: 1px; height: 1em; outline: none"),
                    t = Ei("div", [e], null, "overflow: hidden; position: relative; width: 3px; height: 0px;");
                return po ? e.style.width = "1000px" : e.setAttribute("wrap", "off"), wo && (e.style.border = "1px solid black"), ee(e), t
            }

            function ne(e) {
                this.cm = e, this.lastAnchorNode = this.lastAnchorOffset = this.lastFocusNode = this.lastFocusOffset = null, this.polling = new Si, this.gracePeriod = !1
            }

            function ie(e, t) {
                var r = Ye(e, t.line);
                if (!r || r.hidden) return null;
                var n = Kn(e.doc, t.line),
                    i = _e(r, n, t.line),
                    o = Jn(n),
                    a = "left";
                if (o) {
                    var l = io(o, t.ch);
                    a = l % 2 ? "right" : "left"
                }
                var s = Je(i.map, t.ch, "left");
                return s.offset = "right" == s.collapse ? s.end : s.start, s
            }

            function oe(e, t) {
                return t && (e.bad = !0), e
            }

            function ae(e, t, r) {
                var n;
                if (t == e.display.lineDiv) {
                    if (n = e.display.lineDiv.childNodes[r], !n) return oe(e.clipPos(Oo(e.display.viewTo - 1)), !0);
                    t = null, r = 0
                } else
                    for (n = t;; n = n.parentNode) {
                        if (!n || n == e.display.lineDiv) return null;
                        if (n.parentNode && n.parentNode == e.display.lineDiv) break
                    }
                for (var i = 0; i < e.display.view.length; i++) {
                    var o = e.display.view[i];
                    if (o.node == n) return le(o, t, r)
                }
            }

            function le(e, t, r) {
                function n(t, r, n) {
                    for (var i = -1; i < (u ? u.length : 0); i++)
                        for (var o = 0 > i ? c.map : u[i], a = 0; a < o.length; a += 3) {
                            var l = o[a + 2];
                            if (l == t || l == r) {
                                var s = Yn(0 > i ? e.line : e.rest[i]),
                                    f = o[a] + n;
                                return (0 > n || l != t) && (f = o[a + (n ? 1 : 0)]), Oo(s, f)
                            }
                        }
                }
                var i = e.text.firstChild,
                    o = !1;
                if (!t || !Fa(i, t)) return oe(Oo(Yn(e.line), 0), !0);
                if (t == i && (o = !0, t = i.childNodes[r], r = 0, !t)) {
                    var a = e.rest ? Ti(e.rest) : e.line;
                    return oe(Oo(Yn(a), a.text.length), o)
                }
                var l = 3 == t.nodeType ? t : null,
                    s = t;
                for (l || 1 != t.childNodes.length || 3 != t.firstChild.nodeType || (l = t.firstChild, r && (r = l.nodeValue.length)); s.parentNode != i;) s = s.parentNode;
                var c = e.measure,
                    u = c.maps,
                    f = n(l, s, r);
                if (f) return oe(f, o);
                for (var d = s.nextSibling, h = l ? l.nodeValue.length - r : 0; d; d = d.nextSibling) {
                    if (f = n(d, d.firstChild, 0)) return oe(Oo(f.line, f.ch - h), o);
                    h += d.textContent.length
                }
                for (var p = s.previousSibling, h = r; p; p = p.previousSibling) {
                    if (f = n(p, p.firstChild, -1)) return oe(Oo(f.line, f.ch + h), o);
                    h += d.textContent.length
                }
            }

            function se(e, t, r, n, i) {
                function o(e) {
                    return function(t) {
                        return t.id == e
                    }
                }

                function a(t) {
                    if (1 == t.nodeType) {
                        var r = t.getAttribute("cm-text");
                        if (null != r) return "" == r && (r = t.textContent.replace(/\u200b/g, "")), void(l += r);
                        var c, u = t.getAttribute("cm-marker");
                        if (u) {
                            var f = e.findMarks(Oo(n, 0), Oo(i + 1, 0), o(+u));
                            return void(f.length && (c = f[0].find()) && (l += _n(e.doc, c.from, c.to).join("\n")))
                        }
                        if ("false" == t.getAttribute("contenteditable")) return;
                        for (var d = 0; d < t.childNodes.length; d++) a(t.childNodes[d]);
                        /^(pre|div|p)$/i.test(t.nodeName) && (s = !0)
                    } else if (3 == t.nodeType) {
                        var h = t.nodeValue;
                        if (!h) return;
                        s && (l += "\n", s = !1), l += h
                    }
                }
                for (var l = "", s = !1; a(t), t != r;) t = t.nextSibling;
                return l
            }

            function ce(e, t) {
                this.ranges = e, this.primIndex = t
            }

            function ue(e, t) {
                this.anchor = e, this.head = t
            }

            function fe(e, t) {
                var r = e[t];
                e.sort(function(e, t) {
                    return Wo(e.from(), t.from())
                }), t = Ai(e, r);
                for (var n = 1; n < e.length; n++) {
                    var i = e[n],
                        o = e[n - 1];
                    if (Wo(o.to(), i.from()) >= 0) {
                        var a = X(o.from(), i.from()),
                            l = $(o.to(), i.to()),
                            s = o.empty() ? i.from() == i.head : o.from() == o.head;
                        t >= n && --t, e.splice(--n, 2, new ue(s ? l : a, s ? a : l))
                    }
                }
                return new ce(e, t)
            }

            function de(e, t) {
                return new ce([new ue(e, t || e)], 0)
            }

            function he(e, t) {
                return Math.max(e.first, Math.min(t, e.first + e.size - 1))
            }

            function pe(e, t) {
                if (t.line < e.first) return Oo(e.first, 0);
                var r = e.first + e.size - 1;
                return t.line > r ? Oo(r, Kn(e, r).text.length) : ge(t, Kn(e, t.line).text.length)
            }

            function ge(e, t) {
                var r = e.ch;
                return null == r || r > t ? Oo(e.line, t) : 0 > r ? Oo(e.line, 0) : e
            }

            function me(e, t) {
                return t >= e.first && t < e.first + e.size
            }

            function ve(e, t) {
                for (var r = [], n = 0; n < t.length; n++) r[n] = pe(e, t[n]);
                return r
            }

            function ye(e, t, r, n) {
                if (e.cm && e.cm.display.shift || e.extend) {
                    var i = t.anchor;
                    if (n) {
                        var o = Wo(r, i) < 0;
                        o != Wo(n, i) < 0 ? (i = r, r = n) : o != Wo(r, n) < 0 && (r = n)
                    }
                    return new ue(i, r)
                }
                return new ue(n || r, r)
            }

            function be(e, t, r, n) {
                Le(e, new ce([ye(e, e.sel.primary(), t, r)], 0), n)
            }

            function xe(e, t, r) {
                for (var n = [], i = 0; i < e.sel.ranges.length; i++) n[i] = ye(e, e.sel.ranges[i], t[i], null);
                var o = fe(n, e.sel.primIndex);
                Le(e, o, r)
            }

            function we(e, t, r, n) {
                var i = e.sel.ranges.slice(0);
                i[t] = r, Le(e, fe(i, e.sel.primIndex), n)
            }

            function ke(e, t, r, n) {
                Le(e, de(t, r), n)
            }

            function Ce(e, t) {
                var r = {
                    ranges: t.ranges,
                    update: function(t) {
                        this.ranges = [];
                        for (var r = 0; r < t.length; r++) this.ranges[r] = new ue(pe(e, t[r].anchor), pe(e, t[r].head))
                    }
                };
                return Sa(e, "beforeSelectionChange", e, r), e.cm && Sa(e.cm, "beforeSelectionChange", e.cm, r), r.ranges != t.ranges ? fe(r.ranges, r.ranges.length - 1) : t
            }

            function Se(e, t, r) {
                var n = e.history.done,
                    i = Ti(n);
                i && i.ranges ? (n[n.length - 1] = t, Me(e, t, r)) : Le(e, t, r)
            }

            function Le(e, t, r) {
                Me(e, t, r), ai(e, e.sel, e.cm ? e.cm.curOp.id : NaN, r)
            }

            function Me(e, t, r) {
                (ki(e, "beforeSelectionChange") || e.cm && ki(e.cm, "beforeSelectionChange")) && (t = Ce(e, t));
                var n = r && r.bias || (Wo(t.primary().head, e.sel.primary().head) < 0 ? -1 : 1);
                Te(e, Ne(e, t, n, !0)), r && r.scroll === !1 || !e.cm || zr(e.cm)
            }

            function Te(e, t) {
                t.equals(e.sel) || (e.sel = t, e.cm && (e.cm.curOp.updateInput = e.cm.curOp.selectionChanged = !0, wi(e.cm)), yi(e, "cursorActivity", e))
            }

            function Ae(e) {
                Te(e, Ne(e, e.sel, null, !1), Aa)
            }

            function Ne(e, t, r, n) {
                for (var i, o = 0; o < t.ranges.length; o++) {
                    var a = t.ranges[o],
                        l = Oe(e, a.anchor, r, n),
                        s = Oe(e, a.head, r, n);
                    (i || l != a.anchor || s != a.head) && (i || (i = t.ranges.slice(0, o)), i[o] = new ue(l, s))
                }
                return i ? fe(i, t.primIndex) : t
            }

            function Oe(e, t, r, n) {
                var i = !1,
                    o = t,
                    a = r || 1;
                e.cantEdit = !1;
                e: for (;;) {
                    var l = Kn(e, o.line);
                    if (l.markedSpans)
                        for (var s = 0; s < l.markedSpans.length; ++s) {
                            var c = l.markedSpans[s],
                                u = c.marker;
                            if ((null == c.from || (u.inclusiveLeft ? c.from <= o.ch : c.from < o.ch)) && (null == c.to || (u.inclusiveRight ? c.to >= o.ch : c.to > o.ch))) {
                                if (n && (Sa(u, "beforeCursorEnter"), u.explicitlyCleared)) {
                                    if (l.markedSpans) {
                                        --s;
                                        continue
                                    }
                                    break
                                }
                                if (!u.atomic) continue;
                                var f = u.find(0 > a ? -1 : 1);
                                if (0 == Wo(f, o) && (f.ch += a, f.ch < 0 ? f = f.line > e.first ? pe(e, Oo(f.line - 1)) : null : f.ch > l.text.length && (f = f.line < e.first + e.size - 1 ? Oo(f.line + 1, 0) : null), !f)) {
                                    if (i) return n ? (e.cantEdit = !0, Oo(e.first, 0)) : Oe(e, t, r, !0);
                                    i = !0, f = t, a = -a
                                }
                                o = f;
                                continue e
                            }
                        }
                    return o
                }
            }

            function We(e) {
                e.display.input.showSelection(e.display.input.prepareSelection())
            }

            function ze(e, t) {
                for (var r = e.doc, n = {}, i = n.cursors = document.createDocumentFragment(), o = n.selection = document.createDocumentFragment(), a = 0; a < r.sel.ranges.length; a++)
                    if (t !== !1 || a != r.sel.primIndex) {
                        var l = r.sel.ranges[a],
                            s = l.empty();
                        (s || e.options.showCursorWhenSelecting) && Pe(e, l, i), s || Ie(e, l, o)
                    }
                return n
            }

            function Pe(e, t, r) {
                var n = ut(e, t.head, "div", null, null, !e.options.singleCursorHeightPerLine),
                    i = r.appendChild(Ei("div", "", "CodeMirror-cursor"));
                if (i.style.left = n.left + "px", i.style.top = n.top + "px", i.style.height = Math.max(0, n.bottom - n.top) * e.options.cursorHeight + "px", n.other) {
                    var o = r.appendChild(Ei("div", "", "CodeMirror-cursor CodeMirror-secondarycursor"));
                    o.style.display = "", o.style.left = n.other.left + "px", o.style.top = n.other.top + "px", o.style.height = .85 * (n.other.bottom - n.other.top) + "px"
                }
            }

            function Ie(e, t, r) {
                function n(e, t, r, n) {
                    0 > t && (t = 0), t = Math.round(t), n = Math.round(n), l.appendChild(Ei("div", null, "CodeMirror-selected", "position: absolute; left: " + e + "px; top: " + t + "px; width: " + (null == r ? u - e : r) + "px; height: " + (n - t) + "px"))
                }

                function i(t, r, i) {
                    function o(r, n) {
                        return ct(e, Oo(t, r), "div", f, n)
                    }
                    var l, s, f = Kn(a, t),
                        d = f.text.length;
                    return Xi(Jn(f), r || 0, null == i ? d : i, function(e, t, a) {
                        var f, h, p, g = o(e, "left");
                        if (e == t) f = g, h = p = g.left;
                        else {
                            if (f = o(t - 1, "right"), "rtl" == a) {
                                var m = g;
                                g = f, f = m
                            }
                            h = g.left, p = f.right
                        }
                        null == r && 0 == e && (h = c), f.top - g.top > 3 && (n(h, g.top, null, g.bottom), h = c, g.bottom < f.top && n(h, g.bottom, null, f.top)), null == i && t == d && (p = u), (!l || g.top < l.top || g.top == l.top && g.left < l.left) && (l = g), (!s || f.bottom > s.bottom || f.bottom == s.bottom && f.right > s.right) && (s = f), c + 1 > h && (h = c), n(h, f.top, p - h, f.bottom)
                    }), {
                        start: l,
                        end: s
                    }
                }
                var o = e.display,
                    a = e.doc,
                    l = document.createDocumentFragment(),
                    s = Ve(e.display),
                    c = s.left,
                    u = Math.max(o.sizerWidth, Ge(e) - o.sizer.offsetLeft) - s.right,
                    f = t.from(),
                    d = t.to();
                if (f.line == d.line) i(f.line, f.ch, d.ch);
                else {
                    var h = Kn(a, f.line),
                        p = Kn(a, d.line),
                        g = hn(h) == hn(p),
                        m = i(f.line, f.ch, g ? h.text.length + 1 : null).end,
                        v = i(d.line, g ? 0 : null, d.ch).start;
                    g && (m.top < v.top - 2 ? (n(m.right, m.top, null, m.bottom), n(c, v.top, v.left, v.bottom)) : n(m.right, m.top, v.left - m.right, m.bottom)), m.bottom < v.top && n(c, m.bottom, null, v.top)
                }
                r.appendChild(l)
            }

            function De(e) {
                if (e.state.focused) {
                    var t = e.display;
                    clearInterval(t.blinker);
                    var r = !0;
                    t.cursorDiv.style.visibility = "", e.options.cursorBlinkRate > 0 ? t.blinker = setInterval(function() {
                        t.cursorDiv.style.visibility = (r = !r) ? "" : "hidden"
                    }, e.options.cursorBlinkRate) : e.options.cursorBlinkRate < 0 && (t.cursorDiv.style.visibility = "hidden")
                }
            }

            function He(e, t) {
                e.doc.mode.startState && e.doc.frontier < e.display.viewTo && e.state.highlight.set(t, Pi(Ee, e))
            }

            function Ee(e) {
                var t = e.doc;
                if (t.frontier < t.first && (t.frontier = t.first), !(t.frontier >= e.display.viewTo)) {
                    var r = +new Date + e.options.workTime,
                        n = ea(t.mode, je(e, t.frontier)),
                        i = [];
                    t.iter(t.frontier, Math.min(t.first + t.size, e.display.viewTo + 500), function(o) {
                        if (t.frontier >= e.display.viewFrom) {
                            var a = o.styles,
                                l = Nn(e, o, n, !0);
                            o.styles = l.styles;
                            var s = o.styleClasses,
                                c = l.classes;
                            c ? o.styleClasses = c : s && (o.styleClasses = null);
                            for (var u = !a || a.length != o.styles.length || s != c && (!s || !c || s.bgClass != c.bgClass || s.textClass != c.textClass), f = 0; !u && f < a.length; ++f) u = a[f] != o.styles[f];
                            u && i.push(t.frontier), o.stateAfter = ea(t.mode, n)
                        } else Wn(e, o.text, n), o.stateAfter = t.frontier % 5 == 0 ? ea(t.mode, n) : null;
                        return ++t.frontier, +new Date > r ? (He(e, e.options.workDelay), !0) : void 0
                    }), i.length && Mt(e, function() {
                        for (var t = 0; t < i.length; t++) Pt(e, i[t], "text")
                    })
                }
            }

            function Fe(e, t, r) {
                for (var n, i, o = e.doc, a = r ? -1 : t - (e.doc.mode.innerMode ? 1e3 : 100), l = t; l > a; --l) {
                    if (l <= o.first) return o.first;
                    var s = Kn(o, l - 1);
                    if (s.stateAfter && (!r || l <= o.frontier)) return l;
                    var c = Wa(s.text, null, e.options.tabSize);
                    (null == i || n > c) && (i = l - 1, n = c)
                }
                return i
            }

            function je(e, t, r) {
                var n = e.doc,
                    i = e.display;
                if (!n.mode.startState) return !0;
                var o = Fe(e, t, r),
                    a = o > n.first && Kn(n, o - 1).stateAfter;
                return a = a ? ea(n.mode, a) : ta(n.mode), n.iter(o, t, function(r) {
                    Wn(e, r.text, a);
                    var l = o == t - 1 || o % 5 == 0 || o >= i.viewFrom && o < i.viewTo;
                    r.stateAfter = l ? ea(n.mode, a) : null, ++o
                }), r && (n.frontier = o), a
            }

            function Re(e) {
                return e.lineSpace.offsetTop
            }

            function Be(e) {
                return e.mover.offsetHeight - e.lineSpace.offsetHeight
            }

            function Ve(e) {
                if (e.cachedPaddingH) return e.cachedPaddingH;
                var t = ji(e.measure, Ei("pre", "x")),
                    r = window.getComputedStyle ? window.getComputedStyle(t) : t.currentStyle,
                    n = {
                        left: parseInt(r.paddingLeft),
                        right: parseInt(r.paddingRight)
                    };
                return isNaN(n.left) || isNaN(n.right) || (e.cachedPaddingH = n), n
            }

            function qe(e) {
                return Ma - e.display.nativeBarWidth
            }

            function Ge(e) {
                return e.display.scroller.clientWidth - qe(e) - e.display.barWidth
            }

            function Ue(e) {
                return e.display.scroller.clientHeight - qe(e) - e.display.barHeight
            }

            function Ke(e, t, r) {
                var n = e.options.lineWrapping,
                    i = n && Ge(e);
                if (!t.measure.heights || n && t.measure.width != i) {
                    var o = t.measure.heights = [];
                    if (n) {
                        t.measure.width = i;
                        for (var a = t.text.firstChild.getClientRects(), l = 0; l < a.length - 1; l++) {
                            var s = a[l],
                                c = a[l + 1];
                            Math.abs(s.bottom - c.bottom) > 2 && o.push((s.bottom + c.top) / 2 - r.top)
                        }
                    }
                    o.push(r.bottom - r.top)
                }
            }

            function _e(e, t, r) {
                if (e.line == t) return {
                    map: e.measure.map,
                    cache: e.measure.cache
                };
                for (var n = 0; n < e.rest.length; n++)
                    if (e.rest[n] == t) return {
                        map: e.measure.maps[n],
                        cache: e.measure.caches[n]
                    };
                for (var n = 0; n < e.rest.length; n++)
                    if (Yn(e.rest[n]) > r) return {
                        map: e.measure.maps[n],
                        cache: e.measure.caches[n],
                        before: !0
                    }
            }

            function $e(e, t) {
                t = hn(t);
                var r = Yn(t),
                    n = e.display.externalMeasured = new Ot(e.doc, t, r);
                n.lineN = r;
                var i = n.built = Pn(e, n);
                return n.text = i.pre, ji(e.display.lineMeasure, i.pre), n
            }

            function Xe(e, t, r, n) {
                return Qe(e, Ze(e, t), r, n)
            }

            function Ye(e, t) {
                if (t >= e.display.viewFrom && t < e.display.viewTo) return e.display.view[Dt(e, t)];
                var r = e.display.externalMeasured;
                return r && t >= r.lineN && t < r.lineN + r.size ? r : void 0
            }

            function Ze(e, t) {
                var r = Yn(t),
                    n = Ye(e, r);
                n && !n.text ? n = null : n && n.changes && D(e, n, r, P(e)), n || (n = $e(e, t));
                var i = _e(n, t, r);
                return {
                    line: t,
                    view: n,
                    rect: null,
                    map: i.map,
                    cache: i.cache,
                    before: i.before,
                    hasHeights: !1
                }
            }

            function Qe(e, t, r, n, i) {
                t.before && (r = -1);
                var o, a = r + (n || "");
                return t.cache.hasOwnProperty(a) ? o = t.cache[a] : (t.rect || (t.rect = t.view.text.getBoundingClientRect()), t.hasHeights || (Ke(e, t.view, t.rect), t.hasHeights = !0), o = et(e, t, r, n), o.bogus || (t.cache[a] = o)), {
                    left: o.left,
                    right: o.right,
                    top: i ? o.rtop : o.top,
                    bottom: i ? o.rbottom : o.bottom
                }
            }

            function Je(e, t, r) {
                for (var n, i, o, a, l = 0; l < e.length; l += 3) {
                    var s = e[l],
                        c = e[l + 1];
                    if (s > t ? (i = 0, o = 1, a = "left") : c > t ? (i = t - s, o = i + 1) : (l == e.length - 3 || t == c && e[l + 3] > t) && (o = c - s, i = o - 1, t >= c && (a = "right")), null != i) {
                        if (n = e[l + 2], s == c && r == (n.insertLeft ? "left" : "right") && (a = r), "left" == r && 0 == i)
                            for (; l && e[l - 2] == e[l - 3] && e[l - 1].insertLeft;) n = e[(l -= 3) + 2], a = "left";
                        if ("right" == r && i == c - s)
                            for (; l < e.length - 3 && e[l + 3] == e[l + 4] && !e[l + 5].insertLeft;) n = e[(l += 3) + 2], a = "right";
                        break
                    }
                }
                return {
                    node: n,
                    start: i,
                    end: o,
                    collapse: a,
                    coverStart: s,
                    coverEnd: c
                }
            }

            function et(e, t, r, n) {
                var i, o = Je(t.map, r, n),
                    a = o.node,
                    l = o.start,
                    s = o.end,
                    c = o.collapse;
                if (3 == a.nodeType) {
                    for (var u = 0; 4 > u; u++) {
                        for (; l && Hi(t.line.text.charAt(o.coverStart + l));) --l;
                        for (; o.coverStart + s < o.coverEnd && Hi(t.line.text.charAt(o.coverStart + s));) ++s;
                        if (fo && 9 > ho && 0 == l && s == o.coverEnd - o.coverStart) i = a.parentNode.getBoundingClientRect();
                        else if (fo && e.options.lineWrapping) {
                            var f = Ia(a, l, s).getClientRects();
                            i = f.length ? f["right" == n ? f.length - 1 : 0] : Ho
                        } else i = Ia(a, l, s).getBoundingClientRect() || Ho;
                        if (i.left || i.right || 0 == l) break;
                        s = l, l -= 1, c = "right"
                    }
                    fo && 11 > ho && (i = tt(e.display.measure, i))
                } else {
                    l > 0 && (c = n = "right");
                    var f;
                    i = e.options.lineWrapping && (f = a.getClientRects()).length > 1 ? f["right" == n ? f.length - 1 : 0] : a.getBoundingClientRect()
                }
                if (fo && 9 > ho && !l && (!i || !i.left && !i.right)) {
                    var d = a.parentNode.getClientRects()[0];
                    i = d ? {
                        left: d.left,
                        right: d.left + mt(e.display),
                        top: d.top,
                        bottom: d.bottom
                    } : Ho
                }
                for (var h = i.top - t.rect.top, p = i.bottom - t.rect.top, g = (h + p) / 2, m = t.view.measure.heights, u = 0; u < m.length - 1 && !(g < m[u]); u++);
                var v = u ? m[u - 1] : 0,
                    y = m[u],
                    b = {
                        left: ("right" == c ? i.right : i.left) - t.rect.left,
                        right: ("left" == c ? i.left : i.right) - t.rect.left,
                        top: v,
                        bottom: y
                    };
                return i.left || i.right || (b.bogus = !0), e.options.singleCursorHeightPerLine || (b.rtop = h, b.rbottom = p), b
            }

            function tt(e, t) {
                if (!window.screen || null == screen.logicalXDPI || screen.logicalXDPI == screen.deviceXDPI || !$i(e)) return t;
                var r = screen.logicalXDPI / screen.deviceXDPI,
                    n = screen.logicalYDPI / screen.deviceYDPI;
                return {
                    left: t.left * r,
                    right: t.right * r,
                    top: t.top * n,
                    bottom: t.bottom * n
                }
            }

            function rt(e) {
                if (e.measure && (e.measure.cache = {}, e.measure.heights = null, e.rest))
                    for (var t = 0; t < e.rest.length; t++) e.measure.caches[t] = {}
            }

            function nt(e) {
                e.display.externalMeasure = null, Fi(e.display.lineMeasure);
                for (var t = 0; t < e.display.view.length; t++) rt(e.display.view[t])
            }

            function it(e) {
                nt(e), e.display.cachedCharWidth = e.display.cachedTextHeight = e.display.cachedPaddingH = null, e.options.lineWrapping || (e.display.maxLineChanged = !0), e.display.lineNumChars = null
            }

            function ot() {
                return window.pageXOffset || (document.documentElement || document.body).scrollLeft
            }

            function at() {
                return window.pageYOffset || (document.documentElement || document.body).scrollTop
            }

            function lt(e, t, r, n) {
                if (t.widgets)
                    for (var i = 0; i < t.widgets.length; ++i)
                        if (t.widgets[i].above) {
                            var o = xn(t.widgets[i]);
                            r.top += o, r.bottom += o
                        }
                if ("line" == n) return r;
                n || (n = "local");
                var a = Qn(t);
                if ("local" == n ? a += Re(e.display) : a -= e.display.viewOffset, "page" == n || "window" == n) {
                    var l = e.display.lineSpace.getBoundingClientRect();
                    a += l.top + ("window" == n ? 0 : at());
                    var s = l.left + ("window" == n ? 0 : ot());
                    r.left += s, r.right += s
                }
                return r.top += a, r.bottom += a, r
            }

            function st(e, t, r) {
                if ("div" == r) return t;
                var n = t.left,
                    i = t.top;
                if ("page" == r) n -= ot(), i -= at();
                else if ("local" == r || !r) {
                    var o = e.display.sizer.getBoundingClientRect();
                    n += o.left, i += o.top
                }
                var a = e.display.lineSpace.getBoundingClientRect();
                return {
                    left: n - a.left,
                    top: i - a.top
                }
            }

            function ct(e, t, r, n, i) {
                return n || (n = Kn(e.doc, t.line)), lt(e, n, Xe(e, n, t.ch, i), r)
            }

            function ut(e, t, r, n, i, o) {
                function a(t, a) {
                    var l = Qe(e, i, t, a ? "right" : "left", o);
                    return a ? l.left = l.right : l.right = l.left, lt(e, n, l, r)
                }

                function l(e, t) {
                    var r = s[t],
                        n = r.level % 2;
                    return e == Yi(r) && t && r.level < s[t - 1].level ? (r = s[--t], e = Zi(r) - (r.level % 2 ? 0 : 1), n = !0) : e == Zi(r) && t < s.length - 1 && r.level < s[t + 1].level && (r = s[++t], e = Yi(r) - r.level % 2, n = !1), n && e == r.to && e > r.from ? a(e - 1) : a(e, n)
                }
                n = n || Kn(e.doc, t.line), i || (i = Ze(e, n));
                var s = Jn(n),
                    c = t.ch;
                if (!s) return a(c);
                var u = io(s, c),
                    f = l(c, u);
                return null != Ya && (f.other = l(c, Ya)), f
            }

            function ft(e, t) {
                var r = 0,
                    t = pe(e.doc, t);
                e.options.lineWrapping || (r = mt(e.display) * t.ch);
                var n = Kn(e.doc, t.line),
                    i = Qn(n) + Re(e.display);
                return {
                    left: r,
                    right: r,
                    top: i,
                    bottom: i + n.height
                }
            }

            function dt(e, t, r, n) {
                var i = Oo(e, t);
                return i.xRel = n, r && (i.outside = !0), i
            }

            function ht(e, t, r) {
                var n = e.doc;
                if (r += e.display.viewOffset, 0 > r) return dt(n.first, 0, !0, -1);
                var i = Zn(n, r),
                    o = n.first + n.size - 1;
                if (i > o) return dt(n.first + n.size - 1, Kn(n, o).text.length, !0, 1);
                0 > t && (t = 0);
                for (var a = Kn(n, i);;) {
                    var l = pt(e, a, i, t, r),
                        s = fn(a),
                        c = s && s.find(0, !0);
                    if (!s || !(l.ch > c.from.ch || l.ch == c.from.ch && l.xRel > 0)) return l;
                    i = Yn(a = c.to.line)
                }
            }

            function pt(e, t, r, n, i) {
                function o(n) {
                    var i = ut(e, Oo(r, n), "line", t, c);
                    return l = !0, a > i.bottom ? i.left - s : a < i.top ? i.left + s : (l = !1, i.left)
                }
                var a = i - Qn(t),
                    l = !1,
                    s = 2 * e.display.wrapper.clientWidth,
                    c = Ze(e, t),
                    u = Jn(t),
                    f = t.text.length,
                    d = Qi(t),
                    h = Ji(t),
                    p = o(d),
                    g = l,
                    m = o(h),
                    v = l;
                if (n > m) return dt(r, h, v, 1);
                for (;;) {
                    if (u ? h == d || h == ao(t, d, 1) : 1 >= h - d) {
                        for (var y = p > n || m - n >= n - p ? d : h, b = n - (y == d ? p : m); Hi(t.text.charAt(y));) ++y;
                        var x = dt(r, y, y == d ? g : v, -1 > b ? -1 : b > 1 ? 1 : 0);
                        return x
                    }
                    var w = Math.ceil(f / 2),
                        k = d + w;
                    if (u) {
                        k = d;
                        for (var C = 0; w > C; ++C) k = ao(t, k, 1)
                    }
                    var S = o(k);
                    S > n ? (h = k, m = S, (v = l) && (m += 1e3), f = w) : (d = k, p = S, g = l, f -= w)
                }
            }

            function gt(e) {
                if (null != e.cachedTextHeight) return e.cachedTextHeight;
                if (null == Po) {
                    Po = Ei("pre");
                    for (var t = 0; 49 > t; ++t) Po.appendChild(document.createTextNode("x")), Po.appendChild(Ei("br"));
                    Po.appendChild(document.createTextNode("x"))
                }
                ji(e.measure, Po);
                var r = Po.offsetHeight / 50;
                return r > 3 && (e.cachedTextHeight = r), Fi(e.measure), r || 1
            }

            function mt(e) {
                if (null != e.cachedCharWidth) return e.cachedCharWidth;
                var t = Ei("span", "xxxxxxxxxx"),
                    r = Ei("pre", [t]);
                ji(e.measure, r);
                var n = t.getBoundingClientRect(),
                    i = (n.right - n.left) / 10;
                return i > 2 && (e.cachedCharWidth = i), i || 10
            }

            function vt(e) {
                e.curOp = {
                    cm: e,
                    viewChanged: !1,
                    startHeight: e.doc.height,
                    forceUpdate: !1,
                    updateInput: null,
                    typing: !1,
                    changeObjs: null,
                    cursorActivityHandlers: null,
                    cursorActivityCalled: 0,
                    selectionChanged: !1,
                    updateMaxLine: !1,
                    scrollLeft: null,
                    scrollTop: null,
                    scrollToPos: null,
                    focus: !1,
                    id: ++Fo
                }, Eo ? Eo.ops.push(e.curOp) : e.curOp.ownsGroup = Eo = {
                    ops: [e.curOp],
                    delayedCallbacks: []
                }
            }

            function yt(e) {
                var t = e.delayedCallbacks,
                    r = 0;
                do {
                    for (; r < t.length; r++) t[r]();
                    for (var n = 0; n < e.ops.length; n++) {
                        var i = e.ops[n];
                        if (i.cursorActivityHandlers)
                            for (; i.cursorActivityCalled < i.cursorActivityHandlers.length;) i.cursorActivityHandlers[i.cursorActivityCalled++](i.cm)
                    }
                } while (r < t.length)
            }

            function bt(e) {
                var t = e.curOp,
                    r = t.ownsGroup;
                if (r) try {
                    yt(r)
                } finally {
                    Eo = null;
                    for (var n = 0; n < r.ops.length; n++) r.ops[n].cm.curOp = null;
                    xt(r)
                }
            }

            function xt(e) {
                for (var t = e.ops, r = 0; r < t.length; r++) wt(t[r]);
                for (var r = 0; r < t.length; r++) kt(t[r]);
                for (var r = 0; r < t.length; r++) Ct(t[r]);
                for (var r = 0; r < t.length; r++) St(t[r]);
                for (var r = 0; r < t.length; r++) Lt(t[r])
            }

            function wt(e) {
                var t = e.cm,
                    r = t.display;
                M(t), e.updateMaxLine && d(t), e.mustUpdate = e.viewChanged || e.forceUpdate || null != e.scrollTop || e.scrollToPos && (e.scrollToPos.from.line < r.viewFrom || e.scrollToPos.to.line >= r.viewTo) || r.maxLineChanged && t.options.lineWrapping, e.update = e.mustUpdate && new L(t, e.mustUpdate && {
                    top: e.scrollTop,
                    ensure: e.scrollToPos
                }, e.forceUpdate)
            }

            function kt(e) {
                e.updatedDisplay = e.mustUpdate && T(e.cm, e.update)
            }

            function Ct(e) {
                var t = e.cm,
                    r = t.display;
                e.updatedDisplay && W(t), e.barMeasure = p(t), r.maxLineChanged && !t.options.lineWrapping && (e.adjustWidthTo = Xe(t, r.maxLine, r.maxLine.text.length).left + 3, t.display.sizerWidth = e.adjustWidthTo, e.barMeasure.scrollWidth = Math.max(r.scroller.clientWidth, r.sizer.offsetLeft + e.adjustWidthTo + qe(t) + t.display.barWidth), e.maxScrollLeft = Math.max(0, r.sizer.offsetLeft + e.adjustWidthTo - Ge(t))), (e.updatedDisplay || e.selectionChanged) && (e.preparedSelection = r.input.prepareSelection())
            }

            function St(e) {
                var t = e.cm;
                null != e.adjustWidthTo && (t.display.sizer.style.minWidth = e.adjustWidthTo + "px", e.maxScrollLeft < t.doc.scrollLeft && Jt(t, Math.min(t.display.scroller.scrollLeft, e.maxScrollLeft), !0), t.display.maxLineChanged = !1), e.preparedSelection && t.display.input.showSelection(e.preparedSelection), e.updatedDisplay && O(t, e.barMeasure), (e.updatedDisplay || e.startHeight != t.doc.height) && y(t, e.barMeasure), e.selectionChanged && De(t), t.state.focused && e.updateInput && t.display.input.reset(e.typing), e.focus && e.focus == Ri() && Y(e.cm)
            }

            function Lt(e) {
                var t = e.cm,
                    r = t.display,
                    n = t.doc;
                if (e.updatedDisplay && A(t, e.update), null == r.wheelStartX || null == e.scrollTop && null == e.scrollLeft && !e.scrollToPos || (r.wheelStartX = r.wheelStartY = null), null == e.scrollTop || r.scroller.scrollTop == e.scrollTop && !e.forceScroll || (n.scrollTop = Math.max(0, Math.min(r.scroller.scrollHeight - r.scroller.clientHeight, e.scrollTop)), r.scrollbars.setScrollTop(n.scrollTop), r.scroller.scrollTop = n.scrollTop), null == e.scrollLeft || r.scroller.scrollLeft == e.scrollLeft && !e.forceScroll || (n.scrollLeft = Math.max(0, Math.min(r.scroller.scrollWidth - Ge(t), e.scrollLeft)), r.scrollbars.setScrollLeft(n.scrollLeft), r.scroller.scrollLeft = n.scrollLeft, w(t)), e.scrollToPos) {
                    var i = Ar(t, pe(n, e.scrollToPos.from), pe(n, e.scrollToPos.to), e.scrollToPos.margin);
                    e.scrollToPos.isCursor && t.state.focused && Tr(t, i)
                }
                var o = e.maybeHiddenMarkers,
                    a = e.maybeUnhiddenMarkers;
                if (o)
                    for (var l = 0; l < o.length; ++l) o[l].lines.length || Sa(o[l], "hide");
                if (a)
                    for (var l = 0; l < a.length; ++l) a[l].lines.length && Sa(a[l], "unhide");
                r.wrapper.offsetHeight && (n.scrollTop = t.display.scroller.scrollTop), e.changeObjs && Sa(t, "changes", t, e.changeObjs), e.update && e.update.finish()
            }

            function Mt(e, t) {
                if (e.curOp) return t();
                vt(e);
                try {
                    return t()
                } finally {
                    bt(e)
                }
            }

            function Tt(e, t) {
                return function() {
                    if (e.curOp) return t.apply(e, arguments);
                    vt(e);
                    try {
                        return t.apply(e, arguments)
                    } finally {
                        bt(e)
                    }
                }
            }

            function At(e) {
                return function() {
                    if (this.curOp) return e.apply(this, arguments);
                    vt(this);
                    try {
                        return e.apply(this, arguments)
                    } finally {
                        bt(this)
                    }
                }
            }

            function Nt(e) {
                return function() {
                    var t = this.cm;
                    if (!t || t.curOp) return e.apply(this, arguments);
                    vt(t);
                    try {
                        return e.apply(this, arguments)
                    } finally {
                        bt(t)
                    }
                }
            }

            function Ot(e, t, r) {
                this.line = t, this.rest = pn(t), this.size = this.rest ? Yn(Ti(this.rest)) - r + 1 : 1, this.node = this.text = null, this.hidden = vn(e, t)
            }

            function Wt(e, t, r) {
                for (var n, i = [], o = t; r > o; o = n) {
                    var a = new Ot(e.doc, Kn(e.doc, o), o);
                    n = o + a.size, i.push(a)
                }
                return i
            }

            function zt(e, t, r, n) {
                null == t && (t = e.doc.first), null == r && (r = e.doc.first + e.doc.size), n || (n = 0);
                var i = e.display;
                if (n && r < i.viewTo && (null == i.updateLineNumbers || i.updateLineNumbers > t) && (i.updateLineNumbers = t), e.curOp.viewChanged = !0, t >= i.viewTo) No && gn(e.doc, t) < i.viewTo && It(e);
                else if (r <= i.viewFrom) No && mn(e.doc, r + n) > i.viewFrom ? It(e) : (i.viewFrom += n, i.viewTo += n);
                else if (t <= i.viewFrom && r >= i.viewTo) It(e);
                else if (t <= i.viewFrom) {
                    var o = Ht(e, r, r + n, 1);
                    o ? (i.view = i.view.slice(o.index), i.viewFrom = o.lineN, i.viewTo += n) : It(e)
                } else if (r >= i.viewTo) {
                    var o = Ht(e, t, t, -1);
                    o ? (i.view = i.view.slice(0, o.index), i.viewTo = o.lineN) : It(e)
                } else {
                    var a = Ht(e, t, t, -1),
                        l = Ht(e, r, r + n, 1);
                    a && l ? (i.view = i.view.slice(0, a.index).concat(Wt(e, a.lineN, l.lineN)).concat(i.view.slice(l.index)), i.viewTo += n) : It(e)
                }
                var s = i.externalMeasured;
                s && (r < s.lineN ? s.lineN += n : t < s.lineN + s.size && (i.externalMeasured = null))
            }

            function Pt(e, t, r) {
                e.curOp.viewChanged = !0;
                var n = e.display,
                    i = e.display.externalMeasured;
                if (i && t >= i.lineN && t < i.lineN + i.size && (n.externalMeasured = null), !(t < n.viewFrom || t >= n.viewTo)) {
                    var o = n.view[Dt(e, t)];
                    if (null != o.node) {
                        var a = o.changes || (o.changes = []); - 1 == Ai(a, r) && a.push(r)
                    }
                }
            }

            function It(e) {
                e.display.viewFrom = e.display.viewTo = e.doc.first, e.display.view = [], e.display.viewOffset = 0
            }

            function Dt(e, t) {
                if (t >= e.display.viewTo) return null;
                if (t -= e.display.viewFrom, 0 > t) return null;
                for (var r = e.display.view, n = 0; n < r.length; n++)
                    if (t -= r[n].size, 0 > t) return n
            }

            function Ht(e, t, r, n) {
                var i, o = Dt(e, t),
                    a = e.display.view;
                if (!No || r == e.doc.first + e.doc.size) return {
                    index: o,
                    lineN: r
                };
                for (var l = 0, s = e.display.viewFrom; o > l; l++) s += a[l].size;
                if (s != t) {
                    if (n > 0) {
                        if (o == a.length - 1) return null;
                        i = s + a[o].size - t, o++
                    } else i = s - t;
                    t += i, r += i
                }
                for (; gn(e.doc, r) != r;) {
                    if (o == (0 > n ? 0 : a.length - 1)) return null;
                    r += n * a[o - (0 > n ? 1 : 0)].size, o += n
                }
                return {
                    index: o,
                    lineN: r
                }
            }

            function Et(e, t, r) {
                var n = e.display,
                    i = n.view;
                0 == i.length || t >= n.viewTo || r <= n.viewFrom ? (n.view = Wt(e, t, r), n.viewFrom = t) : (n.viewFrom > t ? n.view = Wt(e, t, n.viewFrom).concat(n.view) : n.viewFrom < t && (n.view = n.view.slice(Dt(e, t))), n.viewFrom = t, n.viewTo < r ? n.view = n.view.concat(Wt(e, n.viewTo, r)) : n.viewTo > r && (n.view = n.view.slice(0, Dt(e, r)))), n.viewTo = r
            }

            function Ft(e) {
                for (var t = e.display.view, r = 0, n = 0; n < t.length; n++) {
                    var i = t[n];
                    i.hidden || i.node && !i.changes || ++r
                }
                return r
            }

            function jt(e) {
                function t() {
                    i.activeTouch && (o = setTimeout(function() {
                        i.activeTouch = null
                    }, 1e3), a = i.activeTouch, a.end = +new Date)
                }

                function r(e) {
                    if (1 != e.touches.length) return !1;
                    var t = e.touches[0];
                    return t.radiusX <= 1 && t.radiusY <= 1
                }

                function n(e, t) {
                    if (null == t.left) return !0;
                    var r = t.left - e.left,
                        n = t.top - e.top;
                    return r * r + n * n > 400
                }
                var i = e.display;
                ka(i.scroller, "mousedown", Tt(e, Gt)), fo && 11 > ho ? ka(i.scroller, "dblclick", Tt(e, function(t) {
                    if (!xi(e, t)) {
                        var r = qt(e, t);
                        if (r && !Xt(e, t) && !Vt(e.display, t)) {
                            ba(t);
                            var n = e.findWordAt(r);
                            be(e.doc, n.anchor, n.head)
                        }
                    }
                })) : ka(i.scroller, "dblclick", function(t) {
                    xi(e, t) || ba(t)
                }), To || ka(i.scroller, "contextmenu", function(t) {
                    hr(e, t)
                });
                var o, a = {
                    end: 0
                };
                ka(i.scroller, "touchstart", function(e) {
                    if (!r(e)) {
                        clearTimeout(o);
                        var t = +new Date;
                        i.activeTouch = {
                            start: t,
                            moved: !1,
                            prev: t - a.end <= 300 ? a : null
                        }, 1 == e.touches.length && (i.activeTouch.left = e.touches[0].pageX, i.activeTouch.top = e.touches[0].pageY)
                    }
                }), ka(i.scroller, "touchmove", function() {
                    i.activeTouch && (i.activeTouch.moved = !0)
                }), ka(i.scroller, "touchend", function(r) {
                    var o = i.activeTouch;
                    if (o && !Vt(i, r) && null != o.left && !o.moved && new Date - o.start < 300) {
                        var a, l = e.coordsChar(i.activeTouch, "page");
                        a = !o.prev || n(o, o.prev) ? new ue(l, l) : !o.prev.prev || n(o, o.prev.prev) ? e.findWordAt(l) : new ue(Oo(l.line, 0), pe(e.doc, Oo(l.line + 1, 0))), e.setSelection(a.anchor, a.head), e.focus(), ba(r)
                    }
                    t()
                }), ka(i.scroller, "touchcancel", t), ka(i.scroller, "scroll", function() {
                    i.scroller.clientHeight && (Qt(e, i.scroller.scrollTop), Jt(e, i.scroller.scrollLeft, !0), Sa(e, "scroll", e))
                }), ka(i.scroller, "mousewheel", function(t) {
                    er(e, t)
                }), ka(i.scroller, "DOMMouseScroll", function(t) {
                    er(e, t)
                }), ka(i.wrapper, "scroll", function() {
                    i.wrapper.scrollTop = i.wrapper.scrollLeft = 0
                }), i.dragFunctions = {
                    simple: function(t) {
                        xi(e, t) || wa(t)
                    },
                    start: function(t) {
                        Zt(e, t)
                    },
                    drop: Tt(e, Yt)
                };
                var l = i.input.getField();
                ka(l, "keyup", function(t) {
                    sr.call(e, t)
                }), ka(l, "keydown", Tt(e, ar)), ka(l, "keypress", Tt(e, cr)), ka(l, "focus", Pi(fr, e)), ka(l, "blur", Pi(dr, e))
            }

            function Rt(t, r, n) {
                var i = n && n != e.Init;
                if (!r != !i) {
                    var o = t.display.dragFunctions,
                        a = r ? ka : Ca;
                    a(t.display.scroller, "dragstart", o.start), a(t.display.scroller, "dragenter", o.simple), a(t.display.scroller, "dragover", o.simple), a(t.display.scroller, "drop", o.drop)
                }
            }

            function Bt(e) {
                var t = e.display;
                (t.lastWrapHeight != t.wrapper.clientHeight || t.lastWrapWidth != t.wrapper.clientWidth) && (t.cachedCharWidth = t.cachedTextHeight = t.cachedPaddingH = null, t.scrollbarsClipped = !1, e.setSize())
            }

            function Vt(e, t) {
                for (var r = mi(t); r != e.wrapper; r = r.parentNode)
                    if (!r || 1 == r.nodeType && "true" == r.getAttribute("cm-ignore-events") || r.parentNode == e.sizer && r != e.mover) return !0
            }

            function qt(e, t, r, n) {
                var i = e.display;
                if (!r && "true" == mi(t).getAttribute("cm-not-content")) return null;
                var o, a, l = i.lineSpace.getBoundingClientRect();
                try {
                    o = t.clientX - l.left, a = t.clientY - l.top
                } catch (t) {
                    return null
                }
                var s, c = ht(e, o, a);
                if (n && 1 == c.xRel && (s = Kn(e.doc, c.line).text).length == c.ch) {
                    var u = Wa(s, s.length, e.options.tabSize) - s.length;
                    c = Oo(c.line, Math.max(0, Math.round((o - Ve(e.display).left) / mt(e.display)) - u))
                }
                return c
            }

            function Gt(e) {
                var t = this,
                    r = t.display;
                if (!(r.activeTouch && r.input.supportsTouch() || xi(t, e))) {
                    if (r.shift = e.shiftKey, Vt(r, e)) return void(po || (r.scroller.draggable = !1, setTimeout(function() {
                        r.scroller.draggable = !0
                    }, 100)));
                    if (!Xt(t, e)) {
                        var n = qt(t, e);
                        switch (window.focus(), vi(e)) {
                            case 1:
                                n ? Ut(t, e, n) : mi(e) == r.scroller && ba(e);
                                break;
                            case 2:
                                po && (t.state.lastMiddleDown = +new Date), n && be(t.doc, n), setTimeout(function() {
                                    r.input.focus()
                                }, 20), ba(e);
                                break;
                            case 3:
                                To ? hr(t, e) : ur(t)
                        }
                    }
                }
            }

            function Ut(e, t, r) {
                fo ? setTimeout(Pi(Y, e), 0) : e.curOp.focus = Ri();
                var n, i = +new Date;
                Do && Do.time > i - 400 && 0 == Wo(Do.pos, r) ? n = "triple" : Io && Io.time > i - 400 && 0 == Wo(Io.pos, r) ? (n = "double", Do = {
                    time: i,
                    pos: r
                }) : (n = "single", Io = {
                    time: i,
                    pos: r
                });
                var o, a = e.doc.sel,
                    l = Co ? t.metaKey : t.ctrlKey;
                e.options.dragDrop && Ga && !Z(e) && "single" == n && (o = a.contains(r)) > -1 && !a.ranges[o].empty() ? Kt(e, t, r, l) : _t(e, t, r, n, l)
            }

            function Kt(e, t, r, n) {
                var i = e.display,
                    o = +new Date,
                    a = Tt(e, function(l) {
                        po && (i.scroller.draggable = !1), e.state.draggingText = !1, Ca(document, "mouseup", a), Ca(i.scroller, "drop", a), Math.abs(t.clientX - l.clientX) + Math.abs(t.clientY - l.clientY) < 10 && (ba(l), !n && +new Date - 200 < o && be(e.doc, r), po || fo && 9 == ho ? setTimeout(function() {
                            document.body.focus(), i.input.focus()
                        }, 20) : i.input.focus())
                    });
                po && (i.scroller.draggable = !0), e.state.draggingText = a, i.scroller.dragDrop && i.scroller.dragDrop(), ka(document, "mouseup", a), ka(i.scroller, "drop", a)
            }

            function _t(e, t, r, n, i) {
                function o(t) {
                    if (0 != Wo(m, t))
                        if (m = t, "rect" == n) {
                            for (var i = [], o = e.options.tabSize, a = Wa(Kn(c, r.line).text, r.ch, o), l = Wa(Kn(c, t.line).text, t.ch, o), s = Math.min(a, l), h = Math.max(a, l), p = Math.min(r.line, t.line), g = Math.min(e.lastLine(), Math.max(r.line, t.line)); g >= p; p++) {
                                var v = Kn(c, p).text,
                                    y = Li(v, s, o);
                                s == h ? i.push(new ue(Oo(p, y), Oo(p, y))) : v.length > y && i.push(new ue(Oo(p, y), Oo(p, Li(v, h, o))))
                            }
                            i.length || i.push(new ue(r, r)), Le(c, fe(d.ranges.slice(0, f).concat(i), f), {
                                origin: "*mouse",
                                scroll: !1
                            }), e.scrollIntoView(t)
                        } else {
                            var b = u,
                                x = b.anchor,
                                w = t;
                            if ("single" != n) {
                                if ("double" == n) var k = e.findWordAt(t);
                                else var k = new ue(Oo(t.line, 0), pe(c, Oo(t.line + 1, 0)));
                                Wo(k.anchor, x) > 0 ? (w = k.head, x = X(b.from(), k.anchor)) : (w = k.anchor, x = $(b.to(), k.head))
                            }
                            var i = d.ranges.slice(0);
                            i[f] = new ue(pe(c, x), w), Le(c, fe(i, f), Na)
                        }
                }

                function a(t) {
                    var r = ++y,
                        i = qt(e, t, !0, "rect" == n);
                    if (i)
                        if (0 != Wo(i, m)) {
                            e.curOp.focus = Ri(), o(i);
                            var l = x(s, c);
                            (i.line >= l.to || i.line < l.from) && setTimeout(Tt(e, function() {
                                y == r && a(t)
                            }), 150)
                        } else {
                            var u = t.clientY < v.top ? -20 : t.clientY > v.bottom ? 20 : 0;
                            u && setTimeout(Tt(e, function() {
                                y == r && (s.scroller.scrollTop += u, a(t))
                            }), 50)
                        }
                }

                function l(e) {
                    y = 1 / 0, ba(e), s.input.focus(), Ca(document, "mousemove", b), Ca(document, "mouseup", w), c.history.lastSelOrigin = null
                }
                var s = e.display,
                    c = e.doc;
                ba(t);
                var u, f, d = c.sel,
                    h = d.ranges;
                if (i && !t.shiftKey ? (f = c.sel.contains(r), u = f > -1 ? h[f] : new ue(r, r)) : (u = c.sel.primary(), f = c.sel.primIndex), t.altKey) n = "rect", i || (u = new ue(r, r)), r = qt(e, t, !0, !0), f = -1;
                else if ("double" == n) {
                    var p = e.findWordAt(r);
                    u = e.display.shift || c.extend ? ye(c, u, p.anchor, p.head) : p
                } else if ("triple" == n) {
                    var g = new ue(Oo(r.line, 0), pe(c, Oo(r.line + 1, 0)));
                    u = e.display.shift || c.extend ? ye(c, u, g.anchor, g.head) : g
                } else u = ye(c, u, r);
                i ? -1 == f ? (f = h.length, Le(c, fe(h.concat([u]), f), {
                    scroll: !1,
                    origin: "*mouse"
                })) : h.length > 1 && h[f].empty() && "single" == n && !t.shiftKey ? (Le(c, fe(h.slice(0, f).concat(h.slice(f + 1)), 0)), d = c.sel) : we(c, f, u, Na) : (f = 0, Le(c, new ce([u], 0), Na), d = c.sel);
                var m = r,
                    v = s.wrapper.getBoundingClientRect(),
                    y = 0,
                    b = Tt(e, function(e) {
                        vi(e) ? a(e) : l(e)
                    }),
                    w = Tt(e, l);
                ka(document, "mousemove", b), ka(document, "mouseup", w)
            }

            function $t(e, t, r, n, i) {
                try {
                    var o = t.clientX,
                        a = t.clientY
                } catch (t) {
                    return !1
                }
                if (o >= Math.floor(e.display.gutters.getBoundingClientRect().right)) return !1;
                n && ba(t);
                var l = e.display,
                    s = l.lineDiv.getBoundingClientRect();
                if (a > s.bottom || !ki(e, r)) return gi(t);
                a -= s.top - l.viewOffset;
                for (var c = 0; c < e.options.gutters.length; ++c) {
                    var u = l.gutters.childNodes[c];
                    if (u && u.getBoundingClientRect().right >= o) {
                        var f = Zn(e.doc, a),
                            d = e.options.gutters[c];
                        return i(e, r, e, f, d, t), gi(t)
                    }
                }
            }

            function Xt(e, t) {
                return $t(e, t, "gutterClick", !0, yi)
            }

            function Yt(e) {
                var t = this;
                if (!xi(t, e) && !Vt(t.display, e)) {
                    ba(e), fo && (jo = +new Date);
                    var r = qt(t, e, !0),
                        n = e.dataTransfer.files;
                    if (r && !Z(t))
                        if (n && n.length && window.FileReader && window.File)
                            for (var i = n.length, o = Array(i), a = 0, l = function(e, n) {
                                    var l = new FileReader;
                                    l.onload = Tt(t, function() {
                                        if (o[n] = l.result, ++a == i) {
                                            r = pe(t.doc, r);
                                            var e = {
                                                from: r,
                                                to: r,
                                                text: Ua(o.join("\n")),
                                                origin: "paste"
                                            };
                                            xr(t.doc, e), Se(t.doc, de(r, Uo(e)))
                                        }
                                    }), l.readAsText(e)
                                }, s = 0; i > s; ++s) l(n[s], s);
                        else {
                            if (t.state.draggingText && t.doc.sel.contains(r) > -1) return t.state.draggingText(e), void setTimeout(function() {
                                t.display.input.focus()
                            }, 20);
                            try {
                                var o = e.dataTransfer.getData("Text");
                                if (o) {
                                    if (t.state.draggingText && !(Co ? e.altKey : e.ctrlKey)) var c = t.listSelections();
                                    if (Me(t.doc, de(r, r)), c)
                                        for (var s = 0; s < c.length; ++s) Mr(t.doc, "", c[s].anchor, c[s].head, "drag");
                                    t.replaceSelection(o, "around", "paste"), t.display.input.focus()
                                }
                            } catch (e) {}
                        }
                }
            }

            function Zt(e, t) {
                if (fo && (!e.state.draggingText || +new Date - jo < 100)) return void wa(t);
                if (!xi(e, t) && !Vt(e.display, t) && (t.dataTransfer.setData("Text", e.getSelection()), t.dataTransfer.setDragImage && !yo)) {
                    var r = Ei("img", null, null, "position: fixed; left: 0; top: 0;");
                    r.src = "data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==", vo && (r.width = r.height = 1, e.display.wrapper.appendChild(r), r._top = r.offsetTop), t.dataTransfer.setDragImage(r, 0, 0), vo && r.parentNode.removeChild(r)
                }
            }

            function Qt(e, t) {
                Math.abs(e.doc.scrollTop - t) < 2 || (e.doc.scrollTop = t, so || N(e, {
                    top: t
                }), e.display.scroller.scrollTop != t && (e.display.scroller.scrollTop = t), e.display.scrollbars.setScrollTop(t), so && N(e), He(e, 100))
            }

            function Jt(e, t, r) {
                (r ? t == e.doc.scrollLeft : Math.abs(e.doc.scrollLeft - t) < 2) || (t = Math.min(t, e.display.scroller.scrollWidth - e.display.scroller.clientWidth), e.doc.scrollLeft = t, w(e), e.display.scroller.scrollLeft != t && (e.display.scroller.scrollLeft = t), e.display.scrollbars.setScrollLeft(t))
            }

            function er(e, t) {
                var r = Vo(t),
                    n = r.x,
                    i = r.y,
                    o = e.display,
                    a = o.scroller;
                if (n && a.scrollWidth > a.clientWidth || i && a.scrollHeight > a.clientHeight) {
                    if (i && Co && po) e: for (var l = t.target, s = o.view; l != a; l = l.parentNode)
                        for (var c = 0; c < s.length; c++)
                            if (s[c].node == l) {
                                e.display.currentWheelTarget = l;
                                break e
                            }
                    if (n && !so && !vo && null != Bo) return i && Qt(e, Math.max(0, Math.min(a.scrollTop + i * Bo, a.scrollHeight - a.clientHeight))), Jt(e, Math.max(0, Math.min(a.scrollLeft + n * Bo, a.scrollWidth - a.clientWidth))), ba(t), void(o.wheelStartX = null);
                    if (i && null != Bo) {
                        var u = i * Bo,
                            f = e.doc.scrollTop,
                            d = f + o.wrapper.clientHeight;
                        0 > u ? f = Math.max(0, f + u - 50) : d = Math.min(e.doc.height, d + u + 50), N(e, {
                            top: f,
                            bottom: d
                        })
                    }
                    20 > Ro && (null == o.wheelStartX ? (o.wheelStartX = a.scrollLeft, o.wheelStartY = a.scrollTop, o.wheelDX = n, o.wheelDY = i, setTimeout(function() {
                        if (null != o.wheelStartX) {
                            var e = a.scrollLeft - o.wheelStartX,
                                t = a.scrollTop - o.wheelStartY,
                                r = t && o.wheelDY && t / o.wheelDY || e && o.wheelDX && e / o.wheelDX;
                            o.wheelStartX = o.wheelStartY = null, r && (Bo = (Bo * Ro + r) / (Ro + 1), ++Ro)
                        }
                    }, 200)) : (o.wheelDX += n, o.wheelDY += i))
                }
            }

            function tr(e, t, r) {
                if ("string" == typeof t && (t = ra[t], !t)) return !1;
                e.display.input.ensurePolled();
                var n = e.display.shift,
                    i = !1;
                try {
                    Z(e) && (e.state.suppressEdits = !0), r && (e.display.shift = !1), i = t(e) != Ta
                } finally {
                    e.display.shift = n, e.state.suppressEdits = !1
                }
                return i
            }

            function rr(e, t, r) {
                for (var n = 0; n < e.state.keyMaps.length; n++) {
                    var i = ia(t, e.state.keyMaps[n], r, e);
                    if (i) return i
                }
                return e.options.extraKeys && ia(t, e.options.extraKeys, r, e) || ia(t, e.options.keyMap, r, e)
            }

            function nr(e, t, r, n) {
                var i = e.state.keySeq;
                if (i) {
                    if (oa(t)) return "handled";
                    qo.set(50, function() {
                        e.state.keySeq == i && (e.state.keySeq = null, e.display.input.reset())
                    }), t = i + " " + t
                }
                var o = rr(e, t, n);
                return "multi" == o && (e.state.keySeq = t), "handled" == o && yi(e, "keyHandled", e, t, r), ("handled" == o || "multi" == o) && (ba(r), De(e)), i && !o && /\'$/.test(t) ? (ba(r), !0) : !!o
            }

            function ir(e, t) {
                var r = aa(t, !0);
                return r ? t.shiftKey && !e.state.keySeq ? nr(e, "Shift-" + r, t, function(t) {
                    return tr(e, t, !0)
                }) || nr(e, r, t, function(t) {
                    return ("string" == typeof t ? /^go[A-Z]/.test(t) : t.motion) ? tr(e, t) : void 0
                }) : nr(e, r, t, function(t) {
                    return tr(e, t)
                }) : !1
            }

            function or(e, t, r) {
                return nr(e, "'" + r + "'", t, function(t) {
                    return tr(e, t, !0)
                })
            }

            function ar(e) {
                var t = this;
                if (t.curOp.focus = Ri(), !xi(t, e)) {
                    fo && 11 > ho && 27 == e.keyCode && (e.returnValue = !1);
                    var r = e.keyCode;
                    t.display.shift = 16 == r || e.shiftKey;
                    var n = ir(t, e);
                    vo && (Go = n ? r : null, !n && 88 == r && !_a && (Co ? e.metaKey : e.ctrlKey) && t.replaceSelection("", null, "cut")), 18 != r || /\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className) || lr(t)
                }
            }

            function lr(e) {
                function t(e) {
                    18 != e.keyCode && e.altKey || (Ba(r, "CodeMirror-crosshair"), Ca(document, "keyup", t), Ca(document, "mouseover", t))
                }
                var r = e.display.lineDiv;
                Va(r, "CodeMirror-crosshair"), ka(document, "keyup", t), ka(document, "mouseover", t)
            }

            function sr(e) {
                16 == e.keyCode && (this.doc.sel.shift = !1), xi(this, e)
            }

            function cr(e) {
                var t = this;
                if (!(Vt(t.display, e) || xi(t, e) || e.ctrlKey && !e.altKey || Co && e.metaKey)) {
                    var r = e.keyCode,
                        n = e.charCode;
                    if (vo && r == Go) return Go = null, void ba(e);
                    if (!vo || e.which && !(e.which < 10) || !ir(t, e)) {
                        var i = String.fromCharCode(null == n ? r : n);
                        or(t, e, i) || t.display.input.onKeyPress(e)
                    }
                }
            }

            function ur(e) {
                e.state.delayingBlurEvent = !0, setTimeout(function() {
                    e.state.delayingBlurEvent && (e.state.delayingBlurEvent = !1, dr(e))
                }, 100)
            }

            function fr(e) {
                e.state.delayingBlurEvent && (e.state.delayingBlurEvent = !1), "nocursor" != e.options.readOnly && (e.state.focused || (Sa(e, "focus", e), e.state.focused = !0, Va(e.display.wrapper, "CodeMirror-focused"), e.curOp || e.display.selForContextMenu == e.doc.sel || (e.display.input.reset(), po && setTimeout(function() {
                    e.display.input.reset(!0)
                }, 20)), e.display.input.receivedFocus()), De(e))
            }

            function dr(e) {
                e.state.delayingBlurEvent || (e.state.focused && (Sa(e, "blur", e), e.state.focused = !1, Ba(e.display.wrapper, "CodeMirror-focused")), clearInterval(e.display.blinker), setTimeout(function() {
                    e.state.focused || (e.display.shift = !1)
                }, 150))
            }

            function hr(e, t) {
                Vt(e.display, t) || pr(e, t) || e.display.input.onContextMenu(t)
            }

            function pr(e, t) {
                return ki(e, "gutterContextMenu") ? $t(e, t, "gutterContextMenu", !1, Sa) : !1
            }

            function gr(e, t) {
                if (Wo(e, t.from) < 0) return e;
                if (Wo(e, t.to) <= 0) return Uo(t);
                var r = e.line + t.text.length - (t.to.line - t.from.line) - 1,
                    n = e.ch;
                return e.line == t.to.line && (n += Uo(t).ch - t.to.ch), Oo(r, n)
            }

            function mr(e, t) {
                for (var r = [], n = 0; n < e.sel.ranges.length; n++) {
                    var i = e.sel.ranges[n];
                    r.push(new ue(gr(i.anchor, t), gr(i.head, t)))
                }
                return fe(r, e.sel.primIndex)
            }

            function vr(e, t, r) {
                return e.line == t.line ? Oo(r.line, e.ch - t.ch + r.ch) : Oo(r.line + (e.line - t.line), e.ch)
            }

            function yr(e, t, r) {
                for (var n = [], i = Oo(e.first, 0), o = i, a = 0; a < t.length; a++) {
                    var l = t[a],
                        s = vr(l.from, i, o),
                        c = vr(Uo(l), i, o);
                    if (i = l.to, o = c, "around" == r) {
                        var u = e.sel.ranges[a],
                            f = Wo(u.head, u.anchor) < 0;
                        n[a] = new ue(f ? c : s, f ? s : c)
                    } else n[a] = new ue(s, s)
                }
                return new ce(n, e.sel.primIndex)
            }

            function br(e, t, r) {
                var n = {
                    canceled: !1,
                    from: t.from,
                    to: t.to,
                    text: t.text,
                    origin: t.origin,
                    cancel: function() {
                        this.canceled = !0
                    }
                };
                return r && (n.update = function(t, r, n, i) {
                    t && (this.from = pe(e, t)), r && (this.to = pe(e, r)), n && (this.text = n), void 0 !== i && (this.origin = i)
                }), Sa(e, "beforeChange", e, n), e.cm && Sa(e.cm, "beforeChange", e.cm, n), n.canceled ? null : {
                    from: n.from,
                    to: n.to,
                    text: n.text,
                    origin: n.origin
                }
            }

            function xr(e, t, r) {
                if (e.cm) {
                    if (!e.cm.curOp) return Tt(e.cm, xr)(e, t, r);
                    if (e.cm.state.suppressEdits) return
                }
                if (!(ki(e, "beforeChange") || e.cm && ki(e.cm, "beforeChange")) || (t = br(e, t, !0))) {
                    var n = Ao && !r && rn(e, t.from, t.to);
                    if (n)
                        for (var i = n.length - 1; i >= 0; --i) wr(e, {
                            from: n[i].from,
                            to: n[i].to,
                            text: i ? [""] : t.text
                        });
                    else wr(e, t)
                }
            }

            function wr(e, t) {
                if (1 != t.text.length || "" != t.text[0] || 0 != Wo(t.from, t.to)) {
                    var r = mr(e, t);
                    ii(e, t, r, e.cm ? e.cm.curOp.id : NaN), Sr(e, t, r, Jr(e, t));
                    var n = [];
                    Gn(e, function(e, r) {
                        r || -1 != Ai(n, e.history) || (pi(e.history, t), n.push(e.history)), Sr(e, t, null, Jr(e, t))
                    })
                }
            }

            function kr(e, t, r) {
                if (!e.cm || !e.cm.state.suppressEdits) {
                    for (var n, i = e.history, o = e.sel, a = "undo" == t ? i.done : i.undone, l = "undo" == t ? i.undone : i.done, s = 0; s < a.length && (n = a[s], r ? !n.ranges || n.equals(e.sel) : n.ranges); s++);
                    if (s != a.length) {
                        for (i.lastOrigin = i.lastSelOrigin = null; n = a.pop(), n.ranges;) {
                            if (li(n, l), r && !n.equals(e.sel)) return void Le(e, n, {
                                clearRedo: !1
                            });
                            o = n
                        }
                        var c = [];
                        li(o, l), l.push({
                            changes: c,
                            generation: i.generation
                        }), i.generation = n.generation || ++i.maxGeneration;
                        for (var u = ki(e, "beforeChange") || e.cm && ki(e.cm, "beforeChange"), s = n.changes.length - 1; s >= 0; --s) {
                            var f = n.changes[s];
                            if (f.origin = t, u && !br(e, f, !1)) return void(a.length = 0);
                            c.push(ti(e, f));
                            var d = s ? mr(e, f) : Ti(a);
                            Sr(e, f, d, tn(e, f)), !s && e.cm && e.cm.scrollIntoView({
                                from: f.from,
                                to: Uo(f)
                            });
                            var h = [];
                            Gn(e, function(e, t) {
                                t || -1 != Ai(h, e.history) || (pi(e.history, f), h.push(e.history)), Sr(e, f, null, tn(e, f))
                            })
                        }
                    }
                }
            }

            function Cr(e, t) {
                if (0 != t && (e.first += t, e.sel = new ce(Ni(e.sel.ranges, function(e) {
                        return new ue(Oo(e.anchor.line + t, e.anchor.ch), Oo(e.head.line + t, e.head.ch))
                    }), e.sel.primIndex), e.cm)) {
                    zt(e.cm, e.first, e.first - t, t);
                    for (var r = e.cm.display, n = r.viewFrom; n < r.viewTo; n++) Pt(e.cm, n, "gutter")
                }
            }

            function Sr(e, t, r, n) {
                if (e.cm && !e.cm.curOp) return Tt(e.cm, Sr)(e, t, r, n);
                if (t.to.line < e.first) return void Cr(e, t.text.length - 1 - (t.to.line - t.from.line));
                if (!(t.from.line > e.lastLine())) {
                    if (t.from.line < e.first) {
                        var i = t.text.length - 1 - (e.first - t.from.line);
                        Cr(e, i), t = {
                            from: Oo(e.first, 0),
                            to: Oo(t.to.line + i, t.to.ch),
                            text: [Ti(t.text)],
                            origin: t.origin
                        }
                    }
                    var o = e.lastLine();
                    t.to.line > o && (t = {
                        from: t.from,
                        to: Oo(o, Kn(e, o).text.length),
                        text: [t.text[0]],
                        origin: t.origin
                    }), t.removed = _n(e, t.from, t.to), r || (r = mr(e, t)), e.cm ? Lr(e.cm, t, n) : Bn(e, t, n), Me(e, r, Aa)
                }
            }

            function Lr(e, t, r) {
                var n = e.doc,
                    i = e.display,
                    a = t.from,
                    l = t.to,
                    s = !1,
                    c = a.line;
                e.options.lineWrapping || (c = Yn(hn(Kn(n, a.line))), n.iter(c, l.line + 1, function(e) {
                    return e == i.maxLine ? (s = !0, !0) : void 0
                })), n.sel.contains(t.from, t.to) > -1 && wi(e), Bn(n, t, r, o(e)), e.options.lineWrapping || (n.iter(c, a.line + t.text.length, function(e) {
                    var t = f(e);
                    t > i.maxLineLength && (i.maxLine = e, i.maxLineLength = t, i.maxLineChanged = !0, s = !1)
                }), s && (e.curOp.updateMaxLine = !0)), n.frontier = Math.min(n.frontier, a.line), He(e, 400);
                var u = t.text.length - (l.line - a.line) - 1;
                t.full ? zt(e) : a.line != l.line || 1 != t.text.length || Rn(e.doc, t) ? zt(e, a.line, l.line + 1, u) : Pt(e, a.line, "text");
                var d = ki(e, "changes"),
                    h = ki(e, "change");
                if (h || d) {
                    var p = {
                        from: a,
                        to: l,
                        text: t.text,
                        removed: t.removed,
                        origin: t.origin
                    };
                    h && yi(e, "change", e, p), d && (e.curOp.changeObjs || (e.curOp.changeObjs = [])).push(p)
                }
                e.display.selForContextMenu = null
            }

            function Mr(e, t, r, n, i) {
                if (n || (n = r), Wo(n, r) < 0) {
                    var o = n;
                    n = r, r = o
                }
                "string" == typeof t && (t = Ua(t)), xr(e, {
                    from: r,
                    to: n,
                    text: t,
                    origin: i
                })
            }

            function Tr(e, t) {
                if (!xi(e, "scrollCursorIntoView")) {
                    var r = e.display,
                        n = r.sizer.getBoundingClientRect(),
                        i = null;
                    if (t.top + n.top < 0 ? i = !0 : t.bottom + n.top > (window.innerHeight || document.documentElement.clientHeight) && (i = !1), null != i && !xo) {
                        var o = Ei("div", "", null, "position: absolute; top: " + (t.top - r.viewOffset - Re(e.display)) + "px; height: " + (t.bottom - t.top + qe(e) + r.barHeight) + "px; left: " + t.left + "px; width: 2px;");
                        e.display.lineSpace.appendChild(o), o.scrollIntoView(i), e.display.lineSpace.removeChild(o)
                    }
                }
            }

            function Ar(e, t, r, n) {
                null == n && (n = 0);
                for (var i = 0; 5 > i; i++) {
                    var o = !1,
                        a = ut(e, t),
                        l = r && r != t ? ut(e, r) : a,
                        s = Or(e, Math.min(a.left, l.left), Math.min(a.top, l.top) - n, Math.max(a.left, l.left), Math.max(a.bottom, l.bottom) + n),
                        c = e.doc.scrollTop,
                        u = e.doc.scrollLeft;
                    if (null != s.scrollTop && (Qt(e, s.scrollTop), Math.abs(e.doc.scrollTop - c) > 1 && (o = !0)), null != s.scrollLeft && (Jt(e, s.scrollLeft), Math.abs(e.doc.scrollLeft - u) > 1 && (o = !0)), !o) break
                }
                return a
            }

            function Nr(e, t, r, n, i) {
                var o = Or(e, t, r, n, i);
                null != o.scrollTop && Qt(e, o.scrollTop), null != o.scrollLeft && Jt(e, o.scrollLeft)
            }

            function Or(e, t, r, n, i) {
                var o = e.display,
                    a = gt(e.display);
                0 > r && (r = 0);
                var l = e.curOp && null != e.curOp.scrollTop ? e.curOp.scrollTop : o.scroller.scrollTop,
                    s = Ue(e),
                    c = {};
                i - r > s && (i = r + s);
                var u = e.doc.height + Be(o),
                    f = a > r,
                    d = i > u - a;
                if (l > r) c.scrollTop = f ? 0 : r;
                else if (i > l + s) {
                    var h = Math.min(r, (d ? u : i) - s);
                    h != l && (c.scrollTop = h)
                }
                var p = e.curOp && null != e.curOp.scrollLeft ? e.curOp.scrollLeft : o.scroller.scrollLeft,
                    g = Ge(e) - (e.options.fixedGutter ? o.gutters.offsetWidth : 0),
                    m = n - t > g;
                return m && (n = t + g), 10 > t ? c.scrollLeft = 0 : p > t ? c.scrollLeft = Math.max(0, t - (m ? 0 : 10)) : n > g + p - 3 && (c.scrollLeft = n + (m ? 0 : 10) - g), c
            }

            function Wr(e, t, r) {
                (null != t || null != r) && Pr(e), null != t && (e.curOp.scrollLeft = (null == e.curOp.scrollLeft ? e.doc.scrollLeft : e.curOp.scrollLeft) + t), null != r && (e.curOp.scrollTop = (null == e.curOp.scrollTop ? e.doc.scrollTop : e.curOp.scrollTop) + r)
            }

            function zr(e) {
                Pr(e);
                var t = e.getCursor(),
                    r = t,
                    n = t;
                e.options.lineWrapping || (r = t.ch ? Oo(t.line, t.ch - 1) : t, n = Oo(t.line, t.ch + 1)), e.curOp.scrollToPos = {
                    from: r,
                    to: n,
                    margin: e.options.cursorScrollMargin,
                    isCursor: !0
                }
            }

            function Pr(e) {
                var t = e.curOp.scrollToPos;
                if (t) {
                    e.curOp.scrollToPos = null;
                    var r = ft(e, t.from),
                        n = ft(e, t.to),
                        i = Or(e, Math.min(r.left, n.left), Math.min(r.top, n.top) - t.margin, Math.max(r.right, n.right), Math.max(r.bottom, n.bottom) + t.margin);
                    e.scrollTo(i.scrollLeft, i.scrollTop)
                }
            }

            function Ir(e, t, r, n) {
                var i, o = e.doc;
                null == r && (r = "add"), "smart" == r && (o.mode.indent ? i = je(e, t) : r = "prev");
                var a = e.options.tabSize,
                    l = Kn(o, t),
                    s = Wa(l.text, null, a);
                l.stateAfter && (l.stateAfter = null);
                var c, u = l.text.match(/^\s*/)[0];
                if (n || /\S/.test(l.text)) {
                    if ("smart" == r && (c = o.mode.indent(i, l.text.slice(u.length), l.text), c == Ta || c > 150)) {
                        if (!n) return;
                        r = "prev"
                    }
                } else c = 0, r = "not";
                "prev" == r ? c = t > o.first ? Wa(Kn(o, t - 1).text, null, a) : 0 : "add" == r ? c = s + e.options.indentUnit : "subtract" == r ? c = s - e.options.indentUnit : "number" == typeof r && (c = s + r), c = Math.max(0, c);
                var f = "",
                    d = 0;
                if (e.options.indentWithTabs)
                    for (var h = Math.floor(c / a); h; --h) d += a, f += "    ";
                if (c > d && (f += Mi(c - d)), f != u) return Mr(o, f, Oo(t, 0), Oo(t, u.length), "+input"), l.stateAfter = null, !0;
                for (var h = 0; h < o.sel.ranges.length; h++) {
                    var p = o.sel.ranges[h];
                    if (p.head.line == t && p.head.ch < u.length) {
                        var d = Oo(t, u.length);
                        we(o, h, new ue(d, d));
                        break
                    }
                }
            }

            function Dr(e, t, r, n) {
                var i = t,
                    o = t;
                return "number" == typeof t ? o = Kn(e, he(e, t)) : i = Yn(t), null == i ? null : (n(o, i) && e.cm && Pt(e.cm, i, r), o)
            }

            function Hr(e, t) {
                for (var r = e.doc.sel.ranges, n = [], i = 0; i < r.length; i++) {
                    for (var o = t(r[i]); n.length && Wo(o.from, Ti(n).to) <= 0;) {
                        var a = n.pop();
                        if (Wo(a.from, o.from) < 0) {
                            o.from = a.from;
                            break
                        }
                    }
                    n.push(o)
                }
                Mt(e, function() {
                    for (var t = n.length - 1; t >= 0; t--) Mr(e.doc, "", n[t].from, n[t].to, "+delete");
                    zr(e)
                })
            }

            function Er(e, t, r, n, i) {
                function o() {
                    var t = l + r;
                    return t < e.first || t >= e.first + e.size ? f = !1 : (l = t, u = Kn(e, t))
                }

                function a(e) {
                    var t = (i ? ao : lo)(u, s, r, !0);
                    if (null == t) {
                        if (e || !o()) return f = !1;
                        s = i ? (0 > r ? Ji : Qi)(u) : 0 > r ? u.text.length : 0
                    } else s = t;
                    return !0
                }
                var l = t.line,
                    s = t.ch,
                    c = r,
                    u = Kn(e, l),
                    f = !0;
                if ("char" == n) a();
                else if ("column" == n) a(!0);
                else if ("word" == n || "group" == n)
                    for (var d = null, h = "group" == n, p = e.cm && e.cm.getHelper(t, "wordChars"), g = !0; !(0 > r) || a(!g); g = !1) {
                        var m = u.text.charAt(s) || "\n",
                            v = Ii(m, p) ? "w" : h && "\n" == m ? "n" : !h || /\s/.test(m) ? null : "p";
                        if (!h || g || v || (v = "s"), d && d != v) {
                            0 > r && (r = 1, a());
                            break
                        }
                        if (v && (d = v),
                            r > 0 && !a(!g)) break
                    }
                var y = Oe(e, Oo(l, s), c, !0);
                return f || (y.hitSide = !0), y
            }

            function Fr(e, t, r, n) {
                var i, o = e.doc,
                    a = t.left;
                if ("page" == n) {
                    var l = Math.min(e.display.wrapper.clientHeight, window.innerHeight || document.documentElement.clientHeight);
                    i = t.top + r * (l - (0 > r ? 1.5 : .5) * gt(e.display))
                } else "line" == n && (i = r > 0 ? t.bottom + 3 : t.top - 3);
                for (;;) {
                    var s = ht(e, a, i);
                    if (!s.outside) break;
                    if (0 > r ? 0 >= i : i >= o.height) {
                        s.hitSide = !0;
                        break
                    }
                    i += 5 * r
                }
                return s
            }

            function jr(t, r, n, i) {
                e.defaults[t] = r, n && (_o[t] = i ? function(e, t, r) {
                    r != $o && n(e, t, r)
                } : n)
            }

            function Rr(e) {
                for (var t, r, n, i, o = e.split(/-(?!$)/), e = o[o.length - 1], a = 0; a < o.length - 1; a++) {
                    var l = o[a];
                    if (/^(cmd|meta|m)$/i.test(l)) i = !0;
                    else if (/^a(lt)?$/i.test(l)) t = !0;
                    else if (/^(c|ctrl|control)$/i.test(l)) r = !0;
                    else {
                        if (!/^s(hift)$/i.test(l)) throw new Error("Unrecognized modifier name: " + l);
                        n = !0
                    }
                }
                return t && (e = "Alt-" + e), r && (e = "Ctrl-" + e), i && (e = "Cmd-" + e), n && (e = "Shift-" + e), e
            }

            function Br(e) {
                return "string" == typeof e ? na[e] : e
            }

            function Vr(e, t, r, n, i) {
                if (n && n.shared) return qr(e, t, r, n, i);
                if (e.cm && !e.cm.curOp) return Tt(e.cm, Vr)(e, t, r, n, i);
                var o = new ca(e, i),
                    a = Wo(t, r);
                if (n && zi(n, o, !1), a > 0 || 0 == a && o.clearWhenEmpty !== !1) return o;
                if (o.replacedWith && (o.collapsed = !0, o.widgetNode = Ei("span", [o.replacedWith], "CodeMirror-widget"), n.handleMouseEvents || o.widgetNode.setAttribute("cm-ignore-events", "true"), n.insertLeft && (o.widgetNode.insertLeft = !0)), o.collapsed) {
                    if (dn(e, t.line, t, r, o) || t.line != r.line && dn(e, r.line, t, r, o)) throw new Error("Inserting collapsed marker partially overlapping an existing one");
                    No = !0
                }
                o.addToHistory && ii(e, {
                    from: t,
                    to: r,
                    origin: "markText"
                }, e.sel, NaN);
                var l, s = t.line,
                    c = e.cm;
                if (e.iter(s, r.line + 1, function(e) {
                        c && o.collapsed && !c.options.lineWrapping && hn(e) == c.display.maxLine && (l = !0), o.collapsed && s != t.line && Xn(e, 0), Yr(e, new _r(o, s == t.line ? t.ch : null, s == r.line ? r.ch : null)), ++s
                    }), o.collapsed && e.iter(t.line, r.line + 1, function(t) {
                        vn(e, t) && Xn(t, 0)
                    }), o.clearOnEnter && ka(o, "beforeCursorEnter", function() {
                        o.clear()
                    }), o.readOnly && (Ao = !0, (e.history.done.length || e.history.undone.length) && e.clearHistory()), o.collapsed && (o.id = ++sa, o.atomic = !0), c) {
                    if (l && (c.curOp.updateMaxLine = !0), o.collapsed) zt(c, t.line, r.line + 1);
                    else if (o.className || o.title || o.startStyle || o.endStyle || o.css)
                        for (var u = t.line; u <= r.line; u++) Pt(c, u, "text");
                    o.atomic && Ae(c.doc), yi(c, "markerAdded", c, o)
                }
                return o
            }

            function qr(e, t, r, n, i) {
                n = zi(n), n.shared = !1;
                var o = [Vr(e, t, r, n, i)],
                    a = o[0],
                    l = n.widgetNode;
                return Gn(e, function(e) {
                    l && (n.widgetNode = l.cloneNode(!0)), o.push(Vr(e, pe(e, t), pe(e, r), n, i));
                    for (var s = 0; s < e.linked.length; ++s)
                        if (e.linked[s].isParent) return;
                    a = Ti(o)
                }), new ua(o, a)
            }

            function Gr(e) {
                return e.findMarks(Oo(e.first, 0), e.clipPos(Oo(e.lastLine())), function(e) {
                    return e.parent
                })
            }

            function Ur(e, t) {
                for (var r = 0; r < t.length; r++) {
                    var n = t[r],
                        i = n.find(),
                        o = e.clipPos(i.from),
                        a = e.clipPos(i.to);
                    if (Wo(o, a)) {
                        var l = Vr(e, o, a, n.primary, n.primary.type);
                        n.markers.push(l), l.parent = n
                    }
                }
            }

            function Kr(e) {
                for (var t = 0; t < e.length; t++) {
                    var r = e[t],
                        n = [r.primary.doc];
                    Gn(r.primary.doc, function(e) {
                        n.push(e)
                    });
                    for (var i = 0; i < r.markers.length; i++) {
                        var o = r.markers[i]; - 1 == Ai(n, o.doc) && (o.parent = null, r.markers.splice(i--, 1))
                    }
                }
            }

            function _r(e, t, r) {
                this.marker = e, this.from = t, this.to = r
            }

            function $r(e, t) {
                if (e)
                    for (var r = 0; r < e.length; ++r) {
                        var n = e[r];
                        if (n.marker == t) return n
                    }
            }

            function Xr(e, t) {
                for (var r, n = 0; n < e.length; ++n) e[n] != t && (r || (r = [])).push(e[n]);
                return r
            }

            function Yr(e, t) {
                e.markedSpans = e.markedSpans ? e.markedSpans.concat([t]) : [t], t.marker.attachLine(e)
            }

            function Zr(e, t, r) {
                if (e)
                    for (var n, i = 0; i < e.length; ++i) {
                        var o = e[i],
                            a = o.marker,
                            l = null == o.from || (a.inclusiveLeft ? o.from <= t : o.from < t);
                        if (l || o.from == t && "bookmark" == a.type && (!r || !o.marker.insertLeft)) {
                            var s = null == o.to || (a.inclusiveRight ? o.to >= t : o.to > t);
                            (n || (n = [])).push(new _r(a, o.from, s ? null : o.to))
                        }
                    }
                return n
            }

            function Qr(e, t, r) {
                if (e)
                    for (var n, i = 0; i < e.length; ++i) {
                        var o = e[i],
                            a = o.marker,
                            l = null == o.to || (a.inclusiveRight ? o.to >= t : o.to > t);
                        if (l || o.from == t && "bookmark" == a.type && (!r || o.marker.insertLeft)) {
                            var s = null == o.from || (a.inclusiveLeft ? o.from <= t : o.from < t);
                            (n || (n = [])).push(new _r(a, s ? null : o.from - t, null == o.to ? null : o.to - t))
                        }
                    }
                return n
            }

            function Jr(e, t) {
                if (t.full) return null;
                var r = me(e, t.from.line) && Kn(e, t.from.line).markedSpans,
                    n = me(e, t.to.line) && Kn(e, t.to.line).markedSpans;
                if (!r && !n) return null;
                var i = t.from.ch,
                    o = t.to.ch,
                    a = 0 == Wo(t.from, t.to),
                    l = Zr(r, i, a),
                    s = Qr(n, o, a),
                    c = 1 == t.text.length,
                    u = Ti(t.text).length + (c ? i : 0);
                if (l)
                    for (var f = 0; f < l.length; ++f) {
                        var d = l[f];
                        if (null == d.to) {
                            var h = $r(s, d.marker);
                            h ? c && (d.to = null == h.to ? null : h.to + u) : d.to = i
                        }
                    }
                if (s)
                    for (var f = 0; f < s.length; ++f) {
                        var d = s[f];
                        if (null != d.to && (d.to += u), null == d.from) {
                            var h = $r(l, d.marker);
                            h || (d.from = u, c && (l || (l = [])).push(d))
                        } else d.from += u, c && (l || (l = [])).push(d)
                    }
                l && (l = en(l)), s && s != l && (s = en(s));
                var p = [l];
                if (!c) {
                    var g, m = t.text.length - 2;
                    if (m > 0 && l)
                        for (var f = 0; f < l.length; ++f) null == l[f].to && (g || (g = [])).push(new _r(l[f].marker, null, null));
                    for (var f = 0; m > f; ++f) p.push(g);
                    p.push(s)
                }
                return p
            }

            function en(e) {
                for (var t = 0; t < e.length; ++t) {
                    var r = e[t];
                    null != r.from && r.from == r.to && r.marker.clearWhenEmpty !== !1 && e.splice(t--, 1)
                }
                return e.length ? e : null
            }

            function tn(e, t) {
                var r = ui(e, t),
                    n = Jr(e, t);
                if (!r) return n;
                if (!n) return r;
                for (var i = 0; i < r.length; ++i) {
                    var o = r[i],
                        a = n[i];
                    if (o && a) e: for (var l = 0; l < a.length; ++l) {
                        for (var s = a[l], c = 0; c < o.length; ++c)
                            if (o[c].marker == s.marker) continue e;
                        o.push(s)
                    } else a && (r[i] = a)
                }
                return r
            }

            function rn(e, t, r) {
                var n = null;
                if (e.iter(t.line, r.line + 1, function(e) {
                        if (e.markedSpans)
                            for (var t = 0; t < e.markedSpans.length; ++t) {
                                var r = e.markedSpans[t].marker;
                                !r.readOnly || n && -1 != Ai(n, r) || (n || (n = [])).push(r)
                            }
                    }), !n) return null;
                for (var i = [{
                        from: t,
                        to: r
                    }], o = 0; o < n.length; ++o)
                    for (var a = n[o], l = a.find(0), s = 0; s < i.length; ++s) {
                        var c = i[s];
                        if (!(Wo(c.to, l.from) < 0 || Wo(c.from, l.to) > 0)) {
                            var u = [s, 1],
                                f = Wo(c.from, l.from),
                                d = Wo(c.to, l.to);
                            (0 > f || !a.inclusiveLeft && !f) && u.push({
                                from: c.from,
                                to: l.from
                            }), (d > 0 || !a.inclusiveRight && !d) && u.push({
                                from: l.to,
                                to: c.to
                            }), i.splice.apply(i, u), s += u.length - 1
                        }
                    }
                return i
            }

            function nn(e) {
                var t = e.markedSpans;
                if (t) {
                    for (var r = 0; r < t.length; ++r) t[r].marker.detachLine(e);
                    e.markedSpans = null
                }
            }

            function on(e, t) {
                if (t) {
                    for (var r = 0; r < t.length; ++r) t[r].marker.attachLine(e);
                    e.markedSpans = t
                }
            }

            function an(e) {
                return e.inclusiveLeft ? -1 : 0
            }

            function ln(e) {
                return e.inclusiveRight ? 1 : 0
            }

            function sn(e, t) {
                var r = e.lines.length - t.lines.length;
                if (0 != r) return r;
                var n = e.find(),
                    i = t.find(),
                    o = Wo(n.from, i.from) || an(e) - an(t);
                if (o) return -o;
                var a = Wo(n.to, i.to) || ln(e) - ln(t);
                return a ? a : t.id - e.id
            }

            function cn(e, t) {
                var r, n = No && e.markedSpans;
                if (n)
                    for (var i, o = 0; o < n.length; ++o) i = n[o], i.marker.collapsed && null == (t ? i.from : i.to) && (!r || sn(r, i.marker) < 0) && (r = i.marker);
                return r
            }

            function un(e) {
                return cn(e, !0)
            }

            function fn(e) {
                return cn(e, !1)
            }

            function dn(e, t, r, n, i) {
                var o = Kn(e, t),
                    a = No && o.markedSpans;
                if (a)
                    for (var l = 0; l < a.length; ++l) {
                        var s = a[l];
                        if (s.marker.collapsed) {
                            var c = s.marker.find(0),
                                u = Wo(c.from, r) || an(s.marker) - an(i),
                                f = Wo(c.to, n) || ln(s.marker) - ln(i);
                            if (!(u >= 0 && 0 >= f || 0 >= u && f >= 0) && (0 >= u && (Wo(c.to, r) > 0 || s.marker.inclusiveRight && i.inclusiveLeft) || u >= 0 && (Wo(c.from, n) < 0 || s.marker.inclusiveLeft && i.inclusiveRight))) return !0
                        }
                    }
            }

            function hn(e) {
                for (var t; t = un(e);) e = t.find(-1, !0).line;
                return e
            }

            function pn(e) {
                for (var t, r; t = fn(e);) e = t.find(1, !0).line, (r || (r = [])).push(e);
                return r
            }

            function gn(e, t) {
                var r = Kn(e, t),
                    n = hn(r);
                return r == n ? t : Yn(n)
            }

            function mn(e, t) {
                if (t > e.lastLine()) return t;
                var r, n = Kn(e, t);
                if (!vn(e, n)) return t;
                for (; r = fn(n);) n = r.find(1, !0).line;
                return Yn(n) + 1
            }

            function vn(e, t) {
                var r = No && t.markedSpans;
                if (r)
                    for (var n, i = 0; i < r.length; ++i)
                        if (n = r[i], n.marker.collapsed) {
                            if (null == n.from) return !0;
                            if (!n.marker.widgetNode && 0 == n.from && n.marker.inclusiveLeft && yn(e, t, n)) return !0
                        }
            }

            function yn(e, t, r) {
                if (null == r.to) {
                    var n = r.marker.find(1, !0);
                    return yn(e, n.line, $r(n.line.markedSpans, r.marker))
                }
                if (r.marker.inclusiveRight && r.to == t.text.length) return !0;
                for (var i, o = 0; o < t.markedSpans.length; ++o)
                    if (i = t.markedSpans[o], i.marker.collapsed && !i.marker.widgetNode && i.from == r.to && (null == i.to || i.to != r.from) && (i.marker.inclusiveLeft || r.marker.inclusiveRight) && yn(e, t, i)) return !0
            }

            function bn(e, t, r) {
                Qn(t) < (e.curOp && e.curOp.scrollTop || e.doc.scrollTop) && Wr(e, null, r)
            }

            function xn(e) {
                if (null != e.height) return e.height;
                var t = e.doc.cm;
                if (!t) return 0;
                if (!Fa(document.body, e.node)) {
                    var r = "position: relative;";
                    e.coverGutter && (r += "margin-left: -" + t.display.gutters.offsetWidth + "px;"), e.noHScroll && (r += "width: " + t.display.wrapper.clientWidth + "px;"), ji(t.display.measure, Ei("div", [e.node], null, r))
                }
                return e.height = e.node.offsetHeight
            }

            function wn(e, t, r, n) {
                var i = new fa(e, r, n),
                    o = e.cm;
                return o && i.noHScroll && (o.display.alignWidgets = !0), Dr(e, t, "widget", function(t) {
                    var r = t.widgets || (t.widgets = []);
                    if (null == i.insertAt ? r.push(i) : r.splice(Math.min(r.length - 1, Math.max(0, i.insertAt)), 0, i), i.line = t, o && !vn(e, t)) {
                        var n = Qn(t) < e.scrollTop;
                        Xn(t, t.height + xn(i)), n && Wr(o, null, i.height), o.curOp.forceUpdate = !0
                    }
                    return !0
                }), i
            }

            function kn(e, t, r, n) {
                e.text = t, e.stateAfter && (e.stateAfter = null), e.styles && (e.styles = null), null != e.order && (e.order = null), nn(e), on(e, r);
                var i = n ? n(e) : 1;
                i != e.height && Xn(e, i)
            }

            function Cn(e) {
                e.parent = null, nn(e)
            }

            function Sn(e, t) {
                if (e)
                    for (;;) {
                        var r = e.match(/(?:^|\s+)line-(background-)?(\S+)/);
                        if (!r) break;
                        e = e.slice(0, r.index) + e.slice(r.index + r[0].length);
                        var n = r[1] ? "bgClass" : "textClass";
                        null == t[n] ? t[n] = r[2] : new RegExp("(?:^|s)" + r[2] + "(?:$|s)").test(t[n]) || (t[n] += " " + r[2])
                    }
                return e
            }

            function Ln(t, r) {
                if (t.blankLine) return t.blankLine(r);
                if (t.innerMode) {
                    var n = e.innerMode(t, r);
                    return n.mode.blankLine ? n.mode.blankLine(n.state) : void 0
                }
            }

            function Mn(t, r, n, i) {
                for (var o = 0; 10 > o; o++) {
                    i && (i[0] = e.innerMode(t, n).mode);
                    var a = t.token(r, n);
                    if (r.pos > r.start) return a
                }
                throw new Error("Mode " + t.name + " failed to advance stream.")
            }

            function Tn(e, t, r, n) {
                function i(e) {
                    return {
                        start: f.start,
                        end: f.pos,
                        string: f.current(),
                        type: o || null,
                        state: e ? ea(a.mode, u) : u
                    }
                }
                var o, a = e.doc,
                    l = a.mode;
                t = pe(a, t);
                var s, c = Kn(a, t.line),
                    u = je(e, t.line, r),
                    f = new la(c.text, e.options.tabSize);
                for (n && (s = []);
                    (n || f.pos < t.ch) && !f.eol();) f.start = f.pos, o = Mn(l, f, u), n && s.push(i(!0));
                return n ? s : i()
            }

            function An(e, t, r, n, i, o, a) {
                var l = r.flattenSpans;
                null == l && (l = e.options.flattenSpans);
                var s, c = 0,
                    u = null,
                    f = new la(t, e.options.tabSize),
                    d = e.options.addModeClass && [null];
                for ("" == t && Sn(Ln(r, n), o); !f.eol();) {
                    if (f.pos > e.options.maxHighlightLength ? (l = !1, a && Wn(e, t, n, f.pos), f.pos = t.length, s = null) : s = Sn(Mn(r, f, n, d), o), d) {
                        var h = d[0].name;
                        h && (s = "m-" + (s ? h + " " + s : h))
                    }
                    if (!l || u != s) {
                        for (; c < f.start;) c = Math.min(f.start, c + 5e4), i(c, u);
                        u = s
                    }
                    f.start = f.pos
                }
                for (; c < f.pos;) {
                    var p = Math.min(f.pos, c + 5e4);
                    i(p, u), c = p
                }
            }

            function Nn(e, t, r, n) {
                var i = [e.state.modeGen],
                    o = {};
                An(e, t.text, e.doc.mode, r, function(e, t) {
                    i.push(e, t)
                }, o, n);
                for (var a = 0; a < e.state.overlays.length; ++a) {
                    var l = e.state.overlays[a],
                        s = 1,
                        c = 0;
                    An(e, t.text, l.mode, !0, function(e, t) {
                        for (var r = s; e > c;) {
                            var n = i[s];
                            n > e && i.splice(s, 1, e, i[s + 1], n), s += 2, c = Math.min(e, n)
                        }
                        if (t)
                            if (l.opaque) i.splice(r, s - r, e, "cm-overlay " + t), s = r + 2;
                            else
                                for (; s > r; r += 2) {
                                    var o = i[r + 1];
                                    i[r + 1] = (o ? o + " " : "") + "cm-overlay " + t
                                }
                    }, o)
                }
                return {
                    styles: i,
                    classes: o.bgClass || o.textClass ? o : null
                }
            }

            function On(e, t, r) {
                if (!t.styles || t.styles[0] != e.state.modeGen) {
                    var n = Nn(e, t, t.stateAfter = je(e, Yn(t)));
                    t.styles = n.styles, n.classes ? t.styleClasses = n.classes : t.styleClasses && (t.styleClasses = null), r === e.doc.frontier && e.doc.frontier++
                }
                return t.styles
            }

            function Wn(e, t, r, n) {
                var i = e.doc.mode,
                    o = new la(t, e.options.tabSize);
                for (o.start = o.pos = n || 0, "" == t && Ln(i, r); !o.eol() && o.pos <= e.options.maxHighlightLength;) Mn(i, o, r), o.start = o.pos
            }

            function zn(e, t) {
                if (!e || /^\s*$/.test(e)) return null;
                var r = t.addModeClass ? pa : ha;
                return r[e] || (r[e] = e.replace(/\S+/g, "cm-$&"))
            }

            function Pn(e, t) {
                var r = Ei("span", null, null, po ? "padding-right: .1px" : null),
                    n = {
                        pre: Ei("pre", [r]),
                        content: r,
                        col: 0,
                        pos: 0,
                        cm: e,
                        splitSpaces: (fo || po) && e.getOption("lineWrapping")
                    };
                t.measure = {};
                for (var i = 0; i <= (t.rest ? t.rest.length : 0); i++) {
                    var o, a = i ? t.rest[i - 1] : t.line;
                    n.pos = 0, n.addToken = Dn, _i(e.display.measure) && (o = Jn(a)) && (n.addToken = En(n.addToken, o)), n.map = [];
                    var l = t != e.display.externalMeasured && Yn(a);
                    jn(a, n, On(e, a, l)), a.styleClasses && (a.styleClasses.bgClass && (n.bgClass = Vi(a.styleClasses.bgClass, n.bgClass || "")), a.styleClasses.textClass && (n.textClass = Vi(a.styleClasses.textClass, n.textClass || ""))), 0 == n.map.length && n.map.push(0, 0, n.content.appendChild(Ki(e.display.measure))), 0 == i ? (t.measure.map = n.map, t.measure.cache = {}) : ((t.measure.maps || (t.measure.maps = [])).push(n.map), (t.measure.caches || (t.measure.caches = [])).push({}))
                }
                return po && /\bcm-tab\b/.test(n.content.lastChild.className) && (n.content.className = "cm-tab-wrap-hack"), Sa(e, "renderLine", e, t.line, n.pre), n.pre.className && (n.textClass = Vi(n.pre.className, n.textClass || "")), n
            }

            function In(e) {
                var t = Ei("span", "", "cm-invalidchar");
                return t.title = "\\u" + e.charCodeAt(0).toString(16), t.setAttribute("aria-label", t.title), t
            }

            function Dn(e, t, r, n, i, o, a) {
                if (t) {
                    var l = e.splitSpaces ? t.replace(/ {3,}/g, Hn) : t,
                        s = e.cm.state.specialChars,
                        c = !1;
                    if (s.test(t))
                        for (var u = document.createDocumentFragment(), f = 0;;) {
                            s.lastIndex = f;
                            var d = s.exec(t),
                                h = d ? d.index - f : t.length - f;
                            if (h) {
                                var p = document.createTextNode(l.slice(f, f + h));
                                fo && 9 > ho ? u.appendChild(Ei("span", [p])) : u.appendChild(p), e.map.push(e.pos, e.pos + h, p), e.col += h, e.pos += h
                            }
                            if (!d) break;
                            if (f += h + 1, " " == d[0]) {
                                var g = e.cm.options.tabSize,
                                    m = g - e.col % g,
                                    p = u.appendChild(Ei("span", Mi(m), "cm-tab"));
                                p.setAttribute("role", "presentation"), p.setAttribute("cm-text", " "), e.col += m
                            } else {
                                var p = e.cm.options.specialCharPlaceholder(d[0]);
                                p.setAttribute("cm-text", d[0]), fo && 9 > ho ? u.appendChild(Ei("span", [p])) : u.appendChild(p), e.col += 1
                            }
                            e.map.push(e.pos, e.pos + 1, p), e.pos++
                        } else {
                            e.col += t.length;
                            var u = document.createTextNode(l);
                            e.map.push(e.pos, e.pos + t.length, u), fo && 9 > ho && (c = !0), e.pos += t.length
                        }
                    if (r || n || i || c || a) {
                        var v = r || "";
                        n && (v += n), i && (v += i);
                        var y = Ei("span", [u], v, a);
                        return o && (y.title = o), e.content.appendChild(y)
                    }
                    e.content.appendChild(u)
                }
            }

            function Hn(e) {
                for (var t = " ", r = 0; r < e.length - 2; ++r) t += r % 2 ? " " : "";
                return t += " "
            }

            function En(e, t) {
                return function(r, n, i, o, a, l, s) {
                    i = i ? i + " cm-force-border" : "cm-force-border";
                    for (var c = r.pos, u = c + n.length;;) {
                        for (var f = 0; f < t.length; f++) {
                            var d = t[f];
                            if (d.to > c && d.from <= c) break
                        }
                        if (d.to >= u) return e(r, n, i, o, a, l, s);
                        e(r, n.slice(0, d.to - c), i, o, null, l, s), o = null, n = n.slice(d.to - c), c = d.to
                    }
                }
            }

            function Fn(e, t, r, n) {
                var i = !n && r.widgetNode;
                i && e.map.push(e.pos, e.pos + t, i), !n && e.cm.display.input.needsContentAttribute && (i || (i = e.content.appendChild(document.createElement("span"))), i.setAttribute("cm-marker", r.id)), i && (e.cm.display.input.setUneditable(i), e.content.appendChild(i)), e.pos += t
            }

            function jn(e, t, r) {
                var n = e.markedSpans,
                    i = e.text,
                    o = 0;
                if (n)
                    for (var a, l, s, c, u, f, d, h = i.length, p = 0, g = 1, m = "", v = 0;;) {
                        if (v == p) {
                            s = c = u = f = l = "", d = null, v = 1 / 0;
                            for (var y = [], b = 0; b < n.length; ++b) {
                                var x = n[b],
                                    w = x.marker;
                                "bookmark" == w.type && x.from == p && w.widgetNode ? y.push(w) : x.from <= p && (null == x.to || x.to > p || w.collapsed && x.to == p && x.from == p) ? (null != x.to && x.to != p && v > x.to && (v = x.to, c = ""), w.className && (s += " " + w.className), w.css && (l = w.css), w.startStyle && x.from == p && (u += " " + w.startStyle), w.endStyle && x.to == v && (c += " " + w.endStyle), w.title && !f && (f = w.title), w.collapsed && (!d || sn(d.marker, w) < 0) && (d = x)) : x.from > p && v > x.from && (v = x.from)
                            }
                            if (d && (d.from || 0) == p) {
                                if (Fn(t, (null == d.to ? h + 1 : d.to) - p, d.marker, null == d.from), null == d.to) return;
                                d.to == p && (d = !1)
                            }
                            if (!d && y.length)
                                for (var b = 0; b < y.length; ++b) Fn(t, 0, y[b])
                        }
                        if (p >= h) break;
                        for (var k = Math.min(h, v);;) {
                            if (m) {
                                var C = p + m.length;
                                if (!d) {
                                    var S = C > k ? m.slice(0, k - p) : m;
                                    t.addToken(t, S, a ? a + s : s, u, p + S.length == v ? c : "", f, l)
                                }
                                if (C >= k) {
                                    m = m.slice(k - p), p = k;
                                    break
                                }
                                p = C, u = ""
                            }
                            m = i.slice(o, o = r[g++]), a = zn(r[g++], t.cm.options)
                        }
                    } else
                        for (var g = 1; g < r.length; g += 2) t.addToken(t, i.slice(o, o = r[g]), zn(r[g + 1], t.cm.options))
            }

            function Rn(e, t) {
                return 0 == t.from.ch && 0 == t.to.ch && "" == Ti(t.text) && (!e.cm || e.cm.options.wholeLineUpdateBefore)
            }

            function Bn(e, t, r, n) {
                function i(e) {
                    return r ? r[e] : null
                }

                function o(e, r, i) {
                    kn(e, r, i, n), yi(e, "change", e, t)
                }

                function a(e, t) {
                    for (var r = e, o = []; t > r; ++r) o.push(new da(c[r], i(r), n));
                    return o
                }
                var l = t.from,
                    s = t.to,
                    c = t.text,
                    u = Kn(e, l.line),
                    f = Kn(e, s.line),
                    d = Ti(c),
                    h = i(c.length - 1),
                    p = s.line - l.line;
                if (t.full) e.insert(0, a(0, c.length)), e.remove(c.length, e.size - c.length);
                else if (Rn(e, t)) {
                    var g = a(0, c.length - 1);
                    o(f, f.text, h), p && e.remove(l.line, p), g.length && e.insert(l.line, g)
                } else if (u == f)
                    if (1 == c.length) o(u, u.text.slice(0, l.ch) + d + u.text.slice(s.ch), h);
                    else {
                        var g = a(1, c.length - 1);
                        g.push(new da(d + u.text.slice(s.ch), h, n)), o(u, u.text.slice(0, l.ch) + c[0], i(0)), e.insert(l.line + 1, g)
                    }
                else if (1 == c.length) o(u, u.text.slice(0, l.ch) + c[0] + f.text.slice(s.ch), i(0)), e.remove(l.line + 1, p);
                else {
                    o(u, u.text.slice(0, l.ch) + c[0], i(0)), o(f, d + f.text.slice(s.ch), h);
                    var g = a(1, c.length - 1);
                    p > 1 && e.remove(l.line + 1, p - 1), e.insert(l.line + 1, g)
                }
                yi(e, "change", e, t)
            }

            function Vn(e) {
                this.lines = e, this.parent = null;
                for (var t = 0, r = 0; t < e.length; ++t) e[t].parent = this, r += e[t].height;
                this.height = r
            }

            function qn(e) {
                this.children = e;
                for (var t = 0, r = 0, n = 0; n < e.length; ++n) {
                    var i = e[n];
                    t += i.chunkSize(), r += i.height, i.parent = this
                }
                this.size = t, this.height = r, this.parent = null
            }

            function Gn(e, t, r) {
                function n(e, i, o) {
                    if (e.linked)
                        for (var a = 0; a < e.linked.length; ++a) {
                            var l = e.linked[a];
                            if (l.doc != i) {
                                var s = o && l.sharedHist;
                                (!r || s) && (t(l.doc, s), n(l.doc, e, s))
                            }
                        }
                }
                n(e, null, !0)
            }

            function Un(e, t) {
                if (t.cm) throw new Error("This document is already in use.");
                e.doc = t, t.cm = e, a(e), r(e), e.options.lineWrapping || d(e), e.options.mode = t.modeOption, zt(e)
            }

            function Kn(e, t) {
                if (t -= e.first, 0 > t || t >= e.size) throw new Error("There is no line " + (t + e.first) + " in the document.");
                for (var r = e; !r.lines;)
                    for (var n = 0;; ++n) {
                        var i = r.children[n],
                            o = i.chunkSize();
                        if (o > t) {
                            r = i;
                            break
                        }
                        t -= o
                    }
                return r.lines[t]
            }

            function _n(e, t, r) {
                var n = [],
                    i = t.line;
                return e.iter(t.line, r.line + 1, function(e) {
                    var o = e.text;
                    i == r.line && (o = o.slice(0, r.ch)), i == t.line && (o = o.slice(t.ch)), n.push(o), ++i
                }), n
            }

            function $n(e, t, r) {
                var n = [];
                return e.iter(t, r, function(e) {
                    n.push(e.text)
                }), n
            }

            function Xn(e, t) {
                var r = t - e.height;
                if (r)
                    for (var n = e; n; n = n.parent) n.height += r
            }

            function Yn(e) {
                if (null == e.parent) return null;
                for (var t = e.parent, r = Ai(t.lines, e), n = t.parent; n; t = n, n = n.parent)
                    for (var i = 0; n.children[i] != t; ++i) r += n.children[i].chunkSize();
                return r + t.first
            }

            function Zn(e, t) {
                var r = e.first;
                e: do {
                    for (var n = 0; n < e.children.length; ++n) {
                        var i = e.children[n],
                            o = i.height;
                        if (o > t) {
                            e = i;
                            continue e
                        }
                        t -= o, r += i.chunkSize()
                    }
                    return r
                } while (!e.lines);
                for (var n = 0; n < e.lines.length; ++n) {
                    var a = e.lines[n],
                        l = a.height;
                    if (l > t) break;
                    t -= l
                }
                return r + n
            }

            function Qn(e) {
                e = hn(e);
                for (var t = 0, r = e.parent, n = 0; n < r.lines.length; ++n) {
                    var i = r.lines[n];
                    if (i == e) break;
                    t += i.height
                }
                for (var o = r.parent; o; r = o, o = r.parent)
                    for (var n = 0; n < o.children.length; ++n) {
                        var a = o.children[n];
                        if (a == r) break;
                        t += a.height
                    }
                return t
            }

            function Jn(e) {
                var t = e.order;
                return null == t && (t = e.order = Za(e.text)), t
            }

            function ei(e) {
                this.done = [], this.undone = [], this.undoDepth = 1 / 0, this.lastModTime = this.lastSelTime = 0, this.lastOp = this.lastSelOp = null, this.lastOrigin = this.lastSelOrigin = null, this.generation = this.maxGeneration = e || 1
            }

            function ti(e, t) {
                var r = {
                    from: _(t.from),
                    to: Uo(t),
                    text: _n(e, t.from, t.to)
                };
                return si(e, r, t.from.line, t.to.line + 1), Gn(e, function(e) {
                    si(e, r, t.from.line, t.to.line + 1)
                }, !0), r
            }

            function ri(e) {
                for (; e.length;) {
                    var t = Ti(e);
                    if (!t.ranges) break;
                    e.pop()
                }
            }

            function ni(e, t) {
                return t ? (ri(e.done), Ti(e.done)) : e.done.length && !Ti(e.done).ranges ? Ti(e.done) : e.done.length > 1 && !e.done[e.done.length - 2].ranges ? (e.done.pop(), Ti(e.done)) : void 0
            }

            function ii(e, t, r, n) {
                var i = e.history;
                i.undone.length = 0;
                var o, a = +new Date;
                if ((i.lastOp == n || i.lastOrigin == t.origin && t.origin && ("+" == t.origin.charAt(0) && e.cm && i.lastModTime > a - e.cm.options.historyEventDelay || "*" == t.origin.charAt(0))) && (o = ni(i, i.lastOp == n))) {
                    var l = Ti(o.changes);
                    0 == Wo(t.from, t.to) && 0 == Wo(t.from, l.to) ? l.to = Uo(t) : o.changes.push(ti(e, t))
                } else {
                    var s = Ti(i.done);
                    for (s && s.ranges || li(e.sel, i.done), o = {
                            changes: [ti(e, t)],
                            generation: i.generation
                        }, i.done.push(o); i.done.length > i.undoDepth;) i.done.shift(), i.done[0].ranges || i.done.shift()
                }
                i.done.push(r), i.generation = ++i.maxGeneration, i.lastModTime = i.lastSelTime = a, i.lastOp = i.lastSelOp = n, i.lastOrigin = i.lastSelOrigin = t.origin, l || Sa(e, "historyAdded")
            }

            function oi(e, t, r, n) {
                var i = t.charAt(0);
                return "*" == i || "+" == i && r.ranges.length == n.ranges.length && r.somethingSelected() == n.somethingSelected() && new Date - e.history.lastSelTime <= (e.cm ? e.cm.options.historyEventDelay : 500)
            }

            function ai(e, t, r, n) {
                var i = e.history,
                    o = n && n.origin;
                r == i.lastSelOp || o && i.lastSelOrigin == o && (i.lastModTime == i.lastSelTime && i.lastOrigin == o || oi(e, o, Ti(i.done), t)) ? i.done[i.done.length - 1] = t : li(t, i.done), i.lastSelTime = +new Date, i.lastSelOrigin = o, i.lastSelOp = r, n && n.clearRedo !== !1 && ri(i.undone)
            }

            function li(e, t) {
                var r = Ti(t);
                r && r.ranges && r.equals(e) || t.push(e)
            }

            function si(e, t, r, n) {
                var i = t["spans_" + e.id],
                    o = 0;
                e.iter(Math.max(e.first, r), Math.min(e.first + e.size, n), function(r) {
                    r.markedSpans && ((i || (i = t["spans_" + e.id] = {}))[o] = r.markedSpans), ++o
                })
            }

            function ci(e) {
                if (!e) return null;
                for (var t, r = 0; r < e.length; ++r) e[r].marker.explicitlyCleared ? t || (t = e.slice(0, r)) : t && t.push(e[r]);
                return t ? t.length ? t : null : e
            }

            function ui(e, t) {
                var r = t["spans_" + e.id];
                if (!r) return null;
                for (var n = 0, i = []; n < t.text.length; ++n) i.push(ci(r[n]));
                return i
            }

            function fi(e, t, r) {
                for (var n = 0, i = []; n < e.length; ++n) {
                    var o = e[n];
                    if (o.ranges) i.push(r ? ce.prototype.deepCopy.call(o) : o);
                    else {
                        var a = o.changes,
                            l = [];
                        i.push({
                            changes: l
                        });
                        for (var s = 0; s < a.length; ++s) {
                            var c, u = a[s];
                            if (l.push({
                                    from: u.from,
                                    to: u.to,
                                    text: u.text
                                }), t)
                                for (var f in u)(c = f.match(/^spans_(\d+)$/)) && Ai(t, Number(c[1])) > -1 && (Ti(l)[f] = u[f], delete u[f])
                        }
                    }
                }
                return i
            }

            function di(e, t, r, n) {
                r < e.line ? e.line += n : t < e.line && (e.line = t, e.ch = 0)
            }

            function hi(e, t, r, n) {
                for (var i = 0; i < e.length; ++i) {
                    var o = e[i],
                        a = !0;
                    if (o.ranges) {
                        o.copied || (o = e[i] = o.deepCopy(), o.copied = !0);
                        for (var l = 0; l < o.ranges.length; l++) di(o.ranges[l].anchor, t, r, n), di(o.ranges[l].head, t, r, n)
                    } else {
                        for (var l = 0; l < o.changes.length; ++l) {
                            var s = o.changes[l];
                            if (r < s.from.line) s.from = Oo(s.from.line + n, s.from.ch), s.to = Oo(s.to.line + n, s.to.ch);
                            else if (t <= s.to.line) {
                                a = !1;
                                break
                            }
                        }
                        a || (e.splice(0, i + 1), i = 0)
                    }
                }
            }

            function pi(e, t) {
                var r = t.from.line,
                    n = t.to.line,
                    i = t.text.length - (n - r) - 1;
                hi(e.done, r, n, i), hi(e.undone, r, n, i)
            }

            function gi(e) {
                return null != e.defaultPrevented ? e.defaultPrevented : 0 == e.returnValue
            }

            function mi(e) {
                return e.target || e.srcElement
            }

            function vi(e) {
                var t = e.which;
                return null == t && (1 & e.button ? t = 1 : 2 & e.button ? t = 3 : 4 & e.button && (t = 2)), Co && e.ctrlKey && 1 == t && (t = 3), t
            }

            function yi(e, t) {
                function r(e) {
                    return function() {
                        e.apply(null, o)
                    }
                }
                var n = e._handlers && e._handlers[t];
                if (n) {
                    var i, o = Array.prototype.slice.call(arguments, 2);
                    Eo ? i = Eo.delayedCallbacks : La ? i = La : (i = La = [], setTimeout(bi, 0));
                    for (var a = 0; a < n.length; ++a) i.push(r(n[a]))
                }
            }

            function bi() {
                var e = La;
                La = null;
                for (var t = 0; t < e.length; ++t) e[t]()
            }

            function xi(e, t, r) {
                return "string" == typeof t && (t = {
                    type: t,
                    preventDefault: function() {
                        this.defaultPrevented = !0
                    }
                }), Sa(e, r || t.type, e, t), gi(t) || t.codemirrorIgnore
            }

            function wi(e) {
                var t = e._handlers && e._handlers.cursorActivity;
                if (t)
                    for (var r = e.curOp.cursorActivityHandlers || (e.curOp.cursorActivityHandlers = []), n = 0; n < t.length; ++n) - 1 == Ai(r, t[n]) && r.push(t[n])
            }

            function ki(e, t) {
                var r = e._handlers && e._handlers[t];
                return r && r.length > 0
            }

            function Ci(e) {
                e.prototype.on = function(e, t) {
                    ka(this, e, t)
                }, e.prototype.off = function(e, t) {
                    Ca(this, e, t)
                }
            }

            function Si() {
                this.id = null
            }

            function Li(e, t, r) {
                for (var n = 0, i = 0;;) {
                    var o = e.indexOf("   ", n); - 1 == o && (o = e.length);
                    var a = o - n;
                    if (o == e.length || i + a >= t) return n + Math.min(a, t - i);
                    if (i += o - n, i += r - i % r, n = o + 1, i >= t) return n
                }
            }

            function Mi(e) {
                for (; za.length <= e;) za.push(Ti(za) + " ");
                return za[e]
            }

            function Ti(e) {
                return e[e.length - 1]
            }

            function Ai(e, t) {
                for (var r = 0; r < e.length; ++r)
                    if (e[r] == t) return r;
                return -1
            }

            function Ni(e, t) {
                for (var r = [], n = 0; n < e.length; n++) r[n] = t(e[n], n);
                return r
            }

            function Oi() {}

            function Wi(e, t) {
                var r;
                return Object.create ? r = Object.create(e) : (Oi.prototype = e, r = new Oi), t && zi(t, r), r
            }

            function zi(e, t, r) {
                t || (t = {});
                for (var n in e) !e.hasOwnProperty(n) || r === !1 && t.hasOwnProperty(n) || (t[n] = e[n]);
                return t
            }

            function Pi(e) {
                var t = Array.prototype.slice.call(arguments, 1);
                return function() {
                    return e.apply(null, t)
                }
            }

            function Ii(e, t) {
                return t ? t.source.indexOf("\\w") > -1 && Ha(e) ? !0 : t.test(e) : Ha(e)
            }

            function Di(e) {
                for (var t in e)
                    if (e.hasOwnProperty(t) && e[t]) return !1;
                return !0
            }

            function Hi(e) {
                return e.charCodeAt(0) >= 768 && Ea.test(e)
            }

            function Ei(e, t, r, n) {
                var i = document.createElement(e);
                if (r && (i.className = r), n && (i.style.cssText = n), "string" == typeof t) i.appendChild(document.createTextNode(t));
                else if (t)
                    for (var o = 0; o < t.length; ++o) i.appendChild(t[o]);
                return i
            }

            function Fi(e) {
                for (var t = e.childNodes.length; t > 0; --t) e.removeChild(e.firstChild);
                return e
            }

            function ji(e, t) {
                return Fi(e).appendChild(t)
            }

            function Ri() {
                return document.activeElement
            }

            function Bi(e) {
                return new RegExp("(^|\\s)" + e + "(?:$|\\s)\\s*")
            }

            function Vi(e, t) {
                for (var r = e.split(" "), n = 0; n < r.length; n++) r[n] && !Bi(r[n]).test(t) && (t += " " + r[n]);
                return t
            }

            function qi(e) {
                if (document.body.getElementsByClassName)
                    for (var t = document.body.getElementsByClassName("CodeMirror"), r = 0; r < t.length; r++) {
                        var n = t[r].CodeMirror;
                        n && e(n)
                    }
            }

            function Gi() {
                qa || (Ui(), qa = !0)
            }

            function Ui() {
                var e;
                ka(window, "resize", function() {
                    null == e && (e = setTimeout(function() {
                        e = null, qi(Bt)
                    }, 100))
                }), ka(window, "blur", function() {
                    qi(dr)
                })
            }

            function Ki(e) {
                if (null == ja) {
                    var t = Ei("span", "");
                    ji(e, Ei("span", [t, document.createTextNode("x")])), 0 != e.firstChild.offsetHeight && (ja = t.offsetWidth <= 1 && t.offsetHeight > 2 && !(fo && 8 > ho))
                }
                var r = ja ? Ei("span", "") : Ei("span", "", null, "display: inline-block; width: 1px; margin-right: -1px");
                return r.setAttribute("cm-text", ""), r
            }

            function _i(e) {
                if (null != Ra) return Ra;
                var t = ji(e, document.createTextNode("AA")),
                    r = Ia(t, 0, 1).getBoundingClientRect();
                if (!r || r.left == r.right) return !1;
                var n = Ia(t, 1, 2).getBoundingClientRect();
                return Ra = n.right - r.right < 3
            }

            function $i(e) {
                if (null != $a) return $a;
                var t = ji(e, Ei("span", "x")),
                    r = t.getBoundingClientRect(),
                    n = Ia(t, 0, 1).getBoundingClientRect();
                return $a = Math.abs(r.left - n.left) > 1
            }

            function Xi(e, t, r, n) {
                if (!e) return n(t, r, "ltr");
                for (var i = !1, o = 0; o < e.length; ++o) {
                    var a = e[o];
                    (a.from < r && a.to > t || t == r && a.to == t) && (n(Math.max(a.from, t), Math.min(a.to, r), 1 == a.level ? "rtl" : "ltr"), i = !0)
                }
                i || n(t, r, "ltr")
            }

            function Yi(e) {
                return e.level % 2 ? e.to : e.from
            }

            function Zi(e) {
                return e.level % 2 ? e.from : e.to
            }

            function Qi(e) {
                var t = Jn(e);
                return t ? Yi(t[0]) : 0
            }

            function Ji(e) {
                var t = Jn(e);
                return t ? Zi(Ti(t)) : e.text.length
            }

            function eo(e, t) {
                var r = Kn(e.doc, t),
                    n = hn(r);
                n != r && (t = Yn(n));
                var i = Jn(n),
                    o = i ? i[0].level % 2 ? Ji(n) : Qi(n) : 0;
                return Oo(t, o)
            }

            function to(e, t) {
                for (var r, n = Kn(e.doc, t); r = fn(n);) n = r.find(1, !0).line, t = null;
                var i = Jn(n),
                    o = i ? i[0].level % 2 ? Qi(n) : Ji(n) : n.text.length;
                return Oo(null == t ? Yn(n) : t, o)
            }

            function ro(e, t) {
                var r = eo(e, t.line),
                    n = Kn(e.doc, r.line),
                    i = Jn(n);
                if (!i || 0 == i[0].level) {
                    var o = Math.max(0, n.text.search(/\S/)),
                        a = t.line == r.line && t.ch <= o && t.ch;
                    return Oo(r.line, a ? 0 : o)
                }
                return r
            }

            function no(e, t, r) {
                var n = e[0].level;
                return t == n ? !0 : r == n ? !1 : r > t
            }

            function io(e, t) {
                Ya = null;
                for (var r, n = 0; n < e.length; ++n) {
                    var i = e[n];
                    if (i.from < t && i.to > t) return n;
                    if (i.from == t || i.to == t) {
                        if (null != r) return no(e, i.level, e[r].level) ? (i.from != i.to && (Ya = r), n) : (i.from != i.to && (Ya = n), r);
                        r = n
                    }
                }
                return r
            }

            function oo(e, t, r, n) {
                if (!n) return t + r;
                do t += r; while (t > 0 && Hi(e.text.charAt(t)));
                return t
            }

            function ao(e, t, r, n) {
                var i = Jn(e);
                if (!i) return lo(e, t, r, n);
                for (var o = io(i, t), a = i[o], l = oo(e, t, a.level % 2 ? -r : r, n);;) {
                    if (l > a.from && l < a.to) return l;
                    if (l == a.from || l == a.to) return io(i, l) == o ? l : (a = i[o += r], r > 0 == a.level % 2 ? a.to : a.from);
                    if (a = i[o += r], !a) return null;
                    l = r > 0 == a.level % 2 ? oo(e, a.to, -1, n) : oo(e, a.from, 1, n)
                }
            }

            function lo(e, t, r, n) {
                var i = t + r;
                if (n)
                    for (; i > 0 && Hi(e.text.charAt(i));) i += r;
                return 0 > i || i > e.text.length ? null : i
            }
            var so = /gecko\/\d/i.test(navigator.userAgent),
                co = /MSIE \d/.test(navigator.userAgent),
                uo = /Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),
                fo = co || uo,
                ho = fo && (co ? document.documentMode || 6 : uo[1]),
                po = /WebKit\//.test(navigator.userAgent),
                go = po && /Qt\/\d+\.\d+/.test(navigator.userAgent),
                mo = /Chrome\//.test(navigator.userAgent),
                vo = /Opera\//.test(navigator.userAgent),
                yo = /Apple Computer/.test(navigator.vendor),
                bo = /Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),
                xo = /PhantomJS/.test(navigator.userAgent),
                wo = /AppleWebKit/.test(navigator.userAgent) && /Mobile\/\w+/.test(navigator.userAgent),
                ko = wo || /Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),
                Co = wo || /Mac/.test(navigator.platform),
                So = /win/i.test(navigator.platform),
                Lo = vo && navigator.userAgent.match(/Version\/(\d*\.\d*)/);
            Lo && (Lo = Number(Lo[1])), Lo && Lo >= 15 && (vo = !1, po = !0);
            var Mo = Co && (go || vo && (null == Lo || 12.11 > Lo)),
                To = so || fo && ho >= 9,
                Ao = !1,
                No = !1;
            g.prototype = zi({
                update: function(e) {
                    var t = e.scrollWidth > e.clientWidth + 1,
                        r = e.scrollHeight > e.clientHeight + 1,
                        n = e.nativeBarWidth;
                    if (r) {
                        this.vert.style.display = "block", this.vert.style.bottom = t ? n + "px" : "0";
                        var i = e.viewHeight - (t ? n : 0);
                        this.vert.firstChild.style.height = Math.max(0, e.scrollHeight - e.clientHeight + i) + "px"
                    } else this.vert.style.display = "", this.vert.firstChild.style.height = "0";
                    if (t) {
                        this.horiz.style.display = "block", this.horiz.style.right = r ? n + "px" : "0", this.horiz.style.left = e.barLeft + "px";
                        var o = e.viewWidth - e.barLeft - (r ? n : 0);
                        this.horiz.firstChild.style.width = e.scrollWidth - e.clientWidth + o + "px"
                    } else this.horiz.style.display = "", this.horiz.firstChild.style.width = "0";
                    return !this.checkedOverlay && e.clientHeight > 0 && (0 == n && this.overlayHack(), this.checkedOverlay = !0), {
                        right: r ? n : 0,
                        bottom: t ? n : 0
                    }
                },
                setScrollLeft: function(e) {
                    this.horiz.scrollLeft != e && (this.horiz.scrollLeft = e)
                },
                setScrollTop: function(e) {
                    this.vert.scrollTop != e && (this.vert.scrollTop = e)
                },
                overlayHack: function() {
                    var e = Co && !bo ? "12px" : "18px";
                    this.horiz.style.minHeight = this.vert.style.minWidth = e;
                    var t = this,
                        r = function(e) {
                            mi(e) != t.vert && mi(e) != t.horiz && Tt(t.cm, Gt)(e)
                        };
                    ka(this.vert, "mousedown", r), ka(this.horiz, "mousedown", r)
                },
                clear: function() {
                    var e = this.horiz.parentNode;
                    e.removeChild(this.horiz), e.removeChild(this.vert)
                }
            }, g.prototype), m.prototype = zi({
                update: function() {
                    return {
                        bottom: 0,
                        right: 0
                    }
                },
                setScrollLeft: function() {},
                setScrollTop: function() {},
                clear: function() {}
            }, m.prototype), e.scrollbarModel = {
                "native": g,
                "null": m
            }, L.prototype.signal = function(e, t) {
                ki(e, t) && this.events.push(arguments)
            }, L.prototype.finish = function() {
                for (var e = 0; e < this.events.length; e++) Sa.apply(null, this.events[e])
            };
            var Oo = e.Pos = function(e, t) {
                    return this instanceof Oo ? (this.line = e, void(this.ch = t)) : new Oo(e, t)
                },
                Wo = e.cmpPos = function(e, t) {
                    return e.line - t.line || e.ch - t.ch
                },
                zo = null;
            te.prototype = zi({
                init: function(e) {
                    function t(e) {
                        if (n.somethingSelected()) zo = n.getSelections(), r.inaccurateSelection && (r.prevInput = "", r.inaccurateSelection = !1, o.value = zo.join("\n"), Pa(o));
                        else {
                            if (!n.options.lineWiseCopyCut) return;
                            var t = J(n);
                            zo = t.text, "cut" == e.type ? n.setSelections(t.ranges, null, Aa) : (r.prevInput = "", o.value = t.text.join("\n"), Pa(o))
                        }
                        "cut" == e.type && (n.state.cutIncoming = !0)
                    }
                    var r = this,
                        n = this.cm,
                        i = this.wrapper = re(),
                        o = this.textarea = i.firstChild;
                    e.wrapper.insertBefore(i, e.wrapper.firstChild), wo && (o.style.width = "0px"), ka(o, "input", function() {
                        fo && ho >= 9 && r.hasSelection && (r.hasSelection = null), r.poll()
                    }), ka(o, "paste", function() {
                        if (po && !n.state.fakedLastChar && !(new Date - n.state.lastMiddleDown < 200)) {
                            var e = o.selectionStart,
                                t = o.selectionEnd;
                            o.value += "$", o.selectionEnd = t, o.selectionStart = e, n.state.fakedLastChar = !0
                        }
                        n.state.pasteIncoming = !0, r.fastPoll()
                    }), ka(o, "cut", t), ka(o, "copy", t), ka(e.scroller, "paste", function(t) {
                        Vt(e, t) || (n.state.pasteIncoming = !0, r.focus())
                    }), ka(e.lineSpace, "selectstart", function(t) {
                        Vt(e, t) || ba(t)
                    }), ka(o, "compositionstart", function() {
                        var e = n.getCursor("from");
                        r.composing = {
                            start: e,
                            range: n.markText(e, n.getCursor("to"), {
                                className: "CodeMirror-composing"
                            })
                        }
                    }), ka(o, "compositionend", function() {
                        r.composing && (r.poll(), r.composing.range.clear(), r.composing = null)
                    })
                },
                prepareSelection: function() {
                    var e = this.cm,
                        t = e.display,
                        r = e.doc,
                        n = ze(e);
                    if (e.options.moveInputWithCursor) {
                        var i = ut(e, r.sel.primary().head, "div"),
                            o = t.wrapper.getBoundingClientRect(),
                            a = t.lineDiv.getBoundingClientRect();
                        n.teTop = Math.max(0, Math.min(t.wrapper.clientHeight - 10, i.top + a.top - o.top)), n.teLeft = Math.max(0, Math.min(t.wrapper.clientWidth - 10, i.left + a.left - o.left))
                    }
                    return n
                },
                showSelection: function(e) {
                    var t = this.cm,
                        r = t.display;
                    ji(r.cursorDiv, e.cursors), ji(r.selectionDiv, e.selection), null != e.teTop && (this.wrapper.style.top = e.teTop + "px", this.wrapper.style.left = e.teLeft + "px")
                },
                reset: function(e) {
                    if (!this.contextMenuPending) {
                        var t, r, n = this.cm,
                            i = n.doc;
                        if (n.somethingSelected()) {
                            this.prevInput = "";
                            var o = i.sel.primary();
                            t = _a && (o.to().line - o.from().line > 100 || (r = n.getSelection()).length > 1e3);
                            var a = t ? "-" : r || n.getSelection();
                            this.textarea.value = a, n.state.focused && Pa(this.textarea), fo && ho >= 9 && (this.hasSelection = a)
                        } else e || (this.prevInput = this.textarea.value = "", fo && ho >= 9 && (this.hasSelection = null));
                        this.inaccurateSelection = t
                    }
                },
                getField: function() {
                    return this.textarea
                },
                supportsTouch: function() {
                    return !1
                },
                focus: function() {
                    if ("nocursor" != this.cm.options.readOnly && (!ko || Ri() != this.textarea)) try {
                        this.textarea.focus()
                    } catch (e) {}
                },
                blur: function() {
                    this.textarea.blur()
                },
                resetPosition: function() {
                    this.wrapper.style.top = this.wrapper.style.left = 0
                },
                receivedFocus: function() {
                    this.slowPoll()
                },
                slowPoll: function() {
                    var e = this;
                    e.pollingFast || e.polling.set(this.cm.options.pollInterval, function() {
                        e.poll(), e.cm.state.focused && e.slowPoll()
                    })
                },
                fastPoll: function() {
                    function e() {
                        var n = r.poll();
                        n || t ? (r.pollingFast = !1, r.slowPoll()) : (t = !0, r.polling.set(60, e))
                    }
                    var t = !1,
                        r = this;
                    r.pollingFast = !0, r.polling.set(20, e)
                },
                poll: function() {
                    var e = this.cm,
                        t = this.textarea,
                        r = this.prevInput;
                    if (!e.state.focused || Ka(t) && !r || Z(e) || e.options.disableInput || e.state.keySeq) return !1;
                    e.state.pasteIncoming && e.state.fakedLastChar && (t.value = t.value.substring(0, t.value.length - 1), e.state.fakedLastChar = !1);
                    var n = t.value;
                    if (n == r && !e.somethingSelected()) return !1;
                    if (fo && ho >= 9 && this.hasSelection === n || Co && /[\uf700-\uf7ff]/.test(n)) return e.display.input.reset(), !1;
                    if (e.doc.sel == e.display.selForContextMenu) {
                        var i = n.charCodeAt(0);
                        if (8203 != i || r || (r = ""), 8666 == i) return this.reset(), this.cm.execCommand("undo")
                    }
                    for (var o = 0, a = Math.min(r.length, n.length); a > o && r.charCodeAt(o) == n.charCodeAt(o);) ++o;
                    var l = this;
                    return Mt(e, function() {
                        Q(e, n.slice(o), r.length - o, null, l.composing ? "*compose" : null), n.length > 1e3 || n.indexOf("\n") > -1 ? t.value = l.prevInput = "" : l.prevInput = n, l.composing && (l.composing.range.clear(), l.composing.range = e.markText(l.composing.start, e.getCursor("to"), {
                            className: "CodeMirror-composing"
                        }))
                    }), !0
                },
                ensurePolled: function() {
                    this.pollingFast && this.poll() && (this.pollingFast = !1)
                },
                onKeyPress: function() {
                    fo && ho >= 9 && (this.hasSelection = null), this.fastPoll()
                },
                onContextMenu: function(e) {
                    function t() {
                        if (null != a.selectionStart) {
                            var e = i.somethingSelected(),
                                t = "" + (e ? a.value : "");
                            a.value = "", a.value = t, n.prevInput = e ? "" : "", a.selectionStart = 1, a.selectionEnd = t.length, o.selForContextMenu = i.doc.sel
                        }
                    }

                    function r() {
                        if (n.contextMenuPending = !1, n.wrapper.style.position = "relative", a.style.cssText = u, fo && 9 > ho && o.scrollbars.setScrollTop(o.scroller.scrollTop = s), null != a.selectionStart) {
                            (!fo || fo && 9 > ho) && t();
                            var e = 0,
                                r = function() {
                                    o.selForContextMenu == i.doc.sel && 0 == a.selectionStart && a.selectionEnd > 0 && "" == n.prevInput ? Tt(i, ra.selectAll)(i) : e++ < 10 ? o.detectingSelectAll = setTimeout(r, 500) : o.input.reset()
                                };
                            o.detectingSelectAll = setTimeout(r, 200)
                        }
                    }
                    var n = this,
                        i = n.cm,
                        o = i.display,
                        a = n.textarea,
                        l = qt(i, e),
                        s = o.scroller.scrollTop;
                    if (l && !vo) {
                        var c = i.options.resetSelectionOnContextMenu;
                        c && -1 == i.doc.sel.contains(l) && Tt(i, Le)(i.doc, de(l), Aa);
                        var u = a.style.cssText;
                        if (n.wrapper.style.position = "absolute", a.style.cssText = "position: fixed; width: 30px; height: 30px; top: " + (e.clientY - 5) + "px; left: " + (e.clientX - 5) + "px; z-index: 1000; background: " + (fo ? "rgba(255, 255, 255, .05)" : "transparent") + "; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);", po) var f = window.scrollY;
                        if (o.input.focus(), po && window.scrollTo(null, f), o.input.reset(), i.somethingSelected() || (a.value = n.prevInput = " "), n.contextMenuPending = !0, o.selForContextMenu = i.doc.sel, clearTimeout(o.detectingSelectAll), fo && ho >= 9 && t(), To) {
                            wa(e);
                            var d = function() {
                                Ca(window, "mouseup", d), setTimeout(r, 20)
                            };
                            ka(window, "mouseup", d)
                        } else setTimeout(r, 50)
                    }
                },
                setUneditable: Oi,
                needsContentAttribute: !1
            }, te.prototype), ne.prototype = zi({
                init: function(e) {
                    function t(e) {
                        if (n.somethingSelected()) zo = n.getSelections(), "cut" == e.type && n.replaceSelection("", null, "cut");
                        else {
                            if (!n.options.lineWiseCopyCut) return;
                            var t = J(n);
                            zo = t.text, "cut" == e.type && n.operation(function() {
                                n.setSelections(t.ranges, 0, Aa), n.replaceSelection("", null, "cut")
                            })
                        }
                        if (e.clipboardData && !wo) e.preventDefault(), e.clipboardData.clearData(), e.clipboardData.setData("text/plain", zo.join("\n"));
                        else {
                            var r = re(),
                                i = r.firstChild;
                            n.display.lineSpace.insertBefore(r, n.display.lineSpace.firstChild), i.value = zo.join("\n");
                            var o = document.activeElement;
                            Pa(i), setTimeout(function() {
                                n.display.lineSpace.removeChild(r), o.focus()
                            }, 50)
                        }
                    }
                    var r = this,
                        n = r.cm,
                        i = r.div = e.lineDiv;
                    i.contentEditable = "true", ee(i), ka(i, "paste", function(e) {
                        var t = e.clipboardData && e.clipboardData.getData("text/plain");
                        t && (e.preventDefault(), n.replaceSelection(t, null, "paste"))
                    }), ka(i, "compositionstart", function(e) {
                        var t = e.data;
                        if (r.composing = {
                                sel: n.doc.sel,
                                data: t,
                                startData: t
                            }, t) {
                            var i = n.doc.sel.primary(),
                                o = n.getLine(i.head.line),
                                a = o.indexOf(t, Math.max(0, i.head.ch - t.length));
                            a > -1 && a <= i.head.ch && (r.composing.sel = de(Oo(i.head.line, a), Oo(i.head.line, a + t.length)))
                        }
                    }), ka(i, "compositionupdate", function(e) {
                        r.composing.data = e.data
                    }), ka(i, "compositionend", function(e) {
                        var t = r.composing;
                        t && (e.data == t.startData || /\u200b/.test(e.data) || (t.data = e.data), setTimeout(function() {
                            t.handled || r.applyComposition(t), r.composing == t && (r.composing = null)
                        }, 50))
                    }), ka(i, "touchstart", function() {
                        r.forceCompositionEnd()
                    }), ka(i, "input", function() {
                        r.composing || r.pollContent() || Mt(r.cm, function() {
                            zt(n)
                        })
                    }), ka(i, "copy", t), ka(i, "cut", t)
                },
                prepareSelection: function() {
                    var e = ze(this.cm, !1);
                    return e.focus = this.cm.state.focused, e
                },
                showSelection: function(e) {
                    e && this.cm.display.view.length && (e.focus && this.showPrimarySelection(), this.showMultipleSelections(e))
                },
                showPrimarySelection: function() {
                    var e = window.getSelection(),
                        t = this.cm.doc.sel.primary(),
                        r = ae(this.cm, e.anchorNode, e.anchorOffset),
                        n = ae(this.cm, e.focusNode, e.focusOffset);
                    if (!r || r.bad || !n || n.bad || 0 != Wo(X(r, n), t.from()) || 0 != Wo($(r, n), t.to())) {
                        var i = ie(this.cm, t.from()),
                            o = ie(this.cm, t.to());
                        if (i || o) {
                            var a = this.cm.display.view,
                                l = e.rangeCount && e.getRangeAt(0);
                            if (i) {
                                if (!o) {
                                    var s = a[a.length - 1].measure,
                                        c = s.maps ? s.maps[s.maps.length - 1] : s.map;
                                    o = {
                                        node: c[c.length - 1],
                                        offset: c[c.length - 2] - c[c.length - 3]
                                    }
                                }
                            } else i = {
                                node: a[0].measure.map[2],
                                offset: 0
                            };
                            try {
                                var u = Ia(i.node, i.offset, o.offset, o.node)
                            } catch (f) {}
                            u && (e.removeAllRanges(), e.addRange(u), l && null == e.anchorNode ? e.addRange(l) : so && this.startGracePeriod()), this.rememberSelection()
                        }
                    }
                },
                startGracePeriod: function() {
                    var e = this;
                    clearTimeout(this.gracePeriod), this.gracePeriod = setTimeout(function() {
                        e.gracePeriod = !1, e.selectionChanged() && e.cm.operation(function() {
                            e.cm.curOp.selectionChanged = !0
                        })
                    }, 20)
                },
                showMultipleSelections: function(e) {
                    ji(this.cm.display.cursorDiv, e.cursors), ji(this.cm.display.selectionDiv, e.selection)
                },
                rememberSelection: function() {
                    var e = window.getSelection();
                    this.lastAnchorNode = e.anchorNode, this.lastAnchorOffset = e.anchorOffset, this.lastFocusNode = e.focusNode, this.lastFocusOffset = e.focusOffset
                },
                selectionInEditor: function() {
                    var e = window.getSelection();
                    if (!e.rangeCount) return !1;
                    var t = e.getRangeAt(0).commonAncestorContainer;
                    return Fa(this.div, t)
                },
                focus: function() {
                    "nocursor" != this.cm.options.readOnly && this.div.focus()
                },
                blur: function() {
                    this.div.blur()
                },
                getField: function() {
                    return this.div
                },
                supportsTouch: function() {
                    return !0
                },
                receivedFocus: function() {
                    function e() {
                        t.cm.state.focused && (t.pollSelection(), t.polling.set(t.cm.options.pollInterval, e))
                    }
                    var t = this;
                    this.selectionInEditor() ? this.pollSelection() : Mt(this.cm, function() {
                        t.cm.curOp.selectionChanged = !0
                    }), this.polling.set(this.cm.options.pollInterval, e)
                },
                selectionChanged: function() {
                    var e = window.getSelection();
                    return e.anchorNode != this.lastAnchorNode || e.anchorOffset != this.lastAnchorOffset || e.focusNode != this.lastFocusNode || e.focusOffset != this.lastFocusOffset
                },
                pollSelection: function() {
                    if (!this.composing && !this.gracePeriod && this.selectionChanged()) {
                        var e = window.getSelection(),
                            t = this.cm;
                        this.rememberSelection();
                        var r = ae(t, e.anchorNode, e.anchorOffset),
                            n = ae(t, e.focusNode, e.focusOffset);
                        r && n && Mt(t, function() {
                            Le(t.doc, de(r, n), Aa), (r.bad || n.bad) && (t.curOp.selectionChanged = !0)
                        })
                    }
                },
                pollContent: function() {
                    var e = this.cm,
                        t = e.display,
                        r = e.doc.sel.primary(),
                        n = r.from(),
                        i = r.to();
                    if (n.line < t.viewFrom || i.line > t.viewTo - 1) return !1;
                    var o;
                    if (n.line == t.viewFrom || 0 == (o = Dt(e, n.line))) var a = Yn(t.view[0].line),
                        l = t.view[0].node;
                    else var a = Yn(t.view[o].line),
                        l = t.view[o - 1].node.nextSibling;
                    var s = Dt(e, i.line);
                    if (s == t.view.length - 1) var c = t.viewTo - 1,
                        u = t.view[s].node;
                    else var c = Yn(t.view[s + 1].line) - 1,
                        u = t.view[s + 1].node.previousSibling;
                    for (var f = Ua(se(e, l, u, a, c)), d = _n(e.doc, Oo(a, 0), Oo(c, Kn(e.doc, c).text.length)); f.length > 1 && d.length > 1;)
                        if (Ti(f) == Ti(d)) f.pop(), d.pop(), c--;
                        else {
                            if (f[0] != d[0]) break;
                            f.shift(), d.shift(), a++
                        }
                    for (var h = 0, p = 0, g = f[0], m = d[0], v = Math.min(g.length, m.length); v > h && g.charCodeAt(h) == m.charCodeAt(h);) ++h;
                    for (var y = Ti(f), b = Ti(d), x = Math.min(y.length - (1 == f.length ? h : 0), b.length - (1 == d.length ? h : 0)); x > p && y.charCodeAt(y.length - p - 1) == b.charCodeAt(b.length - p - 1);) ++p;
                    f[f.length - 1] = y.slice(0, y.length - p), f[0] = f[0].slice(h);
                    var w = Oo(a, h),
                        k = Oo(c, d.length ? Ti(d).length - p : 0);
                    return f.length > 1 || f[0] || Wo(w, k) ? (Mr(e.doc, f, w, k, "+input"), !0) : void 0
                },
                ensurePolled: function() {
                    this.forceCompositionEnd()
                },
                reset: function() {
                    this.forceCompositionEnd()
                },
                forceCompositionEnd: function() {
                    this.composing && !this.composing.handled && (this.applyComposition(this.composing), this.composing.handled = !0, this.div.blur(), this.div.focus())
                },
                applyComposition: function(e) {
                    e.data && e.data != e.startData && Tt(this.cm, Q)(this.cm, e.data, 0, e.sel)
                },
                setUneditable: function(e) {
                    e.setAttribute("contenteditable", "false")
                },
                onKeyPress: function(e) {
                    e.preventDefault(), Tt(this.cm, Q)(this.cm, String.fromCharCode(null == e.charCode ? e.keyCode : e.charCode), 0)
                },
                onContextMenu: Oi,
                resetPosition: Oi,
                needsContentAttribute: !0
            }, ne.prototype), e.inputStyles = {
                textarea: te,
                contenteditable: ne
            }, ce.prototype = {
                primary: function() {
                    return this.ranges[this.primIndex]
                },
                equals: function(e) {
                    if (e == this) return !0;
                    if (e.primIndex != this.primIndex || e.ranges.length != this.ranges.length) return !1;
                    for (var t = 0; t < this.ranges.length; t++) {
                        var r = this.ranges[t],
                            n = e.ranges[t];
                        if (0 != Wo(r.anchor, n.anchor) || 0 != Wo(r.head, n.head)) return !1
                    }
                    return !0
                },
                deepCopy: function() {
                    for (var e = [], t = 0; t < this.ranges.length; t++) e[t] = new ue(_(this.ranges[t].anchor), _(this.ranges[t].head));
                    return new ce(e, this.primIndex)
                },
                somethingSelected: function() {
                    for (var e = 0; e < this.ranges.length; e++)
                        if (!this.ranges[e].empty()) return !0;
                    return !1
                },
                contains: function(e, t) {
                    t || (t = e);
                    for (var r = 0; r < this.ranges.length; r++) {
                        var n = this.ranges[r];
                        if (Wo(t, n.from()) >= 0 && Wo(e, n.to()) <= 0) return r
                    }
                    return -1
                }
            }, ue.prototype = {
                from: function() {
                    return X(this.anchor, this.head)
                },
                to: function() {
                    return $(this.anchor, this.head)
                },
                empty: function() {
                    return this.head.line == this.anchor.line && this.head.ch == this.anchor.ch
                }
            };
            var Po, Io, Do, Ho = {
                    left: 0,
                    right: 0,
                    top: 0,
                    bottom: 0
                },
                Eo = null,
                Fo = 0,
                jo = 0,
                Ro = 0,
                Bo = null;
            fo ? Bo = -.53 : so ? Bo = 15 : mo ? Bo = -.7 : yo && (Bo = -1 / 3);
            var Vo = function(e) {
                var t = e.wheelDeltaX,
                    r = e.wheelDeltaY;
                return null == t && e.detail && e.axis == e.HORIZONTAL_AXIS && (t = e.detail), null == r && e.detail && e.axis == e.VERTICAL_AXIS ? r = e.detail : null == r && (r = e.wheelDelta), {
                    x: t,
                    y: r
                }
            };
            e.wheelEventPixels = function(e) {
                var t = Vo(e);
                return t.x *= Bo, t.y *= Bo, t
            };
            var qo = new Si,
                Go = null,
                Uo = e.changeEnd = function(e) {
                    return e.text ? Oo(e.from.line + e.text.length - 1, Ti(e.text).length + (1 == e.text.length ? e.from.ch : 0)) : e.to
                };
            e.prototype = {
                constructor: e,
                focus: function() {
                    window.focus(), this.display.input.focus()
                },
                setOption: function(e, t) {
                    var r = this.options,
                        n = r[e];
                    (r[e] != t || "mode" == e) && (r[e] = t, _o.hasOwnProperty(e) && Tt(this, _o[e])(this, t, n))
                },
                getOption: function(e) {
                    return this.options[e]
                },
                getDoc: function() {
                    return this.doc
                },
                addKeyMap: function(e, t) {
                    this.state.keyMaps[t ? "push" : "unshift"](Br(e))
                },
                removeKeyMap: function(e) {
                    for (var t = this.state.keyMaps, r = 0; r < t.length; ++r)
                        if (t[r] == e || t[r].name == e) return t.splice(r, 1), !0
                },
                addOverlay: At(function(t, r) {
                    var n = t.token ? t : e.getMode(this.options, t);
                    if (n.startState) throw new Error("Overlays may not be stateful.");
                    this.state.overlays.push({
                        mode: n,
                        modeSpec: t,
                        opaque: r && r.opaque
                    }), this.state.modeGen++, zt(this)
                }),
                removeOverlay: At(function(e) {
                    for (var t = this.state.overlays, r = 0; r < t.length; ++r) {
                        var n = t[r].modeSpec;
                        if (n == e || "string" == typeof e && n.name == e) return t.splice(r, 1), this.state.modeGen++, void zt(this)
                    }
                }),
                indentLine: At(function(e, t, r) {
                    "string" != typeof t && "number" != typeof t && (t = null == t ? this.options.smartIndent ? "smart" : "prev" : t ? "add" : "subtract"), me(this.doc, e) && Ir(this, e, t, r)
                }),
                indentSelection: At(function(e) {
                    for (var t = this.doc.sel.ranges, r = -1, n = 0; n < t.length; n++) {
                        var i = t[n];
                        if (i.empty()) i.head.line > r && (Ir(this, i.head.line, e, !0), r = i.head.line, n == this.doc.sel.primIndex && zr(this));
                        else {
                            var o = i.from(),
                                a = i.to(),
                                l = Math.max(r, o.line);
                            r = Math.min(this.lastLine(), a.line - (a.ch ? 0 : 1)) + 1;
                            for (var s = l; r > s; ++s) Ir(this, s, e);
                            var c = this.doc.sel.ranges;
                            0 == o.ch && t.length == c.length && c[n].from().ch > 0 && we(this.doc, n, new ue(o, c[n].to()), Aa)
                        }
                    }
                }),
                getTokenAt: function(e, t) {
                    return Tn(this, e, t)
                },
                getLineTokens: function(e, t) {
                    return Tn(this, Oo(e), t, !0)
                },
                getTokenTypeAt: function(e) {
                    e = pe(this.doc, e);
                    var t, r = On(this, Kn(this.doc, e.line)),
                        n = 0,
                        i = (r.length - 1) / 2,
                        o = e.ch;
                    if (0 == o) t = r[2];
                    else
                        for (;;) {
                            var a = n + i >> 1;
                            if ((a ? r[2 * a - 1] : 0) >= o) i = a;
                            else {
                                if (!(r[2 * a + 1] < o)) {
                                    t = r[2 * a + 2];
                                    break
                                }
                                n = a + 1
                            }
                        }
                    var l = t ? t.indexOf("cm-overlay ") : -1;
                    return 0 > l ? t : 0 == l ? null : t.slice(0, l - 1)
                },
                getModeAt: function(t) {
                    var r = this.doc.mode;
                    return r.innerMode ? e.innerMode(r, this.getTokenAt(t).state).mode : r
                },
                getHelper: function(e, t) {
                    return this.getHelpers(e, t)[0]
                },
                getHelpers: function(e, t) {
                    var r = [];
                    if (!Jo.hasOwnProperty(t)) return r;
                    var n = Jo[t],
                        i = this.getModeAt(e);
                    if ("string" == typeof i[t]) n[i[t]] && r.push(n[i[t]]);
                    else if (i[t])
                        for (var o = 0; o < i[t].length; o++) {
                            var a = n[i[t][o]];
                            a && r.push(a)
                        } else i.helperType && n[i.helperType] ? r.push(n[i.helperType]) : n[i.name] && r.push(n[i.name]);
                    for (var o = 0; o < n._global.length; o++) {
                        var l = n._global[o];
                        l.pred(i, this) && -1 == Ai(r, l.val) && r.push(l.val)
                    }
                    return r
                },
                getStateAfter: function(e, t) {
                    var r = this.doc;
                    return e = he(r, null == e ? r.first + r.size - 1 : e), je(this, e + 1, t)
                },
                cursorCoords: function(e, t) {
                    var r, n = this.doc.sel.primary();
                    return r = null == e ? n.head : "object" == typeof e ? pe(this.doc, e) : e ? n.from() : n.to(), ut(this, r, t || "page")
                },
                charCoords: function(e, t) {
                    return ct(this, pe(this.doc, e), t || "page")
                },
                coordsChar: function(e, t) {
                    return e = st(this, e, t || "page"), ht(this, e.left, e.top)
                },
                lineAtHeight: function(e, t) {
                    return e = st(this, {
                        top: e,
                        left: 0
                    }, t || "page").top, Zn(this.doc, e + this.display.viewOffset)
                },
                heightAtLine: function(e, t) {
                    var r, n = !1;
                    if ("number" == typeof e) {
                        var i = this.doc.first + this.doc.size - 1;
                        e < this.doc.first ? e = this.doc.first : e > i && (e = i, n = !0), r = Kn(this.doc, e)
                    } else r = e;
                    return lt(this, r, {
                        top: 0,
                        left: 0
                    }, t || "page").top + (n ? this.doc.height - Qn(r) : 0)
                },
                defaultTextHeight: function() {
                    return gt(this.display)
                },
                defaultCharWidth: function() {
                    return mt(this.display)
                },
                setGutterMarker: At(function(e, t, r) {
                    return Dr(this.doc, e, "gutter", function(e) {
                        var n = e.gutterMarkers || (e.gutterMarkers = {});
                        return n[t] = r, !r && Di(n) && (e.gutterMarkers = null), !0
                    })
                }),
                clearGutter: At(function(e) {
                    var t = this,
                        r = t.doc,
                        n = r.first;
                    r.iter(function(r) {
                        r.gutterMarkers && r.gutterMarkers[e] && (r.gutterMarkers[e] = null, Pt(t, n, "gutter"), Di(r.gutterMarkers) && (r.gutterMarkers = null)), ++n
                    })
                }),
                lineInfo: function(e) {
                    if ("number" == typeof e) {
                        if (!me(this.doc, e)) return null;
                        var t = e;
                        if (e = Kn(this.doc, e), !e) return null
                    } else {
                        var t = Yn(e);
                        if (null == t) return null
                    }
                    return {
                        line: t,
                        handle: e,
                        text: e.text,
                        gutterMarkers: e.gutterMarkers,
                        textClass: e.textClass,
                        bgClass: e.bgClass,
                        wrapClass: e.wrapClass,
                        widgets: e.widgets
                    }
                },
                getViewport: function() {
                    return {
                        from: this.display.viewFrom,
                        to: this.display.viewTo
                    }
                },
                addWidget: function(e, t, r, n, i) {
                    var o = this.display;
                    e = ut(this, pe(this.doc, e));
                    var a = e.bottom,
                        l = e.left;
                    if (t.style.position = "absolute", t.setAttribute("cm-ignore-events", "true"), this.display.input.setUneditable(t), o.sizer.appendChild(t), "over" == n) a = e.top;
                    else if ("above" == n || "near" == n) {
                        var s = Math.max(o.wrapper.clientHeight, this.doc.height),
                            c = Math.max(o.sizer.clientWidth, o.lineSpace.clientWidth);
                        ("above" == n || e.bottom + t.offsetHeight > s) && e.top > t.offsetHeight ? a = e.top - t.offsetHeight : e.bottom + t.offsetHeight <= s && (a = e.bottom), l + t.offsetWidth > c && (l = c - t.offsetWidth)
                    }
                    t.style.top = a + "px", t.style.left = t.style.right = "", "right" == i ? (l = o.sizer.clientWidth - t.offsetWidth, t.style.right = "0px") : ("left" == i ? l = 0 : "middle" == i && (l = (o.sizer.clientWidth - t.offsetWidth) / 2), t.style.left = l + "px"), r && Nr(this, l, a, l + t.offsetWidth, a + t.offsetHeight)
                },
                triggerOnKeyDown: At(ar),
                triggerOnKeyPress: At(cr),
                triggerOnKeyUp: sr,
                execCommand: function(e) {
                    return ra.hasOwnProperty(e) ? ra[e](this) : void 0
                },
                findPosH: function(e, t, r, n) {
                    var i = 1;
                    0 > t && (i = -1, t = -t);
                    for (var o = 0, a = pe(this.doc, e); t > o && (a = Er(this.doc, a, i, r, n), !a.hitSide); ++o);
                    return a
                },
                moveH: At(function(e, t) {
                    var r = this;
                    r.extendSelectionsBy(function(n) {
                        return r.display.shift || r.doc.extend || n.empty() ? Er(r.doc, n.head, e, t, r.options.rtlMoveVisually) : 0 > e ? n.from() : n.to()
                    }, Oa)
                }),
                deleteH: At(function(e, t) {
                    var r = this.doc.sel,
                        n = this.doc;
                    r.somethingSelected() ? n.replaceSelection("", null, "+delete") : Hr(this, function(r) {
                        var i = Er(n, r.head, e, t, !1);
                        return 0 > e ? {
                            from: i,
                            to: r.head
                        } : {
                            from: r.head,
                            to: i
                        }
                    })
                }),
                findPosV: function(e, t, r, n) {
                    var i = 1,
                        o = n;
                    0 > t && (i = -1, t = -t);
                    for (var a = 0, l = pe(this.doc, e); t > a; ++a) {
                        var s = ut(this, l, "div");
                        if (null == o ? o = s.left : s.left = o, l = Fr(this, s, i, r), l.hitSide) break
                    }
                    return l
                },
                moveV: At(function(e, t) {
                    var r = this,
                        n = this.doc,
                        i = [],
                        o = !r.display.shift && !n.extend && n.sel.somethingSelected();
                    if (n.extendSelectionsBy(function(a) {
                            if (o) return 0 > e ? a.from() : a.to();
                            var l = ut(r, a.head, "div");
                            null != a.goalColumn && (l.left = a.goalColumn), i.push(l.left);
                            var s = Fr(r, l, e, t);
                            return "page" == t && a == n.sel.primary() && Wr(r, null, ct(r, s, "div").top - l.top), s
                        }, Oa), i.length)
                        for (var a = 0; a < n.sel.ranges.length; a++) n.sel.ranges[a].goalColumn = i[a]
                }),
                findWordAt: function(e) {
                    var t = this.doc,
                        r = Kn(t, e.line).text,
                        n = e.ch,
                        i = e.ch;
                    if (r) {
                        var o = this.getHelper(e, "wordChars");
                        (e.xRel < 0 || i == r.length) && n ? --n : ++i;
                        for (var a = r.charAt(n), l = Ii(a, o) ? function(e) {
                                return Ii(e, o)
                            } : /\s/.test(a) ? function(e) {
                                return /\s/.test(e)
                            } : function(e) {
                                return !/\s/.test(e) && !Ii(e)
                            }; n > 0 && l(r.charAt(n - 1));) --n;
                        for (; i < r.length && l(r.charAt(i));) ++i
                    }
                    return new ue(Oo(e.line, n), Oo(e.line, i))
                },
                toggleOverwrite: function(e) {
                    (null == e || e != this.state.overwrite) && ((this.state.overwrite = !this.state.overwrite) ? Va(this.display.cursorDiv, "CodeMirror-overwrite") : Ba(this.display.cursorDiv, "CodeMirror-overwrite"), Sa(this, "overwriteToggle", this, this.state.overwrite))
                },
                hasFocus: function() {
                    return this.display.input.getField() == Ri()
                },
                scrollTo: At(function(e, t) {
                    (null != e || null != t) && Pr(this), null != e && (this.curOp.scrollLeft = e), null != t && (this.curOp.scrollTop = t)
                }),
                getScrollInfo: function() {
                    var e = this.display.scroller;
                    return {
                        left: e.scrollLeft,
                        top: e.scrollTop,
                        height: e.scrollHeight - qe(this) - this.display.barHeight,
                        width: e.scrollWidth - qe(this) - this.display.barWidth,
                        clientHeight: Ue(this),
                        clientWidth: Ge(this)
                    }
                },
                scrollIntoView: At(function(e, t) {
                    if (null == e ? (e = {
                            from: this.doc.sel.primary().head,
                            to: null
                        }, null == t && (t = this.options.cursorScrollMargin)) : "number" == typeof e ? e = {
                            from: Oo(e, 0),
                            to: null
                        } : null == e.from && (e = {
                            from: e,
                            to: null
                        }), e.to || (e.to = e.from), e.margin = t || 0, null != e.from.line) Pr(this), this.curOp.scrollToPos = e;
                    else {
                        var r = Or(this, Math.min(e.from.left, e.to.left), Math.min(e.from.top, e.to.top) - e.margin, Math.max(e.from.right, e.to.right), Math.max(e.from.bottom, e.to.bottom) + e.margin);
                        this.scrollTo(r.scrollLeft, r.scrollTop)
                    }
                }),
                setSize: At(function(e, t) {
                    function r(e) {
                        return "number" == typeof e || /^\d+$/.test(String(e)) ? e + "px" : e
                    }
                    var n = this;
                    null != e && (n.display.wrapper.style.width = r(e)), null != t && (n.display.wrapper.style.height = r(t)), n.options.lineWrapping && nt(this);
                    var i = n.display.viewFrom;
                    n.doc.iter(i, n.display.viewTo, function(e) {
                        if (e.widgets)
                            for (var t = 0; t < e.widgets.length; t++)
                                if (e.widgets[t].noHScroll) {
                                    Pt(n, i, "widget");
                                    break
                                }++i
                    }), n.curOp.forceUpdate = !0, Sa(n, "refresh", this)
                }),
                operation: function(e) {
                    return Mt(this, e)
                },
                refresh: At(function() {
                    var e = this.display.cachedTextHeight;
                    zt(this), this.curOp.forceUpdate = !0, it(this), this.scrollTo(this.doc.scrollLeft, this.doc.scrollTop), u(this), (null == e || Math.abs(e - gt(this.display)) > .5) && a(this), Sa(this, "refresh", this)
                }),
                swapDoc: At(function(e) {
                    var t = this.doc;
                    return t.cm = null, Un(this, e), it(this), this.display.input.reset(), this.scrollTo(e.scrollLeft, e.scrollTop), this.curOp.forceScroll = !0, yi(this, "swapDoc", this, t), t
                }),
                getInputField: function() {
                    return this.display.input.getField()
                },
                getWrapperElement: function() {
                    return this.display.wrapper
                },
                getScrollerElement: function() {
                    return this.display.scroller
                },
                getGutterElement: function() {
                    return this.display.gutters
                }
            }, Ci(e);
            var Ko = e.defaults = {},
                _o = e.optionHandlers = {},
                $o = e.Init = {
                    toString: function() {
                        return "CodeMirror.Init"
                    }
                };
            jr("value", "", function(e, t) {
                e.setValue(t)
            }, !0), jr("mode", null, function(e, t) {
                e.doc.modeOption = t, r(e)
            }, !0), jr("indentUnit", 2, r, !0), jr("indentWithTabs", !1), jr("smartIndent", !0), jr("tabSize", 4, function(e) {
                n(e), it(e), zt(e)
            }, !0), jr("specialChars", /[\t\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g, function(t, r, n) {
                t.state.specialChars = new RegExp(r.source + (r.test(" ") ? "" : "|    "), "g"), n != e.Init && t.refresh()
            }), jr("specialCharPlaceholder", In, function(e) {
                e.refresh()
            }, !0), jr("electricChars", !0), jr("inputStyle", ko ? "contenteditable" : "textarea", function() {
                throw new Error("inputStyle can not (yet) be changed in a running editor")
            }, !0), jr("rtlMoveVisually", !So), jr("wholeLineUpdateBefore", !0), jr("theme", "default", function(e) {
                l(e), s(e)
            }, !0), jr("keyMap", "default", function(t, r, n) {
                var i = Br(r),
                    o = n != e.Init && Br(n);
                o && o.detach && o.detach(t, i), i.attach && i.attach(t, o || null)
            }), jr("extraKeys", null), jr("lineWrapping", !1, i, !0), jr("gutters", [], function(e) {
                h(e.options), s(e)
            }, !0), jr("fixedGutter", !0, function(e, t) {
                e.display.gutters.style.left = t ? S(e.display) + "px" : "0", e.refresh()
            }, !0), jr("coverGutterNextToScrollbar", !1, function(e) {
                y(e)
            }, !0), jr("scrollbarStyle", "native", function(e) {
                v(e), y(e), e.display.scrollbars.setScrollTop(e.doc.scrollTop), e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)
            }, !0), jr("lineNumbers", !1, function(e) {
                h(e.options), s(e)
            }, !0), jr("firstLineNumber", 1, s, !0), jr("lineNumberFormatter", function(e) {
                return e
            }, s, !0), jr("showCursorWhenSelecting", !1, We, !0), jr("resetSelectionOnContextMenu", !0), jr("lineWiseCopyCut", !0), jr("readOnly", !1, function(e, t) {
                "nocursor" == t ? (dr(e), e.display.input.blur(), e.display.disabled = !0) : (e.display.disabled = !1, t || e.display.input.reset())
            }), jr("disableInput", !1, function(e, t) {
                t || e.display.input.reset()
            }, !0), jr("dragDrop", !0, Rt), jr("cursorBlinkRate", 530), jr("cursorScrollMargin", 0), jr("cursorHeight", 1, We, !0), jr("singleCursorHeightPerLine", !0, We, !0), jr("workTime", 100), jr("workDelay", 100), jr("flattenSpans", !0, n, !0), jr("addModeClass", !1, n, !0), jr("pollInterval", 100), jr("undoDepth", 200, function(e, t) {
                e.doc.history.undoDepth = t
            }), jr("historyEventDelay", 1250), jr("viewportMargin", 10, function(e) {
                e.refresh()
            }, !0), jr("maxHighlightLength", 1e4, n, !0), jr("moveInputWithCursor", !0, function(e, t) {
                t || e.display.input.resetPosition()
            }), jr("tabindex", null, function(e, t) {
                e.display.input.getField().tabIndex = t || ""
            }), jr("autofocus", null);
            var Xo = e.modes = {},
                Yo = e.mimeModes = {};
            e.defineMode = function(t, r) {
                e.defaults.mode || "null" == t || (e.defaults.mode = t), arguments.length > 2 && (r.dependencies = Array.prototype.slice.call(arguments, 2)), Xo[t] = r
            }, e.defineMIME = function(e, t) {
                Yo[e] = t
            }, e.resolveMode = function(t) {
                if ("string" == typeof t && Yo.hasOwnProperty(t)) t = Yo[t];
                else if (t && "string" == typeof t.name && Yo.hasOwnProperty(t.name)) {
                    var r = Yo[t.name];
                    "string" == typeof r && (r = {
                        name: r
                    }), t = Wi(r, t), t.name = r.name
                } else if ("string" == typeof t && /^[\w\-]+\/[\w\-]+\+xml$/.test(t)) return e.resolveMode("application/xml");
                return "string" == typeof t ? {
                    name: t
                } : t || {
                    name: "null"
                }
            }, e.getMode = function(t, r) {
                var r = e.resolveMode(r),
                    n = Xo[r.name];
                if (!n) return e.getMode(t, "text/plain");
                var i = n(t, r);
                if (Zo.hasOwnProperty(r.name)) {
                    var o = Zo[r.name];
                    for (var a in o) o.hasOwnProperty(a) && (i.hasOwnProperty(a) && (i["_" + a] = i[a]), i[a] = o[a])
                }
                if (i.name = r.name, r.helperType && (i.helperType = r.helperType), r.modeProps)
                    for (var a in r.modeProps) i[a] = r.modeProps[a];
                return i
            }, e.defineMode("null", function() {
                return {
                    token: function(e) {
                        e.skipToEnd()
                    }
                }
            }), e.defineMIME("text/plain", "null");
            var Zo = e.modeExtensions = {};
            e.extendMode = function(e, t) {
                var r = Zo.hasOwnProperty(e) ? Zo[e] : Zo[e] = {};
                zi(t, r)
            }, e.defineExtension = function(t, r) {
                e.prototype[t] = r
            }, e.defineDocExtension = function(e, t) {
                ma.prototype[e] = t
            }, e.defineOption = jr;
            var Qo = [];
            e.defineInitHook = function(e) {
                Qo.push(e)
            };
            var Jo = e.helpers = {};
            e.registerHelper = function(t, r, n) {
                Jo.hasOwnProperty(t) || (Jo[t] = e[t] = {
                    _global: []
                }), Jo[t][r] = n
            }, e.registerGlobalHelper = function(t, r, n, i) {
                e.registerHelper(t, r, i), Jo[t]._global.push({
                    pred: n,
                    val: i
                })
            };
            var ea = e.copyState = function(e, t) {
                    if (t === !0) return t;
                    if (e.copyState) return e.copyState(t);
                    var r = {};
                    for (var n in t) {
                        var i = t[n];
                        i instanceof Array && (i = i.concat([])), r[n] = i
                    }
                    return r
                },
                ta = e.startState = function(e, t, r) {
                    return e.startState ? e.startState(t, r) : !0
                };
            e.innerMode = function(e, t) {
                for (; e.innerMode;) {
                    var r = e.innerMode(t);
                    if (!r || r.mode == e) break;
                    t = r.state, e = r.mode
                }
                return r || {
                    mode: e,
                    state: t
                }
            };
            var ra = e.commands = {
                    selectAll: function(e) {
                        e.setSelection(Oo(e.firstLine(), 0), Oo(e.lastLine()), Aa)
                    },
                    singleSelection: function(e) {
                        e.setSelection(e.getCursor("anchor"), e.getCursor("head"), Aa)
                    },
                    killLine: function(e) {
                        Hr(e, function(t) {
                            if (t.empty()) {
                                var r = Kn(e.doc, t.head.line).text.length;
                                return t.head.ch == r && t.head.line < e.lastLine() ? {
                                    from: t.head,
                                    to: Oo(t.head.line + 1, 0)
                                } : {
                                    from: t.head,
                                    to: Oo(t.head.line, r)
                                }
                            }
                            return {
                                from: t.from(),
                                to: t.to()
                            }
                        })
                    },
                    deleteLine: function(e) {
                        Hr(e, function(t) {
                            return {
                                from: Oo(t.from().line, 0),
                                to: pe(e.doc, Oo(t.to().line + 1, 0))
                            }
                        })
                    },
                    delLineLeft: function(e) {
                        Hr(e, function(e) {
                            return {
                                from: Oo(e.from().line, 0),
                                to: e.from()
                            }
                        })
                    },
                    delWrappedLineLeft: function(e) {
                        Hr(e, function(t) {
                            var r = e.charCoords(t.head, "div").top + 5,
                                n = e.coordsChar({
                                    left: 0,
                                    top: r
                                }, "div");
                            return {
                                from: n,
                                to: t.from()
                            }
                        })
                    },
                    delWrappedLineRight: function(e) {
                        Hr(e, function(t) {
                            var r = e.charCoords(t.head, "div").top + 5,
                                n = e.coordsChar({
                                    left: e.display.lineDiv.offsetWidth + 100,
                                    top: r
                                }, "div");
                            return {
                                from: t.from(),
                                to: n
                            }
                        })
                    },
                    undo: function(e) {
                        e.undo()
                    },
                    redo: function(e) {
                        e.redo()
                    },
                    undoSelection: function(e) {
                        e.undoSelection()
                    },
                    redoSelection: function(e) {
                        e.redoSelection()
                    },
                    goDocStart: function(e) {
                        e.extendSelection(Oo(e.firstLine(), 0))
                    },
                    goDocEnd: function(e) {
                        e.extendSelection(Oo(e.lastLine()))
                    },
                    goLineStart: function(e) {
                        e.extendSelectionsBy(function(t) {
                            return eo(e, t.head.line)
                        }, {
                            origin: "+move",
                            bias: 1
                        })
                    },
                    goLineStartSmart: function(e) {
                        e.extendSelectionsBy(function(t) {
                            return ro(e, t.head)
                        }, {
                            origin: "+move",
                            bias: 1
                        })
                    },
                    goLineEnd: function(e) {
                        e.extendSelectionsBy(function(t) {
                            return to(e, t.head.line)
                        }, {
                            origin: "+move",
                            bias: -1
                        })
                    },
                    goLineRight: function(e) {
                        e.extendSelectionsBy(function(t) {
                            var r = e.charCoords(t.head, "div").top + 5;
                            return e.coordsChar({
                                left: e.display.lineDiv.offsetWidth + 100,
                                top: r
                            }, "div")
                        }, Oa)
                    },
                    goLineLeft: function(e) {
                        e.extendSelectionsBy(function(t) {
                            var r = e.charCoords(t.head, "div").top + 5;
                            return e.coordsChar({
                                left: 0,
                                top: r
                            }, "div")
                        }, Oa)
                    },
                    goLineLeftSmart: function(e) {
                        e.extendSelectionsBy(function(t) {
                            var r = e.charCoords(t.head, "div").top + 5,
                                n = e.coordsChar({
                                    left: 0,
                                    top: r
                                }, "div");
                            return n.ch < e.getLine(n.line).search(/\S/) ? ro(e, t.head) : n
                        }, Oa)
                    },
                    goLineUp: function(e) {
                        e.moveV(-1, "line")
                    },
                    goLineDown: function(e) {
                        e.moveV(1, "line")
                    },
                    goPageUp: function(e) {
                        e.moveV(-1, "page")
                    },
                    goPageDown: function(e) {
                        e.moveV(1, "page")
                    },
                    goCharLeft: function(e) {
                        e.moveH(-1, "char")
                    },
                    goCharRight: function(e) {
                        e.moveH(1, "char")
                    },
                    goColumnLeft: function(e) {
                        e.moveH(-1, "column")
                    },
                    goColumnRight: function(e) {
                        e.moveH(1, "column")
                    },
                    goWordLeft: function(e) {
                        e.moveH(-1, "word")
                    },
                    goGroupRight: function(e) {
                        e.moveH(1, "group")
                    },
                    goGroupLeft: function(e) {
                        e.moveH(-1, "group")
                    },
                    goWordRight: function(e) {
                        e.moveH(1, "word")
                    },
                    delCharBefore: function(e) {
                        e.deleteH(-1, "char")
                    },
                    delCharAfter: function(e) {
                        e.deleteH(1, "char")
                    },
                    delWordBefore: function(e) {
                        e.deleteH(-1, "word")
                    },
                    delWordAfter: function(e) {
                        e.deleteH(1, "word")
                    },
                    delGroupBefore: function(e) {
                        e.deleteH(-1, "group")
                    },
                    delGroupAfter: function(e) {
                        e.deleteH(1, "group")
                    },
                    indentAuto: function(e) {
                        e.indentSelection("smart")
                    },
                    indentMore: function(e) {
                        e.indentSelection("add")
                    },
                    indentLess: function(e) {
                        e.indentSelection("subtract")
                    },
                    insertTab: function(e) {
                        e.replaceSelection(" ")
                    },
                    insertSoftTab: function(e) {
                        for (var t = [], r = e.listSelections(), n = e.options.tabSize, i = 0; i < r.length; i++) {
                            var o = r[i].from(),
                                a = Wa(e.getLine(o.line), o.ch, n);
                            t.push(new Array(n - a % n + 1).join(" "))
                        }
                        e.replaceSelections(t)
                    },
                    defaultTab: function(e) {
                        e.somethingSelected() ? e.indentSelection("add") : e.execCommand("insertTab")
                    },
                    transposeChars: function(e) {
                        Mt(e, function() {
                            for (var t = e.listSelections(), r = [], n = 0; n < t.length; n++) {
                                var i = t[n].head,
                                    o = Kn(e.doc, i.line).text;
                                if (o)
                                    if (i.ch == o.length && (i = new Oo(i.line, i.ch - 1)), i.ch > 0) i = new Oo(i.line, i.ch + 1), e.replaceRange(o.charAt(i.ch - 1) + o.charAt(i.ch - 2), Oo(i.line, i.ch - 2), i, "+transpose");
                                    else if (i.line > e.doc.first) {
                                    var a = Kn(e.doc, i.line - 1).text;
                                    a && e.replaceRange(o.charAt(0) + "\n" + a.charAt(a.length - 1), Oo(i.line - 1, a.length - 1), Oo(i.line, 1), "+transpose")
                                }
                                r.push(new ue(i, i))
                            }
                            e.setSelections(r)
                        })
                    },
                    newlineAndIndent: function(e) {
                        Mt(e, function() {
                            for (var t = e.listSelections().length, r = 0; t > r; r++) {
                                var n = e.listSelections()[r];
                                e.replaceRange("\n", n.anchor, n.head, "+input"), e.indentLine(n.from().line + 1, null, !0), zr(e)
                            }
                        })
                    },
                    toggleOverwrite: function(e) {
                        e.toggleOverwrite()
                    }
                },
                na = e.keyMap = {};
            na.basic = {
                Left: "goCharLeft",
                Right: "goCharRight",
                Up: "goLineUp",
                Down: "goLineDown",
                End: "goLineEnd",
                Home: "goLineStartSmart",
                PageUp: "goPageUp",
                PageDown: "goPageDown",
                Delete: "delCharAfter",
                Backspace: "delCharBefore",
                "Shift-Backspace": "delCharBefore",
                Tab: "defaultTab",
                "Shift-Tab": "indentAuto",
                Enter: "newlineAndIndent",
                Insert: "toggleOverwrite",
                Esc: "singleSelection"
            }, na.pcDefault = {
                "Ctrl-A": "selectAll",
                "Ctrl-D": "deleteLine",
                "Ctrl-Z": "undo",
                "Shift-Ctrl-Z": "redo",
                "Ctrl-Y": "redo",
                "Ctrl-Home": "goDocStart",
                "Ctrl-End": "goDocEnd",
                "Ctrl-Up": "goLineUp",
                "Ctrl-Down": "goLineDown",
                "Ctrl-Left": "goGroupLeft",
                "Ctrl-Right": "goGroupRight",
                "Alt-Left": "goLineStart",
                "Alt-Right": "goLineEnd",
                "Ctrl-Backspace": "delGroupBefore",
                "Ctrl-Delete": "delGroupAfter",
                "Ctrl-S": "save",
                "Ctrl-F": "find",
                "Ctrl-G": "findNext",
                "Shift-Ctrl-G": "findPrev",
                "Shift-Ctrl-F": "replace",
                "Shift-Ctrl-R": "replaceAll",
                "Ctrl-[": "indentLess",
                "Ctrl-]": "indentMore",
                "Ctrl-U": "undoSelection",
                "Shift-Ctrl-U": "redoSelection",
                "Alt-U": "redoSelection",
                fallthrough: "basic"
            }, na.emacsy = {
                "Ctrl-F": "goCharRight",
                "Ctrl-B": "goCharLeft",
                "Ctrl-P": "goLineUp",
                "Ctrl-N": "goLineDown",
                "Alt-F": "goWordRight",
                "Alt-B": "goWordLeft",
                "Ctrl-A": "goLineStart",
                "Ctrl-E": "goLineEnd",
                "Ctrl-V": "goPageDown",
                "Shift-Ctrl-V": "goPageUp",
                "Ctrl-D": "delCharAfter",
                "Ctrl-H": "delCharBefore",
                "Alt-D": "delWordAfter",
                "Alt-Backspace": "delWordBefore",
                "Ctrl-K": "killLine",
                "Ctrl-T": "transposeChars"
            }, na.macDefault = {
                "Cmd-A": "selectAll",
                "Cmd-D": "deleteLine",
                "Cmd-Z": "undo",
                "Shift-Cmd-Z": "redo",
                "Cmd-Y": "redo",
                "Cmd-Home": "goDocStart",
                "Cmd-Up": "goDocStart",
                "Cmd-End": "goDocEnd",
                "Cmd-Down": "goDocEnd",
                "Alt-Left": "goGroupLeft",
                "Alt-Right": "goGroupRight",
                "Cmd-Left": "goLineLeft",
                "Cmd-Right": "goLineRight",
                "Alt-Backspace": "delGroupBefore",
                "Ctrl-Alt-Backspace": "delGroupAfter",
                "Alt-Delete": "delGroupAfter",
                "Cmd-S": "save",
                "Cmd-F": "find",
                "Cmd-G": "findNext",
                "Shift-Cmd-G": "findPrev",
                "Cmd-Alt-F": "replace",
                "Shift-Cmd-Alt-F": "replaceAll",
                "Cmd-[": "indentLess",
                "Cmd-]": "indentMore",
                "Cmd-Backspace": "delWrappedLineLeft",
                "Cmd-Delete": "delWrappedLineRight",
                "Cmd-U": "undoSelection",
                "Shift-Cmd-U": "redoSelection",
                "Ctrl-Up": "goDocStart",
                "Ctrl-Down": "goDocEnd",
                fallthrough: ["basic", "emacsy"]
            }, na["default"] = Co ? na.macDefault : na.pcDefault, e.normalizeKeyMap = function(e) {
                var t = {};
                for (var r in e)
                    if (e.hasOwnProperty(r)) {
                        var n = e[r];
                        if (/^(name|fallthrough|(de|at)tach)$/.test(r)) continue;
                        if ("..." == n) {
                            delete e[r];
                            continue
                        }
                        for (var i = Ni(r.split(" "), Rr), o = 0; o < i.length; o++) {
                            var a, l;
                            o == i.length - 1 ? (l = r, a = n) : (l = i.slice(0, o + 1).join(" "), a = "...");
                            var s = t[l];
                            if (s) {
                                if (s != a) throw new Error("Inconsistent bindings for " + l)
                            } else t[l] = a
                        }
                        delete e[r]
                    }
                for (var c in t) e[c] = t[c];
                return e
            };
            var ia = e.lookupKey = function(e, t, r, n) {
                    t = Br(t);
                    var i = t.call ? t.call(e, n) : t[e];
                    if (i === !1) return "nothing";
                    if ("..." === i) return "multi";
                    if (null != i && r(i)) return "handled";
                    if (t.fallthrough) {
                        if ("[object Array]" != Object.prototype.toString.call(t.fallthrough)) return ia(e, t.fallthrough, r, n);
                        for (var o = 0; o < t.fallthrough.length; o++) {
                            var a = ia(e, t.fallthrough[o], r, n);
                            if (a) return a
                        }
                    }
                },
                oa = e.isModifierKey = function(e) {
                    var t = "string" == typeof e ? e : Xa[e.keyCode];
                    return "Ctrl" == t || "Alt" == t || "Shift" == t || "Mod" == t
                },
                aa = e.keyName = function(e, t) {
                    if (vo && 34 == e.keyCode && e["char"]) return !1;
                    var r = Xa[e.keyCode],
                        n = r;
                    return null == n || e.altGraphKey ? !1 : (e.altKey && "Alt" != r && (n = "Alt-" + n), (Mo ? e.metaKey : e.ctrlKey) && "Ctrl" != r && (n = "Ctrl-" + n), (Mo ? e.ctrlKey : e.metaKey) && "Cmd" != r && (n = "Cmd-" + n), !t && e.shiftKey && "Shift" != r && (n = "Shift-" + n), n)
                };
            e.fromTextArea = function(t, r) {
                function n() {
                    t.value = c.getValue()
                }
                if (r = r ? zi(r) : {}, r.value = t.value, !r.tabindex && t.tabIndex && (r.tabindex = t.tabIndex), !r.placeholder && t.placeholder && (r.placeholder = t.placeholder), null == r.autofocus) {
                    var i = Ri();
                    r.autofocus = i == t || null != t.getAttribute("autofocus") && i == document.body
                }
                if (t.form && (ka(t.form, "submit", n), !r.leaveSubmitMethodAlone)) {
                    var o = t.form,
                        a = o.submit;
                    try {
                        var l = o.submit = function() {
                            n(), o.submit = a, o.submit(), o.submit = l
                        }
                    } catch (s) {}
                }
                r.finishInit = function(e) {
                    e.save = n, e.getTextArea = function() {
                        return t
                    }, e.toTextArea = function() {
                        e.toTextArea = isNaN, n(), t.parentNode.removeChild(e.getWrapperElement()), t.style.display = "", t.form && (Ca(t.form, "submit", n), "function" == typeof t.form.submit && (t.form.submit = a))
                    }
                }, t.style.display = "none";
                var c = e(function(e) {
                    t.parentNode.insertBefore(e, t.nextSibling)
                }, r);
                return c
            };
            var la = e.StringStream = function(e, t) {
                this.pos = this.start = 0, this.string = e, this.tabSize = t || 8, this.lastColumnPos = this.lastColumnValue = 0, this.lineStart = 0
            };
            la.prototype = {
                eol: function() {
                    return this.pos >= this.string.length
                },
                sol: function() {
                    return this.pos == this.lineStart
                },
                peek: function() {
                    return this.string.charAt(this.pos) || void 0
                },
                next: function() {
                    return this.pos < this.string.length ? this.string.charAt(this.pos++) : void 0
                },
                eat: function(e) {
                    var t = this.string.charAt(this.pos);
                    if ("string" == typeof e) var r = t == e;
                    else var r = t && (e.test ? e.test(t) : e(t));
                    return r ? (++this.pos, t) : void 0
                },
                eatWhile: function(e) {
                    for (var t = this.pos; this.eat(e););
                    return this.pos > t
                },
                eatSpace: function() {
                    for (var e = this.pos;
                        /[\s\u00a0]/.test(this.string.charAt(this.pos));) ++this.pos;
                    return this.pos > e
                },
                skipToEnd: function() {
                    this.pos = this.string.length
                },
                skipTo: function(e) {
                    var t = this.string.indexOf(e, this.pos);
                    return t > -1 ? (this.pos = t, !0) : void 0
                },
                backUp: function(e) {
                    this.pos -= e
                },
                column: function() {
                    return this.lastColumnPos < this.start && (this.lastColumnValue = Wa(this.string, this.start, this.tabSize, this.lastColumnPos, this.lastColumnValue), this.lastColumnPos = this.start), this.lastColumnValue - (this.lineStart ? Wa(this.string, this.lineStart, this.tabSize) : 0)
                },
                indentation: function() {
                    return Wa(this.string, null, this.tabSize) - (this.lineStart ? Wa(this.string, this.lineStart, this.tabSize) : 0)
                },
                match: function(e, t, r) {
                    if ("string" != typeof e) {
                        var n = this.string.slice(this.pos).match(e);
                        return n && n.index > 0 ? null : (n && t !== !1 && (this.pos += n[0].length), n)
                    }
                    var i = function(e) {
                            return r ? e.toLowerCase() : e
                        },
                        o = this.string.substr(this.pos, e.length);
                    return i(o) == i(e) ? (t !== !1 && (this.pos += e.length), !0) : void 0
                },
                current: function() {
                    return this.string.slice(this.start, this.pos)
                },
                hideFirstChars: function(e, t) {
                    this.lineStart += e;
                    try {
                        return t()
                    } finally {
                        this.lineStart -= e
                    }
                }
            };
            var sa = 0,
                ca = e.TextMarker = function(e, t) {
                    this.lines = [], this.type = t, this.doc = e, this.id = ++sa
                };
            Ci(ca), ca.prototype.clear = function() {
                if (!this.explicitlyCleared) {
                    var e = this.doc.cm,
                        t = e && !e.curOp;
                    if (t && vt(e), ki(this, "clear")) {
                        var r = this.find();
                        r && yi(this, "clear", r.from, r.to)
                    }
                    for (var n = null, i = null, o = 0; o < this.lines.length; ++o) {
                        var a = this.lines[o],
                            l = $r(a.markedSpans, this);
                        e && !this.collapsed ? Pt(e, Yn(a), "text") : e && (null != l.to && (i = Yn(a)), null != l.from && (n = Yn(a))), a.markedSpans = Xr(a.markedSpans, l), null == l.from && this.collapsed && !vn(this.doc, a) && e && Xn(a, gt(e.display))
                    }
                    if (e && this.collapsed && !e.options.lineWrapping)
                        for (var o = 0; o < this.lines.length; ++o) {
                            var s = hn(this.lines[o]),
                                c = f(s);
                            c > e.display.maxLineLength && (e.display.maxLine = s, e.display.maxLineLength = c, e.display.maxLineChanged = !0)
                        }
                    null != n && e && this.collapsed && zt(e, n, i + 1), this.lines.length = 0, this.explicitlyCleared = !0, this.atomic && this.doc.cantEdit && (this.doc.cantEdit = !1, e && Ae(e.doc)), e && yi(e, "markerCleared", e, this), t && bt(e), this.parent && this.parent.clear()
                }
            }, ca.prototype.find = function(e, t) {
                null == e && "bookmark" == this.type && (e = 1);
                for (var r, n, i = 0; i < this.lines.length; ++i) {
                    var o = this.lines[i],
                        a = $r(o.markedSpans, this);
                    if (null != a.from && (r = Oo(t ? o : Yn(o), a.from), -1 == e)) return r;
                    if (null != a.to && (n = Oo(t ? o : Yn(o), a.to), 1 == e)) return n
                }
                return r && {
                    from: r,
                    to: n
                }
            }, ca.prototype.changed = function() {
                var e = this.find(-1, !0),
                    t = this,
                    r = this.doc.cm;
                e && r && Mt(r, function() {
                    var n = e.line,
                        i = Yn(e.line),
                        o = Ye(r, i);
                    if (o && (rt(o), r.curOp.selectionChanged = r.curOp.forceUpdate = !0), r.curOp.updateMaxLine = !0, !vn(t.doc, n) && null != t.height) {
                        var a = t.height;
                        t.height = null;
                        var l = xn(t) - a;
                        l && Xn(n, n.height + l)
                    }
                })
            }, ca.prototype.attachLine = function(e) {
                if (!this.lines.length && this.doc.cm) {
                    var t = this.doc.cm.curOp;
                    t.maybeHiddenMarkers && -1 != Ai(t.maybeHiddenMarkers, this) || (t.maybeUnhiddenMarkers || (t.maybeUnhiddenMarkers = [])).push(this)
                }
                this.lines.push(e)
            }, ca.prototype.detachLine = function(e) {
                if (this.lines.splice(Ai(this.lines, e), 1), !this.lines.length && this.doc.cm) {
                    var t = this.doc.cm.curOp;
                    (t.maybeHiddenMarkers || (t.maybeHiddenMarkers = [])).push(this)
                }
            };
            var sa = 0,
                ua = e.SharedTextMarker = function(e, t) {
                    this.markers = e, this.primary = t;
                    for (var r = 0; r < e.length; ++r) e[r].parent = this
                };
            Ci(ua), ua.prototype.clear = function() {
                if (!this.explicitlyCleared) {
                    this.explicitlyCleared = !0;
                    for (var e = 0; e < this.markers.length; ++e) this.markers[e].clear();
                    yi(this, "clear")
                }
            }, ua.prototype.find = function(e, t) {
                return this.primary.find(e, t)
            };
            var fa = e.LineWidget = function(e, t, r) {
                if (r)
                    for (var n in r) r.hasOwnProperty(n) && (this[n] = r[n]);
                this.doc = e, this.node = t
            };
            Ci(fa), fa.prototype.clear = function() {
                var e = this.doc.cm,
                    t = this.line.widgets,
                    r = this.line,
                    n = Yn(r);
                if (null != n && t) {
                    for (var i = 0; i < t.length; ++i) t[i] == this && t.splice(i--, 1);
                    t.length || (r.widgets = null);
                    var o = xn(this);
                    Xn(r, Math.max(0, r.height - o)), e && Mt(e, function() {
                        bn(e, r, -o), Pt(e, n, "widget")
                    })
                }
            }, fa.prototype.changed = function() {
                var e = this.height,
                    t = this.doc.cm,
                    r = this.line;
                this.height = null;
                var n = xn(this) - e;
                n && (Xn(r, r.height + n), t && Mt(t, function() {
                    t.curOp.forceUpdate = !0, bn(t, r, n)
                }))
            };
            var da = e.Line = function(e, t, r) {
                this.text = e, on(this, t), this.height = r ? r(this) : 1
            };
            Ci(da), da.prototype.lineNo = function() {
                return Yn(this)
            };
            var ha = {},
                pa = {};
            Vn.prototype = {
                chunkSize: function() {
                    return this.lines.length
                },
                removeInner: function(e, t) {
                    for (var r = e, n = e + t; n > r; ++r) {
                        var i = this.lines[r];
                        this.height -= i.height, Cn(i), yi(i, "delete")
                    }
                    this.lines.splice(e, t)
                },
                collapse: function(e) {
                    e.push.apply(e, this.lines)
                },
                insertInner: function(e, t, r) {
                    this.height += r, this.lines = this.lines.slice(0, e).concat(t).concat(this.lines.slice(e));
                    for (var n = 0; n < t.length; ++n) t[n].parent = this
                },
                iterN: function(e, t, r) {
                    for (var n = e + t; n > e; ++e)
                        if (r(this.lines[e])) return !0
                }
            }, qn.prototype = {
                chunkSize: function() {
                    return this.size
                },
                removeInner: function(e, t) {
                    this.size -= t;
                    for (var r = 0; r < this.children.length; ++r) {
                        var n = this.children[r],
                            i = n.chunkSize();
                        if (i > e) {
                            var o = Math.min(t, i - e),
                                a = n.height;
                            if (n.removeInner(e, o), this.height -= a - n.height, i == o && (this.children.splice(r--, 1), n.parent = null), 0 == (t -= o)) break;
                            e = 0
                        } else e -= i
                    }
                    if (this.size - t < 25 && (this.children.length > 1 || !(this.children[0] instanceof Vn))) {
                        var l = [];
                        this.collapse(l), this.children = [new Vn(l)], this.children[0].parent = this
                    }
                },
                collapse: function(e) {
                    for (var t = 0; t < this.children.length; ++t) this.children[t].collapse(e)
                },
                insertInner: function(e, t, r) {
                    this.size += t.length, this.height += r;
                    for (var n = 0; n < this.children.length; ++n) {
                        var i = this.children[n],
                            o = i.chunkSize();
                        if (o >= e) {
                            if (i.insertInner(e, t, r), i.lines && i.lines.length > 50) {
                                for (; i.lines.length > 50;) {
                                    var a = i.lines.splice(i.lines.length - 25, 25),
                                        l = new Vn(a);
                                    i.height -= l.height, this.children.splice(n + 1, 0, l), l.parent = this
                                }
                                this.maybeSpill()
                            }
                            break
                        }
                        e -= o
                    }
                },
                maybeSpill: function() {
                    if (!(this.children.length <= 10)) {
                        var e = this;
                        do {
                            var t = e.children.splice(e.children.length - 5, 5),
                                r = new qn(t);
                            if (e.parent) {
                                e.size -= r.size, e.height -= r.height;
                                var n = Ai(e.parent.children, e);
                                e.parent.children.splice(n + 1, 0, r)
                            } else {
                                var i = new qn(e.children);
                                i.parent = e, e.children = [i, r], e = i
                            }
                            r.parent = e.parent
                        } while (e.children.length > 10);
                        e.parent.maybeSpill()
                    }
                },
                iterN: function(e, t, r) {
                    for (var n = 0; n < this.children.length; ++n) {
                        var i = this.children[n],
                            o = i.chunkSize();
                        if (o > e) {
                            var a = Math.min(t, o - e);
                            if (i.iterN(e, a, r)) return !0;
                            if (0 == (t -= a)) break;
                            e = 0
                        } else e -= o
                    }
                }
            };
            var ga = 0,
                ma = e.Doc = function(e, t, r) {
                    if (!(this instanceof ma)) return new ma(e, t, r);
                    null == r && (r = 0), qn.call(this, [new Vn([new da("", null)])]), this.first = r, this.scrollTop = this.scrollLeft = 0, this.cantEdit = !1, this.cleanGeneration = 1, this.frontier = r;
                    var n = Oo(r, 0);
                    this.sel = de(n), this.history = new ei(null), this.id = ++ga, this.modeOption = t, "string" == typeof e && (e = Ua(e)), Bn(this, {
                        from: n,
                        to: n,
                        text: e
                    }), Le(this, de(n), Aa)
                };
            ma.prototype = Wi(qn.prototype, {
                constructor: ma,
                iter: function(e, t, r) {
                    r ? this.iterN(e - this.first, t - e, r) : this.iterN(this.first, this.first + this.size, e)
                },
                insert: function(e, t) {
                    for (var r = 0, n = 0; n < t.length; ++n) r += t[n].height;
                    this.insertInner(e - this.first, t, r)
                },
                remove: function(e, t) {
                    this.removeInner(e - this.first, t)
                },
                getValue: function(e) {
                    var t = $n(this, this.first, this.first + this.size);
                    return e === !1 ? t : t.join(e || "\n")
                },
                setValue: Nt(function(e) {
                    var t = Oo(this.first, 0),
                        r = this.first + this.size - 1;
                    xr(this, {
                        from: t,
                        to: Oo(r, Kn(this, r).text.length),
                        text: Ua(e),
                        origin: "setValue",
                        full: !0
                    }, !0), Le(this, de(t))
                }),
                replaceRange: function(e, t, r, n) {
                    t = pe(this, t), r = r ? pe(this, r) : t, Mr(this, e, t, r, n)
                },
                getRange: function(e, t, r) {
                    var n = _n(this, pe(this, e), pe(this, t));
                    return r === !1 ? n : n.join(r || "\n")
                },
                getLine: function(e) {
                    var t = this.getLineHandle(e);
                    return t && t.text
                },
                getLineHandle: function(e) {
                    return me(this, e) ? Kn(this, e) : void 0
                },
                getLineNumber: function(e) {
                    return Yn(e)
                },
                getLineHandleVisualStart: function(e) {
                    return "number" == typeof e && (e = Kn(this, e)), hn(e)
                },
                lineCount: function() {
                    return this.size
                },
                firstLine: function() {
                    return this.first
                },
                lastLine: function() {
                    return this.first + this.size - 1
                },
                clipPos: function(e) {
                    return pe(this, e)
                },
                getCursor: function(e) {
                    var t, r = this.sel.primary();
                    return t = null == e || "head" == e ? r.head : "anchor" == e ? r.anchor : "end" == e || "to" == e || e === !1 ? r.to() : r.from()
                },
                listSelections: function() {
                    return this.sel.ranges
                },
                somethingSelected: function() {
                    return this.sel.somethingSelected()
                },
                setCursor: Nt(function(e, t, r) {
                    ke(this, pe(this, "number" == typeof e ? Oo(e, t || 0) : e), null, r)
                }),
                setSelection: Nt(function(e, t, r) {
                    ke(this, pe(this, e), pe(this, t || e), r)
                }),
                extendSelection: Nt(function(e, t, r) {
                    be(this, pe(this, e), t && pe(this, t), r)
                }),
                extendSelections: Nt(function(e, t) {
                    xe(this, ve(this, e, t))
                }),
                extendSelectionsBy: Nt(function(e, t) {
                    xe(this, Ni(this.sel.ranges, e), t)
                }),
                setSelections: Nt(function(e, t, r) {
                    if (e.length) {
                        for (var n = 0, i = []; n < e.length; n++) i[n] = new ue(pe(this, e[n].anchor), pe(this, e[n].head));
                        null == t && (t = Math.min(e.length - 1, this.sel.primIndex)), Le(this, fe(i, t), r)
                    }
                }),
                addSelection: Nt(function(e, t, r) {
                    var n = this.sel.ranges.slice(0);
                    n.push(new ue(pe(this, e), pe(this, t || e))), Le(this, fe(n, n.length - 1), r)
                }),
                getSelection: function(e) {
                    for (var t, r = this.sel.ranges, n = 0; n < r.length; n++) {
                        var i = _n(this, r[n].from(), r[n].to());
                        t = t ? t.concat(i) : i
                    }
                    return e === !1 ? t : t.join(e || "\n")
                },
                getSelections: function(e) {
                    for (var t = [], r = this.sel.ranges, n = 0; n < r.length; n++) {
                        var i = _n(this, r[n].from(), r[n].to());
                        e !== !1 && (i = i.join(e || "\n")), t[n] = i
                    }
                    return t
                },
                replaceSelection: function(e, t, r) {
                    for (var n = [], i = 0; i < this.sel.ranges.length; i++) n[i] = e;
                    this.replaceSelections(n, t, r || "+input")
                },
                replaceSelections: Nt(function(e, t, r) {
                    for (var n = [], i = this.sel, o = 0; o < i.ranges.length; o++) {
                        var a = i.ranges[o];
                        n[o] = {
                            from: a.from(),
                            to: a.to(),
                            text: Ua(e[o]),
                            origin: r
                        }
                    }
                    for (var l = t && "end" != t && yr(this, n, t), o = n.length - 1; o >= 0; o--) xr(this, n[o]);
                    l ? Se(this, l) : this.cm && zr(this.cm)
                }),
                undo: Nt(function() {
                    kr(this, "undo")
                }),
                redo: Nt(function() {
                    kr(this, "redo")
                }),
                undoSelection: Nt(function() {
                    kr(this, "undo", !0)
                }),
                redoSelection: Nt(function() {
                    kr(this, "redo", !0)
                }),
                setExtending: function(e) {
                    this.extend = e
                },
                getExtending: function() {
                    return this.extend
                },
                historySize: function() {
                    for (var e = this.history, t = 0, r = 0, n = 0; n < e.done.length; n++) e.done[n].ranges || ++t;
                    for (var n = 0; n < e.undone.length; n++) e.undone[n].ranges || ++r;
                    return {
                        undo: t,
                        redo: r
                    }
                },
                clearHistory: function() {
                    this.history = new ei(this.history.maxGeneration)
                },
                markClean: function() {
                    this.cleanGeneration = this.changeGeneration(!0)
                },
                changeGeneration: function(e) {
                    return e && (this.history.lastOp = this.history.lastSelOp = this.history.lastOrigin = null), this.history.generation
                },
                isClean: function(e) {
                    return this.history.generation == (e || this.cleanGeneration)
                },
                getHistory: function() {
                    return {
                        done: fi(this.history.done),
                        undone: fi(this.history.undone)
                    }
                },
                setHistory: function(e) {
                    var t = this.history = new ei(this.history.maxGeneration);
                    t.done = fi(e.done.slice(0), null, !0), t.undone = fi(e.undone.slice(0), null, !0)
                },
                addLineClass: Nt(function(e, t, r) {
                    return Dr(this, e, "gutter" == t ? "gutter" : "class", function(e) {
                        var n = "text" == t ? "textClass" : "background" == t ? "bgClass" : "gutter" == t ? "gutterClass" : "wrapClass";
                        if (e[n]) {
                            if (Bi(r).test(e[n])) return !1;
                            e[n] += " " + r
                        } else e[n] = r;
                        return !0
                    })
                }),
                removeLineClass: Nt(function(e, t, r) {
                    return Dr(this, e, "gutter" == t ? "gutter" : "class", function(e) {
                        var n = "text" == t ? "textClass" : "background" == t ? "bgClass" : "gutter" == t ? "gutterClass" : "wrapClass",
                            i = e[n];
                        if (!i) return !1;
                        if (null == r) e[n] = null;
                        else {
                            var o = i.match(Bi(r));
                            if (!o) return !1;
                            var a = o.index + o[0].length;
                            e[n] = i.slice(0, o.index) + (o.index && a != i.length ? " " : "") + i.slice(a) || null
                        }
                        return !0
                    })
                }),
                addLineWidget: Nt(function(e, t, r) {
                    return wn(this, e, t, r)
                }),
                removeLineWidget: function(e) {
                    e.clear()
                },
                markText: function(e, t, r) {
                    return Vr(this, pe(this, e), pe(this, t), r, "range")
                },
                setBookmark: function(e, t) {
                    var r = {
                        replacedWith: t && (null == t.nodeType ? t.widget : t),
                        insertLeft: t && t.insertLeft,
                        clearWhenEmpty: !1,
                        shared: t && t.shared,
                        handleMouseEvents: t && t.handleMouseEvents
                    };
                    return e = pe(this, e), Vr(this, e, e, r, "bookmark")
                },
                findMarksAt: function(e) {
                    e = pe(this, e);
                    var t = [],
                        r = Kn(this, e.line).markedSpans;
                    if (r)
                        for (var n = 0; n < r.length; ++n) {
                            var i = r[n];
                            (null == i.from || i.from <= e.ch) && (null == i.to || i.to >= e.ch) && t.push(i.marker.parent || i.marker)
                        }
                    return t
                },
                findMarks: function(e, t, r) {
                    e = pe(this, e), t = pe(this, t);
                    var n = [],
                        i = e.line;
                    return this.iter(e.line, t.line + 1, function(o) {
                        var a = o.markedSpans;
                        if (a)
                            for (var l = 0; l < a.length; l++) {
                                var s = a[l];
                                i == e.line && e.ch > s.to || null == s.from && i != e.line || i == t.line && s.from > t.ch || r && !r(s.marker) || n.push(s.marker.parent || s.marker)
                            }++i
                    }), n
                },
                getAllMarks: function() {
                    var e = [];
                    return this.iter(function(t) {
                        var r = t.markedSpans;
                        if (r)
                            for (var n = 0; n < r.length; ++n) null != r[n].from && e.push(r[n].marker)
                    }), e
                },
                posFromIndex: function(e) {
                    var t, r = this.first;
                    return this.iter(function(n) {
                        var i = n.text.length + 1;
                        return i > e ? (t = e, !0) : (e -= i, void++r)
                    }), pe(this, Oo(r, t))
                },
                indexFromPos: function(e) {
                    e = pe(this, e);
                    var t = e.ch;
                    return e.line < this.first || e.ch < 0 ? 0 : (this.iter(this.first, e.line, function(e) {
                        t += e.text.length + 1
                    }), t)
                },
                copy: function(e) {
                    var t = new ma($n(this, this.first, this.first + this.size), this.modeOption, this.first);
                    return t.scrollTop = this.scrollTop, t.scrollLeft = this.scrollLeft, t.sel = this.sel, t.extend = !1, e && (t.history.undoDepth = this.history.undoDepth, t.setHistory(this.getHistory())), t
                },
                linkedDoc: function(e) {
                    e || (e = {});
                    var t = this.first,
                        r = this.first + this.size;
                    null != e.from && e.from > t && (t = e.from), null != e.to && e.to < r && (r = e.to);
                    var n = new ma($n(this, t, r), e.mode || this.modeOption, t);
                    return e.sharedHist && (n.history = this.history), (this.linked || (this.linked = [])).push({
                        doc: n,
                        sharedHist: e.sharedHist
                    }), n.linked = [{
                        doc: this,
                        isParent: !0,
                        sharedHist: e.sharedHist
                    }], Ur(n, Gr(this)), n
                },
                unlinkDoc: function(t) {
                    if (t instanceof e && (t = t.doc), this.linked)
                        for (var r = 0; r < this.linked.length; ++r) {
                            var n = this.linked[r];
                            if (n.doc == t) {
                                this.linked.splice(r, 1), t.unlinkDoc(this), Kr(Gr(this));
                                break
                            }
                        }
                    if (t.history == this.history) {
                        var i = [t.id];
                        Gn(t, function(e) {
                            i.push(e.id)
                        }, !0), t.history = new ei(null), t.history.done = fi(this.history.done, i), t.history.undone = fi(this.history.undone, i)
                    }
                },
                iterLinkedDocs: function(e) {
                    Gn(this, e)
                },
                getMode: function() {
                    return this.mode
                },
                getEditor: function() {
                    return this.cm
                }
            }), ma.prototype.eachLine = ma.prototype.iter;
            var va = "iter insert remove copy getEditor".split(" ");
            for (var ya in ma.prototype) ma.prototype.hasOwnProperty(ya) && Ai(va, ya) < 0 && (e.prototype[ya] = function(e) {
                return function() {
                    return e.apply(this.doc, arguments)
                }
            }(ma.prototype[ya]));
            Ci(ma);
            var ba = e.e_preventDefault = function(e) {
                    e.preventDefault ? e.preventDefault() : e.returnValue = !1
                },
                xa = e.e_stopPropagation = function(e) {
                    e.stopPropagation ? e.stopPropagation() : e.cancelBubble = !0
                },
                wa = e.e_stop = function(e) {
                    ba(e), xa(e)
                },
                ka = e.on = function(e, t, r) {
                    if (e.addEventListener) e.addEventListener(t, r, !1);
                    else if (e.attachEvent) e.attachEvent("on" + t, r);
                    else {
                        var n = e._handlers || (e._handlers = {}),
                            i = n[t] || (n[t] = []);
                        i.push(r)
                    }
                },
                Ca = e.off = function(e, t, r) {
                    if (e.removeEventListener) e.removeEventListener(t, r, !1);
                    else if (e.detachEvent) e.detachEvent("on" + t, r);
                    else {
                        var n = e._handlers && e._handlers[t];
                        if (!n) return;
                        for (var i = 0; i < n.length; ++i)
                            if (n[i] == r) {
                                n.splice(i, 1);
                                break
                            }
                    }
                },
                Sa = e.signal = function(e, t) {
                    var r = e._handlers && e._handlers[t];
                    if (r)
                        for (var n = Array.prototype.slice.call(arguments, 2), i = 0; i < r.length; ++i) r[i].apply(null, n)
                },
                La = null,
                Ma = 30,
                Ta = e.Pass = {
                    toString: function() {
                        return "CodeMirror.Pass"
                    }
                },
                Aa = {
                    scroll: !1
                },
                Na = {
                    origin: "*mouse"
                },
                Oa = {
                    origin: "+move"
                };
            Si.prototype.set = function(e, t) {
                clearTimeout(this.id), this.id = setTimeout(t, e)
            };
            var Wa = e.countColumn = function(e, t, r, n, i) {
                    null == t && (t = e.search(/[^\s\u00a0]/), -1 == t && (t = e.length));
                    for (var o = n || 0, a = i || 0;;) {
                        var l = e.indexOf("    ", o);
                        if (0 > l || l >= t) return a + (t - o);
                        a += l - o, a += r - a % r, o = l + 1
                    }
                },
                za = [""],
                Pa = function(e) {
                    e.select()
                };
            wo ? Pa = function(e) {
                e.selectionStart = 0, e.selectionEnd = e.value.length
            } : fo && (Pa = function(e) {
                try {
                    e.select()
                } catch (t) {}
            });
            var Ia, Da = /[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,
                Ha = e.isWordChar = function(e) {
                    return /\w/.test(e) || e > "" && (e.toUpperCase() != e.toLowerCase() || Da.test(e))
                },
                Ea = /[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;
            Ia = document.createRange ? function(e, t, r, n) {
                var i = document.createRange();
                return i.setEnd(n || e, r), i.setStart(e, t), i
            } : function(e, t, r) {
                var n = document.body.createTextRange();
                try {
                    n.moveToElementText(e.parentNode)
                } catch (i) {
                    return n
                }
                return n.collapse(!0), n.moveEnd("character", r), n.moveStart("character", t), n
            };
            var Fa = e.contains = function(e, t) {
                if (3 == t.nodeType && (t = t.parentNode), e.contains) return e.contains(t);
                do
                    if (11 == t.nodeType && (t = t.host), t == e) return !0; while (t = t.parentNode)
            };
            fo && 11 > ho && (Ri = function() {
                try {
                    return document.activeElement
                } catch (e) {
                    return document.body
                }
            });
            var ja, Ra, Ba = e.rmClass = function(e, t) {
                    var r = e.className,
                        n = Bi(t).exec(r);
                    if (n) {
                        var i = r.slice(n.index + n[0].length);
                        e.className = r.slice(0, n.index) + (i ? n[1] + i : "")
                    }
                },
                Va = e.addClass = function(e, t) {
                    var r = e.className;
                    Bi(t).test(r) || (e.className += (r ? " " : "") + t)
                },
                qa = !1,
                Ga = function() {
                    if (fo && 9 > ho) return !1;
                    var e = Ei("div");
                    return "draggable" in e || "dragDrop" in e
                }(),
                Ua = e.splitLines = 3 != "\n\nb".split(/\n/).length ? function(e) {
                    for (var t = 0, r = [], n = e.length; n >= t;) {
                        var i = e.indexOf("\n", t); - 1 == i && (i = e.length);
                        var o = e.slice(t, "\r" == e.charAt(i - 1) ? i - 1 : i),
                            a = o.indexOf("\r"); - 1 != a ? (r.push(o.slice(0, a)), t += a + 1) : (r.push(o), t = i + 1)
                    }
                    return r
                } : function(e) {
                    return e.split(/\r\n?|\n/)
                },
                Ka = window.getSelection ? function(e) {
                    try {
                        return e.selectionStart != e.selectionEnd
                    } catch (t) {
                        return !1
                    }
                } : function(e) {
                    try {
                        var t = e.ownerDocument.selection.createRange()
                    } catch (r) {}
                    return t && t.parentElement() == e ? 0 != t.compareEndPoints("StartToEnd", t) : !1
                },
                _a = function() {
                    var e = Ei("div");
                    return "oncopy" in e ? !0 : (e.setAttribute("oncopy", "return;"), "function" == typeof e.oncopy)
                }(),
                $a = null,
                Xa = {
                    3: "Enter",
                    8: "Backspace",
                    9: "Tab",
                    13: "Enter",
                    16: "Shift",
                    17: "Ctrl",
                    18: "Alt",
                    19: "Pause",
                    20: "CapsLock",
                    27: "Esc",
                    32: "Space",
                    33: "PageUp",
                    34: "PageDown",
                    35: "End",
                    36: "Home",
                    37: "Left",
                    38: "Up",
                    39: "Right",
                    40: "Down",
                    44: "PrintScrn",
                    45: "Insert",
                    46: "Delete",
                    59: ";",
                    61: "=",
                    91: "Mod",
                    92: "Mod",
                    93: "Mod",
                    107: "=",
                    109: "-",
                    127: "Delete",
                    173: "-",
                    186: ";",
                    187: "=",
                    188: ",",
                    189: "-",
                    190: ".",
                    191: "/",
                    192: "`",
                    219: "[",
                    220: "\\",
                    221: "]",
                    222: "'",
                    63232: "Up",
                    63233: "Down",
                    63234: "Left",
                    63235: "Right",
                    63272: "Delete",
                    63273: "Home",
                    63275: "End",
                    63276: "PageUp",
                    63277: "PageDown",
                    63302: "Insert"
                };
            e.keyNames = Xa,
                function() {
                    for (var e = 0; 10 > e; e++) Xa[e + 48] = Xa[e + 96] = String(e);
                    for (var e = 65; 90 >= e; e++) Xa[e] = String.fromCharCode(e);
                    for (var e = 1; 12 >= e; e++) Xa[e + 111] = Xa[e + 63235] = "F" + e
                }();
            var Ya, Za = function() {
                function e(e) {
                    return 247 >= e ? r.charAt(e) : e >= 1424 && 1524 >= e ? "R" : e >= 1536 && 1773 >= e ? n.charAt(e - 1536) : e >= 1774 && 2220 >= e ? "r" : e >= 8192 && 8203 >= e ? "w" : 8204 == e ? "b" : "L"
                }

                function t(e, t, r) {
                    this.level = e, this.from = t, this.to = r
                }
                var r = "bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",
                    n = "rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm",
                    i = /[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,
                    o = /[stwN]/,
                    a = /[LRr]/,
                    l = /[Lb1n]/,
                    s = /[1n]/,
                    c = "L";
                return function(r) {
                    if (!i.test(r)) return !1;
                    for (var n, u = r.length, f = [], d = 0; u > d; ++d) f.push(n = e(r.charCodeAt(d)));
                    for (var d = 0, h = c; u > d; ++d) {
                        var n = f[d];
                        "m" == n ? f[d] = h : h = n
                    }
                    for (var d = 0, p = c; u > d; ++d) {
                        var n = f[d];
                        "1" == n && "r" == p ? f[d] = "n" : a.test(n) && (p = n, "r" == n && (f[d] = "R"))
                    }
                    for (var d = 1, h = f[0]; u - 1 > d; ++d) {
                        var n = f[d];
                        "+" == n && "1" == h && "1" == f[d + 1] ? f[d] = "1" : "," != n || h != f[d + 1] || "1" != h && "n" != h || (f[d] = h), h = n
                    }
                    for (var d = 0; u > d; ++d) {
                        var n = f[d];
                        if ("," == n) f[d] = "N";
                        else if ("%" == n) {
                            for (var g = d + 1; u > g && "%" == f[g]; ++g);
                            for (var m = d && "!" == f[d - 1] || u > g && "1" == f[g] ? "1" : "N", v = d; g > v; ++v) f[v] = m;
                            d = g - 1
                        }
                    }
                    for (var d = 0, p = c; u > d; ++d) {
                        var n = f[d];
                        "L" == p && "1" == n ? f[d] = "L" : a.test(n) && (p = n)
                    }
                    for (var d = 0; u > d; ++d)
                        if (o.test(f[d])) {
                            for (var g = d + 1; u > g && o.test(f[g]); ++g);
                            for (var y = "L" == (d ? f[d - 1] : c), b = "L" == (u > g ? f[g] : c), m = y || b ? "L" : "R", v = d; g > v; ++v) f[v] = m;
                            d = g - 1
                        }
                    for (var x, w = [], d = 0; u > d;)
                        if (l.test(f[d])) {
                            var k = d;
                            for (++d; u > d && l.test(f[d]); ++d);
                            w.push(new t(0, k, d))
                        } else {
                            var C = d,
                                S = w.length;
                            for (++d; u > d && "L" != f[d]; ++d);
                            for (var v = C; d > v;)
                                if (s.test(f[v])) {
                                    v > C && w.splice(S, 0, new t(1, C, v));
                                    var L = v;
                                    for (++v; d > v && s.test(f[v]); ++v);
                                    w.splice(S, 0, new t(2, L, v)), C = v
                                } else ++v;
                            d > C && w.splice(S, 0, new t(1, C, d))
                        }
                    return 1 == w[0].level && (x = r.match(/^\s+/)) && (w[0].from = x[0].length, w.unshift(new t(0, 0, x[0].length))), 1 == Ti(w).level && (x = r.match(/\s+$/)) && (Ti(w).to -= x[0].length, w.push(new t(0, u - x[0].length, u))), 2 == w[0].level && w.unshift(new t(1, w[0].to, w[0].to)), w[0].level != Ti(w).level && w.push(new t(w[0].level, u, u)), w
                }
            }();
            return e.version = "5.2.0", e
        }),
        function(t) {
            "object" == typeof exports && "object" == typeof module ? t(e("../../lib/codemirror")) : "function" == typeof define && define.amd ? define(["../../lib/codemirror"], t) : t(CodeMirror)
        }(function(e) {
            function t(e) {
                e.state.placeholder && (e.state.placeholder.parentNode.removeChild(e.state.placeholder), e.state.placeholder = null)
            }

            function r(e) {
                t(e);
                var r = e.state.placeholder = document.createElement("pre");
                r.style.cssText = "height: 0; overflow: visible", r.className = "CodeMirror-placeholder", r.appendChild(document.createTextNode(e.getOption("placeholder"))), e.display.lineSpace.insertBefore(r, e.display.lineSpace.firstChild)
            }

            function n(e) {
                o(e) && r(e)
            }

            function i(e) {
                var n = e.getWrapperElement(),
                    i = o(e);
                n.className = n.className.replace(" CodeMirror-empty", "") + (i ? " CodeMirror-empty" : ""), i ? r(e) : t(e)
            }

            function o(e) {
                return 1 === e.lineCount() && "" === e.getLine(0)
            }
            e.defineOption("placeholder", "", function(r, o, a) {
                var l = a && a != e.Init;
                if (o && !l) r.on("blur", n), r.on("change", i), i(r);
                else if (!o && l) {
                    r.off("blur", n), r.off("change", i), t(r);
                    var s = r.getWrapperElement();
                    s.className = s.className.replace(" CodeMirror-empty", "")
                }
                o && !r.hasFocus() && n(r)
            })
        }),
        function(t) {
            "object" == typeof exports && "object" == typeof module ? t(e("../../lib/codemirror")) : "function" == typeof define && define.amd ? define(["../../lib/codemirror"], t) : t(CodeMirror)
        }(function(e) {
            function t(e, t) {
                return "pairs" == t && "string" == typeof e ? e : "object" == typeof e && null != e[t] ? e[t] : u[t]
            }

            function r(e) {
                return function(t) {
                    return a(t, e)
                }
            }

            function n(e) {
                var t = e.state.closeBrackets;
                if (!t) return null;
                var r = e.getModeAt(e.getCursor());
                return r.closeBrackets || t
            }

            function i(r) {
                var i = n(r);
                if (!i || r.getOption("disableInput")) return e.Pass;
                for (var o = t(i, "pairs"), a = r.listSelections(), l = 0; l < a.length; l++) {
                    if (!a[l].empty()) return e.Pass;
                    var c = s(r, a[l].head);
                    if (!c || o.indexOf(c) % 2 != 0) return e.Pass
                }
                for (var l = a.length - 1; l >= 0; l--) {
                    var u = a[l].head;
                    r.replaceRange("", f(u.line, u.ch - 1), f(u.line, u.ch + 1))
                }
            }

            function o(r) {
                var i = n(r),
                    o = i && t(i, "explode");
                if (!o || r.getOption("disableInput")) return e.Pass;
                for (var a = r.listSelections(), l = 0; l < a.length; l++) {
                    if (!a[l].empty()) return e.Pass;
                    var c = s(r, a[l].head);
                    if (!c || o.indexOf(c) % 2 != 0) return e.Pass
                }
                r.operation(function() {
                    r.replaceSelection("\n\n", null), r.execCommand("goCharLeft"), a = r.listSelections();
                    for (var e = 0; e < a.length; e++) {
                        var t = a[e].head.line;
                        r.indentLine(t, null, !0), r.indentLine(t + 1, null, !0)
                    }
                })
            }

            function a(r, i) {
                var o = n(r);
                if (!o || r.getOption("disableInput")) return e.Pass;
                var a = t(o, "pairs"),
                    s = a.indexOf(i);
                if (-1 == s) return e.Pass;
                for (var u, d, h = t(o, "triples"), p = a.charAt(s + 1) == i, g = r.listSelections(), m = s % 2 == 0, v = 0; v < g.length; v++) {
                    var y, b = g[v],
                        x = b.head,
                        d = r.getRange(x, f(x.line, x.ch + 1));
                    if (m && !b.empty()) y = "surround";
                    else if (!p && m || d != i)
                        if (p && x.ch > 1 && h.indexOf(i) >= 0 && r.getRange(f(x.line, x.ch - 2), x) == i + i && (x.ch <= 2 || r.getRange(f(x.line, x.ch - 3), f(x.line, x.ch - 2)) != i)) y = "addFour";
                        else if (p) {
                        if (e.isWordChar(d) || !c(r, x, i)) return e.Pass;
                        y = "both"
                    } else {
                        if (!m || r.getLine(x.line).length != x.ch && !l(d, a) && !/\s/.test(d)) return e.Pass;
                        y = "both"
                    } else y = h.indexOf(i) >= 0 && r.getRange(x, f(x.line, x.ch + 3)) == i + i + i ? "skipThree" : "skip";
                    if (u) {
                        if (u != y) return e.Pass
                    } else u = y
                }
                var w = s % 2 ? a.charAt(s - 1) : i,
                    k = s % 2 ? i : a.charAt(s + 1);
                r.operation(function() {
                    if ("skip" == u) r.execCommand("goCharRight");
                    else if ("skipThree" == u)
                        for (var e = 0; 3 > e; e++) r.execCommand("goCharRight");
                    else if ("surround" == u) {
                        for (var t = r.getSelections(), e = 0; e < t.length; e++) t[e] = w + t[e] + k;
                        r.replaceSelections(t, "around")
                    } else "both" == u ? (r.replaceSelection(w + k, null), r.execCommand("goCharLeft")) : "addFour" == u && (r.replaceSelection(w + w + w + w, "before"), r.execCommand("goCharRight"))
                })
            }

            function l(e, t) {
                var r = t.lastIndexOf(e);
                return r > -1 && r % 2 == 1
            }

            function s(e, t) {
                var r = e.getRange(f(t.line, t.ch - 1), f(t.line, t.ch + 1));
                return 2 == r.length ? r : null
            }

            function c(t, r, n) {
                var i = t.getLine(r.line),
                    o = t.getTokenAt(r);
                if (/\bstring2?\b/.test(o.type)) return !1;
                var a = new e.StringStream(i.slice(0, r.ch) + n + i.slice(r.ch), 4);
                for (a.pos = a.start = o.start;;) {
                    var l = t.getMode().token(a, o.state);
                    if (a.pos >= r.ch + 1) return /\bstring2?\b/.test(l);
                    a.start = a.pos
                }
            }
            var u = {
                    pairs: "()[]{}''\"\"",
                    triples: "",
                    explode: "[]{}"
                },
                f = e.Pos;
            e.defineOption("autoCloseBrackets", !1, function(t, r, n) {
                n && n != e.Init && (t.removeKeyMap(h), t.state.closeBrackets = null), r && (t.state.closeBrackets = r, t.addKeyMap(h))
            });
            for (var d = u.pairs + "`", h = {
                    Backspace: i,
                    Enter: o
                }, p = 0; p < d.length; p++) h["'" + d.charAt(p) + "'"] = r(d.charAt(p))
        }),
        function(t) {
            "object" == typeof exports && "object" == typeof module ? t(e("../../lib/codemirror"), e("../fold/xml-fold")) : "function" == typeof define && define.amd ? define(["../../lib/codemirror", "../fold/xml-fold"], t) : t(CodeMirror)
        }(function(e) {
            function t(t) {
                if (t.getOption("disableInput")) return e.Pass;
                for (var r = t.listSelections(), n = [], s = 0; s < r.length; s++) {
                    if (!r[s].empty()) return e.Pass;
                    var c = r[s].head,
                        u = t.getTokenAt(c),
                        f = e.innerMode(t.getMode(), u.state),
                        d = f.state;
                    if ("xml" != f.mode.name || !d.tagName) return e.Pass;
                    var h = t.getOption("autoCloseTags"),
                        p = "html" == f.mode.configuration,
                        g = "object" == typeof h && h.dontCloseTags || p && a,
                        m = "object" == typeof h && h.indentTags || p && l,
                        v = d.tagName;
                    u.end > c.ch && (v = v.slice(0, v.length - u.end + c.ch));
                    var y = v.toLowerCase();
                    if (!v || "string" == u.type && (u.end != c.ch || !/[\"\']/.test(u.string.charAt(u.string.length - 1)) || 1 == u.string.length) || "tag" == u.type && "closeTag" == d.type || u.string.indexOf("/") == u.string.length - 1 || g && i(g, y) > -1 || o(t, v, c, d, !0)) return e.Pass;
                    var b = m && i(m, y) > -1;
                    n[s] = {
                        indent: b,
                        text: ">" + (b ? "\n\n" : "") + "</" + v + ">",
                        newPos: b ? e.Pos(c.line + 1, 0) : e.Pos(c.line, c.ch + 1)
                    }
                }
                for (var s = r.length - 1; s >= 0; s--) {
                    var x = n[s];
                    t.replaceRange(x.text, r[s].head, r[s].anchor, "+insert");
                    var w = t.listSelections().slice(0);
                    w[s] = {
                        head: x.newPos,
                        anchor: x.newPos
                    }, t.setSelections(w), x.indent && (t.indentLine(x.newPos.line, null, !0), t.indentLine(x.newPos.line + 1, null, !0))
                }
            }

            function r(t, r) {
                for (var n = t.listSelections(), i = [], a = r ? "/" : "</", l = 0; l < n.length; l++) {
                    if (!n[l].empty()) return e.Pass;
                    var s = n[l].head,
                        c = t.getTokenAt(s),
                        u = e.innerMode(t.getMode(), c.state),
                        f = u.state;
                    if (r && ("string" == c.type || "<" != c.string.charAt(0) || c.start != s.ch - 1)) return e.Pass;
                    if ("xml" != u.mode.name)
                        if ("htmlmixed" == t.getMode().name && "javascript" == u.mode.name) i[l] = a + "script>";
                        else {
                            if ("htmlmixed" != t.getMode().name || "css" != u.mode.name) return e.Pass;
                            i[l] = a + "style>"
                        }
                    else {
                        if (!f.context || !f.context.tagName || o(t, f.context.tagName, s, f)) return e.Pass;
                        i[l] = a + f.context.tagName + ">"
                    }
                }
                t.replaceSelections(i), n = t.listSelections();
                for (var l = 0; l < n.length; l++)(l == n.length - 1 || n[l].head.line < n[l + 1].head.line) && t.indentLine(n[l].head.line)
            }

            function n(t) {
                return t.getOption("disableInput") ? e.Pass : r(t, !0)
            }

            function i(e, t) {
                if (e.indexOf) return e.indexOf(t);
                for (var r = 0, n = e.length; n > r; ++r)
                    if (e[r] == t) return r;
                return -1
            }

            function o(t, r, n, i, o) {
                if (!e.scanForClosingTag) return !1;
                var a = Math.min(t.lastLine() + 1, n.line + 500),
                    l = e.scanForClosingTag(t, n, null, a);
                if (!l || l.tag != r) return !1;
                for (var s = i.context, c = o ? 1 : 0; s && s.tagName == r; s = s.prev) ++c;
                n = l.to;
                for (var u = 1; c > u; u++) {
                    var f = e.scanForClosingTag(t, n, null, a);
                    if (!f || f.tag != r) return !1;
                    n = f.to
                }
                return !0
            }
            e.defineOption("autoCloseTags", !1, function(r, i, o) {
                if (o != e.Init && o && r.removeKeyMap("autoCloseTags"), i) {
                    var a = {
                        name: "autoCloseTags"
                    };
                    ("object" != typeof i || i.whenClosing) && (a["'/'"] = function(e) {
                        return n(e)
                    }), ("object" != typeof i || i.whenOpening) && (a["'>'"] = function(e) {
                        return t(e)
                    }), r.addKeyMap(a)
                }
            });
            var a = ["area", "base", "br", "col", "command", "embed", "hr", "img", "input", "keygen", "link", "meta", "param", "source", "track", "wbr"],
                l = ["applet", "blockquote", "body", "button", "div", "dl", "fieldset", "form", "frameset", "h1", "h2", "h3", "h4", "h5", "h6", "head", "html", "iframe", "layer", "legend", "object", "ol", "p", "select", "table", "ul"];
            e.commands.closeTag = function(e) {
                return r(e)
            }
        }),
        function(t) {
            "object" == typeof exports && "object" == typeof module ? t(e("../../lib/codemirror")) : "function" == typeof define && define.amd ? define(["../../lib/codemirror"], t) : t(CodeMirror)
        }(function(e) {
            function t(e, t, n, i) {
                var o = e.getLineHandle(t.line),
                    s = t.ch - 1,
                    c = s >= 0 && l[o.text.charAt(s)] || l[o.text.charAt(++s)];
                if (!c) return null;
                var u = ">" == c.charAt(1) ? 1 : -1;
                if (n && u > 0 != (s == t.ch)) return null;
                var f = e.getTokenTypeAt(a(t.line, s + 1)),
                    d = r(e, a(t.line, s + (u > 0 ? 1 : 0)), u, f || null, i);
                return null == d ? null : {
                    from: a(t.line, s),
                    to: d && d.pos,
                    match: d && d.ch == c.charAt(0),
                    forward: u > 0
                }
            }

            function r(e, t, r, n, i) {
                for (var o = i && i.maxScanLineLength || 1e4, s = i && i.maxScanLines || 1e3, c = [], u = i && i.bracketRegex ? i.bracketRegex : /[(){}[\]]/, f = r > 0 ? Math.min(t.line + s, e.lastLine() + 1) : Math.max(e.firstLine() - 1, t.line - s), d = t.line; d != f; d += r) {
                    var h = e.getLine(d);
                    if (h) {
                        var p = r > 0 ? 0 : h.length - 1,
                            g = r > 0 ? h.length : -1;
                        if (!(h.length > o))
                            for (d == t.line && (p = t.ch - (0 > r ? 1 : 0)); p != g; p += r) {
                                var m = h.charAt(p);
                                if (u.test(m) && (void 0 === n || e.getTokenTypeAt(a(d, p + 1)) == n)) {
                                    var v = l[m];
                                    if (">" == v.charAt(1) == r > 0) c.push(m);
                                    else {
                                        if (!c.length) return {
                                            pos: a(d, p),
                                            ch: m
                                        };
                                        c.pop()
                                    }
                                }
                            }
                    }
                }
                return d - r == (r > 0 ? e.lastLine() : e.firstLine()) ? !1 : null
            }

            function n(e, r, n) {
                for (var i = e.state.matchBrackets.maxHighlightLineLength || 1e3, l = [], s = e.listSelections(), c = 0; c < s.length; c++) {
                    var u = s[c].empty() && t(e, s[c].head, !1, n);
                    if (u && e.getLine(u.from.line).length <= i) {
                        var f = u.match ? "CodeMirror-matchingbracket" : "CodeMirror-nonmatchingbracket";
                        l.push(e.markText(u.from, a(u.from.line, u.from.ch + 1), {
                            className: f
                        })), u.to && e.getLine(u.to.line).length <= i && l.push(e.markText(u.to, a(u.to.line, u.to.ch + 1), {
                            className: f
                        }))
                    }
                }
                if (l.length) {
                    o && e.state.focused && e.focus();
                    var d = function() {
                        e.operation(function() {
                            for (var e = 0; e < l.length; e++) l[e].clear()
                        })
                    };
                    if (!r) return d;
                    setTimeout(d, 800)
                }
            }

            function i(e) {
                e.operation(function() {
                    s && (s(), s = null), s = n(e, !1, e.state.matchBrackets)
                })
            }
            var o = /MSIE \d/.test(navigator.userAgent) && (null == document.documentMode || document.documentMode < 8),
                a = e.Pos,
                l = {
                    "(": ")>",
                    ")": "(<",
                    "[": "]>",
                    "]": "[<",
                    "{": "}>",
                    "}": "{<"
                },
                s = null;
            e.defineOption("matchBrackets", !1, function(t, r, n) {
                n && n != e.Init && t.off("cursorActivity", i), r && (t.state.matchBrackets = "object" == typeof r ? r : {}, t.on("cursorActivity", i))
            }), e.defineExtension("matchBrackets", function() {
                n(this, !0)
            }), e.defineExtension("findMatchingBracket", function(e, r, n) {
                return t(this, e, r, n)
            }), e.defineExtension("scanForBracket", function(e, t, n, i) {
                return r(this, e, t, n, i)
            })
        }),
        function(t) {
            "object" == typeof exports && "object" == typeof module ? t(e("../../lib/codemirror"), e("../fold/xml-fold")) : "function" == typeof define && define.amd ? define(["../../lib/codemirror", "../fold/xml-fold"], t) : t(CodeMirror)
        }(function(e) {
            "use strict";

            function t(e) {
                e.state.tagHit && e.state.tagHit.clear(), e.state.tagOther && e.state.tagOther.clear(), e.state.tagHit = e.state.tagOther = null
            }

            function r(r) {
                r.state.failedTagMatch = !1, r.operation(function() {
                    if (t(r), !r.somethingSelected()) {
                        var n = r.getCursor(),
                            i = r.getViewport();
                        i.from = Math.min(i.from, n.line), i.to = Math.max(n.line + 1, i.to);
                        var o = e.findMatchingTag(r, n, i);
                        if (o) {
                            if (r.state.matchBothTags) {
                                var a = "open" == o.at ? o.open : o.close;
                                a && (r.state.tagHit = r.markText(a.from, a.to, {
                                    className: "CodeMirror-matchingtag"
                                }))
                            }
                            var l = "close" == o.at ? o.open : o.close;
                            l ? r.state.tagOther = r.markText(l.from, l.to, {
                                className: "CodeMirror-matchingtag"
                            }) : r.state.failedTagMatch = !0
                        }
                    }
                })
            }

            function n(e) {
                e.state.failedTagMatch && r(e)
            }
            e.defineOption("matchTags", !1, function(i, o, a) {
                a && a != e.Init && (i.off("cursorActivity", r), i.off("viewportChange", n), t(i)), o && (i.state.matchBothTags = "object" == typeof o && o.bothTags, i.on("cursorActivity", r), i.on("viewportChange", n), r(i))
            }), e.commands.toMatchingTag = function(t) {
                var r = e.findMatchingTag(t, t.getCursor());
                if (r) {
                    var n = "close" == r.at ? r.open : r.close;
                    n && t.extendSelection(n.to, n.from)
                }
            }
        }),
        function(t) {
            "object" == typeof exports && "object" == typeof module ? t(e("../../lib/codemirror")) : "function" == typeof define && define.amd ? define(["../../lib/codemirror"], t) : t(CodeMirror)
        }(function(e) {
            "use strict";

            function t(e, t) {
                return e.line - t.line || e.ch - t.ch
            }

            function r(e, t, r, n) {
                this.line = t, this.ch = r, this.cm = e, this.text = e.getLine(t), this.min = n ? n.from : e.firstLine(), this.max = n ? n.to - 1 : e.lastLine()
            }

            function n(e, t) {
                var r = e.cm.getTokenTypeAt(d(e.line, t));
                return r && /\btag\b/.test(r)
            }

            function i(e) {
                return e.line >= e.max ? void 0 : (e.ch = 0, e.text = e.cm.getLine(++e.line), !0)
            }

            function o(e) {
                return e.line <= e.min ? void 0 : (e.text = e.cm.getLine(--e.line), e.ch = e.text.length, !0)
            }

            function a(e) {
                for (;;) {
                    var t = e.text.indexOf(">", e.ch);
                    if (-1 == t) {
                        if (i(e)) continue;
                        return
                    } {
                        if (n(e, t + 1)) {
                            var r = e.text.lastIndexOf("/", t),
                                o = r > -1 && !/\S/.test(e.text.slice(r + 1, t));
                            return e.ch = t + 1, o ? "selfClose" : "regular"
                        }
                        e.ch = t + 1
                    }
                }
            }

            function l(e) {
                for (;;) {
                    var t = e.ch ? e.text.lastIndexOf("<", e.ch - 1) : -1;
                    if (-1 == t) {
                        if (o(e)) continue;
                        return
                    }
                    if (n(e, t + 1)) {
                        g.lastIndex = t, e.ch = t;
                        var r = g.exec(e.text);
                        if (r && r.index == t) return r
                    } else e.ch = t
                }
            }

            function s(e) {
                for (;;) {
                    g.lastIndex = e.ch;
                    var t = g.exec(e.text);
                    if (!t) {
                        if (i(e)) continue;
                        return
                    } {
                        if (n(e, t.index + 1)) return e.ch = t.index + t[0].length, t;
                        e.ch = t.index + 1
                    }
                }
            }

            function c(e) {
                for (;;) {
                    var t = e.ch ? e.text.lastIndexOf(">", e.ch - 1) : -1;
                    if (-1 == t) {
                        if (o(e)) continue;
                        return
                    } {
                        if (n(e, t + 1)) {
                            var r = e.text.lastIndexOf("/", t),
                                i = r > -1 && !/\S/.test(e.text.slice(r + 1, t));
                            return e.ch = t + 1, i ? "selfClose" : "regular"
                        }
                        e.ch = t
                    }
                }
            }

            function u(e, t) {
                for (var r = [];;) {
                    var n, i = s(e),
                        o = e.line,
                        l = e.ch - (i ? i[0].length : 0);
                    if (!i || !(n = a(e))) return;
                    if ("selfClose" != n)
                        if (i[1]) {
                            for (var c = r.length - 1; c >= 0; --c)
                                if (r[c] == i[2]) {
                                    r.length = c;
                                    break
                                }
                            if (0 > c && (!t || t == i[2])) return {
                                tag: i[2],
                                from: d(o, l),
                                to: d(e.line, e.ch)
                            }
                        } else r.push(i[2])
                }
            }

            function f(e, t) {
                for (var r = [];;) {
                    var n = c(e);
                    if (!n) return;
                    if ("selfClose" != n) {
                        var i = e.line,
                            o = e.ch,
                            a = l(e);
                        if (!a) return;
                        if (a[1]) r.push(a[2]);
                        else {
                            for (var s = r.length - 1; s >= 0; --s)
                                if (r[s] == a[2]) {
                                    r.length = s;
                                    break
                                }
                            if (0 > s && (!t || t == a[2])) return {
                                tag: a[2],
                                from: d(e.line, e.ch),
                                to: d(i, o)
                            }
                        }
                    } else l(e)
                }
            }
            var d = e.Pos,
                h = "A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",
                p = h + "-:.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",
                g = new RegExp("<(/?)([" + h + "][" + p + "]*)", "g");
            e.registerHelper("fold", "xml", function(e, t) {
                for (var n = new r(e, t.line, 0);;) {
                    var i, o = s(n);
                    if (!o || n.line != t.line || !(i = a(n))) return;
                    if (!o[1] && "selfClose" != i) {
                        var t = d(n.line, n.ch),
                            l = u(n, o[2]);
                        return l && {
                            from: t,
                            to: l.from
                        }
                    }
                }
            }), e.findMatchingTag = function(e, n, i) {
                var o = new r(e, n.line, n.ch, i);
                if (-1 != o.text.indexOf(">") || -1 != o.text.indexOf("<")) {
                    var s = a(o),
                        c = s && d(o.line, o.ch),
                        h = s && l(o);
                    if (s && h && !(t(o, n) > 0)) {
                        var p = {
                            from: d(o.line, o.ch),
                            to: c,
                            tag: h[2]
                        };
                        return "selfClose" == s ? {
                            open: p,
                            close: null,
                            at: "open"
                        } : h[1] ? {
                            open: f(o, h[2]),
                            close: p,
                            at: "close"
                        } : (o = new r(e, c.line, c.ch, i), {
                            open: p,
                            close: u(o, h[2]),
                            at: "open"
                        })
                    }
                }
            }, e.findEnclosingTag = function(e, t, n) {
                for (var i = new r(e, t.line, t.ch, n);;) {
                    var o = f(i);
                    if (!o) break;
                    var a = new r(e, t.line, t.ch, n),
                        l = u(a, o.tag);
                    if (l) return {
                        open: o,
                        close: l
                    }
                }
            }, e.scanForClosingTag = function(e, t, n, i) {
                var o = new r(e, t.line, t.ch, i ? {
                    from: 0,
                    to: i
                } : null);
                return u(o, n)
            }
        }),
        function(t) {
            "object" == typeof exports && "object" == typeof module ? t(e("../../lib/codemirror"), e("./searchcursor"), e("../dialog/dialog")) : "function" == typeof define && define.amd ? define(["../../lib/codemirror", "./searchcursor", "../dialog/dialog"], t) : t(CodeMirror)
        }(function(e) {
            "use strict";

            function t(e, t) {
                return "string" == typeof e ? e = new RegExp(e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&"), t ? "gi" : "g") : e.global || (e = new RegExp(e.source, e.ignoreCase ? "gi" : "g")), {
                    token: function(t) {
                        e.lastIndex = t.pos;
                        var r = e.exec(t.string);
                        return r && r.index == t.pos ? (t.pos += r[0].length, "searching") : void(r ? t.pos = r.index : t.skipToEnd())
                    }
                }
            }

            function r() {
                this.posFrom = this.posTo = this.lastQuery = this.query = null, this.overlay = null
            }

            function n(e) {
                return e.state.search || (e.state.search = new r)
            }

            function i(e) {
                return "string" == typeof e && e == e.toLowerCase()
            }

            function o(e, t, r) {
                return e.getSearchCursor(t, r, i(t))
            }

            function a(e, t, r, n, i) {
                e.openDialog ? e.openDialog(t, i, {
                    value: n,
                    selectValueOnOpen: !0
                }) : i(prompt(r, n))
            }

            function l(e, t, r, n) {
                e.openConfirm ? e.openConfirm(t, n) : confirm(r) && n[0]()
            }

            function s(e) {
                var t = e.match(/^\/(.*)\/([a-z]*)$/);
                if (t) try {
                    e = new RegExp(t[1], -1 == t[2].indexOf("i") ? "" : "i")
                } catch (r) {}
                return ("string" == typeof e ? "" == e : e.test("")) && (e = /x^/), e
            }

            function c(e, r) {
                var o = n(e);
                if (o.query) return u(e, r);
                var l = e.getSelection() || o.lastQuery;
                a(e, h, "Search for:", l, function(n) {
                    e.operation(function() {
                        n && !o.query && (o.query = s(n), e.removeOverlay(o.overlay, i(o.query)), o.overlay = t(o.query, i(o.query)), e.addOverlay(o.overlay), e.showMatchesOnScrollbar && (o.annotate && (o.annotate.clear(), o.annotate = null), o.annotate = e.showMatchesOnScrollbar(o.query, i(o.query))), o.posFrom = o.posTo = e.getCursor(), u(e, r))
                    })
                })
            }

            function u(t, r) {
                t.operation(function() {
                    var i = n(t),
                        a = o(t, i.query, r ? i.posFrom : i.posTo);
                    (a.find(r) || (a = o(t, i.query, r ? e.Pos(t.lastLine()) : e.Pos(t.firstLine(), 0)), a.find(r))) && (t.setSelection(a.from(), a.to()), t.scrollIntoView({
                        from: a.from(),
                        to: a.to()
                    }), i.posFrom = a.from(), i.posTo = a.to())
                })
            }

            function f(e) {
                e.operation(function() {
                    var t = n(e);
                    t.lastQuery = t.query, t.query && (t.query = null, e.removeOverlay(t.overlay), t.annotate && (t.annotate.clear(), t.annotate = null))
                })
            }

            function d(e, t) {
                if (!e.getOption("readOnly")) {
                    var r = e.getSelection() || n().lastQuery;
                    a(e, p, "Replace:", r, function(r) {
                        r && (r = s(r), a(e, g, "Replace with:", "", function(n) {
                            if (t) e.operation(function() {
                                for (var t = o(e, r); t.findNext();)
                                    if ("string" != typeof r) {
                                        var i = e.getRange(t.from(), t.to()).match(r);
                                        t.replace(n.replace(/\$(\d)/g, function(e, t) {
                                            return i[t]
                                        }))
                                    } else t.replace(n)
                            });
                            else {
                                f(e);
                                var i = o(e, r, e.getCursor()),
                                    a = function() {
                                        var t, n = i.from();
                                        !(t = i.findNext()) && (i = o(e, r), !(t = i.findNext()) || n && i.from().line == n.line && i.from().ch == n.ch) || (e.setSelection(i.from(), i.to()), e.scrollIntoView({
                                            from: i.from(),
                                            to: i.to()
                                        }), l(e, m, "Replace?", [function() {
                                            s(t)
                                        }, a]))
                                    },
                                    s = function(e) {
                                        i.replace("string" == typeof r ? n : n.replace(/\$(\d)/g, function(t, r) {
                                            return e[r]
                                        })), a()
                                    };
                                a()
                            }
                        }))
                    })
                }
            }
            var h = 'Search: <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">(Use /re/ syntax for regexp search)</span>',
                p = 'Replace: <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">(Use /re/ syntax for regexp search)</span>',
                g = 'With: <input type="text" style="width: 10em" class="CodeMirror-search-field"/>',
                m = "Replace? <button>Yes</button> <button>No</button> <button>Stop</button>";
            e.commands.find = function(e) {
                f(e), c(e)
            }, e.commands.findNext = c, e.commands.findPrev = function(e) {
                c(e, !0)
            }, e.commands.clearSearch = f, e.commands.replace = d, e.commands.replaceAll = function(e) {
                d(e, !0)
            }
        }),
        function(t) {
            "object" == typeof exports && "object" == typeof module ? t(e("../../lib/codemirror")) : "function" == typeof define && define.amd ? define(["../../lib/codemirror"], t) : t(CodeMirror)
        }(function(e) {
            "use strict";

            function t(e, t, i, o) {
                if (this.atOccurrence = !1, this.doc = e, null == o && "string" == typeof t && (o = !1), i = i ? e.clipPos(i) : n(0, 0), this.pos = {
                        from: i,
                        to: i
                    }, "string" != typeof t) t.global || (t = new RegExp(t.source, t.ignoreCase ? "ig" : "g")), this.matches = function(r, i) {
                    if (r) {
                        t.lastIndex = 0;
                        for (var o, a, l = e.getLine(i.line).slice(0, i.ch), s = 0;;) {
                            t.lastIndex = s;
                            var c = t.exec(l);
                            if (!c) break;
                            if (o = c, a = o.index, s = o.index + (o[0].length || 1), s == l.length) break
                        }
                        var u = o && o[0].length || 0;
                        u || (0 == a && 0 == l.length ? o = void 0 : a != e.getLine(i.line).length && u++)
                    } else {
                        t.lastIndex = i.ch;
                        var l = e.getLine(i.line),
                            o = t.exec(l),
                            u = o && o[0].length || 0,
                            a = o && o.index;
                        a + u == l.length || u || (u = 1)
                    }
                    return o && u ? {
                        from: n(i.line, a),
                        to: n(i.line, a + u),
                        match: o
                    } : void 0
                };
                else {
                    var a = t;
                    o && (t = t.toLowerCase());
                    var l = o ? function(e) {
                            return e.toLowerCase()
                        } : function(e) {
                            return e
                        },
                        s = t.split("\n");
                    if (1 == s.length) t.length ? this.matches = function(i, o) {
                        if (i) {
                            var s = e.getLine(o.line).slice(0, o.ch),
                                c = l(s),
                                u = c.lastIndexOf(t);
                            if (u > -1) return u = r(s, c, u), {
                                from: n(o.line, u),
                                to: n(o.line, u + a.length)
                            }
                        } else {
                            var s = e.getLine(o.line).slice(o.ch),
                                c = l(s),
                                u = c.indexOf(t);
                            if (u > -1) return u = r(s, c, u) + o.ch, {
                                from: n(o.line, u),
                                to: n(o.line, u + a.length)
                            }
                        }
                    } : this.matches = function() {};
                    else {
                        var c = a.split("\n");
                        this.matches = function(t, r) {
                            var i = s.length - 1;
                            if (t) {
                                if (r.line - (s.length - 1) < e.firstLine()) return;
                                if (l(e.getLine(r.line).slice(0, c[i].length)) != s[s.length - 1]) return;
                                for (var o = n(r.line, c[i].length), a = r.line - 1, u = i - 1; u >= 1; --u, --a)
                                    if (s[u] != l(e.getLine(a))) return;
                                var f = e.getLine(a),
                                    d = f.length - c[0].length;
                                if (l(f.slice(d)) != s[0]) return;
                                return {
                                    from: n(a, d),
                                    to: o
                                }
                            }
                            if (!(r.line + (s.length - 1) > e.lastLine())) {
                                var f = e.getLine(r.line),
                                    d = f.length - c[0].length;
                                if (l(f.slice(d)) == s[0]) {
                                    for (var h = n(r.line, d), a = r.line + 1, u = 1; i > u; ++u, ++a)
                                        if (s[u] != l(e.getLine(a))) return;
                                    if (l(e.getLine(a).slice(0, c[i].length)) == s[i]) return {
                                        from: h,
                                        to: n(a, c[i].length)
                                    }
                                }
                            }
                        }
                    }
                }
            }

            function r(e, t, r) {
                if (e.length == t.length) return r;
                for (var n = Math.min(r, e.length);;) {
                    var i = e.slice(0, n).toLowerCase().length;
                    if (r > i) ++n;
                    else {
                        if (!(i > r)) return n;
                        --n
                    }
                }
            }
            var n = e.Pos;
            t.prototype = {
                findNext: function() {
                    return this.find(!1)
                },
                findPrevious: function() {
                    return this.find(!0)
                },
                find: function(e) {
                    function t(e) {
                        var t = n(e, 0);
                        return r.pos = {
                            from: t,
                            to: t
                        }, r.atOccurrence = !1, !1
                    }
                    for (var r = this, i = this.doc.clipPos(e ? this.pos.from : this.pos.to);;) {
                        if (this.pos = this.matches(e, i)) return this.atOccurrence = !0, this.pos.match || !0;
                        if (e) {
                            if (!i.line) return t(0);
                            i = n(i.line - 1, this.doc.getLine(i.line - 1).length)
                        } else {
                            var o = this.doc.lineCount();
                            if (i.line == o - 1) return t(o);
                            i = n(i.line + 1, 0)
                        }
                    }
                },
                from: function() {
                    return this.atOccurrence ? this.pos.from : void 0
                },
                to: function() {
                    return this.atOccurrence ? this.pos.to : void 0
                },
                replace: function(t, r) {
                    if (this.atOccurrence) {
                        var i = e.splitLines(t);
                        this.doc.replaceRange(i, this.pos.from, this.pos.to, r), this.pos.to = n(this.pos.from.line + i.length - 1, i[i.length - 1].length + (1 == i.length ? this.pos.from.ch : 0))
                    }
                }
            }, e.defineExtension("getSearchCursor", function(e, r, n) {
                return new t(this.doc, e, r, n)
            }), e.defineDocExtension("getSearchCursor", function(e, r, n) {
                return new t(this, e, r, n)
            }), e.defineExtension("selectMatches", function(t, r) {
                for (var n, i = [], o = this.getSearchCursor(t, this.getCursor("from"), r);
                    (n = o.findNext()) && !(e.cmpPos(o.to(), this.getCursor("to")) > 0);) i.push({
                    anchor: o.from(),
                    head: o.to()
                });
                i.length && this.setSelections(i, 0)
            })
        }),
        function(t) {
            "object" == typeof exports && "object" == typeof module ? t(e("../../lib/codemirror")) : "function" == typeof define && define.amd ? define(["../../lib/codemirror"], t) : t(CodeMirror)
        }(function(e) {
            "use strict";

            function t(e) {
                for (var t = 0; t < e.state.activeLines.length; t++) e.removeLineClass(e.state.activeLines[t], "wrap", o), e.removeLineClass(e.state.activeLines[t], "background", a)
            }

            function r(e, t) {
                if (e.length != t.length) return !1;
                for (var r = 0; r < e.length; r++)
                    if (e[r] != t[r]) return !1;
                return !0
            }

            function n(e, n) {
                for (var i = [], l = 0; l < n.length; l++) {
                    var s = n[l];
                    if (s.empty()) {
                        var c = e.getLineHandleVisualStart(s.head.line);
                        i[i.length - 1] != c && i.push(c)
                    }
                }
                r(e.state.activeLines, i) || e.operation(function() {
                    t(e);
                    for (var r = 0; r < i.length; r++) e.addLineClass(i[r], "wrap", o), e.addLineClass(i[r], "background", a);
                    e.state.activeLines = i
                })
            }

            function i(e, t) {
                n(e, t.ranges)
            }
            var o = "CodeMirror-activeline",
                a = "CodeMirror-activeline-background";
            e.defineOption("styleActiveLine", !1, function(r, o, a) {
                var l = a && a != e.Init;
                o && !l ? (r.state.activeLines = [], n(r, r.listSelections()), r.on("beforeSelectionChange", i)) : !o && l && (r.off("beforeSelectionChange", i), t(r), delete r.state.activeLines)
            })
        }),
        function(t) {
            "object" == typeof exports && "object" == typeof module ? t(e("../../lib/codemirror")) : "function" == typeof define && define.amd ? define(["../../lib/codemirror"], t) : t(CodeMirror)
        }(function(e) {
            "use strict";

            function t(e) {
                for (var t = {}, r = 0; r < e.length; ++r) t[e[r]] = !0;
                return t
            }

            function r(e, t) {
                for (var r, n = !1; null != (r = e.next());) {
                    if (n && "/" == r) {
                        t.tokenize = null;
                        break
                    }
                    n = "*" == r
                }
                return ["comment", "comment"]
            }

            function n(e, t) {
                return e.skipTo("-->") ? (e.match("-->"), t.tokenize = null) : e.skipToEnd(), ["comment", "comment"]
            }
            e.defineMode("css", function(t, r) {
                function n(e, t) {
                    return h = t, e
                }

                function i(e, t) {
                    var r = e.next();
                    if (m[r]) {
                        var i = m[r](e, t);
                        if (i !== !1) return i
                    }
                    return "@" == r ? (e.eatWhile(/[\w\\\-]/), n("def", e.current())) : "=" == r || ("~" == r || "|" == r) && e.eat("=") ? n(null, "compare") : '"' == r || "'" == r ? (t.tokenize = o(r), t.tokenize(e, t)) : "#" == r ? (e.eatWhile(/[\w\\\-]/), n("atom", "hash")) : "!" == r ? (e.match(/^\s*\w*/), n("keyword", "important")) : /\d/.test(r) || "." == r && e.eat(/\d/) ? (e.eatWhile(/[\w.%]/), n("number", "unit")) : "-" !== r ? /[,+>*\/]/.test(r) ? n(null, "select-op") : "." == r && e.match(/^-?[_a-z][_a-z0-9-]*/i) ? n("qualifier", "qualifier") : /[:;{}\[\]\(\)]/.test(r) ? n(null, r) : "u" == r && e.match(/rl(-prefix)?\(/) || "d" == r && e.match("omain(") || "r" == r && e.match("egexp(") ? (e.backUp(1), t.tokenize = a, n("property", "word")) : /[\w\\\-]/.test(r) ? (e.eatWhile(/[\w\\\-]/), n("property", "word")) : n(null, null) : /[\d.]/.test(e.peek()) ? (e.eatWhile(/[\w.%]/), n("number", "unit")) : e.match(/^-[\w\\\-]+/) ? (e.eatWhile(/[\w\\\-]/), e.match(/^\s*:/, !1) ? n("variable-2", "variable-definition") : n("variable-2", "variable")) : e.match(/^\w+-/) ? n("meta", "meta") : void 0
                }

                function o(e) {
                    return function(t, r) {
                        for (var i, o = !1; null != (i = t.next());) {
                            if (i == e && !o) {
                                ")" == e && t.backUp(1);
                                break
                            }
                            o = !o && "\\" == i
                        }
                        return (i == e || !o && ")" != e) && (r.tokenize = null), n("string", "string")
                    }
                }

                function a(e, t) {
                    return e.next(), e.match(/\s*[\"\')]/, !1) ? t.tokenize = null : t.tokenize = o(")"), n(null, "(")
                }

                function l(e, t, r) {
                    this.type = e, this.indent = t, this.prev = r
                }

                function s(e, t, r) {
                    return e.context = new l(r, t.indentation() + g, e.context), r
                }

                function c(e) {
                    return e.context = e.context.prev, e.context.type
                }

                function u(e, t, r) {
                    return T[r.context.type](e, t, r)
                }

                function f(e, t, r, n) {
                    for (var i = n || 1; i > 0; i--) r.context = r.context.prev;
                    return u(e, t, r)
                }

                function d(e) {
                    var t = e.current().toLowerCase();
                    p = L.hasOwnProperty(t) ? "atom" : S.hasOwnProperty(t) ? "keyword" : "variable"
                }
                r.propertyKeywords || (r = e.resolveMode("text/css"));
                var h, p, g = t.indentUnit,
                    m = r.tokenHooks,
                    v = r.documentTypes || {},
                    y = r.mediaTypes || {},
                    b = r.mediaFeatures || {},
                    x = r.propertyKeywords || {},
                    w = r.nonStandardPropertyKeywords || {},
                    k = r.fontProperties || {},
                    C = r.counterDescriptors || {},
                    S = r.colorKeywords || {},
                    L = r.valueKeywords || {},
                    M = r.allowNested,
                    T = {};
                return T.top = function(e, t, r) {
                    if ("{" == e) return s(r, t, "block");
                    if ("}" == e && r.context.prev) return c(r);
                    if (/@(media|supports|(-moz-)?document)/.test(e)) return s(r, t, "atBlock");
                    if (/@(font-face|counter-style)/.test(e)) return r.stateArg = e, "restricted_atBlock_before";
                    if (/^@(-(moz|ms|o|webkit)-)?keyframes$/.test(e)) return "keyframes";
                    if (e && "@" == e.charAt(0)) return s(r, t, "at");
                    if ("hash" == e) p = "builtin";
                    else if ("word" == e) p = "tag";
                    else {
                        if ("variable-definition" == e) return "maybeprop";
                        if ("interpolation" == e) return s(r, t, "interpolation");
                        if (":" == e) return "pseudo";
                        if (M && "(" == e) return s(r, t, "parens")
                    }
                    return r.context.type
                }, T.block = function(e, t, r) {
                    if ("word" == e) {
                        var n = t.current().toLowerCase();
                        return x.hasOwnProperty(n) ? (p = "property", "maybeprop") : w.hasOwnProperty(n) ? (p = "string-2", "maybeprop") : M ? (p = t.match(/^\s*:(?:\s|$)/, !1) ? "property" : "tag", "block") : (p += " error", "maybeprop")
                    }
                    return "meta" == e ? "block" : M || "hash" != e && "qualifier" != e ? T.top(e, t, r) : (p = "error", "block")
                }, T.maybeprop = function(e, t, r) {
                    return ":" == e ? s(r, t, "prop") : u(e, t, r)
                }, T.prop = function(e, t, r) {
                    if (";" == e) return c(r);
                    if ("{" == e && M) return s(r, t, "propBlock");
                    if ("}" == e || "{" == e) return f(e, t, r);
                    if ("(" == e) return s(r, t, "parens");
                    if ("hash" != e || /^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(t.current())) {
                        if ("word" == e) d(t);
                        else if ("interpolation" == e) return s(r, t, "interpolation")
                    } else p += " error";
                    return "prop"
                }, T.propBlock = function(e, t, r) {
                    return "}" == e ? c(r) : "word" == e ? (p = "property", "maybeprop") : r.context.type
                }, T.parens = function(e, t, r) {
                    return "{" == e || "}" == e ? f(e, t, r) : ")" == e ? c(r) : "(" == e ? s(r, t, "parens") : "interpolation" == e ? s(r, t, "interpolation") : ("word" == e && d(t), "parens")
                }, T.pseudo = function(e, t, r) {
                    return "word" == e ? (p = "variable-3", r.context.type) : u(e, t, r)
                }, T.atBlock = function(e, t, r) {
                    if ("(" == e) return s(r, t, "atBlock_parens");
                    if ("}" == e) return f(e, t, r);
                    if ("{" == e) return c(r) && s(r, t, M ? "block" : "top");
                    if ("word" == e) {
                        var n = t.current().toLowerCase();
                        p = "only" == n || "not" == n || "and" == n || "or" == n ? "keyword" : v.hasOwnProperty(n) ? "tag" : y.hasOwnProperty(n) ? "attribute" : b.hasOwnProperty(n) ? "property" : x.hasOwnProperty(n) ? "property" : w.hasOwnProperty(n) ? "string-2" : L.hasOwnProperty(n) ? "atom" : "error"
                    }
                    return r.context.type
                }, T.atBlock_parens = function(e, t, r) {
                    return ")" == e ? c(r) : "{" == e || "}" == e ? f(e, t, r, 2) : T.atBlock(e, t, r)
                }, T.restricted_atBlock_before = function(e, t, r) {
                    return "{" == e ? s(r, t, "restricted_atBlock") : "word" == e && "@counter-style" == r.stateArg ? (p = "variable", "restricted_atBlock_before") : u(e, t, r)
                }, T.restricted_atBlock = function(e, t, r) {
                    return "}" == e ? (r.stateArg = null, c(r)) : "word" == e ? (p = "@font-face" == r.stateArg && !k.hasOwnProperty(t.current().toLowerCase()) || "@counter-style" == r.stateArg && !C.hasOwnProperty(t.current().toLowerCase()) ? "error" : "property", "maybeprop") : "restricted_atBlock"
                }, T.keyframes = function(e, t, r) {
                    return "word" == e ? (p = "variable", "keyframes") : "{" == e ? s(r, t, "top") : u(e, t, r)
                }, T.at = function(e, t, r) {
                    return ";" == e ? c(r) : "{" == e || "}" == e ? f(e, t, r) : ("word" == e ? p = "tag" : "hash" == e && (p = "builtin"), "at")
                }, T.interpolation = function(e, t, r) {
                    return "}" == e ? c(r) : "{" == e || ";" == e ? f(e, t, r) : ("word" == e ? p = "variable" : "variable" != e && (p = "error"), "interpolation")
                }, {
                    startState: function(e) {
                        return {
                            tokenize: null,
                            state: "top",
                            stateArg: null,
                            context: new l("top", e || 0, null)
                        }
                    },
                    token: function(e, t) {
                        if (!t.tokenize && e.eatSpace()) return null;
                        var r = (t.tokenize || i)(e, t);
                        return r && "object" == typeof r && (h = r[1], r = r[0]), p = r, t.state = T[t.state](h, e, t), p
                    },
                    indent: function(e, t) {
                        var r = e.context,
                            n = t && t.charAt(0),
                            i = r.indent;
                        return "prop" != r.type || "}" != n && ")" != n || (r = r.prev), !r.prev || ("}" != n || "block" != r.type && "top" != r.type && "interpolation" != r.type && "restricted_atBlock" != r.type) && (")" != n || "parens" != r.type && "atBlock_parens" != r.type) && ("{" != n || "at" != r.type && "atBlock" != r.type) || (i = r.indent - g, r = r.prev), i
                    },
                    electricChars: "}",
                    blockCommentStart: "/*",
                    blockCommentEnd: "*/",
                    fold: "brace"
                }
            });
            var i = ["domain", "regexp", "url", "url-prefix"],
                o = t(i),
                a = ["all", "aural", "braille", "handheld", "print", "projection", "screen", "tty", "tv", "embossed"],
                l = t(a),
                s = ["width", "min-width", "max-width", "height", "min-height", "max-height", "device-width", "min-device-width", "max-device-width", "device-height", "min-device-height", "max-device-height", "aspect-ratio", "min-aspect-ratio", "max-aspect-ratio", "device-aspect-ratio", "min-device-aspect-ratio", "max-device-aspect-ratio", "color", "min-color", "max-color", "color-index", "min-color-index", "max-color-index", "monochrome", "min-monochrome", "max-monochrome", "resolution", "min-resolution", "max-resolution", "scan", "grid"],
                c = t(s),
                u = ["align-content", "align-items", "align-self", "alignment-adjust", "alignment-baseline", "anchor-point", "animation", "animation-delay", "animation-direction", "animation-duration", "animation-fill-mode", "animation-iteration-count", "animation-name", "animation-play-state", "animation-timing-function", "appearance", "azimuth", "backface-visibility", "background", "background-attachment", "background-clip", "background-color", "background-image", "background-origin", "background-position", "background-repeat", "background-size", "baseline-shift", "binding", "bleed", "bookmark-label", "bookmark-level", "bookmark-state", "bookmark-target", "border", "border-bottom", "border-bottom-color", "border-bottom-left-radius", "border-bottom-right-radius", "border-bottom-style", "border-bottom-width", "border-collapse", "border-color", "border-image", "border-image-outset", "border-image-repeat", "border-image-slice", "border-image-source", "border-image-width", "border-left", "border-left-color", "border-left-style", "border-left-width", "border-radius", "border-right", "border-right-color", "border-right-style", "border-right-width", "border-spacing", "border-style", "border-top", "border-top-color", "border-top-left-radius", "border-top-right-radius", "border-top-style", "border-top-width", "border-width", "bottom", "box-decoration-break", "box-shadow", "box-sizing", "break-after", "break-before", "break-inside", "caption-side", "clear", "clip", "color", "color-profile", "column-count", "column-fill", "column-gap", "column-rule", "column-rule-color", "column-rule-style", "column-rule-width", "column-span", "column-width", "columns", "content", "counter-increment", "counter-reset", "crop", "cue", "cue-after", "cue-before", "cursor", "direction", "display", "dominant-baseline", "drop-initial-after-adjust", "drop-initial-after-align", "drop-initial-before-adjust", "drop-initial-before-align", "drop-initial-size", "drop-initial-value", "elevation", "empty-cells", "fit", "fit-position", "flex", "flex-basis", "flex-direction", "flex-flow", "flex-grow", "flex-shrink", "flex-wrap", "float", "float-offset", "flow-from", "flow-into", "font", "font-feature-settings", "font-family", "font-kerning", "font-language-override", "font-size", "font-size-adjust", "font-stretch", "font-style", "font-synthesis", "font-variant", "font-variant-alternates", "font-variant-caps", "font-variant-east-asian", "font-variant-ligatures", "font-variant-numeric", "font-variant-position", "font-weight", "grid", "grid-area", "grid-auto-columns", "grid-auto-flow", "grid-auto-position", "grid-auto-rows", "grid-column", "grid-column-end", "grid-column-start", "grid-row", "grid-row-end", "grid-row-start", "grid-template", "grid-template-areas", "grid-template-columns", "grid-template-rows", "hanging-punctuation", "height", "hyphens", "icon", "image-orientation", "image-rendering", "image-resolution", "inline-box-align", "justify-content", "left", "letter-spacing", "line-break", "line-height", "line-stacking", "line-stacking-ruby", "line-stacking-shift", "line-stacking-strategy", "list-style", "list-style-image", "list-style-position", "list-style-type", "margin", "margin-bottom", "margin-left", "margin-right", "margin-top", "marker-offset", "marks", "marquee-direction", "marquee-loop", "marquee-play-count", "marquee-speed", "marquee-style", "max-height", "max-width", "min-height", "min-width", "move-to", "nav-down", "nav-index", "nav-left", "nav-right", "nav-up", "object-fit", "object-position", "opacity", "order", "orphans", "outline", "outline-color", "outline-offset", "outline-style", "outline-width", "overflow", "overflow-style", "overflow-wrap", "overflow-x", "overflow-y", "padding", "padding-bottom", "padding-left", "padding-right", "padding-top", "page", "page-break-after", "page-break-before", "page-break-inside", "page-policy", "pause", "pause-after", "pause-before", "perspective", "perspective-origin", "pitch", "pitch-range", "play-during", "position", "presentation-level", "punctuation-trim", "quotes", "region-break-after", "region-break-before", "region-break-inside", "region-fragment", "rendering-intent", "resize", "rest", "rest-after", "rest-before", "richness", "right", "rotation", "rotation-point", "ruby-align", "ruby-overhang", "ruby-position", "ruby-span", "shape-image-threshold", "shape-inside", "shape-margin", "shape-outside", "size", "speak", "speak-as", "speak-header", "speak-numeral", "speak-punctuation", "speech-rate", "stress", "string-set", "tab-size", "table-layout", "target", "target-name", "target-new", "target-position", "text-align", "text-align-last", "text-decoration", "text-decoration-color", "text-decoration-line", "text-decoration-skip", "text-decoration-style", "text-emphasis", "text-emphasis-color", "text-emphasis-position", "text-emphasis-style", "text-height", "text-indent", "text-justify", "text-outline", "text-overflow", "text-shadow", "text-size-adjust", "text-space-collapse", "text-transform", "text-underline-position", "text-wrap", "top", "transform", "transform-origin", "transform-style", "transition", "transition-delay", "transition-duration", "transition-property", "transition-timing-function", "unicode-bidi", "vertical-align", "visibility", "voice-balance", "voice-duration", "voice-family", "voice-pitch", "voice-range", "voice-rate", "voice-stress", "voice-volume", "volume", "white-space", "widows", "width", "word-break", "word-spacing", "word-wrap", "z-index", "clip-path", "clip-rule", "mask", "enable-background", "filter", "flood-color", "flood-opacity", "lighting-color", "stop-color", "stop-opacity", "pointer-events", "color-interpolation", "color-interpolation-filters", "color-rendering", "fill", "fill-opacity", "fill-rule", "image-rendering", "marker", "marker-end", "marker-mid", "marker-start", "shape-rendering", "stroke", "stroke-dasharray", "stroke-dashoffset", "stroke-linecap", "stroke-linejoin", "stroke-miterlimit", "stroke-opacity", "stroke-width", "text-rendering", "baseline-shift", "dominant-baseline", "glyph-orientation-horizontal", "glyph-orientation-vertical", "text-anchor", "writing-mode"],
                f = t(u),
                d = ["scrollbar-arrow-color", "scrollbar-base-color", "scrollbar-dark-shadow-color", "scrollbar-face-color", "scrollbar-highlight-color", "scrollbar-shadow-color", "scrollbar-3d-light-color", "scrollbar-track-color", "shape-inside", "searchfield-cancel-button", "searchfield-decoration", "searchfield-results-button", "searchfield-results-decoration", "zoom"],
                h = t(d),
                p = ["font-family", "src", "unicode-range", "font-variant", "font-feature-settings", "font-stretch", "font-weight", "font-style"],
                g = t(p),
                m = ["additive-symbols", "fallback", "negative", "pad", "prefix", "range", "speak-as", "suffix", "symbols", "system"],
                v = t(m),
                y = ["aliceblue", "antiquewhite", "aqua", "aquamarine", "azure", "beige", "bisque", "black", "blanchedalmond", "blue", "blueviolet", "brown", "burlywood", "cadetblue", "chartreuse", "chocolate", "coral", "cornflowerblue", "cornsilk", "crimson", "cyan", "darkblue", "darkcyan", "darkgoldenrod", "darkgray", "darkgreen", "darkkhaki", "darkmagenta", "darkolivegreen", "darkorange", "darkorchid", "darkred", "darksalmon", "darkseagreen", "darkslateblue", "darkslategray", "darkturquoise", "darkviolet", "deeppink", "deepskyblue", "dimgray", "dodgerblue", "firebrick", "floralwhite", "forestgreen", "fuchsia", "gainsboro", "ghostwhite", "gold", "goldenrod", "gray", "grey", "green", "greenyellow", "honeydew", "hotpink", "indianred", "indigo", "ivory", "khaki", "lavender", "lavenderblush", "lawngreen", "lemonchiffon", "lightblue", "lightcoral", "lightcyan", "lightgoldenrodyellow", "lightgray", "lightgreen", "lightpink", "lightsalmon", "lightseagreen", "lightskyblue", "lightslategray", "lightsteelblue", "lightyellow", "lime", "limegreen", "linen", "magenta", "maroon", "mediumaquamarine", "mediumblue", "mediumorchid", "mediumpurple", "mediumseagreen", "mediumslateblue", "mediumspringgreen", "mediumturquoise", "mediumvioletred", "midnightblue", "mintcream", "mistyrose", "moccasin", "navajowhite", "navy", "oldlace", "olive", "olivedrab", "orange", "orangered", "orchid", "palegoldenrod", "palegreen", "paleturquoise", "palevioletred", "papayawhip", "peachpuff", "peru", "pink", "plum", "powderblue", "purple", "rebeccapurple", "red", "rosybrown", "royalblue", "saddlebrown", "salmon", "sandybrown", "seagreen", "seashell", "sienna", "silver", "skyblue", "slateblue", "slategray", "snow", "springgreen", "steelblue", "tan", "teal", "thistle", "tomato", "turquoise", "violet", "wheat", "white", "whitesmoke", "yellow", "yellowgreen"],
                b = t(y),
                x = ["above", "absolute", "activeborder", "additive", "activecaption", "afar", "after-white-space", "ahead", "alias", "all", "all-scroll", "alphabetic", "alternate", "always", "amharic", "amharic-abegede", "antialiased", "appworkspace", "arabic-indic", "armenian", "asterisks", "attr", "auto", "avoid", "avoid-column", "avoid-page", "avoid-region", "background", "backwards", "baseline", "below", "bidi-override", "binary", "bengali", "blink", "block", "block-axis", "bold", "bolder", "border", "border-box", "both", "bottom", "break", "break-all", "break-word", "bullets", "button", "button-bevel", "buttonface", "buttonhighlight", "buttonshadow", "buttontext", "calc", "cambodian", "capitalize", "caps-lock-indicator", "caption", "captiontext", "caret", "cell", "center", "checkbox", "circle", "cjk-decimal", "cjk-earthly-branch", "cjk-heavenly-stem", "cjk-ideographic", "clear", "clip", "close-quote", "col-resize", "collapse", "column", "compact", "condensed", "contain", "content", "content-box", "context-menu", "continuous", "copy", "counter", "counters", "cover", "crop", "cross", "crosshair", "currentcolor", "cursive", "cyclic", "dashed", "decimal", "decimal-leading-zero", "default", "default-button", "destination-atop", "destination-in", "destination-out", "destination-over", "devanagari", "disc", "discard", "disclosure-closed", "disclosure-open", "document", "dot-dash", "dot-dot-dash", "dotted", "double", "down", "e-resize", "ease", "ease-in", "ease-in-out", "ease-out", "element", "ellipse", "ellipsis", "embed", "end", "ethiopic", "ethiopic-abegede", "ethiopic-abegede-am-et", "ethiopic-abegede-gez", "ethiopic-abegede-ti-er", "ethiopic-abegede-ti-et", "ethiopic-halehame-aa-er", "ethiopic-halehame-aa-et", "ethiopic-halehame-am-et", "ethiopic-halehame-gez", "ethiopic-halehame-om-et", "ethiopic-halehame-sid-et", "ethiopic-halehame-so-et", "ethiopic-halehame-ti-er", "ethiopic-halehame-ti-et", "ethiopic-halehame-tig", "ethiopic-numeric", "ew-resize", "expanded", "extends", "extra-condensed", "extra-expanded", "fantasy", "fast", "fill", "fixed", "flat", "flex", "footnotes", "forwards", "from", "geometricPrecision", "georgian", "graytext", "groove", "gujarati", "gurmukhi", "hand", "hangul", "hangul-consonant", "hebrew", "help", "hidden", "hide", "higher", "highlight", "highlighttext", "hiragana", "hiragana-iroha", "horizontal", "hsl", "hsla", "icon", "ignore", "inactiveborder", "inactivecaption", "inactivecaptiontext", "infinite", "infobackground", "infotext", "inherit", "initial", "inline", "inline-axis", "inline-block", "inline-flex", "inline-table", "inset", "inside", "intrinsic", "invert", "italic", "japanese-formal", "japanese-informal", "justify", "kannada", "katakana", "katakana-iroha", "keep-all", "khmer", "korean-hangul-formal", "korean-hanja-formal", "korean-hanja-informal", "landscape", "lao", "large", "larger", "left", "level", "lighter", "line-through", "linear", "linear-gradient", "lines", "list-item", "listbox", "listitem", "local", "logical", "loud", "lower", "lower-alpha", "lower-armenian", "lower-greek", "lower-hexadecimal", "lower-latin", "lower-norwegian", "lower-roman", "lowercase", "ltr", "malayalam", "match", "matrix", "matrix3d", "media-controls-background", "media-current-time-display", "media-fullscreen-button", "media-mute-button", "media-play-button", "media-return-to-realtime-button", "media-rewind-button", "media-seek-back-button", "media-seek-forward-button", "media-slider", "media-sliderthumb", "media-time-remaining-display", "media-volume-slider", "media-volume-slider-container", "media-volume-sliderthumb", "medium", "menu", "menulist", "menulist-button", "menulist-text", "menulist-textfield", "menutext", "message-box", "middle", "min-intrinsic", "mix", "mongolian", "monospace", "move", "multiple", "myanmar", "n-resize", "narrower", "ne-resize", "nesw-resize", "no-close-quote", "no-drop", "no-open-quote", "no-repeat", "none", "normal", "not-allowed", "nowrap", "ns-resize", "numbers", "numeric", "nw-resize", "nwse-resize", "oblique", "octal", "open-quote", "optimizeLegibility", "optimizeSpeed", "oriya", "oromo", "outset", "outside", "outside-shape", "overlay", "overline", "padding", "padding-box", "painted", "page", "paused", "persian", "perspective", "plus-darker", "plus-lighter", "pointer", "polygon", "portrait", "pre", "pre-line", "pre-wrap", "preserve-3d", "progress", "push-button", "radial-gradient", "radio", "read-only", "read-write", "read-write-plaintext-only", "rectangle", "region", "relative", "repeat", "repeating-linear-gradient", "repeating-radial-gradient", "repeat-x", "repeat-y", "reset", "reverse", "rgb", "rgba", "ridge", "right", "rotate", "rotate3d", "rotateX", "rotateY", "rotateZ", "round", "row-resize", "rtl", "run-in", "running", "s-resize", "sans-serif", "scale", "scale3d", "scaleX", "scaleY", "scaleZ", "scroll", "scrollbar", "se-resize", "searchfield", "searchfield-cancel-button", "searchfield-decoration", "searchfield-results-button", "searchfield-results-decoration", "semi-condensed", "semi-expanded", "separate", "serif", "show", "sidama", "simp-chinese-formal", "simp-chinese-informal", "single", "skew", "skewX", "skewY", "skip-white-space", "slide", "slider-horizontal", "slider-vertical", "sliderthumb-horizontal", "sliderthumb-vertical", "slow", "small", "small-caps", "small-caption", "smaller", "solid", "somali", "source-atop", "source-in", "source-out", "source-over", "space", "spell-out", "square", "square-button", "start", "static", "status-bar", "stretch", "stroke", "sub", "subpixel-antialiased", "super", "sw-resize", "symbolic", "symbols", "table", "table-caption", "table-cell", "table-column", "table-column-group", "table-footer-group", "table-header-group", "table-row", "table-row-group", "tamil", "telugu", "text", "text-bottom", "text-top", "textarea", "textfield", "thai", "thick", "thin", "threeddarkshadow", "threedface", "threedhighlight", "threedlightshadow", "threedshadow", "tibetan", "tigre", "tigrinya-er", "tigrinya-er-abegede", "tigrinya-et", "tigrinya-et-abegede", "to", "top", "trad-chinese-formal", "trad-chinese-informal", "translate", "translate3d", "translateX", "translateY", "translateZ", "transparent", "ultra-condensed", "ultra-expanded", "underline", "up", "upper-alpha", "upper-armenian", "upper-greek", "upper-hexadecimal", "upper-latin", "upper-norwegian", "upper-roman", "uppercase", "urdu", "url", "var", "vertical", "vertical-text", "visible", "visibleFill", "visiblePainted", "visibleStroke", "visual", "w-resize", "wait", "wave", "wider", "window", "windowframe", "windowtext", "words", "x-large", "x-small", "xor", "xx-large", "xx-small"],
                w = t(x),
                k = i.concat(a).concat(s).concat(u).concat(d).concat(y).concat(x);
            e.registerHelper("hintWords", "css", k), e.defineMIME("text/css", {
                documentTypes: o,
                mediaTypes: l,
                mediaFeatures: c,
                propertyKeywords: f,
                nonStandardPropertyKeywords: h,
                fontProperties: g,
                counterDescriptors: v,
                colorKeywords: b,
                valueKeywords: w,
                tokenHooks: {
                    "<": function(e, t) {
                        return e.match("!--") ? (t.tokenize = n, n(e, t)) : !1
                    },
                    "/": function(e, t) {
                        return e.eat("*") ? (t.tokenize = r, r(e, t)) : !1
                    }
                },
                name: "css"
            }), e.defineMIME("text/x-scss", {
                mediaTypes: l,
                mediaFeatures: c,
                propertyKeywords: f,
                nonStandardPropertyKeywords: h,
                colorKeywords: b,
                valueKeywords: w,
                fontProperties: g,
                allowNested: !0,
                tokenHooks: {
                    "/": function(e, t) {
                        return e.eat("/") ? (e.skipToEnd(), ["comment", "comment"]) : e.eat("*") ? (t.tokenize = r, r(e, t)) : ["operator", "operator"]
                    },
                    ":": function(e) {
                        return e.match(/\s*\{/) ? [null, "{"] : !1
                    },
                    $: function(e) {
                        return e.match(/^[\w-]+/), e.match(/^\s*:/, !1) ? ["variable-2", "variable-definition"] : ["variable-2", "variable"]
                    },
                    "#": function(e) {
                        return e.eat("{") ? [null, "interpolation"] : !1
                    }
                },
                name: "css",
                helperType: "scss"
            }), e.defineMIME("text/x-less", {
                mediaTypes: l,
                mediaFeatures: c,
                propertyKeywords: f,
                nonStandardPropertyKeywords: h,
                colorKeywords: b,
                valueKeywords: w,
                fontProperties: g,
                allowNested: !0,
                tokenHooks: {
                    "/": function(e, t) {
                        return e.eat("/") ? (e.skipToEnd(), ["comment", "comment"]) : e.eat("*") ? (t.tokenize = r, r(e, t)) : ["operator", "operator"]
                    },
                    "@": function(e) {
                        return e.eat("{") ? [null, "interpolation"] : e.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/, !1) ? !1 : (e.eatWhile(/[\w\\\-]/), e.match(/^\s*:/, !1) ? ["variable-2", "variable-definition"] : ["variable-2", "variable"])
                    },
                    "&": function() {
                        return ["atom", "atom"]
                    }
                },
                name: "css",
                helperType: "less"
            })
        }),
        function(t) {
            "object" == typeof exports && "object" == typeof module ? t(e("../../lib/codemirror")) : "function" == typeof define && define.amd ? define(["../../lib/codemirror"], t) : t(CodeMirror)
        }(function(e) {
            "use strict";
            e.defineMode("javascript", function(t, r) {
                function n(e) {
                    for (var t, r = !1, n = !1; null != (t = e.next());) {
                        if (!r) {
                            if ("/" == t && !n) return;
                            "[" == t ? n = !0 : n && "]" == t && (n = !1)
                        }
                        r = !r && "\\" == t
                    }
                }

                function i(e, t, r) {
                    return me = e, ve = r, t
                }

                function o(e, t) {
                    var r = e.next();
                    if ('"' == r || "'" == r) return t.tokenize = a(r), t.tokenize(e, t);
                    if ("." == r && e.match(/^\d+(?:[eE][+\-]?\d+)?/)) return i("number", "number");
                    if ("." == r && e.match("..")) return i("spread", "meta");
                    if (/[\[\]{}\(\),;\:\.]/.test(r)) return i(r);
                    if ("=" == r && e.eat(">")) return i("=>", "operator");
                    if ("0" == r && e.eat(/x/i)) return e.eatWhile(/[\da-f]/i), i("number", "number");
                    if (/\d/.test(r)) return e.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/), i("number", "number");
                    if ("/" == r) return e.eat("*") ? (t.tokenize = l, l(e, t)) : e.eat("/") ? (e.skipToEnd(), i("comment", "comment")) : "operator" == t.lastType || "keyword c" == t.lastType || "sof" == t.lastType || /^[\[{}\(,;:]$/.test(t.lastType) ? (n(e), e.match(/^\b(([gimyu])(?![gimyu]*\2))+\b/), i("regexp", "string-2")) : (e.eatWhile(Le), i("operator", "operator", e.current()));
                    if ("`" == r) return t.tokenize = s, s(e, t);
                    if ("#" == r) return e.skipToEnd(), i("error", "error");
                    if (Le.test(r)) return e.eatWhile(Le), i("operator", "operator", e.current());
                    if (Ce.test(r)) {
                        e.eatWhile(Ce);
                        var o = e.current(),
                            c = Se.propertyIsEnumerable(o) && Se[o];
                        return c && "." != t.lastType ? i(c.type, c.style, o) : i("variable", "variable", o)
                    }
                }

                function a(e) {
                    return function(t, r) {
                        var n, a = !1;
                        if (xe && "@" == t.peek() && t.match(Me)) return r.tokenize = o, i("jsonld-keyword", "meta");
                        for (; null != (n = t.next()) && (n != e || a);) a = !a && "\\" == n;
                        return a || (r.tokenize = o), i("string", "string")
                    }
                }

                function l(e, t) {
                    for (var r, n = !1; r = e.next();) {
                        if ("/" == r && n) {
                            t.tokenize = o;
                            break
                        }
                        n = "*" == r
                    }
                    return i("comment", "comment")
                }

                function s(e, t) {
                    for (var r, n = !1; null != (r = e.next());) {
                        if (!n && ("`" == r || "$" == r && e.eat("{"))) {
                            t.tokenize = o;
                            break
                        }
                        n = !n && "\\" == r
                    }
                    return i("quasi", "string-2", e.current())
                }

                function c(e, t) {
                    t.fatArrowAt && (t.fatArrowAt = null);
                    var r = e.string.indexOf("=>", e.start);
                    if (!(0 > r)) {
                        for (var n = 0, i = !1, o = r - 1; o >= 0; --o) {
                            var a = e.string.charAt(o),
                                l = Te.indexOf(a);
                            if (l >= 0 && 3 > l) {
                                if (!n) {
                                    ++o;
                                    break
                                }
                                if (0 == --n) break
                            } else if (l >= 3 && 6 > l) ++n;
                            else if (Ce.test(a)) i = !0;
                            else {
                                if (/["'\/]/.test(a)) return;
                                if (i && !n) {
                                    ++o;
                                    break
                                }
                            }
                        }
                        i && !n && (t.fatArrowAt = o)
                    }
                }

                function u(e, t, r, n, i, o) {
                    this.indented = e, this.column = t, this.type = r, this.prev = i, this.info = o, null != n && (this.align = n)
                }

                function f(e, t) {
                    for (var r = e.localVars; r; r = r.next)
                        if (r.name == t) return !0;
                    for (var n = e.context; n; n = n.prev)
                        for (var r = n.vars; r; r = r.next)
                            if (r.name == t) return !0
                }

                function d(e, t, r, n, i) {
                    var o = e.cc;
                    for (Ne.state = e, Ne.stream = i, Ne.marked = null, Ne.cc = o, Ne.style = t, e.lexical.hasOwnProperty("align") || (e.lexical.align = !0);;) {
                        var a = o.length ? o.pop() : we ? k : w;
                        if (a(r, n)) {
                            for (; o.length && o[o.length - 1].lex;) o.pop()();
                            return Ne.marked ? Ne.marked : "variable" == r && f(e, n) ? "variable-2" : t
                        }
                    }
                }

                function h() {
                    for (var e = arguments.length - 1; e >= 0; e--) Ne.cc.push(arguments[e])
                }

                function p() {
                    return h.apply(null, arguments), !0
                }

                function g(e) {
                    function t(t) {
                        for (var r = t; r; r = r.next)
                            if (r.name == e) return !0;
                        return !1
                    }
                    var n = Ne.state;
                    if (n.context) {
                        if (Ne.marked = "def", t(n.localVars)) return;
                        n.localVars = {
                            name: e,
                            next: n.localVars
                        }
                    } else {
                        if (t(n.globalVars)) return;
                        r.globalVars && (n.globalVars = {
                            name: e,
                            next: n.globalVars
                        })
                    }
                }

                function m() {
                    Ne.state.context = {
                        prev: Ne.state.context,
                        vars: Ne.state.localVars
                    }, Ne.state.localVars = Oe
                }

                function v() {
                    Ne.state.localVars = Ne.state.context.vars, Ne.state.context = Ne.state.context.prev
                }

                function y(e, t) {
                    var r = function() {
                        var r = Ne.state,
                            n = r.indented;
                        if ("stat" == r.lexical.type) n = r.lexical.indented;
                        else
                            for (var i = r.lexical; i && ")" == i.type && i.align; i = i.prev) n = i.indented;
                        r.lexical = new u(n, Ne.stream.column(), e, null, r.lexical, t)
                    };
                    return r.lex = !0, r
                }

                function b() {
                    var e = Ne.state;
                    e.lexical.prev && (")" == e.lexical.type && (e.indented = e.lexical.indented), e.lexical = e.lexical.prev)
                }

                function x(e) {
                    function t(r) {
                        return r == e ? p() : ";" == e ? h() : p(t)
                    }
                    return t
                }

                function w(e, t) {
                    return "var" == e ? p(y("vardef", t.length), q, x(";"), b) : "keyword a" == e ? p(y("form"), k, w, b) : "keyword b" == e ? p(y("form"), w, b) : "{" == e ? p(y("}"), R, b) : ";" == e ? p() : "if" == e ? ("else" == Ne.state.lexical.info && Ne.state.cc[Ne.state.cc.length - 1] == b && Ne.state.cc.pop()(), p(y("form"), k, w, b, $)) : "function" == e ? p(ee) : "for" == e ? p(y("form"), X, w, b) : "variable" == e ? p(y("stat"), P) : "switch" == e ? p(y("form"), k, y("}", "switch"), x("{"), R, b, b) : "case" == e ? p(k, x(":")) : "default" == e ? p(x(":")) : "catch" == e ? p(y("form"), m, x("("), te, x(")"), w, b, v) : "module" == e ? p(y("form"), m, ae, v, b) : "class" == e ? p(y("form"), re, b) : "export" == e ? p(y("form"), le, b) : "import" == e ? p(y("form"), se, b) : h(y("stat"), k, x(";"), b)
                }

                function k(e) {
                    return S(e, !1)
                }

                function C(e) {
                    return S(e, !0)
                }

                function S(e, t) {
                    if (Ne.state.fatArrowAt == Ne.stream.start) {
                        var r = t ? z : W;
                        if ("(" == e) return p(m, y(")"), F(G, ")"), b, x("=>"), r, v);
                        if ("variable" == e) return h(m, G, x("=>"), r, v)
                    }
                    var n = t ? A : T;
                    return Ae.hasOwnProperty(e) ? p(n) : "function" == e ? p(ee, n) : "keyword c" == e ? p(t ? M : L) : "(" == e ? p(y(")"), L, pe, x(")"), b, n) : "operator" == e || "spread" == e ? p(t ? C : k) : "[" == e ? p(y("]"), de, b, n) : "{" == e ? j(D, "}", null, n) : "quasi" == e ? h(N, n) : p()
                }

                function L(e) {
                    return e.match(/[;\}\)\],]/) ? h() : h(k)
                }

                function M(e) {
                    return e.match(/[;\}\)\],]/) ? h() : h(C)
                }

                function T(e, t) {
                    return "," == e ? p(k) : A(e, t, !1)
                }

                function A(e, t, r) {
                    var n = 0 == r ? T : A,
                        i = 0 == r ? k : C;
                    return "=>" == e ? p(m, r ? z : W, v) : "operator" == e ? /\+\+|--/.test(t) ? p(n) : "?" == t ? p(k, x(":"), i) : p(i) : "quasi" == e ? h(N, n) : ";" != e ? "(" == e ? j(C, ")", "call", n) : "." == e ? p(I, n) : "[" == e ? p(y("]"), L, x("]"), b, n) : void 0 : void 0
                }

                function N(e, t) {
                    return "quasi" != e ? h() : "${" != t.slice(t.length - 2) ? p(N) : p(k, O)
                }

                function O(e) {
                    return "}" == e ? (Ne.marked = "string-2", Ne.state.tokenize = s, p(N)) : void 0
                }

                function W(e) {
                    return c(Ne.stream, Ne.state), h("{" == e ? w : k)
                }

                function z(e) {
                    return c(Ne.stream, Ne.state), h("{" == e ? w : C)
                }

                function P(e) {
                    return ":" == e ? p(b, w) : h(T, x(";"), b)
                }

                function I(e) {
                    return "variable" == e ? (Ne.marked = "property", p()) : void 0
                }

                function D(e, t) {
                    return "variable" == e || "keyword" == Ne.style ? (Ne.marked = "property", p("get" == t || "set" == t ? H : E)) : "number" == e || "string" == e ? (Ne.marked = xe ? "property" : Ne.style + " property", p(E)) : "jsonld-keyword" == e ? p(E) : "[" == e ? p(k, x("]"), E) : void 0
                }

                function H(e) {
                    return "variable" != e ? h(E) : (Ne.marked = "property", p(ee))
                }

                function E(e) {
                    return ":" == e ? p(C) : "(" == e ? h(ee) : void 0
                }

                function F(e, t) {
                    function r(n) {
                        if ("," == n) {
                            var i = Ne.state.lexical;
                            return "call" == i.info && (i.pos = (i.pos || 0) + 1), p(e, r)
                        }
                        return n == t ? p() : p(x(t))
                    }
                    return function(n) {
                        return n == t ? p() : h(e, r)
                    }
                }

                function j(e, t, r) {
                    for (var n = 3; n < arguments.length; n++) Ne.cc.push(arguments[n]);
                    return p(y(t, r), F(e, t), b)
                }

                function R(e) {
                    return "}" == e ? p() : h(w, R)
                }

                function B(e) {
                    return ke && ":" == e ? p(V) : void 0
                }

                function V(e) {
                    return "variable" == e ? (Ne.marked = "variable-3", p()) : void 0
                }

                function q() {
                    return h(G, B, K, _)
                }

                function G(e, t) {
                    return "variable" == e ? (g(t), p()) : "[" == e ? j(G, "]") : "{" == e ? j(U, "}") : void 0
                }

                function U(e, t) {
                    return "variable" != e || Ne.stream.match(/^\s*:/, !1) ? ("variable" == e && (Ne.marked = "property"), p(x(":"), G, K)) : (g(t), p(K))
                }

                function K(e, t) {
                    return "=" == t ? p(C) : void 0
                }

                function _(e) {
                    return "," == e ? p(q) : void 0
                }

                function $(e, t) {
                    return "keyword b" == e && "else" == t ? p(y("form", "else"), w, b) : void 0
                }

                function X(e) {
                    return "(" == e ? p(y(")"), Y, x(")"), b) : void 0
                }

                function Y(e) {
                    return "var" == e ? p(q, x(";"), Q) : ";" == e ? p(Q) : "variable" == e ? p(Z) : h(k, x(";"), Q)
                }

                function Z(e, t) {
                    return "in" == t || "of" == t ? (Ne.marked = "keyword", p(k)) : p(T, Q)
                }

                function Q(e, t) {
                    return ";" == e ? p(J) : "in" == t || "of" == t ? (Ne.marked = "keyword", p(k)) : h(k, x(";"), J)
                }

                function J(e) {
                    ")" != e && p(k)
                }

                function ee(e, t) {
                    return "*" == t ? (Ne.marked = "keyword", p(ee)) : "variable" == e ? (g(t), p(ee)) : "(" == e ? p(m, y(")"), F(te, ")"), b, w, v) : void 0
                }

                function te(e) {
                    return "spread" == e ? p(te) : h(G, B)
                }

                function re(e, t) {
                    return "variable" == e ? (g(t), p(ne)) : void 0
                }

                function ne(e, t) {
                    return "extends" == t ? p(k, ne) : "{" == e ? p(y("}"), ie, b) : void 0
                }

                function ie(e, t) {
                    return "variable" == e || "keyword" == Ne.style ? "static" == t ? (Ne.marked = "keyword", p(ie)) : (Ne.marked = "property", "get" == t || "set" == t ? p(oe, ee, ie) : p(ee, ie)) : "*" == t ? (Ne.marked = "keyword", p(ie)) : ";" == e ? p(ie) : "}" == e ? p() : void 0
                }

                function oe(e) {
                    return "variable" != e ? h() : (Ne.marked = "property", p())
                }

                function ae(e, t) {
                    return "string" == e ? p(w) : "variable" == e ? (g(t), p(fe)) : void 0
                }

                function le(e, t) {
                    return "*" == t ? (Ne.marked = "keyword", p(fe, x(";"))) : "default" == t ? (Ne.marked = "keyword", p(k, x(";"))) : h(w)
                }

                function se(e) {
                    return "string" == e ? p() : h(ce, fe)
                }

                function ce(e, t) {
                    return "{" == e ? j(ce, "}") : ("variable" == e && g(t), "*" == t && (Ne.marked = "keyword"), p(ue))
                }

                function ue(e, t) {
                    return "as" == t ? (Ne.marked = "keyword", p(ce)) : void 0
                }

                function fe(e, t) {
                    return "from" == t ? (Ne.marked = "keyword", p(k)) : void 0
                }

                function de(e) {
                    return "]" == e ? p() : h(C, he)
                }

                function he(e) {
                    return "for" == e ? h(pe, x("]")) : "," == e ? p(F(M, "]")) : h(F(C, "]"))
                }

                function pe(e) {
                    return "for" == e ? p(X, pe) : "if" == e ? p(k, pe) : void 0
                }

                function ge(e, t) {
                    return "operator" == e.lastType || "," == e.lastType || Le.test(t.charAt(0)) || /[,.]/.test(t.charAt(0))
                }
                var me, ve, ye = t.indentUnit,
                    be = r.statementIndent,
                    xe = r.jsonld,
                    we = r.json || xe,
                    ke = r.typescript,
                    Ce = r.wordCharacters || /[\w$\xa1-\uffff]/,
                    Se = function() {
                        function e(e) {
                            return {
                                type: e,
                                style: "keyword"
                            }
                        }
                        var t = e("keyword a"),
                            r = e("keyword b"),
                            n = e("keyword c"),
                            i = e("operator"),
                            o = {
                                type: "atom",
                                style: "atom"
                            },
                            a = {
                                "if": e("if"),
                                "while": t,
                                "with": t,
                                "else": r,
                                "do": r,
                                "try": r,
                                "finally": r,
                                "return": n,
                                "break": n,
                                "continue": n,
                                "new": n,
                                "delete": n,
                                "throw": n,
                                "debugger": n,
                                "var": e("var"),
                                "const": e("var"),
                                let: e("var"),
                                "function": e("function"),
                                "catch": e("catch"),
                                "for": e("for"),
                                "switch": e("switch"),
                                "case": e("case"),
                                "default": e("default"),
                                "in": i,
                                "typeof": i,
                                "instanceof": i,
                                "true": o,
                                "false": o,
                                "null": o,
                                undefined: o,
                                NaN: o,
                                Infinity: o,
                                "this": e("this"),
                                module: e("module"),
                                "class": e("class"),
                                "super": e("atom"),
                                "yield": n,
                                "export": e("export"),
                                "import": e("import"),
                                "extends": n
                            };
                        if (ke) {
                            var l = {
                                    type: "variable",
                                    style: "variable-3"
                                },
                                s = {
                                    "interface": e("interface"),
                                    "extends": e("extends"),
                                    constructor: e("constructor"),
                                    "public": e("public"),
                                    "private": e("private"),
                                    "protected": e("protected"),
                                    "static": e("static"),
                                    string: l,
                                    number: l,
                                    bool: l,
                                    any: l
                                };
                            for (var c in s) a[c] = s[c]
                        }
                        return a
                    }(),
                    Le = /[+\-*&%=<>!?|~^]/,
                    Me = /^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,
                    Te = "([{}])",
                    Ae = {
                        atom: !0,
                        number: !0,
                        variable: !0,
                        string: !0,
                        regexp: !0,
                        "this": !0,
                        "jsonld-keyword": !0
                    },
                    Ne = {
                        state: null,
                        column: null,
                        marked: null,
                        cc: null
                    },
                    Oe = {
                        name: "this",
                        next: {
                            name: "arguments"
                        }
                    };
                return b.lex = !0, {
                    startState: function(e) {
                        var t = {
                            tokenize: o,
                            lastType: "sof",
                            cc: [],
                            lexical: new u((e || 0) - ye, 0, "block", !1),
                            localVars: r.localVars,
                            context: r.localVars && {
                                vars: r.localVars
                            },
                            indented: 0
                        };
                        return r.globalVars && "object" == typeof r.globalVars && (t.globalVars = r.globalVars), t
                    },
                    token: function(e, t) {
                        if (e.sol() && (t.lexical.hasOwnProperty("align") || (t.lexical.align = !1), t.indented = e.indentation(), c(e, t)), t.tokenize != l && e.eatSpace()) return null;
                        var r = t.tokenize(e, t);
                        return "comment" == me ? r : (t.lastType = "operator" != me || "++" != ve && "--" != ve ? me : "incdec", d(t, r, me, ve, e))
                    },
                    indent: function(t, n) {
                        if (t.tokenize == l) return e.Pass;
                        if (t.tokenize != o) return 0;
                        var i = n && n.charAt(0),
                            a = t.lexical;
                        if (!/^\s*else\b/.test(n))
                            for (var s = t.cc.length - 1; s >= 0; --s) {
                                var c = t.cc[s];
                                if (c == b) a = a.prev;
                                else if (c != $) break
                            }
                        "stat" == a.type && "}" == i && (a = a.prev), be && ")" == a.type && "stat" == a.prev.type && (a = a.prev);
                        var u = a.type,
                            f = i == u;
                        return "vardef" == u ? a.indented + ("operator" == t.lastType || "," == t.lastType ? a.info + 1 : 0) : "form" == u && "{" == i ? a.indented : "form" == u ? a.indented + ye : "stat" == u ? a.indented + (ge(t, n) ? be || ye : 0) : "switch" != a.info || f || 0 == r.doubleIndentSwitch ? a.align ? a.column + (f ? 0 : 1) : a.indented + (f ? 0 : ye) : a.indented + (/^(?:case|default)\b/.test(n) ? ye : 2 * ye)
                    },
                    electricInput: /^\s*(?:case .*?:|default:|\{|\})$/,
                    blockCommentStart: we ? null : "/*",
                    blockCommentEnd: we ? null : "*/",
                    lineComment: we ? null : "//",
                    fold: "brace",
                    closeBrackets: "()[]{}''\"\"``",
                    helperType: we ? "json" : "javascript",
                    jsonldMode: xe,
                    jsonMode: we
                }
            }), e.registerHelper("wordChars", "javascript", /[\w$]/), e.defineMIME("text/javascript", "javascript"), e.defineMIME("text/ecmascript", "javascript"), e.defineMIME("application/javascript", "javascript"), e.defineMIME("application/x-javascript", "javascript"), e.defineMIME("application/ecmascript", "javascript"), e.defineMIME("application/json", {
                name: "javascript",
                json: !0
            }), e.defineMIME("application/x-json", {
                name: "javascript",
                json: !0
            }), e.defineMIME("application/ld+json", {
                name: "javascript",
                jsonld: !0
            }), e.defineMIME("text/typescript", {
                name: "javascript",
                typescript: !0
            }), e.defineMIME("application/typescript", {
                name: "javascript",
                typescript: !0
            })
        }),
        function(t) {
            "object" == typeof exports && "object" == typeof module ? t(e("../../lib/codemirror"), e("../xml/xml"), e("../javascript/javascript"), e("../css/css")) : "function" == typeof define && define.amd ? define(["../../lib/codemirror", "../xml/xml", "../javascript/javascript", "../css/css"], t) : t(CodeMirror)
        }(function(e) {
            "use strict";
            e.defineMode("htmlmixed", function(t, r) {
                function n(e, t) {
                    var r = t.htmlState.tagName;
                    r && (r = r.toLowerCase());
                    var n = l.token(e, t.htmlState);
                    if ("script" == r && /\btag\b/.test(n) && ">" == e.current()) {
                        var i = e.string.slice(Math.max(0, e.pos - 100), e.pos).match(/\btype\s*=\s*("[^"]+"|'[^']+'|\S+)[^<]*$/i);
                        i = i ? i[1] : "", i && /[\"\']/.test(i.charAt(0)) && (i = i.slice(1, i.length - 1));
                        for (var u = 0; u < c.length; ++u) {
                            var f = c[u];
                            if ("string" == typeof f.matches ? i == f.matches : f.matches.test(i)) {
                                f.mode && (t.token = o, t.localMode = f.mode, t.localState = f.mode.startState && f.mode.startState(l.indent(t.htmlState, "")));
                                break
                            }
                        }
                    } else "style" == r && /\btag\b/.test(n) && ">" == e.current() && (t.token = a, t.localMode = s, t.localState = s.startState(l.indent(t.htmlState, "")));
                    return n
                }

                function i(e, t, r) {
                    var n, i = e.current(),
                        o = i.search(t);
                    return o > -1 ? e.backUp(i.length - o) : (n = i.match(/<\/?$/)) && (e.backUp(i.length), e.match(t, !1) || e.match(i)), r
                }

                function o(e, t) {
                    return e.match(/^<\/\s*script\s*>/i, !1) ? (t.token = n, t.localState = t.localMode = null, null) : i(e, /<\/\s*script\s*>/, t.localMode.token(e, t.localState))
                }

                function a(e, t) {
                    return e.match(/^<\/\s*style\s*>/i, !1) ? (t.token = n, t.localState = t.localMode = null, null) : i(e, /<\/\s*style\s*>/, s.token(e, t.localState))
                }
                var l = e.getMode(t, {
                        name: "xml",
                        htmlMode: !0,
                        multilineTagIndentFactor: r.multilineTagIndentFactor,
                        multilineTagIndentPastTag: r.multilineTagIndentPastTag
                    }),
                    s = e.getMode(t, "css"),
                    c = [],
                    u = r && r.scriptTypes;
                if (c.push({
                        matches: /^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^$/i,
                        mode: e.getMode(t, "javascript")
                    }), u)
                    for (var f = 0; f < u.length; ++f) {
                        var d = u[f];
                        c.push({
                            matches: d.matches,
                            mode: d.mode && e.getMode(t, d.mode)
                        })
                    }
                return c.push({
                    matches: /./,
                    mode: e.getMode(t, "text/plain")
                }), {
                    startState: function() {
                        var e = l.startState();
                        return {
                            token: n,
                            localMode: null,
                            localState: null,
                            htmlState: e
                        }
                    },
                    copyState: function(t) {
                        if (t.localState) var r = e.copyState(t.localMode, t.localState);
                        return {
                            token: t.token,
                            localMode: t.localMode,
                            localState: r,
                            htmlState: e.copyState(l, t.htmlState)
                        }
                    },
                    token: function(e, t) {
                        return t.token(e, t)
                    },
                    indent: function(t, r) {
                        return !t.localMode || /^\s*<\//.test(r) ? l.indent(t.htmlState, r) : t.localMode.indent ? t.localMode.indent(t.localState, r) : e.Pass
                    },
                    innerMode: function(e) {
                        return {
                            state: e.localState || e.htmlState,
                            mode: e.localMode || l
                        }
                    }
                }
            }, "xml", "javascript", "css"), e.defineMIME("text/html", "htmlmixed")
        }),
        function(t) {
            "object" == typeof exports && "object" == typeof module ? t(e("../../lib/codemirror")) : "function" == typeof define && define.amd ? define(["../../lib/codemirror"], t) : t(CodeMirror)
        }(function(e) {
            "use strict";
            e.defineMode("xml", function(t, r) {
                function n(e, t) {
                    function r(r) {
                        return t.tokenize = r, r(e, t)
                    }
                    var n = e.next();
                    if ("<" == n) return e.eat("!") ? e.eat("[") ? e.match("CDATA[") ? r(a("atom", "]]>")) : null : e.match("--") ? r(a("comment", "-->")) : e.match("DOCTYPE", !0, !0) ? (e.eatWhile(/[\w\._\-]/), r(l(1))) : null : e.eat("?") ? (e.eatWhile(/[\w\._\-]/), t.tokenize = a("meta", "?>"), "meta") : (C = e.eat("/") ? "closeTag" : "openTag", t.tokenize = i, "tag bracket");
                    if ("&" == n) {
                        var o;
                        return o = e.eat("#") ? e.eat("x") ? e.eatWhile(/[a-fA-F\d]/) && e.eat(";") : e.eatWhile(/[\d]/) && e.eat(";") : e.eatWhile(/[\w\.\-:]/) && e.eat(";"), o ? "atom" : "error"
                    }
                    return e.eatWhile(/[^&<]/), null
                }

                function i(e, t) {
                    var r = e.next();
                    if (">" == r || "/" == r && e.eat(">")) return t.tokenize = n, C = ">" == r ? "endTag" : "selfcloseTag", "tag bracket";
                    if ("=" == r) return C = "equals", null;
                    if ("<" == r) {
                        t.tokenize = n, t.state = f, t.tagName = t.tagStart = null;
                        var i = t.tokenize(e, t);
                        return i ? i + " tag error" : "tag error"
                    }
                    return /[\'\"]/.test(r) ? (t.tokenize = o(r), t.stringStartCol = e.column(), t.tokenize(e, t)) : (e.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/), "word")
                }

                function o(e) {
                    var t = function(t, r) {
                        for (; !t.eol();)
                            if (t.next() == e) {
                                r.tokenize = i;
                                break
                            }
                        return "string"
                    };
                    return t.isInAttribute = !0, t
                }

                function a(e, t) {
                    return function(r, i) {
                        for (; !r.eol();) {
                            if (r.match(t)) {
                                i.tokenize = n;
                                break
                            }
                            r.next()
                        }
                        return e
                    }
                }

                function l(e) {
                    return function(t, r) {
                        for (var i; null != (i = t.next());) {
                            if ("<" == i) return r.tokenize = l(e + 1), r.tokenize(t, r);
                            if (">" == i) {
                                if (1 == e) {
                                    r.tokenize = n;
                                    break
                                }
                                return r.tokenize = l(e - 1), r.tokenize(t, r)
                            }
                        }
                        return "meta"
                    }
                }

                function s(e, t, r) {
                    this.prev = e.context, this.tagName = t, this.indent = e.indented, this.startOfLine = r, (L.doNotIndent.hasOwnProperty(t) || e.context && e.context.noIndent) && (this.noIndent = !0)
                }

                function c(e) {
                    e.context && (e.context = e.context.prev)
                }

                function u(e, t) {
                    for (var r;;) {
                        if (!e.context) return;
                        if (r = e.context.tagName, !L.contextGrabbers.hasOwnProperty(r) || !L.contextGrabbers[r].hasOwnProperty(t)) return;
                        c(e)
                    }
                }

                function f(e, t, r) {
                    return "openTag" == e ? (r.tagStart = t.column(), d) : "closeTag" == e ? h : f
                }

                function d(e, t, r) {
                    return "word" == e ? (r.tagName = t.current(), S = "tag", m) : (S = "error", d)
                }

                function h(e, t, r) {
                    if ("word" == e) {
                        var n = t.current();
                        return r.context && r.context.tagName != n && L.implicitlyClosed.hasOwnProperty(r.context.tagName) && c(r), r.context && r.context.tagName == n ? (S = "tag", p) : (S = "tag error", g)
                    }
                    return S = "error", g
                }

                function p(e, t, r) {
                    return "endTag" != e ? (S = "error", p) : (c(r), f)
                }

                function g(e, t, r) {
                    return S = "error", p(e, t, r)
                }

                function m(e, t, r) {
                    if ("word" == e) return S = "attribute", v;
                    if ("endTag" == e || "selfcloseTag" == e) {
                        var n = r.tagName,
                            i = r.tagStart;
                        return r.tagName = r.tagStart = null, "selfcloseTag" == e || L.autoSelfClosers.hasOwnProperty(n) ? u(r, n) : (u(r, n), r.context = new s(r, n, i == r.indented)), f
                    }
                    return S = "error", m
                }

                function v(e, t, r) {
                    return "equals" == e ? y : (L.allowMissing || (S = "error"), m(e, t, r))
                }

                function y(e, t, r) {
                    return "string" == e ? b : "word" == e && L.allowUnquoted ? (S = "string", m) : (S = "error", m(e, t, r))
                }

                function b(e, t, r) {
                    return "string" == e ? b : m(e, t, r)
                }
                var x = t.indentUnit,
                    w = r.multilineTagIndentFactor || 1,
                    k = r.multilineTagIndentPastTag;
                null == k && (k = !0);
                var C, S, L = r.htmlMode ? {
                        autoSelfClosers: {
                            area: !0,
                            base: !0,
                            br: !0,
                            col: !0,
                            command: !0,
                            embed: !0,
                            frame: !0,
                            hr: !0,
                            img: !0,
                            input: !0,
                            keygen: !0,
                            link: !0,
                            meta: !0,
                            param: !0,
                            source: !0,
                            track: !0,
                            wbr: !0,
                            menuitem: !0
                        },
                        implicitlyClosed: {
                            dd: !0,
                            li: !0,
                            optgroup: !0,
                            option: !0,
                            p: !0,
                            rp: !0,
                            rt: !0,
                            tbody: !0,
                            td: !0,
                            tfoot: !0,
                            th: !0,
                            tr: !0
                        },
                        contextGrabbers: {
                            dd: {
                                dd: !0,
                                dt: !0
                            },
                            dt: {
                                dd: !0,
                                dt: !0
                            },
                            li: {
                                li: !0
                            },
                            option: {
                                option: !0,
                                optgroup: !0
                            },
                            optgroup: {
                                optgroup: !0
                            },
                            p: {
                                address: !0,
                                article: !0,
                                aside: !0,
                                blockquote: !0,
                                dir: !0,
                                div: !0,
                                dl: !0,
                                fieldset: !0,
                                footer: !0,
                                form: !0,
                                h1: !0,
                                h2: !0,
                                h3: !0,
                                h4: !0,
                                h5: !0,
                                h6: !0,
                                header: !0,
                                hgroup: !0,
                                hr: !0,
                                menu: !0,
                                nav: !0,
                                ol: !0,
                                p: !0,
                                pre: !0,
                                section: !0,
                                table: !0,
                                ul: !0
                            },
                            rp: {
                                rp: !0,
                                rt: !0
                            },
                            rt: {
                                rp: !0,
                                rt: !0
                            },
                            tbody: {
                                tbody: !0,
                                tfoot: !0
                            },
                            td: {
                                td: !0,
                                th: !0
                            },
                            tfoot: {
                                tbody: !0
                            },
                            th: {
                                td: !0,
                                th: !0
                            },
                            thead: {
                                tbody: !0,
                                tfoot: !0
                            },
                            tr: {
                                tr: !0
                            }
                        },
                        doNotIndent: {
                            pre: !0
                        },
                        allowUnquoted: !0,
                        allowMissing: !0,
                        caseFold: !0
                    } : {
                        autoSelfClosers: {},
                        implicitlyClosed: {},
                        contextGrabbers: {},
                        doNotIndent: {},
                        allowUnquoted: !1,
                        allowMissing: !1,
                        caseFold: !1
                    },
                    M = r.alignCDATA;
                return {
                    startState: function() {
                        return {
                            tokenize: n,
                            state: f,
                            indented: 0,
                            tagName: null,
                            tagStart: null,
                            context: null
                        }
                    },
                    token: function(e, t) {
                        if (!t.tagName && e.sol() && (t.indented = e.indentation()), e.eatSpace()) return null;
                        C = null;
                        var r = t.tokenize(e, t);
                        return (r || C) && "comment" != r && (S = null, t.state = t.state(C || r, e, t), S && (r = "error" == S ? r + " error" : S)), r
                    },
                    indent: function(t, r, o) {
                        var a = t.context;
                        if (t.tokenize.isInAttribute) return t.tagStart == t.indented ? t.stringStartCol + 1 : t.indented + x;
                        if (a && a.noIndent) return e.Pass;
                        if (t.tokenize != i && t.tokenize != n) return o ? o.match(/^(\s*)/)[0].length : 0;
                        if (t.tagName) return k ? t.tagStart + t.tagName.length + 2 : t.tagStart + x * w;
                        if (M && /<!\[CDATA\[/.test(r)) return 0;
                        var l = r && /^<(\/)?([\w_:\.-]*)/.exec(r);
                        if (l && l[1])
                            for (; a;) {
                                if (a.tagName == l[2]) {
                                    a = a.prev;
                                    break
                                }
                                if (!L.implicitlyClosed.hasOwnProperty(a.tagName)) break;
                                a = a.prev
                            } else if (l)
                                for (; a;) {
                                    var s = L.contextGrabbers[a.tagName];
                                    if (!s || !s.hasOwnProperty(l[2])) break;
                                    a = a.prev
                                }
                        for (; a && !a.startOfLine;) a = a.prev;
                        return a ? a.indent + x : 0
                    },
                    electricInput: /<\/[\s\w:]+>$/,
                    blockCommentStart: "<!--",
                    blockCommentEnd: "-->",
                    configuration: r.htmlMode ? "html" : "xml",
                    helperType: r.htmlMode ? "html" : "xml"
                }
            }), e.defineMIME("text/xml", "xml"), e.defineMIME("application/xml", "xml"), e.mimeModes.hasOwnProperty("text/html") || e.defineMIME("text/html", {
                name: "xml",
                htmlMode: !0
            })
        })
    }(), SM.currentModule = null
}, "", {
    requires: []
});
YUI.add('immutable', function(Y) {
    SM.currentModule = 'immutable';
    var exports = {};
    var module = SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    (function() {
        /**
         *  Copyright (c) 2014-2015, Facebook, Inc.
         *  All rights reserved.
         *
         *  This source code is licensed under the BSD-style license found in the
         *  LICENSE file in the root directory of this source tree. An additional grant
         *  of patent rights can be found in the PATENTS file in the same directory.
         */
        ! function(t, e) {
            "object" == typeof exports && "undefined" != typeof module ? module.exports = e() : "function" == typeof define && define.amd ? define(e) : t.Immutable = e()
        }(this, function() {
            "use strict";

            function t(t, e) {
                e && (t.prototype = Object.create(e.prototype)), t.prototype.constructor = t
            }

            function e(t) {
                return t.value = !1, t
            }

            function r(t) {
                t && (t.value = !0)
            }

            function n() {}

            function i(t, e) {
                e = e || 0;
                for (var r = Math.max(0, t.length - e), n = Array(r), i = 0; r > i; i++) n[i] = t[i + e];
                return n
            }

            function o(t) {
                return void 0 === t.size && (t.size = t.__iterate(s)), t.size
            }

            function u(t, e) {
                return e >= 0 ? +e : o(t) + +e
            }

            function s() {
                return !0
            }

            function a(t, e, r) {
                return (0 === t || void 0 !== r && -r >= t) && (void 0 === e || void 0 !== r && e >= r)
            }

            function h(t, e) {
                return c(t, e, 0)
            }

            function f(t, e) {
                return c(t, e, e)
            }

            function c(t, e, r) {
                return void 0 === t ? r : 0 > t ? Math.max(0, e + t) : void 0 === e ? t : Math.min(e, t)
            }

            function _(t) {
                return y(t) ? t : O(t)
            }

            function p(t) {
                return d(t) ? t : x(t)
            }

            function v(t) {
                return m(t) ? t : k(t)
            }

            function l(t) {
                return y(t) && !g(t) ? t : A(t)
            }

            function y(t) {
                return !(!t || !t[vr])
            }

            function d(t) {
                return !(!t || !t[lr])
            }

            function m(t) {
                return !(!t || !t[yr])
            }

            function g(t) {
                return d(t) || m(t)
            }

            function w(t) {
                return !(!t || !t[dr])
            }

            function S(t) {
                this.next = t
            }

            function z(t, e, r, n) {
                var i = 0 === t ? e : 1 === t ? r : [e, r];
                return n ? n.value = i : n = {
                    value: i,
                    done: !1
                }, n
            }

            function I() {
                return {
                    value: void 0,
                    done: !0
                }
            }

            function b(t) {
                return !!M(t)
            }

            function q(t) {
                return t && "function" == typeof t.next
            }

            function D(t) {
                var e = M(t);
                return e && e.call(t)
            }

            function M(t) {
                var e = t && (Sr && t[Sr] || t[zr]);
                return "function" == typeof e ? e : void 0
            }

            function E(t) {
                return t && "number" == typeof t.length
            }

            function O(t) {
                return null === t || void 0 === t ? T() : y(t) ? t.toSeq() : C(t)
            }

            function x(t) {
                return null === t || void 0 === t ? T().toKeyedSeq() : y(t) ? d(t) ? t.toSeq() : t.fromEntrySeq() : W(t)
            }

            function k(t) {
                return null === t || void 0 === t ? T() : y(t) ? d(t) ? t.entrySeq() : t.toIndexedSeq() : B(t)
            }

            function A(t) {
                return (null === t || void 0 === t ? T() : y(t) ? d(t) ? t.entrySeq() : t : B(t)).toSetSeq()
            }

            function j(t) {
                this._array = t, this.size = t.length
            }

            function R(t) {
                var e = Object.keys(t);
                this._object = t, this._keys = e, this.size = e.length
            }

            function U(t) {
                this._iterable = t, this.size = t.length || t.size;

            }

            function K(t) {
                this._iterator = t, this._iteratorCache = []
            }

            function L(t) {
                return !(!t || !t[br])
            }

            function T() {
                return qr || (qr = new j([]))
            }

            function W(t) {
                var e = Array.isArray(t) ? new j(t).fromEntrySeq() : q(t) ? new K(t).fromEntrySeq() : b(t) ? new U(t).fromEntrySeq() : "object" == typeof t ? new R(t) : void 0;
                if (!e) throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: " + t);
                return e
            }

            function B(t) {
                var e = J(t);
                if (!e) throw new TypeError("Expected Array or iterable object of values: " + t);
                return e
            }

            function C(t) {
                var e = J(t) || "object" == typeof t && new R(t);
                if (!e) throw new TypeError("Expected Array or iterable object of values, or keyed object: " + t);
                return e
            }

            function J(t) {
                return E(t) ? new j(t) : q(t) ? new K(t) : b(t) ? new U(t) : void 0
            }

            function P(t, e, r, n) {
                var i = t._cache;
                if (i) {
                    for (var o = i.length - 1, u = 0; o >= u; u++) {
                        var s = i[r ? o - u : u];
                        if (e(s[1], n ? s[0] : u, t) === !1) return u + 1
                    }
                    return u
                }
                return t.__iterateUncached(e, r)
            }

            function H(t, e, r, n) {
                var i = t._cache;
                if (i) {
                    var o = i.length - 1,
                        u = 0;
                    return new S(function() {
                        var t = i[r ? o - u : u];
                        return u++ > o ? I() : z(e, n ? t[0] : u - 1, t[1])
                    })
                }
                return t.__iteratorUncached(e, r)
            }

            function N() {
                throw TypeError("Abstract")
            }

            function V() {}

            function Y() {}

            function Q() {}

            function X(t, e) {
                if (t === e || t !== t && e !== e) return !0;
                if (!t || !e) return !1;
                if ("function" == typeof t.valueOf && "function" == typeof e.valueOf) {
                    if (t = t.valueOf(), e = e.valueOf(), t === e || t !== t && e !== e) return !0;
                    if (!t || !e) return !1
                }
                return "function" == typeof t.equals && "function" == typeof e.equals && t.equals(e) ? !0 : !1
            }

            function F(t, e) {
                return e ? G(e, t, "", {
                    "": t
                }) : Z(t)
            }

            function G(t, e, r, n) {
                return Array.isArray(e) ? t.call(n, r, k(e).map(function(r, n) {
                    return G(t, r, n, e)
                })) : $(e) ? t.call(n, r, x(e).map(function(r, n) {
                    return G(t, r, n, e)
                })) : e
            }

            function Z(t) {
                return Array.isArray(t) ? k(t).map(Z).toList() : $(t) ? x(t).map(Z).toMap() : t
            }

            function $(t) {
                return t && (t.constructor === Object || void 0 === t.constructor)
            }

            function tt(t) {
                return t >>> 1 & 1073741824 | 3221225471 & t
            }

            function et(t) {
                if (t === !1 || null === t || void 0 === t) return 0;
                if ("function" == typeof t.valueOf && (t = t.valueOf(), t === !1 || null === t || void 0 === t)) return 0;
                if (t === !0) return 1;
                var e = typeof t;

                if ("number" === e) {
                    var r = 0 | t;
                    for (r !== t && (r ^= 4294967295 * t); t > 4294967295;) t /= 4294967295, r ^= t;
                    return tt(r)
                }
                return "string" === e ? t.length > jr ? rt(t) : nt(t) : "function" == typeof t.hashCode ? t.hashCode() : it(t)
            }

            function rt(t) {
                var e = Kr[t];
                return void 0 === e && (e = nt(t), Ur === Rr && (Ur = 0, Kr = {}), Ur++, Kr[t] = e), e
            }

            function nt(t) {
                for (var e = 0, r = 0; t.length > r; r++) e = 31 * e + t.charCodeAt(r) | 0;
                return tt(e)
            }

            function it(t) {
                var e;
                if (xr && (e = Dr.get(t), void 0 !== e)) return e;
                if (e = t[Ar], void 0 !== e) return e;
                if (!Or) {
                    if (e = t.propertyIsEnumerable && t.propertyIsEnumerable[Ar], void 0 !== e) return e;
                    if (e = ot(t), void 0 !== e) return e
                }
                if (e = ++kr, 1073741824 & kr && (kr = 0), xr) Dr.set(t, e);
                else {
                    if (void 0 !== Er && Er(t) === !1) throw Error("Non-extensible objects are not allowed as keys.");
                    if (Or) Object.defineProperty(t, Ar, {
                        enumerable: !1,
                        configurable: !1,
                        writable: !1,
                        value: e
                    });
                    else if (void 0 !== t.propertyIsEnumerable && t.propertyIsEnumerable === t.constructor.prototype.propertyIsEnumerable) t.propertyIsEnumerable = function() {
                        return this.constructor.prototype.propertyIsEnumerable.apply(this, arguments)
                    }, t.propertyIsEnumerable[Ar] = e;
                    else {
                        if (void 0 === t.nodeType) throw Error("Unable to set a non-enumerable property on object.");
                        t[Ar] = e
                    }
                }
                return e
            }

            function ot(t) {
                if (t && t.nodeType > 0) switch (t.nodeType) {
                    case 1:
                        return t.uniqueID;
                    case 9:
                        return t.documentElement && t.documentElement.uniqueID
                }
            }

            function ut(t, e) {
                if (!t) throw Error(e)
            }

            function st(t) {
                ut(t !== 1 / 0, "Cannot perform this action with an infinite size.")
            }

            function at(t, e) {
                this._iter = t, this._useKeys = e, this.size = t.size
            }

            function ht(t) {
                this._iter = t, this.size = t.size
            }

            function ft(t) {
                this._iter = t, this.size = t.size
            }

            function ct(t) {
                this._iter = t, this.size = t.size
            }

            function _t(t) {
                var e = jt(t);
                return e._iter = t, e.size = t.size, e.flip = function() {
                    return t
                }, e.reverse = function() {
                    var e = t.reverse.apply(this);
                    return e.flip = function() {
                        return t.reverse()
                    }, e
                }, e.has = function(e) {
                    return t.includes(e)
                }, e.includes = function(e) {
                    return t.has(e)
                }, e.cacheResult = Rt, e.__iterateUncached = function(e, r) {
                    var n = this;
                    return t.__iterate(function(t, r) {
                        return e(r, t, n) !== !1
                    }, r)
                }, e.__iteratorUncached = function(e, r) {
                    if (e === wr) {
                        var n = t.__iterator(e, r);
                        return new S(function() {
                            var t = n.next();
                            if (!t.done) {
                                var e = t.value[0];
                                t.value[0] = t.value[1], t.value[1] = e
                            }
                            return t
                        })
                    }
                    return t.__iterator(e === gr ? mr : gr, r)
                }, e
            }

            function pt(t, e, r) {
                var n = jt(t);
                return n.size = t.size, n.has = function(e) {
                    return t.has(e)
                }, n.get = function(n, i) {
                    var o = t.get(n, cr);
                    return o === cr ? i : e.call(r, o, n, t)
                }, n.__iterateUncached = function(n, i) {
                    var o = this;
                    return t.__iterate(function(t, i, u) {
                        return n(e.call(r, t, i, u), i, o) !== !1
                    }, i)
                }, n.__iteratorUncached = function(n, i) {
                    var o = t.__iterator(wr, i);
                    return new S(function() {
                        var i = o.next();
                        if (i.done) return i;
                        var u = i.value,
                            s = u[0];
                        return z(n, s, e.call(r, u[1], s, t), i)
                    })
                }, n
            }

            function vt(t, e) {
                var r = jt(t);
                return r._iter = t, r.size = t.size, r.reverse = function() {
                    return t
                }, t.flip && (r.flip = function() {
                    var e = _t(t);
                    return e.reverse = function() {
                        return t.flip()
                    }, e
                }), r.get = function(r, n) {
                    return t.get(e ? r : -1 - r, n)
                }, r.has = function(r) {
                    return t.has(e ? r : -1 - r)
                }, r.includes = function(e) {
                    return t.includes(e)
                }, r.cacheResult = Rt, r.__iterate = function(e, r) {
                    var n = this;
                    return t.__iterate(function(t, r) {
                        return e(t, r, n)
                    }, !r)
                }, r.__iterator = function(e, r) {
                    return t.__iterator(e, !r)
                }, r
            }

            function lt(t, e, r, n) {
                var i = jt(t);
                return n && (i.has = function(n) {
                    var i = t.get(n, cr);
                    return i !== cr && !!e.call(r, i, n, t)
                }, i.get = function(n, i) {
                    var o = t.get(n, cr);
                    return o !== cr && e.call(r, o, n, t) ? o : i
                }), i.__iterateUncached = function(i, o) {
                    var u = this,
                        s = 0;
                    return t.__iterate(function(t, o, a) {
                        return e.call(r, t, o, a) ? (s++, i(t, n ? o : s - 1, u)) : void 0
                    }, o), s
                }, i.__iteratorUncached = function(i, o) {
                    var u = t.__iterator(wr, o),
                        s = 0;
                    return new S(function() {
                        for (;;) {
                            var o = u.next();
                            if (o.done) return o;
                            var a = o.value,
                                h = a[0],
                                f = a[1];
                            if (e.call(r, f, h, t)) return z(i, n ? h : s++, f, o)
                        }
                    })
                }, i
            }

            function yt(t, e, r) {
                var n = Lt().asMutable();
                return t.__iterate(function(i, o) {
                    n.update(e.call(r, i, o, t), 0, function(t) {
                        return t + 1
                    })
                }), n.asImmutable()
            }

            function dt(t, e, r) {
                var n = d(t),
                    i = (w(t) ? Ie() : Lt()).asMutable();
                t.__iterate(function(o, u) {
                    i.update(e.call(r, o, u, t), function(t) {
                        return t = t || [], t.push(n ? [u, o] : o), t
                    })
                });
                var o = At(t);
                return i.map(function(e) {
                    return Ot(t, o(e))
                })
            }

            function mt(t, e, r, n) {
                var i = t.size;
                if (a(e, r, i)) return t;

                var o = h(e, i),
                    s = f(r, i);
                if (o !== o || s !== s) return mt(t.toSeq().cacheResult(), e, r, n);
                var c, _ = s - o;
                _ === _ && (c = 0 > _ ? 0 : _);
                var p = jt(t);
                return p.size = c, !n && L(t) && c >= 0 && (p.get = function(e, r) {
                    return e = u(this, e), e >= 0 && c > e ? t.get(e + o, r) : r
                }), p.__iterateUncached = function(e, r) {
                    var i = this;
                    if (0 === c) return 0;
                    if (r) return this.cacheResult().__iterate(e, r);
                    var u = 0,
                        s = !0,
                        a = 0;
                    return t.__iterate(function(t, r) {
                        return s && (s = u++ < o) ? void 0 : (a++, e(t, n ? r : a - 1, i) !== !1 && a !== c)
                    }), a
                }, p.__iteratorUncached = function(e, r) {
                    if (0 !== c && r) return this.cacheResult().__iterator(e, r);
                    var i = 0 !== c && t.__iterator(e, r),
                        u = 0,
                        s = 0;
                    return new S(function() {
                        for (; u++ < o;) i.next();
                        if (++s > c) return I();
                        var t = i.next();
                        return n || e === gr ? t : e === mr ? z(e, s - 1, void 0, t) : z(e, s - 1, t.value[1], t)
                    })
                }, p
            }

            function gt(t, e, r) {
                var n = jt(t);
                return n.__iterateUncached = function(n, i) {
                    var o = this;
                    if (i) return this.cacheResult().__iterate(n, i);
                    var u = 0;
                    return t.__iterate(function(t, i, s) {
                        return e.call(r, t, i, s) && ++u && n(t, i, o)
                    }), u
                }, n.__iteratorUncached = function(n, i) {
                    var o = this;
                    if (i) return this.cacheResult().__iterator(n, i);
                    var u = t.__iterator(wr, i),
                        s = !0;
                    return new S(function() {
                        if (!s) return I();
                        var t = u.next();
                        if (t.done) return t;
                        var i = t.value,
                            a = i[0],
                            h = i[1];
                        return e.call(r, h, a, o) ? n === wr ? t : z(n, a, h, t) : (s = !1, I())
                    })
                }, n
            }

            function wt(t, e, r, n) {
                var i = jt(t);
                return i.__iterateUncached = function(i, o) {
                    var u = this;
                    if (o) return this.cacheResult().__iterate(i, o);
                    var s = !0,
                        a = 0;
                    return t.__iterate(function(t, o, h) {
                        return s && (s = e.call(r, t, o, h)) ? void 0 : (a++, i(t, n ? o : a - 1, u))
                    }), a
                }, i.__iteratorUncached = function(i, o) {
                    var u = this;
                    if (o) return this.cacheResult().__iterator(i, o);
                    var s = t.__iterator(wr, o),
                        a = !0,
                        h = 0;
                    return new S(function() {
                        var t, o, f;
                        do {
                            if (t = s.next(), t.done) return n || i === gr ? t : i === mr ? z(i, h++, void 0, t) : z(i, h++, t.value[1], t);
                            var c = t.value;
                            o = c[0], f = c[1], a && (a = e.call(r, f, o, u))
                        } while (a);
                        return i === wr ? t : z(i, o, f, t)
                    })
                }, i
            }

            function St(t, e) {
                var r = d(t),
                    n = [t].concat(e).map(function(t) {
                        return y(t) ? r && (t = p(t)) : t = r ? W(t) : B(Array.isArray(t) ? t : [t]), t
                    }).filter(function(t) {
                        return 0 !== t.size
                    });
                if (0 === n.length) return t;
                if (1 === n.length) {
                    var i = n[0];
                    if (i === t || r && d(i) || m(t) && m(i)) return i;

                }
                var o = new j(n);
                return r ? o = o.toKeyedSeq() : m(t) || (o = o.toSetSeq()), o = o.flatten(!0), o.size = n.reduce(function(t, e) {
                    if (void 0 !== t) {
                        var r = e.size;
                        if (void 0 !== r) return t + r
                    }
                }, 0), o
            }

            function zt(t, e, r) {
                var n = jt(t);
                return n.__iterateUncached = function(n, i) {
                    function o(t, a) {
                        var h = this;
                        t.__iterate(function(t, i) {
                            return (!e || e > a) && y(t) ? o(t, a + 1) : n(t, r ? i : u++, h) === !1 && (s = !0), !s
                        }, i)
                    }
                    var u = 0,
                        s = !1;
                    return o(t, 0), u
                }, n.__iteratorUncached = function(n, i) {
                    var o = t.__iterator(n, i),
                        u = [],
                        s = 0;
                    return new S(function() {
                        for (; o;) {
                            var t = o.next();
                            if (t.done === !1) {
                                var a = t.value;
                                if (n === wr && (a = a[1]), e && !(e > u.length) || !y(a)) return r ? t : z(n, s++, a, t);
                                u.push(o), o = a.__iterator(n, i)
                            } else o = u.pop()
                        }
                        return I()
                    })
                }, n
            }

            function It(t, e, r) {
                var n = At(t);
                return t.toSeq().map(function(i, o) {
                    return n(e.call(r, i, o, t))
                }).flatten(!0)
            }

            function bt(t, e) {
                var r = jt(t);
                return r.size = t.size && 2 * t.size - 1, r.__iterateUncached = function(r, n) {
                    var i = this,
                        o = 0;
                    return t.__iterate(function(t) {
                        return (!o || r(e, o++, i) !== !1) && r(t, o++, i) !== !1
                    }, n), o
                }, r.__iteratorUncached = function(r, n) {
                    var i, o = t.__iterator(gr, n),
                        u = 0;
                    return new S(function() {
                        return (!i || u % 2) && (i = o.next(), i.done) ? i : u % 2 ? z(r, u++, e) : z(r, u++, i.value, i)
                    })
                }, r
            }

            function qt(t, e, r) {
                e || (e = Ut);
                var n = d(t),
                    i = 0,
                    o = t.toSeq().map(function(e, n) {
                        return [n, e, i++, r ? r(e, n, t) : e]
                    }).toArray();
                return o.sort(function(t, r) {
                    return e(t[3], r[3]) || t[2] - r[2]
                }).forEach(n ? function(t, e) {
                    o[e].length = 2
                } : function(t, e) {
                    o[e] = t[1]
                }), n ? x(o) : m(t) ? k(o) : A(o)
            }

            function Dt(t, e, r) {
                if (e || (e = Ut), r) {
                    var n = t.toSeq().map(function(e, n) {
                        return [e, r(e, n, t)]
                    }).reduce(function(t, r) {
                        return Mt(e, t[1], r[1]) ? r : t
                    });
                    return n && n[0]
                }
                return t.reduce(function(t, r) {
                    return Mt(e, t, r) ? r : t
                })
            }

            function Mt(t, e, r) {
                var n = t(r, e);
                return 0 === n && r !== e && (void 0 === r || null === r || r !== r) || n > 0
            }

            function Et(t, e, r) {
                var n = jt(t);
                return n.size = new j(r).map(function(t) {
                    return t.size
                }).min(), n.__iterate = function(t, e) {
                    for (var r, n = this.__iterator(gr, e), i = 0; !(r = n.next()).done && t(r.value, i++, this) !== !1;);
                    return i
                }, n.__iteratorUncached = function(t, n) {
                    var i = r.map(function(t) {
                            return t = _(t), D(n ? t.reverse() : t)
                        }),
                        o = 0,
                        u = !1;
                    return new S(function() {
                        var r;
                        return u || (r = i.map(function(t) {
                            return t.next()
                        }), u = r.some(function(t) {
                            return t.done
                        })), u ? I() : z(t, o++, e.apply(null, r.map(function(t) {
                            return t.value
                        })))
                    })
                }, n
            }

            function Ot(t, e) {
                return L(t) ? e : t.constructor(e)
            }

            function xt(t) {
                if (t !== Object(t)) throw new TypeError("Expected [K, V] tuple: " + t)
            }

            function kt(t) {
                return st(t.size), o(t)
            }

            function At(t) {
                return d(t) ? p : m(t) ? v : l
            }

            function jt(t) {
                return Object.create((d(t) ? x : m(t) ? k : A).prototype)
            }

            function Rt() {
                return this._iter.cacheResult ? (this._iter.cacheResult(), this.size = this._iter.size, this) : O.prototype.cacheResult.call(this)
            }

            function Ut(t, e) {
                return t > e ? 1 : e > t ? -1 : 0
            }

            function Kt(t) {
                var e = D(t);
                if (!e) {
                    if (!E(t)) throw new TypeError("Expected iterable or array-like: " + t);
                    e = D(_(t))
                }
                return e
            }

            function Lt(t) {
                return null === t || void 0 === t ? Qt() : Tt(t) ? t : Qt().withMutations(function(e) {
                    var r = p(t);
                    st(r.size), r.forEach(function(t, r) {
                        return e.set(r, t)
                    })
                })
            }

            function Tt(t) {
                return !(!t || !t[Lr])
            }

            function Wt(t, e) {
                this.ownerID = t, this.entries = e
            }

            function Bt(t, e, r) {
                this.ownerID = t, this.bitmap = e, this.nodes = r
            }

            function Ct(t, e, r) {
                this.ownerID = t, this.count = e, this.nodes = r
            }

            function Jt(t, e, r) {
                this.ownerID = t, this.keyHash = e, this.entries = r
            }

            function Pt(t, e, r) {
                this.ownerID = t, this.keyHash = e, this.entry = r
            }

            function Ht(t, e, r) {
                this._type = e, this._reverse = r, this._stack = t._root && Vt(t._root)
            }

            function Nt(t, e) {
                return z(t, e[0], e[1])
            }

            function Vt(t, e) {
                return {
                    node: t,
                    index: 0,
                    __prev: e
                }
            }

            function Yt(t, e, r, n) {
                var i = Object.create(Tr);
                return i.size = t, i._root = e, i.__ownerID = r, i.__hash = n, i.__altered = !1, i
            }

            function Qt() {
                return Wr || (Wr = Yt(0))
            }

            function Xt(t, r, n) {
                var i, o;
                if (t._root) {
                    var u = e(_r),
                        s = e(pr);
                    if (i = Ft(t._root, t.__ownerID, 0, void 0, r, n, u, s), !s.value) return t;
                    o = t.size + (u.value ? n === cr ? -1 : 1 : 0)
                } else {
                    if (n === cr) return t;
                    o = 1, i = new Wt(t.__ownerID, [
                        [r, n]
                    ])
                }
                return t.__ownerID ? (t.size = o, t._root = i, t.__hash = void 0, t.__altered = !0, t) : i ? Yt(o, i) : Qt()
            }

            function Ft(t, e, n, i, o, u, s, a) {
                return t ? t.update(e, n, i, o, u, s, a) : u === cr ? t : (r(a), r(s), new Pt(e, i, [o, u]))
            }

            function Gt(t) {
                return t.constructor === Pt || t.constructor === Jt
            }

            function Zt(t, e, r, n, i) {
                if (t.keyHash === n) return new Jt(e, n, [t.entry, i]);
                var o, u = (0 === r ? t.keyHash : t.keyHash >>> r) & fr,
                    s = (0 === r ? n : n >>> r) & fr,
                    a = u === s ? [Zt(t, e, r + ar, n, i)] : (o = new Pt(e, n, i),
                        s > u ? [t, o] : [o, t]);
                return new Bt(e, 1 << u | 1 << s, a)
            }

            function $t(t, e, r, i) {
                t || (t = new n);
                for (var o = new Pt(t, et(r), [r, i]), u = 0; e.length > u; u++) {
                    var s = e[u];
                    o = o.update(t, 0, void 0, s[0], s[1])
                }
                return o
            }

            function te(t, e, r, n) {
                for (var i = 0, o = 0, u = Array(r), s = 0, a = 1, h = e.length; h > s; s++, a <<= 1) {
                    var f = e[s];
                    void 0 !== f && s !== n && (i |= a, u[o++] = f)
                }
                return new Bt(t, i, u)
            }

            function ee(t, e, r, n, i) {
                for (var o = 0, u = Array(hr), s = 0; 0 !== r; s++, r >>>= 1) u[s] = 1 & r ? e[o++] : void 0;
                return u[n] = i, new Ct(t, o + 1, u)
            }

            function re(t, e, r) {
                for (var n = [], i = 0; r.length > i; i++) {
                    var o = r[i],
                        u = p(o);
                    y(o) || (u = u.map(function(t) {
                        return F(t)
                    })), n.push(u)
                }
                return ie(t, e, n)
            }

            function ne(t) {
                return function(e, r, n) {
                    return e && e.mergeDeepWith && y(r) ? e.mergeDeepWith(t, r) : t ? t(e, r, n) : r
                }
            }

            function ie(t, e, r) {
                return r = r.filter(function(t) {
                    return 0 !== t.size
                }), 0 === r.length ? t : 0 !== t.size || t.__ownerID || 1 !== r.length ? t.withMutations(function(t) {
                    for (var n = e ? function(r, n) {
                            t.update(n, cr, function(t) {
                                return t === cr ? r : e(t, r, n)
                            })
                        } : function(e, r) {
                            t.set(r, e)
                        }, i = 0; r.length > i; i++) r[i].forEach(n)
                }) : t.constructor(r[0])
            }

            function oe(t, e, r, n) {
                var i = t === cr,
                    o = e.next();
                if (o.done) {
                    var u = i ? r : t,
                        s = n(u);
                    return s === u ? t : s
                }
                ut(i || t && t.set, "invalid keyPath");
                var a = o.value,
                    h = i ? cr : t.get(a, cr),
                    f = oe(h, e, r, n);
                return f === h ? t : f === cr ? t.remove(a) : (i ? Qt() : t).set(a, f)
            }

            function ue(t) {
                return t -= t >> 1 & 1431655765, t = (858993459 & t) + (t >> 2 & 858993459), t = t + (t >> 4) & 252645135, t += t >> 8, t += t >> 16, 127 & t
            }

            function se(t, e, r, n) {
                var o = n ? t : i(t);
                return o[e] = r, o
            }

            function ae(t, e, r, n) {
                var i = t.length + 1;
                if (n && e + 1 === i) return t[e] = r, t;
                for (var o = Array(i), u = 0, s = 0; i > s; s++) s === e ? (o[s] = r, u = -1) : o[s] = t[s + u];
                return o
            }

            function he(t, e, r) {
                var n = t.length - 1;
                if (r && e === n) return t.pop(), t;
                for (var i = Array(n), o = 0, u = 0; n > u; u++) u === e && (o = 1), i[u] = t[u + o];
                return i
            }

            function fe(t) {
                var e = le();
                if (null === t || void 0 === t) return e;
                if (ce(t)) return t;
                var r = v(t),
                    n = r.size;
                return 0 === n ? e : (st(n), n > 0 && hr > n ? ve(0, n, ar, null, new _e(r.toArray())) : e.withMutations(function(t) {
                    t.setSize(n), r.forEach(function(e, r) {
                        return t.set(r, e)
                    })
                }))
            }

            function ce(t) {
                return !(!t || !t[Pr])
            }

            function _e(t, e) {
                this.array = t, this.ownerID = e
            }

            function pe(t, e) {
                function r(t, e, r) {
                    return 0 === e ? n(t, r) : i(t, e, r)
                }

                function n(t, r) {
                    var n = r === s ? a && a.array : t && t.array,
                        i = r > o ? 0 : o - r,
                        h = u - r;
                    return h > hr && (h = hr),
                        function() {
                            if (i === h) return Vr;
                            var t = e ? --h : i++;
                            return n && n[t]
                        }
                }

                function i(t, n, i) {
                    var s, a = t && t.array,
                        h = i > o ? 0 : o - i >> n,
                        f = (u - i >> n) + 1;
                    return f > hr && (f = hr),
                        function() {
                            for (;;) {
                                if (s) {
                                    var t = s();
                                    if (t !== Vr) return t;
                                    s = null
                                }
                                if (h === f) return Vr;
                                var o = e ? --f : h++;
                                s = r(a && a[o], n - ar, i + (o << n))
                            }
                        }
                }
                var o = t._origin,
                    u = t._capacity,
                    s = ze(u),
                    a = t._tail;
                return r(t._root, t._level, 0)
            }

            function ve(t, e, r, n, i, o, u) {
                var s = Object.create(Hr);
                return s.size = e - t, s._origin = t, s._capacity = e, s._level = r, s._root = n, s._tail = i, s.__ownerID = o, s.__hash = u, s.__altered = !1, s
            }

            function le() {
                return Nr || (Nr = ve(0, 0, ar))
            }

            function ye(t, r, n) {
                if (r = u(t, r), r >= t.size || 0 > r) return t.withMutations(function(t) {
                    0 > r ? we(t, r).set(0, n) : we(t, 0, r + 1).set(r, n)
                });
                r += t._origin;
                var i = t._tail,
                    o = t._root,
                    s = e(pr);
                return r >= ze(t._capacity) ? i = de(i, t.__ownerID, 0, r, n, s) : o = de(o, t.__ownerID, t._level, r, n, s), s.value ? t.__ownerID ? (t._root = o, t._tail = i, t.__hash = void 0, t.__altered = !0, t) : ve(t._origin, t._capacity, t._level, o, i) : t
            }

            function de(t, e, n, i, o, u) {
                var s = i >>> n & fr,
                    a = t && t.array.length > s;
                if (!a && void 0 === o) return t;
                var h;
                if (n > 0) {
                    var f = t && t.array[s],
                        c = de(f, e, n - ar, i, o, u);
                    return c === f ? t : (h = me(t, e), h.array[s] = c, h)
                }
                return a && t.array[s] === o ? t : (r(u), h = me(t, e), void 0 === o && s === h.array.length - 1 ? h.array.pop() : h.array[s] = o, h)
            }

            function me(t, e) {
                return e && t && e === t.ownerID ? t : new _e(t ? t.array.slice() : [], e)
            }

            function ge(t, e) {
                if (e >= ze(t._capacity)) return t._tail;
                if (1 << t._level + ar > e) {
                    for (var r = t._root, n = t._level; r && n > 0;) r = r.array[e >>> n & fr], n -= ar;
                    return r
                }
            }

            function we(t, e, r) {
                var i = t.__ownerID || new n,
                    o = t._origin,
                    u = t._capacity,
                    s = o + e,
                    a = void 0 === r ? u : 0 > r ? u + r : o + r;
                if (s === o && a === u) return t;
                if (s >= a) return t.clear();
                for (var h = t._level, f = t._root, c = 0; 0 > s + c;) f = new _e(f && f.array.length ? [void 0, f] : [], i), h += ar, c += 1 << h;
                c && (s += c, o += c, a += c, u += c);
                for (var _ = ze(u), p = ze(a); p >= 1 << h + ar;) f = new _e(f && f.array.length ? [f] : [], i), h += ar;
                var v = t._tail,
                    l = _ > p ? ge(t, a - 1) : p > _ ? new _e([], i) : v;
                if (v && p > _ && u > s && v.array.length) {
                    f = me(f, i);
                    for (var y = f, d = h; d > ar; d -= ar) {
                        var m = _ >>> d & fr;

                        y = y.array[m] = me(y.array[m], i)
                    }
                    y.array[_ >>> ar & fr] = v
                }
                if (u > a && (l = l && l.removeAfter(i, 0, a)), s >= p) s -= p, a -= p, h = ar, f = null, l = l && l.removeBefore(i, 0, s);
                else if (s > o || _ > p) {
                    for (c = 0; f;) {
                        var g = s >>> h & fr;
                        if (g !== p >>> h & fr) break;
                        g && (c += (1 << h) * g), h -= ar, f = f.array[g]
                    }
                    f && s > o && (f = f.removeBefore(i, h, s - c)), f && _ > p && (f = f.removeAfter(i, h, p - c)), c && (s -= c, a -= c)
                }
                return t.__ownerID ? (t.size = a - s, t._origin = s, t._capacity = a, t._level = h, t._root = f, t._tail = l, t.__hash = void 0, t.__altered = !0, t) : ve(s, a, h, f, l)
            }

            function Se(t, e, r) {
                for (var n = [], i = 0, o = 0; r.length > o; o++) {
                    var u = r[o],
                        s = v(u);
                    s.size > i && (i = s.size), y(u) || (s = s.map(function(t) {
                        return F(t)
                    })), n.push(s)
                }
                return i > t.size && (t = t.setSize(i)), ie(t, e, n)
            }

            function ze(t) {
                return hr > t ? 0 : t - 1 >>> ar << ar
            }

            function Ie(t) {
                return null === t || void 0 === t ? De() : be(t) ? t : De().withMutations(function(e) {
                    var r = p(t);
                    st(r.size), r.forEach(function(t, r) {
                        return e.set(r, t)
                    })
                })
            }

            function be(t) {
                return Tt(t) && w(t)
            }

            function qe(t, e, r, n) {
                var i = Object.create(Ie.prototype);
                return i.size = t ? t.size : 0, i._map = t, i._list = e, i.__ownerID = r, i.__hash = n, i
            }

            function De() {
                return Yr || (Yr = qe(Qt(), le()))
            }

            function Me(t, e, r) {
                var n, i, o = t._map,
                    u = t._list,
                    s = o.get(e),
                    a = void 0 !== s;
                if (r === cr) {
                    if (!a) return t;
                    u.size >= hr && u.size >= 2 * o.size ? (i = u.filter(function(t, e) {
                        return void 0 !== t && s !== e
                    }), n = i.toKeyedSeq().map(function(t) {
                        return t[0]
                    }).flip().toMap(), t.__ownerID && (n.__ownerID = i.__ownerID = t.__ownerID)) : (n = o.remove(e), i = s === u.size - 1 ? u.pop() : u.set(s, void 0))
                } else if (a) {
                    if (r === u.get(s)[1]) return t;
                    n = o, i = u.set(s, [e, r])
                } else n = o.set(e, u.size), i = u.set(u.size, [e, r]);
                return t.__ownerID ? (t.size = n.size, t._map = n, t._list = i, t.__hash = void 0, t) : qe(n, i)
            }

            function Ee(t) {
                return null === t || void 0 === t ? ke() : Oe(t) ? t : ke().unshiftAll(t)
            }

            function Oe(t) {
                return !(!t || !t[Qr])
            }

            function xe(t, e, r, n) {
                var i = Object.create(Xr);
                return i.size = t, i._head = e, i.__ownerID = r, i.__hash = n, i.__altered = !1, i
            }

            function ke() {
                return Fr || (Fr = xe(0))
            }

            function Ae(t) {
                return null === t || void 0 === t ? Ke() : je(t) ? t : Ke().withMutations(function(e) {
                    var r = l(t);
                    st(r.size), r.forEach(function(t) {
                        return e.add(t)
                    })
                })
            }

            function je(t) {
                return !(!t || !t[Gr])
            }

            function Re(t, e) {
                return t.__ownerID ? (t.size = e.size, t._map = e, t) : e === t._map ? t : 0 === e.size ? t.__empty() : t.__make(e)
            }

            function Ue(t, e) {
                var r = Object.create(Zr);
                return r.size = t ? t.size : 0, r._map = t, r.__ownerID = e, r
            }

            function Ke() {
                return $r || ($r = Ue(Qt()))
            }

            function Le(t) {
                return null === t || void 0 === t ? Be() : Te(t) ? t : Be().withMutations(function(e) {
                    var r = l(t);
                    st(r.size), r.forEach(function(t) {
                        return e.add(t)
                    })
                })
            }

            function Te(t) {
                return je(t) && w(t)
            }

            function We(t, e) {
                var r = Object.create(tn);
                return r.size = t ? t.size : 0, r._map = t, r.__ownerID = e, r
            }

            function Be() {
                return en || (en = We(De()))
            }

            function Ce(t, e) {
                var r, n = function(o) {
                        if (o instanceof n) return o;
                        if (!(this instanceof n)) return new n(o);
                        if (!r) {
                            r = !0;
                            var u = Object.keys(t);
                            He(i, u), i.size = u.length, i._name = e, i._keys = u, i._defaultValues = t
                        }
                        this._map = Lt(o)
                    },
                    i = n.prototype = Object.create(rn);
                return i.constructor = n, n
            }

            function Je(t, e, r) {
                var n = Object.create(Object.getPrototypeOf(t));
                return n._map = e, n.__ownerID = r, n
            }

            function Pe(t) {
                return t._name || t.constructor.name || "Record"
            }

            function He(t, e) {
                try {
                    e.forEach(Ne.bind(void 0, t))
                } catch (r) {}
            }

            function Ne(t, e) {
                Object.defineProperty(t, e, {
                    get: function() {
                        return this.get(e)
                    },
                    set: function(t) {
                        ut(this.__ownerID, "Cannot set on an immutable record."), this.set(e, t)
                    }
                })
            }

            function Ve(t, e) {
                if (t === e) return !0;
                if (!y(e) || void 0 !== t.size && void 0 !== e.size && t.size !== e.size || void 0 !== t.__hash && void 0 !== e.__hash && t.__hash !== e.__hash || d(t) !== d(e) || m(t) !== m(e) || w(t) !== w(e)) return !1;
                if (0 === t.size && 0 === e.size) return !0;
                var r = !g(t);
                if (w(t)) {
                    var n = t.entries();
                    return e.every(function(t, e) {
                        var i = n.next().value;
                        return i && X(i[1], t) && (r || X(i[0], e))
                    }) && n.next().done
                }
                var i = !1;
                if (void 0 === t.size)
                    if (void 0 === e.size) "function" == typeof t.cacheResult && t.cacheResult();
                    else {
                        i = !0;
                        var o = t;
                        t = e, e = o
                    }
                var u = !0,
                    s = e.__iterate(function(e, n) {
                        return (r ? t.has(e) : i ? X(e, t.get(n, cr)) : X(t.get(n, cr), e)) ? void 0 : (u = !1, !1)
                    });
                return u && t.size === s
            }

            function Ye(t, e, r) {
                if (!(this instanceof Ye)) return new Ye(t, e, r);
                if (ut(0 !== r, "Cannot step a Range by 0"), t = t || 0, void 0 === e && (e = 1 / 0), r = void 0 === r ? 1 : Math.abs(r), t > e && (r = -r), this._start = t, this._end = e, this._step = r, this.size = Math.max(0, Math.ceil((e - t) / r - 1) + 1),
                    0 === this.size) {
                    if (nn) return nn;
                    nn = this
                }
            }

            function Qe(t, e) {
                if (!(this instanceof Qe)) return new Qe(t, e);
                if (this._value = t, this.size = void 0 === e ? 1 / 0 : Math.max(0, e), 0 === this.size) {
                    if (on) return on;
                    on = this
                }
            }

            function Xe(t, e) {
                var r = function(r) {
                    t.prototype[r] = e[r]
                };
                return Object.keys(e).forEach(r), Object.getOwnPropertySymbols && Object.getOwnPropertySymbols(e).forEach(r), t
            }

            function Fe(t, e) {
                return e
            }

            function Ge(t, e) {
                return [e, t]
            }

            function Ze(t) {
                return function() {
                    return !t.apply(this, arguments)
                }
            }

            function $e(t) {
                return function() {
                    return -t.apply(this, arguments)
                }
            }

            function tr(t) {
                return "string" == typeof t ? JSON.stringify(t) : t
            }

            function er() {
                return i(arguments)
            }

            function rr(t, e) {
                return e > t ? 1 : t > e ? -1 : 0
            }

            function nr(t) {
                if (t.size === 1 / 0) return 0;
                var e = w(t),
                    r = d(t),
                    n = e ? 1 : 0,
                    i = t.__iterate(r ? e ? function(t, e) {
                        n = 31 * n + or(et(t), et(e)) | 0
                    } : function(t, e) {
                        n = n + or(et(t), et(e)) | 0
                    } : e ? function(t) {
                        n = 31 * n + et(t) | 0
                    } : function(t) {
                        n = n + et(t) | 0
                    });
                return ir(i, n)
            }

            function ir(t, e) {
                return e = Mr(e, 3432918353), e = Mr(e << 15 | e >>> -15, 461845907), e = Mr(e << 13 | e >>> -13, 5), e = (e + 3864292196 | 0) ^ t, e = Mr(e ^ e >>> 16, 2246822507), e = Mr(e ^ e >>> 13, 3266489909), e = tt(e ^ e >>> 16)
            }

            function or(t, e) {
                return t ^ e + 2654435769 + (t << 6) + (t >> 2) | 0
            }
            var ur = Array.prototype.slice,
                sr = "delete",
                ar = 5,
                hr = 1 << ar,
                fr = hr - 1,
                cr = {},
                _r = {
                    value: !1
                },
                pr = {
                    value: !1
                };
            t(p, _), t(v, _), t(l, _), _.isIterable = y, _.isKeyed = d, _.isIndexed = m, _.isAssociative = g, _.isOrdered = w, _.Keyed = p, _.Indexed = v, _.Set = l;
            var vr = "@@__IMMUTABLE_ITERABLE__@@",
                lr = "@@__IMMUTABLE_KEYED__@@",
                yr = "@@__IMMUTABLE_INDEXED__@@",
                dr = "@@__IMMUTABLE_ORDERED__@@",
                mr = 0,
                gr = 1,
                wr = 2,
                Sr = "function" == typeof Symbol && Symbol.iterator,
                zr = "@@iterator",
                Ir = Sr || zr;
            S.prototype.toString = function() {
                return "[Iterator]"
            }, S.KEYS = mr, S.VALUES = gr, S.ENTRIES = wr, S.prototype.inspect = S.prototype.toSource = function() {
                return "" + this
            }, S.prototype[Ir] = function() {
                return this
            }, t(O, _), O.of = function() {
                return O(arguments)
            }, O.prototype.toSeq = function() {
                return this
            }, O.prototype.toString = function() {
                return this.__toString("Seq {", "}")
            }, O.prototype.cacheResult = function() {
                return !this._cache && this.__iterateUncached && (this._cache = this.entrySeq().toArray(),
                    this.size = this._cache.length), this
            }, O.prototype.__iterate = function(t, e) {
                return P(this, t, e, !0)
            }, O.prototype.__iterator = function(t, e) {
                return H(this, t, e, !0)
            }, t(x, O), x.prototype.toKeyedSeq = function() {
                return this
            }, t(k, O), k.of = function() {
                return k(arguments)
            }, k.prototype.toIndexedSeq = function() {
                return this
            }, k.prototype.toString = function() {
                return this.__toString("Seq [", "]")
            }, k.prototype.__iterate = function(t, e) {
                return P(this, t, e, !1)
            }, k.prototype.__iterator = function(t, e) {
                return H(this, t, e, !1)
            }, t(A, O), A.of = function() {
                return A(arguments)
            }, A.prototype.toSetSeq = function() {
                return this
            }, O.isSeq = L, O.Keyed = x, O.Set = A, O.Indexed = k;
            var br = "@@__IMMUTABLE_SEQ__@@";
            O.prototype[br] = !0, t(j, k), j.prototype.get = function(t, e) {
                return this.has(t) ? this._array[u(this, t)] : e
            }, j.prototype.__iterate = function(t, e) {
                for (var r = this._array, n = r.length - 1, i = 0; n >= i; i++)
                    if (t(r[e ? n - i : i], i, this) === !1) return i + 1;
                return i
            }, j.prototype.__iterator = function(t, e) {
                var r = this._array,
                    n = r.length - 1,
                    i = 0;
                return new S(function() {
                    return i > n ? I() : z(t, i, r[e ? n - i++ : i++])
                })
            }, t(R, x), R.prototype.get = function(t, e) {
                return void 0 === e || this.has(t) ? this._object[t] : e
            }, R.prototype.has = function(t) {
                return this._object.hasOwnProperty(t)
            }, R.prototype.__iterate = function(t, e) {
                for (var r = this._object, n = this._keys, i = n.length - 1, o = 0; i >= o; o++) {
                    var u = n[e ? i - o : o];
                    if (t(r[u], u, this) === !1) return o + 1
                }
                return o
            }, R.prototype.__iterator = function(t, e) {
                var r = this._object,
                    n = this._keys,
                    i = n.length - 1,
                    o = 0;
                return new S(function() {
                    var u = n[e ? i - o : o];
                    return o++ > i ? I() : z(t, u, r[u])
                })
            }, R.prototype[dr] = !0, t(U, k), U.prototype.__iterateUncached = function(t, e) {
                if (e) return this.cacheResult().__iterate(t, e);
                var r = this._iterable,
                    n = D(r),
                    i = 0;
                if (q(n))
                    for (var o; !(o = n.next()).done && t(o.value, i++, this) !== !1;);
                return i
            }, U.prototype.__iteratorUncached = function(t, e) {
                if (e) return this.cacheResult().__iterator(t, e);
                var r = this._iterable,
                    n = D(r);
                if (!q(n)) return new S(I);
                var i = 0;
                return new S(function() {
                    var e = n.next();
                    return e.done ? e : z(t, i++, e.value)
                })
            }, t(K, k), K.prototype.__iterateUncached = function(t, e) {
                if (e) return this.cacheResult().__iterate(t, e);
                for (var r = this._iterator, n = this._iteratorCache, i = 0; n.length > i;)
                    if (t(n[i], i++, this) === !1) return i;

                for (var o; !(o = r.next()).done;) {
                    var u = o.value;
                    if (n[i] = u, t(u, i++, this) === !1) break
                }
                return i
            }, K.prototype.__iteratorUncached = function(t, e) {
                if (e) return this.cacheResult().__iterator(t, e);
                var r = this._iterator,
                    n = this._iteratorCache,
                    i = 0;
                return new S(function() {
                    if (i >= n.length) {
                        var e = r.next();
                        if (e.done) return e;
                        n[i] = e.value
                    }
                    return z(t, i, n[i++])
                })
            };
            var qr;
            t(N, _), t(V, N), t(Y, N), t(Q, N), N.Keyed = V, N.Indexed = Y, N.Set = Q;
            var Dr, Mr = "function" == typeof Math.imul && -2 === Math.imul(4294967295, 2) ? Math.imul : function(t, e) {
                    t = 0 | t, e = 0 | e;
                    var r = 65535 & t,
                        n = 65535 & e;
                    return r * n + ((t >>> 16) * n + r * (e >>> 16) << 16 >>> 0) | 0
                },
                Er = Object.isExtensible,
                Or = function() {
                    try {
                        return Object.defineProperty({}, "@", {}), !0
                    } catch (t) {
                        return !1
                    }
                }(),
                xr = "function" == typeof WeakMap;
            xr && (Dr = new WeakMap);
            var kr = 0,
                Ar = "__immutablehash__";
            "function" == typeof Symbol && (Ar = Symbol(Ar));
            var jr = 16,
                Rr = 255,
                Ur = 0,
                Kr = {};
            t(at, x), at.prototype.get = function(t, e) {
                return this._iter.get(t, e)
            }, at.prototype.has = function(t) {
                return this._iter.has(t)
            }, at.prototype.valueSeq = function() {
                return this._iter.valueSeq()
            }, at.prototype.reverse = function() {
                var t = this,
                    e = vt(this, !0);
                return this._useKeys || (e.valueSeq = function() {
                    return t._iter.toSeq().reverse()
                }), e
            }, at.prototype.map = function(t, e) {
                var r = this,
                    n = pt(this, t, e);
                return this._useKeys || (n.valueSeq = function() {
                    return r._iter.toSeq().map(t, e)
                }), n
            }, at.prototype.__iterate = function(t, e) {
                var r, n = this;
                return this._iter.__iterate(this._useKeys ? function(e, r) {
                    return t(e, r, n)
                } : (r = e ? kt(this) : 0, function(i) {
                    return t(i, e ? --r : r++, n)
                }), e)
            }, at.prototype.__iterator = function(t, e) {
                if (this._useKeys) return this._iter.__iterator(t, e);
                var r = this._iter.__iterator(gr, e),
                    n = e ? kt(this) : 0;
                return new S(function() {
                    var i = r.next();
                    return i.done ? i : z(t, e ? --n : n++, i.value, i)
                })
            }, at.prototype[dr] = !0, t(ht, k), ht.prototype.includes = function(t) {
                return this._iter.includes(t)
            }, ht.prototype.__iterate = function(t, e) {
                var r = this,
                    n = 0;
                return this._iter.__iterate(function(e) {
                    return t(e, n++, r)
                }, e)
            }, ht.prototype.__iterator = function(t, e) {
                var r = this._iter.__iterator(gr, e),
                    n = 0;
                return new S(function() {
                    var e = r.next();
                    return e.done ? e : z(t, n++, e.value, e);

                })
            }, t(ft, A), ft.prototype.has = function(t) {
                return this._iter.includes(t)
            }, ft.prototype.__iterate = function(t, e) {
                var r = this;
                return this._iter.__iterate(function(e) {
                    return t(e, e, r)
                }, e)
            }, ft.prototype.__iterator = function(t, e) {
                var r = this._iter.__iterator(gr, e);
                return new S(function() {
                    var e = r.next();
                    return e.done ? e : z(t, e.value, e.value, e)
                })
            }, t(ct, x), ct.prototype.entrySeq = function() {
                return this._iter.toSeq()
            }, ct.prototype.__iterate = function(t, e) {
                var r = this;
                return this._iter.__iterate(function(e) {
                    if (e) {
                        xt(e);
                        var n = y(e);
                        return t(n ? e.get(1) : e[1], n ? e.get(0) : e[0], r)
                    }
                }, e)
            }, ct.prototype.__iterator = function(t, e) {
                var r = this._iter.__iterator(gr, e);
                return new S(function() {
                    for (;;) {
                        var e = r.next();
                        if (e.done) return e;
                        var n = e.value;
                        if (n) {
                            xt(n);
                            var i = y(n);
                            return z(t, i ? n.get(0) : n[0], i ? n.get(1) : n[1], e)
                        }
                    }
                })
            }, ht.prototype.cacheResult = at.prototype.cacheResult = ft.prototype.cacheResult = ct.prototype.cacheResult = Rt, t(Lt, V), Lt.prototype.toString = function() {
                return this.__toString("Map {", "}")
            }, Lt.prototype.get = function(t, e) {
                return this._root ? this._root.get(0, void 0, t, e) : e
            }, Lt.prototype.set = function(t, e) {
                return Xt(this, t, e)
            }, Lt.prototype.setIn = function(t, e) {
                return this.updateIn(t, cr, function() {
                    return e
                })
            }, Lt.prototype.remove = function(t) {
                return Xt(this, t, cr)
            }, Lt.prototype.deleteIn = function(t) {
                return this.updateIn(t, function() {
                    return cr
                })
            }, Lt.prototype.update = function(t, e, r) {
                return 1 === arguments.length ? t(this) : this.updateIn([t], e, r)
            }, Lt.prototype.updateIn = function(t, e, r) {
                r || (r = e, e = void 0);
                var n = oe(this, Kt(t), e, r);
                return n === cr ? void 0 : n
            }, Lt.prototype.clear = function() {
                return 0 === this.size ? this : this.__ownerID ? (this.size = 0, this._root = null, this.__hash = void 0, this.__altered = !0, this) : Qt()
            }, Lt.prototype.merge = function() {
                return re(this, void 0, arguments)
            }, Lt.prototype.mergeWith = function(t) {
                var e = ur.call(arguments, 1);
                return re(this, t, e)
            }, Lt.prototype.mergeIn = function(t) {
                var e = ur.call(arguments, 1);
                return this.updateIn(t, Qt(), function(t) {
                    return "function" == typeof t.merge ? t.merge.apply(t, e) : e[e.length - 1]
                })
            }, Lt.prototype.mergeDeep = function() {
                return re(this, ne(void 0), arguments);

            }, Lt.prototype.mergeDeepWith = function(t) {
                var e = ur.call(arguments, 1);
                return re(this, ne(t), e)
            }, Lt.prototype.mergeDeepIn = function(t) {
                var e = ur.call(arguments, 1);
                return this.updateIn(t, Qt(), function(t) {
                    return "function" == typeof t.mergeDeep ? t.mergeDeep.apply(t, e) : e[e.length - 1]
                })
            }, Lt.prototype.sort = function(t) {
                return Ie(qt(this, t))
            }, Lt.prototype.sortBy = function(t, e) {
                return Ie(qt(this, e, t))
            }, Lt.prototype.withMutations = function(t) {
                var e = this.asMutable();
                return t(e), e.wasAltered() ? e.__ensureOwner(this.__ownerID) : this
            }, Lt.prototype.asMutable = function() {
                return this.__ownerID ? this : this.__ensureOwner(new n)
            }, Lt.prototype.asImmutable = function() {
                return this.__ensureOwner()
            }, Lt.prototype.wasAltered = function() {
                return this.__altered
            }, Lt.prototype.__iterator = function(t, e) {
                return new Ht(this, t, e)
            }, Lt.prototype.__iterate = function(t, e) {
                var r = this,
                    n = 0;
                return this._root && this._root.iterate(function(e) {
                    return n++, t(e[1], e[0], r)
                }, e), n
            }, Lt.prototype.__ensureOwner = function(t) {
                return t === this.__ownerID ? this : t ? Yt(this.size, this._root, t, this.__hash) : (this.__ownerID = t, this.__altered = !1, this)
            }, Lt.isMap = Tt;
            var Lr = "@@__IMMUTABLE_MAP__@@",
                Tr = Lt.prototype;
            Tr[Lr] = !0, Tr[sr] = Tr.remove, Tr.removeIn = Tr.deleteIn, Wt.prototype.get = function(t, e, r, n) {
                for (var i = this.entries, o = 0, u = i.length; u > o; o++)
                    if (X(r, i[o][0])) return i[o][1];
                return n
            }, Wt.prototype.update = function(t, e, n, o, u, s, a) {
                for (var h = u === cr, f = this.entries, c = 0, _ = f.length; _ > c && !X(o, f[c][0]); c++);
                var p = _ > c;
                if (p ? f[c][1] === u : h) return this;
                if (r(a), (h || !p) && r(s), !h || 1 !== f.length) {
                    if (!p && !h && f.length >= Br) return $t(t, f, o, u);
                    var v = t && t === this.ownerID,
                        l = v ? f : i(f);
                    return p ? h ? c === _ - 1 ? l.pop() : l[c] = l.pop() : l[c] = [o, u] : l.push([o, u]), v ? (this.entries = l, this) : new Wt(t, l)
                }
            }, Bt.prototype.get = function(t, e, r, n) {
                void 0 === e && (e = et(r));
                var i = 1 << ((0 === t ? e : e >>> t) & fr),
                    o = this.bitmap;
                return 0 === (o & i) ? n : this.nodes[ue(o & i - 1)].get(t + ar, e, r, n)
            }, Bt.prototype.update = function(t, e, r, n, i, o, u) {
                void 0 === r && (r = et(n));
                var s = (0 === e ? r : r >>> e) & fr,
                    a = 1 << s,
                    h = this.bitmap,
                    f = 0 !== (h & a);
                if (!f && i === cr) return this;
                var c = ue(h & a - 1),
                    _ = this.nodes,
                    p = f ? _[c] : void 0,
                    v = Ft(p, t, e + ar, r, n, i, o, u);

                if (v === p) return this;
                if (!f && v && _.length >= Cr) return ee(t, _, h, s, v);
                if (f && !v && 2 === _.length && Gt(_[1 ^ c])) return _[1 ^ c];
                if (f && v && 1 === _.length && Gt(v)) return v;
                var l = t && t === this.ownerID,
                    y = f ? v ? h : h ^ a : h | a,
                    d = f ? v ? se(_, c, v, l) : he(_, c, l) : ae(_, c, v, l);
                return l ? (this.bitmap = y, this.nodes = d, this) : new Bt(t, y, d)
            }, Ct.prototype.get = function(t, e, r, n) {
                void 0 === e && (e = et(r));
                var i = (0 === t ? e : e >>> t) & fr,
                    o = this.nodes[i];
                return o ? o.get(t + ar, e, r, n) : n
            }, Ct.prototype.update = function(t, e, r, n, i, o, u) {
                void 0 === r && (r = et(n));
                var s = (0 === e ? r : r >>> e) & fr,
                    a = i === cr,
                    h = this.nodes,
                    f = h[s];
                if (a && !f) return this;
                var c = Ft(f, t, e + ar, r, n, i, o, u);
                if (c === f) return this;
                var _ = this.count;
                if (f) {
                    if (!c && (_--, Jr > _)) return te(t, h, _, s)
                } else _++;
                var p = t && t === this.ownerID,
                    v = se(h, s, c, p);
                return p ? (this.count = _, this.nodes = v, this) : new Ct(t, _, v)
            }, Jt.prototype.get = function(t, e, r, n) {
                for (var i = this.entries, o = 0, u = i.length; u > o; o++)
                    if (X(r, i[o][0])) return i[o][1];
                return n
            }, Jt.prototype.update = function(t, e, n, o, u, s, a) {
                void 0 === n && (n = et(o));
                var h = u === cr;
                if (n !== this.keyHash) return h ? this : (r(a), r(s), Zt(this, t, e, n, [o, u]));
                for (var f = this.entries, c = 0, _ = f.length; _ > c && !X(o, f[c][0]); c++);
                var p = _ > c;
                if (p ? f[c][1] === u : h) return this;
                if (r(a), (h || !p) && r(s), h && 2 === _) return new Pt(t, this.keyHash, f[1 ^ c]);
                var v = t && t === this.ownerID,
                    l = v ? f : i(f);
                return p ? h ? c === _ - 1 ? l.pop() : l[c] = l.pop() : l[c] = [o, u] : l.push([o, u]), v ? (this.entries = l, this) : new Jt(t, this.keyHash, l)
            }, Pt.prototype.get = function(t, e, r, n) {
                return X(r, this.entry[0]) ? this.entry[1] : n
            }, Pt.prototype.update = function(t, e, n, i, o, u, s) {
                var a = o === cr,
                    h = X(i, this.entry[0]);
                return (h ? o === this.entry[1] : a) ? this : (r(s), a ? void r(u) : h ? t && t === this.ownerID ? (this.entry[1] = o, this) : new Pt(t, this.keyHash, [i, o]) : (r(u), Zt(this, t, e, et(i), [i, o])))
            }, Wt.prototype.iterate = Jt.prototype.iterate = function(t, e) {
                for (var r = this.entries, n = 0, i = r.length - 1; i >= n; n++)
                    if (t(r[e ? i - n : n]) === !1) return !1
            }, Bt.prototype.iterate = Ct.prototype.iterate = function(t, e) {
                for (var r = this.nodes, n = 0, i = r.length - 1; i >= n; n++) {
                    var o = r[e ? i - n : n];
                    if (o && o.iterate(t, e) === !1) return !1
                }
            }, Pt.prototype.iterate = function(t) {
                return t(this.entry)
            }, t(Ht, S), Ht.prototype.next = function() {
                for (var t = this._type, e = this._stack; e;) {
                    var r, n = e.node,
                        i = e.index++;
                    if (n.entry) {
                        if (0 === i) return Nt(t, n.entry)
                    } else if (n.entries) {
                        if (r = n.entries.length - 1, r >= i) return Nt(t, n.entries[this._reverse ? r - i : i])
                    } else if (r = n.nodes.length - 1, r >= i) {
                        var o = n.nodes[this._reverse ? r - i : i];
                        if (o) {
                            if (o.entry) return Nt(t, o.entry);
                            e = this._stack = Vt(o, e)
                        }
                        continue
                    }
                    e = this._stack = this._stack.__prev
                }
                return I()
            };
            var Wr, Br = hr / 4,
                Cr = hr / 2,
                Jr = hr / 4;
            t(fe, Y), fe.of = function() {
                return this(arguments)
            }, fe.prototype.toString = function() {
                return this.__toString("List [", "]")
            }, fe.prototype.get = function(t, e) {
                if (t = u(this, t), 0 > t || t >= this.size) return e;
                t += this._origin;
                var r = ge(this, t);
                return r && r.array[t & fr]
            }, fe.prototype.set = function(t, e) {
                return ye(this, t, e)
            }, fe.prototype.remove = function(t) {
                return this.has(t) ? 0 === t ? this.shift() : t === this.size - 1 ? this.pop() : this.splice(t, 1) : this
            }, fe.prototype.clear = function() {
                return 0 === this.size ? this : this.__ownerID ? (this.size = this._origin = this._capacity = 0, this._level = ar, this._root = this._tail = null, this.__hash = void 0, this.__altered = !0, this) : le()
            }, fe.prototype.push = function() {
                var t = arguments,
                    e = this.size;
                return this.withMutations(function(r) {
                    we(r, 0, e + t.length);
                    for (var n = 0; t.length > n; n++) r.set(e + n, t[n])
                })
            }, fe.prototype.pop = function() {
                return we(this, 0, -1)
            }, fe.prototype.unshift = function() {
                var t = arguments;
                return this.withMutations(function(e) {
                    we(e, -t.length);
                    for (var r = 0; t.length > r; r++) e.set(r, t[r])
                })
            }, fe.prototype.shift = function() {
                return we(this, 1)
            }, fe.prototype.merge = function() {
                return Se(this, void 0, arguments)
            }, fe.prototype.mergeWith = function(t) {
                var e = ur.call(arguments, 1);
                return Se(this, t, e)
            }, fe.prototype.mergeDeep = function() {
                return Se(this, ne(void 0), arguments)
            }, fe.prototype.mergeDeepWith = function(t) {
                var e = ur.call(arguments, 1);
                return Se(this, ne(t), e)
            }, fe.prototype.setSize = function(t) {
                return we(this, 0, t)
            }, fe.prototype.slice = function(t, e) {
                var r = this.size;
                return a(t, e, r) ? this : we(this, h(t, r), f(e, r))
            }, fe.prototype.__iterator = function(t, e) {
                var r = 0,
                    n = pe(this, e);
                return new S(function() {
                    var e = n();
                    return e === Vr ? I() : z(t, r++, e)
                })
            }, fe.prototype.__iterate = function(t, e) {
                for (var r, n = 0, i = pe(this, e);
                    (r = i()) !== Vr && t(r, n++, this) !== !1;);
                return n
            }, fe.prototype.__ensureOwner = function(t) {
                return t === this.__ownerID ? this : t ? ve(this._origin, this._capacity, this._level, this._root, this._tail, t, this.__hash) : (this.__ownerID = t, this)
            }, fe.isList = ce;
            var Pr = "@@__IMMUTABLE_LIST__@@",
                Hr = fe.prototype;
            Hr[Pr] = !0, Hr[sr] = Hr.remove, Hr.setIn = Tr.setIn, Hr.deleteIn = Hr.removeIn = Tr.removeIn, Hr.update = Tr.update, Hr.updateIn = Tr.updateIn, Hr.mergeIn = Tr.mergeIn, Hr.mergeDeepIn = Tr.mergeDeepIn, Hr.withMutations = Tr.withMutations, Hr.asMutable = Tr.asMutable, Hr.asImmutable = Tr.asImmutable, Hr.wasAltered = Tr.wasAltered, _e.prototype.removeBefore = function(t, e, r) {
                if (r === e ? 1 << e : 0 || 0 === this.array.length) return this;
                var n = r >>> e & fr;
                if (n >= this.array.length) return new _e([], t);
                var i, o = 0 === n;
                if (e > 0) {
                    var u = this.array[n];
                    if (i = u && u.removeBefore(t, e - ar, r), i === u && o) return this
                }
                if (o && !i) return this;
                var s = me(this, t);
                if (!o)
                    for (var a = 0; n > a; a++) s.array[a] = void 0;
                return i && (s.array[n] = i), s
            }, _e.prototype.removeAfter = function(t, e, r) {
                if (r === e ? 1 << e : 0 || 0 === this.array.length) return this;
                var n = r - 1 >>> e & fr;
                if (n >= this.array.length) return this;
                var i, o = n === this.array.length - 1;
                if (e > 0) {
                    var u = this.array[n];
                    if (i = u && u.removeAfter(t, e - ar, r), i === u && o) return this
                }
                if (o && !i) return this;
                var s = me(this, t);
                return o || s.array.pop(), i && (s.array[n] = i), s
            };
            var Nr, Vr = {};
            t(Ie, Lt), Ie.of = function() {
                return this(arguments)
            }, Ie.prototype.toString = function() {
                return this.__toString("OrderedMap {", "}")
            }, Ie.prototype.get = function(t, e) {
                var r = this._map.get(t);
                return void 0 !== r ? this._list.get(r)[1] : e
            }, Ie.prototype.clear = function() {
                return 0 === this.size ? this : this.__ownerID ? (this.size = 0, this._map.clear(), this._list.clear(), this) : De()
            }, Ie.prototype.set = function(t, e) {
                return Me(this, t, e)
            }, Ie.prototype.remove = function(t) {
                return Me(this, t, cr)
            }, Ie.prototype.wasAltered = function() {
                return this._map.wasAltered() || this._list.wasAltered()
            }, Ie.prototype.__iterate = function(t, e) {
                var r = this;
                return this._list.__iterate(function(e) {
                    return e && t(e[1], e[0], r)
                }, e)
            }, Ie.prototype.__iterator = function(t, e) {
                return this._list.fromEntrySeq().__iterator(t, e);

            }, Ie.prototype.__ensureOwner = function(t) {
                if (t === this.__ownerID) return this;
                var e = this._map.__ensureOwner(t),
                    r = this._list.__ensureOwner(t);
                return t ? qe(e, r, t, this.__hash) : (this.__ownerID = t, this._map = e, this._list = r, this)
            }, Ie.isOrderedMap = be, Ie.prototype[dr] = !0, Ie.prototype[sr] = Ie.prototype.remove;
            var Yr;
            t(Ee, Y), Ee.of = function() {
                return this(arguments)
            }, Ee.prototype.toString = function() {
                return this.__toString("Stack [", "]")
            }, Ee.prototype.get = function(t, e) {
                var r = this._head;
                for (t = u(this, t); r && t--;) r = r.next;
                return r ? r.value : e
            }, Ee.prototype.peek = function() {
                return this._head && this._head.value
            }, Ee.prototype.push = function() {
                if (0 === arguments.length) return this;
                for (var t = this.size + arguments.length, e = this._head, r = arguments.length - 1; r >= 0; r--) e = {
                    value: arguments[r],
                    next: e
                };
                return this.__ownerID ? (this.size = t, this._head = e, this.__hash = void 0, this.__altered = !0, this) : xe(t, e)
            }, Ee.prototype.pushAll = function(t) {
                if (t = v(t), 0 === t.size) return this;
                st(t.size);
                var e = this.size,
                    r = this._head;
                return t.reverse().forEach(function(t) {
                    e++, r = {
                        value: t,
                        next: r
                    }
                }), this.__ownerID ? (this.size = e, this._head = r, this.__hash = void 0, this.__altered = !0, this) : xe(e, r)
            }, Ee.prototype.pop = function() {
                return this.slice(1)
            }, Ee.prototype.unshift = function() {
                return this.push.apply(this, arguments)
            }, Ee.prototype.unshiftAll = function(t) {
                return this.pushAll(t)
            }, Ee.prototype.shift = function() {
                return this.pop.apply(this, arguments)
            }, Ee.prototype.clear = function() {
                return 0 === this.size ? this : this.__ownerID ? (this.size = 0, this._head = void 0, this.__hash = void 0, this.__altered = !0, this) : ke()
            }, Ee.prototype.slice = function(t, e) {
                if (a(t, e, this.size)) return this;
                var r = h(t, this.size),
                    n = f(e, this.size);
                if (n !== this.size) return Y.prototype.slice.call(this, t, e);
                for (var i = this.size - r, o = this._head; r--;) o = o.next;
                return this.__ownerID ? (this.size = i, this._head = o, this.__hash = void 0, this.__altered = !0, this) : xe(i, o)
            }, Ee.prototype.__ensureOwner = function(t) {
                return t === this.__ownerID ? this : t ? xe(this.size, this._head, t, this.__hash) : (this.__ownerID = t, this.__altered = !1, this)
            }, Ee.prototype.__iterate = function(t, e) {
                if (e) return this.reverse().__iterate(t);

                for (var r = 0, n = this._head; n && t(n.value, r++, this) !== !1;) n = n.next;
                return r
            }, Ee.prototype.__iterator = function(t, e) {
                if (e) return this.reverse().__iterator(t);
                var r = 0,
                    n = this._head;
                return new S(function() {
                    if (n) {
                        var e = n.value;
                        return n = n.next, z(t, r++, e)
                    }
                    return I()
                })
            }, Ee.isStack = Oe;
            var Qr = "@@__IMMUTABLE_STACK__@@",
                Xr = Ee.prototype;
            Xr[Qr] = !0, Xr.withMutations = Tr.withMutations, Xr.asMutable = Tr.asMutable, Xr.asImmutable = Tr.asImmutable, Xr.wasAltered = Tr.wasAltered;
            var Fr;
            t(Ae, Q), Ae.of = function() {
                return this(arguments)
            }, Ae.fromKeys = function(t) {
                return this(p(t).keySeq())
            }, Ae.prototype.toString = function() {
                return this.__toString("Set {", "}")
            }, Ae.prototype.has = function(t) {
                return this._map.has(t)
            }, Ae.prototype.add = function(t) {
                return Re(this, this._map.set(t, !0))
            }, Ae.prototype.remove = function(t) {
                return Re(this, this._map.remove(t))
            }, Ae.prototype.clear = function() {
                return Re(this, this._map.clear())
            }, Ae.prototype.union = function() {
                var t = ur.call(arguments, 0);
                return t = t.filter(function(t) {
                    return 0 !== t.size
                }), 0 === t.length ? this : 0 !== this.size || this.__ownerID || 1 !== t.length ? this.withMutations(function(e) {
                    for (var r = 0; t.length > r; r++) l(t[r]).forEach(function(t) {
                        return e.add(t)
                    })
                }) : this.constructor(t[0])
            }, Ae.prototype.intersect = function() {
                var t = ur.call(arguments, 0);
                if (0 === t.length) return this;
                t = t.map(function(t) {
                    return l(t)
                });
                var e = this;
                return this.withMutations(function(r) {
                    e.forEach(function(e) {
                        t.every(function(t) {
                            return t.includes(e)
                        }) || r.remove(e)
                    })
                })
            }, Ae.prototype.subtract = function() {
                var t = ur.call(arguments, 0);
                if (0 === t.length) return this;
                t = t.map(function(t) {
                    return l(t)
                });
                var e = this;
                return this.withMutations(function(r) {
                    e.forEach(function(e) {
                        t.some(function(t) {
                            return t.includes(e)
                        }) && r.remove(e)
                    })
                })
            }, Ae.prototype.merge = function() {
                return this.union.apply(this, arguments)
            }, Ae.prototype.mergeWith = function() {
                var t = ur.call(arguments, 1);
                return this.union.apply(this, t)
            }, Ae.prototype.sort = function(t) {
                return Le(qt(this, t))
            }, Ae.prototype.sortBy = function(t, e) {
                return Le(qt(this, e, t))
            }, Ae.prototype.wasAltered = function() {
                return this._map.wasAltered()
            }, Ae.prototype.__iterate = function(t, e) {
                var r = this;
                return this._map.__iterate(function(e, n) {
                    return t(n, n, r)
                }, e)
            }, Ae.prototype.__iterator = function(t, e) {
                return this._map.map(function(t, e) {
                    return e
                }).__iterator(t, e)
            }, Ae.prototype.__ensureOwner = function(t) {
                if (t === this.__ownerID) return this;
                var e = this._map.__ensureOwner(t);
                return t ? this.__make(e, t) : (this.__ownerID = t, this._map = e, this)
            }, Ae.isSet = je;
            var Gr = "@@__IMMUTABLE_SET__@@",
                Zr = Ae.prototype;
            Zr[Gr] = !0, Zr[sr] = Zr.remove, Zr.mergeDeep = Zr.merge, Zr.mergeDeepWith = Zr.mergeWith, Zr.withMutations = Tr.withMutations, Zr.asMutable = Tr.asMutable, Zr.asImmutable = Tr.asImmutable, Zr.__empty = Ke, Zr.__make = Ue;
            var $r;
            t(Le, Ae), Le.of = function() {
                return this(arguments)
            }, Le.fromKeys = function(t) {
                return this(p(t).keySeq())
            }, Le.prototype.toString = function() {
                return this.__toString("OrderedSet {", "}")
            }, Le.isOrderedSet = Te;
            var tn = Le.prototype;
            tn[dr] = !0, tn.__empty = Be, tn.__make = We;
            var en;
            t(Ce, V), Ce.prototype.toString = function() {
                return this.__toString(Pe(this) + " {", "}")
            }, Ce.prototype.has = function(t) {
                return this._defaultValues.hasOwnProperty(t)
            }, Ce.prototype.get = function(t, e) {
                if (!this.has(t)) return e;
                var r = this._defaultValues[t];
                return this._map ? this._map.get(t, r) : r
            }, Ce.prototype.clear = function() {
                if (this.__ownerID) return this._map && this._map.clear(), this;
                var t = this.constructor;
                return t._empty || (t._empty = Je(this, Qt()))
            }, Ce.prototype.set = function(t, e) {
                if (!this.has(t)) throw Error('Cannot set unknown key "' + t + '" on ' + Pe(this));
                var r = this._map && this._map.set(t, e);
                return this.__ownerID || r === this._map ? this : Je(this, r)
            }, Ce.prototype.remove = function(t) {
                if (!this.has(t)) return this;
                var e = this._map && this._map.remove(t);
                return this.__ownerID || e === this._map ? this : Je(this, e)
            }, Ce.prototype.wasAltered = function() {
                return this._map.wasAltered()
            }, Ce.prototype.__iterator = function(t, e) {
                var r = this;
                return p(this._defaultValues).map(function(t, e) {
                    return r.get(e)
                }).__iterator(t, e)
            }, Ce.prototype.__iterate = function(t, e) {
                var r = this;
                return p(this._defaultValues).map(function(t, e) {
                    return r.get(e)
                }).__iterate(t, e)
            }, Ce.prototype.__ensureOwner = function(t) {
                if (t === this.__ownerID) return this;

                var e = this._map && this._map.__ensureOwner(t);
                return t ? Je(this, e, t) : (this.__ownerID = t, this._map = e, this)
            };
            var rn = Ce.prototype;
            rn[sr] = rn.remove, rn.deleteIn = rn.removeIn = Tr.removeIn, rn.merge = Tr.merge, rn.mergeWith = Tr.mergeWith, rn.mergeIn = Tr.mergeIn, rn.mergeDeep = Tr.mergeDeep, rn.mergeDeepWith = Tr.mergeDeepWith, rn.mergeDeepIn = Tr.mergeDeepIn, rn.setIn = Tr.setIn, rn.update = Tr.update, rn.updateIn = Tr.updateIn, rn.withMutations = Tr.withMutations, rn.asMutable = Tr.asMutable, rn.asImmutable = Tr.asImmutable, t(Ye, k), Ye.prototype.toString = function() {
                return 0 === this.size ? "Range []" : "Range [ " + this._start + "..." + this._end + (this._step > 1 ? " by " + this._step : "") + " ]"
            }, Ye.prototype.get = function(t, e) {
                return this.has(t) ? this._start + u(this, t) * this._step : e
            }, Ye.prototype.includes = function(t) {
                var e = (t - this._start) / this._step;
                return e >= 0 && this.size > e && e === Math.floor(e)
            }, Ye.prototype.slice = function(t, e) {
                return a(t, e, this.size) ? this : (t = h(t, this.size), e = f(e, this.size), t >= e ? new Ye(0, 0) : new Ye(this.get(t, this._end), this.get(e, this._end), this._step))
            }, Ye.prototype.indexOf = function(t) {
                var e = t - this._start;
                if (e % this._step === 0) {
                    var r = e / this._step;
                    if (r >= 0 && this.size > r) return r
                }
                return -1
            }, Ye.prototype.lastIndexOf = function(t) {
                return this.indexOf(t)
            }, Ye.prototype.__iterate = function(t, e) {
                for (var r = this.size - 1, n = this._step, i = e ? this._start + r * n : this._start, o = 0; r >= o; o++) {
                    if (t(i, o, this) === !1) return o + 1;
                    i += e ? -n : n
                }
                return o
            }, Ye.prototype.__iterator = function(t, e) {
                var r = this.size - 1,
                    n = this._step,
                    i = e ? this._start + r * n : this._start,
                    o = 0;
                return new S(function() {
                    var u = i;
                    return i += e ? -n : n, o > r ? I() : z(t, o++, u)
                })
            }, Ye.prototype.equals = function(t) {
                return t instanceof Ye ? this._start === t._start && this._end === t._end && this._step === t._step : Ve(this, t)
            };
            var nn;
            t(Qe, k), Qe.prototype.toString = function() {
                return 0 === this.size ? "Repeat []" : "Repeat [ " + this._value + " " + this.size + " times ]"
            }, Qe.prototype.get = function(t, e) {
                return this.has(t) ? this._value : e
            }, Qe.prototype.includes = function(t) {
                return X(this._value, t)
            }, Qe.prototype.slice = function(t, e) {
                var r = this.size;
                return a(t, e, r) ? this : new Qe(this._value, f(e, r) - h(t, r))
            }, Qe.prototype.reverse = function() {
                return this
            }, Qe.prototype.indexOf = function(t) {
                return X(this._value, t) ? 0 : -1
            }, Qe.prototype.lastIndexOf = function(t) {
                return X(this._value, t) ? this.size : -1
            }, Qe.prototype.__iterate = function(t) {
                for (var e = 0; this.size > e; e++)
                    if (t(this._value, e, this) === !1) return e + 1;
                return e
            }, Qe.prototype.__iterator = function(t) {
                var e = this,
                    r = 0;
                return new S(function() {
                    return e.size > r ? z(t, r++, e._value) : I()
                })
            }, Qe.prototype.equals = function(t) {
                return t instanceof Qe ? X(this._value, t._value) : Ve(t)
            };
            var on;
            _.Iterator = S, Xe(_, {
                toArray: function() {
                    st(this.size);
                    var t = Array(this.size || 0);
                    return this.valueSeq().__iterate(function(e, r) {
                        t[r] = e
                    }), t
                },
                toIndexedSeq: function() {
                    return new ht(this)
                },
                toJS: function() {
                    return this.toSeq().map(function(t) {
                        return t && "function" == typeof t.toJS ? t.toJS() : t
                    }).__toJS()
                },
                toJSON: function() {
                    return this.toSeq().map(function(t) {
                        return t && "function" == typeof t.toJSON ? t.toJSON() : t
                    }).__toJS()
                },
                toKeyedSeq: function() {
                    return new at(this, !0)
                },
                toMap: function() {
                    return Lt(this.toKeyedSeq())
                },
                toObject: function() {
                    st(this.size);
                    var t = {};
                    return this.__iterate(function(e, r) {
                        t[r] = e
                    }), t
                },
                toOrderedMap: function() {
                    return Ie(this.toKeyedSeq())
                },
                toOrderedSet: function() {
                    return Le(d(this) ? this.valueSeq() : this)
                },
                toSet: function() {
                    return Ae(d(this) ? this.valueSeq() : this)
                },
                toSetSeq: function() {
                    return new ft(this)
                },
                toSeq: function() {
                    return m(this) ? this.toIndexedSeq() : d(this) ? this.toKeyedSeq() : this.toSetSeq()
                },
                toStack: function() {
                    return Ee(d(this) ? this.valueSeq() : this)
                },
                toList: function() {
                    return fe(d(this) ? this.valueSeq() : this)
                },
                toString: function() {
                    return "[Iterable]"
                },
                __toString: function(t, e) {
                    return 0 === this.size ? t + e : t + " " + this.toSeq().map(this.__toStringMapper).join(", ") + " " + e
                },
                concat: function() {
                    var t = ur.call(arguments, 0);
                    return Ot(this, St(this, t))
                },
                contains: function(t) {
                    return this.includes(t)
                },
                includes: function(t) {
                    return this.some(function(e) {
                        return X(e, t)
                    })
                },
                entries: function() {
                    return this.__iterator(wr)
                },
                every: function(t, e) {
                    st(this.size);
                    var r = !0;
                    return this.__iterate(function(n, i, o) {
                        return t.call(e, n, i, o) ? void 0 : (r = !1, !1)
                    }), r
                },
                filter: function(t, e) {
                    return Ot(this, lt(this, t, e, !0));

                },
                find: function(t, e, r) {
                    var n = this.findEntry(t, e);
                    return n ? n[1] : r
                },
                findEntry: function(t, e) {
                    var r;
                    return this.__iterate(function(n, i, o) {
                        return t.call(e, n, i, o) ? (r = [i, n], !1) : void 0
                    }), r
                },
                findLastEntry: function(t, e) {
                    return this.toSeq().reverse().findEntry(t, e)
                },
                forEach: function(t, e) {
                    return st(this.size), this.__iterate(e ? t.bind(e) : t)
                },
                join: function(t) {
                    st(this.size), t = void 0 !== t ? "" + t : ",";
                    var e = "",
                        r = !0;
                    return this.__iterate(function(n) {
                        r ? r = !1 : e += t, e += null !== n && void 0 !== n ? "" + n : ""
                    }), e
                },
                keys: function() {
                    return this.__iterator(mr)
                },
                map: function(t, e) {
                    return Ot(this, pt(this, t, e))
                },
                reduce: function(t, e, r) {
                    st(this.size);
                    var n, i;
                    return arguments.length < 2 ? i = !0 : n = e, this.__iterate(function(e, o, u) {
                        i ? (i = !1, n = e) : n = t.call(r, n, e, o, u)
                    }), n
                },
                reduceRight: function() {
                    var t = this.toKeyedSeq().reverse();
                    return t.reduce.apply(t, arguments)
                },
                reverse: function() {
                    return Ot(this, vt(this, !0))
                },
                slice: function(t, e) {
                    return Ot(this, mt(this, t, e, !0))
                },
                some: function(t, e) {
                    return !this.every(Ze(t), e)
                },
                sort: function(t) {
                    return Ot(this, qt(this, t))
                },
                values: function() {
                    return this.__iterator(gr)
                },
                butLast: function() {
                    return this.slice(0, -1)
                },
                isEmpty: function() {
                    return void 0 !== this.size ? 0 === this.size : !this.some(function() {
                        return !0
                    })
                },
                count: function(t, e) {
                    return o(t ? this.toSeq().filter(t, e) : this)
                },
                countBy: function(t, e) {
                    return yt(this, t, e)
                },
                equals: function(t) {
                    return Ve(this, t)
                },
                entrySeq: function() {
                    var t = this;
                    if (t._cache) return new j(t._cache);
                    var e = t.toSeq().map(Ge).toIndexedSeq();
                    return e.fromEntrySeq = function() {
                        return t.toSeq()
                    }, e
                },
                filterNot: function(t, e) {
                    return this.filter(Ze(t), e)
                },
                findLast: function(t, e, r) {
                    return this.toKeyedSeq().reverse().find(t, e, r)
                },
                first: function() {
                    return this.find(s)
                },
                flatMap: function(t, e) {
                    return Ot(this, It(this, t, e))
                },
                flatten: function(t) {
                    return Ot(this, zt(this, t, !0))
                },
                fromEntrySeq: function() {
                    return new ct(this)
                },
                get: function(t, e) {
                    return this.find(function(e, r) {
                        return X(r, t)
                    }, void 0, e)
                },
                getIn: function(t, e) {
                    for (var r, n = this, i = Kt(t); !(r = i.next()).done;) {
                        var o = r.value;
                        if (n = n && n.get ? n.get(o, cr) : cr, n === cr) return e
                    }
                    return n
                },
                groupBy: function(t, e) {
                    return dt(this, t, e);

                },
                has: function(t) {
                    return this.get(t, cr) !== cr
                },
                hasIn: function(t) {
                    return this.getIn(t, cr) !== cr
                },
                isSubset: function(t) {
                    return t = "function" == typeof t.includes ? t : _(t), this.every(function(e) {
                        return t.includes(e)
                    })
                },
                isSuperset: function(t) {
                    return t = "function" == typeof t.isSubset ? t : _(t), t.isSubset(this)
                },
                keySeq: function() {
                    return this.toSeq().map(Fe).toIndexedSeq()
                },
                last: function() {
                    return this.toSeq().reverse().first()
                },
                max: function(t) {
                    return Dt(this, t)
                },
                maxBy: function(t, e) {
                    return Dt(this, e, t)
                },
                min: function(t) {
                    return Dt(this, t ? $e(t) : rr)
                },
                minBy: function(t, e) {
                    return Dt(this, e ? $e(e) : rr, t)
                },
                rest: function() {
                    return this.slice(1)
                },
                skip: function(t) {
                    return this.slice(Math.max(0, t))
                },
                skipLast: function(t) {
                    return Ot(this, this.toSeq().reverse().skip(t).reverse())
                },
                skipWhile: function(t, e) {
                    return Ot(this, wt(this, t, e, !0))
                },
                skipUntil: function(t, e) {
                    return this.skipWhile(Ze(t), e)
                },
                sortBy: function(t, e) {
                    return Ot(this, qt(this, e, t))
                },
                take: function(t) {
                    return this.slice(0, Math.max(0, t))
                },
                takeLast: function(t) {
                    return Ot(this, this.toSeq().reverse().take(t).reverse())
                },
                takeWhile: function(t, e) {
                    return Ot(this, gt(this, t, e))
                },
                takeUntil: function(t, e) {
                    return this.takeWhile(Ze(t), e)
                },
                valueSeq: function() {
                    return this.toIndexedSeq()
                },
                hashCode: function() {
                    return this.__hash || (this.__hash = nr(this))
                }
            });
            var un = _.prototype;
            un[vr] = !0, un[Ir] = un.values, un.__toJS = un.toArray, un.__toStringMapper = tr, un.inspect = un.toSource = function() {
                    return "" + this
                }, un.chain = un.flatMap,
                function() {
                    try {
                        Object.defineProperty(un, "length", {
                            get: function() {
                                if (!_.noLengthWarning) {
                                    var t;
                                    try {
                                        throw Error()
                                    } catch (e) {
                                        t = e.stack
                                    }
                                    if (-1 === t.indexOf("_wrapObject")) return console && console.warn && console.warn("iterable.length has been deprecated, use iterable.size or iterable.count(). This warning will become a silent error in a future version. " + t), this.size
                                }
                            }
                        })
                    } catch (t) {}
                }(), Xe(p, {
                    flip: function() {
                        return Ot(this, _t(this))
                    },
                    findKey: function(t, e) {
                        var r = this.findEntry(t, e);
                        return r && r[0]
                    },
                    findLastKey: function(t, e) {
                        return this.toSeq().reverse().findKey(t, e)
                    },
                    keyOf: function(t) {
                        return this.findKey(function(e) {
                            return X(e, t);

                        })
                    },
                    lastKeyOf: function(t) {
                        return this.findLastKey(function(e) {
                            return X(e, t)
                        })
                    },
                    mapEntries: function(t, e) {
                        var r = this,
                            n = 0;
                        return Ot(this, this.toSeq().map(function(i, o) {
                            return t.call(e, [o, i], n++, r)
                        }).fromEntrySeq())
                    },
                    mapKeys: function(t, e) {
                        var r = this;
                        return Ot(this, this.toSeq().flip().map(function(n, i) {
                            return t.call(e, n, i, r)
                        }).flip())
                    }
                });
            var sn = p.prototype;
            sn[lr] = !0, sn[Ir] = un.entries, sn.__toJS = un.toObject, sn.__toStringMapper = function(t, e) {
                return JSON.stringify(e) + ": " + tr(t)
            }, Xe(v, {
                toKeyedSeq: function() {
                    return new at(this, !1)
                },
                filter: function(t, e) {
                    return Ot(this, lt(this, t, e, !1))
                },
                findIndex: function(t, e) {
                    var r = this.findEntry(t, e);
                    return r ? r[0] : -1
                },
                indexOf: function(t) {
                    var e = this.toKeyedSeq().keyOf(t);
                    return void 0 === e ? -1 : e
                },
                lastIndexOf: function(t) {
                    return this.toSeq().reverse().indexOf(t)
                },
                reverse: function() {
                    return Ot(this, vt(this, !1))
                },
                slice: function(t, e) {
                    return Ot(this, mt(this, t, e, !1))
                },
                splice: function(t, e) {
                    var r = arguments.length;
                    if (e = Math.max(0 | e, 0), 0 === r || 2 === r && !e) return this;
                    t = h(t, this.size);
                    var n = this.slice(0, t);
                    return Ot(this, 1 === r ? n : n.concat(i(arguments, 2), this.slice(t + e)))
                },
                findLastIndex: function(t, e) {
                    var r = this.toKeyedSeq().findLastKey(t, e);
                    return void 0 === r ? -1 : r
                },
                first: function() {
                    return this.get(0)
                },
                flatten: function(t) {
                    return Ot(this, zt(this, t, !1))
                },
                get: function(t, e) {
                    return t = u(this, t), 0 > t || this.size === 1 / 0 || void 0 !== this.size && t > this.size ? e : this.find(function(e, r) {
                        return r === t
                    }, void 0, e)
                },
                has: function(t) {
                    return t = u(this, t), t >= 0 && (void 0 !== this.size ? this.size === 1 / 0 || this.size > t : -1 !== this.indexOf(t))
                },
                interpose: function(t) {
                    return Ot(this, bt(this, t))
                },
                interleave: function() {
                    var t = [this].concat(i(arguments)),
                        e = Et(this.toSeq(), k.of, t),
                        r = e.flatten(!0);
                    return e.size && (r.size = e.size * t.length), Ot(this, r)
                },
                last: function() {
                    return this.get(-1)
                },
                skipWhile: function(t, e) {
                    return Ot(this, wt(this, t, e, !1))
                },
                zip: function() {
                    var t = [this].concat(i(arguments));
                    return Ot(this, Et(this, er, t))
                },
                zipWith: function(t) {
                    var e = i(arguments);
                    return e[0] = this, Ot(this, Et(this, t, e))
                }
            }), v.prototype[yr] = !0, v.prototype[dr] = !0, Xe(l, {
                get: function(t, e) {
                    return this.has(t) ? t : e;

                },
                includes: function(t) {
                    return this.has(t)
                },
                keySeq: function() {
                    return this.valueSeq()
                }
            }), l.prototype.has = un.includes, Xe(x, p.prototype), Xe(k, v.prototype), Xe(A, l.prototype), Xe(V, p.prototype), Xe(Y, v.prototype), Xe(Q, l.prototype);
            var an = {
                Iterable: _,
                Seq: O,
                Collection: N,
                Map: Lt,
                OrderedMap: Ie,
                List: fe,
                Stack: Ee,
                Set: Ae,
                OrderedSet: Le,
                Record: Ce,
                Range: Ye,
                Repeat: Qe,
                is: X,
                fromJS: F
            };
            return an
        });
    }());
    SM.currentModule = null;
}, '', {
    "requires": []
});
YUI.add("leaflet-markercluster", function(t) {
    SM.currentModule = "leaflet-markercluster";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        /*!
        Leaflet Markercluster plugin
        Copyright 2012 David Leaver
        https://github.com/Leaflet/Leaflet.markercluster/blob/master/MIT-LICENCE.txt
        */
        var e = t.config.doc,
            i = t.config.win,
            n = t.Leaflet;
        ! function(t, e, i) {
            n.MarkerClusterGroup = n.FeatureGroup.extend({
                    options: {
                        maxClusterRadius: 80,
                        iconCreateFunction: null,
                        spiderfyOnMaxZoom: !0,
                        showCoverageOnHover: !0,
                        zoomToBoundsOnClick: !0,
                        singleMarkerMode: !1,
                        disableClusteringAtZoom: null,
                        removeOutsideVisibleBounds: !0,
                        animateAddingMarkers: !1,
                        spiderfyDistanceMultiplier: 1,
                        polygonOptions: {}
                    },
                    initialize: function(t) {
                        n.Util.setOptions(this, t), this.options.iconCreateFunction || (this.options.iconCreateFunction = this._defaultIconCreateFunction), this._featureGroup = n.featureGroup(), this._featureGroup.on(n.FeatureGroup.EVENTS, this._propagateEvent, this), this._nonPointGroup = n.featureGroup(), this._nonPointGroup.on(n.FeatureGroup.EVENTS, this._propagateEvent, this), this._inZoomAnimation = 0, this._needsClustering = [], this._needsRemoving = [], this._currentShownBounds = null, this._queue = []
                    },
                    addLayer: function(t) {
                        if (t instanceof n.LayerGroup) {
                            var e = [];
                            for (var i in t._layers) e.push(t._layers[i]);
                            return this.addLayers(e)
                        }
                        if (!t.getLatLng) return this._nonPointGroup.addLayer(t), this;
                        if (!this._map) return this._needsClustering.push(t), this;
                        if (this.hasLayer(t)) return this;
                        this._unspiderfy && this._unspiderfy(), this._addLayer(t, this._maxZoom);
                        var s = t,
                            r = this._map.getZoom();
                        if (t.__parent)
                            for (; s.__parent._zoom >= r;) s = s.__parent;
                        return this._currentShownBounds.contains(s.getLatLng()) && (this.options.animateAddingMarkers ? this._animationAddLayer(t, s) : this._animationAddLayerNonAnimated(t, s)), this
                    },
                    removeLayer: function(t) {
                        if (t instanceof n.LayerGroup) {
                            var e = [];
                            for (var i in t._layers) e.push(t._layers[i]);
                            return this.removeLayers(e)
                        }
                        return t.getLatLng ? this._map ? t.__parent ? (this._unspiderfy && (this._unspiderfy(), this._unspiderfyLayer(t)), this._removeLayer(t, !0), this._featureGroup.hasLayer(t) && (this._featureGroup.removeLayer(t), t.setOpacity && t.setOpacity(1)), this) : this : (!this._arraySplice(this._needsClustering, t) && this.hasLayer(t) && this._needsRemoving.push(t), this) : (this._nonPointGroup.removeLayer(t), this)
                    },
                    addLayers: function(t) {
                        var e, i, s, r = this._map,
                            o = this._featureGroup,
                            a = this._nonPointGroup;
                        for (e = 0, i = t.length; i > e; e++)
                            if (s = t[e], s.getLatLng) {
                                if (!this.hasLayer(s))
                                    if (r) {
                                        if (this._addLayer(s, this._maxZoom), s.__parent && 2 === s.__parent.getChildCount()) {
                                            var h = s.__parent.getAllChildMarkers(),
                                                _ = h[0] === s ? h[1] : h[0];
                                            o.removeLayer(_)
                                        }
                                    } else this._needsClustering.push(s)
                            } else a.addLayer(s);
                        return r && (o.eachLayer(function(t) {
                            t instanceof n.MarkerCluster && t._iconNeedsUpdate && t._updateIcon()
                        }), this._topClusterLevel._recursivelyAddChildrenToMap(null, this._zoom, this._currentShownBounds)), this
                    },
                    removeLayers: function(t) {
                        var e, i, s, r = this._featureGroup,
                            o = this._nonPointGroup;
                        if (!this._map) {
                            for (e = 0, i = t.length; i > e; e++) s = t[e], this._arraySplice(this._needsClustering, s), o.removeLayer(s);
                            return this
                        }
                        for (e = 0, i = t.length; i > e; e++) s = t[e], s.__parent ? (this._removeLayer(s, !0, !0), r.hasLayer(s) && (r.removeLayer(s), s.setOpacity && s.setOpacity(1))) : o.removeLayer(s);
                        return this._topClusterLevel._recursivelyAddChildrenToMap(null, this._zoom, this._currentShownBounds), r.eachLayer(function(t) {
                            t instanceof n.MarkerCluster && t._updateIcon()
                        }), this
                    },
                    clearLayers: function() {
                        return this._map || (this._needsClustering = [], delete this._gridClusters, delete this._gridUnclustered), this._noanimationUnspiderfy && this._noanimationUnspiderfy(), this._featureGroup.clearLayers(), this._nonPointGroup.clearLayers(), this.eachLayer(function(t) {
                            delete t.__parent
                        }), this._map && this._generateInitialClusters(), this
                    },
                    getBounds: function() {
                        var t = new n.LatLngBounds;
                        if (this._topClusterLevel) t.extend(this._topClusterLevel._bounds);
                        else
                            for (var e = this._needsClustering.length - 1; e >= 0; e--) t.extend(this._needsClustering[e].getLatLng());
                        return t.extend(this._nonPointGroup.getBounds()), t
                    },
                    eachLayer: function(t, e) {
                        var i, n = this._needsClustering.slice();
                        for (this._topClusterLevel && this._topClusterLevel.getAllChildMarkers(n), i = n.length - 1; i >= 0; i--) t.call(e, n[i]);
                        this._nonPointGroup.eachLayer(t, e)
                    },
                    getLayers: function() {
                        var t = [];
                        return this.eachLayer(function(e) {
                            t.push(e)
                        }), t
                    },
                    getLayer: function(t) {
                        var e = null;
                        return this.eachLayer(function(i) {
                            n.stamp(i) === t && (e = i)
                        }), e
                    },
                    hasLayer: function(t) {
                        if (!t) return !1;
                        var e, i = this._needsClustering;
                        for (e = i.length - 1; e >= 0; e--)
                            if (i[e] === t) return !0;
                        for (i = this._needsRemoving, e = i.length - 1; e >= 0; e--)
                            if (i[e] === t) return !1;
                        return !(!t.__parent || t.__parent._group !== this) || this._nonPointGroup.hasLayer(t)
                    },
                    zoomToShowLayer: function(t, e) {
                        var i = function() {
                            if ((t._icon || t.__parent._icon) && !this._inZoomAnimation)
                                if (this._map.off("moveend", i, this), this.off("animationend", i, this), t._icon) e();
                                else if (t.__parent._icon) {
                                var n = function() {
                                    this.off("spiderfied", n, this), e()
                                };
                                this.on("spiderfied", n, this), t.__parent.spiderfy()
                            }
                        };
                        t._icon && this._map.getBounds().contains(t.getLatLng()) ? e() : t.__parent._zoom < this._map.getZoom() ? (this._map.on("moveend", i, this), this._map.panTo(t.getLatLng())) : (this._map.on("moveend", i, this), this.on("animationend", i, this), this._map.setView(t.getLatLng(), t.__parent._zoom + 1), t.__parent.zoomToBounds())
                    },
                    onAdd: function(t) {
                        this._map = t;
                        var e, i, n;
                        if (!isFinite(this._map.getMaxZoom())) throw "Map has no maxZoom specified";
                        for (this._featureGroup.onAdd(t), this._nonPointGroup.onAdd(t), this._gridClusters || this._generateInitialClusters(), e = 0, i = this._needsRemoving.length; i > e; e++) n = this._needsRemoving[e], this._removeLayer(n, !0);
                        for (this._needsRemoving = [], e = 0, i = this._needsClustering.length; i > e; e++) n = this._needsClustering[e], n.getLatLng ? n.__parent || this._addLayer(n, this._maxZoom) : this._featureGroup.addLayer(n);
                        this._needsClustering = [], this._map.on("zoomend", this._zoomEnd, this), this._map.on("moveend", this._moveEnd, this), this._spiderfierOnAdd && this._spiderfierOnAdd(), this._bindEvents(), this._zoom = this._map.getZoom(), this._currentShownBounds = this._getExpandedVisibleBounds(), this._topClusterLevel._recursivelyAddChildrenToMap(null, this._zoom, this._currentShownBounds)
                    },
                    onRemove: function(t) {
                        t.off("zoomend", this._zoomEnd, this), t.off("moveend", this._moveEnd, this), this._unbindEvents(), this._map._mapPane.className = this._map._mapPane.className.replace(" leaflet-cluster-anim", ""), this._spiderfierOnRemove && this._spiderfierOnRemove(), this._hideCoverage(), this._featureGroup.onRemove(t), this._nonPointGroup.onRemove(t), this._featureGroup.clearLayers(), this._map = null
                    },
                    getVisibleParent: function(t) {
                        for (var e = t; e && !e._icon;) e = e.__parent;
                        return e || null
                    },
                    _arraySplice: function(t, e) {
                        for (var i = t.length - 1; i >= 0; i--)
                            if (t[i] === e) return t.splice(i, 1), !0
                    },
                    _removeLayer: function(t, e, i) {
                        var n = this._gridClusters,
                            s = this._gridUnclustered,
                            r = this._featureGroup,
                            o = this._map;
                        if (e)
                            for (var a = this._maxZoom; a >= 0 && s[a].removeObject(t, o.project(t.getLatLng(), a)); a--);
                        var h, _ = t.__parent,
                            u = _._markers;
                        for (this._arraySplice(u, t); _ && (_._childCount--, !(_._zoom < 0));) e && _._childCount <= 1 ? (h = _._markers[0] === t ? _._markers[1] : _._markers[0], n[_._zoom].removeObject(_, o.project(_._cLatLng, _._zoom)), s[_._zoom].addObject(h, o.project(h.getLatLng(), _._zoom)), this._arraySplice(_.__parent._childClusters, _), _.__parent._markers.push(h), h.__parent = _.__parent, _._icon && (r.removeLayer(_), i || r.addLayer(h))) : (_._recalculateBounds(), i && _._icon || _._updateIcon()), _ = _.__parent;
                        delete t.__parent
                    },
                    _isOrIsParent: function(t, e) {
                        for (; e;) {
                            if (t === e) return !0;
                            e = e.parentNode
                        }
                        return !1
                    },
                    _propagateEvent: function(t) {
                        if (t.layer instanceof n.MarkerCluster) {
                            if (t.originalEvent && this._isOrIsParent(t.layer._icon, t.originalEvent.relatedTarget)) return;
                            t.type = "cluster" + t.type
                        }
                        this.fire(t.type, t)
                    },
                    _defaultIconCreateFunction: function(t) {
                        var e = t.getChildCount(),
                            i = " marker-cluster-";
                        return i += 10 > e ? "small" : 100 > e ? "medium" : "large", new n.DivIcon({
                            html: "<div><span>" + e + "</span></div>",
                            className: "marker-cluster" + i,
                            iconSize: new n.Point(40, 40)
                        })
                    },
                    _bindEvents: function() {
                        var t = this._map,
                            e = this.options.spiderfyOnMaxZoom,
                            i = this.options.showCoverageOnHover,
                            n = this.options.zoomToBoundsOnClick;
                        (e || n) && this.on("clusterclick", this._zoomOrSpiderfy, this), i && (this.on("clustermouseover", this._showCoverage, this), this.on("clustermouseout", this._hideCoverage, this), t.on("zoomend", this._hideCoverage, this))
                    },
                    _zoomOrSpiderfy: function(t) {
                        var e = this._map;
                        e.getMaxZoom() === e.getZoom() ? this.options.spiderfyOnMaxZoom && t.layer.spiderfy() : this.options.zoomToBoundsOnClick && t.layer.zoomToBounds(), t.originalEvent && 13 === t.originalEvent.keyCode && e._container.focus()
                    },
                    _showCoverage: function(t) {
                        var e = this._map;
                        this._inZoomAnimation || (this._shownPolygon && e.removeLayer(this._shownPolygon), t.layer.getChildCount() > 2 && t.layer !== this._spiderfied && (this._shownPolygon = new n.Polygon(t.layer.getConvexHull(), this.options.polygonOptions), e.addLayer(this._shownPolygon)))
                    },
                    _hideCoverage: function() {
                        this._shownPolygon && (this._map.removeLayer(this._shownPolygon), this._shownPolygon = null)
                    },
                    _unbindEvents: function() {
                        var t = this.options.spiderfyOnMaxZoom,
                            e = this.options.showCoverageOnHover,
                            i = this.options.zoomToBoundsOnClick,
                            n = this._map;
                        (t || i) && this.off("clusterclick", this._zoomOrSpiderfy, this), e && (this.off("clustermouseover", this._showCoverage, this), this.off("clustermouseout", this._hideCoverage, this), n.off("zoomend", this._hideCoverage, this))
                    },
                    _zoomEnd: function() {
                        this._map && (this._mergeSplitClusters(), this._zoom = this._map._zoom, this._currentShownBounds = this._getExpandedVisibleBounds())
                    },
                    _moveEnd: function() {
                        if (!this._inZoomAnimation) {
                            var t = this._getExpandedVisibleBounds();
                            this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds, this._zoom, t), this._topClusterLevel._recursivelyAddChildrenToMap(null, this._map._zoom, t), this._currentShownBounds = t
                        }
                    },
                    _generateInitialClusters: function() {
                        var t = this._map.getMaxZoom(),
                            e = this.options.maxClusterRadius;
                        this.options.disableClusteringAtZoom && (t = this.options.disableClusteringAtZoom - 1), this._maxZoom = t, this._gridClusters = {}, this._gridUnclustered = {};
                        for (var i = t; i >= 0; i--) this._gridClusters[i] = new n.DistanceGrid(e), this._gridUnclustered[i] = new n.DistanceGrid(e);
                        this._topClusterLevel = new n.MarkerCluster(this, -1)
                    },
                    _addLayer: function(t, e) {
                        var i, s, r = this._gridClusters,
                            o = this._gridUnclustered;
                        for (this.options.singleMarkerMode && (t.options.icon = this.options.iconCreateFunction({
                                getChildCount: function() {
                                    return 1
                                },
                                getAllChildMarkers: function() {
                                    return [t]
                                }
                            })); e >= 0; e--) {
                            i = this._map.project(t.getLatLng(), e);
                            var a = r[e].getNearObject(i);
                            if (a) return a._addChild(t), void(t.__parent = a);
                            if (a = o[e].getNearObject(i)) {
                                var h = a.__parent;
                                h && this._removeLayer(a, !1);
                                var _ = new n.MarkerCluster(this, e, a, t);
                                r[e].addObject(_, this._map.project(_._cLatLng, e)), a.__parent = _, t.__parent = _;
                                var u = _;
                                for (s = e - 1; s > h._zoom; s--) u = new n.MarkerCluster(this, s, u), r[s].addObject(u, this._map.project(a.getLatLng(), s));
                                for (h._addChild(u), s = e; s >= 0 && o[s].removeObject(a, this._map.project(a.getLatLng(), s)); s--);
                                return
                            }
                            o[e].addObject(t, i)
                        }
                        this._topClusterLevel._addChild(t), t.__parent = this._topClusterLevel
                    },
                    _enqueue: function(t) {
                        this._queue.push(t), this._queueTimeout || (this._queueTimeout = setTimeout(n.bind(this._processQueue, this), 300))
                    },
                    _processQueue: function() {
                        for (var t = 0; t < this._queue.length; t++) this._queue[t].call(this);
                        this._queue.length = 0, clearTimeout(this._queueTimeout), this._queueTimeout = null
                    },
                    _mergeSplitClusters: function() {
                        this._processQueue(), this._zoom < this._map._zoom && this._currentShownBounds.contains(this._getExpandedVisibleBounds()) ? (this._animationStart(), this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds, this._zoom, this._getExpandedVisibleBounds()), this._animationZoomIn(this._zoom, this._map._zoom)) : this._zoom > this._map._zoom ? (this._animationStart(), this._animationZoomOut(this._zoom, this._map._zoom)) : this._moveEnd()
                    },
                    _getExpandedVisibleBounds: function() {
                        if (!this.options.removeOutsideVisibleBounds) return this.getBounds();
                        var t = this._map,
                            e = t.getBounds(),
                            i = e._southWest,
                            s = e._northEast,
                            r = n.Browser.mobile ? 0 : Math.abs(i.lat - s.lat),
                            o = n.Browser.mobile ? 0 : Math.abs(i.lng - s.lng);
                        return new n.LatLngBounds(new n.LatLng(i.lat - r, i.lng - o, !0), new n.LatLng(s.lat + r, s.lng + o, !0))
                    },
                    _animationAddLayerNonAnimated: function(t, e) {
                        if (e === t) this._featureGroup.addLayer(t);
                        else if (2 === e._childCount) {
                            e._addToMap();
                            var i = e.getAllChildMarkers();
                            this._featureGroup.removeLayer(i[0]), this._featureGroup.removeLayer(i[1])
                        } else e._updateIcon()
                    }
                }), n.MarkerClusterGroup.include(n.DomUtil.TRANSITION ? {
                    _animationStart: function() {
                        this._map._mapPane.className += " leaflet-cluster-anim", this._inZoomAnimation++
                    },
                    _animationEnd: function() {
                        this._map && (this._map._mapPane.className = this._map._mapPane.className.replace(" leaflet-cluster-anim", "")), this._inZoomAnimation--, this.fire("animationend")
                    },
                    _animationZoomIn: function(t, e) {
                        var i, s = this._getExpandedVisibleBounds(),
                            r = this._featureGroup;
                        this._topClusterLevel._recursively(s, t, 0, function(n) {
                            var o, a = n._latlng,
                                h = n._markers;
                            for (s.contains(a) || (a = null), n._isSingleParent() && t + 1 === e ? (r.removeLayer(n), n._recursivelyAddChildrenToMap(null, e, s)) : (n.setOpacity(0), n._recursivelyAddChildrenToMap(a, e, s)), i = h.length - 1; i >= 0; i--) o = h[i], s.contains(o._latlng) || r.removeLayer(o)
                        }), this._forceLayout(), this._topClusterLevel._recursivelyBecomeVisible(s, e), r.eachLayer(function(t) {
                            t instanceof n.MarkerCluster || !t._icon || t.setOpacity(1)
                        }), this._topClusterLevel._recursively(s, t, e, function(t) {
                            t._recursivelyRestoreChildPositions(e)
                        }), this._enqueue(function() {
                            this._topClusterLevel._recursively(s, t, 0, function(t) {
                                r.removeLayer(t), t.setOpacity(1)
                            }), this._animationEnd()
                        })
                    },
                    _animationZoomOut: function(t, e) {
                        this._animationZoomOutSingle(this._topClusterLevel, t - 1, e), this._topClusterLevel._recursivelyAddChildrenToMap(null, e, this._getExpandedVisibleBounds()), this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds, t, this._getExpandedVisibleBounds())
                    },
                    _animationZoomOutSingle: function(t, e, i) {
                        var n = this._getExpandedVisibleBounds();
                        t._recursivelyAnimateChildrenInAndAddSelfToMap(n, e + 1, i);
                        var s = this;
                        this._forceLayout(), t._recursivelyBecomeVisible(n, i), this._enqueue(function() {
                            if (1 === t._childCount) {
                                var r = t._markers[0];
                                r.setLatLng(r.getLatLng()), r.setOpacity(1)
                            } else t._recursively(n, i, 0, function(t) {
                                t._recursivelyRemoveChildrenFromMap(n, e + 1)
                            });
                            s._animationEnd()
                        })
                    },
                    _animationAddLayer: function(t, e) {
                        var i = this,
                            n = this._featureGroup;
                        n.addLayer(t), e !== t && (e._childCount > 2 ? (e._updateIcon(), this._forceLayout(), this._animationStart(), t._setPos(this._map.latLngToLayerPoint(e.getLatLng())), t.setOpacity(0), this._enqueue(function() {
                            n.removeLayer(t), t.setOpacity(1), i._animationEnd()
                        })) : (this._forceLayout(), i._animationStart(), i._animationZoomOutSingle(e, this._map.getMaxZoom(), this._map.getZoom())))
                    },
                    _forceLayout: function() {
                        n.Util.falseFn(e.body.offsetWidth)
                    }
                } : {
                    _animationStart: function() {},
                    _animationZoomIn: function(t, e) {
                        this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds, t), this._topClusterLevel._recursivelyAddChildrenToMap(null, e, this._getExpandedVisibleBounds())
                    },
                    _animationZoomOut: function(t, e) {
                        this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds, t), this._topClusterLevel._recursivelyAddChildrenToMap(null, e, this._getExpandedVisibleBounds())
                    },
                    _animationAddLayer: function(t, e) {
                        this._animationAddLayerNonAnimated(t, e)
                    }
                }), n.markerClusterGroup = function(t) {
                    return new n.MarkerClusterGroup(t)
                }, n.MarkerCluster = n.Marker.extend({
                    initialize: function(t, e, i, s) {
                        n.Marker.prototype.initialize.call(this, i ? i._cLatLng || i.getLatLng() : new n.LatLng(0, 0), {
                            icon: this
                        }), this._group = t, this._zoom = e, this._markers = [], this._childClusters = [], this._childCount = 0, this._iconNeedsUpdate = !0, this._bounds = new n.LatLngBounds, i && this._addChild(i), s && this._addChild(s)
                    },
                    getAllChildMarkers: function(t) {
                        t = t || [];
                        for (var e = this._childClusters.length - 1; e >= 0; e--) this._childClusters[e].getAllChildMarkers(t);
                        for (var i = this._markers.length - 1; i >= 0; i--) t.push(this._markers[i]);
                        return t
                    },
                    getChildCount: function() {
                        return this._childCount
                    },
                    zoomToBounds: function() {
                        for (var t, e = this._childClusters.slice(), i = this._group._map, n = i.getBoundsZoom(this._bounds), s = this._zoom + 1, r = i.getZoom(); e.length > 0 && n > s;) {
                            s++;
                            var o = [];
                            for (t = 0; t < e.length; t++) o = o.concat(e[t]._childClusters);
                            e = o
                        }
                        n > s ? this._group._map.setView(this._latlng, s) : r >= n ? this._group._map.setView(this._latlng, r + 1) : this._group._map.fitBounds(this._bounds)
                    },
                    getBounds: function() {
                        var t = new n.LatLngBounds;
                        return t.extend(this._bounds), t
                    },
                    _updateIcon: function() {
                        this._iconNeedsUpdate = !0, this._icon && this.setIcon(this)
                    },
                    createIcon: function() {
                        return this._iconNeedsUpdate && (this._iconObj = this._group.options.iconCreateFunction(this), this._iconNeedsUpdate = !1), this._iconObj.createIcon()
                    },
                    createShadow: function() {
                        return this._iconObj.createShadow()
                    },
                    _addChild: function(t, e) {
                        this._iconNeedsUpdate = !0, this._expandBounds(t), t instanceof n.MarkerCluster ? (e || (this._childClusters.push(t), t.__parent = this), this._childCount += t._childCount) : (e || this._markers.push(t), this._childCount++), this.__parent && this.__parent._addChild(t, !0)
                    },
                    _expandBounds: function(t) {
                        var e, i = t._wLatLng || t._latlng;
                        t instanceof n.MarkerCluster ? (this._bounds.extend(t._bounds), e = t._childCount) : (this._bounds.extend(i), e = 1), this._cLatLng || (this._cLatLng = t._cLatLng || i);
                        var s = this._childCount + e;
                        this._wLatLng ? (this._wLatLng.lat = (i.lat * e + this._wLatLng.lat * this._childCount) / s, this._wLatLng.lng = (i.lng * e + this._wLatLng.lng * this._childCount) / s) : this._latlng = this._wLatLng = new n.LatLng(i.lat, i.lng)
                    },
                    _addToMap: function(t) {
                        t && (this._backupLatlng = this._latlng, this.setLatLng(t)), this._group._featureGroup.addLayer(this)
                    },
                    _recursivelyAnimateChildrenIn: function(t, e, i) {
                        this._recursively(t, 0, i - 1, function(t) {
                            var i, n, s = t._markers;
                            for (i = s.length - 1; i >= 0; i--) n = s[i], n._icon && (n._setPos(e), n.setOpacity(0))
                        }, function(t) {
                            var i, n, s = t._childClusters;
                            for (i = s.length - 1; i >= 0; i--) n = s[i], n._icon && (n._setPos(e), n.setOpacity(0))
                        })
                    },
                    _recursivelyAnimateChildrenInAndAddSelfToMap: function(t, e, i) {
                        this._recursively(t, i, 0, function(n) {
                            n._recursivelyAnimateChildrenIn(t, n._group._map.latLngToLayerPoint(n.getLatLng()).round(), e), n._isSingleParent() && e - 1 === i ? (n.setOpacity(1), n._recursivelyRemoveChildrenFromMap(t, e)) : n.setOpacity(0), n._addToMap()
                        })
                    },
                    _recursivelyBecomeVisible: function(t, e) {
                        this._recursively(t, 0, e, null, function(t) {
                            t.setOpacity(1)
                        })
                    },
                    _recursivelyAddChildrenToMap: function(t, e, i) {
                        this._recursively(i, -1, e, function(n) {
                            if (e !== n._zoom)
                                for (var s = n._markers.length - 1; s >= 0; s--) {
                                    var r = n._markers[s];
                                    i.contains(r._latlng) && (t && (r._backupLatlng = r.getLatLng(), r.setLatLng(t), r.setOpacity && r.setOpacity(0)), n._group._featureGroup.addLayer(r))
                                }
                        }, function(e) {
                            e._addToMap(t)
                        })
                    },
                    _recursivelyRestoreChildPositions: function(t) {
                        for (var e = this._markers.length - 1; e >= 0; e--) {
                            var i = this._markers[e];
                            i._backupLatlng && (i.setLatLng(i._backupLatlng), delete i._backupLatlng)
                        }
                        if (t - 1 === this._zoom)
                            for (var n = this._childClusters.length - 1; n >= 0; n--) this._childClusters[n]._restorePosition();
                        else
                            for (var s = this._childClusters.length - 1; s >= 0; s--) this._childClusters[s]._recursivelyRestoreChildPositions(t)
                    },
                    _restorePosition: function() {
                        this._backupLatlng && (this.setLatLng(this._backupLatlng), delete this._backupLatlng)
                    },
                    _recursivelyRemoveChildrenFromMap: function(t, e, i) {
                        var n, s;
                        this._recursively(t, -1, e - 1, function(t) {
                            for (s = t._markers.length - 1; s >= 0; s--) n = t._markers[s], i && i.contains(n._latlng) || (t._group._featureGroup.removeLayer(n), n.setOpacity && n.setOpacity(1))
                        }, function(t) {
                            for (s = t._childClusters.length - 1; s >= 0; s--) n = t._childClusters[s], i && i.contains(n._latlng) || (t._group._featureGroup.removeLayer(n), n.setOpacity && n.setOpacity(1))
                        })
                    },
                    _recursively: function(t, e, i, n, s) {
                        var r, o, a = this._childClusters,
                            h = this._zoom;
                        if (e > h)
                            for (r = a.length - 1; r >= 0; r--) o = a[r], t.intersects(o._bounds) && o._recursively(t, e, i, n, s);
                        else if (n && n(this), s && this._zoom === i && s(this), i > h)
                            for (r = a.length - 1; r >= 0; r--) o = a[r], t.intersects(o._bounds) && o._recursively(t, e, i, n, s)
                    },
                    _recalculateBounds: function() {
                        var t, e = this._markers,
                            i = this._childClusters;
                        for (this._bounds = new n.LatLngBounds, delete this._wLatLng, t = e.length - 1; t >= 0; t--) this._expandBounds(e[t]);
                        for (t = i.length - 1; t >= 0; t--) this._expandBounds(i[t])
                    },
                    _isSingleParent: function() {
                        return this._childClusters.length > 0 && this._childClusters[0]._childCount === this._childCount
                    }
                }), n.DistanceGrid = function(t) {
                    this._cellSize = t, this._sqCellSize = t * t, this._grid = {}, this._objectPoint = {}
                }, n.DistanceGrid.prototype = {
                    addObject: function(t, e) {
                        var i = this._getCoord(e.x),
                            s = this._getCoord(e.y),
                            r = this._grid,
                            o = r[s] = r[s] || {},
                            a = o[i] = o[i] || [],
                            h = n.Util.stamp(t);
                        this._objectPoint[h] = e, a.push(t)
                    },
                    updateObject: function(t, e) {
                        this.removeObject(t), this.addObject(t, e)
                    },
                    removeObject: function(t, e) {
                        var i, s, r = this._getCoord(e.x),
                            o = this._getCoord(e.y),
                            a = this._grid,
                            h = a[o] = a[o] || {},
                            _ = h[r] = h[r] || [];
                        for (delete this._objectPoint[n.Util.stamp(t)], i = 0, s = _.length; s > i; i++)
                            if (_[i] === t) return _.splice(i, 1), 1 === s && delete h[r], !0
                    },
                    eachObject: function(t, e) {
                        var i, n, s, r, o, a, h, _ = this._grid;
                        for (i in _) {
                            o = _[i];
                            for (n in o)
                                for (a = o[n], s = 0, r = a.length; r > s; s++) h = t.call(e, a[s]), h && (s--, r--)
                        }
                    },
                    getNearObject: function(t) {
                        var e, i, s, r, o, a, h, _, u = this._getCoord(t.x),
                            l = this._getCoord(t.y),
                            d = this._objectPoint,
                            p = this._sqCellSize,
                            c = null;
                        for (e = l - 1; l + 1 >= e; e++)
                            if (r = this._grid[e])
                                for (i = u - 1; u + 1 >= i; i++)
                                    if (o = r[i])
                                        for (s = 0, a = o.length; a > s; s++) h = o[s], _ = this._sqDist(d[n.Util.stamp(h)], t), p > _ && (p = _, c = h);
                        return c
                    },
                    _getCoord: function(t) {
                        return Math.floor(t / this._cellSize)
                    },
                    _sqDist: function(t, e) {
                        var i = e.x - t.x,
                            n = e.y - t.y;
                        return i * i + n * n
                    }
                },
                function() {
                    n.QuickHull = {
                        getDistant: function(t, e) {
                            var i = e[1].lat - e[0].lat,
                                n = e[0].lng - e[1].lng;
                            return n * (t.lat - e[0].lat) + i * (t.lng - e[0].lng)
                        },
                        findMostDistantPointFromBaseLine: function(t, e) {
                            var i, n, s, r = 0,
                                o = null,
                                a = [];
                            for (i = e.length - 1; i >= 0; i--) n = e[i], s = this.getDistant(n, t), s > 0 && (a.push(n), s > r && (r = s, o = n));
                            return {
                                maxPoint: o,
                                newPoints: a
                            }
                        },
                        buildConvexHull: function(t, e) {
                            var i = [],
                                n = this.findMostDistantPointFromBaseLine(t, e);
                            return n.maxPoint ? (i = i.concat(this.buildConvexHull([t[0], n.maxPoint], n.newPoints)), i = i.concat(this.buildConvexHull([n.maxPoint, t[1]], n.newPoints))) : [t[0]]
                        },
                        getConvexHull: function(t) {
                            var e, i = !1,
                                n = !1,
                                s = null,
                                r = null;
                            for (e = t.length - 1; e >= 0; e--) {
                                var o = t[e];
                                (i === !1 || o.lat > i) && (s = o, i = o.lat), (n === !1 || o.lat < n) && (r = o, n = o.lat)
                            }
                            var a = [].concat(this.buildConvexHull([r, s], t), this.buildConvexHull([s, r], t));
                            return a
                        }
                    }
                }(), n.MarkerCluster.include({
                    getConvexHull: function() {
                        var t, e, i = this.getAllChildMarkers(),
                            s = [];
                        for (e = i.length - 1; e >= 0; e--) t = i[e].getLatLng(), s.push(t);
                        return n.QuickHull.getConvexHull(s)
                    }
                }), n.MarkerCluster.include({
                    _2PI: 2 * Math.PI,
                    _circleFootSeparation: 25,
                    _circleStartAngle: Math.PI / 6,
                    _spiralFootSeparation: 28,
                    _spiralLengthStart: 11,
                    _spiralLengthFactor: 5,
                    _circleSpiralSwitchover: 9,
                    spiderfy: function() {
                        if (this._group._spiderfied !== this && !this._group._inZoomAnimation) {
                            var t, e = this.getAllChildMarkers(),
                                i = this._group,
                                n = i._map,
                                s = n.latLngToLayerPoint(this._latlng);
                            this._group._unspiderfy(), this._group._spiderfied = this, e.length >= this._circleSpiralSwitchover ? t = this._generatePointsSpiral(e.length, s) : (s.y += 10, t = this._generatePointsCircle(e.length, s)), this._animationSpiderfy(e, t)
                        }
                    },
                    unspiderfy: function(t) {
                        this._group._inZoomAnimation || (this._animationUnspiderfy(t), this._group._spiderfied = null)
                    },
                    _generatePointsCircle: function(t, e) {
                        var i, s, r = this._group.options.spiderfyDistanceMultiplier * this._circleFootSeparation * (2 + t),
                            o = r / this._2PI,
                            a = this._2PI / t,
                            h = [];
                        for (h.length = t, i = t - 1; i >= 0; i--) s = this._circleStartAngle + i * a, h[i] = new n.Point(e.x + o * Math.cos(s), e.y + o * Math.sin(s))._round();
                        return h
                    },
                    _generatePointsSpiral: function(t, e) {
                        var i, s = this._group.options.spiderfyDistanceMultiplier * this._spiralLengthStart,
                            r = this._group.options.spiderfyDistanceMultiplier * this._spiralFootSeparation,
                            o = this._group.options.spiderfyDistanceMultiplier * this._spiralLengthFactor,
                            a = 0,
                            h = [];
                        for (h.length = t, i = t - 1; i >= 0; i--) a += r / s + 5e-4 * i, h[i] = new n.Point(e.x + s * Math.cos(a), e.y + s * Math.sin(a))._round(), s += this._2PI * o / a;
                        return h
                    },
                    _noanimationUnspiderfy: function() {
                        var t, e, i = this._group,
                            n = i._map,
                            s = i._featureGroup,
                            r = this.getAllChildMarkers();
                        for (this.setOpacity(1), e = r.length - 1; e >= 0; e--) t = r[e], s.removeLayer(t), t._preSpiderfyLatlng && (t.setLatLng(t._preSpiderfyLatlng), delete t._preSpiderfyLatlng), t.setZIndexOffset && t.setZIndexOffset(0), t._spiderLeg && (n.removeLayer(t._spiderLeg), delete t._spiderLeg);
                        i._spiderfied = null
                    }
                }), n.MarkerCluster.include(n.DomUtil.TRANSITION ? {
                    SVG_ANIMATION: function() {
                        return e.createElementNS("http://www.w3.org/2000/svg", "animate").toString().indexOf("SVGAnimate") > -1
                    }(),
                    _animationSpiderfy: function(t, i) {
                        var s, r, o, a, h = this,
                            _ = this._group,
                            u = _._map,
                            l = _._featureGroup,
                            d = u.latLngToLayerPoint(this._latlng);
                        for (s = t.length - 1; s >= 0; s--) r = t[s], r.setOpacity ? (r.setZIndexOffset(1e6), r.setOpacity(0), l.addLayer(r), r._setPos(d)) : l.addLayer(r);
                        _._forceLayout(), _._animationStart();
                        var p = n.Path.SVG ? 0 : .3,
                            c = n.Path.SVG_NS;
                        for (s = t.length - 1; s >= 0; s--)
                            if (a = u.layerPointToLatLng(i[s]), r = t[s], r._preSpiderfyLatlng = r._latlng, r.setLatLng(a), r.setOpacity && r.setOpacity(1), o = new n.Polyline([h._latlng, a], {
                                    weight: 1.5,
                                    color: "#222",
                                    opacity: p
                                }), u.addLayer(o), r._spiderLeg = o, n.Path.SVG && this.SVG_ANIMATION) {
                                var f = o._path.getTotalLength();
                                o._path.setAttribute("stroke-dasharray", f + "," + f);
                                var m = e.createElementNS(c, "animate");
                                m.setAttribute("attributeName", "stroke-dashoffset"), m.setAttribute("begin", "indefinite"), m.setAttribute("from", f), m.setAttribute("to", 0), m.setAttribute("dur", .25), o._path.appendChild(m), m.beginElement(), m = e.createElementNS(c, "animate"), m.setAttribute("attributeName", "stroke-opacity"), m.setAttribute("attributeName", "stroke-opacity"), m.setAttribute("begin", "indefinite"), m.setAttribute("from", 0), m.setAttribute("to", .5), m.setAttribute("dur", .25), o._path.appendChild(m), m.beginElement()
                            }
                        if (h.setOpacity(.3), n.Path.SVG)
                            for (this._group._forceLayout(), s = t.length - 1; s >= 0; s--) r = t[s]._spiderLeg, r.options.opacity = .5, r._path.setAttribute("stroke-opacity", .5);
                        setTimeout(function() {
                            _._animationEnd(), _.fire("spiderfied")
                        }, 200)
                    },
                    _animationUnspiderfy: function(t) {
                        var e, i, s, r = this._group,
                            o = r._map,
                            a = r._featureGroup,
                            h = t ? o._latLngToNewLayerPoint(this._latlng, t.zoom, t.center) : o.latLngToLayerPoint(this._latlng),
                            _ = this.getAllChildMarkers(),
                            u = n.Path.SVG && this.SVG_ANIMATION;
                        for (r._animationStart(), this.setOpacity(1), i = _.length - 1; i >= 0; i--) e = _[i], e._preSpiderfyLatlng && (e.setLatLng(e._preSpiderfyLatlng), delete e._preSpiderfyLatlng, e.setOpacity ? (e._setPos(h), e.setOpacity(0)) : a.removeLayer(e), u && (s = e._spiderLeg._path.childNodes[0], s.setAttribute("to", s.getAttribute("from")), s.setAttribute("from", 0), s.beginElement(), s = e._spiderLeg._path.childNodes[1], s.setAttribute("from", .5), s.setAttribute("to", 0), s.setAttribute("stroke-opacity", 0), s.beginElement(), e._spiderLeg._path.setAttribute("stroke-opacity", 0)));
                        setTimeout(function() {
                            var t = 0;
                            for (i = _.length - 1; i >= 0; i--) e = _[i], e._spiderLeg && t++;
                            for (i = _.length - 1; i >= 0; i--) e = _[i], e._spiderLeg && (e.setOpacity && (e.setOpacity(1), e.setZIndexOffset(0)), t > 1 && a.removeLayer(e), o.removeLayer(e._spiderLeg), delete e._spiderLeg);
                            r._animationEnd()
                        }, 200)
                    }
                } : {
                    _animationSpiderfy: function(t, e) {
                        var i, s, r, o, a = this._group,
                            h = a._map,
                            _ = a._featureGroup;
                        for (i = t.length - 1; i >= 0; i--) o = h.layerPointToLatLng(e[i]), s = t[i], s._preSpiderfyLatlng = s._latlng, s.setLatLng(o), s.setZIndexOffset && s.setZIndexOffset(1e6), _.addLayer(s), r = new n.Polyline([this._latlng, o], {
                            weight: 1.5,
                            color: "#222"
                        }), h.addLayer(r), s._spiderLeg = r;
                        this.setOpacity(.3), a.fire("spiderfied")
                    },
                    _animationUnspiderfy: function() {
                        this._noanimationUnspiderfy()
                    }
                }), n.MarkerClusterGroup.include({
                    _spiderfied: null,
                    _spiderfierOnAdd: function() {
                        this._map.on("click", this._unspiderfyWrapper, this), this._map.options.zoomAnimation && this._map.on("zoomstart", this._unspiderfyZoomStart, this), this._map.on("zoomend", this._noanimationUnspiderfy, this), n.Path.SVG && !n.Browser.touch && this._map._initPathRoot()
                    },
                    _spiderfierOnRemove: function() {
                        this._map.off("click", this._unspiderfyWrapper, this), this._map.off("zoomstart", this._unspiderfyZoomStart, this), this._map.off("zoomanim", this._unspiderfyZoomAnim, this), this._unspiderfy()
                    },
                    _unspiderfyZoomStart: function() {
                        this._map && this._map.on("zoomanim", this._unspiderfyZoomAnim, this)
                    },
                    _unspiderfyZoomAnim: function(t) {
                        n.DomUtil.hasClass(this._map._mapPane, "leaflet-touching") || (this._map.off("zoomanim", this._unspiderfyZoomAnim, this), this._unspiderfy(t))
                    },
                    _unspiderfyWrapper: function() {
                        this._unspiderfy()
                    },
                    _unspiderfy: function(t) {
                        this._spiderfied && this._spiderfied.unspiderfy(t)
                    },
                    _noanimationUnspiderfy: function() {
                        this._spiderfied && this._spiderfied._noanimationUnspiderfy()
                    },
                    _unspiderfyLayer: function(t) {
                        t._spiderLeg && (this._featureGroup.removeLayer(t), t.setOpacity(1), t.setZIndexOffset(0), this._map.removeLayer(t._spiderLeg), delete t._spiderLeg)
                    }
                })
        }(i, e)
    }(), SM.currentModule = null
}, "", {
    requires: ["leaflet"]
});
YUI.add("leaflet", function(t) {
    SM.currentModule = "leaflet";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        /*!
        Leaflet.js
        Copyright (c) 2010-2013, Vladimir Agafonkin
        Copyright (c) 2010-2011, CloudMade
        All rights reserved.

        https://github.com/Leaflet/Leaflet/blob/master/LICENSE
        */
        var e = t.config.doc,
            i = t.config.win;
        ! function(t, e, i) {
            var n = t.L,
                o = {};
            o.version = "0.7.7", "object" == typeof module && "object" == typeof module.exports ? module.exports = o : "function" == typeof define && define.amd && define(o), o.noConflict = function() {
                    return t.L = n, this
                }, t.L = o, o.Util = {
                    extend: function(t) {
                        var e, i, n, o, s = Array.prototype.slice.call(arguments, 1);
                        for (i = 0, n = s.length; n > i; i++) {
                            o = s[i] || {};
                            for (e in o) o.hasOwnProperty(e) && (t[e] = o[e])
                        }
                        return t
                    },
                    bind: function(t, e) {
                        var i = arguments.length > 2 ? Array.prototype.slice.call(arguments, 2) : null;
                        return function() {
                            return t.apply(e, i || arguments)
                        }
                    },
                    stamp: function() {
                        var t = 0,
                            e = "_leaflet_id";
                        return function(i) {
                            return i[e] = i[e] || ++t, i[e]
                        }
                    }(),
                    invokeEach: function(t, e, i) {
                        var n, o;
                        if ("object" == typeof t) {
                            o = Array.prototype.slice.call(arguments, 3);
                            for (n in t) e.apply(i, [n, t[n]].concat(o));
                            return !0
                        }
                        return !1
                    },
                    limitExecByInterval: function(t, e, i) {
                        var n, o;
                        return function s() {
                            var a = arguments;
                            return n ? void(o = !0) : (n = !0, setTimeout(function() {
                                n = !1, o && (s.apply(i, a), o = !1)
                            }, e), void t.apply(i, a))
                        }
                    },
                    falseFn: function() {
                        return !1
                    },
                    formatNum: function(t, e) {
                        var i = Math.pow(10, e || 5);
                        return Math.round(t * i) / i
                    },
                    trim: function(t) {
                        return t.trim ? t.trim() : t.replace(/^\s+|\s+$/g, "")
                    },
                    splitWords: function(t) {
                        return o.Util.trim(t).split(/\s+/)
                    },
                    setOptions: function(t, e) {
                        return t.options = o.extend({}, t.options, e), t.options
                    },
                    getParamString: function(t, e, i) {
                        var n = [];
                        for (var o in t) n.push(encodeURIComponent(i ? o.toUpperCase() : o) + "=" + encodeURIComponent(t[o]));
                        return (e && -1 !== e.indexOf("?") ? "&" : "?") + n.join("&")
                    },
                    template: function(t, e) {
                        return t.replace(/\{ *([\w_]+) *\}/g, function(t, n) {
                            var o = e[n];
                            if (o === i) throw new Error("No value provided for variable " + t);
                            return "function" == typeof o && (o = o(e)), o
                        })
                    },
                    isArray: Array.isArray || function(t) {
                        return "[object Array]" === Object.prototype.toString.call(t)
                    },
                    emptyImageUrl: "data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="
                },
                function() {
                    function e(e) {
                        var i, n, o = ["webkit", "moz", "o", "ms"];
                        for (i = 0; i < o.length && !n; i++) n = t[o[i] + e];
                        return n
                    }

                    function i(e) {
                        var i = +new Date,
                            o = Math.max(0, 16 - (i - n));
                        return n = i + o, t.setTimeout(e, o)
                    }
                    var n = 0,
                        s = t.requestAnimationFrame || e("RequestAnimationFrame") || i,
                        a = t.cancelAnimationFrame || e("CancelAnimationFrame") || e("CancelRequestAnimationFrame") || function(e) {
                            t.clearTimeout(e)
                        };
                    o.Util.requestAnimFrame = function(e, n, a, r) {
                        return e = o.bind(e, n), a && s === i ? void e() : s.call(t, e, r)
                    }, o.Util.cancelAnimFrame = function(e) {
                        e && a.call(t, e)
                    }
                }(), o.extend = o.Util.extend, o.bind = o.Util.bind, o.stamp = o.Util.stamp, o.setOptions = o.Util.setOptions, o.Class = function() {}, o.Class.extend = function(t) {
                    var e = function() {
                            this.initialize && this.initialize.apply(this, arguments), this._initHooks && this.callInitHooks()
                        },
                        i = function() {};
                    i.prototype = this.prototype;
                    var n = new i;
                    n.constructor = e, e.prototype = n;
                    for (var s in this) this.hasOwnProperty(s) && "prototype" !== s && (e[s] = this[s]);
                    t.statics && (o.extend(e, t.statics), delete t.statics), t.includes && (o.Util.extend.apply(null, [n].concat(t.includes)), delete t.includes), t.options && n.options && (t.options = o.extend({}, n.options, t.options)), o.extend(n, t), n._initHooks = [];
                    var a = this;
                    return e.__super__ = a.prototype, n.callInitHooks = function() {
                        if (!this._initHooksCalled) {
                            a.prototype.callInitHooks && a.prototype.callInitHooks.call(this), this._initHooksCalled = !0;
                            for (var t = 0, e = n._initHooks.length; e > t; t++) n._initHooks[t].call(this)
                        }
                    }, e
                }, o.Class.include = function(t) {
                    o.extend(this.prototype, t)
                }, o.Class.mergeOptions = function(t) {
                    o.extend(this.prototype.options, t)
                }, o.Class.addInitHook = function(t) {
                    var e = Array.prototype.slice.call(arguments, 1),
                        i = "function" == typeof t ? t : function() {
                            this[t].apply(this, e)
                        };
                    this.prototype._initHooks = this.prototype._initHooks || [], this.prototype._initHooks.push(i)
                };
            var s = "_leaflet_events";
            o.Mixin = {}, o.Mixin.Events = {
                    addEventListener: function(t, e, i) {
                        if (o.Util.invokeEach(t, this.addEventListener, this, e, i)) return this;
                        var n, a, r, h, l, u, c, d = this[s] = this[s] || {},
                            p = i && i !== this && o.stamp(i);
                        for (t = o.Util.splitWords(t), n = 0, a = t.length; a > n; n++) r = {
                            action: e,
                            context: i || this
                        }, h = t[n], p ? (l = h + "_idx", u = l + "_len", c = d[l] = d[l] || {}, c[p] || (c[p] = [], d[u] = (d[u] || 0) + 1), c[p].push(r)) : (d[h] = d[h] || [], d[h].push(r));
                        return this
                    },
                    hasEventListeners: function(t) {
                        var e = this[s];
                        return !!e && (t in e && e[t].length > 0 || t + "_idx" in e && e[t + "_idx_len"] > 0)
                    },
                    removeEventListener: function(t, e, i) {
                        if (!this[s]) return this;
                        if (!t) return this.clearAllEventListeners();
                        if (o.Util.invokeEach(t, this.removeEventListener, this, e, i)) return this;
                        var n, a, r, h, l, u, c, d, p, _ = this[s],
                            m = i && i !== this && o.stamp(i);
                        for (t = o.Util.splitWords(t), n = 0, a = t.length; a > n; n++)
                            if (r = t[n], u = r + "_idx", c = u + "_len", d = _[u], e) {
                                if (h = m && d ? d[m] : _[r]) {
                                    for (l = h.length - 1; l >= 0; l--) h[l].action !== e || i && h[l].context !== i || (p = h.splice(l, 1), p[0].action = o.Util.falseFn);
                                    i && d && 0 === h.length && (delete d[m], _[c]--)
                                }
                            } else delete _[r], delete _[u], delete _[c];
                        return this
                    },
                    clearAllEventListeners: function() {
                        return delete this[s], this
                    },
                    fireEvent: function(t, e) {
                        if (!this.hasEventListeners(t)) return this;
                        var i, n, a, r, h, l = o.Util.extend({}, e, {
                                type: t,
                                target: this
                            }),
                            u = this[s];
                        if (u[t])
                            for (i = u[t].slice(), n = 0, a = i.length; a > n; n++) i[n].action.call(i[n].context, l);
                        r = u[t + "_idx"];
                        for (h in r)
                            if (i = r[h].slice())
                                for (n = 0, a = i.length; a > n; n++) i[n].action.call(i[n].context, l);
                        return this
                    },
                    addOneTimeEventListener: function(t, e, i) {
                        if (o.Util.invokeEach(t, this.addOneTimeEventListener, this, e, i)) return this;
                        var n = o.bind(function() {
                            this.removeEventListener(t, e, i).removeEventListener(t, n, i)
                        }, this);
                        return this.addEventListener(t, e, i).addEventListener(t, n, i)
                    }
                }, o.Mixin.Events.on = o.Mixin.Events.addEventListener, o.Mixin.Events.off = o.Mixin.Events.removeEventListener, o.Mixin.Events.once = o.Mixin.Events.addOneTimeEventListener, o.Mixin.Events.fire = o.Mixin.Events.fireEvent,
                function() {
                    var n = "ActiveXObject" in t,
                        s = n && !e.addEventListener,
                        a = navigator.userAgent.toLowerCase(),
                        r = -1 !== a.indexOf("webkit"),
                        h = -1 !== a.indexOf("chrome"),
                        l = -1 !== a.indexOf("phantom"),
                        u = -1 !== a.indexOf("android"),
                        c = -1 !== a.search("android [23]"),
                        d = -1 !== a.indexOf("gecko"),
                        p = typeof orientation != i + "",
                        _ = !t.PointerEvent && t.MSPointerEvent,
                        m = t.PointerEvent && t.navigator.pointerEnabled || _,
                        f = "devicePixelRatio" in t && t.devicePixelRatio > 1 || "matchMedia" in t && t.matchMedia("(min-resolution:144dpi)") && t.matchMedia("(min-resolution:144dpi)").matches,
                        g = e.documentElement,
                        v = n && "transition" in g.style,
                        y = "WebKitCSSMatrix" in t && "m11" in new t.WebKitCSSMatrix && !c,
                        P = "MozPerspective" in g.style,
                        L = "OTransition" in g.style,
                        x = !t.L_DISABLE_3D && (v || y || P || L) && !l,
                        w = !t.L_NO_TOUCH && !l && (m || "ontouchstart" in t || t.DocumentTouch && e instanceof t.DocumentTouch);
                    o.Browser = {
                        ie: n,
                        ielt9: s,
                        webkit: r,
                        gecko: d && !r && !t.opera && !n,
                        android: u,
                        android23: c,
                        chrome: h,
                        ie3d: v,
                        webkit3d: y,
                        gecko3d: P,
                        opera3d: L,
                        any3d: x,
                        mobile: p,
                        mobileWebkit: p && r,
                        mobileWebkit3d: p && y,
                        mobileOpera: p && t.opera,
                        touch: w,
                        msPointer: _,
                        pointer: m,
                        retina: f
                    }
                }(), o.Point = function(t, e, i) {
                    this.x = i ? Math.round(t) : t, this.y = i ? Math.round(e) : e
                }, o.Point.prototype = {
                    clone: function() {
                        return new o.Point(this.x, this.y)
                    },
                    add: function(t) {
                        return this.clone()._add(o.point(t))
                    },
                    _add: function(t) {
                        return this.x += t.x, this.y += t.y, this
                    },
                    subtract: function(t) {
                        return this.clone()._subtract(o.point(t))
                    },
                    _subtract: function(t) {
                        return this.x -= t.x, this.y -= t.y, this
                    },
                    divideBy: function(t) {
                        return this.clone()._divideBy(t)
                    },
                    _divideBy: function(t) {
                        return this.x /= t, this.y /= t, this
                    },
                    multiplyBy: function(t) {
                        return this.clone()._multiplyBy(t)
                    },
                    _multiplyBy: function(t) {
                        return this.x *= t, this.y *= t, this
                    },
                    round: function() {
                        return this.clone()._round()
                    },
                    _round: function() {
                        return this.x = Math.round(this.x), this.y = Math.round(this.y), this
                    },
                    floor: function() {
                        return this.clone()._floor()
                    },
                    _floor: function() {
                        return this.x = Math.floor(this.x), this.y = Math.floor(this.y), this
                    },
                    distanceTo: function(t) {
                        t = o.point(t);
                        var e = t.x - this.x,
                            i = t.y - this.y;
                        return Math.sqrt(e * e + i * i)
                    },
                    equals: function(t) {
                        return t = o.point(t), t.x === this.x && t.y === this.y
                    },
                    contains: function(t) {
                        return t = o.point(t), Math.abs(t.x) <= Math.abs(this.x) && Math.abs(t.y) <= Math.abs(this.y)
                    },
                    toString: function() {
                        return "Point(" + o.Util.formatNum(this.x) + ", " + o.Util.formatNum(this.y) + ")"
                    }
                }, o.point = function(t, e, n) {
                    return t instanceof o.Point ? t : o.Util.isArray(t) ? new o.Point(t[0], t[1]) : t === i || null === t ? t : new o.Point(t, e, n)
                }, o.Bounds = function(t, e) {
                    if (t)
                        for (var i = e ? [t, e] : t, n = 0, o = i.length; o > n; n++) this.extend(i[n])
                }, o.Bounds.prototype = {
                    extend: function(t) {
                        return t = o.point(t), this.min || this.max ? (this.min.x = Math.min(t.x, this.min.x), this.max.x = Math.max(t.x, this.max.x), this.min.y = Math.min(t.y, this.min.y), this.max.y = Math.max(t.y, this.max.y)) : (this.min = t.clone(), this.max = t.clone()), this
                    },
                    getCenter: function(t) {
                        return new o.Point((this.min.x + this.max.x) / 2, (this.min.y + this.max.y) / 2, t)
                    },
                    getBottomLeft: function() {
                        return new o.Point(this.min.x, this.max.y)
                    },
                    getTopRight: function() {
                        return new o.Point(this.max.x, this.min.y)
                    },
                    getSize: function() {
                        return this.max.subtract(this.min)
                    },
                    contains: function(t) {
                        var e, i;
                        return t = "number" == typeof t[0] || t instanceof o.Point ? o.point(t) : o.bounds(t), t instanceof o.Bounds ? (e = t.min, i = t.max) : e = i = t, e.x >= this.min.x && i.x <= this.max.x && e.y >= this.min.y && i.y <= this.max.y
                    },
                    intersects: function(t) {
                        t = o.bounds(t);
                        var e = this.min,
                            i = this.max,
                            n = t.min,
                            s = t.max,
                            a = s.x >= e.x && n.x <= i.x,
                            r = s.y >= e.y && n.y <= i.y;
                        return a && r
                    },
                    isValid: function() {
                        return !(!this.min || !this.max)
                    }
                }, o.bounds = function(t, e) {
                    return !t || t instanceof o.Bounds ? t : new o.Bounds(t, e)
                }, o.Transformation = function(t, e, i, n) {
                    this._a = t, this._b = e, this._c = i, this._d = n
                }, o.Transformation.prototype = {
                    transform: function(t, e) {
                        return this._transform(t.clone(), e)
                    },
                    _transform: function(t, e) {
                        return e = e || 1, t.x = e * (this._a * t.x + this._b), t.y = e * (this._c * t.y + this._d), t
                    },
                    untransform: function(t, e) {
                        return e = e || 1, new o.Point((t.x / e - this._b) / this._a, (t.y / e - this._d) / this._c)
                    }
                }, o.DomUtil = {
                    get: function(t) {
                        return "string" == typeof t ? e.getElementById(t) : t
                    },
                    getStyle: function(t, i) {
                        var n = t.style[i];
                        if (!n && t.currentStyle && (n = t.currentStyle[i]), (!n || "auto" === n) && e.defaultView) {
                            var o = e.defaultView.getComputedStyle(t, null);
                            n = o ? o[i] : null
                        }
                        return "auto" === n ? null : n
                    },
                    getViewportOffset: function(t) {
                        var i, n = 0,
                            s = 0,
                            a = t,
                            r = e.body,
                            h = e.documentElement;
                        do {
                            if (n += a.offsetTop || 0, s += a.offsetLeft || 0, n += parseInt(o.DomUtil.getStyle(a, "borderTopWidth"), 10) || 0, s += parseInt(o.DomUtil.getStyle(a, "borderLeftWidth"), 10) || 0, i = o.DomUtil.getStyle(a, "position"), a.offsetParent === r && "absolute" === i) break;
                            if ("fixed" === i) {
                                n += r.scrollTop || h.scrollTop || 0, s += r.scrollLeft || h.scrollLeft || 0;
                                break
                            }
                            if ("relative" === i && !a.offsetLeft) {
                                var l = o.DomUtil.getStyle(a, "width"),
                                    u = o.DomUtil.getStyle(a, "max-width"),
                                    c = a.getBoundingClientRect();
                                ("none" !== l || "none" !== u) && (s += c.left + a.clientLeft), n += c.top + (r.scrollTop || h.scrollTop || 0);
                                break
                            }
                            a = a.offsetParent
                        } while (a);
                        a = t;
                        do {
                            if (a === r) break;
                            n -= a.scrollTop || 0, s -= a.scrollLeft || 0, a = a.parentNode
                        } while (a);
                        return new o.Point(s, n)
                    },
                    documentIsLtr: function() {
                        return o.DomUtil._docIsLtrCached || (o.DomUtil._docIsLtrCached = !0, o.DomUtil._docIsLtr = "ltr" === o.DomUtil.getStyle(e.body, "direction")), o.DomUtil._docIsLtr
                    },
                    create: function(t, i, n) {
                        var o = e.createElement(t);
                        return o.className = i, n && n.appendChild(o), o
                    },
                    hasClass: function(t, e) {
                        if (t.classList !== i) return t.classList.contains(e);
                        var n = o.DomUtil._getClass(t);
                        return n.length > 0 && new RegExp("(^|\\s)" + e + "(\\s|$)").test(n)
                    },
                    addClass: function(t, e) {
                        if (t.classList !== i)
                            for (var n = o.Util.splitWords(e), s = 0, a = n.length; a > s; s++) t.classList.add(n[s]);
                        else if (!o.DomUtil.hasClass(t, e)) {
                            var r = o.DomUtil._getClass(t);
                            o.DomUtil._setClass(t, (r ? r + " " : "") + e)
                        }
                    },
                    removeClass: function(t, e) {
                        t.classList !== i ? t.classList.remove(e) : o.DomUtil._setClass(t, o.Util.trim((" " + o.DomUtil._getClass(t) + " ").replace(" " + e + " ", " ")))
                    },
                    _setClass: function(t, e) {
                        t.className.baseVal === i ? t.className = e : t.className.baseVal = e
                    },
                    _getClass: function(t) {
                        return t.className.baseVal === i ? t.className : t.className.baseVal
                    },
                    setOpacity: function(t, e) {
                        if ("opacity" in t.style) t.style.opacity = e;
                        else if ("filter" in t.style) {
                            var i = !1,
                                n = "DXImageTransform.Microsoft.Alpha";
                            try {
                                i = t.filters.item(n)
                            } catch (o) {
                                if (1 === e) return
                            }
                            e = Math.round(100 * e), i ? (i.Enabled = 100 !== e, i.Opacity = e) : t.style.filter += " progid:" + n + "(opacity=" + e + ")"
                        }
                    },
                    testProp: function(t) {
                        for (var i = e.documentElement.style, n = 0; n < t.length; n++)
                            if (t[n] in i) return t[n];
                        return !1
                    },
                    getTranslateString: function(t) {
                        var e = o.Browser.webkit3d,
                            i = "translate" + (e ? "3d" : "") + "(",
                            n = (e ? ",0" : "") + ")";
                        return i + t.x + "px," + t.y + "px" + n
                    },
                    getScaleString: function(t, e) {
                        var i = o.DomUtil.getTranslateString(e.add(e.multiplyBy(-1 * t))),
                            n = " scale(" + t + ") ";
                        return i + n
                    },
                    setPosition: function(t, e, i) {
                        t._leaflet_pos = e, !i && o.Browser.any3d ? t.style[o.DomUtil.TRANSFORM] = o.DomUtil.getTranslateString(e) : (t.style.left = e.x + "px", t.style.top = e.y + "px")
                    },
                    getPosition: function(t) {
                        return t._leaflet_pos
                    }
                }, o.DomUtil.TRANSFORM = o.DomUtil.testProp(["transform", "WebkitTransform", "OTransform", "MozTransform", "msTransform"]), o.DomUtil.TRANSITION = o.DomUtil.testProp(["webkitTransition", "transition", "OTransition", "MozTransition", "msTransition"]), o.DomUtil.TRANSITION_END = "webkitTransition" === o.DomUtil.TRANSITION || "OTransition" === o.DomUtil.TRANSITION ? o.DomUtil.TRANSITION + "End" : "transitionend",
                function() {
                    if ("onselectstart" in e) o.extend(o.DomUtil, {
                        disableTextSelection: function() {
                            o.DomEvent.on(t, "selectstart", o.DomEvent.preventDefault)
                        },
                        enableTextSelection: function() {
                            o.DomEvent.off(t, "selectstart", o.DomEvent.preventDefault)
                        }
                    });
                    else {
                        var i = o.DomUtil.testProp(["userSelect", "WebkitUserSelect", "OUserSelect", "MozUserSelect", "msUserSelect"]);
                        o.extend(o.DomUtil, {
                            disableTextSelection: function() {
                                if (i) {
                                    var t = e.documentElement.style;
                                    this._userSelect = t[i], t[i] = "none"
                                }
                            },
                            enableTextSelection: function() {
                                i && (e.documentElement.style[i] = this._userSelect, delete this._userSelect)
                            }
                        })
                    }
                    o.extend(o.DomUtil, {
                        disableImageDrag: function() {
                            o.DomEvent.on(t, "dragstart", o.DomEvent.preventDefault)
                        },
                        enableImageDrag: function() {
                            o.DomEvent.off(t, "dragstart", o.DomEvent.preventDefault)
                        }
                    })
                }(), o.LatLng = function(t, e, n) {
                    if (t = parseFloat(t), e = parseFloat(e), isNaN(t) || isNaN(e)) throw new Error("Invalid LatLng object: (" + t + ", " + e + ")");
                    this.lat = t, this.lng = e, n !== i && (this.alt = parseFloat(n))
                }, o.extend(o.LatLng, {
                    DEG_TO_RAD: Math.PI / 180,
                    RAD_TO_DEG: 180 / Math.PI,
                    MAX_MARGIN: 1e-9
                }), o.LatLng.prototype = {
                    equals: function(t) {
                        if (!t) return !1;
                        t = o.latLng(t);
                        var e = Math.max(Math.abs(this.lat - t.lat), Math.abs(this.lng - t.lng));
                        return e <= o.LatLng.MAX_MARGIN
                    },
                    toString: function(t) {
                        return "LatLng(" + o.Util.formatNum(this.lat, t) + ", " + o.Util.formatNum(this.lng, t) + ")"
                    },
                    distanceTo: function(t) {
                        t = o.latLng(t);
                        var e = 6378137,
                            i = o.LatLng.DEG_TO_RAD,
                            n = (t.lat - this.lat) * i,
                            s = (t.lng - this.lng) * i,
                            a = this.lat * i,
                            r = t.lat * i,
                            h = Math.sin(n / 2),
                            l = Math.sin(s / 2),
                            u = h * h + l * l * Math.cos(a) * Math.cos(r);
                        return 2 * e * Math.atan2(Math.sqrt(u), Math.sqrt(1 - u))
                    },
                    wrap: function(t, e) {
                        var i = this.lng;
                        return t = t || -180, e = e || 180, i = (i + e) % (e - t) + (t > i || i === e ? e : t), new o.LatLng(this.lat, i)
                    }
                }, o.latLng = function(t, e) {
                    return t instanceof o.LatLng ? t : o.Util.isArray(t) ? "number" == typeof t[0] || "string" == typeof t[0] ? new o.LatLng(t[0], t[1], t[2]) : null : t === i || null === t ? t : "object" == typeof t && "lat" in t ? new o.LatLng(t.lat, "lng" in t ? t.lng : t.lon) : e === i ? null : new o.LatLng(t, e)
                }, o.LatLngBounds = function(t, e) {
                    if (t)
                        for (var i = e ? [t, e] : t, n = 0, o = i.length; o > n; n++) this.extend(i[n])
                }, o.LatLngBounds.prototype = {
                    extend: function(t) {
                        if (!t) return this;
                        var e = o.latLng(t);
                        return t = null !== e ? e : o.latLngBounds(t), t instanceof o.LatLng ? this._southWest || this._northEast ? (this._southWest.lat = Math.min(t.lat, this._southWest.lat), this._southWest.lng = Math.min(t.lng, this._southWest.lng), this._northEast.lat = Math.max(t.lat, this._northEast.lat), this._northEast.lng = Math.max(t.lng, this._northEast.lng)) : (this._southWest = new o.LatLng(t.lat, t.lng), this._northEast = new o.LatLng(t.lat, t.lng)) : t instanceof o.LatLngBounds && (this.extend(t._southWest), this.extend(t._northEast)), this
                    },
                    pad: function(t) {
                        var e = this._southWest,
                            i = this._northEast,
                            n = Math.abs(e.lat - i.lat) * t,
                            s = Math.abs(e.lng - i.lng) * t;
                        return new o.LatLngBounds(new o.LatLng(e.lat - n, e.lng - s), new o.LatLng(i.lat + n, i.lng + s))
                    },
                    getCenter: function() {
                        return new o.LatLng((this._southWest.lat + this._northEast.lat) / 2, (this._southWest.lng + this._northEast.lng) / 2)
                    },
                    getSouthWest: function() {
                        return this._southWest
                    },
                    getNorthEast: function() {
                        return this._northEast
                    },
                    getNorthWest: function() {
                        return new o.LatLng(this.getNorth(), this.getWest())
                    },
                    getSouthEast: function() {
                        return new o.LatLng(this.getSouth(), this.getEast())
                    },
                    getWest: function() {
                        return this._southWest.lng
                    },
                    getSouth: function() {
                        return this._southWest.lat
                    },
                    getEast: function() {
                        return this._northEast.lng
                    },
                    getNorth: function() {
                        return this._northEast.lat
                    },
                    contains: function(t) {
                        t = "number" == typeof t[0] || t instanceof o.LatLng ? o.latLng(t) : o.latLngBounds(t);
                        var e, i, n = this._southWest,
                            s = this._northEast;
                        return t instanceof o.LatLngBounds ? (e = t.getSouthWest(), i = t.getNorthEast()) : e = i = t, e.lat >= n.lat && i.lat <= s.lat && e.lng >= n.lng && i.lng <= s.lng
                    },
                    intersects: function(t) {
                        t = o.latLngBounds(t);
                        var e = this._southWest,
                            i = this._northEast,
                            n = t.getSouthWest(),
                            s = t.getNorthEast(),
                            a = s.lat >= e.lat && n.lat <= i.lat,
                            r = s.lng >= e.lng && n.lng <= i.lng;
                        return a && r
                    },
                    toBBoxString: function() {
                        return [this.getWest(), this.getSouth(), this.getEast(), this.getNorth()].join(",")
                    },
                    equals: function(t) {
                        return t ? (t = o.latLngBounds(t), this._southWest.equals(t.getSouthWest()) && this._northEast.equals(t.getNorthEast())) : !1
                    },
                    isValid: function() {
                        return !(!this._southWest || !this._northEast)
                    }
                }, o.latLngBounds = function(t, e) {
                    return !t || t instanceof o.LatLngBounds ? t : new o.LatLngBounds(t, e)
                }, o.Projection = {}, o.Projection.SphericalMercator = {
                    MAX_LATITUDE: 85.0511287798,
                    project: function(t) {
                        var e = o.LatLng.DEG_TO_RAD,
                            i = this.MAX_LATITUDE,
                            n = Math.max(Math.min(i, t.lat), -i),
                            s = t.lng * e,
                            a = n * e;
                        return a = Math.log(Math.tan(Math.PI / 4 + a / 2)), new o.Point(s, a)
                    },
                    unproject: function(t) {
                        var e = o.LatLng.RAD_TO_DEG,
                            i = t.x * e,
                            n = (2 * Math.atan(Math.exp(t.y)) - Math.PI / 2) * e;
                        return new o.LatLng(n, i)
                    }
                }, o.Projection.LonLat = {
                    project: function(t) {
                        return new o.Point(t.lng, t.lat)
                    },
                    unproject: function(t) {
                        return new o.LatLng(t.y, t.x)
                    }
                }, o.CRS = {
                    latLngToPoint: function(t, e) {
                        var i = this.projection.project(t),
                            n = this.scale(e);
                        return this.transformation._transform(i, n)
                    },
                    pointToLatLng: function(t, e) {
                        var i = this.scale(e),
                            n = this.transformation.untransform(t, i);
                        return this.projection.unproject(n)
                    },
                    project: function(t) {
                        return this.projection.project(t)
                    },
                    scale: function(t) {
                        return 256 * Math.pow(2, t)
                    },
                    getSize: function(t) {
                        var e = this.scale(t);
                        return o.point(e, e)
                    }
                }, o.CRS.Simple = o.extend({}, o.CRS, {
                    projection: o.Projection.LonLat,
                    transformation: new o.Transformation(1, 0, -1, 0),
                    scale: function(t) {
                        return Math.pow(2, t)
                    }
                }), o.CRS.EPSG3857 = o.extend({}, o.CRS, {
                    code: "EPSG:3857",
                    projection: o.Projection.SphericalMercator,
                    transformation: new o.Transformation(.5 / Math.PI, .5, -.5 / Math.PI, .5),
                    project: function(t) {
                        var e = this.projection.project(t),
                            i = 6378137;
                        return e.multiplyBy(i)
                    }
                }), o.CRS.EPSG900913 = o.extend({}, o.CRS.EPSG3857, {
                    code: "EPSG:900913"
                }), o.CRS.EPSG4326 = o.extend({}, o.CRS, {
                    code: "EPSG:4326",
                    projection: o.Projection.LonLat,
                    transformation: new o.Transformation(1 / 360, .5, -1 / 360, .5)
                }), o.Map = o.Class.extend({
                    includes: o.Mixin.Events,
                    options: {
                        crs: o.CRS.EPSG3857,
                        fadeAnimation: o.DomUtil.TRANSITION && !o.Browser.android23,
                        trackResize: !0,
                        markerZoomAnimation: o.DomUtil.TRANSITION && o.Browser.any3d
                    },
                    initialize: function(t, e) {
                        e = o.setOptions(this, e), this._initContainer(t), this._initLayout(), this._onResize = o.bind(this._onResize, this), this._initEvents(), e.maxBounds && this.setMaxBounds(e.maxBounds), e.center && e.zoom !== i && this.setView(o.latLng(e.center), e.zoom, {
                            reset: !0
                        }), this._handlers = [], this._layers = {}, this._zoomBoundLayers = {}, this._tileLayersNum = 0, this.callInitHooks(), this._addLayers(e.layers)
                    },
                    setView: function(t, e) {
                        return e = e === i ? this.getZoom() : e, this._resetView(o.latLng(t), this._limitZoom(e)), this
                    },
                    setZoom: function(t, e) {
                        return this._loaded ? this.setView(this.getCenter(), t, {
                            zoom: e
                        }) : (this._zoom = this._limitZoom(t), this)
                    },
                    zoomIn: function(t, e) {
                        return this.setZoom(this._zoom + (t || 1), e)
                    },
                    zoomOut: function(t, e) {
                        return this.setZoom(this._zoom - (t || 1), e)
                    },
                    setZoomAround: function(t, e, i) {
                        var n = this.getZoomScale(e),
                            s = this.getSize().divideBy(2),
                            a = t instanceof o.Point ? t : this.latLngToContainerPoint(t),
                            r = a.subtract(s).multiplyBy(1 - 1 / n),
                            h = this.containerPointToLatLng(s.add(r));
                        return this.setView(h, e, {
                            zoom: i
                        })
                    },
                    fitBounds: function(t, e) {
                        e = e || {}, t = t.getBounds ? t.getBounds() : o.latLngBounds(t);
                        var i = o.point(e.paddingTopLeft || e.padding || [0, 0]),
                            n = o.point(e.paddingBottomRight || e.padding || [0, 0]),
                            s = this.getBoundsZoom(t, !1, i.add(n));
                        s = e.maxZoom ? Math.min(e.maxZoom, s) : s;
                        var a = n.subtract(i).divideBy(2),
                            r = this.project(t.getSouthWest(), s),
                            h = this.project(t.getNorthEast(), s),
                            l = this.unproject(r.add(h).divideBy(2).add(a), s);
                        return this.setView(l, s, e)
                    },
                    fitWorld: function(t) {
                        return this.fitBounds([
                            [-90, -180],
                            [90, 180]
                        ], t)
                    },
                    panTo: function(t, e) {
                        return this.setView(t, this._zoom, {
                            pan: e
                        })
                    },
                    panBy: function(t) {
                        return this.fire("movestart"), this._rawPanBy(o.point(t)), this.fire("move"), this.fire("moveend")
                    },
                    setMaxBounds: function(t) {
                        return t = o.latLngBounds(t), this.options.maxBounds = t, t ? (this._loaded && this._panInsideMaxBounds(), this.on("moveend", this._panInsideMaxBounds, this)) : this.off("moveend", this._panInsideMaxBounds, this)
                    },
                    panInsideBounds: function(t, e) {
                        var i = this.getCenter(),
                            n = this._limitCenter(i, this._zoom, t);
                        return i.equals(n) ? this : this.panTo(n, e)
                    },
                    addLayer: function(t) {
                        var e = o.stamp(t);
                        return this._layers[e] ? this : (this._layers[e] = t, !t.options || isNaN(t.options.maxZoom) && isNaN(t.options.minZoom) || (this._zoomBoundLayers[e] = t, this._updateZoomLevels()), this.options.zoomAnimation && o.TileLayer && t instanceof o.TileLayer && (this._tileLayersNum++, this._tileLayersToLoad++, t.on("load", this._onTileLayerLoad, this)), this._loaded && this._layerAdd(t), this)
                    },
                    removeLayer: function(t) {
                        var e = o.stamp(t);
                        return this._layers[e] ? (this._loaded && t.onRemove(this), delete this._layers[e], this._loaded && this.fire("layerremove", {
                            layer: t
                        }), this._zoomBoundLayers[e] && (delete this._zoomBoundLayers[e], this._updateZoomLevels()), this.options.zoomAnimation && o.TileLayer && t instanceof o.TileLayer && (this._tileLayersNum--, this._tileLayersToLoad--, t.off("load", this._onTileLayerLoad, this)), this) : this
                    },
                    hasLayer: function(t) {
                        return t ? o.stamp(t) in this._layers : !1
                    },
                    eachLayer: function(t, e) {
                        for (var i in this._layers) t.call(e, this._layers[i]);
                        return this
                    },
                    invalidateSize: function(t) {
                        if (!this._loaded) return this;
                        t = o.extend({
                            animate: !1,
                            pan: !0
                        }, t === !0 ? {
                            animate: !0
                        } : t);
                        var e = this.getSize();
                        this._sizeChanged = !0, this._initialCenter = null;
                        var i = this.getSize(),
                            n = e.divideBy(2).round(),
                            s = i.divideBy(2).round(),
                            a = n.subtract(s);
                        return a.x || a.y ? (t.animate && t.pan ? this.panBy(a) : (t.pan && this._rawPanBy(a), this.fire("move"), t.debounceMoveend ? (clearTimeout(this._sizeTimer), this._sizeTimer = setTimeout(o.bind(this.fire, this, "moveend"), 200)) : this.fire("moveend")), this.fire("resize", {
                            oldSize: e,
                            newSize: i
                        })) : this
                    },
                    addHandler: function(t, e) {
                        if (!e) return this;
                        var i = this[t] = new e(this);
                        return this._handlers.push(i), this.options[t] && i.enable(), this
                    },
                    remove: function() {
                        this._loaded && this.fire("unload"), this._initEvents("off");
                        try {
                            delete this._container._leaflet
                        } catch (t) {
                            this._container._leaflet = i
                        }
                        return this._clearPanes(), this._clearControlPos && this._clearControlPos(), this._clearHandlers(), this
                    },
                    getCenter: function() {
                        return this._checkIfLoaded(), this._initialCenter && !this._moved() ? this._initialCenter : this.layerPointToLatLng(this._getCenterLayerPoint())
                    },
                    getZoom: function() {
                        return this._zoom
                    },
                    getBounds: function() {
                        var t = this.getPixelBounds(),
                            e = this.unproject(t.getBottomLeft()),
                            i = this.unproject(t.getTopRight());
                        return new o.LatLngBounds(e, i)
                    },
                    getMinZoom: function() {
                        return this.options.minZoom === i ? this._layersMinZoom === i ? 0 : this._layersMinZoom : this.options.minZoom
                    },
                    getMaxZoom: function() {
                        return this.options.maxZoom === i ? this._layersMaxZoom === i ? 1 / 0 : this._layersMaxZoom : this.options.maxZoom
                    },
                    getBoundsZoom: function(t, e, i) {
                        t = o.latLngBounds(t);
                        var n, s = this.getMinZoom() - (e ? 1 : 0),
                            a = this.getMaxZoom(),
                            r = this.getSize(),
                            h = t.getNorthWest(),
                            l = t.getSouthEast(),
                            u = !0;
                        i = o.point(i || [0, 0]);
                        do s++, n = this.project(l, s).subtract(this.project(h, s)).add(i), u = e ? n.x < r.x || n.y < r.y : r.contains(n); while (u && a >= s);
                        return u && e ? null : e ? s : s - 1
                    },
                    getSize: function() {
                        return (!this._size || this._sizeChanged) && (this._size = new o.Point(this._container.clientWidth, this._container.clientHeight), this._sizeChanged = !1), this._size.clone()
                    },
                    getPixelBounds: function() {
                        var t = this._getTopLeftPoint();
                        return new o.Bounds(t, t.add(this.getSize()))
                    },
                    getPixelOrigin: function() {
                        return this._checkIfLoaded(), this._initialTopLeftPoint
                    },
                    getPanes: function() {
                        return this._panes
                    },
                    getContainer: function() {
                        return this._container
                    },
                    getZoomScale: function(t) {
                        var e = this.options.crs;
                        return e.scale(t) / e.scale(this._zoom)
                    },
                    getScaleZoom: function(t) {
                        return this._zoom + Math.log(t) / Math.LN2
                    },
                    project: function(t, e) {
                        return e = e === i ? this._zoom : e, this.options.crs.latLngToPoint(o.latLng(t), e)
                    },
                    unproject: function(t, e) {
                        return e = e === i ? this._zoom : e, this.options.crs.pointToLatLng(o.point(t), e)
                    },
                    layerPointToLatLng: function(t) {
                        var e = o.point(t).add(this.getPixelOrigin());
                        return this.unproject(e)
                    },
                    latLngToLayerPoint: function(t) {
                        var e = this.project(o.latLng(t))._round();
                        return e._subtract(this.getPixelOrigin())
                    },
                    containerPointToLayerPoint: function(t) {
                        return o.point(t).subtract(this._getMapPanePos())
                    },
                    layerPointToContainerPoint: function(t) {
                        return o.point(t).add(this._getMapPanePos())
                    },
                    containerPointToLatLng: function(t) {
                        var e = this.containerPointToLayerPoint(o.point(t));
                        return this.layerPointToLatLng(e)
                    },
                    latLngToContainerPoint: function(t) {
                        return this.layerPointToContainerPoint(this.latLngToLayerPoint(o.latLng(t)))
                    },
                    mouseEventToContainerPoint: function(t) {
                        return o.DomEvent.getMousePosition(t, this._container)
                    },
                    mouseEventToLayerPoint: function(t) {
                        return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))
                    },
                    mouseEventToLatLng: function(t) {
                        return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))
                    },
                    _initContainer: function(t) {
                        var e = this._container = o.DomUtil.get(t);
                        if (!e) throw new Error("Map container not found.");
                        if (e._leaflet) throw new Error("Map container is already initialized.");
                        e._leaflet = !0
                    },
                    _initLayout: function() {
                        var t = this._container;
                        o.DomUtil.addClass(t, "leaflet-container" + (o.Browser.touch ? " leaflet-touch" : "") + (o.Browser.retina ? " leaflet-retina" : "") + (o.Browser.ielt9 ? " leaflet-oldie" : "") + (this.options.fadeAnimation ? " leaflet-fade-anim" : ""));
                        var e = o.DomUtil.getStyle(t, "position");
                        "absolute" !== e && "relative" !== e && "fixed" !== e && (t.style.position = "relative"), this._initPanes(), this._initControlPos && this._initControlPos()
                    },
                    _initPanes: function() {
                        var t = this._panes = {};
                        this._mapPane = t.mapPane = this._createPane("leaflet-map-pane", this._container), this._tilePane = t.tilePane = this._createPane("leaflet-tile-pane", this._mapPane), t.objectsPane = this._createPane("leaflet-objects-pane", this._mapPane), t.shadowPane = this._createPane("leaflet-shadow-pane"), t.overlayPane = this._createPane("leaflet-overlay-pane"), t.markerPane = this._createPane("leaflet-marker-pane"), t.popupPane = this._createPane("leaflet-popup-pane");
                        var e = " leaflet-zoom-hide";
                        this.options.markerZoomAnimation || (o.DomUtil.addClass(t.markerPane, e), o.DomUtil.addClass(t.shadowPane, e), o.DomUtil.addClass(t.popupPane, e))
                    },
                    _createPane: function(t, e) {
                        return o.DomUtil.create("div", t, e || this._panes.objectsPane)
                    },
                    _clearPanes: function() {
                        this._container.removeChild(this._mapPane)
                    },
                    _addLayers: function(t) {
                        t = t ? o.Util.isArray(t) ? t : [t] : [];
                        for (var e = 0, i = t.length; i > e; e++) this.addLayer(t[e])
                    },
                    _resetView: function(t, e, i, n) {
                        var s = this._zoom !== e;
                        n || (this.fire("movestart"), s && this.fire("zoomstart")), this._zoom = e, this._initialCenter = t, this._initialTopLeftPoint = this._getNewTopLeftPoint(t), i ? this._initialTopLeftPoint._add(this._getMapPanePos()) : o.DomUtil.setPosition(this._mapPane, new o.Point(0, 0)), this._tileLayersToLoad = this._tileLayersNum;
                        var a = !this._loaded;
                        this._loaded = !0, this.fire("viewreset", {
                            hard: !i
                        }), a && (this.fire("load"), this.eachLayer(this._layerAdd, this)), this.fire("move"), (s || n) && this.fire("zoomend"), this.fire("moveend", {
                            hard: !i
                        })
                    },
                    _rawPanBy: function(t) {
                        o.DomUtil.setPosition(this._mapPane, this._getMapPanePos().subtract(t))
                    },
                    _getZoomSpan: function() {
                        return this.getMaxZoom() - this.getMinZoom()
                    },
                    _updateZoomLevels: function() {
                        var t, e = 1 / 0,
                            n = -(1 / 0),
                            o = this._getZoomSpan();
                        for (t in this._zoomBoundLayers) {
                            var s = this._zoomBoundLayers[t];
                            isNaN(s.options.minZoom) || (e = Math.min(e, s.options.minZoom)), isNaN(s.options.maxZoom) || (n = Math.max(n, s.options.maxZoom))
                        }
                        t === i ? this._layersMaxZoom = this._layersMinZoom = i : (this._layersMaxZoom = n, this._layersMinZoom = e), o !== this._getZoomSpan() && this.fire("zoomlevelschange")
                    },
                    _panInsideMaxBounds: function() {
                        this.panInsideBounds(this.options.maxBounds)
                    },
                    _checkIfLoaded: function() {
                        if (!this._loaded) throw new Error("Set map center and zoom first.")
                    },
                    _initEvents: function(e) {
                        if (o.DomEvent) {
                            e = e || "on", o.DomEvent[e](this._container, "click", this._onMouseClick, this);
                            var i, n, s = ["dblclick", "mousedown", "mouseup", "mouseenter", "mouseleave", "mousemove", "contextmenu"];
                            for (i = 0, n = s.length; n > i; i++) o.DomEvent[e](this._container, s[i], this._fireMouseEvent, this);
                            this.options.trackResize && o.DomEvent[e](t, "resize", this._onResize, this)
                        }
                    },
                    _onResize: function() {
                        o.Util.cancelAnimFrame(this._resizeRequest), this._resizeRequest = o.Util.requestAnimFrame(function() {
                            this.invalidateSize({
                                debounceMoveend: !0
                            })
                        }, this, !1, this._container)
                    },
                    _onMouseClick: function(t) {
                        !this._loaded || !t._simulated && (this.dragging && this.dragging.moved() || this.boxZoom && this.boxZoom.moved()) || o.DomEvent._skipped(t) || (this.fire("preclick"), this._fireMouseEvent(t))
                    },
                    _fireMouseEvent: function(t) {
                        if (this._loaded && !o.DomEvent._skipped(t)) {
                            var e = t.type;
                            if (e = "mouseenter" === e ? "mouseover" : "mouseleave" === e ? "mouseout" : e, this.hasEventListeners(e)) {
                                "contextmenu" === e && o.DomEvent.preventDefault(t);
                                var i = this.mouseEventToContainerPoint(t),
                                    n = this.containerPointToLayerPoint(i),
                                    s = this.layerPointToLatLng(n);
                                this.fire(e, {
                                    latlng: s,
                                    layerPoint: n,
                                    containerPoint: i,
                                    originalEvent: t
                                })
                            }
                        }
                    },
                    _onTileLayerLoad: function() {
                        this._tileLayersToLoad--, this._tileLayersNum && !this._tileLayersToLoad && this.fire("tilelayersload")
                    },
                    _clearHandlers: function() {
                        for (var t = 0, e = this._handlers.length; e > t; t++) this._handlers[t].disable()
                    },
                    whenReady: function(t, e) {
                        return this._loaded ? t.call(e || this, this) : this.on("load", t, e), this
                    },
                    _layerAdd: function(t) {
                        t.onAdd(this), this.fire("layeradd", {
                            layer: t
                        })
                    },
                    _getMapPanePos: function() {
                        return o.DomUtil.getPosition(this._mapPane)
                    },
                    _moved: function() {
                        var t = this._getMapPanePos();
                        return t && !t.equals([0, 0])
                    },
                    _getTopLeftPoint: function() {
                        return this.getPixelOrigin().subtract(this._getMapPanePos())
                    },
                    _getNewTopLeftPoint: function(t, e) {
                        var i = this.getSize()._divideBy(2);
                        return this.project(t, e)._subtract(i)._round()
                    },
                    _latLngToNewLayerPoint: function(t, e, i) {
                        var n = this._getNewTopLeftPoint(i, e).add(this._getMapPanePos());
                        return this.project(t, e)._subtract(n)
                    },
                    _getCenterLayerPoint: function() {
                        return this.containerPointToLayerPoint(this.getSize()._divideBy(2))
                    },
                    _getCenterOffset: function(t) {
                        return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())
                    },
                    _limitCenter: function(t, e, i) {
                        if (!i) return t;
                        var n = this.project(t, e),
                            s = this.getSize().divideBy(2),
                            a = new o.Bounds(n.subtract(s), n.add(s)),
                            r = this._getBoundsOffset(a, i, e);
                        return this.unproject(n.add(r), e)
                    },
                    _limitOffset: function(t, e) {
                        if (!e) return t;
                        var i = this.getPixelBounds(),
                            n = new o.Bounds(i.min.add(t), i.max.add(t));
                        return t.add(this._getBoundsOffset(n, e))
                    },
                    _getBoundsOffset: function(t, e, i) {
                        var n = this.project(e.getNorthWest(), i).subtract(t.min),
                            s = this.project(e.getSouthEast(), i).subtract(t.max),
                            a = this._rebound(n.x, -s.x),
                            r = this._rebound(n.y, -s.y);
                        return new o.Point(a, r)
                    },
                    _rebound: function(t, e) {
                        return t + e > 0 ? Math.round(t - e) / 2 : Math.max(0, Math.ceil(t)) - Math.max(0, Math.floor(e))
                    },
                    _limitZoom: function(t) {
                        var e = this.getMinZoom(),
                            i = this.getMaxZoom();
                        return Math.max(e, Math.min(i, t))
                    }
                }), o.map = function(t, e) {
                    return new o.Map(t, e)
                }, o.Projection.Mercator = {
                    MAX_LATITUDE: 85.0840591556,
                    R_MINOR: 6356752.314245179,
                    R_MAJOR: 6378137,
                    project: function(t) {
                        var e = o.LatLng.DEG_TO_RAD,
                            i = this.MAX_LATITUDE,
                            n = Math.max(Math.min(i, t.lat), -i),
                            s = this.R_MAJOR,
                            a = this.R_MINOR,
                            r = t.lng * e * s,
                            h = n * e,
                            l = a / s,
                            u = Math.sqrt(1 - l * l),
                            c = u * Math.sin(h);
                        c = Math.pow((1 - c) / (1 + c), .5 * u);
                        var d = Math.tan(.5 * (.5 * Math.PI - h)) / c;
                        return h = -s * Math.log(d), new o.Point(r, h)
                    },
                    unproject: function(t) {
                        for (var e, i = o.LatLng.RAD_TO_DEG, n = this.R_MAJOR, s = this.R_MINOR, a = t.x * i / n, r = s / n, h = Math.sqrt(1 - r * r), l = Math.exp(-t.y / n), u = Math.PI / 2 - 2 * Math.atan(l), c = 15, d = 1e-7, p = c, _ = .1; Math.abs(_) > d && --p > 0;) e = h * Math.sin(u), _ = Math.PI / 2 - 2 * Math.atan(l * Math.pow((1 - e) / (1 + e), .5 * h)) - u, u += _;
                        return new o.LatLng(u * i, a)
                    }
                }, o.CRS.EPSG3395 = o.extend({}, o.CRS, {
                    code: "EPSG:3395",
                    projection: o.Projection.Mercator,
                    transformation: function() {
                        var t = o.Projection.Mercator,
                            e = t.R_MAJOR,
                            i = .5 / (Math.PI * e);
                        return new o.Transformation(i, .5, -i, .5)
                    }()
                }), o.TileLayer = o.Class.extend({
                    includes: o.Mixin.Events,
                    options: {
                        minZoom: 0,
                        maxZoom: 18,
                        tileSize: 256,
                        subdomains: "abc",
                        errorTileUrl: "",
                        attribution: "",
                        zoomOffset: 0,
                        opacity: 1,
                        unloadInvisibleTiles: o.Browser.mobile,
                        updateWhenIdle: o.Browser.mobile
                    },
                    initialize: function(t, e) {
                        e = o.setOptions(this, e), e.detectRetina && o.Browser.retina && e.maxZoom > 0 && (e.tileSize = Math.floor(e.tileSize / 2), e.zoomOffset++, e.minZoom > 0 && e.minZoom--, this.options.maxZoom--), e.bounds && (e.bounds = o.latLngBounds(e.bounds)), this._url = t;
                        var i = this.options.subdomains;
                        "string" == typeof i && (this.options.subdomains = i.split(""))
                    },
                    onAdd: function(t) {
                        this._map = t, this._animated = t._zoomAnimated, this._initContainer(), t.on({
                            viewreset: this._reset,
                            moveend: this._update
                        }, this), this._animated && t.on({
                            zoomanim: this._animateZoom,
                            zoomend: this._endZoomAnim
                        }, this), this.options.updateWhenIdle || (this._limitedUpdate = o.Util.limitExecByInterval(this._update, 150, this), t.on("move", this._limitedUpdate, this)), this._reset(), this._update()
                    },
                    addTo: function(t) {
                        return t.addLayer(this), this
                    },
                    onRemove: function(t) {
                        this._container.parentNode.removeChild(this._container), t.off({
                            viewreset: this._reset,
                            moveend: this._update
                        }, this), this._animated && t.off({
                            zoomanim: this._animateZoom,
                            zoomend: this._endZoomAnim
                        }, this), this.options.updateWhenIdle || t.off("move", this._limitedUpdate, this), this._container = null, this._map = null
                    },
                    bringToFront: function() {
                        var t = this._map._panes.tilePane;
                        return this._container && (t.appendChild(this._container), this._setAutoZIndex(t, Math.max)), this
                    },
                    bringToBack: function() {
                        var t = this._map._panes.tilePane;
                        return this._container && (t.insertBefore(this._container, t.firstChild), this._setAutoZIndex(t, Math.min)), this
                    },
                    getAttribution: function() {
                        return this.options.attribution
                    },
                    getContainer: function() {
                        return this._container
                    },
                    setOpacity: function(t) {
                        return this.options.opacity = t, this._map && this._updateOpacity(), this
                    },
                    setZIndex: function(t) {
                        return this.options.zIndex = t, this._updateZIndex(), this
                    },
                    setUrl: function(t, e) {
                        return this._url = t, e || this.redraw(), this
                    },
                    redraw: function() {
                        return this._map && (this._reset({
                            hard: !0
                        }), this._update()), this
                    },
                    _updateZIndex: function() {
                        this._container && this.options.zIndex !== i && (this._container.style.zIndex = this.options.zIndex)
                    },
                    _setAutoZIndex: function(t, e) {
                        var i, n, o, s = t.children,
                            a = -e(1 / 0, -(1 / 0));
                        for (n = 0, o = s.length; o > n; n++) s[n] !== this._container && (i = parseInt(s[n].style.zIndex, 10), isNaN(i) || (a = e(a, i)));
                        this.options.zIndex = this._container.style.zIndex = (isFinite(a) ? a : 0) + e(1, -1)
                    },
                    _updateOpacity: function() {
                        var t, e = this._tiles;
                        if (o.Browser.ielt9)
                            for (t in e) o.DomUtil.setOpacity(e[t], this.options.opacity);
                        else o.DomUtil.setOpacity(this._container, this.options.opacity)
                    },
                    _initContainer: function() {
                        var t = this._map._panes.tilePane;
                        if (!this._container) {
                            if (this._container = o.DomUtil.create("div", "leaflet-layer"), this._updateZIndex(), this._animated) {
                                var e = "leaflet-tile-container";
                                this._bgBuffer = o.DomUtil.create("div", e, this._container), this._tileContainer = o.DomUtil.create("div", e, this._container)
                            } else this._tileContainer = this._container;
                            t.appendChild(this._container), this.options.opacity < 1 && this._updateOpacity()
                        }
                    },
                    _reset: function(t) {
                        for (var e in this._tiles) this.fire("tileunload", {
                            tile: this._tiles[e]
                        });
                        this._tiles = {}, this._tilesToLoad = 0, this.options.reuseTiles && (this._unusedTiles = []), this._tileContainer.innerHTML = "", this._animated && t && t.hard && this._clearBgBuffer(), this._initContainer()
                    },
                    _getTileSize: function() {
                        var t = this._map,
                            e = t.getZoom() + this.options.zoomOffset,
                            i = this.options.maxNativeZoom,
                            n = this.options.tileSize;
                        return i && e > i && (n = Math.round(t.getZoomScale(e) / t.getZoomScale(i) * n)), n
                    },
                    _update: function() {
                        if (this._map) {
                            var t = this._map,
                                e = t.getPixelBounds(),
                                i = t.getZoom(),
                                n = this._getTileSize();
                            if (!(i > this.options.maxZoom || i < this.options.minZoom)) {
                                var s = o.bounds(e.min.divideBy(n)._floor(), e.max.divideBy(n)._floor());
                                this._addTilesFromCenterOut(s), (this.options.unloadInvisibleTiles || this.options.reuseTiles) && this._removeOtherTiles(s)
                            }
                        }
                    },
                    _addTilesFromCenterOut: function(t) {
                        var i, n, s, a = [],
                            r = t.getCenter();
                        for (i = t.min.y; i <= t.max.y; i++)
                            for (n = t.min.x; n <= t.max.x; n++) s = new o.Point(n, i), this._tileShouldBeLoaded(s) && a.push(s);
                        var h = a.length;
                        if (0 !== h) {
                            a.sort(function(t, e) {
                                return t.distanceTo(r) - e.distanceTo(r)
                            });
                            var l = e.createDocumentFragment();
                            for (this._tilesToLoad || this.fire("loading"), this._tilesToLoad += h, n = 0; h > n; n++) this._addTile(a[n], l);
                            this._tileContainer.appendChild(l)
                        }
                    },
                    _tileShouldBeLoaded: function(t) {
                        if (t.x + ":" + t.y in this._tiles) return !1;
                        var e = this.options;
                        if (!e.continuousWorld) {
                            var i = this._getWrapTileNum();
                            if (e.noWrap && (t.x < 0 || t.x >= i.x) || t.y < 0 || t.y >= i.y) return !1
                        }
                        if (e.bounds) {
                            var n = this._getTileSize(),
                                o = t.multiplyBy(n),
                                s = o.add([n, n]),
                                a = this._map.unproject(o),
                                r = this._map.unproject(s);
                            if (e.continuousWorld || e.noWrap || (a = a.wrap(), r = r.wrap()), !e.bounds.intersects([a, r])) return !1
                        }
                        return !0
                    },
                    _removeOtherTiles: function(t) {
                        var e, i, n, o;
                        for (o in this._tiles) e = o.split(":"), i = parseInt(e[0], 10), n = parseInt(e[1], 10), (i < t.min.x || i > t.max.x || n < t.min.y || n > t.max.y) && this._removeTile(o)
                    },
                    _removeTile: function(t) {
                        var e = this._tiles[t];
                        this.fire("tileunload", {
                            tile: e,
                            url: e.src
                        }), this.options.reuseTiles ? (o.DomUtil.removeClass(e, "leaflet-tile-loaded"), this._unusedTiles.push(e)) : e.parentNode === this._tileContainer && this._tileContainer.removeChild(e), o.Browser.android || (e.onload = null, e.src = o.Util.emptyImageUrl), delete this._tiles[t]
                    },
                    _addTile: function(t, e) {
                        var i = this._getTilePos(t),
                            n = this._getTile();
                        o.DomUtil.setPosition(n, i, o.Browser.chrome), this._tiles[t.x + ":" + t.y] = n, this._loadTile(n, t), n.parentNode !== this._tileContainer && e.appendChild(n)
                    },
                    _getZoomForUrl: function() {
                        var t = this.options,
                            e = this._map.getZoom();
                        return t.zoomReverse && (e = t.maxZoom - e), e += t.zoomOffset, t.maxNativeZoom ? Math.min(e, t.maxNativeZoom) : e
                    },
                    _getTilePos: function(t) {
                        var e = this._map.getPixelOrigin(),
                            i = this._getTileSize();
                        return t.multiplyBy(i).subtract(e)
                    },
                    getTileUrl: function(t) {
                        return o.Util.template(this._url, o.extend({
                            s: this._getSubdomain(t),
                            z: t.z,
                            x: t.x,
                            y: t.y
                        }, this.options))
                    },
                    _getWrapTileNum: function() {
                        var t = this._map.options.crs,
                            e = t.getSize(this._map.getZoom());
                        return e.divideBy(this._getTileSize())._floor()
                    },
                    _adjustTilePoint: function(t) {
                        var e = this._getWrapTileNum();
                        this.options.continuousWorld || this.options.noWrap || (t.x = (t.x % e.x + e.x) % e.x), this.options.tms && (t.y = e.y - t.y - 1), t.z = this._getZoomForUrl()
                    },
                    _getSubdomain: function(t) {
                        var e = Math.abs(t.x + t.y) % this.options.subdomains.length;
                        return this.options.subdomains[e]
                    },
                    _getTile: function() {
                        if (this.options.reuseTiles && this._unusedTiles.length > 0) {
                            var t = this._unusedTiles.pop();
                            return this._resetTile(t), t
                        }
                        return this._createTile()
                    },
                    _resetTile: function() {},
                    _createTile: function() {
                        var t = o.DomUtil.create("img", "leaflet-tile");
                        return t.style.width = t.style.height = this._getTileSize() + "px", t.galleryimg = "no", t.onselectstart = t.onmousemove = o.Util.falseFn, o.Browser.ielt9 && this.options.opacity !== i && o.DomUtil.setOpacity(t, this.options.opacity), o.Browser.mobileWebkit3d && (t.style.WebkitBackfaceVisibility = "hidden"), t
                    },
                    _loadTile: function(t, e) {
                        t._layer = this, t.onload = this._tileOnLoad, t.onerror = this._tileOnError, this._adjustTilePoint(e), t.src = this.getTileUrl(e), this.fire("tileloadstart", {
                            tile: t,
                            url: t.src
                        })
                    },
                    _tileLoaded: function() {
                        this._tilesToLoad--, this._animated && o.DomUtil.addClass(this._tileContainer, "leaflet-zoom-animated"), this._tilesToLoad || (this.fire("load"), this._animated && (clearTimeout(this._clearBgBufferTimer), this._clearBgBufferTimer = setTimeout(o.bind(this._clearBgBuffer, this), 500)))
                    },
                    _tileOnLoad: function() {
                        var t = this._layer;
                        this.src !== o.Util.emptyImageUrl && (o.DomUtil.addClass(this, "leaflet-tile-loaded"), t.fire("tileload", {
                            tile: this,
                            url: this.src
                        })), t._tileLoaded()
                    },
                    _tileOnError: function() {
                        var t = this._layer;
                        t.fire("tileerror", {
                            tile: this,
                            url: this.src
                        });
                        var e = t.options.errorTileUrl;
                        e && (this.src = e), t._tileLoaded()
                    }
                }), o.tileLayer = function(t, e) {
                    return new o.TileLayer(t, e)
                }, o.TileLayer.WMS = o.TileLayer.extend({
                    defaultWmsParams: {
                        service: "WMS",
                        request: "GetMap",
                        version: "1.1.1",
                        layers: "",
                        styles: "",
                        format: "image/jpeg",
                        transparent: !1
                    },
                    initialize: function(t, e) {
                        this._url = t;
                        var i = o.extend({}, this.defaultWmsParams),
                            n = e.tileSize || this.options.tileSize;
                        e.detectRetina && o.Browser.retina ? i.width = i.height = 2 * n : i.width = i.height = n;
                        for (var s in e) this.options.hasOwnProperty(s) || "crs" === s || (i[s] = e[s]);
                        this.wmsParams = i, o.setOptions(this, e)
                    },
                    onAdd: function(t) {
                        this._crs = this.options.crs || t.options.crs, this._wmsVersion = parseFloat(this.wmsParams.version);
                        var e = this._wmsVersion >= 1.3 ? "crs" : "srs";
                        this.wmsParams[e] = this._crs.code, o.TileLayer.prototype.onAdd.call(this, t)
                    },
                    getTileUrl: function(t) {
                        var e = this._map,
                            i = this.options.tileSize,
                            n = t.multiplyBy(i),
                            s = n.add([i, i]),
                            a = this._crs.project(e.unproject(n, t.z)),
                            r = this._crs.project(e.unproject(s, t.z)),
                            h = this._wmsVersion >= 1.3 && this._crs === o.CRS.EPSG4326 ? [r.y, a.x, a.y, r.x].join(",") : [a.x, r.y, r.x, a.y].join(","),
                            l = o.Util.template(this._url, {
                                s: this._getSubdomain(t)
                            });
                        return l + o.Util.getParamString(this.wmsParams, l, !0) + "&BBOX=" + h
                    },
                    setParams: function(t, e) {
                        return o.extend(this.wmsParams, t), e || this.redraw(), this
                    }
                }), o.tileLayer.wms = function(t, e) {
                    return new o.TileLayer.WMS(t, e)
                }, o.TileLayer.Canvas = o.TileLayer.extend({
                    options: {
                        async: !1
                    },
                    initialize: function(t) {
                        o.setOptions(this, t)
                    },
                    redraw: function() {
                        this._map && (this._reset({
                            hard: !0
                        }), this._update());
                        for (var t in this._tiles) this._redrawTile(this._tiles[t]);
                        return this
                    },
                    _redrawTile: function(t) {
                        this.drawTile(t, t._tilePoint, this._map._zoom)
                    },
                    _createTile: function() {
                        var t = o.DomUtil.create("canvas", "leaflet-tile");
                        return t.width = t.height = this.options.tileSize, t.onselectstart = t.onmousemove = o.Util.falseFn, t
                    },
                    _loadTile: function(t, e) {
                        t._layer = this, t._tilePoint = e, this._redrawTile(t), this.options.async || this.tileDrawn(t)
                    },
                    drawTile: function() {},
                    tileDrawn: function(t) {
                        this._tileOnLoad.call(t)
                    }
                }), o.tileLayer.canvas = function(t) {
                    return new o.TileLayer.Canvas(t)
                }, o.ImageOverlay = o.Class.extend({
                    includes: o.Mixin.Events,
                    options: {
                        opacity: 1
                    },
                    initialize: function(t, e, i) {
                        this._url = t, this._bounds = o.latLngBounds(e), o.setOptions(this, i)
                    },
                    onAdd: function(t) {
                        this._map = t, this._image || this._initImage(), t._panes.overlayPane.appendChild(this._image), t.on("viewreset", this._reset, this), t.options.zoomAnimation && o.Browser.any3d && t.on("zoomanim", this._animateZoom, this), this._reset()
                    },
                    onRemove: function(t) {
                        t.getPanes().overlayPane.removeChild(this._image), t.off("viewreset", this._reset, this), t.options.zoomAnimation && t.off("zoomanim", this._animateZoom, this)
                    },
                    addTo: function(t) {
                        return t.addLayer(this), this
                    },
                    setOpacity: function(t) {
                        return this.options.opacity = t, this._updateOpacity(), this
                    },
                    bringToFront: function() {
                        return this._image && this._map._panes.overlayPane.appendChild(this._image), this
                    },
                    bringToBack: function() {
                        var t = this._map._panes.overlayPane;
                        return this._image && t.insertBefore(this._image, t.firstChild), this
                    },
                    setUrl: function(t) {
                        this._url = t, this._image.src = this._url
                    },
                    getAttribution: function() {
                        return this.options.attribution
                    },
                    _initImage: function() {
                        this._image = o.DomUtil.create("img", "leaflet-image-layer"), this._map.options.zoomAnimation && o.Browser.any3d ? o.DomUtil.addClass(this._image, "leaflet-zoom-animated") : o.DomUtil.addClass(this._image, "leaflet-zoom-hide"), this._updateOpacity(), o.extend(this._image, {
                            galleryimg: "no",
                            onselectstart: o.Util.falseFn,
                            onmousemove: o.Util.falseFn,
                            onload: o.bind(this._onImageLoad, this),
                            src: this._url
                        })
                    },
                    _animateZoom: function(t) {
                        var e = this._map,
                            i = this._image,
                            n = e.getZoomScale(t.zoom),
                            s = this._bounds.getNorthWest(),
                            a = this._bounds.getSouthEast(),
                            r = e._latLngToNewLayerPoint(s, t.zoom, t.center),
                            h = e._latLngToNewLayerPoint(a, t.zoom, t.center)._subtract(r),
                            l = r._add(h._multiplyBy(.5 * (1 - 1 / n)));
                        i.style[o.DomUtil.TRANSFORM] = o.DomUtil.getTranslateString(l) + " scale(" + n + ") "
                    },
                    _reset: function() {
                        var t = this._image,
                            e = this._map.latLngToLayerPoint(this._bounds.getNorthWest()),
                            i = this._map.latLngToLayerPoint(this._bounds.getSouthEast())._subtract(e);
                        o.DomUtil.setPosition(t, e), t.style.width = i.x + "px", t.style.height = i.y + "px"
                    },
                    _onImageLoad: function() {
                        this.fire("load")
                    },
                    _updateOpacity: function() {
                        o.DomUtil.setOpacity(this._image, this.options.opacity)
                    }
                }), o.imageOverlay = function(t, e, i) {
                    return new o.ImageOverlay(t, e, i)
                }, o.Icon = o.Class.extend({
                    options: {
                        className: ""
                    },
                    initialize: function(t) {
                        o.setOptions(this, t)
                    },
                    createIcon: function(t) {
                        return this._createIcon("icon", t)
                    },
                    createShadow: function(t) {
                        return this._createIcon("shadow", t)
                    },
                    _createIcon: function(t, e) {
                        var i = this._getIconUrl(t);
                        if (!i) {
                            if ("icon" === t) throw new Error("iconUrl not set in Icon options (see the docs).");
                            return null
                        }
                        var n;
                        return n = e && "IMG" === e.tagName ? this._createImg(i, e) : this._createImg(i), this._setIconStyles(n, t), n
                    },
                    _setIconStyles: function(t, e) {
                        var i, n = this.options,
                            s = o.point(n[e + "Size"]);
                        i = "shadow" === e ? o.point(n.shadowAnchor || n.iconAnchor) : o.point(n.iconAnchor), !i && s && (i = s.divideBy(2, !0)), t.className = "leaflet-marker-" + e + " " + n.className, i && (t.style.marginLeft = -i.x + "px", t.style.marginTop = -i.y + "px"), s && (t.style.width = s.x + "px", t.style.height = s.y + "px")
                    },
                    _createImg: function(t, i) {
                        return i = i || e.createElement("img"), i.src = t, i
                    },
                    _getIconUrl: function(t) {
                        return o.Browser.retina && this.options[t + "RetinaUrl"] ? this.options[t + "RetinaUrl"] : this.options[t + "Url"]
                    }
                }), o.icon = function(t) {
                    return new o.Icon(t)
                }, o.Icon.Default = o.Icon.extend({
                    options: {
                        iconSize: [25, 41],
                        iconAnchor: [12, 41],
                        popupAnchor: [1, -34],
                        shadowSize: [41, 41]
                    },
                    _getIconUrl: function(t) {
                        var e = t + "Url";
                        if (this.options[e]) return this.options[e];
                        o.Browser.retina && "icon" === t && (t += "-2x");
                        var i = o.Icon.Default.imagePath;
                        if (!i) throw new Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually.");
                        return i + "/marker-" + t + ".png"
                    }
                }), o.Icon.Default.imagePath = function() {
                    var t, i, n, o, s, a = e.getElementsByTagName("script"),
                        r = /[\/^]leaflet[\-\._]?([\w\-\._]*)\.js\??/;
                    for (t = 0, i = a.length; i > t; t++)
                        if (n = a[t].src, o = n.match(r)) return s = n.split(r)[0], (s ? s + "/" : "") + "images"
                }(), o.Marker = o.Class.extend({
                    includes: o.Mixin.Events,
                    options: {
                        icon: new o.Icon.Default,
                        title: "",
                        alt: "",
                        clickable: !0,
                        draggable: !1,
                        keyboard: !0,
                        zIndexOffset: 0,
                        opacity: 1,
                        riseOnHover: !1,
                        riseOffset: 250
                    },
                    initialize: function(t, e) {
                        o.setOptions(this, e), this._latlng = o.latLng(t)
                    },
                    onAdd: function(t) {
                        this._map = t, t.on("viewreset", this.update, this), this._initIcon(), this.update(), this.fire("add"), t.options.zoomAnimation && t.options.markerZoomAnimation && t.on("zoomanim", this._animateZoom, this)
                    },
                    addTo: function(t) {
                        return t.addLayer(this), this
                    },
                    onRemove: function(t) {
                        this.dragging && this.dragging.disable(), this._removeIcon(), this._removeShadow(), this.fire("remove"), t.off({
                            viewreset: this.update,
                            zoomanim: this._animateZoom
                        }, this), this._map = null
                    },
                    getLatLng: function() {
                        return this._latlng
                    },
                    setLatLng: function(t) {
                        return this._latlng = o.latLng(t), this.update(), this.fire("move", {
                            latlng: this._latlng
                        })
                    },
                    setZIndexOffset: function(t) {
                        return this.options.zIndexOffset = t, this.update(), this
                    },
                    setIcon: function(t) {
                        return this.options.icon = t, this._map && (this._initIcon(), this.update()), this._popup && this.bindPopup(this._popup), this
                    },
                    update: function() {
                        return this._icon && this._setPos(this._map.latLngToLayerPoint(this._latlng).round()), this
                    },
                    _initIcon: function() {
                        var t = this.options,
                            e = this._map,
                            i = e.options.zoomAnimation && e.options.markerZoomAnimation,
                            n = i ? "leaflet-zoom-animated" : "leaflet-zoom-hide",
                            s = t.icon.createIcon(this._icon),
                            a = !1;
                        s !== this._icon && (this._icon && this._removeIcon(), a = !0, t.title && (s.title = t.title), t.alt && (s.alt = t.alt)), o.DomUtil.addClass(s, n), t.keyboard && (s.tabIndex = "0"), this._icon = s, this._initInteraction(), t.riseOnHover && o.DomEvent.on(s, "mouseover", this._bringToFront, this).on(s, "mouseout", this._resetZIndex, this);
                        var r = t.icon.createShadow(this._shadow),
                            h = !1;
                        r !== this._shadow && (this._removeShadow(), h = !0), r && o.DomUtil.addClass(r, n), this._shadow = r, t.opacity < 1 && this._updateOpacity();
                        var l = this._map._panes;
                        a && l.markerPane.appendChild(this._icon), r && h && l.shadowPane.appendChild(this._shadow)
                    },
                    _removeIcon: function() {
                        this.options.riseOnHover && o.DomEvent.off(this._icon, "mouseover", this._bringToFront).off(this._icon, "mouseout", this._resetZIndex), this._map._panes.markerPane.removeChild(this._icon), this._icon = null
                    },
                    _removeShadow: function() {
                        this._shadow && this._map._panes.shadowPane.removeChild(this._shadow), this._shadow = null
                    },
                    _setPos: function(t) {
                        o.DomUtil.setPosition(this._icon, t), this._shadow && o.DomUtil.setPosition(this._shadow, t), this._zIndex = t.y + this.options.zIndexOffset, this._resetZIndex()
                    },
                    _updateZIndex: function(t) {
                        this._icon.style.zIndex = this._zIndex + t
                    },
                    _animateZoom: function(t) {
                        var e = this._map._latLngToNewLayerPoint(this._latlng, t.zoom, t.center).round();
                        this._setPos(e)
                    },
                    _initInteraction: function() {
                        if (this.options.clickable) {
                            var t = this._icon,
                                e = ["dblclick", "mousedown", "mouseover", "mouseout", "contextmenu"];
                            o.DomUtil.addClass(t, "leaflet-clickable"), o.DomEvent.on(t, "click", this._onMouseClick, this), o.DomEvent.on(t, "keypress", this._onKeyPress, this);
                            for (var i = 0; i < e.length; i++) o.DomEvent.on(t, e[i], this._fireMouseEvent, this);
                            o.Handler.MarkerDrag && (this.dragging = new o.Handler.MarkerDrag(this), this.options.draggable && this.dragging.enable())
                        }
                    },
                    _onMouseClick: function(t) {
                        var e = this.dragging && this.dragging.moved();
                        (this.hasEventListeners(t.type) || e) && o.DomEvent.stopPropagation(t), e || (this.dragging && this.dragging._enabled || !this._map.dragging || !this._map.dragging.moved()) && this.fire(t.type, {
                            originalEvent: t,
                            latlng: this._latlng
                        })
                    },
                    _onKeyPress: function(t) {
                        13 === t.keyCode && this.fire("click", {
                            originalEvent: t,
                            latlng: this._latlng
                        })
                    },
                    _fireMouseEvent: function(t) {
                        this.fire(t.type, {
                            originalEvent: t,
                            latlng: this._latlng
                        }), "contextmenu" === t.type && this.hasEventListeners(t.type) && o.DomEvent.preventDefault(t), "mousedown" !== t.type ? o.DomEvent.stopPropagation(t) : o.DomEvent.preventDefault(t)
                    },
                    setOpacity: function(t) {
                        return this.options.opacity = t, this._map && this._updateOpacity(), this
                    },
                    _updateOpacity: function() {
                        o.DomUtil.setOpacity(this._icon, this.options.opacity), this._shadow && o.DomUtil.setOpacity(this._shadow, this.options.opacity)
                    },
                    _bringToFront: function() {
                        this._updateZIndex(this.options.riseOffset)
                    },
                    _resetZIndex: function() {
                        this._updateZIndex(0)
                    }
                }), o.marker = function(t, e) {
                    return new o.Marker(t, e)
                }, o.DivIcon = o.Icon.extend({
                    options: {
                        iconSize: [12, 12],
                        className: "leaflet-div-icon",
                        html: !1
                    },
                    createIcon: function(t) {
                        var i = t && "DIV" === t.tagName ? t : e.createElement("div"),
                            n = this.options;
                        return n.html !== !1 ? i.innerHTML = n.html : i.innerHTML = "", n.bgPos && (i.style.backgroundPosition = -n.bgPos.x + "px " + -n.bgPos.y + "px"), this._setIconStyles(i, "icon"), i
                    },
                    createShadow: function() {
                        return null
                    }
                }), o.divIcon = function(t) {
                    return new o.DivIcon(t)
                }, o.Map.mergeOptions({
                    closePopupOnClick: !0
                }), o.Popup = o.Class.extend({
                    includes: o.Mixin.Events,
                    options: {
                        minWidth: 50,
                        maxWidth: 300,
                        autoPan: !0,
                        closeButton: !0,
                        offset: [0, 7],
                        autoPanPadding: [5, 5],
                        keepInView: !1,
                        className: "",
                        zoomAnimation: !0
                    },
                    initialize: function(t, e) {
                        o.setOptions(this, t), this._source = e, this._animated = o.Browser.any3d && this.options.zoomAnimation, this._isOpen = !1
                    },
                    onAdd: function(t) {
                        this._map = t, this._container || this._initLayout();
                        var e = t.options.fadeAnimation;
                        e && o.DomUtil.setOpacity(this._container, 0), t._panes.popupPane.appendChild(this._container), t.on(this._getEvents(), this), this.update(), e && o.DomUtil.setOpacity(this._container, 1), this.fire("open"), t.fire("popupopen", {
                            popup: this
                        }), this._source && this._source.fire("popupopen", {
                            popup: this
                        })
                    },
                    addTo: function(t) {
                        return t.addLayer(this), this
                    },
                    openOn: function(t) {
                        return t.openPopup(this), this
                    },
                    onRemove: function(t) {
                        t._panes.popupPane.removeChild(this._container), o.Util.falseFn(this._container.offsetWidth), t.off(this._getEvents(), this), t.options.fadeAnimation && o.DomUtil.setOpacity(this._container, 0), this._map = null, this.fire("close"), t.fire("popupclose", {
                            popup: this
                        }), this._source && this._source.fire("popupclose", {
                            popup: this
                        })
                    },
                    getLatLng: function() {
                        return this._latlng
                    },
                    setLatLng: function(t) {
                        return this._latlng = o.latLng(t), this._map && (this._updatePosition(), this._adjustPan()), this
                    },
                    getContent: function() {
                        return this._content
                    },
                    setContent: function(t) {
                        return this._content = t, this.update(), this
                    },
                    update: function() {
                        this._map && (this._container.style.visibility = "hidden", this._updateContent(), this._updateLayout(), this._updatePosition(), this._container.style.visibility = "", this._adjustPan())
                    },
                    _getEvents: function() {
                        var t = {
                            viewreset: this._updatePosition
                        };
                        return this._animated && (t.zoomanim = this._zoomAnimation), ("closeOnClick" in this.options ? this.options.closeOnClick : this._map.options.closePopupOnClick) && (t.preclick = this._close), this.options.keepInView && (t.moveend = this._adjustPan), t
                    },
                    _close: function() {
                        this._map && this._map.closePopup(this)
                    },
                    _initLayout: function() {
                        var t, e = "leaflet-popup",
                            i = e + " " + this.options.className + " leaflet-zoom-" + (this._animated ? "animated" : "hide"),
                            n = this._container = o.DomUtil.create("div", i);
                        this.options.closeButton && (t = this._closeButton = o.DomUtil.create("a", e + "-close-button", n), t.href = "#close", t.innerHTML = "&#215;", o.DomEvent.disableClickPropagation(t), o.DomEvent.on(t, "click", this._onCloseButtonClick, this));
                        var s = this._wrapper = o.DomUtil.create("div", e + "-content-wrapper", n);
                        o.DomEvent.disableClickPropagation(s), this._contentNode = o.DomUtil.create("div", e + "-content", s), o.DomEvent.disableScrollPropagation(this._contentNode), o.DomEvent.on(s, "contextmenu", o.DomEvent.stopPropagation), this._tipContainer = o.DomUtil.create("div", e + "-tip-container", n), this._tip = o.DomUtil.create("div", e + "-tip", this._tipContainer)
                    },
                    _updateContent: function() {
                        if (this._content) {
                            if ("string" == typeof this._content) this._contentNode.innerHTML = this._content;
                            else {
                                for (; this._contentNode.hasChildNodes();) this._contentNode.removeChild(this._contentNode.firstChild);
                                this._contentNode.appendChild(this._content)
                            }
                            this.fire("contentupdate")
                        }
                    },
                    _updateLayout: function() {
                        var t = this._contentNode,
                            e = t.style;
                        e.width = "", e.whiteSpace = "nowrap";
                        var i = t.offsetWidth;
                        i = Math.min(i, this.options.maxWidth), i = Math.max(i, this.options.minWidth), e.width = i + 1 + "px", e.whiteSpace = "", e.height = "";
                        var n = t.offsetHeight,
                            s = this.options.maxHeight,
                            a = "leaflet-popup-scrolled";
                        s && n > s ? (e.height = s + "px", o.DomUtil.addClass(t, a)) : o.DomUtil.removeClass(t, a), this._containerWidth = this._container.offsetWidth
                    },
                    _updatePosition: function() {
                        if (this._map) {
                            var t = this._map.latLngToLayerPoint(this._latlng),
                                e = this._animated,
                                i = o.point(this.options.offset);
                            e && o.DomUtil.setPosition(this._container, t), this._containerBottom = -i.y - (e ? 0 : t.y), this._containerLeft = -Math.round(this._containerWidth / 2) + i.x + (e ? 0 : t.x), this._container.style.bottom = this._containerBottom + "px", this._container.style.left = this._containerLeft + "px"
                        }
                    },
                    _zoomAnimation: function(t) {
                        var e = this._map._latLngToNewLayerPoint(this._latlng, t.zoom, t.center);
                        o.DomUtil.setPosition(this._container, e)
                    },
                    _adjustPan: function() {
                        if (this.options.autoPan) {
                            var t = this._map,
                                e = this._container.offsetHeight,
                                i = this._containerWidth,
                                n = new o.Point(this._containerLeft, -e - this._containerBottom);
                            this._animated && n._add(o.DomUtil.getPosition(this._container));
                            var s = t.layerPointToContainerPoint(n),
                                a = o.point(this.options.autoPanPadding),
                                r = o.point(this.options.autoPanPaddingTopLeft || a),
                                h = o.point(this.options.autoPanPaddingBottomRight || a),
                                l = t.getSize(),
                                u = 0,
                                c = 0;
                            s.x + i + h.x > l.x && (u = s.x + i - l.x + h.x), s.x - u - r.x < 0 && (u = s.x - r.x), s.y + e + h.y > l.y && (c = s.y + e - l.y + h.y), s.y - c - r.y < 0 && (c = s.y - r.y), (u || c) && t.fire("autopanstart").panBy([u, c])
                        }
                    },
                    _onCloseButtonClick: function(t) {
                        this._close(), o.DomEvent.stop(t)
                    }
                }), o.popup = function(t, e) {
                    return new o.Popup(t, e)
                }, o.Map.include({
                    openPopup: function(t, e, i) {
                        if (this.closePopup(), !(t instanceof o.Popup)) {
                            var n = t;
                            t = new o.Popup(i).setLatLng(e).setContent(n)
                        }
                        return t._isOpen = !0, this._popup = t, this.addLayer(t)
                    },
                    closePopup: function(t) {
                        return t && t !== this._popup || (t = this._popup, this._popup = null), t && (this.removeLayer(t), t._isOpen = !1), this
                    }
                }), o.Marker.include({
                    openPopup: function() {
                        return this._popup && this._map && !this._map.hasLayer(this._popup) && (this._popup.setLatLng(this._latlng), this._map.openPopup(this._popup)), this
                    },
                    closePopup: function() {
                        return this._popup && this._popup._close(), this
                    },
                    togglePopup: function() {
                        return this._popup && (this._popup._isOpen ? this.closePopup() : this.openPopup()), this
                    },
                    bindPopup: function(t, e) {
                        var i = o.point(this.options.icon.options.popupAnchor || [0, 0]);
                        return i = i.add(o.Popup.prototype.options.offset), e && e.offset && (i = i.add(e.offset)), e = o.extend({
                            offset: i
                        }, e), this._popupHandlersAdded || (this.on("click", this.togglePopup, this).on("remove", this.closePopup, this).on("move", this._movePopup, this), this._popupHandlersAdded = !0), t instanceof o.Popup ? (o.setOptions(t, e), this._popup = t, t._source = this) : this._popup = new o.Popup(e, this).setContent(t), this
                    },
                    setPopupContent: function(t) {
                        return this._popup && this._popup.setContent(t), this
                    },
                    unbindPopup: function() {
                        return this._popup && (this._popup = null, this.off("click", this.togglePopup, this).off("remove", this.closePopup, this).off("move", this._movePopup, this), this._popupHandlersAdded = !1), this
                    },
                    getPopup: function() {
                        return this._popup
                    },
                    _movePopup: function(t) {
                        this._popup.setLatLng(t.latlng)
                    }
                }), o.LayerGroup = o.Class.extend({
                    initialize: function(t) {
                        this._layers = {};
                        var e, i;
                        if (t)
                            for (e = 0, i = t.length; i > e; e++) this.addLayer(t[e])
                    },
                    addLayer: function(t) {
                        var e = this.getLayerId(t);
                        return this._layers[e] = t, this._map && this._map.addLayer(t), this
                    },
                    removeLayer: function(t) {
                        var e = t in this._layers ? t : this.getLayerId(t);
                        return this._map && this._layers[e] && this._map.removeLayer(this._layers[e]), delete this._layers[e], this
                    },
                    hasLayer: function(t) {
                        return t ? t in this._layers || this.getLayerId(t) in this._layers : !1
                    },
                    clearLayers: function() {
                        return this.eachLayer(this.removeLayer, this), this
                    },
                    invoke: function(t) {
                        var e, i, n = Array.prototype.slice.call(arguments, 1);
                        for (e in this._layers) i = this._layers[e], i[t] && i[t].apply(i, n);
                        return this
                    },
                    onAdd: function(t) {
                        this._map = t, this.eachLayer(t.addLayer, t)
                    },
                    onRemove: function(t) {
                        this.eachLayer(t.removeLayer, t), this._map = null
                    },
                    addTo: function(t) {
                        return t.addLayer(this), this
                    },
                    eachLayer: function(t, e) {
                        for (var i in this._layers) t.call(e, this._layers[i]);
                        return this
                    },
                    getLayer: function(t) {
                        return this._layers[t]
                    },
                    getLayers: function() {
                        var t = [];
                        for (var e in this._layers) t.push(this._layers[e]);
                        return t
                    },
                    setZIndex: function(t) {
                        return this.invoke("setZIndex", t)
                    },
                    getLayerId: function(t) {
                        return o.stamp(t)
                    }
                }), o.layerGroup = function(t) {
                    return new o.LayerGroup(t)
                }, o.FeatureGroup = o.LayerGroup.extend({
                    includes: o.Mixin.Events,
                    statics: {
                        EVENTS: "click dblclick mouseover mouseout mousemove contextmenu popupopen popupclose"
                    },
                    addLayer: function(t) {
                        return this.hasLayer(t) ? this : ("on" in t && t.on(o.FeatureGroup.EVENTS, this._propagateEvent, this), o.LayerGroup.prototype.addLayer.call(this, t), this._popupContent && t.bindPopup && t.bindPopup(this._popupContent, this._popupOptions), this.fire("layeradd", {
                            layer: t
                        }))
                    },
                    removeLayer: function(t) {
                        return this.hasLayer(t) ? (t in this._layers && (t = this._layers[t]), "off" in t && t.off(o.FeatureGroup.EVENTS, this._propagateEvent, this), o.LayerGroup.prototype.removeLayer.call(this, t), this._popupContent && this.invoke("unbindPopup"), this.fire("layerremove", {
                            layer: t
                        })) : this
                    },
                    bindPopup: function(t, e) {
                        return this._popupContent = t, this._popupOptions = e, this.invoke("bindPopup", t, e)
                    },
                    openPopup: function(t) {
                        for (var e in this._layers) {
                            this._layers[e].openPopup(t);
                            break
                        }
                        return this
                    },
                    setStyle: function(t) {
                        return this.invoke("setStyle", t)
                    },
                    bringToFront: function() {
                        return this.invoke("bringToFront")
                    },
                    bringToBack: function() {
                        return this.invoke("bringToBack")
                    },
                    getBounds: function() {
                        var t = new o.LatLngBounds;
                        return this.eachLayer(function(e) {
                            t.extend(e instanceof o.Marker ? e.getLatLng() : e.getBounds())
                        }), t
                    },
                    _propagateEvent: function(t) {
                        t = o.extend({
                            layer: t.target,
                            target: this
                        }, t), this.fire(t.type, t)
                    }
                }), o.featureGroup = function(t) {
                    return new o.FeatureGroup(t)
                }, o.Path = o.Class.extend({
                    includes: [o.Mixin.Events],
                    statics: {
                        CLIP_PADDING: function() {
                            var e = o.Browser.mobile ? 1280 : 2e3,
                                i = (e / Math.max(t.outerWidth, t.outerHeight) - 1) / 2;
                            return Math.max(0, Math.min(.5, i))
                        }()
                    },
                    options: {
                        stroke: !0,
                        color: "#0033ff",
                        dashArray: null,
                        lineCap: null,
                        lineJoin: null,
                        weight: 5,
                        opacity: .5,
                        fill: !1,
                        fillColor: null,
                        fillOpacity: .2,
                        clickable: !0
                    },
                    initialize: function(t) {
                        o.setOptions(this, t)
                    },
                    onAdd: function(t) {
                        this._map = t, this._container || (this._initElements(), this._initEvents()), this.projectLatlngs(), this._updatePath(), this._container && this._map._pathRoot.appendChild(this._container), this.fire("add"), t.on({
                            viewreset: this.projectLatlngs,
                            moveend: this._updatePath
                        }, this)
                    },
                    addTo: function(t) {
                        return t.addLayer(this), this
                    },
                    onRemove: function(t) {
                        t._pathRoot.removeChild(this._container), this.fire("remove"), this._map = null, o.Browser.vml && (this._container = null, this._stroke = null, this._fill = null), t.off({
                            viewreset: this.projectLatlngs,
                            moveend: this._updatePath
                        }, this)
                    },
                    projectLatlngs: function() {},
                    setStyle: function(t) {
                        return o.setOptions(this, t), this._container && this._updateStyle(), this
                    },
                    redraw: function() {
                        return this._map && (this.projectLatlngs(), this._updatePath()), this
                    }
                }), o.Map.include({
                    _updatePathViewport: function() {
                        var t = o.Path.CLIP_PADDING,
                            e = this.getSize(),
                            i = o.DomUtil.getPosition(this._mapPane),
                            n = i.multiplyBy(-1)._subtract(e.multiplyBy(t)._round()),
                            s = n.add(e.multiplyBy(1 + 2 * t)._round());
                        this._pathViewport = new o.Bounds(n, s)
                    }
                }), o.Path.SVG_NS = "http://www.w3.org/2000/svg", o.Browser.svg = !(!e.createElementNS || !e.createElementNS(o.Path.SVG_NS, "svg").createSVGRect), o.Path = o.Path.extend({
                    statics: {
                        SVG: o.Browser.svg
                    },
                    bringToFront: function() {
                        var t = this._map._pathRoot,
                            e = this._container;
                        return e && t.lastChild !== e && t.appendChild(e), this
                    },
                    bringToBack: function() {
                        var t = this._map._pathRoot,
                            e = this._container,
                            i = t.firstChild;
                        return e && i !== e && t.insertBefore(e, i), this
                    },
                    getPathString: function() {},
                    _createElement: function(t) {
                        return e.createElementNS(o.Path.SVG_NS, t)
                    },
                    _initElements: function() {
                        this._map._initPathRoot(), this._initPath(), this._initStyle()
                    },
                    _initPath: function() {
                        this._container = this._createElement("g"), this._path = this._createElement("path"), this.options.className && o.DomUtil.addClass(this._path, this.options.className), this._container.appendChild(this._path)
                    },
                    _initStyle: function() {
                        this.options.stroke && (this._path.setAttribute("stroke-linejoin", "round"), this._path.setAttribute("stroke-linecap", "round")), this.options.fill && this._path.setAttribute("fill-rule", "evenodd"), this.options.pointerEvents && this._path.setAttribute("pointer-events", this.options.pointerEvents), this.options.clickable || this.options.pointerEvents || this._path.setAttribute("pointer-events", "none"), this._updateStyle()
                    },
                    _updateStyle: function() {
                        this.options.stroke ? (this._path.setAttribute("stroke", this.options.color), this._path.setAttribute("stroke-opacity", this.options.opacity), this._path.setAttribute("stroke-width", this.options.weight), this.options.dashArray ? this._path.setAttribute("stroke-dasharray", this.options.dashArray) : this._path.removeAttribute("stroke-dasharray"), this.options.lineCap && this._path.setAttribute("stroke-linecap", this.options.lineCap), this.options.lineJoin && this._path.setAttribute("stroke-linejoin", this.options.lineJoin)) : this._path.setAttribute("stroke", "none"), this.options.fill ? (this._path.setAttribute("fill", this.options.fillColor || this.options.color), this._path.setAttribute("fill-opacity", this.options.fillOpacity)) : this._path.setAttribute("fill", "none")
                    },
                    _updatePath: function() {
                        var t = this.getPathString();
                        t || (t = "M0 0"), this._path.setAttribute("d", t)
                    },
                    _initEvents: function() {
                        if (this.options.clickable) {
                            (o.Browser.svg || !o.Browser.vml) && o.DomUtil.addClass(this._path, "leaflet-clickable"), o.DomEvent.on(this._container, "click", this._onMouseClick, this);
                            for (var t = ["dblclick", "mousedown", "mouseover", "mouseout", "mousemove", "contextmenu"], e = 0; e < t.length; e++) o.DomEvent.on(this._container, t[e], this._fireMouseEvent, this)
                        }
                    },
                    _onMouseClick: function(t) {
                        this._map.dragging && this._map.dragging.moved() || this._fireMouseEvent(t)
                    },
                    _fireMouseEvent: function(t) {
                        if (this._map && this.hasEventListeners(t.type)) {
                            var e = this._map,
                                i = e.mouseEventToContainerPoint(t),
                                n = e.containerPointToLayerPoint(i),
                                s = e.layerPointToLatLng(n);
                            this.fire(t.type, {
                                latlng: s,
                                layerPoint: n,
                                containerPoint: i,
                                originalEvent: t
                            }), "contextmenu" === t.type && o.DomEvent.preventDefault(t), "mousemove" !== t.type && o.DomEvent.stopPropagation(t)
                        }
                    }
                }), o.Map.include({
                    _initPathRoot: function() {
                        this._pathRoot || (this._pathRoot = o.Path.prototype._createElement("svg"), this._panes.overlayPane.appendChild(this._pathRoot), this.options.zoomAnimation && o.Browser.any3d ? (o.DomUtil.addClass(this._pathRoot, "leaflet-zoom-animated"),
                            this.on({
                                zoomanim: this._animatePathZoom,
                                zoomend: this._endPathZoom
                            })) : o.DomUtil.addClass(this._pathRoot, "leaflet-zoom-hide"), this.on("moveend", this._updateSvgViewport), this._updateSvgViewport())
                    },
                    _animatePathZoom: function(t) {
                        var e = this.getZoomScale(t.zoom),
                            i = this._getCenterOffset(t.center)._multiplyBy(-e)._add(this._pathViewport.min);
                        this._pathRoot.style[o.DomUtil.TRANSFORM] = o.DomUtil.getTranslateString(i) + " scale(" + e + ") ", this._pathZooming = !0
                    },
                    _endPathZoom: function() {
                        this._pathZooming = !1
                    },
                    _updateSvgViewport: function() {
                        if (!this._pathZooming) {
                            this._updatePathViewport();
                            var t = this._pathViewport,
                                e = t.min,
                                i = t.max,
                                n = i.x - e.x,
                                s = i.y - e.y,
                                a = this._pathRoot,
                                r = this._panes.overlayPane;
                            o.Browser.mobileWebkit && r.removeChild(a), o.DomUtil.setPosition(a, e), a.setAttribute("width", n), a.setAttribute("height", s), a.setAttribute("viewBox", [e.x, e.y, n, s].join(" ")), o.Browser.mobileWebkit && r.appendChild(a)
                        }
                    }
                }), o.Path.include({
                    bindPopup: function(t, e) {
                        return t instanceof o.Popup ? this._popup = t : ((!this._popup || e) && (this._popup = new o.Popup(e, this)), this._popup.setContent(t)), this._popupHandlersAdded || (this.on("click", this._openPopup, this).on("remove", this.closePopup, this), this._popupHandlersAdded = !0), this
                    },
                    unbindPopup: function() {
                        return this._popup && (this._popup = null, this.off("click", this._openPopup).off("remove", this.closePopup), this._popupHandlersAdded = !1), this
                    },
                    openPopup: function(t) {
                        return this._popup && (t = t || this._latlng || this._latlngs[Math.floor(this._latlngs.length / 2)], this._openPopup({
                            latlng: t
                        })), this
                    },
                    closePopup: function() {
                        return this._popup && this._popup._close(), this
                    },
                    _openPopup: function(t) {
                        this._popup.setLatLng(t.latlng), this._map.openPopup(this._popup)
                    }
                }), o.Browser.vml = !o.Browser.svg && function() {
                    try {
                        var t = e.createElement("div");
                        t.innerHTML = '<v:shape adj="1"/>';
                        var i = t.firstChild;
                        return i.style.behavior = "url(#default#VML)", i && "object" == typeof i.adj
                    } catch (n) {
                        return !1
                    }
                }(), o.Path = o.Browser.svg || !o.Browser.vml ? o.Path : o.Path.extend({
                    statics: {
                        VML: !0,
                        CLIP_PADDING: .02
                    },
                    _createElement: function() {
                        try {
                            return e.namespaces.add("lvml", "urn:schemas-microsoft-com:vml"),
                                function(t) {
                                    return e.createElement("<lvml:" + t + ' class="lvml">')
                                }
                        } catch (t) {
                            return function(t) {
                                return e.createElement("<" + t + ' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')
                            }
                        }
                    }(),
                    _initPath: function() {
                        var t = this._container = this._createElement("shape");
                        o.DomUtil.addClass(t, "leaflet-vml-shape" + (this.options.className ? " " + this.options.className : "")), this.options.clickable && o.DomUtil.addClass(t, "leaflet-clickable"), t.coordsize = "1 1", this._path = this._createElement("path"), t.appendChild(this._path), this._map._pathRoot.appendChild(t)
                    },
                    _initStyle: function() {
                        this._updateStyle()
                    },
                    _updateStyle: function() {
                        var t = this._stroke,
                            e = this._fill,
                            i = this.options,
                            n = this._container;
                        n.stroked = i.stroke, n.filled = i.fill, i.stroke ? (t || (t = this._stroke = this._createElement("stroke"), t.endcap = "round", n.appendChild(t)), t.weight = i.weight + "px", t.color = i.color, t.opacity = i.opacity, i.dashArray ? t.dashStyle = o.Util.isArray(i.dashArray) ? i.dashArray.join(" ") : i.dashArray.replace(/( *, *)/g, " ") : t.dashStyle = "", i.lineCap && (t.endcap = i.lineCap.replace("butt", "flat")), i.lineJoin && (t.joinstyle = i.lineJoin)) : t && (n.removeChild(t), this._stroke = null), i.fill ? (e || (e = this._fill = this._createElement("fill"), n.appendChild(e)), e.color = i.fillColor || i.color, e.opacity = i.fillOpacity) : e && (n.removeChild(e), this._fill = null)
                    },
                    _updatePath: function() {
                        var t = this._container.style;
                        t.display = "none", this._path.v = this.getPathString() + " ", t.display = ""
                    }
                }), o.Map.include(o.Browser.svg || !o.Browser.vml ? {} : {
                    _initPathRoot: function() {
                        if (!this._pathRoot) {
                            var t = this._pathRoot = e.createElement("div");
                            t.className = "leaflet-vml-container", this._panes.overlayPane.appendChild(t), this.on("moveend", this._updatePathViewport), this._updatePathViewport()
                        }
                    }
                }), o.Browser.canvas = function() {
                    return !!e.createElement("canvas").getContext
                }(), o.Path = o.Path.SVG && !t.L_PREFER_CANVAS || !o.Browser.canvas ? o.Path : o.Path.extend({
                    statics: {
                        CANVAS: !0,
                        SVG: !1
                    },
                    redraw: function() {
                        return this._map && (this.projectLatlngs(), this._requestUpdate()), this
                    },
                    setStyle: function(t) {
                        return o.setOptions(this, t), this._map && (this._updateStyle(), this._requestUpdate()), this
                    },
                    onRemove: function(t) {
                        t.off("viewreset", this.projectLatlngs, this).off("moveend", this._updatePath, this), this.options.clickable && (this._map.off("click", this._onClick, this), this._map.off("mousemove", this._onMouseMove, this)), this._requestUpdate(), this.fire("remove"), this._map = null
                    },
                    _requestUpdate: function() {
                        this._map && !o.Path._updateRequest && (o.Path._updateRequest = o.Util.requestAnimFrame(this._fireMapMoveEnd, this._map))
                    },
                    _fireMapMoveEnd: function() {
                        o.Path._updateRequest = null, this.fire("moveend")
                    },
                    _initElements: function() {
                        this._map._initPathRoot(), this._ctx = this._map._canvasCtx
                    },
                    _updateStyle: function() {
                        var t = this.options;
                        t.stroke && (this._ctx.lineWidth = t.weight, this._ctx.strokeStyle = t.color), t.fill && (this._ctx.fillStyle = t.fillColor || t.color), t.lineCap && (this._ctx.lineCap = t.lineCap), t.lineJoin && (this._ctx.lineJoin = t.lineJoin)
                    },
                    _drawPath: function() {
                        var t, e, i, n, s, a;
                        for (this._ctx.beginPath(), t = 0, i = this._parts.length; i > t; t++) {
                            for (e = 0, n = this._parts[t].length; n > e; e++) s = this._parts[t][e], a = (0 === e ? "move" : "line") + "To", this._ctx[a](s.x, s.y);
                            this instanceof o.Polygon && this._ctx.closePath()
                        }
                    },
                    _checkIfEmpty: function() {
                        return !this._parts.length
                    },
                    _updatePath: function() {
                        if (!this._checkIfEmpty()) {
                            var t = this._ctx,
                                e = this.options;
                            this._drawPath(), t.save(), this._updateStyle(), e.fill && (t.globalAlpha = e.fillOpacity, t.fill(e.fillRule || "evenodd")), e.stroke && (t.globalAlpha = e.opacity, t.stroke()), t.restore()
                        }
                    },
                    _initEvents: function() {
                        this.options.clickable && (this._map.on("mousemove", this._onMouseMove, this), this._map.on("click dblclick contextmenu", this._fireMouseEvent, this))
                    },
                    _fireMouseEvent: function(t) {
                        this._containsPoint(t.layerPoint) && this.fire(t.type, t)
                    },
                    _onMouseMove: function(t) {
                        this._map && !this._map._animatingZoom && (this._containsPoint(t.layerPoint) ? (this._ctx.canvas.style.cursor = "pointer", this._mouseInside = !0, this.fire("mouseover", t)) : this._mouseInside && (this._ctx.canvas.style.cursor = "", this._mouseInside = !1, this.fire("mouseout", t)))
                    }
                }), o.Map.include(o.Path.SVG && !t.L_PREFER_CANVAS || !o.Browser.canvas ? {} : {
                    _initPathRoot: function() {
                        var t, i = this._pathRoot;
                        i || (i = this._pathRoot = e.createElement("canvas"), i.style.position = "absolute", t = this._canvasCtx = i.getContext("2d"), t.lineCap = "round", t.lineJoin = "round", this._panes.overlayPane.appendChild(i), this.options.zoomAnimation && (this._pathRoot.className = "leaflet-zoom-animated", this.on("zoomanim", this._animatePathZoom), this.on("zoomend", this._endPathZoom)), this.on("moveend", this._updateCanvasViewport), this._updateCanvasViewport())
                    },
                    _updateCanvasViewport: function() {
                        if (!this._pathZooming) {
                            this._updatePathViewport();
                            var t = this._pathViewport,
                                e = t.min,
                                i = t.max.subtract(e),
                                n = this._pathRoot;
                            o.DomUtil.setPosition(n, e), n.width = i.x, n.height = i.y, n.getContext("2d").translate(-e.x, -e.y)
                        }
                    }
                }), o.LineUtil = {
                    simplify: function(t, e) {
                        if (!e || !t.length) return t.slice();
                        var i = e * e;
                        return t = this._reducePoints(t, i), t = this._simplifyDP(t, i)
                    },
                    pointToSegmentDistance: function(t, e, i) {
                        return Math.sqrt(this._sqClosestPointOnSegment(t, e, i, !0))
                    },
                    closestPointOnSegment: function(t, e, i) {
                        return this._sqClosestPointOnSegment(t, e, i)
                    },
                    _simplifyDP: function(t, e) {
                        var n = t.length,
                            o = typeof Uint8Array != i + "" ? Uint8Array : Array,
                            s = new o(n);
                        s[0] = s[n - 1] = 1, this._simplifyDPStep(t, s, e, 0, n - 1);
                        var a, r = [];
                        for (a = 0; n > a; a++) s[a] && r.push(t[a]);
                        return r
                    },
                    _simplifyDPStep: function(t, e, i, n, o) {
                        var s, a, r, h = 0;
                        for (a = n + 1; o - 1 >= a; a++) r = this._sqClosestPointOnSegment(t[a], t[n], t[o], !0), r > h && (s = a, h = r);
                        h > i && (e[s] = 1, this._simplifyDPStep(t, e, i, n, s), this._simplifyDPStep(t, e, i, s, o))
                    },
                    _reducePoints: function(t, e) {
                        for (var i = [t[0]], n = 1, o = 0, s = t.length; s > n; n++) this._sqDist(t[n], t[o]) > e && (i.push(t[n]), o = n);
                        return s - 1 > o && i.push(t[s - 1]), i
                    },
                    clipSegment: function(t, e, i, n) {
                        var o, s, a, r = n ? this._lastCode : this._getBitCode(t, i),
                            h = this._getBitCode(e, i);
                        for (this._lastCode = h;;) {
                            if (!(r | h)) return [t, e];
                            if (r & h) return !1;
                            o = r || h, s = this._getEdgeIntersection(t, e, o, i), a = this._getBitCode(s, i), o === r ? (t = s, r = a) : (e = s, h = a)
                        }
                    },
                    _getEdgeIntersection: function(t, e, i, n) {
                        var s = e.x - t.x,
                            a = e.y - t.y,
                            r = n.min,
                            h = n.max;
                        return 8 & i ? new o.Point(t.x + s * (h.y - t.y) / a, h.y) : 4 & i ? new o.Point(t.x + s * (r.y - t.y) / a, r.y) : 2 & i ? new o.Point(h.x, t.y + a * (h.x - t.x) / s) : 1 & i ? new o.Point(r.x, t.y + a * (r.x - t.x) / s) : void 0
                    },
                    _getBitCode: function(t, e) {
                        var i = 0;
                        return t.x < e.min.x ? i |= 1 : t.x > e.max.x && (i |= 2), t.y < e.min.y ? i |= 4 : t.y > e.max.y && (i |= 8), i
                    },
                    _sqDist: function(t, e) {
                        var i = e.x - t.x,
                            n = e.y - t.y;
                        return i * i + n * n
                    },
                    _sqClosestPointOnSegment: function(t, e, i, n) {
                        var s, a = e.x,
                            r = e.y,
                            h = i.x - a,
                            l = i.y - r,
                            u = h * h + l * l;
                        return u > 0 && (s = ((t.x - a) * h + (t.y - r) * l) / u, s > 1 ? (a = i.x, r = i.y) : s > 0 && (a += h * s, r += l * s)), h = t.x - a, l = t.y - r, n ? h * h + l * l : new o.Point(a, r)
                    }
                }, o.Polyline = o.Path.extend({
                    initialize: function(t, e) {
                        o.Path.prototype.initialize.call(this, e), this._latlngs = this._convertLatLngs(t)
                    },
                    options: {
                        smoothFactor: 1,
                        noClip: !1
                    },
                    projectLatlngs: function() {
                        this._originalPoints = [];
                        for (var t = 0, e = this._latlngs.length; e > t; t++) this._originalPoints[t] = this._map.latLngToLayerPoint(this._latlngs[t])
                    },
                    getPathString: function() {
                        for (var t = 0, e = this._parts.length, i = ""; e > t; t++) i += this._getPathPartStr(this._parts[t]);
                        return i
                    },
                    getLatLngs: function() {
                        return this._latlngs
                    },
                    setLatLngs: function(t) {
                        return this._latlngs = this._convertLatLngs(t), this.redraw()
                    },
                    addLatLng: function(t) {
                        return this._latlngs.push(o.latLng(t)), this.redraw()
                    },
                    spliceLatLngs: function() {
                        var t = [].splice.apply(this._latlngs, arguments);
                        return this._convertLatLngs(this._latlngs, !0), this.redraw(), t
                    },
                    closestLayerPoint: function(t) {
                        for (var e, i, n = 1 / 0, s = this._parts, a = null, r = 0, h = s.length; h > r; r++)
                            for (var l = s[r], u = 1, c = l.length; c > u; u++) {
                                e = l[u - 1], i = l[u];
                                var d = o.LineUtil._sqClosestPointOnSegment(t, e, i, !0);
                                n > d && (n = d, a = o.LineUtil._sqClosestPointOnSegment(t, e, i))
                            }
                        return a && (a.distance = Math.sqrt(n)), a
                    },
                    getBounds: function() {
                        return new o.LatLngBounds(this.getLatLngs())
                    },
                    _convertLatLngs: function(t, e) {
                        var i, n, s = e ? t : [];
                        for (i = 0, n = t.length; n > i; i++) {
                            if (o.Util.isArray(t[i]) && "number" != typeof t[i][0]) return;
                            s[i] = o.latLng(t[i])
                        }
                        return s
                    },
                    _initEvents: function() {
                        o.Path.prototype._initEvents.call(this)
                    },
                    _getPathPartStr: function(t) {
                        for (var e, i = o.Path.VML, n = 0, s = t.length, a = ""; s > n; n++) e = t[n], i && e._round(), a += (n ? "L" : "M") + e.x + " " + e.y;
                        return a
                    },
                    _clipPoints: function() {
                        var t, e, i, n = this._originalPoints,
                            s = n.length;
                        if (this.options.noClip) return void(this._parts = [n]);
                        this._parts = [];
                        var a = this._parts,
                            r = this._map._pathViewport,
                            h = o.LineUtil;
                        for (t = 0, e = 0; s - 1 > t; t++) i = h.clipSegment(n[t], n[t + 1], r, t), i && (a[e] = a[e] || [], a[e].push(i[0]), (i[1] !== n[t + 1] || t === s - 2) && (a[e].push(i[1]), e++))
                    },
                    _simplifyPoints: function() {
                        for (var t = this._parts, e = o.LineUtil, i = 0, n = t.length; n > i; i++) t[i] = e.simplify(t[i], this.options.smoothFactor)
                    },
                    _updatePath: function() {
                        this._map && (this._clipPoints(), this._simplifyPoints(), o.Path.prototype._updatePath.call(this))
                    }
                }), o.polyline = function(t, e) {
                    return new o.Polyline(t, e)
                }, o.PolyUtil = {}, o.PolyUtil.clipPolygon = function(t, e) {
                    var i, n, s, a, r, h, l, u, c, d = [1, 4, 2, 8],
                        p = o.LineUtil;
                    for (n = 0, l = t.length; l > n; n++) t[n]._code = p._getBitCode(t[n], e);
                    for (a = 0; 4 > a; a++) {
                        for (u = d[a], i = [], n = 0, l = t.length, s = l - 1; l > n; s = n++) r = t[n], h = t[s], r._code & u ? h._code & u || (c = p._getEdgeIntersection(h, r, u, e), c._code = p._getBitCode(c, e), i.push(c)) : (h._code & u && (c = p._getEdgeIntersection(h, r, u, e), c._code = p._getBitCode(c, e), i.push(c)), i.push(r));
                        t = i
                    }
                    return t
                }, o.Polygon = o.Polyline.extend({
                    options: {
                        fill: !0
                    },
                    initialize: function(t, e) {
                        o.Polyline.prototype.initialize.call(this, t, e), this._initWithHoles(t)
                    },
                    _initWithHoles: function(t) {
                        var e, i, n;
                        if (t && o.Util.isArray(t[0]) && "number" != typeof t[0][0])
                            for (this._latlngs = this._convertLatLngs(t[0]), this._holes = t.slice(1), e = 0, i = this._holes.length; i > e; e++) n = this._holes[e] = this._convertLatLngs(this._holes[e]), n[0].equals(n[n.length - 1]) && n.pop();
                        t = this._latlngs, t.length >= 2 && t[0].equals(t[t.length - 1]) && t.pop()
                    },
                    projectLatlngs: function() {
                        if (o.Polyline.prototype.projectLatlngs.call(this), this._holePoints = [], this._holes) {
                            var t, e, i, n;
                            for (t = 0, i = this._holes.length; i > t; t++)
                                for (this._holePoints[t] = [], e = 0, n = this._holes[t].length; n > e; e++) this._holePoints[t][e] = this._map.latLngToLayerPoint(this._holes[t][e])
                        }
                    },
                    setLatLngs: function(t) {
                        return t && o.Util.isArray(t[0]) && "number" != typeof t[0][0] ? (this._initWithHoles(t), this.redraw()) : o.Polyline.prototype.setLatLngs.call(this, t)
                    },
                    _clipPoints: function() {
                        var t = this._originalPoints,
                            e = [];
                        if (this._parts = [t].concat(this._holePoints), !this.options.noClip) {
                            for (var i = 0, n = this._parts.length; n > i; i++) {
                                var s = o.PolyUtil.clipPolygon(this._parts[i], this._map._pathViewport);
                                s.length && e.push(s)
                            }
                            this._parts = e
                        }
                    },
                    _getPathPartStr: function(t) {
                        var e = o.Polyline.prototype._getPathPartStr.call(this, t);
                        return e + (o.Browser.svg ? "z" : "x")
                    }
                }), o.polygon = function(t, e) {
                    return new o.Polygon(t, e)
                },
                function() {
                    function t(t) {
                        return o.FeatureGroup.extend({
                            initialize: function(t, e) {
                                this._layers = {}, this._options = e, this.setLatLngs(t)
                            },
                            setLatLngs: function(e) {
                                var i = 0,
                                    n = e.length;
                                for (this.eachLayer(function(t) {
                                        n > i ? t.setLatLngs(e[i++]) : this.removeLayer(t)
                                    }, this); n > i;) this.addLayer(new t(e[i++], this._options));
                                return this
                            },
                            getLatLngs: function() {
                                var t = [];
                                return this.eachLayer(function(e) {
                                    t.push(e.getLatLngs())
                                }), t
                            }
                        })
                    }
                    o.MultiPolyline = t(o.Polyline), o.MultiPolygon = t(o.Polygon), o.multiPolyline = function(t, e) {
                        return new o.MultiPolyline(t, e)
                    }, o.multiPolygon = function(t, e) {
                        return new o.MultiPolygon(t, e)
                    }
                }(), o.Rectangle = o.Polygon.extend({
                    initialize: function(t, e) {
                        o.Polygon.prototype.initialize.call(this, this._boundsToLatLngs(t), e)
                    },
                    setBounds: function(t) {
                        this.setLatLngs(this._boundsToLatLngs(t))
                    },
                    _boundsToLatLngs: function(t) {
                        return t = o.latLngBounds(t), [t.getSouthWest(), t.getNorthWest(), t.getNorthEast(), t.getSouthEast()]
                    }
                }), o.rectangle = function(t, e) {
                    return new o.Rectangle(t, e)
                }, o.Circle = o.Path.extend({
                    initialize: function(t, e, i) {
                        o.Path.prototype.initialize.call(this, i), this._latlng = o.latLng(t), this._mRadius = e
                    },
                    options: {
                        fill: !0
                    },
                    setLatLng: function(t) {
                        return this._latlng = o.latLng(t), this.redraw()
                    },
                    setRadius: function(t) {
                        return this._mRadius = t, this.redraw()
                    },
                    projectLatlngs: function() {
                        var t = this._getLngRadius(),
                            e = this._latlng,
                            i = this._map.latLngToLayerPoint([e.lat, e.lng - t]);
                        this._point = this._map.latLngToLayerPoint(e), this._radius = Math.max(this._point.x - i.x, 1)
                    },
                    getBounds: function() {
                        var t = this._getLngRadius(),
                            e = this._mRadius / 40075017 * 360,
                            i = this._latlng;
                        return new o.LatLngBounds([i.lat - e, i.lng - t], [i.lat + e, i.lng + t])
                    },
                    getLatLng: function() {
                        return this._latlng
                    },
                    getPathString: function() {
                        var t = this._point,
                            e = this._radius;
                        return this._checkIfEmpty() ? "" : o.Browser.svg ? "M" + t.x + "," + (t.y - e) + "A" + e + "," + e + ",0,1,1," + (t.x - .1) + "," + (t.y - e) + " z" : (t._round(), e = Math.round(e), "AL " + t.x + "," + t.y + " " + e + "," + e + " 0,23592600")
                    },
                    getRadius: function() {
                        return this._mRadius
                    },
                    _getLatRadius: function() {
                        return this._mRadius / 40075017 * 360
                    },
                    _getLngRadius: function() {
                        return this._getLatRadius() / Math.cos(o.LatLng.DEG_TO_RAD * this._latlng.lat)
                    },
                    _checkIfEmpty: function() {
                        if (!this._map) return !1;
                        var t = this._map._pathViewport,
                            e = this._radius,
                            i = this._point;
                        return i.x - e > t.max.x || i.y - e > t.max.y || i.x + e < t.min.x || i.y + e < t.min.y
                    }
                }), o.circle = function(t, e, i) {
                    return new o.Circle(t, e, i)
                }, o.CircleMarker = o.Circle.extend({
                    options: {
                        radius: 10,
                        weight: 2
                    },
                    initialize: function(t, e) {
                        o.Circle.prototype.initialize.call(this, t, null, e), this._radius = this.options.radius
                    },
                    projectLatlngs: function() {
                        this._point = this._map.latLngToLayerPoint(this._latlng)
                    },
                    _updateStyle: function() {
                        o.Circle.prototype._updateStyle.call(this), this.setRadius(this.options.radius)
                    },
                    setLatLng: function(t) {
                        return o.Circle.prototype.setLatLng.call(this, t), this._popup && this._popup._isOpen && this._popup.setLatLng(t), this
                    },
                    setRadius: function(t) {
                        return this.options.radius = this._radius = t, this.redraw()
                    },
                    getRadius: function() {
                        return this._radius
                    }
                }), o.circleMarker = function(t, e) {
                    return new o.CircleMarker(t, e)
                }, o.Polyline.include(o.Path.CANVAS ? {
                    _containsPoint: function(t, e) {
                        var i, n, s, a, r, h, l, u = this.options.weight / 2;
                        for (o.Browser.touch && (u += 10), i = 0, a = this._parts.length; a > i; i++)
                            for (l = this._parts[i], n = 0, r = l.length, s = r - 1; r > n; s = n++)
                                if ((e || 0 !== n) && (h = o.LineUtil.pointToSegmentDistance(t, l[s], l[n]), u >= h)) return !0;
                        return !1
                    }
                } : {}), o.Polygon.include(o.Path.CANVAS ? {
                    _containsPoint: function(t) {
                        var e, i, n, s, a, r, h, l, u = !1;
                        if (o.Polyline.prototype._containsPoint.call(this, t, !0)) return !0;
                        for (s = 0, h = this._parts.length; h > s; s++)
                            for (e = this._parts[s], a = 0, l = e.length, r = l - 1; l > a; r = a++) i = e[a], n = e[r], i.y > t.y != n.y > t.y && t.x < (n.x - i.x) * (t.y - i.y) / (n.y - i.y) + i.x && (u = !u);
                        return u
                    }
                } : {}), o.Circle.include(o.Path.CANVAS ? {
                    _drawPath: function() {
                        var t = this._point;
                        this._ctx.beginPath(), this._ctx.arc(t.x, t.y, this._radius, 0, 2 * Math.PI, !1)
                    },
                    _containsPoint: function(t) {
                        var e = this._point,
                            i = this.options.stroke ? this.options.weight / 2 : 0;
                        return t.distanceTo(e) <= this._radius + i
                    }
                } : {}), o.CircleMarker.include(o.Path.CANVAS ? {
                    _updateStyle: function() {
                        o.Path.prototype._updateStyle.call(this)
                    }
                } : {}), o.GeoJSON = o.FeatureGroup.extend({
                    initialize: function(t, e) {
                        o.setOptions(this, e), this._layers = {}, t && this.addData(t)
                    },
                    addData: function(t) {
                        var e, i, n, s = o.Util.isArray(t) ? t : t.features;
                        if (s) {
                            for (e = 0, i = s.length; i > e; e++) n = s[e], (n.geometries || n.geometry || n.features || n.coordinates) && this.addData(s[e]);
                            return this
                        }
                        var a = this.options;
                        if (!a.filter || a.filter(t)) {
                            var r = o.GeoJSON.geometryToLayer(t, a.pointToLayer, a.coordsToLatLng, a);
                            return r.feature = o.GeoJSON.asFeature(t), r.defaultOptions = r.options, this.resetStyle(r), a.onEachFeature && a.onEachFeature(t, r), this.addLayer(r)
                        }
                    },
                    resetStyle: function(t) {
                        var e = this.options.style;
                        e && (o.Util.extend(t.options, t.defaultOptions), this._setLayerStyle(t, e))
                    },
                    setStyle: function(t) {
                        this.eachLayer(function(e) {
                            this._setLayerStyle(e, t)
                        }, this)
                    },
                    _setLayerStyle: function(t, e) {
                        "function" == typeof e && (e = e(t.feature)), t.setStyle && t.setStyle(e)
                    }
                }), o.extend(o.GeoJSON, {
                    geometryToLayer: function(t, e, i, n) {
                        var s, a, r, h, l = "Feature" === t.type ? t.geometry : t,
                            u = l.coordinates,
                            c = [];
                        switch (i = i || this.coordsToLatLng, l.type) {
                            case "Point":
                                return s = i(u), e ? e(t, s) : new o.Marker(s);
                            case "MultiPoint":
                                for (r = 0, h = u.length; h > r; r++) s = i(u[r]), c.push(e ? e(t, s) : new o.Marker(s));
                                return new o.FeatureGroup(c);
                            case "LineString":
                                return a = this.coordsToLatLngs(u, 0, i), new o.Polyline(a, n);
                            case "Polygon":
                                if (2 === u.length && !u[1].length) throw new Error("Invalid GeoJSON object.");
                                return a = this.coordsToLatLngs(u, 1, i), new o.Polygon(a, n);
                            case "MultiLineString":
                                return a = this.coordsToLatLngs(u, 1, i), new o.MultiPolyline(a, n);
                            case "MultiPolygon":
                                return a = this.coordsToLatLngs(u, 2, i), new o.MultiPolygon(a, n);
                            case "GeometryCollection":
                                for (r = 0, h = l.geometries.length; h > r; r++) c.push(this.geometryToLayer({
                                    geometry: l.geometries[r],
                                    type: "Feature",
                                    properties: t.properties
                                }, e, i, n));
                                return new o.FeatureGroup(c);
                            default:
                                throw new Error("Invalid GeoJSON object.")
                        }
                    },
                    coordsToLatLng: function(t) {
                        return new o.LatLng(t[1], t[0], t[2])
                    },
                    coordsToLatLngs: function(t, e, i) {
                        var n, o, s, a = [];
                        for (o = 0, s = t.length; s > o; o++) n = e ? this.coordsToLatLngs(t[o], e - 1, i) : (i || this.coordsToLatLng)(t[o]), a.push(n);
                        return a
                    },
                    latLngToCoords: function(t) {
                        var e = [t.lng, t.lat];
                        return t.alt !== i && e.push(t.alt), e
                    },
                    latLngsToCoords: function(t) {
                        for (var e = [], i = 0, n = t.length; n > i; i++) e.push(o.GeoJSON.latLngToCoords(t[i]));
                        return e
                    },
                    getFeature: function(t, e) {
                        return t.feature ? o.extend({}, t.feature, {
                            geometry: e
                        }) : o.GeoJSON.asFeature(e)
                    },
                    asFeature: function(t) {
                        return "Feature" === t.type ? t : {
                            type: "Feature",
                            properties: {},
                            geometry: t
                        }
                    }
                });
            var a = {
                toGeoJSON: function() {
                    return o.GeoJSON.getFeature(this, {
                        type: "Point",
                        coordinates: o.GeoJSON.latLngToCoords(this.getLatLng())
                    })
                }
            };
            o.Marker.include(a), o.Circle.include(a), o.CircleMarker.include(a), o.Polyline.include({
                    toGeoJSON: function() {
                        return o.GeoJSON.getFeature(this, {
                            type: "LineString",
                            coordinates: o.GeoJSON.latLngsToCoords(this.getLatLngs())
                        })
                    }
                }), o.Polygon.include({
                    toGeoJSON: function() {
                        var t, e, i, n = [o.GeoJSON.latLngsToCoords(this.getLatLngs())];
                        if (n[0].push(n[0][0]), this._holes)
                            for (t = 0, e = this._holes.length; e > t; t++) i = o.GeoJSON.latLngsToCoords(this._holes[t]), i.push(i[0]), n.push(i);
                        return o.GeoJSON.getFeature(this, {
                            type: "Polygon",
                            coordinates: n
                        })
                    }
                }),
                function() {
                    function t(t) {
                        return function() {
                            var e = [];
                            return this.eachLayer(function(t) {
                                e.push(t.toGeoJSON().geometry.coordinates)
                            }), o.GeoJSON.getFeature(this, {
                                type: t,
                                coordinates: e
                            })
                        }
                    }
                    o.MultiPolyline.include({
                        toGeoJSON: t("MultiLineString")
                    }), o.MultiPolygon.include({
                        toGeoJSON: t("MultiPolygon")
                    }), o.LayerGroup.include({
                        toGeoJSON: function() {
                            var e, i = this.feature && this.feature.geometry,
                                n = [];
                            if (i && "MultiPoint" === i.type) return t("MultiPoint").call(this);
                            var s = i && "GeometryCollection" === i.type;
                            return this.eachLayer(function(t) {
                                t.toGeoJSON && (e = t.toGeoJSON(), n.push(s ? e.geometry : o.GeoJSON.asFeature(e)))
                            }), s ? o.GeoJSON.getFeature(this, {
                                geometries: n,
                                type: "GeometryCollection"
                            }) : {
                                type: "FeatureCollection",
                                features: n
                            }
                        }
                    })
                }(), o.geoJson = function(t, e) {
                    return new o.GeoJSON(t, e)
                }, o.DomEvent = {
                    addListener: function(t, e, i, n) {
                        var s, a, r, h = o.stamp(i),
                            l = "_leaflet_" + e + h;
                        return t[l] ? this : (s = function(e) {
                            return i.call(n || t, e || o.DomEvent._getEvent())
                        }, o.Browser.pointer && 0 === e.indexOf("touch") ? this.addPointerListener(t, e, s, h) : (o.Browser.touch && "dblclick" === e && this.addDoubleTapListener && this.addDoubleTapListener(t, s, h), "addEventListener" in t ? "mousewheel" === e ? (t.addEventListener("DOMMouseScroll", s, !1), t.addEventListener(e, s, !1)) : "mouseenter" === e || "mouseleave" === e ? (a = s, r = "mouseenter" === e ? "mouseover" : "mouseout", s = function(e) {
                            return o.DomEvent._checkMouse(t, e) ? a(e) : void 0
                        }, t.addEventListener(r, s, !1)) : "click" === e && o.Browser.android ? (a = s, s = function(t) {
                            return o.DomEvent._filterClick(t, a)
                        }, t.addEventListener(e, s, !1)) : t.addEventListener(e, s, !1) : "attachEvent" in t && t.attachEvent("on" + e, s), t[l] = s, this))
                    },
                    removeListener: function(t, e, i) {
                        var n = o.stamp(i),
                            s = "_leaflet_" + e + n,
                            a = t[s];
                        return a ? (o.Browser.pointer && 0 === e.indexOf("touch") ? this.removePointerListener(t, e, n) : o.Browser.touch && "dblclick" === e && this.removeDoubleTapListener ? this.removeDoubleTapListener(t, n) : "removeEventListener" in t ? "mousewheel" === e ? (t.removeEventListener("DOMMouseScroll", a, !1), t.removeEventListener(e, a, !1)) : "mouseenter" === e || "mouseleave" === e ? t.removeEventListener("mouseenter" === e ? "mouseover" : "mouseout", a, !1) : t.removeEventListener(e, a, !1) : "detachEvent" in t && t.detachEvent("on" + e, a), t[s] = null, this) : this
                    },
                    stopPropagation: function(t) {
                        return t.stopPropagation ? t.stopPropagation() : t.cancelBubble = !0, o.DomEvent._skipped(t), this
                    },
                    disableScrollPropagation: function(t) {
                        var e = o.DomEvent.stopPropagation;
                        return o.DomEvent.on(t, "mousewheel", e).on(t, "MozMousePixelScroll", e)
                    },
                    disableClickPropagation: function(t) {
                        for (var e = o.DomEvent.stopPropagation, i = o.Draggable.START.length - 1; i >= 0; i--) o.DomEvent.on(t, o.Draggable.START[i], e);
                        return o.DomEvent.on(t, "click", o.DomEvent._fakeStop).on(t, "dblclick", e)
                    },
                    preventDefault: function(t) {
                        return t.preventDefault ? t.preventDefault() : t.returnValue = !1, this
                    },
                    stop: function(t) {
                        return o.DomEvent.preventDefault(t).stopPropagation(t)
                    },
                    getMousePosition: function(t, e) {
                        if (!e) return new o.Point(t.clientX, t.clientY);
                        var i = e.getBoundingClientRect();
                        return new o.Point(t.clientX - i.left - e.clientLeft, t.clientY - i.top - e.clientTop)
                    },
                    getWheelDelta: function(t) {
                        var e = 0;
                        return t.wheelDelta && (e = t.wheelDelta / 120), t.detail && (e = -t.detail / 3), e
                    },
                    _skipEvents: {},
                    _fakeStop: function(t) {
                        o.DomEvent._skipEvents[t.type] = !0
                    },
                    _skipped: function(t) {
                        var e = this._skipEvents[t.type];
                        return this._skipEvents[t.type] = !1, e
                    },
                    _checkMouse: function(t, e) {
                        var i = e.relatedTarget;
                        if (!i) return !0;
                        try {
                            for (; i && i !== t;) i = i.parentNode
                        } catch (n) {
                            return !1
                        }
                        return i !== t
                    },
                    _getEvent: function() {
                        var e = t.event;
                        if (!e)
                            for (var i = arguments.callee.caller; i && (e = i.arguments[0], !e || t.Event !== e.constructor);) i = i.caller;
                        return e
                    },
                    _filterClick: function(t, e) {
                        var i = t.timeStamp || t.originalEvent.timeStamp,
                            n = o.DomEvent._lastClick && i - o.DomEvent._lastClick;
                        return n && n > 100 && 500 > n || t.target._simulatedClick && !t._simulated ? void o.DomEvent.stop(t) : (o.DomEvent._lastClick = i, e(t))
                    }
                }, o.DomEvent.on = o.DomEvent.addListener, o.DomEvent.off = o.DomEvent.removeListener, o.Draggable = o.Class.extend({
                    includes: o.Mixin.Events,
                    statics: {
                        START: o.Browser.touch ? ["touchstart", "mousedown"] : ["mousedown"],
                        END: {
                            mousedown: "mouseup",
                            touchstart: "touchend",
                            pointerdown: "touchend",
                            MSPointerDown: "touchend"
                        },
                        MOVE: {
                            mousedown: "mousemove",
                            touchstart: "touchmove",
                            pointerdown: "touchmove",
                            MSPointerDown: "touchmove"
                        }
                    },
                    initialize: function(t, e) {
                        this._element = t, this._dragStartTarget = e || t
                    },
                    enable: function() {
                        if (!this._enabled) {
                            for (var t = o.Draggable.START.length - 1; t >= 0; t--) o.DomEvent.on(this._dragStartTarget, o.Draggable.START[t], this._onDown, this);
                            this._enabled = !0
                        }
                    },
                    disable: function() {
                        if (this._enabled) {
                            for (var t = o.Draggable.START.length - 1; t >= 0; t--) o.DomEvent.off(this._dragStartTarget, o.Draggable.START[t], this._onDown, this);
                            this._enabled = !1, this._moved = !1
                        }
                    },
                    _onDown: function(t) {
                        if (this._moved = !1, !t.shiftKey && (1 === t.which || 1 === t.button || t.touches) && (o.DomEvent.stopPropagation(t), !o.Draggable._disabled && (o.DomUtil.disableImageDrag(), o.DomUtil.disableTextSelection(), !this._moving))) {
                            var i = t.touches ? t.touches[0] : t;
                            this._startPoint = new o.Point(i.clientX, i.clientY), this._startPos = this._newPos = o.DomUtil.getPosition(this._element), o.DomEvent.on(e, o.Draggable.MOVE[t.type], this._onMove, this).on(e, o.Draggable.END[t.type], this._onUp, this)
                        }
                    },
                    _onMove: function(t) {
                        if (t.touches && t.touches.length > 1) return void(this._moved = !0);
                        var i = t.touches && 1 === t.touches.length ? t.touches[0] : t,
                            n = new o.Point(i.clientX, i.clientY),
                            s = n.subtract(this._startPoint);
                        (s.x || s.y) && (o.Browser.touch && Math.abs(s.x) + Math.abs(s.y) < 3 || (o.DomEvent.preventDefault(t), this._moved || (this.fire("dragstart"), this._moved = !0, this._startPos = o.DomUtil.getPosition(this._element).subtract(s), o.DomUtil.addClass(e.body, "leaflet-dragging"), this._lastTarget = t.target || t.srcElement, o.DomUtil.addClass(this._lastTarget, "leaflet-drag-target")), this._newPos = this._startPos.add(s), this._moving = !0, o.Util.cancelAnimFrame(this._animRequest), this._animRequest = o.Util.requestAnimFrame(this._updatePosition, this, !0, this._dragStartTarget)))
                    },
                    _updatePosition: function() {
                        this.fire("predrag"), o.DomUtil.setPosition(this._element, this._newPos), this.fire("drag")
                    },
                    _onUp: function() {
                        o.DomUtil.removeClass(e.body, "leaflet-dragging"), this._lastTarget && (o.DomUtil.removeClass(this._lastTarget, "leaflet-drag-target"), this._lastTarget = null);
                        for (var t in o.Draggable.MOVE) o.DomEvent.off(e, o.Draggable.MOVE[t], this._onMove).off(e, o.Draggable.END[t], this._onUp);
                        o.DomUtil.enableImageDrag(), o.DomUtil.enableTextSelection(), this._moved && this._moving && (o.Util.cancelAnimFrame(this._animRequest), this.fire("dragend", {
                            distance: this._newPos.distanceTo(this._startPos)
                        })), this._moving = !1
                    }
                }), o.Handler = o.Class.extend({
                    initialize: function(t) {
                        this._map = t
                    },
                    enable: function() {
                        this._enabled || (this._enabled = !0, this.addHooks())
                    },
                    disable: function() {
                        this._enabled && (this._enabled = !1, this.removeHooks())
                    },
                    enabled: function() {
                        return !!this._enabled
                    }
                }), o.Map.mergeOptions({
                    dragging: !0,
                    inertia: !o.Browser.android23,
                    inertiaDeceleration: 3400,
                    inertiaMaxSpeed: 1 / 0,
                    inertiaThreshold: o.Browser.touch ? 32 : 18,
                    easeLinearity: .25,
                    worldCopyJump: !1
                }), o.Map.Drag = o.Handler.extend({
                    addHooks: function() {
                        if (!this._draggable) {
                            var t = this._map;
                            this._draggable = new o.Draggable(t._mapPane, t._container), this._draggable.on({
                                dragstart: this._onDragStart,
                                drag: this._onDrag,
                                dragend: this._onDragEnd
                            }, this), t.options.worldCopyJump && (this._draggable.on("predrag", this._onPreDrag, this), t.on("viewreset", this._onViewReset, this), t.whenReady(this._onViewReset, this))
                        }
                        this._draggable.enable()
                    },
                    removeHooks: function() {
                        this._draggable.disable()
                    },
                    moved: function() {
                        return this._draggable && this._draggable._moved
                    },
                    _onDragStart: function() {
                        var t = this._map;
                        t._panAnim && t._panAnim.stop(), t.fire("movestart").fire("dragstart"), t.options.inertia && (this._positions = [], this._times = [])
                    },
                    _onDrag: function() {
                        if (this._map.options.inertia) {
                            var t = this._lastTime = +new Date,
                                e = this._lastPos = this._draggable._newPos;
                            this._positions.push(e), this._times.push(t), t - this._times[0] > 200 && (this._positions.shift(), this._times.shift())
                        }
                        this._map.fire("move").fire("drag")
                    },
                    _onViewReset: function() {
                        var t = this._map.getSize()._divideBy(2),
                            e = this._map.latLngToLayerPoint([0, 0]);
                        this._initialWorldOffset = e.subtract(t).x, this._worldWidth = this._map.project([0, 180]).x
                    },
                    _onPreDrag: function() {
                        var t = this._worldWidth,
                            e = Math.round(t / 2),
                            i = this._initialWorldOffset,
                            n = this._draggable._newPos.x,
                            o = (n - e + i) % t + e - i,
                            s = (n + e + i) % t - e - i,
                            a = Math.abs(o + i) < Math.abs(s + i) ? o : s;
                        this._draggable._newPos.x = a
                    },
                    _onDragEnd: function(t) {
                        var e = this._map,
                            i = e.options,
                            n = +new Date - this._lastTime,
                            s = !i.inertia || n > i.inertiaThreshold || !this._positions[0];
                        if (e.fire("dragend", t), s) e.fire("moveend");
                        else {
                            var a = this._lastPos.subtract(this._positions[0]),
                                r = (this._lastTime + n - this._times[0]) / 1e3,
                                h = i.easeLinearity,
                                l = a.multiplyBy(h / r),
                                u = l.distanceTo([0, 0]),
                                c = Math.min(i.inertiaMaxSpeed, u),
                                d = l.multiplyBy(c / u),
                                p = c / (i.inertiaDeceleration * h),
                                _ = d.multiplyBy(-p / 2).round();
                            _.x && _.y ? (_ = e._limitOffset(_, e.options.maxBounds), o.Util.requestAnimFrame(function() {
                                e.panBy(_, {
                                    duration: p,
                                    easeLinearity: h,
                                    noMoveStart: !0
                                })
                            })) : e.fire("moveend")
                        }
                    }
                }), o.Map.addInitHook("addHandler", "dragging", o.Map.Drag), o.Map.mergeOptions({
                    doubleClickZoom: !0
                }), o.Map.DoubleClickZoom = o.Handler.extend({
                    addHooks: function() {
                        this._map.on("dblclick", this._onDoubleClick, this)
                    },
                    removeHooks: function() {
                        this._map.off("dblclick", this._onDoubleClick, this)
                    },
                    _onDoubleClick: function(t) {
                        var e = this._map,
                            i = e.getZoom() + (t.originalEvent.shiftKey ? -1 : 1);
                        "center" === e.options.doubleClickZoom ? e.setZoom(i) : e.setZoomAround(t.containerPoint, i)
                    }
                }), o.Map.addInitHook("addHandler", "doubleClickZoom", o.Map.DoubleClickZoom), o.Map.mergeOptions({
                    scrollWheelZoom: !0
                }), o.Map.ScrollWheelZoom = o.Handler.extend({
                    addHooks: function() {
                        o.DomEvent.on(this._map._container, "mousewheel", this._onWheelScroll, this), o.DomEvent.on(this._map._container, "MozMousePixelScroll", o.DomEvent.preventDefault), this._delta = 0
                    },
                    removeHooks: function() {
                        o.DomEvent.off(this._map._container, "mousewheel", this._onWheelScroll), o.DomEvent.off(this._map._container, "MozMousePixelScroll", o.DomEvent.preventDefault)
                    },
                    _onWheelScroll: function(t) {
                        var e = o.DomEvent.getWheelDelta(t);
                        this._delta += e, this._lastMousePos = this._map.mouseEventToContainerPoint(t), this._startTime || (this._startTime = +new Date);
                        var i = Math.max(40 - (+new Date - this._startTime), 0);
                        clearTimeout(this._timer), this._timer = setTimeout(o.bind(this._performZoom, this), i), o.DomEvent.preventDefault(t), o.DomEvent.stopPropagation(t)
                    },
                    _performZoom: function() {
                        var t = this._map,
                            e = this._delta,
                            i = t.getZoom();
                        e = e > 0 ? Math.ceil(e) : Math.floor(e), e = Math.max(Math.min(e, 4), -4), e = t._limitZoom(i + e) - i, this._delta = 0, this._startTime = null, e && ("center" === t.options.scrollWheelZoom ? t.setZoom(i + e) : t.setZoomAround(this._lastMousePos, i + e))
                    }
                }), o.Map.addInitHook("addHandler", "scrollWheelZoom", o.Map.ScrollWheelZoom), o.extend(o.DomEvent, {
                    _touchstart: o.Browser.msPointer ? "MSPointerDown" : o.Browser.pointer ? "pointerdown" : "touchstart",
                    _touchend: o.Browser.msPointer ? "MSPointerUp" : o.Browser.pointer ? "pointerup" : "touchend",
                    addDoubleTapListener: function(t, i, n) {
                        function s(t) {
                            var e;
                            if (o.Browser.pointer ? (_.push(t.pointerId), e = _.length) : e = t.touches.length, !(e > 1)) {
                                var i = Date.now(),
                                    n = i - (r || i);
                                h = t.touches ? t.touches[0] : t, l = n > 0 && u >= n, r = i
                            }
                        }

                        function a(t) {
                            if (o.Browser.pointer) {
                                var e = _.indexOf(t.pointerId);
                                if (-1 === e) return;
                                _.splice(e, 1)
                            }
                            if (l) {
                                if (o.Browser.pointer) {
                                    var n, s = {};
                                    for (var a in h) n = h[a], "function" == typeof n ? s[a] = n.bind(h) : s[a] = n;
                                    h = s
                                }
                                h.type = "dblclick", i(h), r = null
                            }
                        }
                        var r, h, l = !1,
                            u = 250,
                            c = "_leaflet_",
                            d = this._touchstart,
                            p = this._touchend,
                            _ = [];
                        t[c + d + n] = s, t[c + p + n] = a;
                        var m = o.Browser.pointer ? e.documentElement : t;
                        return t.addEventListener(d, s, !1), m.addEventListener(p, a, !1), o.Browser.pointer && m.addEventListener(o.DomEvent.POINTER_CANCEL, a, !1), this
                    },
                    removeDoubleTapListener: function(t, i) {
                        var n = "_leaflet_";
                        return t.removeEventListener(this._touchstart, t[n + this._touchstart + i], !1), (o.Browser.pointer ? e.documentElement : t).removeEventListener(this._touchend, t[n + this._touchend + i], !1), o.Browser.pointer && e.documentElement.removeEventListener(o.DomEvent.POINTER_CANCEL, t[n + this._touchend + i], !1), this
                    }
                }), o.extend(o.DomEvent, {
                    POINTER_DOWN: o.Browser.msPointer ? "MSPointerDown" : "pointerdown",
                    POINTER_MOVE: o.Browser.msPointer ? "MSPointerMove" : "pointermove",
                    POINTER_UP: o.Browser.msPointer ? "MSPointerUp" : "pointerup",
                    POINTER_CANCEL: o.Browser.msPointer ? "MSPointerCancel" : "pointercancel",
                    _pointers: [],
                    _pointerDocumentListener: !1,
                    addPointerListener: function(t, e, i, n) {
                        switch (e) {
                            case "touchstart":
                                return this.addPointerListenerStart(t, e, i, n);
                            case "touchend":
                                return this.addPointerListenerEnd(t, e, i, n);
                            case "touchmove":
                                return this.addPointerListenerMove(t, e, i, n);
                            default:
                                throw "Unknown touch event type"
                        }
                    },
                    addPointerListenerStart: function(t, i, n, s) {
                        var a = "_leaflet_",
                            r = this._pointers,
                            h = function(t) {
                                "mouse" !== t.pointerType && t.pointerType !== t.MSPOINTER_TYPE_MOUSE && o.DomEvent.preventDefault(t);
                                for (var e = !1, i = 0; i < r.length; i++)
                                    if (r[i].pointerId === t.pointerId) {
                                        e = !0;
                                        break
                                    }
                                e || r.push(t), t.touches = r.slice(), t.changedTouches = [t], n(t)
                            };
                        if (t[a + "touchstart" + s] = h, t.addEventListener(this.POINTER_DOWN, h, !1), !this._pointerDocumentListener) {
                            var l = function(t) {
                                for (var e = 0; e < r.length; e++)
                                    if (r[e].pointerId === t.pointerId) {
                                        r.splice(e, 1);
                                        break
                                    }
                            };
                            e.documentElement.addEventListener(this.POINTER_UP, l, !1), e.documentElement.addEventListener(this.POINTER_CANCEL, l, !1), this._pointerDocumentListener = !0
                        }
                        return this
                    },
                    addPointerListenerMove: function(t, e, i, n) {
                        function o(t) {
                            if (t.pointerType !== t.MSPOINTER_TYPE_MOUSE && "mouse" !== t.pointerType || 0 !== t.buttons) {
                                for (var e = 0; e < a.length; e++)
                                    if (a[e].pointerId === t.pointerId) {
                                        a[e] = t;
                                        break
                                    }
                                t.touches = a.slice(), t.changedTouches = [t], i(t)
                            }
                        }
                        var s = "_leaflet_",
                            a = this._pointers;
                        return t[s + "touchmove" + n] = o, t.addEventListener(this.POINTER_MOVE, o, !1), this
                    },
                    addPointerListenerEnd: function(t, e, i, n) {
                        var o = "_leaflet_",
                            s = this._pointers,
                            a = function(t) {
                                for (var e = 0; e < s.length; e++)
                                    if (s[e].pointerId === t.pointerId) {
                                        s.splice(e, 1);
                                        break
                                    }
                                t.touches = s.slice(), t.changedTouches = [t], i(t)
                            };
                        return t[o + "touchend" + n] = a, t.addEventListener(this.POINTER_UP, a, !1), t.addEventListener(this.POINTER_CANCEL, a, !1), this
                    },
                    removePointerListener: function(t, e, i) {
                        var n = "_leaflet_",
                            o = t[n + e + i];
                        switch (e) {
                            case "touchstart":
                                t.removeEventListener(this.POINTER_DOWN, o, !1);
                                break;
                            case "touchmove":
                                t.removeEventListener(this.POINTER_MOVE, o, !1);
                                break;
                            case "touchend":
                                t.removeEventListener(this.POINTER_UP, o, !1), t.removeEventListener(this.POINTER_CANCEL, o, !1)
                        }
                        return this
                    }
                }), o.Map.mergeOptions({
                    touchZoom: o.Browser.touch && !o.Browser.android23,
                    bounceAtZoomLimits: !0
                }), o.Map.TouchZoom = o.Handler.extend({
                    addHooks: function() {
                        o.DomEvent.on(this._map._container, "touchstart", this._onTouchStart, this)
                    },
                    removeHooks: function() {
                        o.DomEvent.off(this._map._container, "touchstart", this._onTouchStart, this)
                    },
                    _onTouchStart: function(t) {
                        var i = this._map;
                        if (t.touches && 2 === t.touches.length && !i._animatingZoom && !this._zooming) {
                            var n = i.mouseEventToLayerPoint(t.touches[0]),
                                s = i.mouseEventToLayerPoint(t.touches[1]),
                                a = i._getCenterLayerPoint();
                            this._startCenter = n.add(s)._divideBy(2), this._startDist = n.distanceTo(s), this._moved = !1, this._zooming = !0, this._centerOffset = a.subtract(this._startCenter), i._panAnim && i._panAnim.stop(), o.DomEvent.on(e, "touchmove", this._onTouchMove, this).on(e, "touchend", this._onTouchEnd, this), o.DomEvent.preventDefault(t)
                        }
                    },
                    _onTouchMove: function(t) {
                        var e = this._map;
                        if (t.touches && 2 === t.touches.length && this._zooming) {
                            var i = e.mouseEventToLayerPoint(t.touches[0]),
                                n = e.mouseEventToLayerPoint(t.touches[1]);
                            this._scale = i.distanceTo(n) / this._startDist, this._delta = i._add(n)._divideBy(2)._subtract(this._startCenter), 1 !== this._scale && (e.options.bounceAtZoomLimits || !(e.getZoom() === e.getMinZoom() && this._scale < 1 || e.getZoom() === e.getMaxZoom() && this._scale > 1)) && (this._moved || (o.DomUtil.addClass(e._mapPane, "leaflet-touching"), e.fire("movestart").fire("zoomstart"), this._moved = !0), o.Util.cancelAnimFrame(this._animRequest), this._animRequest = o.Util.requestAnimFrame(this._updateOnMove, this, !0, this._map._container), o.DomEvent.preventDefault(t))
                        }
                    },
                    _updateOnMove: function() {
                        var t = this._map,
                            e = this._getScaleOrigin(),
                            i = t.layerPointToLatLng(e),
                            n = t.getScaleZoom(this._scale);
                        t._animateZoom(i, n, this._startCenter, this._scale, this._delta, !1, !0)
                    },
                    _onTouchEnd: function() {
                        if (!this._moved || !this._zooming) return void(this._zooming = !1);
                        var t = this._map;
                        this._zooming = !1, o.DomUtil.removeClass(t._mapPane, "leaflet-touching"), o.Util.cancelAnimFrame(this._animRequest), o.DomEvent.off(e, "touchmove", this._onTouchMove).off(e, "touchend", this._onTouchEnd);
                        var i = this._getScaleOrigin(),
                            n = t.layerPointToLatLng(i),
                            s = t.getZoom(),
                            a = t.getScaleZoom(this._scale) - s,
                            r = a > 0 ? Math.ceil(a) : Math.floor(a),
                            h = t._limitZoom(s + r),
                            l = t.getZoomScale(h) / this._scale;
                        t._animateZoom(n, h, i, l)
                    },
                    _getScaleOrigin: function() {
                        var t = this._centerOffset.subtract(this._delta).divideBy(this._scale);
                        return this._startCenter.add(t)
                    }
                }), o.Map.addInitHook("addHandler", "touchZoom", o.Map.TouchZoom), o.Map.mergeOptions({
                    tap: !0,
                    tapTolerance: 15
                }), o.Map.Tap = o.Handler.extend({
                    addHooks: function() {
                        o.DomEvent.on(this._map._container, "touchstart", this._onDown, this)
                    },
                    removeHooks: function() {
                        o.DomEvent.off(this._map._container, "touchstart", this._onDown, this)
                    },
                    _onDown: function(t) {
                        if (t.touches) {
                            if (o.DomEvent.preventDefault(t), this._fireClick = !0, t.touches.length > 1) return this._fireClick = !1, void clearTimeout(this._holdTimeout);
                            var i = t.touches[0],
                                n = i.target;
                            this._startPos = this._newPos = new o.Point(i.clientX, i.clientY), n.tagName && "a" === n.tagName.toLowerCase() && o.DomUtil.addClass(n, "leaflet-active"), this._holdTimeout = setTimeout(o.bind(function() {
                                this._isTapValid() && (this._fireClick = !1, this._onUp(), this._simulateEvent("contextmenu", i))
                            }, this), 1e3), o.DomEvent.on(e, "touchmove", this._onMove, this).on(e, "touchend", this._onUp, this)
                        }
                    },
                    _onUp: function(t) {
                        if (clearTimeout(this._holdTimeout), o.DomEvent.off(e, "touchmove", this._onMove, this).off(e, "touchend", this._onUp, this), this._fireClick && t && t.changedTouches) {
                            var i = t.changedTouches[0],
                                n = i.target;
                            n && n.tagName && "a" === n.tagName.toLowerCase() && o.DomUtil.removeClass(n, "leaflet-active"), this._isTapValid() && this._simulateEvent("click", i)
                        }
                    },
                    _isTapValid: function() {
                        return this._newPos.distanceTo(this._startPos) <= this._map.options.tapTolerance
                    },
                    _onMove: function(t) {
                        var e = t.touches[0];
                        this._newPos = new o.Point(e.clientX, e.clientY)
                    },
                    _simulateEvent: function(i, n) {
                        var o = e.createEvent("MouseEvents");
                        o._simulated = !0, n.target._simulatedClick = !0, o.initMouseEvent(i, !0, !0, t, 1, n.screenX, n.screenY, n.clientX, n.clientY, !1, !1, !1, !1, 0, null), n.target.dispatchEvent(o)
                    }
                }), o.Browser.touch && !o.Browser.pointer && o.Map.addInitHook("addHandler", "tap", o.Map.Tap), o.Map.mergeOptions({
                    boxZoom: !0
                }), o.Map.BoxZoom = o.Handler.extend({
                    initialize: function(t) {
                        this._map = t, this._container = t._container, this._pane = t._panes.overlayPane, this._moved = !1
                    },
                    addHooks: function() {
                        o.DomEvent.on(this._container, "mousedown", this._onMouseDown, this)
                    },
                    removeHooks: function() {
                        o.DomEvent.off(this._container, "mousedown", this._onMouseDown), this._moved = !1
                    },
                    moved: function() {
                        return this._moved
                    },
                    _onMouseDown: function(t) {
                        return this._moved = !1, !t.shiftKey || 1 !== t.which && 1 !== t.button ? !1 : (o.DomUtil.disableTextSelection(), o.DomUtil.disableImageDrag(), this._startLayerPoint = this._map.mouseEventToLayerPoint(t), void o.DomEvent.on(e, "mousemove", this._onMouseMove, this).on(e, "mouseup", this._onMouseUp, this).on(e, "keydown", this._onKeyDown, this))
                    },
                    _onMouseMove: function(t) {
                        this._moved || (this._box = o.DomUtil.create("div", "leaflet-zoom-box", this._pane), o.DomUtil.setPosition(this._box, this._startLayerPoint), this._container.style.cursor = "crosshair", this._map.fire("boxzoomstart"));
                        var e = this._startLayerPoint,
                            i = this._box,
                            n = this._map.mouseEventToLayerPoint(t),
                            s = n.subtract(e),
                            a = new o.Point(Math.min(n.x, e.x), Math.min(n.y, e.y));
                        o.DomUtil.setPosition(i, a), this._moved = !0, i.style.width = Math.max(0, Math.abs(s.x) - 4) + "px", i.style.height = Math.max(0, Math.abs(s.y) - 4) + "px"
                    },
                    _finish: function() {
                        this._moved && (this._pane.removeChild(this._box), this._container.style.cursor = ""), o.DomUtil.enableTextSelection(), o.DomUtil.enableImageDrag(), o.DomEvent.off(e, "mousemove", this._onMouseMove).off(e, "mouseup", this._onMouseUp).off(e, "keydown", this._onKeyDown)
                    },
                    _onMouseUp: function(t) {
                        this._finish();
                        var e = this._map,
                            i = e.mouseEventToLayerPoint(t);
                        if (!this._startLayerPoint.equals(i)) {
                            var n = new o.LatLngBounds(e.layerPointToLatLng(this._startLayerPoint), e.layerPointToLatLng(i));
                            e.fitBounds(n), e.fire("boxzoomend", {
                                boxZoomBounds: n
                            })
                        }
                    },
                    _onKeyDown: function(t) {
                        27 === t.keyCode && this._finish()
                    }
                }), o.Map.addInitHook("addHandler", "boxZoom", o.Map.BoxZoom), o.Map.mergeOptions({
                    keyboard: !0,
                    keyboardPanOffset: 80,
                    keyboardZoomOffset: 1
                }), o.Map.Keyboard = o.Handler.extend({
                    keyCodes: {
                        left: [37],
                        right: [39],
                        down: [40],
                        up: [38],
                        zoomIn: [187, 107, 61, 171],
                        zoomOut: [189, 109, 173]
                    },
                    initialize: function(t) {
                        this._map = t, this._setPanOffset(t.options.keyboardPanOffset), this._setZoomOffset(t.options.keyboardZoomOffset)
                    },
                    addHooks: function() {
                        var t = this._map._container; - 1 === t.tabIndex && (t.tabIndex = "0"), o.DomEvent.on(t, "focus", this._onFocus, this).on(t, "blur", this._onBlur, this).on(t, "mousedown", this._onMouseDown, this), this._map.on("focus", this._addHooks, this).on("blur", this._removeHooks, this)
                    },
                    removeHooks: function() {
                        this._removeHooks();
                        var t = this._map._container;
                        o.DomEvent.off(t, "focus", this._onFocus, this).off(t, "blur", this._onBlur, this).off(t, "mousedown", this._onMouseDown, this), this._map.off("focus", this._addHooks, this).off("blur", this._removeHooks, this)
                    },
                    _onMouseDown: function() {
                        if (!this._focused) {
                            var i = e.body,
                                n = e.documentElement,
                                o = i.scrollTop || n.scrollTop,
                                s = i.scrollLeft || n.scrollLeft;
                            this._map._container.focus(), t.scrollTo(s, o)
                        }
                    },
                    _onFocus: function() {
                        this._focused = !0, this._map.fire("focus")
                    },
                    _onBlur: function() {
                        this._focused = !1, this._map.fire("blur")
                    },
                    _setPanOffset: function(t) {
                        var e, i, n = this._panKeys = {},
                            o = this.keyCodes;
                        for (e = 0, i = o.left.length; i > e; e++) n[o.left[e]] = [-1 * t, 0];
                        for (e = 0, i = o.right.length; i > e; e++) n[o.right[e]] = [t, 0];
                        for (e = 0, i = o.down.length; i > e; e++) n[o.down[e]] = [0, t];
                        for (e = 0, i = o.up.length; i > e; e++) n[o.up[e]] = [0, -1 * t]
                    },
                    _setZoomOffset: function(t) {
                        var e, i, n = this._zoomKeys = {},
                            o = this.keyCodes;
                        for (e = 0, i = o.zoomIn.length; i > e; e++) n[o.zoomIn[e]] = t;
                        for (e = 0, i = o.zoomOut.length; i > e; e++) n[o.zoomOut[e]] = -t
                    },
                    _addHooks: function() {
                        o.DomEvent.on(e, "keydown", this._onKeyDown, this)
                    },
                    _removeHooks: function() {
                        o.DomEvent.off(e, "keydown", this._onKeyDown, this)
                    },
                    _onKeyDown: function(t) {
                        var e = t.keyCode,
                            i = this._map;
                        if (e in this._panKeys) {
                            if (i._panAnim && i._panAnim._inProgress) return;
                            i.panBy(this._panKeys[e]), i.options.maxBounds && i.panInsideBounds(i.options.maxBounds)
                        } else {
                            if (!(e in this._zoomKeys)) return;
                            i.setZoom(i.getZoom() + this._zoomKeys[e])
                        }
                        o.DomEvent.stop(t)
                    }
                }), o.Map.addInitHook("addHandler", "keyboard", o.Map.Keyboard), o.Handler.MarkerDrag = o.Handler.extend({
                    initialize: function(t) {
                        this._marker = t
                    },
                    addHooks: function() {
                        var t = this._marker._icon;
                        this._draggable || (this._draggable = new o.Draggable(t, t)), this._draggable.on("dragstart", this._onDragStart, this).on("drag", this._onDrag, this).on("dragend", this._onDragEnd, this), this._draggable.enable(), o.DomUtil.addClass(this._marker._icon, "leaflet-marker-draggable")
                    },
                    removeHooks: function() {
                        this._draggable.off("dragstart", this._onDragStart, this).off("drag", this._onDrag, this).off("dragend", this._onDragEnd, this), this._draggable.disable(), o.DomUtil.removeClass(this._marker._icon, "leaflet-marker-draggable")
                    },
                    moved: function() {
                        return this._draggable && this._draggable._moved
                    },
                    _onDragStart: function() {
                        this._marker.closePopup().fire("movestart").fire("dragstart")
                    },
                    _onDrag: function() {
                        var t = this._marker,
                            e = t._shadow,
                            i = o.DomUtil.getPosition(t._icon),
                            n = t._map.layerPointToLatLng(i);
                        e && o.DomUtil.setPosition(e, i), t._latlng = n, t.fire("move", {
                            latlng: n
                        }).fire("drag")
                    },
                    _onDragEnd: function(t) {
                        this._marker.fire("moveend").fire("dragend", t)
                    }
                }), o.Control = o.Class.extend({
                    options: {
                        position: "topright"
                    },
                    initialize: function(t) {
                        o.setOptions(this, t)
                    },
                    getPosition: function() {
                        return this.options.position
                    },
                    setPosition: function(t) {
                        var e = this._map;
                        return e && e.removeControl(this), this.options.position = t, e && e.addControl(this), this
                    },
                    getContainer: function() {
                        return this._container
                    },
                    addTo: function(t) {
                        this._map = t;
                        var e = this._container = this.onAdd(t),
                            i = this.getPosition(),
                            n = t._controlCorners[i];
                        return o.DomUtil.addClass(e, "leaflet-control"), -1 !== i.indexOf("bottom") ? n.insertBefore(e, n.firstChild) : n.appendChild(e), this
                    },
                    removeFrom: function(t) {
                        var e = this.getPosition(),
                            i = t._controlCorners[e];
                        return i.removeChild(this._container), this._map = null, this.onRemove && this.onRemove(t), this
                    },
                    _refocusOnMap: function() {
                        this._map && this._map.getContainer().focus()
                    }
                }), o.control = function(t) {
                    return new o.Control(t)
                }, o.Map.include({
                    addControl: function(t) {
                        return t.addTo(this), this
                    },
                    removeControl: function(t) {
                        return t.removeFrom(this), this
                    },
                    _initControlPos: function() {
                        function t(t, s) {
                            var a = i + t + " " + i + s;
                            e[t + s] = o.DomUtil.create("div", a, n)
                        }
                        var e = this._controlCorners = {},
                            i = "leaflet-",
                            n = this._controlContainer = o.DomUtil.create("div", i + "control-container", this._container);
                        t("top", "left"), t("top", "right"), t("bottom", "left"), t("bottom", "right")
                    },
                    _clearControlPos: function() {
                        this._container.removeChild(this._controlContainer)
                    }
                }), o.Control.Zoom = o.Control.extend({
                    options: {
                        position: "topleft",
                        zoomInText: "+",
                        zoomInTitle: "Zoom in",
                        zoomOutText: "-",
                        zoomOutTitle: "Zoom out"
                    },
                    onAdd: function(t) {
                        var e = "leaflet-control-zoom",
                            i = o.DomUtil.create("div", e + " leaflet-bar");
                        return this._map = t, this._zoomInButton = this._createButton(this.options.zoomInText, this.options.zoomInTitle, e + "-in", i, this._zoomIn, this), this._zoomOutButton = this._createButton(this.options.zoomOutText, this.options.zoomOutTitle, e + "-out", i, this._zoomOut, this), this._updateDisabled(), t.on("zoomend zoomlevelschange", this._updateDisabled, this), i
                    },
                    onRemove: function(t) {
                        t.off("zoomend zoomlevelschange", this._updateDisabled, this)
                    },
                    _zoomIn: function(t) {
                        this._map.zoomIn(t.shiftKey ? 3 : 1)
                    },
                    _zoomOut: function(t) {
                        this._map.zoomOut(t.shiftKey ? 3 : 1)
                    },
                    _createButton: function(t, e, i, n, s, a) {
                        var r = o.DomUtil.create("a", i, n);
                        r.innerHTML = t, r.href = "#", r.title = e;
                        var h = o.DomEvent.stopPropagation;
                        return o.DomEvent.on(r, "click", h).on(r, "mousedown", h).on(r, "dblclick", h).on(r, "click", o.DomEvent.preventDefault).on(r, "click", s, a).on(r, "click", this._refocusOnMap, a), r
                    },
                    _updateDisabled: function() {
                        var t = this._map,
                            e = "leaflet-disabled";
                        o.DomUtil.removeClass(this._zoomInButton, e), o.DomUtil.removeClass(this._zoomOutButton, e), t._zoom === t.getMinZoom() && o.DomUtil.addClass(this._zoomOutButton, e), t._zoom === t.getMaxZoom() && o.DomUtil.addClass(this._zoomInButton, e)
                    }
                }), o.Map.mergeOptions({
                    zoomControl: !0
                }), o.Map.addInitHook(function() {
                    this.options.zoomControl && (this.zoomControl = new o.Control.Zoom, this.addControl(this.zoomControl))
                }), o.control.zoom = function(t) {
                    return new o.Control.Zoom(t)
                }, o.Control.Attribution = o.Control.extend({
                    options: {
                        position: "bottomright",
                        prefix: '<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'
                    },
                    initialize: function(t) {
                        o.setOptions(this, t), this._attributions = {}
                    },
                    onAdd: function(t) {
                        this._container = o.DomUtil.create("div", "leaflet-control-attribution"), o.DomEvent.disableClickPropagation(this._container);
                        for (var e in t._layers) t._layers[e].getAttribution && this.addAttribution(t._layers[e].getAttribution());
                        return t.on("layeradd", this._onLayerAdd, this).on("layerremove", this._onLayerRemove, this), this._update(), this._container
                    },
                    onRemove: function(t) {
                        t.off("layeradd", this._onLayerAdd).off("layerremove", this._onLayerRemove)
                    },
                    setPrefix: function(t) {
                        return this.options.prefix = t, this._update(), this
                    },
                    addAttribution: function(t) {
                        return t ? (this._attributions[t] || (this._attributions[t] = 0), this._attributions[t]++, this._update(), this) : void 0
                    },
                    removeAttribution: function(t) {
                        return t ? (this._attributions[t] && (this._attributions[t]--, this._update()), this) : void 0
                    },
                    _update: function() {
                        if (this._map) {
                            var t = [];
                            for (var e in this._attributions) this._attributions[e] && t.push(e);
                            var i = [];
                            this.options.prefix && i.push(this.options.prefix), t.length && i.push(t.join(", ")), this._container.innerHTML = i.join(" | ")
                        }
                    },
                    _onLayerAdd: function(t) {
                        t.layer.getAttribution && this.addAttribution(t.layer.getAttribution())
                    },
                    _onLayerRemove: function(t) {
                        t.layer.getAttribution && this.removeAttribution(t.layer.getAttribution())
                    }
                }), o.Map.mergeOptions({
                    attributionControl: !0
                }), o.Map.addInitHook(function() {
                    this.options.attributionControl && (this.attributionControl = (new o.Control.Attribution).addTo(this))
                }), o.control.attribution = function(t) {
                    return new o.Control.Attribution(t)
                }, o.Control.Scale = o.Control.extend({
                    options: {
                        position: "bottomleft",
                        maxWidth: 100,
                        metric: !0,
                        imperial: !0,
                        updateWhenIdle: !1
                    },
                    onAdd: function(t) {
                        this._map = t;
                        var e = "leaflet-control-scale",
                            i = o.DomUtil.create("div", e),
                            n = this.options;
                        return this._addScales(n, e, i), t.on(n.updateWhenIdle ? "moveend" : "move", this._update, this), t.whenReady(this._update, this), i
                    },
                    onRemove: function(t) {
                        t.off(this.options.updateWhenIdle ? "moveend" : "move", this._update, this)
                    },
                    _addScales: function(t, e, i) {
                        t.metric && (this._mScale = o.DomUtil.create("div", e + "-line", i)), t.imperial && (this._iScale = o.DomUtil.create("div", e + "-line", i))
                    },
                    _update: function() {
                        var t = this._map.getBounds(),
                            e = t.getCenter().lat,
                            i = 6378137 * Math.PI * Math.cos(e * Math.PI / 180),
                            n = i * (t.getNorthEast().lng - t.getSouthWest().lng) / 180,
                            o = this._map.getSize(),
                            s = this.options,
                            a = 0;
                        o.x > 0 && (a = n * (s.maxWidth / o.x)), this._updateScales(s, a)
                    },
                    _updateScales: function(t, e) {
                        t.metric && e && this._updateMetric(e), t.imperial && e && this._updateImperial(e)
                    },
                    _updateMetric: function(t) {
                        var e = this._getRoundNum(t);
                        this._mScale.style.width = this._getScaleWidth(e / t) + "px", this._mScale.innerHTML = 1e3 > e ? e + " m" : e / 1e3 + " km"
                    },
                    _updateImperial: function(t) {
                        var e, i, n, o = 3.2808399 * t,
                            s = this._iScale;
                        o > 5280 ? (e = o / 5280, i = this._getRoundNum(e), s.style.width = this._getScaleWidth(i / e) + "px", s.innerHTML = i + " mi") : (n = this._getRoundNum(o), s.style.width = this._getScaleWidth(n / o) + "px", s.innerHTML = n + " ft")
                    },
                    _getScaleWidth: function(t) {
                        return Math.round(this.options.maxWidth * t) - 10
                    },
                    _getRoundNum: function(t) {
                        var e = Math.pow(10, (Math.floor(t) + "").length - 1),
                            i = t / e;
                        return i = i >= 10 ? 10 : i >= 5 ? 5 : i >= 3 ? 3 : i >= 2 ? 2 : 1, e * i
                    }
                }), o.control.scale = function(t) {
                    return new o.Control.Scale(t)
                }, o.Control.Layers = o.Control.extend({
                    options: {
                        collapsed: !0,
                        position: "topright",
                        autoZIndex: !0
                    },
                    initialize: function(t, e, i) {
                        o.setOptions(this, i), this._layers = {}, this._lastZIndex = 0, this._handlingClick = !1;
                        for (var n in t) this._addLayer(t[n], n);
                        for (n in e) this._addLayer(e[n], n, !0)
                    },
                    onAdd: function(t) {
                        return this._initLayout(), this._update(), t.on("layeradd", this._onLayerChange, this).on("layerremove", this._onLayerChange, this), this._container
                    },
                    onRemove: function(t) {
                        t.off("layeradd", this._onLayerChange, this).off("layerremove", this._onLayerChange, this)
                    },
                    addBaseLayer: function(t, e) {
                        return this._addLayer(t, e), this._update(), this
                    },
                    addOverlay: function(t, e) {
                        return this._addLayer(t, e, !0), this._update(), this
                    },
                    removeLayer: function(t) {
                        var e = o.stamp(t);
                        return delete this._layers[e], this._update(), this
                    },
                    _initLayout: function() {
                        var t = "leaflet-control-layers",
                            e = this._container = o.DomUtil.create("div", t);
                        e.setAttribute("aria-haspopup", !0), o.Browser.touch ? o.DomEvent.on(e, "click", o.DomEvent.stopPropagation) : o.DomEvent.disableClickPropagation(e).disableScrollPropagation(e);
                        var i = this._form = o.DomUtil.create("form", t + "-list");
                        if (this.options.collapsed) {
                            o.Browser.android || o.DomEvent.on(e, "mouseover", this._expand, this).on(e, "mouseout", this._collapse, this);
                            var n = this._layersLink = o.DomUtil.create("a", t + "-toggle", e);
                            n.href = "#", n.title = "Layers", o.Browser.touch ? o.DomEvent.on(n, "click", o.DomEvent.stop).on(n, "click", this._expand, this) : o.DomEvent.on(n, "focus", this._expand, this), o.DomEvent.on(i, "click", function() {
                                setTimeout(o.bind(this._onInputClick, this), 0)
                            }, this), this._map.on("click", this._collapse, this)
                        } else this._expand();
                        this._baseLayersList = o.DomUtil.create("div", t + "-base", i), this._separator = o.DomUtil.create("div", t + "-separator", i), this._overlaysList = o.DomUtil.create("div", t + "-overlays", i), e.appendChild(i)
                    },
                    _addLayer: function(t, e, i) {
                        var n = o.stamp(t);
                        this._layers[n] = {
                            layer: t,
                            name: e,
                            overlay: i
                        }, this.options.autoZIndex && t.setZIndex && (this._lastZIndex++, t.setZIndex(this._lastZIndex))
                    },
                    _update: function() {
                        if (this._container) {
                            this._baseLayersList.innerHTML = "", this._overlaysList.innerHTML = "";
                            var t, e, i = !1,
                                n = !1;
                            for (t in this._layers) e = this._layers[t], this._addItem(e), n = n || e.overlay, i = i || !e.overlay;
                            this._separator.style.display = n && i ? "" : "none"
                        }
                    },
                    _onLayerChange: function(t) {
                        var e = this._layers[o.stamp(t.layer)];
                        if (e) {
                            this._handlingClick || this._update();
                            var i = e.overlay ? "layeradd" === t.type ? "overlayadd" : "overlayremove" : "layeradd" === t.type ? "baselayerchange" : null;
                            i && this._map.fire(i, e)
                        }
                    },
                    _createRadioElement: function(t, i) {
                        var n = '<input type="radio" class="leaflet-control-layers-selector" name="' + t + '"';
                        i && (n += ' checked="checked"'), n += "/>";
                        var o = e.createElement("div");
                        return o.innerHTML = n, o.firstChild
                    },
                    _addItem: function(t) {
                        var i, n = e.createElement("label"),
                            s = this._map.hasLayer(t.layer);
                        t.overlay ? (i = e.createElement("input"), i.type = "checkbox", i.className = "leaflet-control-layers-selector", i.defaultChecked = s) : i = this._createRadioElement("leaflet-base-layers", s), i.layerId = o.stamp(t.layer), o.DomEvent.on(i, "click", this._onInputClick, this);
                        var a = e.createElement("span");
                        a.innerHTML = " " + t.name, n.appendChild(i), n.appendChild(a);
                        var r = t.overlay ? this._overlaysList : this._baseLayersList;
                        return r.appendChild(n), n
                    },
                    _onInputClick: function() {
                        var t, e, i, n = this._form.getElementsByTagName("input"),
                            o = n.length;
                        for (this._handlingClick = !0, t = 0; o > t; t++) e = n[t], i = this._layers[e.layerId], e.checked && !this._map.hasLayer(i.layer) ? this._map.addLayer(i.layer) : !e.checked && this._map.hasLayer(i.layer) && this._map.removeLayer(i.layer);
                        this._handlingClick = !1, this._refocusOnMap()
                    },
                    _expand: function() {
                        o.DomUtil.addClass(this._container, "leaflet-control-layers-expanded")
                    },
                    _collapse: function() {
                        this._container.className = this._container.className.replace(" leaflet-control-layers-expanded", "")
                    }
                }), o.control.layers = function(t, e, i) {
                    return new o.Control.Layers(t, e, i)
                }, o.PosAnimation = o.Class.extend({
                    includes: o.Mixin.Events,
                    run: function(t, e, i, n) {
                        this.stop(), this._el = t, this._inProgress = !0, this._newPos = e, this.fire("start"), t.style[o.DomUtil.TRANSITION] = "all " + (i || .25) + "s cubic-bezier(0,0," + (n || .5) + ",1)", o.DomEvent.on(t, o.DomUtil.TRANSITION_END, this._onTransitionEnd, this), o.DomUtil.setPosition(t, e), o.Util.falseFn(t.offsetWidth), this._stepTimer = setInterval(o.bind(this._onStep, this), 50)
                    },
                    stop: function() {
                        this._inProgress && (o.DomUtil.setPosition(this._el, this._getPos()), this._onTransitionEnd(), o.Util.falseFn(this._el.offsetWidth))
                    },
                    _onStep: function() {
                        var t = this._getPos();
                        return t ? (this._el._leaflet_pos = t, void this.fire("step")) : void this._onTransitionEnd()
                    },
                    _transformRe: /([-+]?(?:\d*\.)?\d+)\D*, ([-+]?(?:\d*\.)?\d+)\D*\)/,
                    _getPos: function() {
                        var e, i, n, s = this._el,
                            a = t.getComputedStyle(s);
                        if (o.Browser.any3d) {
                            if (n = a[o.DomUtil.TRANSFORM].match(this._transformRe), !n) return;
                            e = parseFloat(n[1]), i = parseFloat(n[2])
                        } else e = parseFloat(a.left), i = parseFloat(a.top);
                        return new o.Point(e, i, !0)
                    },
                    _onTransitionEnd: function() {
                        o.DomEvent.off(this._el, o.DomUtil.TRANSITION_END, this._onTransitionEnd, this), this._inProgress && (this._inProgress = !1, this._el.style[o.DomUtil.TRANSITION] = "", this._el._leaflet_pos = this._newPos, clearInterval(this._stepTimer), this.fire("step").fire("end"))
                    }
                }), o.Map.include({
                    setView: function(t, e, n) {
                        if (e = e === i ? this._zoom : this._limitZoom(e), t = this._limitCenter(o.latLng(t), e, this.options.maxBounds), n = n || {}, this._panAnim && this._panAnim.stop(), this._loaded && !n.reset && n !== !0) {
                            n.animate !== i && (n.zoom = o.extend({
                                animate: n.animate
                            }, n.zoom), n.pan = o.extend({
                                animate: n.animate
                            }, n.pan));
                            var s = this._zoom !== e ? this._tryAnimatedZoom && this._tryAnimatedZoom(t, e, n.zoom) : this._tryAnimatedPan(t, n.pan);
                            if (s) return clearTimeout(this._sizeTimer), this
                        }
                        return this._resetView(t, e), this
                    },
                    panBy: function(t, e) {
                        if (t = o.point(t).round(), e = e || {}, !t.x && !t.y) return this;
                        if (this._panAnim || (this._panAnim = new o.PosAnimation, this._panAnim.on({
                                step: this._onPanTransitionStep,
                                end: this._onPanTransitionEnd
                            }, this)), e.noMoveStart || this.fire("movestart"), e.animate !== !1) {
                            o.DomUtil.addClass(this._mapPane, "leaflet-pan-anim");
                            var i = this._getMapPanePos().subtract(t);
                            this._panAnim.run(this._mapPane, i, e.duration || .25, e.easeLinearity)
                        } else this._rawPanBy(t), this.fire("move").fire("moveend");
                        return this
                    },
                    _onPanTransitionStep: function() {
                        this.fire("move")
                    },
                    _onPanTransitionEnd: function() {
                        o.DomUtil.removeClass(this._mapPane, "leaflet-pan-anim"), this.fire("moveend")
                    },
                    _tryAnimatedPan: function(t, e) {
                        var i = this._getCenterOffset(t)._floor();
                        return (e && e.animate) === !0 || this.getSize().contains(i) ? (this.panBy(i, e), !0) : !1
                    }
                }), o.PosAnimation = o.DomUtil.TRANSITION ? o.PosAnimation : o.PosAnimation.extend({
                    run: function(t, e, i, n) {
                        this.stop(), this._el = t, this._inProgress = !0, this._duration = i || .25, this._easeOutPower = 1 / Math.max(n || .5, .2), this._startPos = o.DomUtil.getPosition(t), this._offset = e.subtract(this._startPos), this._startTime = +new Date, this.fire("start"), this._animate()
                    },
                    stop: function() {
                        this._inProgress && (this._step(), this._complete())
                    },
                    _animate: function() {
                        this._animId = o.Util.requestAnimFrame(this._animate, this), this._step()
                    },
                    _step: function() {
                        var t = +new Date - this._startTime,
                            e = 1e3 * this._duration;
                        e > t ? this._runFrame(this._easeOut(t / e)) : (this._runFrame(1), this._complete())
                    },
                    _runFrame: function(t) {
                        var e = this._startPos.add(this._offset.multiplyBy(t));
                        o.DomUtil.setPosition(this._el, e), this.fire("step")
                    },
                    _complete: function() {
                        o.Util.cancelAnimFrame(this._animId), this._inProgress = !1, this.fire("end")
                    },
                    _easeOut: function(t) {
                        return 1 - Math.pow(1 - t, this._easeOutPower)
                    }
                }), o.Map.mergeOptions({
                    zoomAnimation: !0,
                    zoomAnimationThreshold: 4
                }), o.DomUtil.TRANSITION && o.Map.addInitHook(function() {
                    this._zoomAnimated = this.options.zoomAnimation && o.DomUtil.TRANSITION && o.Browser.any3d && !o.Browser.android23 && !o.Browser.mobileOpera, this._zoomAnimated && o.DomEvent.on(this._mapPane, o.DomUtil.TRANSITION_END, this._catchTransitionEnd, this)
                }), o.Map.include(o.DomUtil.TRANSITION ? {
                    _catchTransitionEnd: function(t) {
                        this._animatingZoom && t.propertyName.indexOf("transform") >= 0 && this._onZoomTransitionEnd()
                    },
                    _nothingToAnimate: function() {
                        return !this._container.getElementsByClassName("leaflet-zoom-animated").length
                    },
                    _tryAnimatedZoom: function(t, e, i) {
                        if (this._animatingZoom) return !0;
                        if (i = i || {}, !this._zoomAnimated || i.animate === !1 || this._nothingToAnimate() || Math.abs(e - this._zoom) > this.options.zoomAnimationThreshold) return !1;
                        var n = this.getZoomScale(e),
                            o = this._getCenterOffset(t)._divideBy(1 - 1 / n),
                            s = this._getCenterLayerPoint()._add(o);
                        return i.animate === !0 || this.getSize().contains(o) ? (this.fire("movestart").fire("zoomstart"), this._animateZoom(t, e, s, n, null, !0), !0) : !1
                    },
                    _animateZoom: function(t, e, i, n, s, a, r) {
                        r || (this._animatingZoom = !0), o.DomUtil.addClass(this._mapPane, "leaflet-zoom-anim"), this._animateToCenter = t, this._animateToZoom = e, o.Draggable && (o.Draggable._disabled = !0), o.Util.requestAnimFrame(function() {
                            this.fire("zoomanim", {
                                center: t,
                                zoom: e,
                                origin: i,
                                scale: n,
                                delta: s,
                                backwards: a
                            }), setTimeout(o.bind(this._onZoomTransitionEnd, this), 250)
                        }, this)
                    },
                    _onZoomTransitionEnd: function() {
                        this._animatingZoom && (this._animatingZoom = !1, o.DomUtil.removeClass(this._mapPane, "leaflet-zoom-anim"), o.Util.requestAnimFrame(function() {
                            this._resetView(this._animateToCenter, this._animateToZoom, !0, !0), o.Draggable && (o.Draggable._disabled = !1)
                        }, this))
                    }
                } : {}), o.TileLayer.include({
                    _animateZoom: function(t) {
                        this._animating || (this._animating = !0, this._prepareBgBuffer());
                        var e = this._bgBuffer,
                            i = o.DomUtil.TRANSFORM,
                            n = t.delta ? o.DomUtil.getTranslateString(t.delta) : e.style[i],
                            s = o.DomUtil.getScaleString(t.scale, t.origin);
                        e.style[i] = t.backwards ? s + " " + n : n + " " + s
                    },
                    _endZoomAnim: function() {
                        var t = this._tileContainer,
                            e = this._bgBuffer;
                        t.style.visibility = "", t.parentNode.appendChild(t), o.Util.falseFn(e.offsetWidth);
                        var i = this._map.getZoom();
                        (i > this.options.maxZoom || i < this.options.minZoom) && this._clearBgBuffer(), this._animating = !1
                    },
                    _clearBgBuffer: function() {
                        var t = this._map;
                        !t || t._animatingZoom || t.touchZoom._zooming || (this._bgBuffer.innerHTML = "", this._bgBuffer.style[o.DomUtil.TRANSFORM] = "")
                    },
                    _prepareBgBuffer: function() {
                        var t = this._tileContainer,
                            e = this._bgBuffer,
                            i = this._getLoadedTilesPercentage(e),
                            n = this._getLoadedTilesPercentage(t);
                        return e && i > .5 && .5 > n ? (t.style.visibility = "hidden", void this._stopLoadingImages(t)) : (e.style.visibility = "hidden", e.style[o.DomUtil.TRANSFORM] = "", this._tileContainer = e, e = this._bgBuffer = t, this._stopLoadingImages(e), void clearTimeout(this._clearBgBufferTimer))
                    },
                    _getLoadedTilesPercentage: function(t) {
                        var e, i, n = t.getElementsByTagName("img"),
                            o = 0;
                        for (e = 0, i = n.length; i > e; e++) n[e].complete && o++;
                        return o / i
                    },
                    _stopLoadingImages: function(t) {
                        var e, i, n, s = Array.prototype.slice.call(t.getElementsByTagName("img"));
                        for (e = 0, i = s.length; i > e; e++) n = s[e], n.complete || (n.onload = o.Util.falseFn, n.onerror = o.Util.falseFn, n.src = o.Util.emptyImageUrl, n.parentNode.removeChild(n))
                    }
                }), o.Map.include({
                    _defaultLocateOptions: {
                        watch: !1,
                        setView: !1,
                        maxZoom: 1 / 0,
                        timeout: 1e4,
                        maximumAge: 0,
                        enableHighAccuracy: !1
                    },
                    locate: function(t) {
                        if (t = this._locateOptions = o.extend(this._defaultLocateOptions, t), !navigator.geolocation) return this._handleGeolocationError({
                            code: 0,
                            message: "Geolocation not supported."
                        }), this;
                        var e = o.bind(this._handleGeolocationResponse, this),
                            i = o.bind(this._handleGeolocationError, this);
                        return t.watch ? this._locationWatchId = navigator.geolocation.watchPosition(e, i, t) : navigator.geolocation.getCurrentPosition(e, i, t), this
                    },
                    stopLocate: function() {
                        return navigator.geolocation && navigator.geolocation.clearWatch(this._locationWatchId), this._locateOptions && (this._locateOptions.setView = !1), this
                    },
                    _handleGeolocationError: function(t) {
                        var e = t.code,
                            i = t.message || (1 === e ? "permission denied" : 2 === e ? "position unavailable" : "timeout");
                        this._locateOptions.setView && !this._loaded && this.fitWorld(), this.fire("locationerror", {
                            code: e,
                            message: "Geolocation error: " + i + "."
                        })
                    },
                    _handleGeolocationResponse: function(t) {
                        var e = t.coords.latitude,
                            i = t.coords.longitude,
                            n = new o.LatLng(e, i),
                            s = 180 * t.coords.accuracy / 40075017,
                            a = s / Math.cos(o.LatLng.DEG_TO_RAD * e),
                            r = o.latLngBounds([e - s, i - a], [e + s, i + a]),
                            h = this._locateOptions;
                        if (h.setView) {
                            var l = Math.min(this.getBoundsZoom(r), h.maxZoom);
                            this.setView(n, l)
                        }
                        var u = {
                            latlng: n,
                            bounds: r,
                            timestamp: t.timestamp
                        };
                        for (var c in t.coords) "number" == typeof t.coords[c] && (u[c] = t.coords[c]);
                        this.fire("locationfound", u)
                    }
                })
        }(i, e), t.Leaflet = i.L.noConflict()
    }(), SM.currentModule = null
}, "", {
    requires: []
});
YUI.add("lodash", function(n) {
    SM.currentModule = "lodash";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        (function() {
            function n(n, t) {
                if (n !== t) {
                    var r = null === n,
                        e = n === b,
                        u = n === n,
                        i = null === t,
                        o = t === b,
                        a = t === t;
                    if (n > t && !i || !u || r && !o && a || e && a) return 1;
                    if (t > n && !r || !a || i && !e && u || o && u) return -1
                }
                return 0
            }

            function t(n, t, r) {
                for (var e = n.length, u = r ? e : -1; r ? u-- : ++u < e;)
                    if (t(n[u], u, n)) return u;
                return -1
            }

            function r(n, t, r) {
                if (t !== t) return p(n, r);
                for (var e = r - 1, u = n.length; ++e < u;)
                    if (n[e] === t) return e;
                return -1
            }

            function e(n) {
                return "function" == typeof n || !1
            }

            function u(n) {
                return "string" == typeof n ? n : null == n ? "" : n + ""
            }

            function i(n, t) {
                for (var r = -1, e = n.length; ++r < e && t.indexOf(n.charAt(r)) > -1;);
                return r
            }

            function o(n, t) {
                for (var r = n.length; r-- && t.indexOf(n.charAt(r)) > -1;);
                return r
            }

            function a(t, r) {
                return n(t.criteria, r.criteria) || t.index - r.index
            }

            function f(t, r, e) {
                for (var u = -1, i = t.criteria, o = r.criteria, a = i.length, f = e.length; ++u < a;) {
                    var l = n(i[u], o[u]);
                    if (l) return u >= f ? l : l * (e[u] ? 1 : -1)
                }
                return t.index - r.index
            }

            function l(n) {
                return Dn[n]
            }

            function c(n) {
                return Kn[n]
            }

            function s(n) {
                return "\\" + Gn[n]
            }

            function p(n, t, r) {
                for (var e = n.length, u = t + (r ? 0 : -1); r ? u-- : ++u < e;) {
                    var i = n[u];
                    if (i !== i) return u
                }
                return -1
            }

            function h(n) {
                return !!n && "object" == typeof n
            }

            function v(n) {
                return 160 >= n && n >= 9 && 13 >= n || 32 == n || 160 == n || 5760 == n || 6158 == n || n >= 8192 && (8202 >= n || 8232 == n || 8233 == n || 8239 == n || 8287 == n || 12288 == n || 65279 == n)
            }

            function _(n, t) {
                for (var r = -1, e = n.length, u = -1, i = []; ++r < e;) n[r] === t && (n[r] = P, i[++u] = r);
                return i
            }

            function g(n, t) {
                for (var r, e = -1, u = n.length, i = -1, o = []; ++e < u;) {
                    var a = n[e],
                        f = t ? t(a, e, n) : a;
                    e && r === f || (r = f, o[++i] = a)
                }
                return o
            }

            function y(n) {
                for (var t = -1, r = n.length; ++t < r && v(n.charCodeAt(t)););
                return t
            }

            function d(n) {
                for (var t = n.length; t-- && v(n.charCodeAt(t)););
                return t
            }

            function m(n) {
                return Yn[n]
            }

            function w(v) {
                function V(n) {
                    if (h(n) && !Ua(n) && !(n instanceof Dn)) {
                        if (n instanceof Q) return n;
                        if (Zi.call(n, "__chain__") && Zi.call(n, "__wrapped__")) return se(n)
                    }
                    return new Q(n)
                }

                function Z() {}

                function Q(n, t, r) {
                    this.__wrapped__ = n, this.__actions__ = r || [], this.__chain__ = !!t
                }

                function Dn(n) {
                    this.__wrapped__ = n, this.__actions__ = null, this.__dir__ = 1, this.__dropCount__ = 0, this.__filtered__ = !1, this.__iteratees__ = null, this.__takeCount__ = ko, this.__views__ = null
                }

                function Kn() {
                    var n = this.__actions__,
                        t = this.__iteratees__,
                        r = this.__views__,
                        e = new Dn(this.__wrapped__);
                    return e.__actions__ = n ? it(n) : null, e.__dir__ = this.__dir__, e.__filtered__ = this.__filtered__, e.__iteratees__ = t ? it(t) : null, e.__takeCount__ = this.__takeCount__, e.__views__ = r ? it(r) : null, e
                }

                function Yn() {
                    if (this.__filtered__) {
                        var n = new Dn(this);
                        n.__dir__ = -1, n.__filtered__ = !0
                    } else n = this.clone(), n.__dir__ *= -1;
                    return n
                }

                function Vn() {
                    var n = this.__wrapped__.value();
                    if (!Ua(n)) return ur(n, this.__actions__);
                    var t = this.__dir__,
                        r = 0 > t,
                        e = Dr(0, n.length, this.__views__),
                        u = e.start,
                        i = e.end,
                        o = i - u,
                        a = r ? i : u - 1,
                        f = Ao(o, this.__takeCount__),
                        l = this.__iteratees__,
                        c = l ? l.length : 0,
                        s = 0,
                        p = [];
                    n: for (; o-- && f > s;) {
                        a += t;
                        for (var h = -1, v = n[a]; ++h < c;) {
                            var _ = l[h],
                                g = _.iteratee,
                                y = _.type;
                            if (y == $) {
                                if (_.done && (r ? a > _.index : a < _.index) && (_.count = 0, _.done = !1), _.index = a, !_.done) {
                                    var d = _.limit;
                                    if (!(_.done = d > -1 ? _.count++ >= d : !g(v))) continue n
                                }
                            } else {
                                var m = g(v);
                                if (y == M) v = m;
                                else if (!m) {
                                    if (y == L) continue n;
                                    break n
                                }
                            }
                        }
                        p[s++] = v
                    }
                    return p
                }

                function Gn() {
                    this.__data__ = {}
                }

                function Jn(n) {
                    return this.has(n) && delete this.__data__[n]
                }

                function Xn(n) {
                    return "__proto__" == n ? b : this.__data__[n]
                }

                function Zn(n) {
                    return "__proto__" != n && Zi.call(this.__data__, n)
                }

                function Hn(n, t) {
                    return "__proto__" != n && (this.__data__[n] = t), this
                }

                function Qn(n) {
                    var t = n ? n.length : 0;
                    for (this.data = {
                            hash: yo(null),
                            set: new so
                        }; t--;) this.push(n[t])
                }

                function nt(n, t) {
                    var r = n.data,
                        e = "string" == typeof t || Su(t) ? r.set.has(t) : r.hash[t];
                    return e ? 0 : -1
                }

                function ut(n) {
                    var t = this.data;
                    "string" == typeof n || Su(n) ? t.set.add(n) : t.hash[n] = !0
                }

                function it(n, t) {
                    var r = -1,
                        e = n.length;
                    for (t || (t = Fi(e)); ++r < e;) t[r] = n[r];
                    return t
                }

                function ot(n, t) {
                    for (var r = -1, e = n.length; ++r < e && t(n[r], r, n) !== !1;);
                    return n
                }

                function at(n, t) {
                    for (var r = n.length; r-- && t(n[r], r, n) !== !1;);
                    return n
                }

                function ft(n, t) {
                    for (var r = -1, e = n.length; ++r < e;)
                        if (!t(n[r], r, n)) return !1;
                    return !0
                }

                function lt(n, t, r, e) {
                    for (var u = -1, i = n.length, o = e, a = o; ++u < i;) {
                        var f = n[u],
                            l = +t(f);
                        r(l, o) && (o = l, a = f)
                    }
                    return a
                }

                function ct(n, t) {
                    for (var r = -1, e = n.length, u = -1, i = []; ++r < e;) {
                        var o = n[r];
                        t(o, r, n) && (i[++u] = o)
                    }
                    return i
                }

                function st(n, t) {
                    for (var r = -1, e = n.length, u = Fi(e); ++r < e;) u[r] = t(n[r], r, n);
                    return u
                }

                function pt(n, t, r, e) {
                    var u = -1,
                        i = n.length;
                    for (e && i && (r = n[++u]); ++u < i;) r = t(r, n[u], u, n);
                    return r
                }

                function ht(n, t, r, e) {
                    var u = n.length;
                    for (e && u && (r = n[--u]); u--;) r = t(r, n[u], u, n);
                    return r
                }

                function vt(n, t) {
                    for (var r = -1, e = n.length; ++r < e;)
                        if (t(n[r], r, n)) return !0;
                    return !1
                }

                function _t(n) {
                    for (var t = n.length, r = 0; t--;) r += +n[t] || 0;
                    return r
                }

                function gt(n, t) {
                    return n === b ? t : n
                }

                function yt(n, t, r, e) {
                    return n !== b && Zi.call(e, r) ? n : t
                }

                function dt(n, t, r) {
                    for (var e = -1, u = Ka(t), i = u.length; ++e < i;) {
                        var o = u[e],
                            a = n[o],
                            f = r(a, t[o], o, n, t);
                        (f === f ? f === a : a !== a) && (a !== b || o in n) || (n[o] = f)
                    }
                    return n
                }

                function mt(n, t) {
                    return null == t ? n : bt(t, Ka(t), n)
                }

                function wt(n, t) {
                    for (var r = -1, e = null == n, u = !e && Jr(n), i = u ? n.length : 0, o = t.length, a = Fi(o); ++r < o;) {
                        var f = t[r];
                        u ? a[r] = Xr(f, i) ? n[f] : b : a[r] = e ? b : n[f]
                    }
                    return a
                }

                function bt(n, t, r) {
                    r || (r = {});
                    for (var e = -1, u = t.length; ++e < u;) {
                        var i = t[e];
                        r[i] = n[i]
                    }
                    return r
                }

                function xt(n, t, r) {
                    var e = typeof n;
                    return "function" == e ? t === b ? n : ar(n, t, r) : null == n ? xi : "object" == e ? Bt(n) : t === b ? Ri(n) : zt(n, t)
                }

                function At(n, t, r, e, u, i, o) {
                    var a;
                    if (r && (a = u ? r(n, e, u) : r(n)), a !== b) return a;
                    if (!Su(n)) return n;
                    var f = Ua(n);
                    if (f) {
                        if (a = Kr(n), !t) return it(n, a)
                    } else {
                        var l = Qi.call(n),
                            c = l == Y;
                        if (l != J && l != B && (!c || u)) return zn[l] ? Vr(n, l, t) : u ? n : {};
                        if (rt(n)) return u ? n : {};
                        if (a = Yr(c ? {} : n), !t) return mt(a, n)
                    }
                    i || (i = []), o || (o = []);
                    for (var s = i.length; s--;)
                        if (i[s] == n) return o[s];
                    return i.push(n), o.push(a), (f ? ot : Ut)(n, function(e, u) {
                        a[u] = At(e, t, r, u, n, i, o)
                    }), a
                }

                function jt(n, t, r) {
                    if ("function" != typeof n) throw new Di(N);
                    return po(function() {
                        n.apply(b, r)
                    }, t)
                }

                function Ot(n, t) {
                    var e = n ? n.length : 0,
                        u = [];
                    if (!e) return u;
                    var i = -1,
                        o = Br(),
                        a = o == r,
                        f = a && t.length >= 200 ? Yo(t) : null,
                        l = t.length;
                    f && (o = nt, a = !1, t = f);
                    n: for (; ++i < e;) {
                        var c = n[i];
                        if (a && c === c) {
                            for (var s = l; s--;)
                                if (t[s] === c) continue n;
                            u.push(c)
                        } else o(t, c, 0) < 0 && u.push(c)
                    }
                    return u
                }

                function It(n, t) {
                    var r = !0;
                    return Bo(n, function(n, e, u) {
                        return r = !!t(n, e, u)
                    }), r
                }

                function Et(n, t, r, e) {
                    var u = e,
                        i = u;
                    return Bo(n, function(n, o, a) {
                        var f = +t(n, o, a);
                        (r(f, u) || f === e && f === i) && (u = f, i = n)
                    }), i
                }

                function Rt(n, t, r, e) {
                    var u = n.length;
                    for (r = null == r ? 0 : +r || 0, 0 > r && (r = -r > u ? 0 : u + r), e = e === b || e > u ? u : +e || 0, 0 > e && (e += u), u = r > e ? 0 : e >>> 0, r >>>= 0; u > r;) n[r++] = t;
                    return n
                }

                function kt(n, t) {
                    var r = [];
                    return Bo(n, function(n, e, u) {
                        t(n, e, u) && r.push(n)
                    }), r
                }

                function St(n, t, r, e) {
                    var u;
                    return r(n, function(n, r, i) {
                        return t(n, r, i) ? (u = e ? r : n, !1) : void 0
                    }), u
                }

                function Ct(n, t, r) {
                    for (var e = -1, u = n.length, i = -1, o = []; ++e < u;) {
                        var a = n[e];
                        if (h(a) && Jr(a) && (r || Ua(a) || Au(a))) {
                            t && (a = Ct(a, t, r));
                            for (var f = -1, l = a.length; ++f < l;) o[++i] = a[f]
                        } else r || (o[++i] = a)
                    }
                    return o
                }

                function Tt(n, t) {
                    return qo(n, t, Ju)
                }

                function Ut(n, t) {
                    return qo(n, t, Ka)
                }

                function Wt(n, t) {
                    return Do(n, t, Ka)
                }

                function Ft(n, t) {
                    for (var r = -1, e = t.length, u = -1, i = []; ++r < e;) {
                        var o = t[r];
                        Fa(n[o]) && (i[++u] = o)
                    }
                    return i
                }

                function $t(n, t, r) {
                    if (null != n) {
                        n = le(n), r !== b && r in n && (t = [r]);
                        for (var e = 0, u = t.length; null != n && u > e;) n = le(n)[t[e++]];
                        return e && e == u ? n : b
                    }
                }

                function Lt(n, t, r, e, u, i) {
                    return n === t ? !0 : null == n || null == t || !Su(n) && !h(t) ? n !== n && t !== t : Mt(n, t, Lt, r, e, u, i)
                }

                function Mt(n, t, r, e, u, i, o) {
                    var a = Ua(n),
                        f = Ua(t),
                        l = z,
                        c = z;
                    a || (l = Qi.call(n), l == B ? l = J : l != J && (a = Mu(n))), f || (c = Qi.call(t), c == B ? c = J : c != J && (f = Mu(t)));
                    var s = l == J && !rt(n),
                        p = c == J && !rt(t),
                        h = l == c;
                    if (h && !a && !s) return Lr(n, t, l);
                    if (!u) {
                        var v = s && Zi.call(n, "__wrapped__"),
                            _ = p && Zi.call(t, "__wrapped__");
                        if (v || _) return r(v ? n.value() : n, _ ? t.value() : t, e, u, i, o)
                    }
                    if (!h) return !1;
                    i || (i = []), o || (o = []);
                    for (var g = i.length; g--;)
                        if (i[g] == n) return o[g] == t;
                    i.push(n), o.push(t);
                    var y = (a ? $r : Mr)(n, t, r, e, u, i, o);
                    return i.pop(), o.pop(), y
                }

                function Nt(n, t, r) {
                    var e = t.length,
                        u = e,
                        i = !r;
                    if (null == n) return !u;
                    for (n = le(n); e--;) {
                        var o = t[e];
                        if (i && o[2] ? o[1] !== n[o[0]] : !(o[0] in n)) return !1
                    }
                    for (; ++e < u;) {
                        o = t[e];
                        var a = o[0],
                            f = n[a],
                            l = o[1];
                        if (i && o[2]) {
                            if (f === b && !(a in n)) return !1
                        } else {
                            var c = r ? r(f, l, a) : b;
                            if (!(c === b ? Lt(l, f, r, !0) : c)) return !1
                        }
                    }
                    return !0
                }

                function Pt(n, t) {
                    var r = -1,
                        e = Jr(n) ? Fi(n.length) : [];
                    return Bo(n, function(n, u, i) {
                        e[++r] = t(n, u, i)
                    }), e
                }

                function Bt(n) {
                    var t = zr(n);
                    if (1 == t.length && t[0][2]) {
                        var r = t[0][0],
                            e = t[0][1];
                        return function(n) {
                            return null == n ? !1 : (n = le(n), n[r] === e && (e !== b || r in n))
                        }
                    }
                    return function(n) {
                        return Nt(n, t)
                    }
                }

                function zt(n, t) {
                    var r = Ua(n),
                        e = Hr(n) && te(t),
                        u = n + "";
                    return n = ce(n),
                        function(i) {
                            if (null == i) return !1;
                            var o = u;
                            if (i = le(i), (r || !e) && !(o in i)) {
                                if (i = 1 == n.length ? i : $t(i, Xt(n, 0, -1)), null == i) return !1;
                                o = je(n), i = le(i)
                            }
                            return i[o] === t ? t !== b || o in i : Lt(t, i[o], b, !0)
                        }
                }

                function qt(n, t, r, e, u) {
                    if (!Su(n)) return n;
                    var i = Jr(t) && (Ua(t) || Mu(t)),
                        o = i ? null : Ka(t);
                    return ot(o || t, function(a, f) {
                        if (o && (f = a, a = t[f]), h(a)) e || (e = []), u || (u = []), Dt(n, t, f, qt, r, e, u);
                        else {
                            var l = n[f],
                                c = r ? r(l, a, f, n, t) : b,
                                s = c === b;
                            s && (c = a), c === b && (!i || f in n) || !s && (c === c ? c === l : l !== l) || (n[f] = c)
                        }
                    }), n
                }

                function Dt(n, t, r, e, u, i, o) {
                    for (var a = i.length, f = t[r]; a--;)
                        if (i[a] == f) return void(n[r] = o[a]);
                    var l = n[r],
                        c = u ? u(l, f, r, n, t) : b,
                        s = c === b;
                    s && (c = f, Jr(f) && (Ua(f) || Mu(f)) ? c = Ua(l) ? l : Jr(l) ? it(l) : [] : $a(f) || Au(f) ? c = Au(l) ? qu(l) : $a(l) ? l : {} : s = !1), i.push(f), o.push(c), s ? n[r] = e(c, f, u, i, o) : (c === c ? c !== l : l === l) && (n[r] = c)
                }

                function Kt(n) {
                    return function(t) {
                        return null == t ? b : le(t)[n]
                    }
                }

                function Yt(n) {
                    var t = n + "";
                    return n = ce(n),
                        function(r) {
                            return $t(r, n, t)
                        }
                }

                function Vt(n, t) {
                    for (var r = n ? t.length : 0; r--;) {
                        var e = t[r];
                        if (e != u && Xr(e)) {
                            var u = e;
                            ho.call(n, e, 1)
                        }
                    }
                    return n
                }

                function Gt(n, t) {
                    return n + oo(Eo() * (t - n + 1))
                }

                function Jt(n, t, r, e, u) {
                    return u(n, function(n, u, i) {
                        r = e ? (e = !1, n) : t(r, n, u, i)
                    }), r
                }

                function Xt(n, t, r) {
                    var e = -1,
                        u = n.length;
                    t = null == t ? 0 : +t || 0, 0 > t && (t = -t > u ? 0 : u + t), r = r === b || r > u ? u : +r || 0, 0 > r && (r += u), u = t > r ? 0 : r - t >>> 0, t >>>= 0;
                    for (var i = Fi(u); ++e < u;) i[e] = n[e + t];
                    return i
                }

                function Zt(n, t) {
                    var r;
                    return Bo(n, function(n, e, u) {
                        return r = t(n, e, u), !r
                    }), !!r
                }

                function Ht(n, t) {
                    var r = n.length;
                    for (n.sort(t); r--;) n[r] = n[r].value;
                    return n
                }

                function Qt(n, t, r) {
                    var e = Nr(),
                        u = -1;
                    t = st(t, function(n) {
                        return e(n)
                    });
                    var i = Pt(n, function(n) {
                        var r = st(t, function(t) {
                            return t(n)
                        });
                        return {
                            criteria: r,
                            index: ++u,
                            value: n
                        }
                    });
                    return Ht(i, function(n, t) {
                        return f(n, t, r)
                    })
                }

                function nr(n, t) {
                    var r = 0;
                    return Bo(n, function(n, e, u) {
                        r += +t(n, e, u) || 0
                    }), r
                }

                function tr(n, t) {
                    var e = -1,
                        u = Br(),
                        i = n.length,
                        o = u == r,
                        a = o && i >= 200,
                        f = a ? Yo() : null,
                        l = [];
                    f ? (u = nt, o = !1) : (a = !1, f = t ? [] : l);
                    n: for (; ++e < i;) {
                        var c = n[e],
                            s = t ? t(c, e, n) : c;
                        if (o && c === c) {
                            for (var p = f.length; p--;)
                                if (f[p] === s) continue n;
                            t && f.push(s), l.push(c)
                        } else u(f, s, 0) < 0 && ((t || a) && f.push(s), l.push(c))
                    }
                    return l
                }

                function rr(n, t) {
                    for (var r = -1, e = t.length, u = Fi(e); ++r < e;) u[r] = n[t[r]];
                    return u
                }

                function er(n, t, r, e) {
                    for (var u = n.length, i = e ? u : -1;
                        (e ? i-- : ++i < u) && t(n[i], i, n););
                    return r ? Xt(n, e ? 0 : i, e ? i + 1 : u) : Xt(n, e ? i + 1 : 0, e ? u : i)
                }

                function ur(n, t) {
                    var r = n;
                    r instanceof Dn && (r = r.value());
                    for (var e = -1, u = t.length; ++e < u;) {
                        var i = [r],
                            o = t[e];
                        lo.apply(i, o.args), r = o.func.apply(o.thisArg, i)
                    }
                    return r
                }

                function ir(n, t, r) {
                    var e = 0,
                        u = n ? n.length : e;
                    if ("number" == typeof t && t === t && To >= u) {
                        for (; u > e;) {
                            var i = e + u >>> 1,
                                o = n[i];
                            (r ? t >= o : t > o) && null !== o ? e = i + 1 : u = i
                        }
                        return u
                    }
                    return or(n, t, xi, r)
                }

                function or(n, t, r, e) {
                    t = r(t);
                    for (var u = 0, i = n ? n.length : 0, o = t !== t, a = null === t, f = t === b; i > u;) {
                        var l = oo((u + i) / 2),
                            c = r(n[l]),
                            s = c !== b,
                            p = c === c;
                        if (o) var h = p || e;
                        else h = a ? p && s && (e || null != c) : f ? p && (e || s) : null == c ? !1 : e ? t >= c : t > c;
                        h ? u = l + 1 : i = l
                    }
                    return Ao(i, Co)
                }

                function ar(n, t, r) {
                    if ("function" != typeof n) return xi;
                    if (t === b) return n;
                    switch (r) {
                        case 1:
                            return function(r) {
                                return n.call(t, r)
                            };
                        case 3:
                            return function(r, e, u) {
                                return n.call(t, r, e, u)
                            };
                        case 4:
                            return function(r, e, u, i) {
                                return n.call(t, r, e, u, i)
                            };
                        case 5:
                            return function(r, e, u, i, o) {
                                return n.call(t, r, e, u, i, o)
                            }
                    }
                    return function() {
                        return n.apply(t, arguments)
                    }
                }

                function fr(n) {
                    return eo.call(n, 0)
                }

                function lr(n, t, r) {
                    for (var e = r.length, u = -1, i = xo(n.length - e, 0), o = -1, a = t.length, f = Fi(i + a); ++o < a;) f[o] = t[o];
                    for (; ++u < e;) f[r[u]] = n[u];
                    for (; i--;) f[o++] = n[u++];
                    return f
                }

                function cr(n, t, r) {
                    for (var e = -1, u = r.length, i = -1, o = xo(n.length - u, 0), a = -1, f = t.length, l = Fi(o + f); ++i < o;) l[i] = n[i];
                    for (var c = i; ++a < f;) l[c + a] = t[a];
                    for (; ++e < u;) l[c + r[e]] = n[i++];
                    return l
                }

                function sr(n, t) {
                    return function(r, e, u) {
                        var i = t ? t() : {};
                        if (e = Nr(e, u, 3), Ua(r))
                            for (var o = -1, a = r.length; ++o < a;) {
                                var f = r[o];
                                n(i, f, e(f, o, r), r)
                            } else Bo(r, function(t, r, u) {
                                n(i, t, e(t, r, u), u)
                            });
                        return i
                    }
                }

                function pr(n) {
                    return _u(function(t, r) {
                        var e = -1,
                            u = null == t ? 0 : r.length,
                            i = u > 2 ? r[u - 2] : b,
                            o = u > 2 ? r[2] : b,
                            a = u > 1 ? r[u - 1] : b;
                        for ("function" == typeof i ? (i = ar(i, a, 5), u -= 2) : (i = "function" == typeof a ? a : b, u -= i ? 1 : 0), o && Zr(r[0], r[1], o) && (i = 3 > u ? b : i, u = 1); ++e < u;) {
                            var f = r[e];
                            f && n(t, f, i)
                        }
                        return t
                    })
                }

                function hr(n, t) {
                    return function(r, e) {
                        var u = r ? Go(r) : 0;
                        if (!ne(u)) return n(r, e);
                        for (var i = t ? u : -1, o = le(r);
                            (t ? i-- : ++i < u) && e(o[i], i, o) !== !1;);
                        return r
                    }
                }

                function vr(n) {
                    return function(t, r, e) {
                        for (var u = le(t), i = e(t), o = i.length, a = n ? o : -1; n ? a-- : ++a < o;) {
                            var f = i[a];
                            if (r(u[f], f, u) === !1) break
                        }
                        return t
                    }
                }

                function _r(n, t) {
                    function r() {
                        var u = this && this !== tt && this instanceof r ? e : n;
                        return u.apply(t, arguments)
                    }
                    var e = yr(n);
                    return r
                }

                function gr(n) {
                    return function(t) {
                        for (var r = -1, e = mi(ii(t)), u = e.length, i = ""; ++r < u;) i = n(i, e[r], r);
                        return i
                    }
                }

                function yr(n) {
                    return function() {
                        var t = arguments;
                        switch (t.length) {
                            case 0:
                                return new n;
                            case 1:
                                return new n(t[0]);
                            case 2:
                                return new n(t[0], t[1]);
                            case 3:
                                return new n(t[0], t[1], t[2]);
                            case 4:
                                return new n(t[0], t[1], t[2], t[3]);
                            case 5:
                                return new n(t[0], t[1], t[2], t[3], t[4])
                        }
                        var r = Po(n.prototype),
                            e = n.apply(r, t);
                        return Su(e) ? e : r
                    }
                }

                function dr(n) {
                    function t(r, e, u) {
                        u && Zr(r, e, u) && (e = null);
                        var i = Fr(r, n, null, null, null, null, null, e);
                        return i.placeholder = t.placeholder, i
                    }
                    return t
                }

                function mr(n, t) {
                    return function(r, e, u) {
                        if (u && Zr(r, e, u) && (e = null), e = Nr(e, u, 3), 1 == e.length) {
                            r = fe(r);
                            var i = lt(r, e, n, t);
                            if (!r.length || i !== t) return i
                        }
                        return Et(r, e, n, t)
                    }
                }

                function wr(n, r) {
                    return function(e, u, i) {
                        if (u = Nr(u, i, 3), Ua(e)) {
                            var o = t(e, u, r);
                            return o > -1 ? e[o] : b
                        }
                        return St(e, u, n)
                    }
                }

                function br(n) {
                    return function(r, e, u) {
                        return r && r.length ? (e = Nr(e, u, 3), t(r, e, n)) : -1
                    }
                }

                function xr(n) {
                    return function(t, r, e) {
                        return r = Nr(r, e, 3), St(t, r, n, !0)
                    }
                }

                function Ar(n) {
                    return function() {
                        for (var t, r = arguments.length, e = n ? r : -1, u = 0, i = Fi(r); n ? e-- : ++e < r;) {
                            var o = i[u++] = arguments[e];
                            if ("function" != typeof o) throw new Di(N);
                            !t && Q.prototype.thru && "wrapper" == Pr(o) && (t = new Q([]))
                        }
                        for (e = t ? -1 : r; ++e < r;) {
                            o = i[e];
                            var a = Pr(o),
                                f = "wrapper" == a ? Vo(o) : null;
                            t = f && Qr(f[0]) && f[1] == (S | I | R | C) && !f[4].length && 1 == f[9] ? t[Pr(f[0])].apply(t, f[3]) : 1 == o.length && Qr(o) ? t[a]() : t.thru(o)
                        }
                        return function() {
                            var n = arguments;
                            if (t && 1 == n.length && Ua(n[0])) return t.plant(n[0]).value();
                            for (var e = 0, u = r ? i[e].apply(this, n) : n[0]; ++e < r;) u = i[e].call(this, u);
                            return u
                        }
                    }
                }

                function jr(n, t) {
                    return function(r, e, u) {
                        return "function" == typeof e && u === b && Ua(r) ? n(r, e) : t(r, ar(e, u, 3))
                    }
                }

                function Or(n) {
                    return function(t, r, e) {
                        return ("function" != typeof r || e !== b) && (r = ar(r, e, 3)), n(t, r, Ju)
                    }
                }

                function Ir(n) {
                    return function(t, r, e) {
                        return ("function" != typeof r || e !== b) && (r = ar(r, e, 3)), n(t, r)
                    }
                }

                function Er(n) {
                    return function(t, r, e) {
                        var u = {};
                        return r = Nr(r, e, 3), Ut(t, function(t, e, i) {
                            var o = r(t, e, i);
                            e = n ? o : e, t = n ? t : o, u[e] = t
                        }), u
                    }
                }

                function Rr(n) {
                    return function(t, r, e) {
                        return t = u(t), (n ? t : "") + Tr(t, r, e) + (n ? "" : t)
                    }
                }

                function kr(n) {
                    var t = _u(function(r, e) {
                        var u = _(e, t.placeholder);
                        return Fr(r, n, null, e, u)
                    });
                    return t
                }

                function Sr(n, t) {
                    return function(r, e, u, i) {
                        var o = arguments.length < 3;
                        return "function" == typeof e && i === b && Ua(r) ? n(r, e, u, o) : Jt(r, Nr(e, i, 4), u, o, t)
                    }
                }

                function Cr(n, t, r, e, u, i, o, a, f, l) {
                    function c() {
                        for (var m = arguments.length, w = m, x = Fi(m); w--;) x[w] = arguments[w];
                        if (e && (x = lr(x, e, u)), i && (x = cr(x, i, o)), v || y) {
                            var O = c.placeholder,
                                I = _(x, O);
                            if (m -= I.length, l > m) {
                                var E = a ? it(a) : null,
                                    S = xo(l - m, 0),
                                    C = v ? I : null,
                                    T = v ? null : I,
                                    U = v ? x : null,
                                    W = v ? null : x;
                                t |= v ? R : k, t &= ~(v ? k : R), g || (t &= ~(A | j));
                                var F = [n, t, r, U, C, W, T, E, f, S],
                                    $ = Cr.apply(b, F);
                                return Qr(n) && Jo($, F), $.placeholder = O, $
                            }
                        }
                        var L = p ? r : this,
                            M = h ? L[n] : n;
                        return a && (x = ie(x, a)), s && f < x.length && (x.length = f), this && this !== tt && this instanceof c && (M = d || yr(n)), M.apply(L, x)
                    }
                    var s = t & S,
                        p = t & A,
                        h = t & j,
                        v = t & I,
                        g = t & O,
                        y = t & E,
                        d = h ? null : yr(n);
                    return c
                }

                function Tr(n, t, r) {
                    var e = n.length;
                    if (t = +t, e >= t || !wo(t)) return "";
                    var u = t - e;
                    return r = null == r ? " " : r + "", si(r, uo(u / r.length)).slice(0, u)
                }

                function Ur(n, t, r, e) {
                    function u() {
                        for (var t = -1, a = arguments.length, f = -1, l = e.length, c = Fi(a + l); ++f < l;) c[f] = e[f];
                        for (; a--;) c[f++] = arguments[++t];
                        var s = this && this !== tt && this instanceof u ? o : n;
                        return s.apply(i ? r : this, c)
                    }
                    var i = t & A,
                        o = yr(n);
                    return u
                }

                function Wr(n) {
                    return function(t, r, e, u) {
                        var i = Nr(e);
                        return null == e && i === xt ? ir(t, r, n) : or(t, r, i(e, u, 1), n)
                    }
                }

                function Fr(n, t, r, e, u, i, o, a) {
                    var f = t & j;
                    if (!f && "function" != typeof n) throw new Di(N);
                    var l = e ? e.length : 0;
                    if (l || (t &= ~(R | k), e = u = null), l -= u ? u.length : 0, t & k) {
                        var c = e,
                            s = u;
                        e = u = null
                    }
                    var p = f ? null : Vo(n),
                        h = [n, t, r, e, u, c, s, i, o, a];
                    if (p && (re(h, p), t = h[1], a = h[9]), h[9] = null == a ? f ? 0 : n.length : xo(a - l, 0) || 0, t == A) var v = _r(h[0], h[2]);
                    else v = t != R && t != (A | R) || h[4].length ? Cr.apply(b, h) : Ur.apply(b, h);
                    var _ = p ? Ko : Jo;
                    return _(v, h)
                }

                function $r(n, t, r, e, u, i, o) {
                    var a = -1,
                        f = n.length,
                        l = t.length;
                    if (f != l && !(u && l > f)) return !1;
                    for (; ++a < f;) {
                        var c = n[a],
                            s = t[a],
                            p = e ? e(u ? s : c, u ? c : s, a) : b;
                        if (p !== b) {
                            if (p) continue;
                            return !1
                        }
                        if (u) {
                            if (!vt(t, function(n) {
                                    return c === n || r(c, n, e, u, i, o)
                                })) return !1
                        } else if (c !== s && !r(c, s, e, u, i, o)) return !1
                    }
                    return !0
                }

                function Lr(n, t, r) {
                    switch (r) {
                        case q:
                        case D:
                            return +n == +t;
                        case K:
                            return n.name == t.name && n.message == t.message;
                        case G:
                            return n != +n ? t != +t : n == +t;
                        case X:
                        case H:
                            return n == t + ""
                    }
                    return !1
                }

                function Mr(n, t, r, e, u, i, o) {
                    var a = Ka(n),
                        f = a.length,
                        l = Ka(t),
                        c = l.length;
                    if (f != c && !u) return !1;
                    for (var s = f; s--;) {
                        var p = a[s];
                        if (!(u ? p in t : Zi.call(t, p))) return !1
                    }
                    for (var h = u; ++s < f;) {
                        p = a[s];
                        var v = n[p],
                            _ = t[p],
                            g = e ? e(u ? _ : v, u ? v : _, p) : b;
                        if (!(g === b ? r(v, _, e, u, i, o) : g)) return !1;
                        h || (h = "constructor" == p)
                    }
                    if (!h) {
                        var y = n.constructor,
                            d = t.constructor;
                        if (y != d && "constructor" in n && "constructor" in t && !("function" == typeof y && y instanceof y && "function" == typeof d && d instanceof d)) return !1
                    }
                    return !0
                }

                function Nr(n, t, r) {
                    var e = V.callback || wi;
                    return e = e === wi ? xt : e, r ? e(n, t, r) : e
                }

                function Pr(n) {
                    for (var t = n.name, r = $o[t], e = r ? r.length : 0; e--;) {
                        var u = r[e],
                            i = u.func;
                        if (null == i || i == n) return u.name
                    }
                    return t
                }

                function Br(n, t, e) {
                    var u = V.indexOf || xe;
                    return u = u === xe ? r : u, n ? u(n, t, e) : u
                }

                function zr(n) {
                    for (var t = Xu(n), r = t.length; r--;) t[r][2] = te(t[r][1]);
                    return t
                }

                function qr(n, t) {
                    var r = null == n ? b : n[t];
                    return Uu(r) ? r : b
                }

                function Dr(n, t, r) {
                    for (var e = -1, u = r ? r.length : 0; ++e < u;) {
                        var i = r[e],
                            o = i.size;
                        switch (i.type) {
                            case "drop":
                                n += o;
                                break;
                            case "dropRight":
                                t -= o;
                                break;
                            case "take":
                                t = Ao(t, n + o);
                                break;
                            case "takeRight":
                                n = xo(n, t - o)
                        }
                    }
                    return {
                        start: n,
                        end: t
                    }
                }

                function Kr(n) {
                    var t = n.length,
                        r = new n.constructor(t);
                    return t && "string" == typeof n[0] && Zi.call(n, "index") && (r.index = n.index, r.input = n.input), r
                }

                function Yr(n) {
                    var t = n.constructor;
                    return "function" == typeof t && t instanceof t || (t = Bi), new t
                }

                function Vr(n, t, r) {
                    var e = n.constructor;
                    switch (t) {
                        case nn:
                            return fr(n);
                        case q:
                        case D:
                            return new e(+n);
                        case tn:
                        case rn:
                        case en:
                        case un:
                        case on:
                        case an:
                        case fn:
                        case ln:
                        case cn:
                            e instanceof e && (e = Lo[t]);
                            var u = n.buffer;
                            return new e(r ? fr(u) : u, n.byteOffset, n.length);
                        case G:
                        case H:
                            return new e(n);
                        case X:
                            var i = new e(n.source, kn.exec(n));
                            i.lastIndex = n.lastIndex
                    }
                    return i
                }

                function Gr(n, t, r) {
                    null == n || Hr(t, n) || (t = ce(t), n = 1 == t.length ? n : $t(n, Xt(t, 0, -1)), t = je(t));
                    var e = null == n ? n : n[t];
                    return null == e ? b : e.apply(n, r)
                }

                function Jr(n) {
                    return null != n && ne(Go(n))
                }

                function Xr(n, t) {
                    return n = "number" == typeof n || Tn.test(n) ? +n : -1, t = null == t ? Wo : t, n > -1 && n % 1 == 0 && t > n
                }

                function Zr(n, t, r) {
                    if (!Su(r)) return !1;
                    var e = typeof t;
                    if ("number" == e ? Jr(r) && Xr(t, r.length) : "string" == e && t in r) {
                        var u = r[t];
                        return n === n ? n === u : u !== u
                    }
                    return !1
                }

                function Hr(n, t) {
                    var r = typeof n;
                    if ("string" == r && xn.test(n) || "number" == r) return !0;
                    if (Ua(n)) return !1;
                    var e = !bn.test(n);
                    return e || null != t && n in le(t)
                }

                function Qr(n) {
                    var t = Pr(n);
                    if (!(t in Dn.prototype)) return !1;
                    var r = V[t];
                    if (n === r) return !0;
                    var e = Vo(r);
                    return !!e && n === e[0]
                }

                function ne(n) {
                    return "number" == typeof n && n > -1 && n % 1 == 0 && Wo >= n
                }

                function te(n) {
                    return n === n && !Su(n)
                }

                function re(n, t) {
                    var r = n[1],
                        e = t[1],
                        u = r | e,
                        i = S > u,
                        o = e == S && r == I || e == S && r == C && n[7].length <= t[8] || e == (S | C) && r == I;
                    if (!i && !o) return n;
                    e & A && (n[2] = t[2], u |= r & A ? 0 : O);
                    var a = t[3];
                    if (a) {
                        var f = n[3];
                        n[3] = f ? lr(f, a, t[4]) : it(a), n[4] = f ? _(n[3], P) : it(t[4])
                    }
                    return a = t[5], a && (f = n[5], n[5] = f ? cr(f, a, t[6]) : it(a), n[6] = f ? _(n[5], P) : it(t[6])), a = t[7], a && (n[7] = it(a)), e & S && (n[8] = null == n[8] ? t[8] : Ao(n[8], t[8])), null == n[9] && (n[9] = t[9]), n[0] = t[0], n[1] = u, n
                }

                function ee(n, t) {
                    n = le(n);
                    for (var r = -1, e = t.length, u = {}; ++r < e;) {
                        var i = t[r];
                        i in n && (u[i] = n[i])
                    }
                    return u
                }

                function ue(n, t) {
                    var r = {};
                    return Tt(n, function(n, e, u) {
                        t(n, e, u) && (r[e] = n)
                    }), r
                }

                function ie(n, t) {
                    for (var r = n.length, e = Ao(t.length, r), u = it(n); e--;) {
                        var i = t[e];
                        n[e] = Xr(i, r) ? u[i] : b
                    }
                    return n
                }

                function oe(n) {
                    var t, r = V.support;
                    if (!h(n) || Qi.call(n) != J || rt(n) || !Zi.call(n, "constructor") && (t = n.constructor, "function" == typeof t && !(t instanceof t)) || !r.argsTag && Au(n)) return !1;
                    var e;
                    return r.ownLast ? (Tt(n, function(n, t, r) {
                        return e = Zi.call(r, t), !1
                    }), e !== !1) : (Tt(n, function(n, t) {
                        e = t
                    }), e === b || Zi.call(n, e))
                }

                function ae(n) {
                    for (var t = Ju(n), r = t.length, e = r && n.length, u = !!e && ne(e) && (Ua(n) || Au(n) || Lu(n)), i = -1, o = []; ++i < r;) {
                        var a = t[i];
                        (u && Xr(a, e) || Zi.call(n, a)) && o.push(a)
                    }
                    return o
                }

                function fe(n) {
                    return null == n ? [] : Jr(n) ? V.support.unindexedChars && Lu(n) ? n.split("") : Su(n) ? n : Bi(n) : ni(n)
                }

                function le(n) {
                    if (V.support.unindexedChars && Lu(n)) {
                        for (var t = -1, r = n.length, e = Bi(n); ++t < r;) e[t] = n.charAt(t);
                        return e
                    }
                    return Su(n) ? n : Bi(n)
                }

                function ce(n) {
                    if (Ua(n)) return n;
                    var t = [];
                    return u(n).replace(An, function(n, r, e, u) {
                        t.push(e ? u.replace(En, "$1") : r || n)
                    }), t
                }

                function se(n) {
                    return n instanceof Dn ? n.clone() : new Q(n.__wrapped__, n.__chain__, it(n.__actions__))
                }

                function pe(n, t, r) {
                    t = (r ? Zr(n, t, r) : null == t) ? 1 : xo(+t || 1, 1);
                    for (var e = 0, u = n ? n.length : 0, i = -1, o = Fi(uo(u / t)); u > e;) o[++i] = Xt(n, e, e += t);
                    return o
                }

                function he(n) {
                    for (var t = -1, r = n ? n.length : 0, e = -1, u = []; ++t < r;) {
                        var i = n[t];
                        i && (u[++e] = i)
                    }
                    return u
                }

                function ve(n, t, r) {
                    var e = n ? n.length : 0;
                    return e ? ((r ? Zr(n, t, r) : null == t) && (t = 1), Xt(n, 0 > t ? 0 : t)) : []
                }

                function _e(n, t, r) {
                    var e = n ? n.length : 0;
                    return e ? ((r ? Zr(n, t, r) : null == t) && (t = 1), t = e - (+t || 0), Xt(n, 0, 0 > t ? 0 : t)) : []
                }

                function ge(n, t, r) {
                    return n && n.length ? er(n, Nr(t, r, 3), !0, !0) : []
                }

                function ye(n, t, r) {
                    return n && n.length ? er(n, Nr(t, r, 3), !0) : []
                }

                function de(n, t, r, e) {
                    var u = n ? n.length : 0;
                    return u ? (r && "number" != typeof r && Zr(n, t, r) && (r = 0, e = u), Rt(n, t, r, e)) : []
                }

                function me(n) {
                    return n ? n[0] : b
                }

                function we(n, t, r) {
                    var e = n ? n.length : 0;
                    return r && Zr(n, t, r) && (t = !1), e ? Ct(n, t) : []
                }

                function be(n) {
                    var t = n ? n.length : 0;
                    return t ? Ct(n, !0) : []
                }

                function xe(n, t, e) {
                    var u = n ? n.length : 0;
                    if (!u) return -1;
                    if ("number" == typeof e) e = 0 > e ? xo(u + e, 0) : e;
                    else if (e) {
                        var i = ir(n, t),
                            o = n[i];
                        return (t === t ? t === o : o !== o) ? i : -1
                    }
                    return r(n, t, e || 0)
                }

                function Ae(n) {
                    return _e(n, 1)
                }

                function je(n) {
                    var t = n ? n.length : 0;
                    return t ? n[t - 1] : b
                }

                function Oe(n, t, r) {
                    var e = n ? n.length : 0;
                    if (!e) return -1;
                    var u = e;
                    if ("number" == typeof r) u = (0 > r ? xo(e + r, 0) : Ao(r || 0, e - 1)) + 1;
                    else if (r) {
                        u = ir(n, t, !0) - 1;
                        var i = n[u];
                        return (t === t ? t === i : i !== i) ? u : -1
                    }
                    if (t !== t) return p(n, u, !0);
                    for (; u--;)
                        if (n[u] === t) return u;
                    return -1
                }

                function Ie() {
                    var n = arguments,
                        t = n[0];
                    if (!t || !t.length) return t;
                    for (var r = 0, e = Br(), u = n.length; ++r < u;)
                        for (var i = 0, o = n[r];
                            (i = e(t, o, i)) > -1;) ho.call(t, i, 1);
                    return t
                }

                function Ee(n, t, r) {
                    var e = [];
                    if (!n || !n.length) return e;
                    var u = -1,
                        i = [],
                        o = n.length;
                    for (t = Nr(t, r, 3); ++u < o;) {
                        var a = n[u];
                        t(a, u, n) && (e.push(a), i.push(u))
                    }
                    return Vt(n, i), e
                }

                function Re(n) {
                    return ve(n, 1)
                }

                function ke(n, t, r) {
                    var e = n ? n.length : 0;
                    return e ? (r && "number" != typeof r && Zr(n, t, r) && (t = 0, r = e), Xt(n, t, r)) : []
                }

                function Se(n, t, r) {
                    var e = n ? n.length : 0;
                    return e ? ((r ? Zr(n, t, r) : null == t) && (t = 1), Xt(n, 0, 0 > t ? 0 : t)) : []
                }

                function Ce(n, t, r) {
                    var e = n ? n.length : 0;
                    return e ? ((r ? Zr(n, t, r) : null == t) && (t = 1), t = e - (+t || 0), Xt(n, 0 > t ? 0 : t)) : []
                }

                function Te(n, t, r) {
                    return n && n.length ? er(n, Nr(t, r, 3), !1, !0) : []
                }

                function Ue(n, t, r) {
                    return n && n.length ? er(n, Nr(t, r, 3)) : []
                }

                function We(n, t, e, u) {
                    var i = n ? n.length : 0;
                    if (!i) return [];
                    null != t && "boolean" != typeof t && (u = e, e = Zr(n, t, u) ? null : t, t = !1);
                    var o = Nr();
                    return (null != e || o !== xt) && (e = o(e, u, 3)), t && Br() == r ? g(n, e) : tr(n, e)
                }

                function Fe(n) {
                    if (!n || !n.length) return [];
                    var t = -1,
                        r = 0;
                    n = ct(n, function(n) {
                        return Jr(n) ? (r = xo(n.length, r), !0) : void 0
                    });
                    for (var e = Fi(r); ++t < r;) e[t] = st(n, Kt(t));
                    return e
                }

                function $e(n, t, r) {
                    var e = n ? n.length : 0;
                    if (!e) return [];
                    var u = Fe(n);
                    return null == t ? u : (t = ar(t, r, 4), st(u, function(n) {
                        return pt(n, t, b, !0)
                    }))
                }

                function Le() {
                    for (var n = -1, t = arguments.length; ++n < t;) {
                        var r = arguments[n];
                        if (Jr(r)) var e = e ? Ot(e, r).concat(Ot(r, e)) : r
                    }
                    return e ? tr(e) : []
                }

                function Me(n, t) {
                    var r = -1,
                        e = n ? n.length : 0,
                        u = {};
                    for (!e || t || Ua(n[0]) || (t = []); ++r < e;) {
                        var i = n[r];
                        t ? u[i] = t[r] : i && (u[i[0]] = i[1])
                    }
                    return u
                }

                function Ne(n) {
                    var t = V(n);
                    return t.__chain__ = !0, t
                }

                function Pe(n, t, r) {
                    return t.call(r, n), n
                }

                function Be(n, t, r) {
                    return t.call(r, n)
                }

                function ze() {
                    return Ne(this)
                }

                function qe() {
                    return new Q(this.value(), this.__chain__)
                }

                function De(n) {
                    for (var t, r = this; r instanceof Z;) {
                        var e = se(r);
                        t ? u.__wrapped__ = e : t = e;
                        var u = e;
                        r = r.__wrapped__
                    }
                    return u.__wrapped__ = n, t
                }

                function Ke() {
                    var n = this.__wrapped__;
                    return n instanceof Dn ? (this.__actions__.length && (n = new Dn(this)), new Q(n.reverse(), this.__chain__)) : this.thru(function(n) {
                        return n.reverse()
                    })
                }

                function Ye() {
                    return this.value() + ""
                }

                function Ve() {
                    return ur(this.__wrapped__, this.__actions__)
                }

                function Ge(n, t, r) {
                    var e = Ua(n) ? ft : It;
                    return r && Zr(n, t, r) && (t = null), ("function" != typeof t || r !== b) && (t = Nr(t, r, 3)), e(n, t)
                }

                function Je(n, t, r) {
                    var e = Ua(n) ? ct : kt;
                    return t = Nr(t, r, 3), e(n, t)
                }

                function Xe(n, t) {
                    return la(n, Bt(t))
                }

                function Ze(n, t, r, e) {
                    var u = n ? Go(n) : 0;
                    return ne(u) || (n = ni(n), u = n.length), u ? (r = "number" != typeof r || e && Zr(t, r, e) ? 0 : 0 > r ? xo(u + r, 0) : r || 0, "string" == typeof n || !Ua(n) && Lu(n) ? u > r && n.indexOf(t, r) > -1 : Br(n, t, r) > -1) : !1
                }

                function He(n, t, r) {
                    var e = Ua(n) ? st : Pt;
                    return t = Nr(t, r, 3), e(n, t)
                }

                function Qe(n, t) {
                    return He(n, Ri(t))
                }

                function nu(n, t, r) {
                    var e = Ua(n) ? ct : kt;
                    return t = Nr(t, r, 3), e(n, function(n, r, e) {
                        return !t(n, r, e)
                    })
                }

                function tu(n, t, r) {
                    if (r ? Zr(n, t, r) : null == t) {
                        n = fe(n);
                        var e = n.length;
                        return e > 0 ? n[Gt(0, e - 1)] : b
                    }
                    var u = -1,
                        i = zu(n),
                        e = i.length,
                        o = e - 1;
                    for (t = Ao(0 > t ? 0 : +t || 0, e); ++u < t;) {
                        var a = Gt(u, o),
                            f = i[a];
                        i[a] = i[u], i[u] = f
                    }
                    return i.length = t, i
                }

                function ru(n) {
                    return tu(n, ko)
                }

                function eu(n) {
                    var t = n ? Go(n) : 0;
                    return ne(t) ? t : Ka(n).length
                }

                function uu(n, t, r) {
                    var e = Ua(n) ? vt : Zt;
                    return r && Zr(n, t, r) && (t = null), ("function" != typeof t || r !== b) && (t = Nr(t, r, 3)), e(n, t)
                }

                function iu(n, t, r) {
                    if (null == n) return [];
                    r && Zr(n, t, r) && (t = null);
                    var e = -1;
                    t = Nr(t, r, 3);
                    var u = Pt(n, function(n, r, u) {
                        return {
                            criteria: t(n, r, u),
                            index: ++e,
                            value: n
                        }
                    });
                    return Ht(u, a)
                }

                function ou(n, t, r, e) {
                    return null == n ? [] : (e && Zr(t, r, e) && (r = null), Ua(t) || (t = null == t ? [] : [t]), Ua(r) || (r = null == r ? [] : [r]), Qt(n, t, r))
                }

                function au(n, t) {
                    return Je(n, Bt(t))
                }

                function fu(n, t) {
                    if ("function" != typeof t) {
                        if ("function" != typeof n) throw new Di(N);
                        var r = n;
                        n = t, t = r
                    }
                    return n = wo(n = +n) ? n : 0,
                        function() {
                            return --n < 1 ? t.apply(this, arguments) : void 0
                        }
                }

                function lu(n, t, r) {
                    return r && Zr(n, t, r) && (t = null), t = n && null == t ? n.length : xo(+t || 0, 0), Fr(n, S, null, null, null, null, t)
                }

                function cu(n, t) {
                    var r;
                    if ("function" != typeof t) {
                        if ("function" != typeof n) throw new Di(N);
                        var e = n;
                        n = t, t = e
                    }
                    return function() {
                        return --n > 0 && (r = t.apply(this, arguments)), 1 >= n && (t = null), r
                    }
                }

                function su(n, t, r) {
                    function e() {
                        p && io(p), f && io(f), f = p = h = b
                    }

                    function u() {
                        var r = t - (wa() - c);
                        if (0 >= r || r > t) {
                            f && io(f);
                            var e = h;
                            f = p = h = b, e && (v = wa(), l = n.apply(s, a), p || f || (a = s = null))
                        } else p = po(u, r)
                    }

                    function i() {
                        p && io(p), f = p = h = b, (g || _ !== t) && (v = wa(), l = n.apply(s, a), p || f || (a = s = null))
                    }

                    function o() {
                        if (a = arguments, c = wa(), s = this, h = g && (p || !y), _ === !1) var r = y && !p;
                        else {
                            f || y || (v = c);
                            var e = _ - (c - v),
                                o = 0 >= e || e > _;
                            o ? (f && (f = io(f)), v = c, l = n.apply(s, a)) : f || (f = po(i, e))
                        }
                        return o && p ? p = io(p) : p || t === _ || (p = po(u, t)), r && (o = !0, l = n.apply(s, a)), !o || p || f || (a = s = null), l
                    }
                    var a, f, l, c, s, p, h, v = 0,
                        _ = !1,
                        g = !0;
                    if ("function" != typeof n) throw new Di(N);
                    if (t = 0 > t ? 0 : +t || 0, r === !0) {
                        var y = !0;
                        g = !1
                    } else Su(r) && (y = r.leading, _ = "maxWait" in r && xo(+r.maxWait || 0, t), g = "trailing" in r ? r.trailing : g);
                    return o.cancel = e, o
                }

                function pu(n, t) {
                    if ("function" != typeof n || t && "function" != typeof t) throw new Di(N);
                    var r = function() {
                        var e = arguments,
                            u = t ? t.apply(this, e) : e[0],
                            i = r.cache;
                        if (i.has(u)) return i.get(u);
                        var o = n.apply(this, e);
                        return r.cache = i.set(u, o), o
                    };
                    return r.cache = new pu.Cache, r
                }

                function hu(n) {
                    if ("function" != typeof n) throw new Di(N);
                    return function() {
                        return !n.apply(this, arguments)
                    }
                }

                function vu(n) {
                    return cu(2, n)
                }

                function _u(n, t) {
                    if ("function" != typeof n) throw new Di(N);
                    return t = xo(t === b ? n.length - 1 : +t || 0, 0),
                        function() {
                            for (var r = arguments, e = -1, u = xo(r.length - t, 0), i = Fi(u); ++e < u;) i[e] = r[t + e];
                            switch (t) {
                                case 0:
                                    return n.call(this, i);
                                case 1:
                                    return n.call(this, r[0], i);
                                case 2:
                                    return n.call(this, r[0], r[1], i)
                            }
                            var o = Fi(t + 1);
                            for (e = -1; ++e < t;) o[e] = r[e];
                            return o[t] = i, n.apply(this, o)
                        }
                }

                function gu(n) {
                    if ("function" != typeof n) throw new Di(N);
                    return function(t) {
                        return n.apply(this, t)
                    }
                }

                function yu(n, t, r) {
                    var e = !0,
                        u = !0;
                    if ("function" != typeof n) throw new Di(N);
                    return r === !1 ? e = !1 : Su(r) && (e = "leading" in r ? !!r.leading : e, u = "trailing" in r ? !!r.trailing : u), qn.leading = e, qn.maxWait = +t, qn.trailing = u, su(n, t, qn)
                }

                function du(n, t) {
                    return t = null == t ? xi : t, Fr(t, R, null, [n], [])
                }

                function mu(n, t, r, e) {
                    return t && "boolean" != typeof t && Zr(n, t, r) ? t = !1 : "function" == typeof t && (e = r, r = t, t = !1), "function" == typeof r ? At(n, t, ar(r, e, 1)) : At(n, t)
                }

                function wu(n, t, r) {
                    return "function" == typeof t ? At(n, !0, ar(t, r, 1)) : At(n, !0)
                }

                function bu(n, t) {
                    return n > t
                }

                function xu(n, t) {
                    return n >= t
                }

                function Au(n) {
                    return h(n) && Jr(n) && Qi.call(n) == B
                }

                function ju(n) {
                    return n === !0 || n === !1 || h(n) && Qi.call(n) == q
                }

                function Ou(n) {
                    return h(n) && Qi.call(n) == D
                }

                function Iu(n) {
                    return !!n && 1 === n.nodeType && h(n) && (V.support.nodeTag ? Qi.call(n).indexOf("Element") > -1 : rt(n))
                }

                function Eu(n) {
                    return null == n ? !0 : Jr(n) && (Ua(n) || Lu(n) || Au(n) || h(n) && Fa(n.splice)) ? !n.length : !Ka(n).length
                }

                function Ru(n, t, r, e) {
                    r = "function" == typeof r ? ar(r, e, 3) : b;
                    var u = r ? r(n, t) : b;
                    return u === b ? Lt(n, t, r) : !!u
                }

                function ku(n) {
                    return h(n) && "string" == typeof n.message && Qi.call(n) == K
                }

                function Su(n) {
                    var t = typeof n;
                    return !!n && ("object" == t || "function" == t)
                }

                function Cu(n, t, r, e) {
                    return r = "function" == typeof r ? ar(r, e, 3) : b, Nt(n, zr(t), r)
                }

                function Tu(n) {
                    return Fu(n) && n != +n
                }

                function Uu(n) {
                    return null == n ? !1 : Qi.call(n) == Y ? to.test(Xi.call(n)) : h(n) && (rt(n) ? to : Cn).test(n)
                }

                function Wu(n) {
                    return null === n
                }

                function Fu(n) {
                    return "number" == typeof n || h(n) && Qi.call(n) == G
                }

                function $u(n) {
                    return Su(n) && Qi.call(n) == X
                }

                function Lu(n) {
                    return "string" == typeof n || h(n) && Qi.call(n) == H
                }

                function Mu(n) {
                    return h(n) && ne(n.length) && !!Bn[Qi.call(n)]
                }

                function Nu(n) {
                    return n === b
                }

                function Pu(n, t) {
                    return t > n
                }

                function Bu(n, t) {
                    return t >= n
                }

                function zu(n) {
                    var t = n ? Go(n) : 0;
                    return ne(t) ? t ? V.support.unindexedChars && Lu(n) ? n.split("") : it(n) : [] : ni(n)
                }

                function qu(n) {
                    return bt(n, Ju(n))
                }

                function Du(n, t, r) {
                    var e = Po(n);
                    return r && Zr(n, t, r) && (t = null), t ? mt(e, t) : e
                }

                function Ku(n) {
                    return Ft(n, Ju(n))
                }

                function Yu(n, t, r) {
                    var e = null == n ? b : $t(n, ce(t), t + "");
                    return e === b ? r : e
                }

                function Vu(n, t) {
                    if (null == n) return !1;
                    var r = Zi.call(n, t);
                    if (!r && !Hr(t)) {
                        if (t = ce(t), n = 1 == t.length ? n : $t(n, Xt(t, 0, -1)), null == n) return !1;
                        t = je(t), r = Zi.call(n, t)
                    }
                    return r || ne(n.length) && Xr(t, n.length) && (Ua(n) || Au(n) || Lu(n))
                }

                function Gu(n, t, r) {
                    r && Zr(n, t, r) && (t = null);
                    for (var e = -1, u = Ka(n), i = u.length, o = {}; ++e < i;) {
                        var a = u[e],
                            f = n[a];
                        t ? Zi.call(o, f) ? o[f].push(a) : o[f] = [a] : o[f] = a
                    }
                    return o
                }

                function Ju(n) {
                    if (null == n) return [];
                    Su(n) || (n = Bi(n));
                    var t = n.length,
                        r = V.support;
                    t = t && ne(t) && (Ua(n) || Au(n) || Lu(n)) && t || 0;
                    for (var e = n.constructor, u = -1, i = Fa(e) && e.prototype || Vi, o = i === n, a = Fi(t), f = t > 0, l = r.enumErrorProps && (n === Yi || n instanceof Li), c = r.enumPrototypes && Fa(n); ++u < t;) a[u] = u + "";
                    for (var s in n) c && "prototype" == s || l && ("message" == s || "name" == s) || f && Xr(s, t) || "constructor" == s && (o || !Zi.call(n, s)) || a.push(s);
                    if (r.nonEnumShadows && n !== Vi) {
                        var p = n === Gi ? H : n === Yi ? K : Qi.call(n),
                            h = Mo[p] || Mo[J];
                        for (p == J && (i = Vi), t = Nn.length; t--;) {
                            s = Nn[t];
                            var v = h[s];
                            o && v || (v ? !Zi.call(n, s) : n[s] === i[s]) || a.push(s)
                        }
                    }
                    return a
                }

                function Xu(n) {
                    n = le(n);
                    for (var t = -1, r = Ka(n), e = r.length, u = Fi(e); ++t < e;) {
                        var i = r[t];
                        u[t] = [i, n[i]]
                    }
                    return u
                }

                function Zu(n, t, r) {
                    var e = null == n ? b : le(n)[t];
                    return e === b && (null == n || Hr(t, n) || (t = ce(t), n = 1 == t.length ? n : $t(n, Xt(t, 0, -1)), e = null == n ? b : le(n)[je(t)]), e = e === b ? r : e), Fa(e) ? e.call(n) : e
                }

                function Hu(n, t, r) {
                    if (null == n) return n;
                    var e = t + "";
                    t = null != n[e] || Hr(t, n) ? [e] : ce(t);
                    for (var u = -1, i = t.length, o = i - 1, a = n; null != a && ++u < i;) {
                        var f = t[u];
                        Su(a) && (u == o ? a[f] = r : null == a[f] && (a[f] = Xr(t[u + 1]) ? [] : {})), a = a[f]
                    }
                    return n
                }

                function Qu(n, t, r, e) {
                    var u = Ua(n) || Mu(n);
                    if (t = Nr(t, e, 4), null == r)
                        if (u || Su(n)) {
                            var i = n.constructor;
                            r = u ? Ua(n) ? new i : [] : Po(Fa(i) ? i.prototype : null)
                        } else r = {};
                    return (u ? ot : Ut)(n, function(n, e, u) {
                        return t(r, n, e, u)
                    }), r
                }

                function ni(n) {
                    return rr(n, Ka(n))
                }

                function ti(n) {
                    return rr(n, Ju(n))
                }

                function ri(n, t, r) {
                    return t = +t || 0, "undefined" == typeof r ? (r = t,
                        t = 0) : r = +r || 0, n >= Ao(t, r) && n < xo(t, r)
                }

                function ei(n, t, r) {
                    r && Zr(n, t, r) && (t = r = null);
                    var e = null == n,
                        u = null == t;
                    if (null == r && (u && "boolean" == typeof n ? (r = n, n = 1) : "boolean" == typeof t && (r = t, u = !0)), e && u && (t = 1, u = !1), n = +n || 0, u ? (t = n, n = 0) : t = +t || 0, r || n % 1 || t % 1) {
                        var i = Eo();
                        return Ao(n + i * (t - n + fo("1e-" + ((i + "").length - 1))), t)
                    }
                    return Gt(n, t)
                }

                function ui(n) {
                    return n = u(n), n && n.charAt(0).toUpperCase() + n.slice(1)
                }

                function ii(n) {
                    return n = u(n), n && n.replace(Un, l).replace(In, "")
                }

                function oi(n, t, r) {
                    n = u(n), t += "";
                    var e = n.length;
                    return r = r === b ? e : Ao(0 > r ? 0 : +r || 0, e), r -= t.length, r >= 0 && n.indexOf(t, r) == r
                }

                function ai(n) {
                    return n = u(n), n && yn.test(n) ? n.replace(_n, c) : n
                }

                function fi(n) {
                    return n = u(n), n && On.test(n) ? n.replace(jn, "\\$&") : n
                }

                function li(n, t, r) {
                    n = u(n), t = +t;
                    var e = n.length;
                    if (e >= t || !wo(t)) return n;
                    var i = (t - e) / 2,
                        o = oo(i),
                        a = uo(i);
                    return r = Tr("", a, r), r.slice(0, o) + n + r
                }

                function ci(n, t, r) {
                    return r && Zr(n, t, r) && (t = 0), Io(n, t)
                }

                function si(n, t) {
                    var r = "";
                    if (n = u(n), t = +t, 1 > t || !n || !wo(t)) return r;
                    do t % 2 && (r += n), t = oo(t / 2), n += n; while (t);
                    return r
                }

                function pi(n, t, r) {
                    return n = u(n), r = null == r ? 0 : Ao(0 > r ? 0 : +r || 0, n.length), n.lastIndexOf(t, r) == r
                }

                function hi(n, t, r) {
                    var e = V.templateSettings;
                    r && Zr(n, t, r) && (t = r = null), n = u(n), t = dt(mt({}, r || t), e, yt);
                    var i, o, a = dt(mt({}, t.imports), e.imports, yt),
                        f = Ka(a),
                        l = rr(a, f),
                        c = 0,
                        p = t.interpolate || Wn,
                        h = "__p += '",
                        v = zi((t.escape || Wn).source + "|" + p.source + "|" + (p === wn ? Rn : Wn).source + "|" + (t.evaluate || Wn).source + "|$", "g"),
                        _ = "//# sourceURL=" + ("sourceURL" in t ? t.sourceURL : "lodash.templateSources[" + ++Pn + "]") + "\n";
                    n.replace(v, function(t, r, e, u, a, f) {
                        return e || (e = u), h += n.slice(c, f).replace(Fn, s), r && (i = !0, h += "' +\n__e(" + r + ") +\n'"), a && (o = !0, h += "';\n" + a + ";\n__p += '"), e && (h += "' +\n((__t = (" + e + ")) == null ? '' : __t) +\n'"), c = f + t.length, t
                    }), h += "';\n";
                    var g = t.variable;
                    g || (h = "with (obj) {\n" + h + "\n}\n"), h = (o ? h.replace(sn, "") : h).replace(pn, "$1").replace(hn, "$1;"), h = "function(" + (g || "obj") + ") {\n" + (g ? "" : "obj || (obj = {});\n") + "var __t, __p = ''" + (i ? ", __e = _.escape" : "") + (o ? ", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n" : ";\n") + h + "return __p\n}";
                    var y = ef(function() {
                        return Mi(f, _ + "return " + h).apply(b, l)
                    });
                    if (y.source = h, ku(y)) throw y;
                    return y
                }

                function vi(n, t, r) {
                    var e = n;
                    return (n = u(n)) ? (r ? Zr(e, t, r) : null == t) ? n.slice(y(n), d(n) + 1) : (t += "", n.slice(i(n, t), o(n, t) + 1)) : n
                }

                function _i(n, t, r) {
                    var e = n;
                    return n = u(n), n ? (r ? Zr(e, t, r) : null == t) ? n.slice(y(n)) : n.slice(i(n, t + "")) : n
                }

                function gi(n, t, r) {
                    var e = n;
                    return n = u(n), n ? (r ? Zr(e, t, r) : null == t) ? n.slice(0, d(n) + 1) : n.slice(0, o(n, t + "") + 1) : n
                }

                function yi(n, t, r) {
                    r && Zr(n, t, r) && (t = null);
                    var e = T,
                        i = U;
                    if (null != t)
                        if (Su(t)) {
                            var o = "separator" in t ? t.separator : o;
                            e = "length" in t ? +t.length || 0 : e, i = "omission" in t ? u(t.omission) : i
                        } else e = +t || 0;
                    if (n = u(n), e >= n.length) return n;
                    var a = e - i.length;
                    if (1 > a) return i;
                    var f = n.slice(0, a);
                    if (null == o) return f + i;
                    if ($u(o)) {
                        if (n.slice(a).search(o)) {
                            var l, c, s = n.slice(0, a);
                            for (o.global || (o = zi(o.source, (kn.exec(o) || "") + "g")), o.lastIndex = 0; l = o.exec(s);) c = l.index;
                            f = f.slice(0, null == c ? a : c)
                        }
                    } else if (n.indexOf(o, a) != a) {
                        var p = f.lastIndexOf(o);
                        p > -1 && (f = f.slice(0, p))
                    }
                    return f + i
                }

                function di(n) {
                    return n = u(n), n && gn.test(n) ? n.replace(vn, m) : n
                }

                function mi(n, t, r) {
                    return r && Zr(n, t, r) && (t = null), n = u(n), n.match(t || $n) || []
                }

                function wi(n, t, r) {
                    return r && Zr(n, t, r) && (t = null), h(n) ? Ai(n) : xt(n, t)
                }

                function bi(n) {
                    return function() {
                        return n
                    }
                }

                function xi(n) {
                    return n
                }

                function Ai(n) {
                    return Bt(At(n, !0))
                }

                function ji(n, t) {
                    return zt(n, At(t, !0))
                }

                function Oi(n, t, r) {
                    if (null == r) {
                        var e = Su(t),
                            u = e ? Ka(t) : null,
                            i = u && u.length ? Ft(t, u) : null;
                        (i ? i.length : e) || (i = !1, r = t, t = n, n = this)
                    }
                    i || (i = Ft(t, Ka(t)));
                    var o = !0,
                        a = -1,
                        f = Fa(n),
                        l = i.length;
                    r === !1 ? o = !1 : Su(r) && "chain" in r && (o = r.chain);
                    for (; ++a < l;) {
                        var c = i[a],
                            s = t[c];
                        n[c] = s, f && (n.prototype[c] = function(t) {
                            return function() {
                                var r = this.__chain__;
                                if (o || r) {
                                    var e = n(this.__wrapped__),
                                        u = e.__actions__ = it(this.__actions__);
                                    return u.push({
                                        func: t,
                                        args: arguments,
                                        thisArg: n
                                    }), e.__chain__ = r, e
                                }
                                var i = [this.value()];
                                return lo.apply(i, arguments), t.apply(n, i)
                            }
                        }(s))
                    }
                    return n
                }

                function Ii() {
                    return v._ = no, this
                }

                function Ei() {}

                function Ri(n) {
                    return Hr(n) ? Kt(n) : Yt(n)
                }

                function ki(n) {
                    return function(t) {
                        return $t(n, ce(t), t + "")
                    }
                }

                function Si(n, t, r) {
                    r && Zr(n, t, r) && (t = r = null), n = +n || 0, r = null == r ? 1 : +r || 0, null == t ? (t = n, n = 0) : t = +t || 0;
                    for (var e = -1, u = xo(uo((t - n) / (r || 1)), 0), i = Fi(u); ++e < u;) i[e] = n, n += r;
                    return i
                }

                function Ci(n, t, r) {
                    if (n = oo(n), 1 > n || !wo(n)) return [];
                    var e = -1,
                        u = Fi(Ao(n, So));
                    for (t = ar(t, r, 1); ++e < n;) So > e ? u[e] = t(e) : t(e);
                    return u
                }

                function Ti(n) {
                    var t = ++Hi;
                    return u(n) + t
                }

                function Ui(n, t) {
                    return (+n || 0) + (+t || 0)
                }

                function Wi(n, t, r) {
                    r && Zr(n, t, r) && (t = null);
                    var e = Nr(),
                        u = null == t;
                    return u && e === xt || (u = !1, t = e(t, r, 3)), u ? _t(Ua(n) ? n : fe(n)) : nr(n, t)
                }
                v = v ? et.defaults(tt.Object(), v, et.pick(tt, Mn)) : tt;
                var Fi = v.Array,
                    $i = v.Date,
                    Li = v.Error,
                    Mi = v.Function,
                    Ni = v.Math,
                    Pi = v.Number,
                    Bi = v.Object,
                    zi = v.RegExp,
                    qi = v.String,
                    Di = v.TypeError,
                    Ki = Fi.prototype,
                    Yi = Li.prototype,
                    Vi = Bi.prototype,
                    Gi = qi.prototype,
                    Ji = (Ji = v.window) ? Ji.document : null,
                    Xi = Mi.prototype.toString,
                    Zi = Vi.hasOwnProperty,
                    Hi = 0,
                    Qi = Vi.toString,
                    no = v._,
                    to = zi("^" + fi(Xi.call(Zi)).replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"),
                    ro = qr(v, "ArrayBuffer"),
                    eo = qr(ro && new ro(0), "slice"),
                    uo = Ni.ceil,
                    io = v.clearTimeout,
                    oo = Ni.floor,
                    ao = qr(Bi, "getPrototypeOf"),
                    fo = v.parseFloat,
                    lo = Ki.push,
                    co = Vi.propertyIsEnumerable,
                    so = qr(v, "Set"),
                    po = v.setTimeout,
                    ho = Ki.splice,
                    vo = qr(v, "Uint8Array"),
                    _o = qr(v, "WeakMap"),
                    go = function() {
                        try {
                            var n = qr(v, "Float64Array"),
                                t = new n(new ro(10), 0, 1) && n
                        } catch (r) {}
                        return t || null
                    }(),
                    yo = qr(Bi, "create"),
                    mo = qr(Fi, "isArray"),
                    wo = v.isFinite,
                    bo = qr(Bi, "keys"),
                    xo = Ni.max,
                    Ao = Ni.min,
                    jo = qr($i, "now"),
                    Oo = qr(Pi, "isFinite"),
                    Io = v.parseInt,
                    Eo = Ni.random,
                    Ro = Pi.NEGATIVE_INFINITY,
                    ko = Pi.POSITIVE_INFINITY,
                    So = 4294967295,
                    Co = So - 1,
                    To = So >>> 1,
                    Uo = go ? go.BYTES_PER_ELEMENT : 0,
                    Wo = 9007199254740991,
                    Fo = _o && new _o,
                    $o = {},
                    Lo = {};
                Lo[tn] = v.Float32Array, Lo[rn] = v.Float64Array, Lo[en] = v.Int8Array, Lo[un] = v.Int16Array, Lo[on] = v.Int32Array, Lo[an] = v.Uint8Array, Lo[fn] = v.Uint8ClampedArray, Lo[ln] = v.Uint16Array, Lo[cn] = v.Uint32Array;
                var Mo = {};
                Mo[z] = Mo[D] = Mo[G] = {
                    constructor: !0,
                    toLocaleString: !0,
                    toString: !0,
                    valueOf: !0
                }, Mo[q] = Mo[H] = {
                    constructor: !0,
                    toString: !0,
                    valueOf: !0
                }, Mo[K] = Mo[Y] = Mo[X] = {
                    constructor: !0,
                    toString: !0
                }, Mo[J] = {
                    constructor: !0
                }, ot(Nn, function(n) {
                    for (var t in Mo)
                        if (Zi.call(Mo, t)) {
                            var r = Mo[t];
                            r[n] = Zi.call(r, n)
                        }
                });
                var No = V.support = {};
                ! function(n) {
                    var t = function() {
                            this.x = n
                        },
                        r = {
                            0: n,
                            length: n
                        },
                        e = [];
                    t.prototype = {
                        valueOf: n,
                        y: n
                    };
                    for (var u in new t) e.push(u);
                    No.argsTag = Qi.call(arguments) == B, No.enumErrorProps = co.call(Yi, "message") || co.call(Yi, "name"), No.enumPrototypes = co.call(t, "prototype"), No.nodeTag = Qi.call(Ji) != J, No.nonEnumShadows = !/valueOf/.test(e), No.ownLast = "x" != e[0], No.spliceObjects = (ho.call(r, 0, 1), !r[0]), No.unindexedChars = "x" [0] + Bi("x")[0] != "xx";
                    try {
                        No.dom = 11 === Ji.createDocumentFragment().nodeType
                    } catch (i) {
                        No.dom = !1
                    }
                }(1, 0), V.templateSettings = {
                    escape: dn,
                    evaluate: mn,
                    interpolate: wn,
                    variable: "",
                    imports: {
                        _: V
                    }
                };
                var Po = function() {
                        function n() {}
                        return function(t) {
                            if (Su(t)) {
                                n.prototype = t;
                                var r = new n;
                                n.prototype = null
                            }
                            return r || {}
                        }
                    }(),
                    Bo = hr(Ut),
                    zo = hr(Wt, !0),
                    qo = vr(),
                    Do = vr(!0),
                    Ko = Fo ? function(n, t) {
                        return Fo.set(n, t), n
                    } : xi;
                eo || (fr = ro && vo ? function(n) {
                    var t = n.byteLength,
                        r = go ? oo(t / Uo) : 0,
                        e = r * Uo,
                        u = new ro(t);
                    if (r) {
                        var i = new go(u, 0, r);
                        i.set(new go(n, 0, r))
                    }
                    return t != e && (i = new vo(u, e), i.set(new vo(n, e))), u
                } : bi(null));
                var Yo = yo && so ? function(n) {
                        return new Qn(n)
                    } : bi(null),
                    Vo = Fo ? function(n) {
                        return Fo.get(n)
                    } : Ei,
                    Go = Kt("length"),
                    Jo = function() {
                        var n = 0,
                            t = 0;
                        return function(r, e) {
                            var u = wa(),
                                i = F - (u - t);
                            if (t = u, i > 0) {
                                if (++n >= W) return r
                            } else n = 0;
                            return Ko(r, e)
                        }
                    }(),
                    Xo = _u(function(n, t) {
                        return Jr(n) ? Ot(n, Ct(t, !1, !0)) : []
                    }),
                    Zo = br(),
                    Ho = br(!0),
                    Qo = _u(function(n) {
                        for (var t = n.length, e = t, u = Fi(s), i = Br(), o = i == r, a = []; e--;) {
                            var f = n[e] = Jr(f = n[e]) ? f : [];
                            u[e] = o && f.length >= 120 ? Yo(e && f) : null
                        }
                        var l = n[0],
                            c = -1,
                            s = l ? l.length : 0,
                            p = u[0];
                        n: for (; ++c < s;)
                            if (f = l[c], (p ? nt(p, f) : i(a, f, 0)) < 0) {
                                for (var e = t; --e;) {
                                    var h = u[e];
                                    if ((h ? nt(h, f) : i(n[e], f, 0)) < 0) continue n
                                }
                                p && p.push(f), a.push(f)
                            }
                        return a
                    }),
                    na = _u(function(t, r) {
                        r = Ct(r);
                        var e = wt(t, r);
                        return Vt(t, r.sort(n)), e
                    }),
                    ta = Wr(),
                    ra = Wr(!0),
                    ea = _u(function(n) {
                        return tr(Ct(n, !1, !0))
                    }),
                    ua = _u(function(n, t) {
                        return Jr(n) ? Ot(n, t) : []
                    }),
                    ia = _u(Fe),
                    oa = _u(function(n) {
                        var t = n.length,
                            r = t > 2 ? n[t - 2] : b,
                            e = t > 1 ? n[t - 1] : b;
                        return t > 2 && "function" == typeof r ? t -= 2 : (r = t > 1 && "function" == typeof e ? (--t, e) : b, e = b), n.length = t, $e(n, r, e)
                    }),
                    aa = _u(function(n, t) {
                        return Jr(n) && (n = fe(n)), wt(n, Ct(t))
                    }),
                    fa = sr(function(n, t, r) {
                        Zi.call(n, r) ? ++n[r] : n[r] = 1
                    }),
                    la = wr(Bo),
                    ca = wr(zo, !0),
                    sa = jr(ot, Bo),
                    pa = jr(at, zo),
                    ha = sr(function(n, t, r) {
                        Zi.call(n, r) ? n[r].push(t) : n[r] = [t]
                    }),
                    va = sr(function(n, t, r) {
                        n[r] = t
                    }),
                    _a = _u(function(n, t, r) {
                        var e = -1,
                            u = "function" == typeof t,
                            i = Hr(t),
                            o = Jr(n) ? Fi(n.length) : [];
                        return Bo(n, function(n) {
                            var a = u ? t : i && null != n ? n[t] : null;
                            o[++e] = a ? a.apply(n, r) : Gr(n, t, r)
                        }), o
                    }),
                    ga = sr(function(n, t, r) {
                        n[r ? 0 : 1].push(t)
                    }, function() {
                        return [
                            [],
                            []
                        ]
                    }),
                    ya = Sr(pt, Bo),
                    da = Sr(ht, zo),
                    ma = _u(function(n, t) {
                        if (null == n) return [];
                        var r = t[2];
                        return r && Zr(t[0], t[1], r) && (t.length = 1), Qt(n, Ct(t), [])
                    }),
                    wa = jo || function() {
                        return (new $i).getTime()
                    },
                    ba = _u(function(n, t, r) {
                        var e = A;
                        if (r.length) {
                            var u = _(r, ba.placeholder);
                            e |= R
                        }
                        return Fr(n, e, t, r, u)
                    }),
                    xa = _u(function(n, t) {
                        t = t.length ? Ct(t) : Ku(n);
                        for (var r = -1, e = t.length; ++r < e;) {
                            var u = t[r];
                            n[u] = Fr(n[u], A, n)
                        }
                        return n
                    }),
                    Aa = _u(function(n, t, r) {
                        var e = A | j;
                        if (r.length) {
                            var u = _(r, Aa.placeholder);
                            e |= R
                        }
                        return Fr(t, e, n, r, u)
                    }),
                    ja = dr(I),
                    Oa = dr(E),
                    Ia = _u(function(n, t) {
                        return jt(n, 1, t)
                    }),
                    Ea = _u(function(n, t, r) {
                        return jt(n, t, r)
                    }),
                    Ra = Ar(),
                    ka = Ar(!0),
                    Sa = kr(R),
                    Ca = kr(k),
                    Ta = _u(function(n, t) {
                        return Fr(n, C, null, null, null, Ct(t))
                    });
                No.argsTag || (Au = function(n) {
                    return h(n) && Jr(n) && Zi.call(n, "callee") && !co.call(n, "callee")
                });
                var Ua = mo || function(n) {
                    return h(n) && ne(n.length) && Qi.call(n) == z
                };
                No.dom || (Iu = function(n) {
                    return !!n && 1 === n.nodeType && h(n) && !$a(n)
                });
                var Wa = Oo || function(n) {
                        return "number" == typeof n && wo(n)
                    },
                    Fa = e(/x/) || vo && !e(vo) ? function(n) {
                        return Qi.call(n) == Y
                    } : e,
                    $a = ao ? function(n) {
                        if (!n || Qi.call(n) != J || !V.support.argsTag && Au(n)) return !1;
                        var t = qr(n, "valueOf"),
                            r = t && (r = ao(t)) && ao(r);
                        return r ? n == r || ao(n) == r : oe(n)
                    } : oe,
                    La = pr(function(n, t, r) {
                        return r ? dt(n, t, r) : mt(n, t)
                    }),
                    Ma = _u(function(n) {
                        var t = n[0];
                        return null == t ? t : (n.push(gt), La.apply(b, n))
                    }),
                    Na = xr(Ut),
                    Pa = xr(Wt),
                    Ba = Or(qo),
                    za = Or(Do),
                    qa = Ir(Ut),
                    Da = Ir(Wt),
                    Ka = bo ? function(n) {
                        var t = null == n ? null : n.constructor;
                        return "function" == typeof t && t.prototype === n || ("function" == typeof n ? V.support.enumPrototypes : Jr(n)) ? ae(n) : Su(n) ? bo(n) : []
                    } : ae,
                    Ya = Er(!0),
                    Va = Er(),
                    Ga = pr(qt),
                    Ja = _u(function(n, t) {
                        if (null == n) return {};
                        if ("function" != typeof t[0]) {
                            var t = st(Ct(t), qi);
                            return ee(n, Ot(Ju(n), t))
                        }
                        var r = ar(t[0], t[1], 3);
                        return ue(n, function(n, t, e) {
                            return !r(n, t, e)
                        })
                    }),
                    Xa = _u(function(n, t) {
                        return null == n ? {} : "function" == typeof t[0] ? ue(n, ar(t[0], t[1], 3)) : ee(n, Ct(t))
                    }),
                    Za = gr(function(n, t, r) {
                        return t = t.toLowerCase(), n + (r ? t.charAt(0).toUpperCase() + t.slice(1) : t)
                    }),
                    Ha = gr(function(n, t, r) {
                        return n + (r ? "-" : "") + t.toLowerCase()
                    }),
                    Qa = Rr(),
                    nf = Rr(!0);
                8 != Io(Ln + "08") && (ci = function(n, t, r) {
                    return (r ? Zr(n, t, r) : null == t) ? t = 0 : t && (t = +t), n = vi(n), Io(n, t || (Sn.test(n) ? 16 : 10))
                });
                var tf = gr(function(n, t, r) {
                        return n + (r ? "_" : "") + t.toLowerCase()
                    }),
                    rf = gr(function(n, t, r) {
                        return n + (r ? " " : "") + (t.charAt(0).toUpperCase() + t.slice(1))
                    }),
                    ef = _u(function(n, t) {
                        try {
                            return n.apply(b, t)
                        } catch (r) {
                            return ku(r) ? r : new Li(r)
                        }
                    }),
                    uf = _u(function(n, t) {
                        return function(r) {
                            return Gr(r, n, t)
                        }
                    }),
                    of = _u(function(n, t) {
                        return function(r) {
                            return Gr(n, r, t)
                        }
                    }),
                    af = mr(bu, Ro),
                    ff = mr(Pu, ko);
                return V.prototype = Z.prototype, Q.prototype = Po(Z.prototype), Q.prototype.constructor = Q, Dn.prototype = Po(Z.prototype), Dn.prototype.constructor = Dn, Gn.prototype["delete"] = Jn, Gn.prototype.get = Xn, Gn.prototype.has = Zn, Gn.prototype.set = Hn, Qn.prototype.push = ut, pu.Cache = Gn, V.after = fu, V.ary = lu, V.assign = La, V.at = aa, V.before = cu, V.bind = ba, V.bindAll = xa, V.bindKey = Aa, V.callback = wi, V.chain = Ne, V.chunk = pe, V.compact = he, V.constant = bi, V.countBy = fa, V.create = Du, V.curry = ja, V.curryRight = Oa, V.debounce = su, V.defaults = Ma, V.defer = Ia, V.delay = Ea, V.difference = Xo, V.drop = ve, V.dropRight = _e, V.dropRightWhile = ge, V.dropWhile = ye, V.fill = de, V.filter = Je, V.flatten = we, V.flattenDeep = be, V.flow = Ra, V.flowRight = ka, V.forEach = sa, V.forEachRight = pa, V.forIn = Ba, V.forInRight = za, V.forOwn = qa, V.forOwnRight = Da, V.functions = Ku, V.groupBy = ha, V.indexBy = va, V.initial = Ae, V.intersection = Qo, V.invert = Gu, V.invoke = _a, V.keys = Ka, V.keysIn = Ju, V.map = He, V.mapKeys = Ya, V.mapValues = Va, V.matches = Ai, V.matchesProperty = ji, V.memoize = pu, V.merge = Ga, V.method = uf, V.methodOf = of , V.mixin = Oi, V.negate = hu, V.omit = Ja, V.once = vu, V.pairs = Xu, V.partial = Sa, V.partialRight = Ca, V.partition = ga, V.pick = Xa, V.pluck = Qe, V.property = Ri, V.propertyOf = ki, V.pull = Ie, V.pullAt = na, V.range = Si, V.rearg = Ta, V.reject = nu, V.remove = Ee, V.rest = Re, V.restParam = _u, V.set = Hu, V.shuffle = ru, V.slice = ke, V.sortBy = iu, V.sortByAll = ma, V.sortByOrder = ou, V.spread = gu, V.take = Se, V.takeRight = Ce, V.takeRightWhile = Te, V.takeWhile = Ue, V.tap = Pe, V.throttle = yu, V.thru = Be, V.times = Ci, V.toArray = zu, V.toPlainObject = qu, V.transform = Qu, V.union = ea, V.uniq = We, V.unzip = Fe, V.unzipWith = $e, V.values = ni, V.valuesIn = ti, V.where = au, V.without = ua, V.wrap = du, V.xor = Le, V.zip = ia, V.zipObject = Me, V.zipWith = oa, V.backflow = ka, V.collect = He, V.compose = ka, V.each = sa, V.eachRight = pa, V.extend = La, V.iteratee = wi, V.methods = Ku, V.object = Me, V.select = Je, V.tail = Re, V.unique = We, Oi(V, V), V.add = Ui, V.attempt = ef, V.camelCase = Za, V.capitalize = ui, V.clone = mu, V.cloneDeep = wu, V.deburr = ii, V.endsWith = oi, V.escape = ai, V.escapeRegExp = fi, V.every = Ge, V.find = la, V.findIndex = Zo, V.findKey = Na, V.findLast = ca, V.findLastIndex = Ho, V.findLastKey = Pa, V.findWhere = Xe, V.first = me, V.get = Yu, V.gt = bu, V.gte = xu, V.has = Vu, V.identity = xi, V.includes = Ze, V.indexOf = xe, V.inRange = ri, V.isArguments = Au, V.isArray = Ua, V.isBoolean = ju, V.isDate = Ou, V.isElement = Iu, V.isEmpty = Eu, V.isEqual = Ru, V.isError = ku, V.isFinite = Wa, V.isFunction = Fa, V.isMatch = Cu, V.isNaN = Tu, V.isNative = Uu, V.isNull = Wu, V.isNumber = Fu, V.isObject = Su, V.isPlainObject = $a, V.isRegExp = $u, V.isString = Lu, V.isTypedArray = Mu, V.isUndefined = Nu, V.kebabCase = Ha, V.last = je, V.lastIndexOf = Oe, V.lt = Pu, V.lte = Bu, V.max = af, V.min = ff, V.noConflict = Ii, V.noop = Ei, V.now = wa, V.pad = li, V.padLeft = Qa, V.padRight = nf, V.parseInt = ci, V.random = ei, V.reduce = ya, V.reduceRight = da, V.repeat = si, V.result = Zu, V.runInContext = w, V.size = eu, V.snakeCase = tf, V.some = uu, V.sortedIndex = ta, V.sortedLastIndex = ra, V.startCase = rf, V.startsWith = pi, V.sum = Wi, V.template = hi, V.trim = vi, V.trimLeft = _i, V.trimRight = gi, V.trunc = yi, V.unescape = di, V.uniqueId = Ti, V.words = mi, V.all = Ge, V.any = uu, V.contains = Ze, V.eq = Ru, V.detect = la, V.foldl = ya, V.foldr = da, V.head = me, V.include = Ze, V.inject = ya, Oi(V, function() {
                    var n = {};
                    return Ut(V, function(t, r) {
                        V.prototype[r] || (n[r] = t)
                    }), n
                }(), !1), V.sample = tu, V.prototype.sample = function(n) {
                    return this.__chain__ || null != n ? this.thru(function(t) {
                        return tu(t, n)
                    }) : tu(this.value())
                }, V.VERSION = x, ot(["bind", "bindKey", "curry", "curryRight", "partial", "partialRight"], function(n) {
                    V[n].placeholder = V
                }), ot(["dropWhile", "filter", "map", "takeWhile"], function(n, t) {
                    var r = t != M,
                        e = t == $;
                    Dn.prototype[n] = function(n, u) {
                        var i = this.__filtered__,
                            o = i && e ? new Dn(this) : this.clone(),
                            a = o.__iteratees__ || (o.__iteratees__ = []);
                        return a.push({
                            done: !1,
                            count: 0,
                            index: 0,
                            iteratee: Nr(n, u, 1),
                            limit: -1,
                            type: t
                        }), o.__filtered__ = i || r, o
                    }
                }), ot(["drop", "take"], function(n, t) {
                    var r = n + "While";
                    Dn.prototype[n] = function(r) {
                        var e = this.__filtered__,
                            u = e && !t ? this.dropWhile() : this.clone();
                        if (r = null == r ? 1 : xo(oo(r) || 0, 0), e) t ? u.__takeCount__ = Ao(u.__takeCount__, r) : je(u.__iteratees__).limit = r;
                        else {
                            var i = u.__views__ || (u.__views__ = []);
                            i.push({
                                size: r,
                                type: n + (u.__dir__ < 0 ? "Right" : "")
                            })
                        }
                        return u
                    }, Dn.prototype[n + "Right"] = function(t) {
                        return this.reverse()[n](t).reverse()
                    }, Dn.prototype[n + "RightWhile"] = function(n, t) {
                        return this.reverse()[r](n, t).reverse()
                    }
                }), ot(["first", "last"], function(n, t) {
                    var r = "take" + (t ? "Right" : "");
                    Dn.prototype[n] = function() {
                        return this[r](1).value()[0]
                    }
                }), ot(["initial", "rest"], function(n, t) {
                    var r = "drop" + (t ? "" : "Right");
                    Dn.prototype[n] = function() {
                        return this[r](1)
                    }
                }), ot(["pluck", "where"], function(n, t) {
                    var r = t ? "filter" : "map",
                        e = t ? Bt : Ri;
                    Dn.prototype[n] = function(n) {
                        return this[r](e(n))
                    }
                }), Dn.prototype.compact = function() {
                    return this.filter(xi)
                }, Dn.prototype.reject = function(n, t) {
                    return n = Nr(n, t, 1), this.filter(function(t) {
                        return !n(t)
                    })
                }, Dn.prototype.slice = function(n, t) {
                    n = null == n ? 0 : +n || 0;
                    var r = this;
                    return 0 > n ? r = this.takeRight(-n) : n && (r = this.drop(n)), t !== b && (t = +t || 0, r = 0 > t ? r.dropRight(-t) : r.take(t - n)), r
                }, Dn.prototype.toArray = function() {
                    return this.drop(0)
                }, Ut(Dn.prototype, function(n, t) {
                    var r = V[t];
                    if (r) {
                        var e = /^(?:filter|map|reject)|While$/.test(t),
                            u = /^(?:first|last)$/.test(t);
                        V.prototype[t] = function() {
                            var t = arguments,
                                i = this.__chain__,
                                o = this.__wrapped__,
                                a = !!this.__actions__.length,
                                f = o instanceof Dn,
                                l = t[0],
                                c = f || Ua(o);
                            c && e && "function" == typeof l && 1 != l.length && (f = c = !1);
                            var s = f && !a;
                            if (u && !i) return s ? n.call(o) : r.call(V, this.value());
                            var p = function(n) {
                                var e = [n];
                                return lo.apply(e, t), r.apply(V, e)
                            };
                            if (c) {
                                var h = s ? o : new Dn(this),
                                    v = n.apply(h, t);
                                if (!u && (a || v.__actions__)) {
                                    var _ = v.__actions__ || (v.__actions__ = []);
                                    _.push({
                                        func: Be,
                                        args: [p],
                                        thisArg: V
                                    })
                                }
                                return new Q(v, i)
                            }
                            return this.thru(p)
                        }
                    }
                }), ot(["concat", "join", "pop", "push", "replace", "shift", "sort", "splice", "split", "unshift"], function(n) {
                    var t = (/^(?:replace|split)$/.test(n) ? Gi : Ki)[n],
                        r = /^(?:push|sort|unshift)$/.test(n) ? "tap" : "thru",
                        e = !No.spliceObjects && /^(?:pop|shift|splice)$/.test(n),
                        u = /^(?:join|pop|replace|shift)$/.test(n),
                        i = e ? function() {
                            var n = t.apply(this, arguments);
                            return 0 === this.length && delete this[0], n
                        } : t;
                    V.prototype[n] = function() {
                        var n = arguments;
                        return u && !this.__chain__ ? i.apply(this.value(), n) : this[r](function(t) {
                            return i.apply(t, n)
                        })
                    }
                }), Ut(Dn.prototype, function(n, t) {
                    var r = V[t];
                    if (r) {
                        var e = r.name,
                            u = $o[e] || ($o[e] = []);
                        u.push({
                            name: t,
                            func: r
                        })
                    }
                }), $o[Cr(null, j).name] = [{
                    name: "wrapper",
                    func: null
                }], Dn.prototype.clone = Kn, Dn.prototype.reverse = Yn, Dn.prototype.value = Vn, V.prototype.chain = ze, V.prototype.commit = qe, V.prototype.plant = De, V.prototype.reverse = Ke, V.prototype.toString = Ye, V.prototype.run = V.prototype.toJSON = V.prototype.valueOf = V.prototype.value = Ve, V.prototype.collect = V.prototype.map, V.prototype.head = V.prototype.first, V.prototype.select = V.prototype.filter, V.prototype.tail = V.prototype.rest, V
            }
            var b, x = "3.9.3",
                A = 1,
                j = 2,
                O = 4,
                I = 8,
                E = 16,
                R = 32,
                k = 64,
                S = 128,
                C = 256,
                T = 30,
                U = "...",
                W = 150,
                F = 16,
                $ = 0,
                L = 1,
                M = 2,
                N = "Expected a function",
                P = "__lodash_placeholder__",
                B = "[object Arguments]",
                z = "[object Array]",
                q = "[object Boolean]",
                D = "[object Date]",
                K = "[object Error]",
                Y = "[object Function]",
                V = "[object Map]",
                G = "[object Number]",
                J = "[object Object]",
                X = "[object RegExp]",
                Z = "[object Set]",
                H = "[object String]",
                Q = "[object WeakMap]",
                nn = "[object ArrayBuffer]",
                tn = "[object Float32Array]",
                rn = "[object Float64Array]",
                en = "[object Int8Array]",
                un = "[object Int16Array]",
                on = "[object Int32Array]",
                an = "[object Uint8Array]",
                fn = "[object Uint8ClampedArray]",
                ln = "[object Uint16Array]",
                cn = "[object Uint32Array]",
                sn = /\b__p \+= '';/g,
                pn = /\b(__p \+=) '' \+/g,
                hn = /(__e\(.*?\)|\b__t\)) \+\n'';/g,
                vn = /&(?:amp|lt|gt|quot|#39|#96);/g,
                _n = /[&<>"'`]/g,
                gn = RegExp(vn.source),
                yn = RegExp(_n.source),
                dn = /<%-([\s\S]+?)%>/g,
                mn = /<%([\s\S]+?)%>/g,
                wn = /<%=([\s\S]+?)%>/g,
                bn = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,
                xn = /^\w*$/,
                An = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,
                jn = /[.*+?^${}()|[\]\/\\]/g,
                On = RegExp(jn.source),
                In = /[\u0300-\u036f\ufe20-\ufe23]/g,
                En = /\\(\\)?/g,
                Rn = /\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,
                kn = /\w*$/,
                Sn = /^0[xX]/,
                Cn = /^\[object .+?Constructor\]$/,
                Tn = /^\d+$/,
                Un = /[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,
                Wn = /($^)/,
                Fn = /['\n\r\u2028\u2029\\]/g,
                $n = function() {
                    var n = "[A-Z\\xc0-\\xd6\\xd8-\\xde]",
                        t = "[a-z\\xdf-\\xf6\\xf8-\\xff]+";
                    return RegExp(n + "+(?=" + n + t + ")|" + n + "?" + t + "|" + n + "+|[0-9]+", "g")
                }(),
                Ln = "    \f\ufeff\n\r\u2028\u2029",
                Mn = ["Array", "ArrayBuffer", "Date", "Error", "Float32Array", "Float64Array", "Function", "Int8Array", "Int16Array", "Int32Array", "Math", "Number", "Object", "RegExp", "Set", "String", "_", "clearTimeout", "document", "isFinite", "parseFloat", "parseInt", "setTimeout", "TypeError", "Uint8Array", "Uint8ClampedArray", "Uint16Array", "Uint32Array", "WeakMap", "window"],
                Nn = ["constructor", "hasOwnProperty", "isPrototypeOf", "propertyIsEnumerable", "toLocaleString", "toString", "valueOf"],
                Pn = -1,
                Bn = {};
            Bn[tn] = Bn[rn] = Bn[en] = Bn[un] = Bn[on] = Bn[an] = Bn[fn] = Bn[ln] = Bn[cn] = !0, Bn[B] = Bn[z] = Bn[nn] = Bn[q] = Bn[D] = Bn[K] = Bn[Y] = Bn[V] = Bn[G] = Bn[J] = Bn[X] = Bn[Z] = Bn[H] = Bn[Q] = !1;
            var zn = {};
            zn[B] = zn[z] = zn[nn] = zn[q] = zn[D] = zn[tn] = zn[rn] = zn[en] = zn[un] = zn[on] = zn[G] = zn[J] = zn[X] = zn[H] = zn[an] = zn[fn] = zn[ln] = zn[cn] = !0, zn[K] = zn[Y] = zn[V] = zn[Z] = zn[Q] = !1;
            var qn = {
                    leading: !1,
                    maxWait: 0,
                    trailing: !1
                },
                Dn = {
                    "": "A",
                    "": "A",
                    "": "A",
                    "": "A",
                    "": "A",
                    "": "A",
                    "": "a",
                    "": "a",
                    "": "a",
                    "": "a",
                    "": "a",
                    "": "a",
                    "": "C",
                    "": "c",
                    "": "D",
                    "": "d",
                    "": "E",
                    "": "E",
                    "": "E",
                    "": "E",
                    "": "e",
                    "": "e",
                    "": "e",
                    "": "e",
                    "": "I",
                    "": "I",
                    "": "I",
                    "": "I",
                    "": "i",
                    "": "i",
                    "": "i",
                    "": "i",
                    "": "N",
                    "": "n",
                    "": "O",
                    "": "O",
                    "": "O",
                    "": "O",
                    "": "O",
                    "": "O",
                    "": "o",
                    "": "o",
                    "": "o",
                    "": "o",
                    "": "o",
                    "": "o",
                    "": "U",
                    "": "U",
                    "": "U",
                    "": "U",
                    "": "u",
                    "": "u",
                    "": "u",
                    "": "u",
                    "": "Y",
                    "": "y",
                    "": "y",
                    "": "Ae",
                    "": "ae",
                    "": "Th",
                    "": "th",
                    "": "ss"
                },
                Kn = {
                    "&": "&amp;",
                    "<": "&lt;",
                    ">": "&gt;",
                    '"': "&quot;",
                    "'": "&#39;",
                    "`": "&#96;"
                },
                Yn = {
                    "&amp;": "&",
                    "&lt;": "<",
                    "&gt;": ">",
                    "&quot;": '"',
                    "&#39;": "'",
                    "&#96;": "`"
                },
                Vn = {
                    "function": !0,
                    object: !0
                },
                Gn = {
                    "\\": "\\",
                    "'": "'",
                    "\n": "n",
                    "\r": "r",
                    "\u2028": "u2028",
                    "\u2029": "u2029"
                },
                Jn = Vn[typeof exports] && exports && !exports.nodeType && exports,
                Xn = Vn[typeof module] && module && !module.nodeType && module,
                Zn = Jn && Xn && "object" == typeof global && global && global.Object && global,
                Hn = Vn[typeof self] && self && self.Object && self,
                Qn = Vn[typeof window] && window && window.Object && window,
                nt = Xn && Xn.exports === Jn && Jn,
                tt = Zn || Qn !== (this && this.window) && Qn || Hn || this,
                rt = function() {
                    try {
                        Object({
                            toString: 0
                        } + "")
                    } catch (n) {
                        return function() {
                            return !1
                        }
                    }
                    return function(n) {
                        return "function" != typeof n.toString && "string" == typeof(n + "")
                    }
                }(),
                et = w();
            "function" == typeof define && "object" == typeof define.amd && define.amd ? (tt._ = et, define(function() {
                return et
            })) : Jn && Xn ? nt ? (Xn.exports = et)._ = et : Jn._ = et : tt._ = et
        }).call(this)
    }(), SM.currentModule = null
}, "", {
    requires: []
});
YUI.add("model-relate", function(e) {
    SM.currentModule = "model-relate";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        function t() {}

        function i(t) {
            var i = this;
            r || e.error("Cannot create relationship. ModelStore not found."), e.stamp(this), i.init(t)
        }
        var r = e.ModelStore;
        t.ATTRS = {
            id: {
                valueFn: function() {
                    return this.get("clientId")
                }
            }
        }, t.prototype = {
            initializer: function(t) {
                var i = this;
                t = t || {}, i._registered = !1, i._relationships = {}, i._modelRelateHandles = [e.Do.before(i._doBeforeDestroy, i, "destroy", i)], e.Object.each(i._aggregateRelationships(), i._addRelationshipConfig, i), !1 !== t.register && i.onceAfter("initializedChange", i.register, i)
            },
            destructor: function() {
                new e.EventHandle(this._modelRelateHandles).detach(), this._modelRelateHandles = null, this._destroyRelationships()
            },
            addRelationship: function(e, t) {
                return this._addRelationshipConfig(t, e), this
            },
            getRelated: function(e) {
                var t = this.getRelationship(e);
                return t && t.related
            },
            getRelationship: function(t) {
                var i = this._relationships[t];
                return i && !i.initialized && (i = new e.ModelRelationship(i), this._relationships[t] = i), i
            },
            isNew: function() {
                return this.get("clientId") === this.get("id")
            },
            isRegistered: function() {
                return this._registered
            },
            register: function() {
                return r && (this.isRegistered() || (this._registered = r.registerModel(this) === this)), this
            },
            removeRelationship: function(e) {
                var t = this,
                    i = t.getRelationship(e);
                return i && (i.destroy(), i = null), delete this._relationships[e], t
            },
            toString: function() {
                return this.name + "[" + this.get("id") + ":" + e.stamp(this, !0) + "]"
            },
            unregister: function() {
                return r && this.isRegistered() && (this._registered = r.unregisterModel(this) === this), this._destroyRelationships(), this
            },
            _addRelationshipConfig: function(t, i) {
                this._relationships[i] = e.merge(t, {
                    name: i,
                    model: this
                })
            },
            _aggregateRelationships: function() {
                for (var t = this.constructor, i = {}; t;) t.RELATIONSHIPS && e.mix(i, t.RELATIONSHIPS), t = t.superclass ? t.superclass.constructor : null;
                return i
            },
            _destroyRelationships: function() {
                e.Object.each(this._relationships, function(e, t) {
                    this.removeRelationship(t)
                }, this)
            },
            _doBeforeDestroy: function(t, i) {
                var r;
                return "function" == typeof t && (i = t, t = {}), t && (t.unregister || t.remove || t["delete"]) ? (this.deleted = !0, r = e.bind(function(e) {
                    e ? this.deleted = !1 : this._destroyRelationships(), i && i.apply(null, arguments)
                }, this), new e.Do.AlterArgs(this.toString() + " deleted, modifying callback to destroy model relationships", [t, r])) : void 0
            }
        }, e.ModelRelate = t;
        var r = e.ModelStore,
            n = "toOne",
            s = "toMany";
        i.toOne = n, i.toMany = s, i.prototype = {
            initialized: !1,
            init: function(t) {
                var i = this;
                i.name = t.name, i.model = t.model, i.key = t.key || t.model.idAttribute || "id", i.relatedModel = r._getModelCtor(t.relatedModel), i.relatedKey = t.relatedKey || i.key, s === t.type ? (i.listType = t.listType || e.ModelList, e.mix(i, a, !0)) : n === t.type ? e.mix(i, o, !0) : e.error("Cannot create relationship. " + t.type + " is not a valid relationship type."), i._handles = [], i._storeList = r.getList(i.relatedModel), i._initRelated(), i._initEvents(), i.initialized = !0
            },
            destroy: function() {
                this._detachEvents(), this._storeList = null, this._destroyRelated(), this.related = null
            },
            toString: function() {
                var t = this;
                return t.model.toString() + " " + t.type + " relationship " + t.name + "[" + e.stamp(this, !0) + "]"
            },
            _checkRelationship: function(e) {
                return e.get(this.relatedKey) == this.model.get(this.key)
            },
            _destroyRelated: function() {},
            _detachEvents: function() {
                e.each(this._handles, function(e) {
                    e.detach()
                }), this._handles = []
            },
            _findRelated: function() {
                var t = this;
                return t._storeList.filter(e.bind(t._checkRelationship, t))
            },
            _initEvents: function() {
                var e = this,
                    t = e._handles,
                    i = {
                        bubbles: !0,
                        emitFacade: !0,
                        prefix: "modelRelationship",
                        preventable: !1
                    };
                this.publish("add", i), this.publish("remove", i), t.push(e.model.on(e.key + "Change", e._onKeyChange, e)), t.push(e.model.after(e.key + "Change", e._afterKeyChange, e)), t.push(e._storeList.after("*:" + e.relatedKey + "Change", e._afterRelatedKeyChange, e)), t.push(e._storeList.on("error", function(e) {})), t.push(e._storeList.after("add", e._afterStoreAdd, e)), t.push(e._storeList.after("remove", e._afterStoreRemove, e))
            },
            _initRelated: function() {},
            _refreshRelationship: function() {
                this._setRelated(this._findRelated())
            },
            _setRelated: function(e) {},
            _setRelatedAttr: function(e, t, i) {},
            _afterKeyChange: function(e) {
                "create" === e.src ? this._setRelatedAttr(e.attrName, e.newVal, {
                    src: "create",
                    silent: !0
                }) : this._refreshRelationship()
            },
            _afterStoreAdd: function(e) {},
            _afterStoreRemove: function(e) {},
            _afterRelatedKeyChange: function(e) {},
            _onKeyChange: function(e) {
                var t = e.target;
                e.attrName === t.idAttribute && t.isNew() && (e.src = "create")
            }
        }, e.ModelRelationship = e.augment(i, e.EventTarget);
        var o = {
                type: i.toOne,
                _initRelated: function() {
                    this._refreshRelationship()
                },
                _setRelated: function(t) {
                    var i, r = this;
                    t = e.Array(t), i = t[0] || null, r.related && this.fire("remove", {
                        model: r.related
                    }), r.related = i, r.related && this.fire("add", {
                        model: r.related
                    })
                },
                _setRelatedAttr: function(e, t, i) {
                    this.related && this.related.set(e, t, i)
                },
                _afterStoreAdd: function(e) {
                    var t = this,
                        i = e.model;
                    !t.related && t._checkRelationship(i) && t._setRelated(i)
                },
                _afterStoreRemove: function(e) {
                    var t = this,
                        i = e.model;
                    i === t.related && t._refreshRelationship()
                },
                _afterRelatedKeyChange: function(e) {
                    e.model = e.target, "create" !== e.src && (this.related === e.model ? (e.unregister = !0, this._afterStoreRemove(e)) : this._afterStoreAdd(e))
                }
            },
            a = {
                type: i.toMany,
                _initRelated: function() {
                    var e = this;
                    e.related = new e.listType({
                        model: e.relatedModel
                    }), e._handles.push(e.related.on("remove", e._onRelatedRemove, e)), e._refreshRelationship()
                },
                _destroyRelated: function() {
                    this.related.destroy()
                },
                _setRelated: function(e) {
                    var t = this.related,
                        i = t.isEmpty() ? "add" : "reset";
                    t[i](e)
                },
                _setRelatedAttr: function(e, t, i) {
                    this.related.each(function(r) {
                        r.set(e, t, i)
                    })
                },
                _afterStoreAdd: function(e) {
                    var t = this,
                        i = e.model;
                    t._checkRelationship(i) && (delete e.index, t.related.add(i, e), t.fire("add", e))
                },
                _afterStoreRemove: function(e) {
                    var t = this,
                        i = e.model; - 1 !== t.related.indexOf(i) && (t.related.remove(i, e), t.fire("remove", e))
                },
                _afterRelatedKeyChange: function(e) {
                    e.model = e.target, "create" !== e.src && (-1 !== this.related.indexOf(e.model) ? (e.unregister = !0, this._afterStoreRemove(e)) : this._afterStoreAdd(e))
                },
                _onRelatedRemove: function(e) {
                    e.unregister || e.remove || e["delete"] || e.preventDefault()
                }
            }
    }(), SM.currentModule = null
}, "", {
    requires: ["array-extras", "base", "event-custom", "model-list", "model-store"]
});
YUI.add("model-store", function(t) {
    SM.currentModule = "model-store";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        t.ModelStore = function() {
            return {
                _yuid: t.guid(),
                _lists: {},
                find: function(t, e) {
                    var r = this.getList(t, !1);
                    return r && r.getById(e)
                },
                getList: function(t, e) {
                    var r = this;
                    return e = e !== !1, r._lists[r._getModelName(t)] || e && r._createList(t)
                },
                toString: function() {
                    return "ModelStore[" + this._yuid + "]"
                },
                registerModel: function(t) {
                    var e, r = this.getList(t);
                    return e = r.add(t)
                },
                unregisterAll: function() {
                    t.each(this._lists, function(t) {
                        t.destroy()
                    }), this._lists = {}
                },
                unregisterModel: function(t) {
                    var e = this.getList(t);
                    return e.remove(t, {
                        unregister: !0
                    }), t
                },
                _createList: function(e) {
                    var r = this,
                        n = r._getModelCtor(e),
                        o = null;
                    return n && (o = new t.ModelList({
                        model: n
                    }), r._lists[n.NAME] = o, r._initList(o)), o
                },
                _getModelCtor: function(e) {
                    var r = null;
                    return t.Lang.isString(e) && (e = t.namespace(e)), e instanceof t.Model ? r = e.constructor : e.superclass && e.superclass.constructor instanceof t.Model.constructor && (r = e), r
                },
                _getModelName: function(t) {
                    var e = this._getModelCtor(t);
                    return e ? e.NAME : "unknown"
                },
                _initList: function(t) {
                    return t.store = !0, t.on("error", function(t) {}), t.on("remove", function(t) {
                        t.unregister || t["delete"] || t.preventDefault()
                    }), t
                }
            }
        }()
    }(), SM.currentModule = null
}, "", {
    requires: ["base", "model", "model-list"]
});
YUI.add('react-dom', function(Y) {
    SM.currentModule = 'react-dom';
    var exports = {};
    var module = SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    (function() {
        // react-dom dumbly assumes that if `exports` exists, then `require()` must also exist.
        var require = SM.import;
        /**
         * ReactDOM v15.4.2
         *
         * Copyright 2013-present, Facebook, Inc.
         * All rights reserved.
         *
         * This source code is licensed under the BSD-style license found in the
         * LICENSE file in the root directory of this source tree. An additional grant
         * of patent rights can be found in the PATENTS file in the same directory.
         *
         */
        ! function(e) {
            if ("object" == typeof exports && "undefined" != typeof module) module.exports = e(require("react"));
            else if ("function" == typeof define && define.amd) define(["react"], e);
            else {
                var t;
                t = "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : this, t.ReactDOM = e(t.React)
            }
        }(function(e) {
            return function(e) {
                return e()
            }(function() {
                return function e(t, n, r) {
                    function o(a, s) {
                        if (!n[a]) {
                            if (!t[a]) {
                                var u = "function" == typeof require && require;
                                if (!s && u) return u(a, !0);
                                if (i) return i(a, !0);
                                var l = new Error("Cannot find module '" + a + "'");
                                throw l.code = "MODULE_NOT_FOUND", l
                            }
                            var c = n[a] = {
                                exports: {}
                            };
                            t[a][0].call(c.exports, function(e) {
                                var n = t[a][1][e];
                                return o(n ? n : e)
                            }, c, c.exports, e, t, n, r)
                        }
                        return n[a].exports
                    }
                    for (var i = "function" == typeof require && require, a = 0; a < r.length; a++) o(r[a]);
                    return o
                }({
                    1: [function(e, t, n) {
                        "use strict";
                        var r = {
                            Properties: {
                                "aria-current": 0,
                                "aria-details": 0,
                                "aria-disabled": 0,
                                "aria-hidden": 0,
                                "aria-invalid": 0,
                                "aria-keyshortcuts": 0,
                                "aria-label": 0,
                                "aria-roledescription": 0,
                                "aria-autocomplete": 0,
                                "aria-checked": 0,
                                "aria-expanded": 0,
                                "aria-haspopup": 0,
                                "aria-level": 0,
                                "aria-modal": 0,
                                "aria-multiline": 0,
                                "aria-multiselectable": 0,
                                "aria-orientation": 0,
                                "aria-placeholder": 0,
                                "aria-pressed": 0,
                                "aria-readonly": 0,
                                "aria-required": 0,
                                "aria-selected": 0,
                                "aria-sort": 0,
                                "aria-valuemax": 0,
                                "aria-valuemin": 0,
                                "aria-valuenow": 0,
                                "aria-valuetext": 0,
                                "aria-atomic": 0,
                                "aria-busy": 0,
                                "aria-live": 0,
                                "aria-relevant": 0,
                                "aria-dropeffect": 0,
                                "aria-grabbed": 0,
                                "aria-activedescendant": 0,
                                "aria-colcount": 0,
                                "aria-colindex": 0,
                                "aria-colspan": 0,
                                "aria-controls": 0,
                                "aria-describedby": 0,
                                "aria-errormessage": 0,
                                "aria-flowto": 0,
                                "aria-labelledby": 0,
                                "aria-owns": 0,
                                "aria-posinset": 0,
                                "aria-rowcount": 0,
                                "aria-rowindex": 0,
                                "aria-rowspan": 0,
                                "aria-setsize": 0
                            },
                            DOMAttributeNames: {},
                            DOMPropertyNames: {}
                        };
                        t.exports = r
                    }, {}],
                    2: [function(e, t, n) {
                        "use strict";
                        var r = e(33),
                            o = e(131),
                            i = {
                                focusDOMComponent: function() {
                                    o(r.getNodeFromInstance(this))
                                }
                            };
                        t.exports = i
                    }, {
                        131: 131,
                        33: 33
                    }],
                    3: [function(e, t, n) {
                        "use strict";

                        function r() {
                            var e = window.opera;
                            return "object" == typeof e && "function" == typeof e.version && parseInt(e.version(), 10) <= 12
                        }

                        function o(e) {
                            return (e.ctrlKey || e.altKey || e.metaKey) && !(e.ctrlKey && e.altKey)
                        }

                        function i(e) {
                            switch (e) {
                                case "topCompositionStart":
                                    return k.compositionStart;
                                case "topCompositionEnd":
                                    return k.compositionEnd;
                                case "topCompositionUpdate":
                                    return k.compositionUpdate
                            }
                        }

                        function a(e, t) {
                            return "topKeyDown" === e && t.keyCode === _
                        }

                        function s(e, t) {
                            switch (e) {
                                case "topKeyUp":
                                    return y.indexOf(t.keyCode) !== -1;
                                case "topKeyDown":
                                    return t.keyCode !== _;
                                case "topKeyPress":
                                case "topMouseDown":
                                case "topBlur":
                                    return !0;
                                default:
                                    return !1
                            }
                        }

                        function u(e) {
                            var t = e.detail;
                            return "object" == typeof t && "data" in t ? t.data : null
                        }

                        function l(e, t, n, r) {
                            var o, l;
                            if (C ? o = i(e) : N ? s(e, n) && (o = k.compositionEnd) : a(e, n) && (o = k.compositionStart), !o) return null;
                            x && (N || o !== k.compositionStart ? o === k.compositionEnd && N && (l = N.getData()) : N = m.getPooled(r));
                            var c = v.getPooled(o, t, n, r);
                            if (l) c.data = l;
                            else {
                                var p = u(n);
                                null !== p && (c.data = p)
                            }
                            return f.accumulateTwoPhaseDispatches(c), c
                        }

                        function c(e, t) {
                            switch (e) {
                                case "topCompositionEnd":
                                    return u(t);
                                case "topKeyPress":
                                    var n = t.which;
                                    return n !== w ? null : (P = !0, T);
                                case "topTextInput":
                                    var r = t.data;
                                    return r === T && P ? null : r;
                                default:
                                    return null
                            }
                        }

                        function p(e, t) {
                            if (N) {
                                if ("topCompositionEnd" === e || !C && s(e, t)) {
                                    var n = N.getData();
                                    return m.release(N), N = null, n
                                }
                                return null
                            }
                            switch (e) {
                                case "topPaste":
                                    return null;
                                case "topKeyPress":
                                    return t.which && !o(t) ? String.fromCharCode(t.which) : null;
                                case "topCompositionEnd":
                                    return x ? null : t.data;
                                default:
                                    return null
                            }
                        }

                        function d(e, t, n, r) {
                            var o;
                            if (o = E ? c(e, n) : p(e, n), !o) return null;
                            var i = g.getPooled(k.beforeInput, t, n, r);
                            return i.data = o, f.accumulateTwoPhaseDispatches(i), i
                        }
                        var f = e(19),
                            h = e(123),
                            m = e(20),
                            v = e(78),
                            g = e(82),
                            y = [9, 13, 27, 32],
                            _ = 229,
                            C = h.canUseDOM && "CompositionEvent" in window,
                            b = null;
                        h.canUseDOM && "documentMode" in document && (b = document.documentMode);
                        var E = h.canUseDOM && "TextEvent" in window && !b && !r(),
                            x = h.canUseDOM && (!C || b && b > 8 && b <= 11),
                            w = 32,
                            T = String.fromCharCode(w),
                            k = {
                                beforeInput: {
                                    phasedRegistrationNames: {
                                        bubbled: "onBeforeInput",
                                        captured: "onBeforeInputCapture"
                                    },
                                    dependencies: ["topCompositionEnd", "topKeyPress", "topTextInput", "topPaste"]
                                },
                                compositionEnd: {
                                    phasedRegistrationNames: {
                                        bubbled: "onCompositionEnd",
                                        captured: "onCompositionEndCapture"
                                    },
                                    dependencies: ["topBlur", "topCompositionEnd", "topKeyDown", "topKeyPress", "topKeyUp", "topMouseDown"]
                                },
                                compositionStart: {
                                    phasedRegistrationNames: {
                                        bubbled: "onCompositionStart",
                                        captured: "onCompositionStartCapture"
                                    },
                                    dependencies: ["topBlur", "topCompositionStart", "topKeyDown", "topKeyPress", "topKeyUp", "topMouseDown"]
                                },
                                compositionUpdate: {
                                    phasedRegistrationNames: {
                                        bubbled: "onCompositionUpdate",
                                        captured: "onCompositionUpdateCapture"
                                    },
                                    dependencies: ["topBlur", "topCompositionUpdate", "topKeyDown", "topKeyPress", "topKeyUp", "topMouseDown"]
                                }
                            },
                            P = !1,
                            N = null,
                            S = {
                                eventTypes: k,
                                extractEvents: function(e, t, n, r) {
                                    return [l(e, t, n, r), d(e, t, n, r)]
                                }
                            };
                        t.exports = S
                    }, {
                        123: 123,
                        19: 19,
                        20: 20,
                        78: 78,
                        82: 82
                    }],
                    4: [function(e, t, n) {
                        "use strict";

                        function r(e, t) {
                            return e + t.charAt(0).toUpperCase() + t.substring(1)
                        }
                        var o = {
                                animationIterationCount: !0,
                                borderImageOutset: !0,
                                borderImageSlice: !0,
                                borderImageWidth: !0,
                                boxFlex: !0,
                                boxFlexGroup: !0,
                                boxOrdinalGroup: !0,
                                columnCount: !0,
                                flex: !0,
                                flexGrow: !0,
                                flexPositive: !0,
                                flexShrink: !0,
                                flexNegative: !0,
                                flexOrder: !0,
                                gridRow: !0,
                                gridColumn: !0,
                                fontWeight: !0,
                                lineClamp: !0,
                                lineHeight: !0,
                                opacity: !0,
                                order: !0,
                                orphans: !0,
                                tabSize: !0,
                                widows: !0,
                                zIndex: !0,
                                zoom: !0,
                                fillOpacity: !0,
                                floodOpacity: !0,
                                stopOpacity: !0,
                                strokeDasharray: !0,
                                strokeDashoffset: !0,
                                strokeMiterlimit: !0,
                                strokeOpacity: !0,
                                strokeWidth: !0
                            },
                            i = ["Webkit", "ms", "Moz", "O"];
                        Object.keys(o).forEach(function(e) {
                            i.forEach(function(t) {
                                o[r(t, e)] = o[e]
                            })
                        });
                        var a = {
                                background: {
                                    backgroundAttachment: !0,
                                    backgroundColor: !0,
                                    backgroundImage: !0,
                                    backgroundPositionX: !0,
                                    backgroundPositionY: !0,
                                    backgroundRepeat: !0
                                },
                                backgroundPosition: {
                                    backgroundPositionX: !0,
                                    backgroundPositionY: !0
                                },
                                border: {
                                    borderWidth: !0,
                                    borderStyle: !0,
                                    borderColor: !0
                                },
                                borderBottom: {
                                    borderBottomWidth: !0,
                                    borderBottomStyle: !0,
                                    borderBottomColor: !0
                                },
                                borderLeft: {
                                    borderLeftWidth: !0,
                                    borderLeftStyle: !0,
                                    borderLeftColor: !0
                                },
                                borderRight: {
                                    borderRightWidth: !0,
                                    borderRightStyle: !0,
                                    borderRightColor: !0
                                },
                                borderTop: {
                                    borderTopWidth: !0,
                                    borderTopStyle: !0,
                                    borderTopColor: !0
                                },
                                font: {
                                    fontStyle: !0,
                                    fontVariant: !0,
                                    fontWeight: !0,
                                    fontSize: !0,
                                    lineHeight: !0,
                                    fontFamily: !0
                                },
                                outline: {
                                    outlineWidth: !0,
                                    outlineStyle: !0,
                                    outlineColor: !0
                                }
                            },
                            s = {
                                isUnitlessNumber: o,
                                shorthandPropertyExpansions: a
                            };
                        t.exports = s
                    }, {}],
                    5: [function(e, t, n) {
                        "use strict";
                        var r = e(4),
                            o = e(123),
                            i = (e(58), e(125), e(94)),
                            a = e(136),
                            s = e(140),
                            u = (e(142), s(function(e) {
                                return a(e)
                            })),
                            l = !1,
                            c = "cssFloat";
                        if (o.canUseDOM) {
                            var p = document.createElement("div").style;
                            try {
                                p.font = ""
                            } catch (e) {
                                l = !0
                            }
                            void 0 === document.documentElement.style.cssFloat && (c = "styleFloat")
                        }
                        var d = {
                            createMarkupForStyles: function(e, t) {
                                var n = "";
                                for (var r in e)
                                    if (e.hasOwnProperty(r)) {
                                        var o = e[r];
                                        null != o && (n += u(r) + ":", n += i(r, o, t) + ";")
                                    }
                                return n || null
                            },
                            setValueForStyles: function(e, t, n) {
                                var o = e.style;
                                for (var a in t)
                                    if (t.hasOwnProperty(a)) {
                                        var s = i(a, t[a], n);
                                        if ("float" !== a && "cssFloat" !== a || (a = c), s) o[a] = s;
                                        else {
                                            var u = l && r.shorthandPropertyExpansions[a];
                                            if (u)
                                                for (var p in u) o[p] = "";
                                            else o[a] = ""
                                        }
                                    }
                            }
                        };
                        t.exports = d
                    }, {
                        123: 123,
                        125: 125,
                        136: 136,
                        140: 140,
                        142: 142,
                        4: 4,
                        58: 58,
                        94: 94
                    }],
                    6: [function(e, t, n) {
                        "use strict";

                        function r(e, t) {
                            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                        }
                        var o = e(113),
                            i = e(24),
                            a = (e(137), function() {
                                function e(t) {
                                    r(this, e), this._callbacks = null, this._contexts = null, this._arg = t
                                }
                                return e.prototype.enqueue = function(e, t) {
                                    this._callbacks = this._callbacks || [], this._callbacks.push(e), this._contexts = this._contexts || [], this._contexts.push(t)
                                }, e.prototype.notifyAll = function() {
                                    var e = this._callbacks,
                                        t = this._contexts,
                                        n = this._arg;
                                    if (e && t) {
                                        e.length !== t.length ? o("24") : void 0, this._callbacks = null, this._contexts = null;
                                        for (var r = 0; r < e.length; r++) e[r].call(t[r], n);
                                        e.length = 0, t.length = 0
                                    }
                                }, e.prototype.checkpoint = function() {
                                    return this._callbacks ? this._callbacks.length : 0
                                }, e.prototype.rollback = function(e) {
                                    this._callbacks && this._contexts && (this._callbacks.length = e, this._contexts.length = e)
                                }, e.prototype.reset = function() {
                                    this._callbacks = null, this._contexts = null
                                }, e.prototype.destructor = function() {
                                    this.reset()
                                }, e
                            }());
                        t.exports = i.addPoolingTo(a)
                    }, {
                        113: 113,
                        137: 137,
                        24: 24
                    }],
                    7: [function(e, t, n) {
                        "use strict";

                        function r(e) {
                            var t = e.nodeName && e.nodeName.toLowerCase();
                            return "select" === t || "input" === t && "file" === e.type
                        }

                        function o(e) {
                            var t = x.getPooled(P.change, S, e, w(e));
                            _.accumulateTwoPhaseDispatches(t), E.batchedUpdates(i, t)
                        }

                        function i(e) {
                            y.enqueueEvents(e), y.processEventQueue(!1)
                        }

                        function a(e, t) {
                            N = e, S = t, N.attachEvent("onchange", o)
                        }

                        function s() {
                            N && (N.detachEvent("onchange", o), N = null, S = null)
                        }

                        function u(e, t) {
                            if ("topChange" === e) return t
                        }

                        function l(e, t, n) {
                            "topFocus" === e ? (s(), a(t, n)) : "topBlur" === e && s()
                        }

                        function c(e, t) {
                            N = e, S = t, M = e.value, I = Object.getOwnPropertyDescriptor(e.constructor.prototype, "value"), Object.defineProperty(N, "value", A), N.attachEvent ? N.attachEvent("onpropertychange", d) : N.addEventListener("propertychange", d, !1)
                        }

                        function p() {
                            N && (delete N.value, N.detachEvent ? N.detachEvent("onpropertychange", d) : N.removeEventListener("propertychange", d, !1), N = null, S = null, M = null, I = null)
                        }

                        function d(e) {
                            if ("value" === e.propertyName) {
                                var t = e.srcElement.value;
                                t !== M && (M = t, o(e))
                            }
                        }

                        function f(e, t) {
                            if ("topInput" === e) return t
                        }

                        function h(e, t, n) {
                            "topFocus" === e ? (p(), c(t, n)) : "topBlur" === e && p()
                        }

                        function m(e, t) {
                            if (("topSelectionChange" === e || "topKeyUp" === e || "topKeyDown" === e) && N && N.value !== M) return M = N.value, S
                        }

                        function v(e) {
                            return e.nodeName && "input" === e.nodeName.toLowerCase() && ("checkbox" === e.type || "radio" === e.type)
                        }

                        function g(e, t) {
                            if ("topClick" === e) return t
                        }
                        var y = e(16),
                            _ = e(19),
                            C = e(123),
                            b = e(33),
                            E = e(71),
                            x = e(80),
                            w = e(102),
                            T = e(110),
                            k = e(111),
                            P = {
                                change: {
                                    phasedRegistrationNames: {
                                        bubbled: "onChange",
                                        captured: "onChangeCapture"
                                    },
                                    dependencies: ["topBlur", "topChange", "topClick", "topFocus", "topInput", "topKeyDown", "topKeyUp", "topSelectionChange"]
                                }
                            },
                            N = null,
                            S = null,
                            M = null,
                            I = null,
                            O = !1;
                        C.canUseDOM && (O = T("change") && (!document.documentMode || document.documentMode > 8));
                        var R = !1;
                        C.canUseDOM && (R = T("input") && (!document.documentMode || document.documentMode > 11));
                        var A = {
                                get: function() {
                                    return I.get.call(this)
                                },
                                set: function(e) {
                                    M = "" + e, I.set.call(this, e)
                                }
                            },
                            D = {
                                eventTypes: P,
                                extractEvents: function(e, t, n, o) {
                                    var i, a, s = t ? b.getNodeFromInstance(t) : window;
                                    if (r(s) ? O ? i = u : a = l : k(s) ? R ? i = f : (i = m, a = h) : v(s) && (i = g), i) {
                                        var c = i(e, t);
                                        if (c) {
                                            var p = x.getPooled(P.change, c, n, o);
                                            return p.type = "change", _.accumulateTwoPhaseDispatches(p), p
                                        }
                                    }
                                    a && a(e, s, t)
                                }
                            };
                        t.exports = D
                    }, {
                        102: 102,
                        110: 110,
                        111: 111,
                        123: 123,
                        16: 16,
                        19: 19,
                        33: 33,
                        71: 71,
                        80: 80
                    }],
                    8: [function(e, t, n) {
                        "use strict";

                        function r(e, t) {
                            return Array.isArray(t) && (t = t[1]), t ? t.nextSibling : e.firstChild
                        }

                        function o(e, t, n) {
                            c.insertTreeBefore(e, t, n)
                        }

                        function i(e, t, n) {
                            Array.isArray(t) ? s(e, t[0], t[1], n) : m(e, t, n)
                        }

                        function a(e, t) {
                            if (Array.isArray(t)) {
                                var n = t[1];
                                t = t[0], u(e, t, n), e.removeChild(n)
                            }
                            e.removeChild(t)
                        }

                        function s(e, t, n, r) {
                            for (var o = t;;) {
                                var i = o.nextSibling;
                                if (m(e, o, r), o === n) break;
                                o = i
                            }
                        }

                        function u(e, t, n) {
                            for (;;) {
                                var r = t.nextSibling;
                                if (r === n) break;
                                e.removeChild(r)
                            }
                        }

                        function l(e, t, n) {
                            var r = e.parentNode,
                                o = e.nextSibling;
                            o === t ? n && m(r, document.createTextNode(n), o) : n ? (h(o, n), u(r, o, t)) : u(r, e, t)
                        }
                        var c = e(9),
                            p = e(13),
                            d = (e(33), e(58), e(93)),
                            f = e(115),
                            h = e(116),
                            m = d(function(e, t, n) {
                                e.insertBefore(t, n)
                            }),
                            v = p.dangerouslyReplaceNodeWithMarkup,
                            g = {
                                dangerouslyReplaceNodeWithMarkup: v,
                                replaceDelimitedText: l,
                                processUpdates: function(e, t) {
                                    for (var n = 0; n < t.length; n++) {
                                        var s = t[n];
                                        switch (s.type) {
                                            case "INSERT_MARKUP":
                                                o(e, s.content, r(e, s.afterNode));
                                                break;
                                            case "MOVE_EXISTING":
                                                i(e, s.fromNode, r(e, s.afterNode));
                                                break;
                                            case "SET_MARKUP":
                                                f(e, s.content);
                                                break;
                                            case "TEXT_CONTENT":
                                                h(e, s.content);
                                                break;
                                            case "REMOVE_NODE":
                                                a(e, s.fromNode)
                                        }
                                    }
                                }
                            };
                        t.exports = g
                    }, {
                        115: 115,
                        116: 116,
                        13: 13,
                        33: 33,
                        58: 58,
                        9: 9,
                        93: 93
                    }],
                    9: [function(e, t, n) {
                        "use strict";

                        function r(e) {
                            if (v) {
                                var t = e.node,
                                    n = e.children;
                                if (n.length)
                                    for (var r = 0; r < n.length; r++) g(t, n[r], null);
                                else null != e.html ? p(t, e.html) : null != e.text && f(t, e.text)
                            }
                        }

                        function o(e, t) {
                            e.parentNode.replaceChild(t.node, e), r(t)
                        }

                        function i(e, t) {
                            v ? e.children.push(t) : e.node.appendChild(t.node)
                        }

                        function a(e, t) {
                            v ? e.html = t : p(e.node, t)
                        }

                        function s(e, t) {
                            v ? e.text = t : f(e.node, t)
                        }

                        function u() {
                            return this.node.nodeName
                        }

                        function l(e) {
                            return {
                                node: e,
                                children: [],
                                html: null,
                                text: null,
                                toString: u
                            }
                        }
                        var c = e(10),
                            p = e(115),
                            d = e(93),
                            f = e(116),
                            h = 1,
                            m = 11,
                            v = "undefined" != typeof document && "number" == typeof document.documentMode || "undefined" != typeof navigator && "string" == typeof navigator.userAgent && /\bEdge\/\d/.test(navigator.userAgent),
                            g = d(function(e, t, n) {
                                t.node.nodeType === m || t.node.nodeType === h && "object" === t.node.nodeName.toLowerCase() && (null == t.node.namespaceURI || t.node.namespaceURI === c.html) ? (r(t), e.insertBefore(t.node, n)) : (e.insertBefore(t.node, n), r(t))
                            });
                        l.insertTreeBefore = g, l.replaceChildWithTree = o, l.queueChild = i, l.queueHTML = a, l.queueText = s, t.exports = l
                    }, {
                        10: 10,
                        115: 115,
                        116: 116,
                        93: 93
                    }],
                    10: [function(e, t, n) {
                        "use strict";
                        var r = {
                            html: "http://www.w3.org/1999/xhtml",
                            mathml: "http://www.w3.org/1998/Math/MathML",
                            svg: "http://www.w3.org/2000/svg"
                        };
                        t.exports = r
                    }, {}],
                    11: [function(e, t, n) {
                        "use strict";

                        function r(e, t) {
                            return (e & t) === t
                        }
                        var o = e(113),
                            i = (e(137), {
                                MUST_USE_PROPERTY: 1,
                                HAS_BOOLEAN_VALUE: 4,
                                HAS_NUMERIC_VALUE: 8,
                                HAS_POSITIVE_NUMERIC_VALUE: 24,
                                HAS_OVERLOADED_BOOLEAN_VALUE: 32,
                                injectDOMPropertyConfig: function(e) {
                                    var t = i,
                                        n = e.Properties || {},
                                        a = e.DOMAttributeNamespaces || {},
                                        u = e.DOMAttributeNames || {},
                                        l = e.DOMPropertyNames || {},
                                        c = e.DOMMutationMethods || {};
                                    e.isCustomAttribute && s._isCustomAttributeFunctions.push(e.isCustomAttribute);
                                    for (var p in n) {
                                        s.properties.hasOwnProperty(p) ? o("48", p) : void 0;
                                        var d = p.toLowerCase(),
                                            f = n[p],
                                            h = {
                                                attributeName: d,
                                                attributeNamespace: null,
                                                propertyName: p,
                                                mutationMethod: null,
                                                mustUseProperty: r(f, t.MUST_USE_PROPERTY),
                                                hasBooleanValue: r(f, t.HAS_BOOLEAN_VALUE),
                                                hasNumericValue: r(f, t.HAS_NUMERIC_VALUE),
                                                hasPositiveNumericValue: r(f, t.HAS_POSITIVE_NUMERIC_VALUE),
                                                hasOverloadedBooleanValue: r(f, t.HAS_OVERLOADED_BOOLEAN_VALUE)
                                            };
                                        if (h.hasBooleanValue + h.hasNumericValue + h.hasOverloadedBooleanValue <= 1 ? void 0 : o("50", p), u.hasOwnProperty(p)) {
                                            var m = u[p];
                                            h.attributeName = m
                                        }
                                        a.hasOwnProperty(p) && (h.attributeNamespace = a[p]), l.hasOwnProperty(p) && (h.propertyName = l[p]), c.hasOwnProperty(p) && (h.mutationMethod = c[p]), s.properties[p] = h
                                    }
                                }
                            }),
                            a = ":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",
                            s = {
                                ID_ATTRIBUTE_NAME: "data-reactid",
                                ROOT_ATTRIBUTE_NAME: "data-reactroot",
                                ATTRIBUTE_NAME_START_CHAR: a,
                                ATTRIBUTE_NAME_CHAR: a + "\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",
                                properties: {},
                                getPossibleStandardName: null,
                                _isCustomAttributeFunctions: [],
                                isCustomAttribute: function(e) {
                                    for (var t = 0; t < s._isCustomAttributeFunctions.length; t++) {
                                        var n = s._isCustomAttributeFunctions[t];
                                        if (n(e)) return !0
                                    }
                                    return !1
                                },
                                injection: i
                            };
                        t.exports = s
                    }, {
                        113: 113,
                        137: 137
                    }],
                    12: [function(e, t, n) {
                        "use strict";

                        function r(e) {
                            return !!l.hasOwnProperty(e) || !u.hasOwnProperty(e) && (s.test(e) ? (l[e] = !0, !0) : (u[e] = !0, !1))
                        }

                        function o(e, t) {
                            return null == t || e.hasBooleanValue && !t || e.hasNumericValue && isNaN(t) || e.hasPositiveNumericValue && t < 1 || e.hasOverloadedBooleanValue && t === !1
                        }
                        var i = e(11),
                            a = (e(33), e(58), e(112)),
                            s = (e(142), new RegExp("^[" + i.ATTRIBUTE_NAME_START_CHAR + "][" + i.ATTRIBUTE_NAME_CHAR + "]*$")),
                            u = {},
                            l = {},
                            c = {
                                createMarkupForID: function(e) {
                                    return i.ID_ATTRIBUTE_NAME + "=" + a(e)
                                },
                                setAttributeForID: function(e, t) {
                                    e.setAttribute(i.ID_ATTRIBUTE_NAME, t)
                                },
                                createMarkupForRoot: function() {
                                    return i.ROOT_ATTRIBUTE_NAME + '=""'
                                },
                                setAttributeForRoot: function(e) {
                                    e.setAttribute(i.ROOT_ATTRIBUTE_NAME, "")
                                },
                                createMarkupForProperty: function(e, t) {
                                    var n = i.properties.hasOwnProperty(e) ? i.properties[e] : null;
                                    if (n) {
                                        if (o(n, t)) return "";
                                        var r = n.attributeName;
                                        return n.hasBooleanValue || n.hasOverloadedBooleanValue && t === !0 ? r + '=""' : r + "=" + a(t)
                                    }
                                    return i.isCustomAttribute(e) ? null == t ? "" : e + "=" + a(t) : null
                                },
                                createMarkupForCustomAttribute: function(e, t) {
                                    return r(e) && null != t ? e + "=" + a(t) : ""
                                },
                                setValueForProperty: function(e, t, n) {
                                    var r = i.properties.hasOwnProperty(t) ? i.properties[t] : null;
                                    if (r) {
                                        var a = r.mutationMethod;
                                        if (a) a(e, n);
                                        else {
                                            if (o(r, n)) return void this.deleteValueForProperty(e, t);
                                            if (r.mustUseProperty) e[r.propertyName] = n;
                                            else {
                                                var s = r.attributeName,
                                                    u = r.attributeNamespace;
                                                u ? e.setAttributeNS(u, s, "" + n) : r.hasBooleanValue || r.hasOverloadedBooleanValue && n === !0 ? e.setAttribute(s, "") : e.setAttribute(s, "" + n)
                                            }
                                        }
                                    } else if (i.isCustomAttribute(t)) return void c.setValueForAttribute(e, t, n)
                                },
                                setValueForAttribute: function(e, t, n) {
                                    r(t) && (null == n ? e.removeAttribute(t) : e.setAttribute(t, "" + n))
                                },
                                deleteValueForAttribute: function(e, t) {
                                    e.removeAttribute(t)
                                },
                                deleteValueForProperty: function(e, t) {
                                    var n = i.properties.hasOwnProperty(t) ? i.properties[t] : null;
                                    if (n) {
                                        var r = n.mutationMethod;
                                        if (r) r(e, void 0);
                                        else if (n.mustUseProperty) {
                                            var o = n.propertyName;
                                            n.hasBooleanValue ? e[o] = !1 : e[o] = ""
                                        } else e.removeAttribute(n.attributeName)
                                    } else i.isCustomAttribute(t) && e.removeAttribute(t)
                                }
                            };
                        t.exports = c
                    }, {
                        11: 11,
                        112: 112,
                        142: 142,
                        33: 33,
                        58: 58
                    }],
                    13: [function(e, t, n) {
                        "use strict";
                        var r = e(113),
                            o = e(9),
                            i = e(123),
                            a = e(128),
                            s = e(129),
                            u = (e(137), {
                                dangerouslyReplaceNodeWithMarkup: function(e, t) {
                                    if (i.canUseDOM ? void 0 : r("56"), t ? void 0 : r("57"), "HTML" === e.nodeName ? r("58") : void 0, "string" == typeof t) {
                                        var n = a(t, s)[0];
                                        e.parentNode.replaceChild(n, e)
                                    } else o.replaceChildWithTree(e, t)
                                }
                            });
                        t.exports = u
                    }, {
                        113: 113,
                        123: 123,
                        128: 128,
                        129: 129,
                        137: 137,
                        9: 9
                    }],
                    14: [function(e, t, n) {
                        "use strict";
                        var r = ["ResponderEventPlugin", "SimpleEventPlugin", "TapEventPlugin", "EnterLeaveEventPlugin", "ChangeEventPlugin", "SelectEventPlugin", "BeforeInputEventPlugin"];
                        t.exports = r
                    }, {}],
                    15: [function(e, t, n) {
                        "use strict";
                        var r = e(19),
                            o = e(33),
                            i = e(84),
                            a = {
                                mouseEnter: {
                                    registrationName: "onMouseEnter",
                                    dependencies: ["topMouseOut", "topMouseOver"]
                                },
                                mouseLeave: {
                                    registrationName: "onMouseLeave",
                                    dependencies: ["topMouseOut", "topMouseOver"]
                                }
                            },
                            s = {
                                eventTypes: a,
                                extractEvents: function(e, t, n, s) {
                                    if ("topMouseOver" === e && (n.relatedTarget || n.fromElement)) return null;
                                    if ("topMouseOut" !== e && "topMouseOver" !== e) return null;
                                    var u;
                                    if (s.window === s) u = s;
                                    else {
                                        var l = s.ownerDocument;
                                        u = l ? l.defaultView || l.parentWindow : window
                                    }
                                    var c, p;
                                    if ("topMouseOut" === e) {
                                        c = t;
                                        var d = n.relatedTarget || n.toElement;
                                        p = d ? o.getClosestInstanceFromNode(d) : null
                                    } else c = null, p = t;
                                    if (c === p) return null;
                                    var f = null == c ? u : o.getNodeFromInstance(c),
                                        h = null == p ? u : o.getNodeFromInstance(p),
                                        m = i.getPooled(a.mouseLeave, c, n, s);
                                    m.type = "mouseleave", m.target = f, m.relatedTarget = h;
                                    var v = i.getPooled(a.mouseEnter, p, n, s);
                                    return v.type = "mouseenter", v.target = h, v.relatedTarget = f, r.accumulateEnterLeaveDispatches(m, v, c, p), [m, v]
                                }
                            };
                        t.exports = s
                    }, {
                        19: 19,
                        33: 33,
                        84: 84
                    }],
                    16: [function(e, t, n) {
                        "use strict";

                        function r(e) {
                            return "button" === e || "input" === e || "select" === e || "textarea" === e
                        }

                        function o(e, t, n) {
                            switch (e) {
                                case "onClick":
                                case "onClickCapture":
                                case "onDoubleClick":
                                case "onDoubleClickCapture":
                                case "onMouseDown":
                                case "onMouseDownCapture":
                                case "onMouseMove":
                                case "onMouseMoveCapture":
                                case "onMouseUp":
                                case "onMouseUpCapture":
                                    return !(!n.disabled || !r(t));
                                default:
                                    return !1
                            }
                        }
                        var i = e(113),
                            a = e(17),
                            s = e(18),
                            u = e(50),
                            l = e(91),
                            c = e(98),
                            p = (e(137), {}),
                            d = null,
                            f = function(e, t) {
                                e && (s.executeDispatchesInOrder(e, t), e.isPersistent() || e.constructor.release(e))
                            },
                            h = function(e) {
                                return f(e, !0)
                            },
                            m = function(e) {
                                return f(e, !1)
                            },
                            v = function(e) {
                                return "." + e._rootNodeID
                            },
                            g = {
                                injection: {
                                    injectEventPluginOrder: a.injectEventPluginOrder,
                                    injectEventPluginsByName: a.injectEventPluginsByName
                                },
                                putListener: function(e, t, n) {
                                    "function" != typeof n ? i("94", t, typeof n) : void 0;
                                    var r = v(e),
                                        o = p[t] || (p[t] = {});
                                    o[r] = n;
                                    var s = a.registrationNameModules[t];
                                    s && s.didPutListener && s.didPutListener(e, t, n)
                                },
                                getListener: function(e, t) {
                                    var n = p[t];
                                    if (o(t, e._currentElement.type, e._currentElement.props)) return null;
                                    var r = v(e);
                                    return n && n[r]
                                },
                                deleteListener: function(e, t) {
                                    var n = a.registrationNameModules[t];
                                    n && n.willDeleteListener && n.willDeleteListener(e, t);
                                    var r = p[t];
                                    if (r) {
                                        var o = v(e);
                                        delete r[o]
                                    }
                                },
                                deleteAllListeners: function(e) {
                                    var t = v(e);
                                    for (var n in p)
                                        if (p.hasOwnProperty(n) && p[n][t]) {
                                            var r = a.registrationNameModules[n];
                                            r && r.willDeleteListener && r.willDeleteListener(e, n), delete p[n][t]
                                        }
                                },
                                extractEvents: function(e, t, n, r) {
                                    for (var o, i = a.plugins, s = 0; s < i.length; s++) {
                                        var u = i[s];
                                        if (u) {
                                            var c = u.extractEvents(e, t, n, r);
                                            c && (o = l(o, c))
                                        }
                                    }
                                    return o
                                },
                                enqueueEvents: function(e) {
                                    e && (d = l(d, e))
                                },
                                processEventQueue: function(e) {
                                    var t = d;
                                    d = null, e ? c(t, h) : c(t, m), d ? i("95") : void 0, u.rethrowCaughtError()
                                },
                                __purge: function() {
                                    p = {}
                                },
                                __getListenerBank: function() {
                                    return p
                                }
                            };
                        t.exports = g
                    }, {
                        113: 113,
                        137: 137,
                        17: 17,
                        18: 18,
                        50: 50,
                        91: 91,
                        98: 98
                    }],
                    17: [function(e, t, n) {
                        "use strict";

                        function r() {
                            if (s)
                                for (var e in u) {
                                    var t = u[e],
                                        n = s.indexOf(e);
                                    if (n > -1 ? void 0 : a("96", e), !l.plugins[n]) {
                                        t.extractEvents ? void 0 : a("97", e), l.plugins[n] = t;
                                        var r = t.eventTypes;
                                        for (var i in r) o(r[i], t, i) ? void 0 : a("98", i, e)
                                    }
                                }
                        }

                        function o(e, t, n) {
                            l.eventNameDispatchConfigs.hasOwnProperty(n) ? a("99", n) : void 0, l.eventNameDispatchConfigs[n] = e;
                            var r = e.phasedRegistrationNames;
                            if (r) {
                                for (var o in r)
                                    if (r.hasOwnProperty(o)) {
                                        var s = r[o];
                                        i(s, t, n)
                                    }
                                return !0
                            }
                            return !!e.registrationName && (i(e.registrationName, t, n), !0)
                        }

                        function i(e, t, n) {
                            l.registrationNameModules[e] ? a("100", e) : void 0, l.registrationNameModules[e] = t, l.registrationNameDependencies[e] = t.eventTypes[n].dependencies
                        }
                        var a = e(113),
                            s = (e(137), null),
                            u = {},
                            l = {
                                plugins: [],
                                eventNameDispatchConfigs: {},
                                registrationNameModules: {},
                                registrationNameDependencies: {},
                                possibleRegistrationNames: null,
                                injectEventPluginOrder: function(e) {
                                    s ? a("101") : void 0, s = Array.prototype.slice.call(e), r()
                                },
                                injectEventPluginsByName: function(e) {
                                    var t = !1;
                                    for (var n in e)
                                        if (e.hasOwnProperty(n)) {
                                            var o = e[n];
                                            u.hasOwnProperty(n) && u[n] === o || (u[n] ? a("102", n) : void 0, u[n] = o, t = !0)
                                        }
                                    t && r()
                                },
                                getPluginModuleForEvent: function(e) {
                                    var t = e.dispatchConfig;
                                    if (t.registrationName) return l.registrationNameModules[t.registrationName] || null;
                                    if (void 0 !== t.phasedRegistrationNames) {
                                        var n = t.phasedRegistrationNames;
                                        for (var r in n)
                                            if (n.hasOwnProperty(r)) {
                                                var o = l.registrationNameModules[n[r]];
                                                if (o) return o
                                            }
                                    }
                                    return null
                                },
                                _resetEventPlugins: function() {
                                    s = null;
                                    for (var e in u) u.hasOwnProperty(e) && delete u[e];
                                    l.plugins.length = 0;
                                    var t = l.eventNameDispatchConfigs;
                                    for (var n in t) t.hasOwnProperty(n) && delete t[n];
                                    var r = l.registrationNameModules;
                                    for (var o in r) r.hasOwnProperty(o) && delete r[o]
                                }
                            };
                        t.exports = l
                    }, {
                        113: 113,
                        137: 137
                    }],
                    18: [function(e, t, n) {
                        "use strict";

                        function r(e) {
                            return "topMouseUp" === e || "topTouchEnd" === e || "topTouchCancel" === e
                        }

                        function o(e) {
                            return "topMouseMove" === e || "topTouchMove" === e
                        }

                        function i(e) {
                            return "topMouseDown" === e || "topTouchStart" === e
                        }

                        function a(e, t, n, r) {
                            var o = e.type || "unknown-event";
                            e.currentTarget = g.getNodeFromInstance(r), t ? m.invokeGuardedCallbackWithCatch(o, n, e) : m.invokeGuardedCallback(o, n, e), e.currentTarget = null
                        }

                        function s(e, t) {
                            var n = e._dispatchListeners,
                                r = e._dispatchInstances;
                            if (Array.isArray(n))
                                for (var o = 0; o < n.length && !e.isPropagationStopped(); o++) a(e, t, n[o], r[o]);
                            else n && a(e, t, n, r);
                            e._dispatchListeners = null, e._dispatchInstances = null
                        }

                        function u(e) {
                            var t = e._dispatchListeners,
                                n = e._dispatchInstances;
                            if (Array.isArray(t)) {
                                for (var r = 0; r < t.length && !e.isPropagationStopped(); r++)
                                    if (t[r](e, n[r])) return n[r]
                            } else if (t && t(e, n)) return n;
                            return null
                        }

                        function l(e) {
                            var t = u(e);
                            return e._dispatchInstances = null, e._dispatchListeners = null, t
                        }

                        function c(e) {
                            var t = e._dispatchListeners,
                                n = e._dispatchInstances;
                            Array.isArray(t) ? h("103") : void 0, e.currentTarget = t ? g.getNodeFromInstance(n) : null;
                            var r = t ? t(e) : null;
                            return e.currentTarget = null, e._dispatchListeners = null, e._dispatchInstances = null, r
                        }

                        function p(e) {
                            return !!e._dispatchListeners
                        }
                        var d, f, h = e(113),
                            m = e(50),
                            v = (e(137), e(142), {
                                injectComponentTree: function(e) {
                                    d = e
                                },
                                injectTreeTraversal: function(e) {
                                    f = e
                                }
                            }),
                            g = {
                                isEndish: r,
                                isMoveish: o,
                                isStartish: i,
                                executeDirectDispatch: c,
                                executeDispatchesInOrder: s,
                                executeDispatchesInOrderStopAtTrue: l,
                                hasDispatches: p,
                                getInstanceFromNode: function(e) {
                                    return d.getInstanceFromNode(e)
                                },
                                getNodeFromInstance: function(e) {
                                    return d.getNodeFromInstance(e)
                                },
                                isAncestor: function(e, t) {
                                    return f.isAncestor(e, t)
                                },
                                getLowestCommonAncestor: function(e, t) {
                                    return f.getLowestCommonAncestor(e, t)
                                },
                                getParentInstance: function(e) {
                                    return f.getParentInstance(e)
                                },
                                traverseTwoPhase: function(e, t, n) {
                                    return f.traverseTwoPhase(e, t, n)
                                },
                                traverseEnterLeave: function(e, t, n, r, o) {
                                    return f.traverseEnterLeave(e, t, n, r, o)
                                },
                                injection: v
                            };
                        t.exports = g
                    }, {
                        113: 113,
                        137: 137,
                        142: 142,
                        50: 50
                    }],
                    19: [function(e, t, n) {
                        "use strict";

                        function r(e, t, n) {
                            var r = t.dispatchConfig.phasedRegistrationNames[n];
                            return g(e, r)
                        }

                        function o(e, t, n) {
                            var o = r(e, n, t);
                            o && (n._dispatchListeners = m(n._dispatchListeners, o), n._dispatchInstances = m(n._dispatchInstances, e))
                        }

                        function i(e) {
                            e && e.dispatchConfig.phasedRegistrationNames && h.traverseTwoPhase(e._targetInst, o, e)
                        }

                        function a(e) {
                            if (e && e.dispatchConfig.phasedRegistrationNames) {
                                var t = e._targetInst,
                                    n = t ? h.getParentInstance(t) : null;
                                h.traverseTwoPhase(n, o, e)
                            }
                        }

                        function s(e, t, n) {
                            if (n && n.dispatchConfig.registrationName) {
                                var r = n.dispatchConfig.registrationName,
                                    o = g(e, r);
                                o && (n._dispatchListeners = m(n._dispatchListeners, o), n._dispatchInstances = m(n._dispatchInstances, e))
                            }
                        }

                        function u(e) {
                            e && e.dispatchConfig.registrationName && s(e._targetInst, null, e)
                        }

                        function l(e) {
                            v(e, i)
                        }

                        function c(e) {
                            v(e, a)
                        }

                        function p(e, t, n, r) {
                            h.traverseEnterLeave(n, r, s, e, t)
                        }

                        function d(e) {
                            v(e, u)
                        }
                        var f = e(16),
                            h = e(18),
                            m = e(91),
                            v = e(98),
                            g = (e(142), f.getListener),
                            y = {
                                accumulateTwoPhaseDispatches: l,
                                accumulateTwoPhaseDispatchesSkipTarget: c,
                                accumulateDirectDispatches: d,
                                accumulateEnterLeaveDispatches: p
                            };
                        t.exports = y
                    }, {
                        142: 142,
                        16: 16,
                        18: 18,
                        91: 91,
                        98: 98
                    }],
                    20: [function(e, t, n) {
                        "use strict";

                        function r(e) {
                            this._root = e, this._startText = this.getText(), this._fallbackText = null
                        }
                        var o = e(143),
                            i = e(24),
                            a = e(107);
                        o(r.prototype, {
                            destructor: function() {
                                this._root = null, this._startText = null, this._fallbackText = null
                            },
                            getText: function() {
                                return "value" in this._root ? this._root.value : this._root[a()]
                            },
                            getData: function() {
                                if (this._fallbackText) return this._fallbackText;
                                var e, t, n = this._startText,
                                    r = n.length,
                                    o = this.getText(),
                                    i = o.length;
                                for (e = 0; e < r && n[e] === o[e]; e++);
                                var a = r - e;
                                for (t = 1; t <= a && n[r - t] === o[i - t]; t++);
                                var s = t > 1 ? 1 - t : void 0;
                                return this._fallbackText = o.slice(e, s), this._fallbackText
                            }
                        }), i.addPoolingTo(r), t.exports = r
                    }, {
                        107: 107,
                        143: 143,
                        24: 24
                    }],
                    21: [function(e, t, n) {
                        "use strict";
                        var r = e(11),
                            o = r.injection.MUST_USE_PROPERTY,
                            i = r.injection.HAS_BOOLEAN_VALUE,
                            a = r.injection.HAS_NUMERIC_VALUE,
                            s = r.injection.HAS_POSITIVE_NUMERIC_VALUE,
                            u = r.injection.HAS_OVERLOADED_BOOLEAN_VALUE,
                            l = {
                                isCustomAttribute: RegExp.prototype.test.bind(new RegExp("^(data|aria)-[" + r.ATTRIBUTE_NAME_CHAR + "]*$")),
                                Properties: {
                                    accept: 0,
                                    acceptCharset: 0,
                                    accessKey: 0,
                                    action: 0,
                                    allowFullScreen: i,
                                    allowTransparency: 0,
                                    alt: 0,
                                    as: 0,
                                    async: i,
                                    autoComplete: 0,
                                    autoPlay: i,
                                    capture: i,
                                    cellPadding: 0,
                                    cellSpacing: 0,
                                    charSet: 0,
                                    challenge: 0,
                                    checked: o | i,
                                    cite: 0,
                                    classID: 0,
                                    className: 0,
                                    cols: s,
                                    colSpan: 0,
                                    content: 0,
                                    contentEditable: 0,
                                    contextMenu: 0,
                                    controls: i,
                                    coords: 0,
                                    crossOrigin: 0,
                                    data: 0,
                                    dateTime: 0,
                                    default: i,
                                    defer: i,
                                    dir: 0,
                                    disabled: i,
                                    download: u,
                                    draggable: 0,
                                    encType: 0,
                                    form: 0,
                                    formAction: 0,
                                    formEncType: 0,
                                    formMethod: 0,
                                    formNoValidate: i,
                                    formTarget: 0,
                                    frameBorder: 0,
                                    headers: 0,
                                    height: 0,
                                    hidden: i,
                                    high: 0,
                                    href: 0,
                                    hrefLang: 0,
                                    htmlFor: 0,
                                    httpEquiv: 0,
                                    icon: 0,
                                    id: 0,
                                    inputMode: 0,
                                    integrity: 0,
                                    is: 0,
                                    keyParams: 0,
                                    keyType: 0,
                                    kind: 0,
                                    label: 0,
                                    lang: 0,
                                    list: 0,
                                    loop: i,
                                    low: 0,
                                    manifest: 0,
                                    marginHeight: 0,
                                    marginWidth: 0,
                                    max: 0,
                                    maxLength: 0,
                                    media: 0,
                                    mediaGroup: 0,
                                    method: 0,
                                    min: 0,
                                    minLength: 0,
                                    multiple: o | i,
                                    muted: o | i,
                                    name: 0,
                                    nonce: 0,
                                    noValidate: i,
                                    open: i,
                                    optimum: 0,
                                    pattern: 0,
                                    placeholder: 0,
                                    playsInline: i,
                                    poster: 0,
                                    preload: 0,
                                    profile: 0,
                                    radioGroup: 0,
                                    readOnly: i,
                                    referrerPolicy: 0,
                                    rel: 0,
                                    required: i,
                                    reversed: i,
                                    role: 0,
                                    rows: s,
                                    rowSpan: a,
                                    sandbox: 0,
                                    scope: 0,
                                    scoped: i,
                                    scrolling: 0,
                                    seamless: i,
                                    selected: o | i,
                                    shape: 0,
                                    size: s,
                                    sizes: 0,
                                    span: s,
                                    spellCheck: 0,
                                    src: 0,
                                    srcDoc: 0,
                                    srcLang: 0,
                                    srcSet: 0,
                                    start: a,
                                    step: 0,
                                    style: 0,
                                    summary: 0,
                                    tabIndex: 0,
                                    target: 0,
                                    title: 0,
                                    type: 0,
                                    useMap: 0,
                                    value: 0,
                                    width: 0,
                                    wmode: 0,
                                    wrap: 0,
                                    about: 0,
                                    datatype: 0,
                                    inlist: 0,
                                    prefix: 0,
                                    property: 0,
                                    resource: 0,
                                    typeof: 0,
                                    vocab: 0,
                                    autoCapitalize: 0,
                                    autoCorrect: 0,
                                    autoSave: 0,
                                    color: 0,
                                    itemProp: 0,
                                    itemScope: i,
                                    itemType: 0,
                                    itemID: 0,
                                    itemRef: 0,
                                    results: 0,
                                    security: 0,
                                    unselectable: 0
                                },
                                DOMAttributeNames: {
                                    acceptCharset: "accept-charset",
                                    className: "class",
                                    htmlFor: "for",
                                    httpEquiv: "http-equiv"
                                },
                                DOMPropertyNames: {}
                            };
                        t.exports = l
                    }, {
                        11: 11
                    }],
                    22: [function(e, t, n) {
                        "use strict";

                        function r(e) {
                            var t = /[=:]/g,
                                n = {
                                    "=": "=0",
                                    ":": "=2"
                                },
                                r = ("" + e).replace(t, function(e) {
                                    return n[e]
                                });
                            return "$" + r
                        }

                        function o(e) {
                            var t = /(=0|=2)/g,
                                n = {
                                    "=0": "=",
                                    "=2": ":"
                                },
                                r = "." === e[0] && "$" === e[1] ? e.substring(2) : e.substring(1);
                            return ("" + r).replace(t, function(e) {
                                return n[e]
                            })
                        }
                        var i = {
                            escape: r,
                            unescape: o
                        };
                        t.exports = i
                    }, {}],
                    23: [function(e, t, n) {
                        "use strict";

                        function r(e) {
                            null != e.checkedLink && null != e.valueLink ? s("87") : void 0
                        }

                        function o(e) {
                            r(e), null != e.value || null != e.onChange ? s("88") : void 0
                        }

                        function i(e) {
                            r(e), null != e.checked || null != e.onChange ? s("89") : void 0
                        }

                        function a(e) {
                            if (e) {
                                var t = e.getName();
                                if (t) return " Check the render method of `" + t + "`."
                            }
                            return ""
                        }
                        var s = e(113),
                            u = e(121),
                            l = e(64),
                            c = (e(137), e(142), {
                                button: !0,
                                checkbox: !0,
                                image: !0,
                                hidden: !0,
                                radio: !0,
                                reset: !0,
                                submit: !0
                            }),
                            p = {
                                value: function(e, t, n) {
                                    return !e[t] || c[e.type] || e.onChange || e.readOnly || e.disabled ? null : new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")
                                },
                                checked: function(e, t, n) {
                                    return !e[t] || e.onChange || e.readOnly || e.disabled ? null : new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")
                                },
                                onChange: u.PropTypes.func
                            },
                            d = {},
                            f = {
                                checkPropTypes: function(e, t, n) {
                                    for (var r in p) {
                                        if (p.hasOwnProperty(r)) var o = p[r](t, r, e, "prop", null, l);
                                        o instanceof Error && !(o.message in d) && (d[o.message] = !0, a(n))
                                    }
                                },
                                getValue: function(e) {
                                    return e.valueLink ? (o(e), e.valueLink.value) : e.value
                                },
                                getChecked: function(e) {
                                    return e.checkedLink ? (i(e), e.checkedLink.value) : e.checked
                                },
                                executeOnChange: function(e, t) {
                                    return e.valueLink ? (o(e), e.valueLink.requestChange(t.target.value)) : e.checkedLink ? (i(e), e.checkedLink.requestChange(t.target.checked)) : e.onChange ? e.onChange.call(void 0, t) : void 0
                                }
                            };
                        t.exports = f
                    }, {
                        113: 113,
                        121: 121,
                        137: 137,
                        142: 142,
                        64: 64
                    }],
                    24: [function(e, t, n) {
                        "use strict";
                        var r = e(113),
                            o = (e(137), function(e) {
                                var t = this;
                                if (t.instancePool.length) {
                                    var n = t.instancePool.pop();
                                    return t.call(n, e), n
                                }
                                return new t(e)
                            }),
                            i = function(e, t) {
                                var n = this;
                                if (n.instancePool.length) {
                                    var r = n.instancePool.pop();
                                    return n.call(r, e, t), r
                                }
                                return new n(e, t)
                            },
                            a = function(e, t, n) {
                                var r = this;
                                if (r.instancePool.length) {
                                    var o = r.instancePool.pop();
                                    return r.call(o, e, t, n), o
                                }
                                return new r(e, t, n)
                            },
                            s = function(e, t, n, r) {
                                var o = this;
                                if (o.instancePool.length) {
                                    var i = o.instancePool.pop();
                                    return o.call(i, e, t, n, r), i
                                }
                                return new o(e, t, n, r)
                            },
                            u = function(e) {
                                var t = this;
                                e instanceof t ? void 0 : r("25"), e.destructor(), t.instancePool.length < t.poolSize && t.instancePool.push(e)
                            },
                            l = 10,
                            c = o,
                            p = function(e, t) {
                                var n = e;
                                return n.instancePool = [], n.getPooled = t || c, n.poolSize || (n.poolSize = l), n.release = u, n
                            },
                            d = {
                                addPoolingTo: p,
                                oneArgumentPooler: o,
                                twoArgumentPooler: i,
                                threeArgumentPooler: a,
                                fourArgumentPooler: s
                            };
                        t.exports = d
                    }, {
                        113: 113,
                        137: 137
                    }],
                    25: [function(e, t, n) {
                        "use strict";

                        function r(e) {
                            return Object.prototype.hasOwnProperty.call(e, m) || (e[m] = f++, p[e[m]] = {}), p[e[m]]
                        }
                        var o, i = e(143),
                            a = e(17),
                            s = e(51),
                            u = e(90),
                            l = e(108),
                            c = e(110),
                            p = {},
                            d = !1,
                            f = 0,
                            h = {
                                topAbort: "abort",
                                topAnimationEnd: l("animationend") || "animationend",
                                topAnimationIteration: l("animationiteration") || "animationiteration",
                                topAnimationStart: l("animationstart") || "animationstart",
                                topBlur: "blur",
                                topCanPlay: "canplay",
                                topCanPlayThrough: "canplaythrough",
                                topChange: "change",
                                topClick: "click",
                                topCompositionEnd: "compositionend",
                                topCompositionStart: "compositionstart",
                                topCompositionUpdate: "compositionupdate",
                                topContextMenu: "contextmenu",
                                topCopy: "copy",
                                topCut: "cut",
                                topDoubleClick: "dblclick",
                                topDrag: "drag",
                                topDragEnd: "dragend",
                                topDragEnter: "dragenter",
                                topDragExit: "dragexit",
                                topDragLeave: "dragleave",
                                topDragOver: "dragover",
                                topDragStart: "dragstart",
                                topDrop: "drop",
                                topDurationChange: "durationchange",
                                topEmptied: "emptied",
                                topEncrypted: "encrypted",
                                topEnded: "ended",
                                topError: "error",
                                topFocus: "focus",
                                topInput: "input",
                                topKeyDown: "keydown",
                                topKeyPress: "keypress",
                                topKeyUp: "keyup",
                                topLoadedData: "loadeddata",
                                topLoadedMetadata: "loadedmetadata",
                                topLoadStart: "loadstart",
                                topMouseDown: "mousedown",
                                topMouseMove: "mousemove",
                                topMouseOut: "mouseout",
                                topMouseOver: "mouseover",
                                topMouseUp: "mouseup",
                                topPaste: "paste",
                                topPause: "pause",
                                topPlay: "play",
                                topPlaying: "playing",
                                topProgress: "progress",
                                topRateChange: "ratechange",
                                topScroll: "scroll",
                                topSeeked: "seeked",
                                topSeeking: "seeking",
                                topSelectionChange: "selectionchange",
                                topStalled: "stalled",
                                topSuspend: "suspend",
                                topTextInput: "textInput",
                                topTimeUpdate: "timeupdate",
                                topTouchCancel: "touchcancel",
                                topTouchEnd: "touchend",
                                topTouchMove: "touchmove",
                                topTouchStart: "touchstart",
                                topTransitionEnd: l("transitionend") || "transitionend",
                                topVolumeChange: "volumechange",
                                topWaiting: "waiting",
                                topWheel: "wheel"
                            },
                            m = "_reactListenersID" + String(Math.random()).slice(2),
                            v = i({}, s, {
                                ReactEventListener: null,
                                injection: {
                                    injectReactEventListener: function(e) {
                                        e.setHandleTopLevel(v.handleTopLevel), v.ReactEventListener = e
                                    }
                                },
                                setEnabled: function(e) {
                                    v.ReactEventListener && v.ReactEventListener.setEnabled(e)
                                },
                                isEnabled: function() {
                                    return !(!v.ReactEventListener || !v.ReactEventListener.isEnabled())
                                },
                                listenTo: function(e, t) {
                                    for (var n = t, o = r(n), i = a.registrationNameDependencies[e], s = 0; s < i.length; s++) {
                                        var u = i[s];
                                        o.hasOwnProperty(u) && o[u] || ("topWheel" === u ? c("wheel") ? v.ReactEventListener.trapBubbledEvent("topWheel", "wheel", n) : c("mousewheel") ? v.ReactEventListener.trapBubbledEvent("topWheel", "mousewheel", n) : v.ReactEventListener.trapBubbledEvent("topWheel", "DOMMouseScroll", n) : "topScroll" === u ? c("scroll", !0) ? v.ReactEventListener.trapCapturedEvent("topScroll", "scroll", n) : v.ReactEventListener.trapBubbledEvent("topScroll", "scroll", v.ReactEventListener.WINDOW_HANDLE) : "topFocus" === u || "topBlur" === u ? (c("focus", !0) ? (v.ReactEventListener.trapCapturedEvent("topFocus", "focus", n), v.ReactEventListener.trapCapturedEvent("topBlur", "blur", n)) : c("focusin") && (v.ReactEventListener.trapBubbledEvent("topFocus", "focusin", n), v.ReactEventListener.trapBubbledEvent("topBlur", "focusout", n)), o.topBlur = !0, o.topFocus = !0) : h.hasOwnProperty(u) && v.ReactEventListener.trapBubbledEvent(u, h[u], n), o[u] = !0)
                                    }
                                },
                                trapBubbledEvent: function(e, t, n) {
                                    return v.ReactEventListener.trapBubbledEvent(e, t, n)
                                },
                                trapCapturedEvent: function(e, t, n) {
                                    return v.ReactEventListener.trapCapturedEvent(e, t, n)
                                },
                                supportsEventPageXY: function() {
                                    if (!document.createEvent) return !1;
                                    var e = document.createEvent("MouseEvent");
                                    return null != e && "pageX" in e
                                },
                                ensureScrollValueMonitoring: function() {
                                    if (void 0 === o && (o = v.supportsEventPageXY()), !o && !d) {
                                        var e = u.refreshScrollValues;
                                        v.ReactEventListener.monitorScrollValue(e), d = !0
                                    }
                                }
                            });
                        t.exports = v
                    }, {
                        108: 108,
                        110: 110,
                        143: 143,
                        17: 17,
                        51: 51,
                        90: 90
                    }],
                    26: [function(e, t, n) {
                        (function(n) {
                            "use strict";

                            function r(e, t, n, r) {
                                var o = void 0 === e[n];
                                null != t && o && (e[n] = i(t, !0))
                            }
                            var o = e(66),
                                i = e(109),
                                a = (e(22), e(117)),
                                s = e(118);
                            e(142);
                            "undefined" != typeof n && n.env, 1;
                            var u = {
                                instantiateChildren: function(e, t, n, o) {
                                    if (null == e) return null;
                                    var i = {};
                                    return s(e, r, i), i
                                },
                                updateChildren: function(e, t, n, r, s, u, l, c, p) {
                                    if (t || e) {
                                        var d, f;
                                        for (d in t)
                                            if (t.hasOwnProperty(d)) {
                                                f = e && e[d];
                                                var h = f && f._currentElement,
                                                    m = t[d];
                                                if (null != f && a(h, m)) o.receiveComponent(f, m, s, c), t[d] = f;
                                                else {
                                                    f && (r[d] = o.getHostNode(f), o.unmountComponent(f, !1));
                                                    var v = i(m, !0);
                                                    t[d] = v;
                                                    var g = o.mountComponent(v, s, u, l, c, p);
                                                    n.push(g)
                                                }
                                            }
                                        for (d in e) !e.hasOwnProperty(d) || t && t.hasOwnProperty(d) || (f = e[d], r[d] = o.getHostNode(f), o.unmountComponent(f, !1))
                                    }
                                },
                                unmountChildren: function(e, t) {
                                    for (var n in e)
                                        if (e.hasOwnProperty(n)) {
                                            var r = e[n];
                                            o.unmountComponent(r, t)
                                        }
                                }
                            };
                            t.exports = u
                        }).call(this, void 0)
                    }, {
                        109: 109,
                        117: 117,
                        118: 118,
                        142: 142,
                        22: 22,
                        66: 66
                    }],
                    27: [function(e, t, n) {
                        "use strict";
                        var r = e(8),
                            o = e(37),
                            i = {
                                processChildrenUpdates: o.dangerouslyProcessChildrenUpdates,
                                replaceNodeWithMarkup: r.dangerouslyReplaceNodeWithMarkup
                            };
                        t.exports = i
                    }, {
                        37: 37,
                        8: 8
                    }],
                    28: [function(e, t, n) {
                        "use strict";
                        var r = e(113),
                            o = (e(137), !1),
                            i = {
                                replaceNodeWithMarkup: null,
                                processChildrenUpdates: null,
                                injection: {
                                    injectEnvironment: function(e) {
                                        o ? r("104") : void 0, i.replaceNodeWithMarkup = e.replaceNodeWithMarkup, i.processChildrenUpdates = e.processChildrenUpdates, o = !0
                                    }
                                }
                            };
                        t.exports = i
                    }, {
                        113: 113,
                        137: 137
                    }],
                    29: [function(e, t, n) {
                        "use strict";

                        function r(e) {}

                        function o(e, t) {}

                        function i(e) {
                            return !(!e.prototype || !e.prototype.isReactComponent)
                        }

                        function a(e) {
                            return !(!e.prototype || !e.prototype.isPureReactComponent)
                        }
                        var s = e(113),
                            u = e(143),
                            l = e(121),
                            c = e(28),
                            p = e(120),
                            d = e(50),
                            f = e(57),
                            h = (e(58), e(62)),
                            m = e(66),
                            v = e(130),
                            g = (e(137), e(141)),
                            y = e(117),
                            _ = (e(142), {
                                ImpureClass: 0,
                                PureClass: 1,
                                StatelessFunctional: 2
                            });
                        r.prototype.render = function() {
                            var e = f.get(this)._currentElement.type,
                                t = e(this.props, this.context, this.updater);
                            return o(e, t), t
                        };
                        var C = 1,
                            b = {
                                construct: function(e) {
                                    this._currentElement = e, this._rootNodeID = 0, this._compositeType = null, this._instance = null, this._hostParent = null, this._hostContainerInfo = null, this._updateBatchNumber = null, this._pendingElement = null, this._pendingStateQueue = null, this._pendingReplaceState = !1, this._pendingForceUpdate = !1, this._renderedNodeType = null, this._renderedComponent = null, this._context = null, this._mountOrder = 0, this._topLevelWrapper = null, this._pendingCallbacks = null, this._calledComponentWillUnmount = !1
                                },
                                mountComponent: function(e, t, n, u) {
                                    this._context = u, this._mountOrder = C++, this._hostParent = t, this._hostContainerInfo = n;
                                    var c, p = this._currentElement.props,
                                        d = this._processContext(u),
                                        h = this._currentElement.type,
                                        m = e.getUpdateQueue(),
                                        g = i(h),
                                        y = this._constructComponent(g, p, d, m);
                                    g || null != y && null != y.render ? a(h) ? this._compositeType = _.PureClass : this._compositeType = _.ImpureClass : (c = y, o(h, c), null === y || y === !1 || l.isValidElement(y) ? void 0 : s("105", h.displayName || h.name || "Component"), y = new r(h), this._compositeType = _.StatelessFunctional), y.props = p, y.context = d, y.refs = v, y.updater = m, this._instance = y, f.set(y, this);
                                    var b = y.state;
                                    void 0 === b && (y.state = b = null), "object" != typeof b || Array.isArray(b) ? s("106", this.getName() || "ReactCompositeComponent") : void 0, this._pendingStateQueue = null, this._pendingReplaceState = !1, this._pendingForceUpdate = !1;
                                    var E;
                                    return E = y.unstable_handleError ? this.performInitialMountWithErrorHandling(c, t, n, e, u) : this.performInitialMount(c, t, n, e, u), y.componentDidMount && e.getReactMountReady().enqueue(y.componentDidMount, y), E
                                },
                                _constructComponent: function(e, t, n, r) {
                                    return this._constructComponentWithoutOwner(e, t, n, r)
                                },
                                _constructComponentWithoutOwner: function(e, t, n, r) {
                                    var o = this._currentElement.type;
                                    return e ? new o(t, n, r) : o(t, n, r)
                                },
                                performInitialMountWithErrorHandling: function(e, t, n, r, o) {
                                    var i, a = r.checkpoint();
                                    try {
                                        i = this.performInitialMount(e, t, n, r, o)
                                    } catch (s) {
                                        r.rollback(a), this._instance.unstable_handleError(s), this._pendingStateQueue && (this._instance.state = this._processPendingState(this._instance.props, this._instance.context)), a = r.checkpoint(), this._renderedComponent.unmountComponent(!0), r.rollback(a), i = this.performInitialMount(e, t, n, r, o)
                                    }
                                    return i
                                },
                                performInitialMount: function(e, t, n, r, o) {
                                    var i = this._instance,
                                        a = 0;
                                    i.componentWillMount && (i.componentWillMount(), this._pendingStateQueue && (i.state = this._processPendingState(i.props, i.context))), void 0 === e && (e = this._renderValidatedComponent());
                                    var s = h.getType(e);
                                    this._renderedNodeType = s;
                                    var u = this._instantiateReactComponent(e, s !== h.EMPTY);
                                    this._renderedComponent = u;
                                    var l = m.mountComponent(u, r, t, n, this._processChildContext(o), a);
                                    return l
                                },
                                getHostNode: function() {
                                    return m.getHostNode(this._renderedComponent)
                                },
                                unmountComponent: function(e) {
                                    if (this._renderedComponent) {
                                        var t = this._instance;
                                        if (t.componentWillUnmount && !t._calledComponentWillUnmount)
                                            if (t._calledComponentWillUnmount = !0, e) {
                                                var n = this.getName() + ".componentWillUnmount()";
                                                d.invokeGuardedCallback(n, t.componentWillUnmount.bind(t))
                                            } else t.componentWillUnmount();
                                        this._renderedComponent && (m.unmountComponent(this._renderedComponent, e), this._renderedNodeType = null, this._renderedComponent = null, this._instance = null), this._pendingStateQueue = null, this._pendingReplaceState = !1, this._pendingForceUpdate = !1, this._pendingCallbacks = null, this._pendingElement = null, this._context = null, this._rootNodeID = 0, this._topLevelWrapper = null, f.remove(t)
                                    }
                                },
                                _maskContext: function(e) {
                                    var t = this._currentElement.type,
                                        n = t.contextTypes;
                                    if (!n) return v;
                                    var r = {};
                                    for (var o in n) r[o] = e[o];
                                    return r
                                },
                                _processContext: function(e) {
                                    var t = this._maskContext(e);
                                    return t
                                },
                                _processChildContext: function(e) {
                                    var t, n = this._currentElement.type,
                                        r = this._instance;
                                    if (r.getChildContext && (t = r.getChildContext()), t) {
                                        "object" != typeof n.childContextTypes ? s("107", this.getName() || "ReactCompositeComponent") : void 0;
                                        for (var o in t) o in n.childContextTypes ? void 0 : s("108", this.getName() || "ReactCompositeComponent", o);
                                        return u({}, e, t)
                                    }
                                    return e
                                },
                                _checkContextTypes: function(e, t, n) {},
                                receiveComponent: function(e, t, n) {
                                    var r = this._currentElement,
                                        o = this._context;
                                    this._pendingElement = null, this.updateComponent(t, r, e, o, n)
                                },
                                performUpdateIfNecessary: function(e) {
                                    null != this._pendingElement ? m.receiveComponent(this, this._pendingElement, e, this._context) : null !== this._pendingStateQueue || this._pendingForceUpdate ? this.updateComponent(e, this._currentElement, this._currentElement, this._context, this._context) : this._updateBatchNumber = null
                                },
                                updateComponent: function(e, t, n, r, o) {
                                    var i = this._instance;
                                    null == i ? s("136", this.getName() || "ReactCompositeComponent") : void 0;
                                    var a, u = !1;
                                    this._context === o ? a = i.context : (a = this._processContext(o), u = !0);
                                    var l = t.props,
                                        c = n.props;
                                    t !== n && (u = !0), u && i.componentWillReceiveProps && i.componentWillReceiveProps(c, a);
                                    var p = this._processPendingState(c, a),
                                        d = !0;
                                    this._pendingForceUpdate || (i.shouldComponentUpdate ? d = i.shouldComponentUpdate(c, p, a) : this._compositeType === _.PureClass && (d = !g(l, c) || !g(i.state, p))), this._updateBatchNumber = null, d ? (this._pendingForceUpdate = !1, this._performComponentUpdate(n, c, p, a, e, o)) : (this._currentElement = n, this._context = o, i.props = c, i.state = p, i.context = a)
                                },
                                _processPendingState: function(e, t) {
                                    var n = this._instance,
                                        r = this._pendingStateQueue,
                                        o = this._pendingReplaceState;
                                    if (this._pendingReplaceState = !1, this._pendingStateQueue = null, !r) return n.state;
                                    if (o && 1 === r.length) return r[0];
                                    for (var i = u({}, o ? r[0] : n.state), a = o ? 1 : 0; a < r.length; a++) {
                                        var s = r[a];
                                        u(i, "function" == typeof s ? s.call(n, i, e, t) : s)
                                    }
                                    return i
                                },
                                _performComponentUpdate: function(e, t, n, r, o, i) {
                                    var a, s, u, l = this._instance,
                                        c = Boolean(l.componentDidUpdate);
                                    c && (a = l.props, s = l.state, u = l.context), l.componentWillUpdate && l.componentWillUpdate(t, n, r), this._currentElement = e, this._context = i, l.props = t, l.state = n, l.context = r, this._updateRenderedComponent(o, i), c && o.getReactMountReady().enqueue(l.componentDidUpdate.bind(l, a, s, u), l)
                                },
                                _updateRenderedComponent: function(e, t) {
                                    var n = this._renderedComponent,
                                        r = n._currentElement,
                                        o = this._renderValidatedComponent(),
                                        i = 0;
                                    if (y(r, o)) m.receiveComponent(n, o, e, this._processChildContext(t));
                                    else {
                                        var a = m.getHostNode(n);
                                        m.unmountComponent(n, !1);
                                        var s = h.getType(o);
                                        this._renderedNodeType = s;
                                        var u = this._instantiateReactComponent(o, s !== h.EMPTY);
                                        this._renderedComponent = u;
                                        var l = m.mountComponent(u, e, this._hostParent, this._hostContainerInfo, this._processChildContext(t), i);
                                        this._replaceNodeWithMarkup(a, l, n)
                                    }
                                },
                                _replaceNodeWithMarkup: function(e, t, n) {
                                    c.replaceNodeWithMarkup(e, t, n)
                                },
                                _renderValidatedComponentWithoutOwnerOrContext: function() {
                                    var e, t = this._instance;
                                    return e = t.render()
                                },
                                _renderValidatedComponent: function() {
                                    var e;
                                    if (this._compositeType !== _.StatelessFunctional) {
                                        p.current = this;
                                        try {
                                            e = this._renderValidatedComponentWithoutOwnerOrContext()
                                        } finally {
                                            p.current = null
                                        }
                                    } else e = this._renderValidatedComponentWithoutOwnerOrContext();
                                    return null === e || e === !1 || l.isValidElement(e) ? void 0 : s("109", this.getName() || "ReactCompositeComponent"), e
                                },
                                attachRef: function(e, t) {
                                    var n = this.getPublicInstance();
                                    null == n ? s("110") : void 0;
                                    var r = t.getPublicInstance(),
                                        o = n.refs === v ? n.refs = {} : n.refs;
                                    o[e] = r
                                },
                                detachRef: function(e) {
                                    var t = this.getPublicInstance().refs;
                                    delete t[e]
                                },
                                getName: function() {
                                    var e = this._currentElement.type,
                                        t = this._instance && this._instance.constructor;
                                    return e.displayName || t && t.displayName || e.name || t && t.name || null
                                },
                                getPublicInstance: function() {
                                    var e = this._instance;
                                    return this._compositeType === _.StatelessFunctional ? null : e
                                },
                                _instantiateReactComponent: null
                            };
                        t.exports = b
                    }, {
                        113: 113,
                        117: 117,
                        120: 120,
                        121: 121,
                        130: 130,
                        137: 137,
                        141: 141,
                        142: 142,
                        143: 143,
                        28: 28,
                        50: 50,
                        57: 57,
                        58: 58,
                        62: 62,
                        66: 66
                    }],
                    30: [function(e, t, n) {
                        "use strict";
                        var r = e(33),
                            o = e(47),
                            i = e(60),
                            a = e(66),
                            s = e(71),
                            u = e(72),
                            l = e(96),
                            c = e(103),
                            p = e(114);
                        e(142);
                        o.inject();
                        var d = {
                            findDOMNode: l,
                            render: i.render,
                            unmountComponentAtNode: i.unmountComponentAtNode,
                            version: u,
                            unstable_batchedUpdates: s.batchedUpdates,
                            unstable_renderSubtreeIntoContainer: p
                        };
                        "undefined" != typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ && "function" == typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.inject && __REACT_DEVTOOLS_GLOBAL_HOOK__.inject({
                            ComponentTree: {
                                getClosestInstanceFromNode: r.getClosestInstanceFromNode,
                                getNodeFromInstance: function(e) {
                                    return e._renderedComponent && (e = c(e)), e ? r.getNodeFromInstance(e) : null
                                }
                            },
                            Mount: i,
                            Reconciler: a
                        });
                        t.exports = d
                    }, {
                        103: 103,
                        114: 114,
                        142: 142,
                        33: 33,
                        47: 47,
                        60: 60,
                        66: 66,
                        71: 71,
                        72: 72,
                        96: 96
                    }],
                    31: [function(e, t, n) {
                        "use strict";

                        function r(e) {
                            if (e) {
                                var t = e._currentElement._owner || null;
                                if (t) {
                                    var n = t.getName();
                                    if (n) return " This DOM node was rendered by `" + n + "`."
                                }
                            }
                            return ""
                        }

                        function o(e, t) {
                            t && (X[e._tag] && (null != t.children || null != t.dangerouslySetInnerHTML ? m("137", e._tag, e._currentElement._owner ? " Check the render method of " + e._currentElement._owner.getName() + "." : "") : void 0), null != t.dangerouslySetInnerHTML && (null != t.children ? m("60") : void 0, "object" == typeof t.dangerouslySetInnerHTML && W in t.dangerouslySetInnerHTML ? void 0 : m("61")), null != t.style && "object" != typeof t.style ? m("62", r(e)) : void 0)
                        }

                        function i(e, t, n, r) {
                            if (!(r instanceof R)) {
                                var o = e._hostContainerInfo,
                                    i = o._node && o._node.nodeType === q,
                                    s = i ? o._node : o._ownerDocument;
                                F(t, s), r.getReactMountReady().enqueue(a, {
                                    inst: e,
                                    registrationName: t,
                                    listener: n
                                })
                            }
                        }

                        function a() {
                            var e = this;
                            x.putListener(e.inst, e.registrationName, e.listener)
                        }

                        function s() {
                            var e = this;
                            N.postMountWrapper(e)
                        }

                        function u() {
                            var e = this;
                            I.postMountWrapper(e)
                        }

                        function l() {
                            var e = this;
                            S.postMountWrapper(e)
                        }

                        function c() {
                            var e = this;
                            e._rootNodeID ? void 0 : m("63");
                            var t = U(e);
                            switch (t ? void 0 : m("64"), e._tag) {
                                case "iframe":
                                case "object":
                                    e._wrapperState.listeners = [T.trapBubbledEvent("topLoad", "load", t)];
                                    break;
                                case "video":
                                case "audio":
                                    e._wrapperState.listeners = [];
                                    for (var n in K) K.hasOwnProperty(n) && e._wrapperState.listeners.push(T.trapBubbledEvent(n, K[n], t));
                                    break;
                                case "source":
                                    e._wrapperState.listeners = [T.trapBubbledEvent("topError", "error", t)];
                                    break;
                                case "img":
                                    e._wrapperState.listeners = [T.trapBubbledEvent("topError", "error", t), T.trapBubbledEvent("topLoad", "load", t)];
                                    break;
                                case "form":
                                    e._wrapperState.listeners = [T.trapBubbledEvent("topReset", "reset", t), T.trapBubbledEvent("topSubmit", "submit", t)];
                                    break;
                                case "input":
                                case "select":
                                case "textarea":
                                    e._wrapperState.listeners = [T.trapBubbledEvent("topInvalid", "invalid", t)]
                            }
                        }

                        function p() {
                            M.postUpdateWrapper(this)
                        }

                        function d(e) {
                            $.call(G, e) || (Q.test(e) ? void 0 : m("65", e), G[e] = !0)
                        }

                        function f(e, t) {
                            return e.indexOf("-") >= 0 || null != t.is
                        }

                        function h(e) {
                            var t = e.type;
                            d(t), this._currentElement = e, this._tag = t.toLowerCase(), this._namespaceURI = null, this._renderedChildren = null, this._previousStyle = null, this._previousStyleCopy = null, this._hostNode = null, this._hostParent = null, this._rootNodeID = 0, this._domID = 0, this._hostContainerInfo = null, this._wrapperState = null, this._topLevelWrapper = null, this._flags = 0
                        }
                        var m = e(113),
                            v = e(143),
                            g = e(2),
                            y = e(5),
                            _ = e(9),
                            C = e(10),
                            b = e(11),
                            E = e(12),
                            x = e(16),
                            w = e(17),
                            T = e(25),
                            k = e(32),
                            P = e(33),
                            N = e(38),
                            S = e(39),
                            M = e(40),
                            I = e(43),
                            O = (e(58), e(61)),
                            R = e(68),
                            A = (e(129), e(95)),
                            D = (e(137), e(110), e(141), e(119), e(142), k),
                            L = x.deleteListener,
                            U = P.getNodeFromInstance,
                            F = T.listenTo,
                            V = w.registrationNameModules,
                            B = {
                                string: !0,
                                number: !0
                            },
                            j = "style",
                            W = "__html",
                            H = {
                                children: null,
                                dangerouslySetInnerHTML: null,
                                suppressContentEditableWarning: null
                            },
                            q = 11,
                            K = {
                                topAbort: "abort",
                                topCanPlay: "canplay",
                                topCanPlayThrough: "canplaythrough",
                                topDurationChange: "durationchange",
                                topEmptied: "emptied",
                                topEncrypted: "encrypted",
                                topEnded: "ended",
                                topError: "error",
                                topLoadedData: "loadeddata",
                                topLoadedMetadata: "loadedmetadata",
                                topLoadStart: "loadstart",
                                topPause: "pause",
                                topPlay: "play",
                                topPlaying: "playing",
                                topProgress: "progress",
                                topRateChange: "ratechange",
                                topSeeked: "seeked",
                                topSeeking: "seeking",
                                topStalled: "stalled",
                                topSuspend: "suspend",
                                topTimeUpdate: "timeupdate",
                                topVolumeChange: "volumechange",
                                topWaiting: "waiting"
                            },
                            z = {
                                area: !0,
                                base: !0,
                                br: !0,
                                col: !0,
                                embed: !0,
                                hr: !0,
                                img: !0,
                                input: !0,
                                keygen: !0,
                                link: !0,
                                meta: !0,
                                param: !0,
                                source: !0,
                                track: !0,
                                wbr: !0
                            },
                            Y = {
                                listing: !0,
                                pre: !0,
                                textarea: !0
                            },
                            X = v({
                                menuitem: !0
                            }, z),
                            Q = /^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,
                            G = {},
                            $ = {}.hasOwnProperty,
                            Z = 1;
                        h.displayName = "ReactDOMComponent", h.Mixin = {
                            mountComponent: function(e, t, n, r) {
                                this._rootNodeID = Z++, this._domID = n._idCounter++, this._hostParent = t, this._hostContainerInfo = n;
                                var i = this._currentElement.props;
                                switch (this._tag) {
                                    case "audio":
                                    case "form":
                                    case "iframe":
                                    case "img":
                                    case "link":
                                    case "object":
                                    case "source":
                                    case "video":
                                        this._wrapperState = {
                                            listeners: null
                                        }, e.getReactMountReady().enqueue(c, this);
                                        break;
                                    case "input":
                                        N.mountWrapper(this, i, t), i = N.getHostProps(this, i), e.getReactMountReady().enqueue(c, this);
                                        break;
                                    case "option":
                                        S.mountWrapper(this, i, t), i = S.getHostProps(this, i);
                                        break;
                                    case "select":
                                        M.mountWrapper(this, i, t), i = M.getHostProps(this, i), e.getReactMountReady().enqueue(c, this);
                                        break;
                                    case "textarea":
                                        I.mountWrapper(this, i, t), i = I.getHostProps(this, i), e.getReactMountReady().enqueue(c, this)
                                }
                                o(this, i);
                                var a, p;
                                null != t ? (a = t._namespaceURI, p = t._tag) : n._tag && (a = n._namespaceURI, p = n._tag), (null == a || a === C.svg && "foreignobject" === p) && (a = C.html), a === C.html && ("svg" === this._tag ? a = C.svg : "math" === this._tag && (a = C.mathml)), this._namespaceURI = a;
                                var d;
                                if (e.useCreateElement) {
                                    var f, h = n._ownerDocument;
                                    if (a === C.html)
                                        if ("script" === this._tag) {
                                            var m = h.createElement("div"),
                                                v = this._currentElement.type;
                                            m.innerHTML = "<" + v + "></" + v + ">", f = m.removeChild(m.firstChild)
                                        } else f = i.is ? h.createElement(this._currentElement.type, i.is) : h.createElement(this._currentElement.type);
                                    else f = h.createElementNS(a, this._currentElement.type);
                                    P.precacheNode(this, f), this._flags |= D.hasCachedChildNodes, this._hostParent || E.setAttributeForRoot(f), this._updateDOMProperties(null, i, e);
                                    var y = _(f);
                                    this._createInitialChildren(e, i, r, y), d = y
                                } else {
                                    var b = this._createOpenTagMarkupAndPutListeners(e, i),
                                        x = this._createContentMarkup(e, i, r);
                                    d = !x && z[this._tag] ? b + "/>" : b + ">" + x + "</" + this._currentElement.type + ">"
                                }
                                switch (this._tag) {
                                    case "input":
                                        e.getReactMountReady().enqueue(s, this), i.autoFocus && e.getReactMountReady().enqueue(g.focusDOMComponent, this);
                                        break;
                                    case "textarea":
                                        e.getReactMountReady().enqueue(u, this), i.autoFocus && e.getReactMountReady().enqueue(g.focusDOMComponent, this);
                                        break;
                                    case "select":
                                        i.autoFocus && e.getReactMountReady().enqueue(g.focusDOMComponent, this);
                                        break;
                                    case "button":
                                        i.autoFocus && e.getReactMountReady().enqueue(g.focusDOMComponent, this);
                                        break;
                                    case "option":
                                        e.getReactMountReady().enqueue(l, this)
                                }
                                return d
                            },
                            _createOpenTagMarkupAndPutListeners: function(e, t) {
                                var n = "<" + this._currentElement.type;
                                for (var r in t)
                                    if (t.hasOwnProperty(r)) {
                                        var o = t[r];
                                        if (null != o)
                                            if (V.hasOwnProperty(r)) o && i(this, r, o, e);
                                            else {
                                                r === j && (o && (o = this._previousStyleCopy = v({}, t.style)), o = y.createMarkupForStyles(o, this));
                                                var a = null;
                                                null != this._tag && f(this._tag, t) ? H.hasOwnProperty(r) || (a = E.createMarkupForCustomAttribute(r, o)) : a = E.createMarkupForProperty(r, o), a && (n += " " + a)
                                            }
                                    }
                                return e.renderToStaticMarkup ? n : (this._hostParent || (n += " " + E.createMarkupForRoot()), n += " " + E.createMarkupForID(this._domID))
                            },
                            _createContentMarkup: function(e, t, n) {
                                var r = "",
                                    o = t.dangerouslySetInnerHTML;
                                if (null != o) null != o.__html && (r = o.__html);
                                else {
                                    var i = B[typeof t.children] ? t.children : null,
                                        a = null != i ? null : t.children;
                                    if (null != i) r = A(i);
                                    else if (null != a) {
                                        var s = this.mountChildren(a, e, n);
                                        r = s.join("")
                                    }
                                }
                                return Y[this._tag] && "\n" === r.charAt(0) ? "\n" + r : r
                            },
                            _createInitialChildren: function(e, t, n, r) {
                                var o = t.dangerouslySetInnerHTML;
                                if (null != o) null != o.__html && _.queueHTML(r, o.__html);
                                else {
                                    var i = B[typeof t.children] ? t.children : null,
                                        a = null != i ? null : t.children;
                                    if (null != i) "" !== i && _.queueText(r, i);
                                    else if (null != a)
                                        for (var s = this.mountChildren(a, e, n), u = 0; u < s.length; u++) _.queueChild(r, s[u])
                                }
                            },
                            receiveComponent: function(e, t, n) {
                                var r = this._currentElement;
                                this._currentElement = e, this.updateComponent(t, r, e, n)
                            },
                            updateComponent: function(e, t, n, r) {
                                var i = t.props,
                                    a = this._currentElement.props;
                                switch (this._tag) {
                                    case "input":
                                        i = N.getHostProps(this, i), a = N.getHostProps(this, a);
                                        break;
                                    case "option":
                                        i = S.getHostProps(this, i), a = S.getHostProps(this, a);
                                        break;
                                    case "select":
                                        i = M.getHostProps(this, i), a = M.getHostProps(this, a);
                                        break;
                                    case "textarea":
                                        i = I.getHostProps(this, i), a = I.getHostProps(this, a)
                                }
                                switch (o(this, a), this._updateDOMProperties(i, a, e), this._updateDOMChildren(i, a, e, r), this._tag) {
                                    case "input":
                                        N.updateWrapper(this);
                                        break;
                                    case "textarea":
                                        I.updateWrapper(this);
                                        break;
                                    case "select":
                                        e.getReactMountReady().enqueue(p, this)
                                }
                            },
                            _updateDOMProperties: function(e, t, n) {
                                var r, o, a;
                                for (r in e)
                                    if (!t.hasOwnProperty(r) && e.hasOwnProperty(r) && null != e[r])
                                        if (r === j) {
                                            var s = this._previousStyleCopy;
                                            for (o in s) s.hasOwnProperty(o) && (a = a || {}, a[o] = "");
                                            this._previousStyleCopy = null
                                        } else V.hasOwnProperty(r) ? e[r] && L(this, r) : f(this._tag, e) ? H.hasOwnProperty(r) || E.deleteValueForAttribute(U(this), r) : (b.properties[r] || b.isCustomAttribute(r)) && E.deleteValueForProperty(U(this), r);
                                for (r in t) {
                                    var u = t[r],
                                        l = r === j ? this._previousStyleCopy : null != e ? e[r] : void 0;
                                    if (t.hasOwnProperty(r) && u !== l && (null != u || null != l))
                                        if (r === j)
                                            if (u ? u = this._previousStyleCopy = v({}, u) : this._previousStyleCopy = null, l) {
                                                for (o in l) !l.hasOwnProperty(o) || u && u.hasOwnProperty(o) || (a = a || {}, a[o] = "");
                                                for (o in u) u.hasOwnProperty(o) && l[o] !== u[o] && (a = a || {}, a[o] = u[o])
                                            } else a = u;
                                    else if (V.hasOwnProperty(r)) u ? i(this, r, u, n) : l && L(this, r);
                                    else if (f(this._tag, t)) H.hasOwnProperty(r) || E.setValueForAttribute(U(this), r, u);
                                    else if (b.properties[r] || b.isCustomAttribute(r)) {
                                        var c = U(this);
                                        null != u ? E.setValueForProperty(c, r, u) : E.deleteValueForProperty(c, r)
                                    }
                                }
                                a && y.setValueForStyles(U(this), a, this)
                            },
                            _updateDOMChildren: function(e, t, n, r) {
                                var o = B[typeof e.children] ? e.children : null,
                                    i = B[typeof t.children] ? t.children : null,
                                    a = e.dangerouslySetInnerHTML && e.dangerouslySetInnerHTML.__html,
                                    s = t.dangerouslySetInnerHTML && t.dangerouslySetInnerHTML.__html,
                                    u = null != o ? null : e.children,
                                    l = null != i ? null : t.children,
                                    c = null != o || null != a,
                                    p = null != i || null != s;
                                null != u && null == l ? this.updateChildren(null, n, r) : c && !p && this.updateTextContent(""), null != i ? o !== i && this.updateTextContent("" + i) : null != s ? a !== s && this.updateMarkup("" + s) : null != l && this.updateChildren(l, n, r)
                            },
                            getHostNode: function() {
                                return U(this)
                            },
                            unmountComponent: function(e) {
                                switch (this._tag) {
                                    case "audio":
                                    case "form":
                                    case "iframe":
                                    case "img":
                                    case "link":
                                    case "object":
                                    case "source":
                                    case "video":
                                        var t = this._wrapperState.listeners;
                                        if (t)
                                            for (var n = 0; n < t.length; n++) t[n].remove();
                                        break;
                                    case "html":
                                    case "head":
                                    case "body":
                                        m("66", this._tag)
                                }
                                this.unmountChildren(e), P.uncacheNode(this), x.deleteAllListeners(this), this._rootNodeID = 0, this._domID = 0, this._wrapperState = null
                            },
                            getPublicInstance: function() {
                                return U(this)
                            }
                        }, v(h.prototype, h.Mixin, O.Mixin), t.exports = h
                    }, {
                        10: 10,
                        11: 11,
                        110: 110,
                        113: 113,
                        119: 119,
                        12: 12,
                        129: 129,
                        137: 137,
                        141: 141,
                        142: 142,
                        143: 143,
                        16: 16,
                        17: 17,
                        2: 2,
                        25: 25,
                        32: 32,
                        33: 33,
                        38: 38,
                        39: 39,
                        40: 40,
                        43: 43,
                        5: 5,
                        58: 58,
                        61: 61,
                        68: 68,
                        9: 9,
                        95: 95
                    }],
                    32: [function(e, t, n) {
                        "use strict";
                        var r = {
                            hasCachedChildNodes: 1
                        };
                        t.exports = r
                    }, {}],
                    33: [function(e, t, n) {
                        "use strict";

                        function r(e, t) {
                            return 1 === e.nodeType && e.getAttribute(h) === String(t) || 8 === e.nodeType && e.nodeValue === " react-text: " + t + " " || 8 === e.nodeType && e.nodeValue === " react-empty: " + t + " "
                        }

                        function o(e) {
                            for (var t; t = e._renderedComponent;) e = t;
                            return e
                        }

                        function i(e, t) {
                            var n = o(e);
                            n._hostNode = t, t[v] = n
                        }

                        function a(e) {
                            var t = e._hostNode;
                            t && (delete t[v], e._hostNode = null)
                        }

                        function s(e, t) {
                            if (!(e._flags & m.hasCachedChildNodes)) {
                                var n = e._renderedChildren,
                                    a = t.firstChild;
                                e: for (var s in n)
                                    if (n.hasOwnProperty(s)) {
                                        var u = n[s],
                                            l = o(u)._domID;
                                        if (0 !== l) {
                                            for (; null !== a; a = a.nextSibling)
                                                if (r(a, l)) {
                                                    i(u, a);
                                                    continue e
                                                }
                                            p("32", l)
                                        }
                                    }
                                e._flags |= m.hasCachedChildNodes
                            }
                        }

                        function u(e) {
                            if (e[v]) return e[v];
                            for (var t = []; !e[v];) {
                                if (t.push(e), !e.parentNode) return null;
                                e = e.parentNode
                            }
                            for (var n, r; e && (r = e[v]); e = t.pop()) n = r, t.length && s(r, e);
                            return n
                        }

                        function l(e) {
                            var t = u(e);
                            return null != t && t._hostNode === e ? t : null
                        }

                        function c(e) {
                            if (void 0 === e._hostNode ? p("33") : void 0, e._hostNode) return e._hostNode;
                            for (var t = []; !e._hostNode;) t.push(e), e._hostParent ? void 0 : p("34"), e = e._hostParent;
                            for (; t.length; e = t.pop()) s(e, e._hostNode);
                            return e._hostNode
                        }
                        var p = e(113),
                            d = e(11),
                            f = e(32),
                            h = (e(137), d.ID_ATTRIBUTE_NAME),
                            m = f,
                            v = "__reactInternalInstance$" + Math.random().toString(36).slice(2),
                            g = {
                                getClosestInstanceFromNode: u,
                                getInstanceFromNode: l,
                                getNodeFromInstance: c,
                                precacheChildNodes: s,
                                precacheNode: i,
                                uncacheNode: a
                            };
                        t.exports = g
                    }, {
                        11: 11,
                        113: 113,
                        137: 137,
                        32: 32
                    }],
                    34: [function(e, t, n) {
                        "use strict";

                        function r(e, t) {
                            var n = {
                                _topLevelWrapper: e,
                                _idCounter: 1,
                                _ownerDocument: t ? t.nodeType === o ? t : t.ownerDocument : null,
                                _node: t,
                                _tag: t ? t.nodeName.toLowerCase() : null,
                                _namespaceURI: t ? t.namespaceURI : null
                            };
                            return n
                        }
                        var o = (e(119), 9);
                        t.exports = r
                    }, {
                        119: 119
                    }],
                    35: [function(e, t, n) {
                        "use strict";
                        var r = e(143),
                            o = e(9),
                            i = e(33),
                            a = function(e) {
                                this._currentElement = null, this._hostNode = null, this._hostParent = null, this._hostContainerInfo = null, this._domID = 0
                            };
                        r(a.prototype, {
                            mountComponent: function(e, t, n, r) {
                                var a = n._idCounter++;
                                this._domID = a, this._hostParent = t, this._hostContainerInfo = n;
                                var s = " react-empty: " + this._domID + " ";
                                if (e.useCreateElement) {
                                    var u = n._ownerDocument,
                                        l = u.createComment(s);
                                    return i.precacheNode(this, l), o(l)
                                }
                                return e.renderToStaticMarkup ? "" : "<!--" + s + "-->"
                            },
                            receiveComponent: function() {},
                            getHostNode: function() {
                                return i.getNodeFromInstance(this)
                            },
                            unmountComponent: function() {
                                i.uncacheNode(this)
                            }
                        }), t.exports = a
                    }, {
                        143: 143,
                        33: 33,
                        9: 9
                    }],
                    36: [function(e, t, n) {
                        "use strict";
                        var r = {
                            useCreateElement: !0,
                            useFiber: !1
                        };
                        t.exports = r
                    }, {}],
                    37: [function(e, t, n) {
                        "use strict";
                        var r = e(8),
                            o = e(33),
                            i = {
                                dangerouslyProcessChildrenUpdates: function(e, t) {
                                    var n = o.getNodeFromInstance(e);
                                    r.processUpdates(n, t)
                                }
                            };
                        t.exports = i
                    }, {
                        33: 33,
                        8: 8
                    }],
                    38: [function(e, t, n) {
                        "use strict";

                        function r() {
                            this._rootNodeID && p.updateWrapper(this)
                        }

                        function o(e) {
                            var t = this._currentElement.props,
                                n = u.executeOnChange(t, e);
                            c.asap(r, this);
                            var o = t.name;
                            if ("radio" === t.type && null != o) {
                                for (var a = l.getNodeFromInstance(this), s = a; s.parentNode;) s = s.parentNode;
                                for (var p = s.querySelectorAll("input[name=" + JSON.stringify("" + o) + '][type="radio"]'), d = 0; d < p.length; d++) {
                                    var f = p[d];
                                    if (f !== a && f.form === a.form) {
                                        var h = l.getInstanceFromNode(f);
                                        h ? void 0 : i("90"), c.asap(r, h)
                                    }
                                }
                            }
                            return n
                        }
                        var i = e(113),
                            a = e(143),
                            s = e(12),
                            u = e(23),
                            l = e(33),
                            c = e(71),
                            p = (e(137), e(142), {
                                getHostProps: function(e, t) {
                                    var n = u.getValue(t),
                                        r = u.getChecked(t),
                                        o = a({
                                            type: void 0,
                                            step: void 0,
                                            min: void 0,
                                            max: void 0
                                        }, t, {
                                            defaultChecked: void 0,
                                            defaultValue: void 0,
                                            value: null != n ? n : e._wrapperState.initialValue,
                                            checked: null != r ? r : e._wrapperState.initialChecked,
                                            onChange: e._wrapperState.onChange
                                        });
                                    return o
                                },
                                mountWrapper: function(e, t) {
                                    var n = t.defaultValue;
                                    e._wrapperState = {
                                        initialChecked: null != t.checked ? t.checked : t.defaultChecked,
                                        initialValue: null != t.value ? t.value : n,
                                        listeners: null,
                                        onChange: o.bind(e)
                                    }
                                },
                                updateWrapper: function(e) {
                                    var t = e._currentElement.props,
                                        n = t.checked;
                                    null != n && s.setValueForProperty(l.getNodeFromInstance(e), "checked", n || !1);
                                    var r = l.getNodeFromInstance(e),
                                        o = u.getValue(t);
                                    if (null != o) {
                                        var i = "" + o;
                                        i !== r.value && (r.value = i)
                                    } else null == t.value && null != t.defaultValue && r.defaultValue !== "" + t.defaultValue && (r.defaultValue = "" + t.defaultValue), null == t.checked && null != t.defaultChecked && (r.defaultChecked = !!t.defaultChecked)
                                },
                                postMountWrapper: function(e) {
                                    var t = e._currentElement.props,
                                        n = l.getNodeFromInstance(e);
                                    switch (t.type) {
                                        case "submit":
                                        case "reset":
                                            break;
                                        case "color":
                                        case "date":
                                        case "datetime":
                                        case "datetime-local":
                                        case "month":
                                        case "time":
                                        case "week":
                                            n.value = "", n.value = n.defaultValue;
                                            break;
                                        default:
                                            n.value = n.value
                                    }
                                    var r = n.name;
                                    "" !== r && (n.name = ""), n.defaultChecked = !n.defaultChecked, n.defaultChecked = !n.defaultChecked, "" !== r && (n.name = r)
                                }
                            });
                        t.exports = p
                    }, {
                        113: 113,
                        12: 12,
                        137: 137,
                        142: 142,
                        143: 143,
                        23: 23,
                        33: 33,
                        71: 71
                    }],
                    39: [function(e, t, n) {
                        "use strict";

                        function r(e) {
                            var t = "";
                            return i.Children.forEach(e, function(e) {
                                null != e && ("string" == typeof e || "number" == typeof e ? t += e : u || (u = !0))
                            }), t
                        }
                        var o = e(143),
                            i = e(121),
                            a = e(33),
                            s = e(40),
                            u = (e(142), !1),
                            l = {
                                mountWrapper: function(e, t, n) {
                                    var o = null;
                                    if (null != n) {
                                        var i = n;
                                        "optgroup" === i._tag && (i = i._hostParent), null != i && "select" === i._tag && (o = s.getSelectValueContext(i))
                                    }
                                    var a = null;
                                    if (null != o) {
                                        var u;
                                        if (u = null != t.value ? t.value + "" : r(t.children), a = !1, Array.isArray(o)) {
                                            for (var l = 0; l < o.length; l++)
                                                if ("" + o[l] === u) {
                                                    a = !0;
                                                    break
                                                }
                                        } else a = "" + o === u
                                    }
                                    e._wrapperState = {
                                        selected: a
                                    }
                                },
                                postMountWrapper: function(e) {
                                    var t = e._currentElement.props;
                                    if (null != t.value) {
                                        var n = a.getNodeFromInstance(e);
                                        n.setAttribute("value", t.value)
                                    }
                                },
                                getHostProps: function(e, t) {
                                    var n = o({
                                        selected: void 0,
                                        children: void 0
                                    }, t);
                                    null != e._wrapperState.selected && (n.selected = e._wrapperState.selected);
                                    var i = r(t.children);
                                    return i && (n.children = i), n
                                }
                            };
                        t.exports = l
                    }, {
                        121: 121,
                        142: 142,
                        143: 143,
                        33: 33,
                        40: 40
                    }],
                    40: [function(e, t, n) {
                        "use strict";

                        function r() {
                            if (this._rootNodeID && this._wrapperState.pendingUpdate) {
                                this._wrapperState.pendingUpdate = !1;
                                var e = this._currentElement.props,
                                    t = s.getValue(e);
                                null != t && o(this, Boolean(e.multiple), t)
                            }
                        }

                        function o(e, t, n) {
                            var r, o, i = u.getNodeFromInstance(e).options;
                            if (t) {
                                for (r = {}, o = 0; o < n.length; o++) r["" + n[o]] = !0;
                                for (o = 0; o < i.length; o++) {
                                    var a = r.hasOwnProperty(i[o].value);
                                    i[o].selected !== a && (i[o].selected = a)
                                }
                            } else {
                                for (r = "" + n, o = 0; o < i.length; o++)
                                    if (i[o].value === r) return void(i[o].selected = !0);
                                i.length && (i[0].selected = !0)
                            }
                        }

                        function i(e) {
                            var t = this._currentElement.props,
                                n = s.executeOnChange(t, e);
                            return this._rootNodeID && (this._wrapperState.pendingUpdate = !0), l.asap(r, this), n
                        }
                        var a = e(143),
                            s = e(23),
                            u = e(33),
                            l = e(71),
                            c = (e(142), !1),
                            p = {
                                getHostProps: function(e, t) {
                                    return a({}, t, {
                                        onChange: e._wrapperState.onChange,
                                        value: void 0
                                    })
                                },
                                mountWrapper: function(e, t) {
                                    var n = s.getValue(t);
                                    e._wrapperState = {
                                        pendingUpdate: !1,
                                        initialValue: null != n ? n : t.defaultValue,
                                        listeners: null,
                                        onChange: i.bind(e),
                                        wasMultiple: Boolean(t.multiple)
                                    }, void 0 === t.value || void 0 === t.defaultValue || c || (c = !0)
                                },
                                getSelectValueContext: function(e) {
                                    return e._wrapperState.initialValue
                                },
                                postUpdateWrapper: function(e) {
                                    var t = e._currentElement.props;
                                    e._wrapperState.initialValue = void 0;
                                    var n = e._wrapperState.wasMultiple;
                                    e._wrapperState.wasMultiple = Boolean(t.multiple);
                                    var r = s.getValue(t);
                                    null != r ? (e._wrapperState.pendingUpdate = !1, o(e, Boolean(t.multiple), r)) : n !== Boolean(t.multiple) && (null != t.defaultValue ? o(e, Boolean(t.multiple), t.defaultValue) : o(e, Boolean(t.multiple), t.multiple ? [] : ""))
                                }
                            };
                        t.exports = p
                    }, {
                        142: 142,
                        143: 143,
                        23: 23,
                        33: 33,
                        71: 71
                    }],
                    41: [function(e, t, n) {
                        "use strict";

                        function r(e, t, n, r) {
                            return e === n && t === r
                        }

                        function o(e) {
                            var t = document.selection,
                                n = t.createRange(),
                                r = n.text.length,
                                o = n.duplicate();
                            o.moveToElementText(e), o.setEndPoint("EndToStart", n);
                            var i = o.text.length,
                                a = i + r;
                            return {
                                start: i,
                                end: a
                            }
                        }

                        function i(e) {
                            var t = window.getSelection && window.getSelection();
                            if (!t || 0 === t.rangeCount) return null;
                            var n = t.anchorNode,
                                o = t.anchorOffset,
                                i = t.focusNode,
                                a = t.focusOffset,
                                s = t.getRangeAt(0);
                            try {
                                s.startContainer.nodeType, s.endContainer.nodeType
                            } catch (e) {
                                return null
                            }
                            var u = r(t.anchorNode, t.anchorOffset, t.focusNode, t.focusOffset),
                                l = u ? 0 : s.toString().length,
                                c = s.cloneRange();
                            c.selectNodeContents(e), c.setEnd(s.startContainer, s.startOffset);
                            var p = r(c.startContainer, c.startOffset, c.endContainer, c.endOffset),
                                d = p ? 0 : c.toString().length,
                                f = d + l,
                                h = document.createRange();
                            h.setStart(n, o), h.setEnd(i, a);
                            var m = h.collapsed;
                            return {
                                start: m ? f : d,
                                end: m ? d : f
                            }
                        }

                        function a(e, t) {
                            var n, r, o = document.selection.createRange().duplicate();
                            void 0 === t.end ? (n = t.start, r = n) : t.start > t.end ? (n = t.end, r = t.start) : (n = t.start, r = t.end), o.moveToElementText(e), o.moveStart("character", n), o.setEndPoint("EndToStart", o), o.moveEnd("character", r - n), o.select()
                        }

                        function s(e, t) {
                            if (window.getSelection) {
                                var n = window.getSelection(),
                                    r = e[c()].length,
                                    o = Math.min(t.start, r),
                                    i = void 0 === t.end ? o : Math.min(t.end, r);
                                if (!n.extend && o > i) {
                                    var a = i;
                                    i = o, o = a
                                }
                                var s = l(e, o),
                                    u = l(e, i);
                                if (s && u) {
                                    var p = document.createRange();
                                    p.setStart(s.node, s.offset), n.removeAllRanges(), o > i ? (n.addRange(p), n.extend(u.node, u.offset)) : (p.setEnd(u.node, u.offset), n.addRange(p))
                                }
                            }
                        }
                        var u = e(123),
                            l = e(106),
                            c = e(107),
                            p = u.canUseDOM && "selection" in document && !("getSelection" in window),
                            d = {
                                getOffsets: p ? o : i,
                                setOffsets: p ? a : s
                            };
                        t.exports = d
                    }, {
                        106: 106,
                        107: 107,
                        123: 123
                    }],
                    42: [function(e, t, n) {
                        "use strict";
                        var r = e(113),
                            o = e(143),
                            i = e(8),
                            a = e(9),
                            s = e(33),
                            u = e(95),
                            l = (e(137), e(119), function(e) {
                                this._currentElement = e, this._stringText = "" + e, this._hostNode = null, this._hostParent = null, this._domID = 0, this._mountIndex = 0, this._closingComment = null, this._commentNodes = null
                            });
                        o(l.prototype, {
                            mountComponent: function(e, t, n, r) {
                                var o = n._idCounter++,
                                    i = " react-text: " + o + " ",
                                    l = " /react-text ";
                                if (this._domID = o, this._hostParent = t, e.useCreateElement) {
                                    var c = n._ownerDocument,
                                        p = c.createComment(i),
                                        d = c.createComment(l),
                                        f = a(c.createDocumentFragment());
                                    return a.queueChild(f, a(p)), this._stringText && a.queueChild(f, a(c.createTextNode(this._stringText))), a.queueChild(f, a(d)), s.precacheNode(this, p), this._closingComment = d, f
                                }
                                var h = u(this._stringText);
                                return e.renderToStaticMarkup ? h : "<!--" + i + "-->" + h + "<!--" + l + "-->"
                            },
                            receiveComponent: function(e, t) {
                                if (e !== this._currentElement) {
                                    this._currentElement = e;
                                    var n = "" + e;
                                    if (n !== this._stringText) {
                                        this._stringText = n;
                                        var r = this.getHostNode();
                                        i.replaceDelimitedText(r[0], r[1], n)
                                    }
                                }
                            },
                            getHostNode: function() {
                                var e = this._commentNodes;
                                if (e) return e;
                                if (!this._closingComment)
                                    for (var t = s.getNodeFromInstance(this), n = t.nextSibling;;) {
                                        if (null == n ? r("67", this._domID) : void 0, 8 === n.nodeType && " /react-text " === n.nodeValue) {
                                            this._closingComment = n;
                                            break
                                        }
                                        n = n.nextSibling
                                    }
                                return e = [this._hostNode, this._closingComment], this._commentNodes = e, e
                            },
                            unmountComponent: function() {
                                this._closingComment = null, this._commentNodes = null, s.uncacheNode(this)
                            }
                        }), t.exports = l
                    }, {
                        113: 113,
                        119: 119,
                        137: 137,
                        143: 143,
                        33: 33,
                        8: 8,
                        9: 9,
                        95: 95
                    }],
                    43: [function(e, t, n) {
                        "use strict";

                        function r() {
                            this._rootNodeID && c.updateWrapper(this)
                        }

                        function o(e) {
                            var t = this._currentElement.props,
                                n = s.executeOnChange(t, e);
                            return l.asap(r, this), n
                        }
                        var i = e(113),
                            a = e(143),
                            s = e(23),
                            u = e(33),
                            l = e(71),
                            c = (e(137), e(142), {
                                getHostProps: function(e, t) {
                                    null != t.dangerouslySetInnerHTML ? i("91") : void 0;
                                    var n = a({}, t, {
                                        value: void 0,
                                        defaultValue: void 0,
                                        children: "" + e._wrapperState.initialValue,
                                        onChange: e._wrapperState.onChange
                                    });
                                    return n
                                },
                                mountWrapper: function(e, t) {
                                    var n = s.getValue(t),
                                        r = n;
                                    if (null == n) {
                                        var a = t.defaultValue,
                                            u = t.children;
                                        null != u && (null != a ? i("92") : void 0, Array.isArray(u) && (u.length <= 1 ? void 0 : i("93"), u = u[0]), a = "" + u), null == a && (a = ""), r = a
                                    }
                                    e._wrapperState = {
                                        initialValue: "" + r,
                                        listeners: null,
                                        onChange: o.bind(e)
                                    }
                                },
                                updateWrapper: function(e) {
                                    var t = e._currentElement.props,
                                        n = u.getNodeFromInstance(e),
                                        r = s.getValue(t);
                                    if (null != r) {
                                        var o = "" + r;
                                        o !== n.value && (n.value = o), null == t.defaultValue && (n.defaultValue = o)
                                    }
                                    null != t.defaultValue && (n.defaultValue = t.defaultValue)
                                },
                                postMountWrapper: function(e) {
                                    var t = u.getNodeFromInstance(e),
                                        n = t.textContent;
                                    n === e._wrapperState.initialValue && (t.value = n)
                                }
                            });
                        t.exports = c
                    }, {
                        113: 113,
                        137: 137,
                        142: 142,
                        143: 143,
                        23: 23,
                        33: 33,
                        71: 71
                    }],
                    44: [function(e, t, n) {
                        "use strict";

                        function r(e, t) {
                            "_hostNode" in e ? void 0 : u("33"), "_hostNode" in t ? void 0 : u("33");
                            for (var n = 0, r = e; r; r = r._hostParent) n++;
                            for (var o = 0, i = t; i; i = i._hostParent) o++;
                            for (; n - o > 0;) e = e._hostParent, n--;
                            for (; o - n > 0;) t = t._hostParent, o--;
                            for (var a = n; a--;) {
                                if (e === t) return e;
                                e = e._hostParent, t = t._hostParent
                            }
                            return null
                        }

                        function o(e, t) {
                            "_hostNode" in e ? void 0 : u("35"), "_hostNode" in t ? void 0 : u("35");
                            for (; t;) {
                                if (t === e) return !0;
                                t = t._hostParent
                            }
                            return !1
                        }

                        function i(e) {
                            return "_hostNode" in e ? void 0 : u("36"), e._hostParent
                        }

                        function a(e, t, n) {
                            for (var r = []; e;) r.push(e), e = e._hostParent;
                            var o;
                            for (o = r.length; o-- > 0;) t(r[o], "captured", n);
                            for (o = 0; o < r.length; o++) t(r[o], "bubbled", n)
                        }

                        function s(e, t, n, o, i) {
                            for (var a = e && t ? r(e, t) : null, s = []; e && e !== a;) s.push(e), e = e._hostParent;
                            for (var u = []; t && t !== a;) u.push(t), t = t._hostParent;
                            var l;
                            for (l = 0; l < s.length; l++) n(s[l], "bubbled", o);
                            for (l = u.length; l-- > 0;) n(u[l], "captured", i)
                        }
                        var u = e(113);
                        e(137);
                        t.exports = {
                            isAncestor: o,
                            getLowestCommonAncestor: r,
                            getParentInstance: i,
                            traverseTwoPhase: a,
                            traverseEnterLeave: s
                        }
                    }, {
                        113: 113,
                        137: 137
                    }],
                    45: [function(e, t, n) {
                        "use strict";
                        var r = e(121),
                            o = e(30),
                            i = o;
                        r.addons && (r.__SECRET_INJECTED_REACT_DOM_DO_NOT_USE_OR_YOU_WILL_BE_FIRED = i), t.exports = i
                    }, {
                        121: 121,
                        30: 30
                    }],
                    46: [function(e, t, n) {
                        "use strict";

                        function r() {
                            this.reinitializeTransaction()
                        }
                        var o = e(143),
                            i = e(71),
                            a = e(89),
                            s = e(129),
                            u = {
                                initialize: s,
                                close: function() {
                                    d.isBatchingUpdates = !1
                                }
                            },
                            l = {
                                initialize: s,
                                close: i.flushBatchedUpdates.bind(i)
                            },
                            c = [l, u];
                        o(r.prototype, a, {
                            getTransactionWrappers: function() {
                                return c
                            }
                        });
                        var p = new r,
                            d = {
                                isBatchingUpdates: !1,
                                batchedUpdates: function(e, t, n, r, o, i) {
                                    var a = d.isBatchingUpdates;
                                    return d.isBatchingUpdates = !0, a ? e(t, n, r, o, i) : p.perform(e, null, t, n, r, o, i)
                                }
                            };
                        t.exports = d
                    }, {
                        129: 129,
                        143: 143,
                        71: 71,
                        89: 89
                    }],
                    47: [function(e, t, n) {
                        "use strict";

                        function r() {
                            x || (x = !0, y.EventEmitter.injectReactEventListener(g), y.EventPluginHub.injectEventPluginOrder(s), y.EventPluginUtils.injectComponentTree(d), y.EventPluginUtils.injectTreeTraversal(h), y.EventPluginHub.injectEventPluginsByName({
                                SimpleEventPlugin: E,
                                EnterLeaveEventPlugin: u,
                                ChangeEventPlugin: a,
                                SelectEventPlugin: b,
                                BeforeInputEventPlugin: i
                            }), y.HostComponent.injectGenericComponentClass(p), y.HostComponent.injectTextComponentClass(m), y.DOMProperty.injectDOMPropertyConfig(o), y.DOMProperty.injectDOMPropertyConfig(l), y.DOMProperty.injectDOMPropertyConfig(C), y.EmptyComponent.injectEmptyComponentFactory(function(e) {
                                return new f(e)
                            }), y.Updates.injectReconcileTransaction(_), y.Updates.injectBatchingStrategy(v), y.Component.injectEnvironment(c))
                        }
                        var o = e(1),
                            i = e(3),
                            a = e(7),
                            s = e(14),
                            u = e(15),
                            l = e(21),
                            c = e(27),
                            p = e(31),
                            d = e(33),
                            f = e(35),
                            h = e(44),
                            m = e(42),
                            v = e(46),
                            g = e(52),
                            y = e(55),
                            _ = e(65),
                            C = e(73),
                            b = e(74),
                            E = e(75),
                            x = !1;
                        t.exports = {
                            inject: r
                        }
                    }, {
                        1: 1,
                        14: 14,
                        15: 15,
                        21: 21,
                        27: 27,
                        3: 3,
                        31: 31,
                        33: 33,
                        35: 35,
                        42: 42,
                        44: 44,
                        46: 46,
                        52: 52,
                        55: 55,
                        65: 65,
                        7: 7,
                        73: 73,
                        74: 74,
                        75: 75
                    }],
                    48: [function(e, t, n) {
                        "use strict";
                        var r = "function" == typeof Symbol && Symbol.for && Symbol.for("react.element") || 60103;
                        t.exports = r
                    }, {}],
                    49: [function(e, t, n) {
                        "use strict";
                        var r, o = {
                                injectEmptyComponentFactory: function(e) {
                                    r = e
                                }
                            },
                            i = {
                                create: function(e) {
                                    return r(e)
                                }
                            };
                        i.injection = o, t.exports = i
                    }, {}],
                    50: [function(e, t, n) {
                        "use strict";

                        function r(e, t, n) {
                            try {
                                t(n)
                            } catch (e) {
                                null === o && (o = e)
                            }
                        }
                        var o = null,
                            i = {
                                invokeGuardedCallback: r,
                                invokeGuardedCallbackWithCatch: r,
                                rethrowCaughtError: function() {
                                    if (o) {
                                        var e = o;
                                        throw o = null, e
                                    }
                                }
                            };
                        t.exports = i
                    }, {}],
                    51: [function(e, t, n) {
                        "use strict";

                        function r(e) {
                            o.enqueueEvents(e), o.processEventQueue(!1)
                        }
                        var o = e(16),
                            i = {
                                handleTopLevel: function(e, t, n, i) {
                                    var a = o.extractEvents(e, t, n, i);
                                    r(a)
                                }
                            };
                        t.exports = i
                    }, {
                        16: 16
                    }],
                    52: [function(e, t, n) {
                        "use strict";

                        function r(e) {
                            for (; e._hostParent;) e = e._hostParent;
                            var t = p.getNodeFromInstance(e),
                                n = t.parentNode;
                            return p.getClosestInstanceFromNode(n)
                        }

                        function o(e, t) {
                            this.topLevelType = e, this.nativeEvent = t, this.ancestors = []
                        }

                        function i(e) {
                            var t = f(e.nativeEvent),
                                n = p.getClosestInstanceFromNode(t),
                                o = n;
                            do e.ancestors.push(o), o = o && r(o); while (o);
                            for (var i = 0; i < e.ancestors.length; i++) n = e.ancestors[i], m._handleTopLevel(e.topLevelType, n, e.nativeEvent, f(e.nativeEvent))
                        }

                        function a(e) {
                            var t = h(window);
                            e(t)
                        }
                        var s = e(143),
                            u = e(122),
                            l = e(123),
                            c = e(24),
                            p = e(33),
                            d = e(71),
                            f = e(102),
                            h = e(134);
                        s(o.prototype, {
                            destructor: function() {
                                this.topLevelType = null, this.nativeEvent = null, this.ancestors.length = 0
                            }
                        }), c.addPoolingTo(o, c.twoArgumentPooler);
                        var m = {
                            _enabled: !0,
                            _handleTopLevel: null,
                            WINDOW_HANDLE: l.canUseDOM ? window : null,
                            setHandleTopLevel: function(e) {
                                m._handleTopLevel = e
                            },
                            setEnabled: function(e) {
                                m._enabled = !!e
                            },
                            isEnabled: function() {
                                return m._enabled
                            },
                            trapBubbledEvent: function(e, t, n) {
                                return n ? u.listen(n, t, m.dispatchEvent.bind(null, e)) : null
                            },
                            trapCapturedEvent: function(e, t, n) {
                                return n ? u.capture(n, t, m.dispatchEvent.bind(null, e)) : null
                            },
                            monitorScrollValue: function(e) {
                                var t = a.bind(null, e);
                                u.listen(window, "scroll", t)
                            },
                            dispatchEvent: function(e, t) {
                                if (m._enabled) {
                                    var n = o.getPooled(e, t);
                                    try {
                                        d.batchedUpdates(i, n)
                                    } finally {
                                        o.release(n)
                                    }
                                }
                            }
                        };
                        t.exports = m
                    }, {
                        102: 102,
                        122: 122,
                        123: 123,
                        134: 134,
                        143: 143,
                        24: 24,
                        33: 33,
                        71: 71
                    }],
                    53: [function(e, t, n) {
                        "use strict";
                        var r = {
                            logTopLevelRenders: !1
                        };
                        t.exports = r
                    }, {}],
                    54: [function(e, t, n) {
                        "use strict";

                        function r(e) {
                            return s ? void 0 : a("111", e.type), new s(e)
                        }

                        function o(e) {
                            return new u(e)
                        }

                        function i(e) {
                            return e instanceof u
                        }
                        var a = e(113),
                            s = (e(137), null),
                            u = null,
                            l = {
                                injectGenericComponentClass: function(e) {
                                    s = e
                                },
                                injectTextComponentClass: function(e) {
                                    u = e
                                }
                            },
                            c = {
                                createInternalComponent: r,
                                createInstanceForText: o,
                                isTextComponent: i,
                                injection: l
                            };
                        t.exports = c
                    }, {
                        113: 113,
                        137: 137
                    }],
                    55: [function(e, t, n) {
                        "use strict";
                        var r = e(11),
                            o = e(16),
                            i = e(18),
                            a = e(28),
                            s = e(49),
                            u = e(25),
                            l = e(54),
                            c = e(71),
                            p = {
                                Component: a.injection,
                                DOMProperty: r.injection,
                                EmptyComponent: s.injection,
                                EventPluginHub: o.injection,
                                EventPluginUtils: i.injection,
                                EventEmitter: u.injection,
                                HostComponent: l.injection,
                                Updates: c.injection
                            };
                        t.exports = p
                    }, {
                        11: 11,
                        16: 16,
                        18: 18,
                        25: 25,
                        28: 28,
                        49: 49,
                        54: 54,
                        71: 71
                    }],
                    56: [function(e, t, n) {
                        "use strict";

                        function r(e) {
                            return i(document.documentElement, e)
                        }
                        var o = e(41),
                            i = e(126),
                            a = e(131),
                            s = e(132),
                            u = {
                                hasSelectionCapabilities: function(e) {
                                    var t = e && e.nodeName && e.nodeName.toLowerCase();
                                    return t && ("input" === t && "text" === e.type || "textarea" === t || "true" === e.contentEditable)
                                },
                                getSelectionInformation: function() {
                                    var e = s();
                                    return {
                                        focusedElem: e,
                                        selectionRange: u.hasSelectionCapabilities(e) ? u.getSelection(e) : null
                                    }
                                },
                                restoreSelection: function(e) {
                                    var t = s(),
                                        n = e.focusedElem,
                                        o = e.selectionRange;
                                    t !== n && r(n) && (u.hasSelectionCapabilities(n) && u.setSelection(n, o), a(n))
                                },
                                getSelection: function(e) {
                                    var t;
                                    if ("selectionStart" in e) t = {
                                        start: e.selectionStart,
                                        end: e.selectionEnd
                                    };
                                    else if (document.selection && e.nodeName && "input" === e.nodeName.toLowerCase()) {
                                        var n = document.selection.createRange();
                                        n.parentElement() === e && (t = {
                                            start: -n.moveStart("character", -e.value.length),
                                            end: -n.moveEnd("character", -e.value.length)
                                        })
                                    } else t = o.getOffsets(e);
                                    return t || {
                                        start: 0,
                                        end: 0
                                    }
                                },
                                setSelection: function(e, t) {
                                    var n = t.start,
                                        r = t.end;
                                    if (void 0 === r && (r = n), "selectionStart" in e) e.selectionStart = n, e.selectionEnd = Math.min(r, e.value.length);
                                    else if (document.selection && e.nodeName && "input" === e.nodeName.toLowerCase()) {
                                        var i = e.createTextRange();
                                        i.collapse(!0), i.moveStart("character", n), i.moveEnd("character", r - n), i.select()
                                    } else o.setOffsets(e, t)
                                }
                            };
                        t.exports = u
                    }, {
                        126: 126,
                        131: 131,
                        132: 132,
                        41: 41
                    }],
                    57: [function(e, t, n) {
                        "use strict";
                        var r = {
                            remove: function(e) {
                                e._reactInternalInstance = void 0
                            },
                            get: function(e) {
                                return e._reactInternalInstance
                            },
                            has: function(e) {
                                return void 0 !== e._reactInternalInstance
                            },
                            set: function(e, t) {
                                e._reactInternalInstance = t
                            }
                        };
                        t.exports = r
                    }, {}],
                    58: [function(e, t, n) {
                        "use strict";
                        var r = null;
                        t.exports = {
                            debugTool: r
                        }
                    }, {}],
                    59: [function(e, t, n) {
                        "use strict";
                        var r = e(92),
                            o = /\/?>/,
                            i = /^<\!\-\-/,
                            a = {
                                CHECKSUM_ATTR_NAME: "data-react-checksum",
                                addChecksumToMarkup: function(e) {
                                    var t = r(e);
                                    return i.test(e) ? e : e.replace(o, " " + a.CHECKSUM_ATTR_NAME + '="' + t + '"$&')
                                },
                                canReuseMarkup: function(e, t) {
                                    var n = t.getAttribute(a.CHECKSUM_ATTR_NAME);
                                    n = n && parseInt(n, 10);
                                    var o = r(e);
                                    return o === n
                                }
                            };
                        t.exports = a
                    }, {
                        92: 92
                    }],
                    60: [function(e, t, n) {
                        "use strict";

                        function r(e, t) {
                            for (var n = Math.min(e.length, t.length), r = 0; r < n; r++)
                                if (e.charAt(r) !== t.charAt(r)) return r;
                            return e.length === t.length ? -1 : n
                        }

                        function o(e) {
                            return e ? e.nodeType === A ? e.documentElement : e.firstChild : null
                        }

                        function i(e) {
                            return e.getAttribute && e.getAttribute(I) || ""
                        }

                        function a(e, t, n, r, o) {
                            var i;
                            if (b.logTopLevelRenders) {
                                var a = e._currentElement.props.child,
                                    s = a.type;
                                i = "React mount: " + ("string" == typeof s ? s : s.displayName || s.name), console.time(i)
                            }
                            var u = w.mountComponent(e, n, null, _(e, t), o, 0);
                            i && console.timeEnd(i), e._renderedComponent._topLevelWrapper = e, V._mountImageIntoNode(u, t, e, r, n)
                        }

                        function s(e, t, n, r) {
                            var o = k.ReactReconcileTransaction.getPooled(!n && C.useCreateElement);
                            o.perform(a, null, e, t, o, n, r), k.ReactReconcileTransaction.release(o)
                        }

                        function u(e, t, n) {
                            for (w.unmountComponent(e, n), t.nodeType === A && (t = t.documentElement); t.lastChild;) t.removeChild(t.lastChild)
                        }

                        function l(e) {
                            var t = o(e);
                            if (t) {
                                var n = y.getInstanceFromNode(t);
                                return !(!n || !n._hostParent)
                            }
                        }

                        function c(e) {
                            return !(!e || e.nodeType !== R && e.nodeType !== A && e.nodeType !== D)
                        }

                        function p(e) {
                            var t = o(e),
                                n = t && y.getInstanceFromNode(t);
                            return n && !n._hostParent ? n : null
                        }

                        function d(e) {
                            var t = p(e);
                            return t ? t._hostContainerInfo._topLevelWrapper : null
                        }
                        var f = e(113),
                            h = e(9),
                            m = e(11),
                            v = e(121),
                            g = e(25),
                            y = (e(120), e(33)),
                            _ = e(34),
                            C = e(36),
                            b = e(53),
                            E = e(57),
                            x = (e(58), e(59)),
                            w = e(66),
                            T = e(70),
                            k = e(71),
                            P = e(130),
                            N = e(109),
                            S = (e(137), e(115)),
                            M = e(117),
                            I = (e(142), m.ID_ATTRIBUTE_NAME),
                            O = m.ROOT_ATTRIBUTE_NAME,
                            R = 1,
                            A = 9,
                            D = 11,
                            L = {},
                            U = 1,
                            F = function() {
                                this.rootID = U++
                            };
                        F.prototype.isReactComponent = {}, F.prototype.render = function() {
                            return this.props.child
                        }, F.isReactTopLevelWrapper = !0;
                        var V = {
                            TopLevelWrapper: F,
                            _instancesByReactRootID: L,
                            scrollMonitor: function(e, t) {
                                t()
                            },
                            _updateRootComponent: function(e, t, n, r, o) {
                                return V.scrollMonitor(r, function() {
                                    T.enqueueElementInternal(e, t, n), o && T.enqueueCallbackInternal(e, o)
                                }), e
                            },
                            _renderNewRootComponent: function(e, t, n, r) {
                                c(t) ? void 0 : f("37"), g.ensureScrollValueMonitoring();
                                var o = N(e, !1);
                                k.batchedUpdates(s, o, t, n, r);
                                var i = o._instance.rootID;
                                return L[i] = o, o
                            },
                            renderSubtreeIntoContainer: function(e, t, n, r) {
                                return null != e && E.has(e) ? void 0 : f("38"), V._renderSubtreeIntoContainer(e, t, n, r)
                            },
                            _renderSubtreeIntoContainer: function(e, t, n, r) {
                                T.validateCallback(r, "ReactDOM.render"), v.isValidElement(t) ? void 0 : f("39", "string" == typeof t ? " Instead of passing a string like 'div', pass React.createElement('div') or <div />." : "function" == typeof t ? " Instead of passing a class like Foo, pass React.createElement(Foo) or <Foo />." : null != t && void 0 !== t.props ? " This may be caused by unintentionally loading two independent copies of React." : "");
                                var a, s = v.createElement(F, {
                                    child: t
                                });
                                if (e) {
                                    var u = E.get(e);
                                    a = u._processChildContext(u._context)
                                } else a = P;
                                var c = d(n);
                                if (c) {
                                    var p = c._currentElement,
                                        h = p.props.child;
                                    if (M(h, t)) {
                                        var m = c._renderedComponent.getPublicInstance(),
                                            g = r && function() {
                                                r.call(m)
                                            };
                                        return V._updateRootComponent(c, s, a, n, g), m
                                    }
                                    V.unmountComponentAtNode(n)
                                }
                                var y = o(n),
                                    _ = y && !!i(y),
                                    C = l(n),
                                    b = _ && !c && !C,
                                    x = V._renderNewRootComponent(s, n, b, a)._renderedComponent.getPublicInstance();
                                return r && r.call(x), x
                            },
                            render: function(e, t, n) {
                                return V._renderSubtreeIntoContainer(null, e, t, n)
                            },
                            unmountComponentAtNode: function(e) {
                                c(e) ? void 0 : f("40");
                                var t = d(e);
                                return t ? (delete L[t._instance.rootID], k.batchedUpdates(u, t, e, !1), !0) : (l(e), 1 === e.nodeType && e.hasAttribute(O), !1)
                            },
                            _mountImageIntoNode: function(e, t, n, i, a) {
                                if (c(t) ? void 0 : f("41"), i) {
                                    var s = o(t);
                                    if (x.canReuseMarkup(e, s)) return void y.precacheNode(n, s);
                                    var u = s.getAttribute(x.CHECKSUM_ATTR_NAME);
                                    s.removeAttribute(x.CHECKSUM_ATTR_NAME);
                                    var l = s.outerHTML;
                                    s.setAttribute(x.CHECKSUM_ATTR_NAME, u);
                                    var p = e,
                                        d = r(p, l),
                                        m = " (client) " + p.substring(d - 20, d + 20) + "\n (server) " + l.substring(d - 20, d + 20);
                                    t.nodeType === A ? f("42", m) : void 0
                                }
                                if (t.nodeType === A ? f("43") : void 0, a.useCreateElement) {
                                    for (; t.lastChild;) t.removeChild(t.lastChild);
                                    h.insertTreeBefore(t, e, null)
                                } else S(t, e), y.precacheNode(n, t.firstChild)
                            }
                        };
                        t.exports = V
                    }, {
                        109: 109,
                        11: 11,
                        113: 113,
                        115: 115,
                        117: 117,
                        120: 120,
                        121: 121,
                        130: 130,
                        137: 137,
                        142: 142,
                        25: 25,
                        33: 33,
                        34: 34,
                        36: 36,
                        53: 53,
                        57: 57,
                        58: 58,
                        59: 59,
                        66: 66,
                        70: 70,
                        71: 71,
                        9: 9
                    }],
                    61: [function(e, t, n) {
                        "use strict";

                        function r(e, t, n) {
                            return {
                                type: "INSERT_MARKUP",
                                content: e,
                                fromIndex: null,
                                fromNode: null,
                                toIndex: n,
                                afterNode: t
                            }
                        }

                        function o(e, t, n) {
                            return {
                                type: "MOVE_EXISTING",
                                content: null,
                                fromIndex: e._mountIndex,
                                fromNode: d.getHostNode(e),
                                toIndex: n,
                                afterNode: t
                            }
                        }

                        function i(e, t) {
                            return {
                                type: "REMOVE_NODE",
                                content: null,
                                fromIndex: e._mountIndex,
                                fromNode: t,
                                toIndex: null,
                                afterNode: null
                            }
                        }

                        function a(e) {
                            return {
                                type: "SET_MARKUP",
                                content: e,
                                fromIndex: null,
                                fromNode: null,
                                toIndex: null,
                                afterNode: null
                            }
                        }

                        function s(e) {
                            return {
                                type: "TEXT_CONTENT",
                                content: e,
                                fromIndex: null,
                                fromNode: null,
                                toIndex: null,
                                afterNode: null
                            }
                        }

                        function u(e, t) {
                            return t && (e = e || [], e.push(t)), e
                        }

                        function l(e, t) {
                            p.processChildrenUpdates(e, t)
                        }
                        var c = e(113),
                            p = e(28),
                            d = (e(57), e(58), e(120), e(66)),
                            f = e(26),
                            h = (e(129), e(97)),
                            m = (e(137), {
                                Mixin: {
                                    _reconcilerInstantiateChildren: function(e, t, n) {
                                        return f.instantiateChildren(e, t, n)
                                    },
                                    _reconcilerUpdateChildren: function(e, t, n, r, o, i) {
                                        var a, s = 0;
                                        return a = h(t, s), f.updateChildren(e, a, n, r, o, this, this._hostContainerInfo, i, s), a
                                    },
                                    mountChildren: function(e, t, n) {
                                        var r = this._reconcilerInstantiateChildren(e, t, n);
                                        this._renderedChildren = r;
                                        var o = [],
                                            i = 0;
                                        for (var a in r)
                                            if (r.hasOwnProperty(a)) {
                                                var s = r[a],
                                                    u = 0,
                                                    l = d.mountComponent(s, t, this, this._hostContainerInfo, n, u);
                                                s._mountIndex = i++, o.push(l)
                                            }
                                        return o
                                    },
                                    updateTextContent: function(e) {
                                        var t = this._renderedChildren;
                                        f.unmountChildren(t, !1);
                                        for (var n in t) t.hasOwnProperty(n) && c("118");
                                        var r = [s(e)];
                                        l(this, r)
                                    },
                                    updateMarkup: function(e) {
                                        var t = this._renderedChildren;
                                        f.unmountChildren(t, !1);
                                        for (var n in t) t.hasOwnProperty(n) && c("118");
                                        var r = [a(e)];
                                        l(this, r)
                                    },
                                    updateChildren: function(e, t, n) {
                                        this._updateChildren(e, t, n)
                                    },
                                    _updateChildren: function(e, t, n) {
                                        var r = this._renderedChildren,
                                            o = {},
                                            i = [],
                                            a = this._reconcilerUpdateChildren(r, e, i, o, t, n);
                                        if (a || r) {
                                            var s, c = null,
                                                p = 0,
                                                f = 0,
                                                h = 0,
                                                m = null;
                                            for (s in a)
                                                if (a.hasOwnProperty(s)) {
                                                    var v = r && r[s],
                                                        g = a[s];
                                                    v === g ? (c = u(c, this.moveChild(v, m, p, f)), f = Math.max(v._mountIndex, f), v._mountIndex = p) : (v && (f = Math.max(v._mountIndex, f)), c = u(c, this._mountChildAtIndex(g, i[h], m, p, t, n)), h++), p++, m = d.getHostNode(g)
                                                }
                                            for (s in o) o.hasOwnProperty(s) && (c = u(c, this._unmountChild(r[s], o[s])));
                                            c && l(this, c), this._renderedChildren = a
                                        }
                                    },
                                    unmountChildren: function(e) {
                                        var t = this._renderedChildren;
                                        f.unmountChildren(t, e), this._renderedChildren = null
                                    },
                                    moveChild: function(e, t, n, r) {
                                        if (e._mountIndex < r) return o(e, t, n)
                                    },
                                    createChild: function(e, t, n) {
                                        return r(n, t, e._mountIndex)
                                    },
                                    removeChild: function(e, t) {
                                        return i(e, t)
                                    },
                                    _mountChildAtIndex: function(e, t, n, r, o, i) {
                                        return e._mountIndex = r, this.createChild(e, n, t)
                                    },
                                    _unmountChild: function(e, t) {
                                        var n = this.removeChild(e, t);
                                        return e._mountIndex = null, n
                                    }
                                }
                            });
                        t.exports = m
                    }, {
                        113: 113,
                        120: 120,
                        129: 129,
                        137: 137,
                        26: 26,
                        28: 28,
                        57: 57,
                        58: 58,
                        66: 66,
                        97: 97
                    }],
                    62: [function(e, t, n) {
                        "use strict";
                        var r = e(113),
                            o = e(121),
                            i = (e(137), {
                                HOST: 0,
                                COMPOSITE: 1,
                                EMPTY: 2,
                                getType: function(e) {
                                    return null === e || e === !1 ? i.EMPTY : o.isValidElement(e) ? "function" == typeof e.type ? i.COMPOSITE : i.HOST : void r("26", e)
                                }
                            });
                        t.exports = i
                    }, {
                        113: 113,
                        121: 121,
                        137: 137
                    }],
                    63: [function(e, t, n) {
                        "use strict";

                        function r(e) {
                            return !(!e || "function" != typeof e.attachRef || "function" != typeof e.detachRef)
                        }
                        var o = e(113),
                            i = (e(137), {
                                addComponentAsRefTo: function(e, t, n) {
                                    r(n) ? void 0 : o("119"), n.attachRef(t, e)
                                },
                                removeComponentAsRefFrom: function(e, t, n) {
                                    r(n) ? void 0 : o("120");
                                    var i = n.getPublicInstance();
                                    i && i.refs[t] === e.getPublicInstance() && n.detachRef(t)
                                }
                            });
                        t.exports = i
                    }, {
                        113: 113,
                        137: 137
                    }],
                    64: [function(e, t, n) {
                        "use strict";
                        var r = "SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";
                        t.exports = r
                    }, {}],
                    65: [function(e, t, n) {
                        "use strict";

                        function r(e) {
                            this.reinitializeTransaction(), this.renderToStaticMarkup = !1, this.reactMountReady = i.getPooled(null), this.useCreateElement = e
                        }
                        var o = e(143),
                            i = e(6),
                            a = e(24),
                            s = e(25),
                            u = e(56),
                            l = (e(58), e(89)),
                            c = e(70),
                            p = {
                                initialize: u.getSelectionInformation,
                                close: u.restoreSelection
                            },
                            d = {
                                initialize: function() {
                                    var e = s.isEnabled();
                                    return s.setEnabled(!1), e
                                },
                                close: function(e) {
                                    s.setEnabled(e)
                                }
                            },
                            f = {
                                initialize: function() {
                                    this.reactMountReady.reset()
                                },
                                close: function() {
                                    this.reactMountReady.notifyAll()
                                }
                            },
                            h = [p, d, f],
                            m = {
                                getTransactionWrappers: function() {
                                    return h
                                },
                                getReactMountReady: function() {
                                    return this.reactMountReady
                                },
                                getUpdateQueue: function() {
                                    return c
                                },
                                checkpoint: function() {
                                    return this.reactMountReady.checkpoint()
                                },
                                rollback: function(e) {
                                    this.reactMountReady.rollback(e)
                                },
                                destructor: function() {
                                    i.release(this.reactMountReady), this.reactMountReady = null
                                }
                            };
                        o(r.prototype, l, m), a.addPoolingTo(r), t.exports = r
                    }, {
                        143: 143,
                        24: 24,
                        25: 25,
                        56: 56,
                        58: 58,
                        6: 6,
                        70: 70,
                        89: 89
                    }],
                    66: [function(e, t, n) {
                        "use strict";

                        function r() {
                            o.attachRefs(this, this._currentElement)
                        }
                        var o = e(67),
                            i = (e(58), e(142), {
                                mountComponent: function(e, t, n, o, i, a) {
                                    var s = e.mountComponent(t, n, o, i, a);
                                    return e._currentElement && null != e._currentElement.ref && t.getReactMountReady().enqueue(r, e), s
                                },
                                getHostNode: function(e) {
                                    return e.getHostNode()
                                },
                                unmountComponent: function(e, t) {
                                    o.detachRefs(e, e._currentElement), e.unmountComponent(t)
                                },
                                receiveComponent: function(e, t, n, i) {
                                    var a = e._currentElement;
                                    if (t !== a || i !== e._context) {
                                        var s = o.shouldUpdateRefs(a, t);
                                        s && o.detachRefs(e, a), e.receiveComponent(t, n, i), s && e._currentElement && null != e._currentElement.ref && n.getReactMountReady().enqueue(r, e)
                                    }
                                },
                                performUpdateIfNecessary: function(e, t, n) {
                                    e._updateBatchNumber === n && e.performUpdateIfNecessary(t)
                                }
                            });
                        t.exports = i
                    }, {
                        142: 142,
                        58: 58,
                        67: 67
                    }],
                    67: [function(e, t, n) {
                        "use strict";

                        function r(e, t, n) {
                            "function" == typeof e ? e(t.getPublicInstance()) : i.addComponentAsRefTo(t, e, n)
                        }

                        function o(e, t, n) {
                            "function" == typeof e ? e(null) : i.removeComponentAsRefFrom(t, e, n)
                        }
                        var i = e(63),
                            a = {};
                        a.attachRefs = function(e, t) {
                            if (null !== t && "object" == typeof t) {
                                var n = t.ref;
                                null != n && r(n, e, t._owner)
                            }
                        }, a.shouldUpdateRefs = function(e, t) {
                            var n = null,
                                r = null;
                            null !== e && "object" == typeof e && (n = e.ref, r = e._owner);
                            var o = null,
                                i = null;
                            return null !== t && "object" == typeof t && (o = t.ref, i = t._owner), n !== o || "string" == typeof o && i !== r
                        }, a.detachRefs = function(e, t) {
                            if (null !== t && "object" == typeof t) {
                                var n = t.ref;
                                null != n && o(n, e, t._owner)
                            }
                        }, t.exports = a
                    }, {
                        63: 63
                    }],
                    68: [function(e, t, n) {
                        "use strict";

                        function r(e) {
                            this.reinitializeTransaction(), this.renderToStaticMarkup = e, this.useCreateElement = !1, this.updateQueue = new s(this)
                        }
                        var o = e(143),
                            i = e(24),
                            a = e(89),
                            s = (e(58), e(69)),
                            u = [],
                            l = {
                                enqueue: function() {}
                            },
                            c = {
                                getTransactionWrappers: function() {
                                    return u
                                },
                                getReactMountReady: function() {
                                    return l
                                },
                                getUpdateQueue: function() {
                                    return this.updateQueue
                                },
                                destructor: function() {},
                                checkpoint: function() {},
                                rollback: function() {}
                            };
                        o(r.prototype, a, c), i.addPoolingTo(r), t.exports = r
                    }, {
                        143: 143,
                        24: 24,
                        58: 58,
                        69: 69,
                        89: 89
                    }],
                    69: [function(e, t, n) {
                        "use strict";

                        function r(e, t) {
                            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                        }

                        function o(e, t) {}
                        var i = e(70),
                            a = (e(142), function() {
                                function e(t) {
                                    r(this, e), this.transaction = t
                                }
                                return e.prototype.isMounted = function(e) {
                                    return !1
                                }, e.prototype.enqueueCallback = function(e, t, n) {
                                    this.transaction.isInTransaction() && i.enqueueCallback(e, t, n)
                                }, e.prototype.enqueueForceUpdate = function(e) {
                                    this.transaction.isInTransaction() ? i.enqueueForceUpdate(e) : o(e, "forceUpdate")
                                }, e.prototype.enqueueReplaceState = function(e, t) {
                                    this.transaction.isInTransaction() ? i.enqueueReplaceState(e, t) : o(e, "replaceState")
                                }, e.prototype.enqueueSetState = function(e, t) {
                                    this.transaction.isInTransaction() ? i.enqueueSetState(e, t) : o(e, "setState")
                                }, e
                            }());
                        t.exports = a
                    }, {
                        142: 142,
                        70: 70
                    }],
                    70: [function(e, t, n) {
                        "use strict";

                        function r(e) {
                            u.enqueueUpdate(e)
                        }

                        function o(e) {
                            var t = typeof e;
                            if ("object" !== t) return t;
                            var n = e.constructor && e.constructor.name || t,
                                r = Object.keys(e);
                            return r.length > 0 && r.length < 20 ? n + " (keys: " + r.join(", ") + ")" : n
                        }

                        function i(e, t) {
                            var n = s.get(e);
                            return n ? n : null
                        }
                        var a = e(113),
                            s = (e(120), e(57)),
                            u = (e(58), e(71)),
                            l = (e(137), e(142), {
                                isMounted: function(e) {
                                    var t = s.get(e);
                                    return !!t && !!t._renderedComponent
                                },
                                enqueueCallback: function(e, t, n) {
                                    l.validateCallback(t, n);
                                    var o = i(e);
                                    return o ? (o._pendingCallbacks ? o._pendingCallbacks.push(t) : o._pendingCallbacks = [t], void r(o)) : null
                                },
                                enqueueCallbackInternal: function(e, t) {
                                    e._pendingCallbacks ? e._pendingCallbacks.push(t) : e._pendingCallbacks = [t], r(e)
                                },
                                enqueueForceUpdate: function(e) {
                                    var t = i(e, "forceUpdate");
                                    t && (t._pendingForceUpdate = !0, r(t))
                                },
                                enqueueReplaceState: function(e, t) {
                                    var n = i(e, "replaceState");
                                    n && (n._pendingStateQueue = [t], n._pendingReplaceState = !0, r(n))
                                },
                                enqueueSetState: function(e, t) {
                                    var n = i(e, "setState");
                                    if (n) {
                                        var o = n._pendingStateQueue || (n._pendingStateQueue = []);
                                        o.push(t), r(n)
                                    }
                                },
                                enqueueElementInternal: function(e, t, n) {
                                    e._pendingElement = t, e._context = n, r(e)
                                },
                                validateCallback: function(e, t) {
                                    e && "function" != typeof e ? a("122", t, o(e)) : void 0
                                }
                            });
                        t.exports = l
                    }, {
                        113: 113,
                        120: 120,
                        137: 137,
                        142: 142,
                        57: 57,
                        58: 58,
                        71: 71
                    }],
                    71: [function(e, t, n) {
                        "use strict";

                        function r() {
                            P.ReactReconcileTransaction && b ? void 0 : c("123")
                        }

                        function o() {
                            this.reinitializeTransaction(), this.dirtyComponentsLength = null, this.callbackQueue = d.getPooled(), this.reconcileTransaction = P.ReactReconcileTransaction.getPooled(!0)
                        }

                        function i(e, t, n, o, i, a) {
                            return r(), b.batchedUpdates(e, t, n, o, i, a)
                        }

                        function a(e, t) {
                            return e._mountOrder - t._mountOrder
                        }

                        function s(e) {
                            var t = e.dirtyComponentsLength;
                            t !== g.length ? c("124", t, g.length) : void 0, g.sort(a), y++;
                            for (var n = 0; n < t; n++) {
                                var r = g[n],
                                    o = r._pendingCallbacks;
                                r._pendingCallbacks = null;
                                var i;
                                if (h.logTopLevelRenders) {
                                    var s = r;
                                    r._currentElement.type.isReactTopLevelWrapper && (s = r._renderedComponent), i = "React update: " + s.getName(), console.time(i)
                                }
                                if (m.performUpdateIfNecessary(r, e.reconcileTransaction, y), i && console.timeEnd(i), o)
                                    for (var u = 0; u < o.length; u++) e.callbackQueue.enqueue(o[u], r.getPublicInstance())
                            }
                        }

                        function u(e) {
                            return r(), b.isBatchingUpdates ? (g.push(e), void(null == e._updateBatchNumber && (e._updateBatchNumber = y + 1))) : void b.batchedUpdates(u, e)
                        }

                        function l(e, t) {
                            b.isBatchingUpdates ? void 0 : c("125"), _.enqueue(e, t), C = !0
                        }
                        var c = e(113),
                            p = e(143),
                            d = e(6),
                            f = e(24),
                            h = e(53),
                            m = e(66),
                            v = e(89),
                            g = (e(137), []),
                            y = 0,
                            _ = d.getPooled(),
                            C = !1,
                            b = null,
                            E = {
                                initialize: function() {
                                    this.dirtyComponentsLength = g.length
                                },
                                close: function() {
                                    this.dirtyComponentsLength !== g.length ? (g.splice(0, this.dirtyComponentsLength), T()) : g.length = 0
                                }
                            },
                            x = {
                                initialize: function() {
                                    this.callbackQueue.reset()
                                },
                                close: function() {
                                    this.callbackQueue.notifyAll()
                                }
                            },
                            w = [E, x];
                        p(o.prototype, v, {
                            getTransactionWrappers: function() {
                                return w
                            },
                            destructor: function() {
                                this.dirtyComponentsLength = null, d.release(this.callbackQueue), this.callbackQueue = null, P.ReactReconcileTransaction.release(this.reconcileTransaction), this.reconcileTransaction = null
                            },
                            perform: function(e, t, n) {
                                return v.perform.call(this, this.reconcileTransaction.perform, this.reconcileTransaction, e, t, n)
                            }
                        }), f.addPoolingTo(o);
                        var T = function() {
                                for (; g.length || C;) {
                                    if (g.length) {
                                        var e = o.getPooled();
                                        e.perform(s, null, e), o.release(e)
                                    }
                                    if (C) {
                                        C = !1;
                                        var t = _;
                                        _ = d.getPooled(), t.notifyAll(), d.release(t)
                                    }
                                }
                            },
                            k = {
                                injectReconcileTransaction: function(e) {
                                    e ? void 0 : c("126"), P.ReactReconcileTransaction = e
                                },
                                injectBatchingStrategy: function(e) {
                                    e ? void 0 : c("127"), "function" != typeof e.batchedUpdates ? c("128") : void 0, "boolean" != typeof e.isBatchingUpdates ? c("129") : void 0, b = e
                                }
                            },
                            P = {
                                ReactReconcileTransaction: null,
                                batchedUpdates: i,
                                enqueueUpdate: u,
                                flushBatchedUpdates: T,
                                injection: k,
                                asap: l
                            };
                        t.exports = P
                    }, {
                        113: 113,
                        137: 137,
                        143: 143,
                        24: 24,
                        53: 53,
                        6: 6,
                        66: 66,
                        89: 89
                    }],
                    72: [function(e, t, n) {
                        "use strict";
                        t.exports = "15.4.2"
                    }, {}],
                    73: [function(e, t, n) {
                        "use strict";
                        var r = {
                                xlink: "http://www.w3.org/1999/xlink",
                                xml: "http://www.w3.org/XML/1998/namespace"
                            },
                            o = {
                                accentHeight: "accent-height",
                                accumulate: 0,
                                additive: 0,
                                alignmentBaseline: "alignment-baseline",
                                allowReorder: "allowReorder",
                                alphabetic: 0,
                                amplitude: 0,
                                arabicForm: "arabic-form",
                                ascent: 0,
                                attributeName: "attributeName",
                                attributeType: "attributeType",
                                autoReverse: "autoReverse",
                                azimuth: 0,
                                baseFrequency: "baseFrequency",
                                baseProfile: "baseProfile",
                                baselineShift: "baseline-shift",
                                bbox: 0,
                                begin: 0,
                                bias: 0,
                                by: 0,
                                calcMode: "calcMode",
                                capHeight: "cap-height",
                                clip: 0,
                                clipPath: "clip-path",
                                clipRule: "clip-rule",
                                clipPathUnits: "clipPathUnits",
                                colorInterpolation: "color-interpolation",
                                colorInterpolationFilters: "color-interpolation-filters",
                                colorProfile: "color-profile",
                                colorRendering: "color-rendering",
                                contentScriptType: "contentScriptType",
                                contentStyleType: "contentStyleType",
                                cursor: 0,
                                cx: 0,
                                cy: 0,
                                d: 0,
                                decelerate: 0,
                                descent: 0,
                                diffuseConstant: "diffuseConstant",
                                direction: 0,
                                display: 0,
                                divisor: 0,
                                dominantBaseline: "dominant-baseline",
                                dur: 0,
                                dx: 0,
                                dy: 0,
                                edgeMode: "edgeMode",
                                elevation: 0,
                                enableBackground: "enable-background",
                                end: 0,
                                exponent: 0,
                                externalResourcesRequired: "externalResourcesRequired",
                                fill: 0,
                                fillOpacity: "fill-opacity",
                                fillRule: "fill-rule",
                                filter: 0,
                                filterRes: "filterRes",
                                filterUnits: "filterUnits",
                                floodColor: "flood-color",
                                floodOpacity: "flood-opacity",
                                focusable: 0,
                                fontFamily: "font-family",
                                fontSize: "font-size",
                                fontSizeAdjust: "font-size-adjust",
                                fontStretch: "font-stretch",
                                fontStyle: "font-style",
                                fontVariant: "font-variant",
                                fontWeight: "font-weight",
                                format: 0,
                                from: 0,
                                fx: 0,
                                fy: 0,
                                g1: 0,
                                g2: 0,
                                glyphName: "glyph-name",
                                glyphOrientationHorizontal: "glyph-orientation-horizontal",
                                glyphOrientationVertical: "glyph-orientation-vertical",
                                glyphRef: "glyphRef",
                                gradientTransform: "gradientTransform",
                                gradientUnits: "gradientUnits",
                                hanging: 0,
                                horizAdvX: "horiz-adv-x",
                                horizOriginX: "horiz-origin-x",
                                ideographic: 0,
                                imageRendering: "image-rendering",
                                in: 0,
                                in2: 0,
                                intercept: 0,
                                k: 0,
                                k1: 0,
                                k2: 0,
                                k3: 0,
                                k4: 0,
                                kernelMatrix: "kernelMatrix",
                                kernelUnitLength: "kernelUnitLength",
                                kerning: 0,
                                keyPoints: "keyPoints",
                                keySplines: "keySplines",
                                keyTimes: "keyTimes",
                                lengthAdjust: "lengthAdjust",
                                letterSpacing: "letter-spacing",
                                lightingColor: "lighting-color",
                                limitingConeAngle: "limitingConeAngle",
                                local: 0,
                                markerEnd: "marker-end",
                                markerMid: "marker-mid",
                                markerStart: "marker-start",
                                markerHeight: "markerHeight",
                                markerUnits: "markerUnits",
                                markerWidth: "markerWidth",
                                mask: 0,
                                maskContentUnits: "maskContentUnits",
                                maskUnits: "maskUnits",
                                mathematical: 0,
                                mode: 0,
                                numOctaves: "numOctaves",
                                offset: 0,
                                opacity: 0,
                                operator: 0,
                                order: 0,
                                orient: 0,
                                orientation: 0,
                                origin: 0,
                                overflow: 0,
                                overlinePosition: "overline-position",
                                overlineThickness: "overline-thickness",
                                paintOrder: "paint-order",
                                panose1: "panose-1",
                                pathLength: "pathLength",
                                patternContentUnits: "patternContentUnits",
                                patternTransform: "patternTransform",
                                patternUnits: "patternUnits",
                                pointerEvents: "pointer-events",
                                points: 0,
                                pointsAtX: "pointsAtX",
                                pointsAtY: "pointsAtY",
                                pointsAtZ: "pointsAtZ",
                                preserveAlpha: "preserveAlpha",
                                preserveAspectRatio: "preserveAspectRatio",
                                primitiveUnits: "primitiveUnits",
                                r: 0,
                                radius: 0,
                                refX: "refX",
                                refY: "refY",
                                renderingIntent: "rendering-intent",
                                repeatCount: "repeatCount",
                                repeatDur: "repeatDur",
                                requiredExtensions: "requiredExtensions",
                                requiredFeatures: "requiredFeatures",
                                restart: 0,
                                result: 0,
                                rotate: 0,
                                rx: 0,
                                ry: 0,
                                scale: 0,
                                seed: 0,
                                shapeRendering: "shape-rendering",
                                slope: 0,
                                spacing: 0,
                                specularConstant: "specularConstant",
                                specularExponent: "specularExponent",
                                speed: 0,
                                spreadMethod: "spreadMethod",
                                startOffset: "startOffset",
                                stdDeviation: "stdDeviation",
                                stemh: 0,
                                stemv: 0,
                                stitchTiles: "stitchTiles",
                                stopColor: "stop-color",
                                stopOpacity: "stop-opacity",
                                strikethroughPosition: "strikethrough-position",
                                strikethroughThickness: "strikethrough-thickness",
                                string: 0,
                                stroke: 0,
                                strokeDasharray: "stroke-dasharray",
                                strokeDashoffset: "stroke-dashoffset",
                                strokeLinecap: "stroke-linecap",
                                strokeLinejoin: "stroke-linejoin",
                                strokeMiterlimit: "stroke-miterlimit",
                                strokeOpacity: "stroke-opacity",
                                strokeWidth: "stroke-width",
                                surfaceScale: "surfaceScale",
                                systemLanguage: "systemLanguage",
                                tableValues: "tableValues",
                                targetX: "targetX",
                                targetY: "targetY",
                                textAnchor: "text-anchor",
                                textDecoration: "text-decoration",
                                textRendering: "text-rendering",
                                textLength: "textLength",
                                to: 0,
                                transform: 0,
                                u1: 0,
                                u2: 0,
                                underlinePosition: "underline-position",
                                underlineThickness: "underline-thickness",
                                unicode: 0,
                                unicodeBidi: "unicode-bidi",
                                unicodeRange: "unicode-range",
                                unitsPerEm: "units-per-em",
                                vAlphabetic: "v-alphabetic",
                                vHanging: "v-hanging",
                                vIdeographic: "v-ideographic",
                                vMathematical: "v-mathematical",
                                values: 0,
                                vectorEffect: "vector-effect",
                                version: 0,
                                vertAdvY: "vert-adv-y",
                                vertOriginX: "vert-origin-x",
                                vertOriginY: "vert-origin-y",
                                viewBox: "viewBox",
                                viewTarget: "viewTarget",
                                visibility: 0,
                                widths: 0,
                                wordSpacing: "word-spacing",
                                writingMode: "writing-mode",
                                x: 0,
                                xHeight: "x-height",
                                x1: 0,
                                x2: 0,
                                xChannelSelector: "xChannelSelector",
                                xlinkActuate: "xlink:actuate",
                                xlinkArcrole: "xlink:arcrole",
                                xlinkHref: "xlink:href",
                                xlinkRole: "xlink:role",
                                xlinkShow: "xlink:show",
                                xlinkTitle: "xlink:title",
                                xlinkType: "xlink:type",
                                xmlBase: "xml:base",
                                xmlns: 0,
                                xmlnsXlink: "xmlns:xlink",
                                xmlLang: "xml:lang",
                                xmlSpace: "xml:space",
                                y: 0,
                                y1: 0,
                                y2: 0,
                                yChannelSelector: "yChannelSelector",
                                z: 0,
                                zoomAndPan: "zoomAndPan"
                            },
                            i = {
                                Properties: {},
                                DOMAttributeNamespaces: {
                                    xlinkActuate: r.xlink,
                                    xlinkArcrole: r.xlink,
                                    xlinkHref: r.xlink,
                                    xlinkRole: r.xlink,
                                    xlinkShow: r.xlink,
                                    xlinkTitle: r.xlink,
                                    xlinkType: r.xlink,
                                    xmlBase: r.xml,
                                    xmlLang: r.xml,
                                    xmlSpace: r.xml
                                },
                                DOMAttributeNames: {}
                            };
                        Object.keys(o).forEach(function(e) {
                            i.Properties[e] = 0, o[e] && (i.DOMAttributeNames[e] = o[e])
                        }), t.exports = i
                    }, {}],
                    74: [function(e, t, n) {
                        "use strict";

                        function r(e) {
                            if ("selectionStart" in e && u.hasSelectionCapabilities(e)) return {
                                start: e.selectionStart,
                                end: e.selectionEnd
                            };
                            if (window.getSelection) {
                                var t = window.getSelection();
                                return {
                                    anchorNode: t.anchorNode,
                                    anchorOffset: t.anchorOffset,
                                    focusNode: t.focusNode,
                                    focusOffset: t.focusOffset
                                }
                            }
                            if (document.selection) {
                                var n = document.selection.createRange();
                                return {
                                    parentElement: n.parentElement(),
                                    text: n.text,
                                    top: n.boundingTop,
                                    left: n.boundingLeft
                                }
                            }
                        }

                        function o(e, t) {
                            if (y || null == m || m !== c()) return null;
                            var n = r(m);
                            if (!g || !d(g, n)) {
                                g = n;
                                var o = l.getPooled(h.select, v, e, t);
                                return o.type = "select", o.target = m, i.accumulateTwoPhaseDispatches(o), o
                            }
                            return null
                        }
                        var i = e(19),
                            a = e(123),
                            s = e(33),
                            u = e(56),
                            l = e(80),
                            c = e(132),
                            p = e(111),
                            d = e(141),
                            f = a.canUseDOM && "documentMode" in document && document.documentMode <= 11,
                            h = {
                                select: {
                                    phasedRegistrationNames: {
                                        bubbled: "onSelect",
                                        captured: "onSelectCapture"
                                    },
                                    dependencies: ["topBlur", "topContextMenu", "topFocus", "topKeyDown", "topKeyUp", "topMouseDown", "topMouseUp", "topSelectionChange"]
                                }
                            },
                            m = null,
                            v = null,
                            g = null,
                            y = !1,
                            _ = !1,
                            C = {
                                eventTypes: h,
                                extractEvents: function(e, t, n, r) {
                                    if (!_) return null;
                                    var i = t ? s.getNodeFromInstance(t) : window;
                                    switch (e) {
                                        case "topFocus":
                                            (p(i) || "true" === i.contentEditable) && (m = i, v = t, g = null);
                                            break;
                                        case "topBlur":
                                            m = null, v = null, g = null;
                                            break;
                                        case "topMouseDown":
                                            y = !0;
                                            break;
                                        case "topContextMenu":
                                        case "topMouseUp":
                                            return y = !1,
                                                o(n, r);
                                        case "topSelectionChange":
                                            if (f) break;
                                        case "topKeyDown":
                                        case "topKeyUp":
                                            return o(n, r)
                                    }
                                    return null
                                },
                                didPutListener: function(e, t, n) {
                                    "onSelect" === t && (_ = !0)
                                }
                            };
                        t.exports = C
                    }, {
                        111: 111,
                        123: 123,
                        132: 132,
                        141: 141,
                        19: 19,
                        33: 33,
                        56: 56,
                        80: 80
                    }],
                    75: [function(e, t, n) {
                        "use strict";

                        function r(e) {
                            return "." + e._rootNodeID
                        }

                        function o(e) {
                            return "button" === e || "input" === e || "select" === e || "textarea" === e
                        }
                        var i = e(113),
                            a = e(122),
                            s = e(19),
                            u = e(33),
                            l = e(76),
                            c = e(77),
                            p = e(80),
                            d = e(81),
                            f = e(83),
                            h = e(84),
                            m = e(79),
                            v = e(85),
                            g = e(86),
                            y = e(87),
                            _ = e(88),
                            C = e(129),
                            b = e(99),
                            E = (e(137), {}),
                            x = {};
                        ["abort", "animationEnd", "animationIteration", "animationStart", "blur", "canPlay", "canPlayThrough", "click", "contextMenu", "copy", "cut", "doubleClick", "drag", "dragEnd", "dragEnter", "dragExit", "dragLeave", "dragOver", "dragStart", "drop", "durationChange", "emptied", "encrypted", "ended", "error", "focus", "input", "invalid", "keyDown", "keyPress", "keyUp", "load", "loadedData", "loadedMetadata", "loadStart", "mouseDown", "mouseMove", "mouseOut", "mouseOver", "mouseUp", "paste", "pause", "play", "playing", "progress", "rateChange", "reset", "scroll", "seeked", "seeking", "stalled", "submit", "suspend", "timeUpdate", "touchCancel", "touchEnd", "touchMove", "touchStart", "transitionEnd", "volumeChange", "waiting", "wheel"].forEach(function(e) {
                            var t = e[0].toUpperCase() + e.slice(1),
                                n = "on" + t,
                                r = "top" + t,
                                o = {
                                    phasedRegistrationNames: {
                                        bubbled: n,
                                        captured: n + "Capture"
                                    },
                                    dependencies: [r]
                                };
                            E[e] = o, x[r] = o
                        });
                        var w = {},
                            T = {
                                eventTypes: E,
                                extractEvents: function(e, t, n, r) {
                                    var o = x[e];
                                    if (!o) return null;
                                    var a;
                                    switch (e) {
                                        case "topAbort":
                                        case "topCanPlay":
                                        case "topCanPlayThrough":
                                        case "topDurationChange":
                                        case "topEmptied":
                                        case "topEncrypted":
                                        case "topEnded":
                                        case "topError":
                                        case "topInput":
                                        case "topInvalid":
                                        case "topLoad":
                                        case "topLoadedData":
                                        case "topLoadedMetadata":
                                        case "topLoadStart":
                                        case "topPause":
                                        case "topPlay":
                                        case "topPlaying":
                                        case "topProgress":
                                        case "topRateChange":
                                        case "topReset":
                                        case "topSeeked":
                                        case "topSeeking":
                                        case "topStalled":
                                        case "topSubmit":
                                        case "topSuspend":
                                        case "topTimeUpdate":
                                        case "topVolumeChange":
                                        case "topWaiting":
                                            a = p;
                                            break;
                                        case "topKeyPress":
                                            if (0 === b(n)) return null;
                                        case "topKeyDown":
                                        case "topKeyUp":
                                            a = f;
                                            break;
                                        case "topBlur":
                                        case "topFocus":
                                            a = d;
                                            break;
                                        case "topClick":
                                            if (2 === n.button) return null;
                                        case "topDoubleClick":
                                        case "topMouseDown":
                                        case "topMouseMove":
                                        case "topMouseUp":
                                        case "topMouseOut":
                                        case "topMouseOver":
                                        case "topContextMenu":
                                            a = h;
                                            break;
                                        case "topDrag":
                                        case "topDragEnd":
                                        case "topDragEnter":
                                        case "topDragExit":
                                        case "topDragLeave":
                                        case "topDragOver":
                                        case "topDragStart":
                                        case "topDrop":
                                            a = m;
                                            break;
                                        case "topTouchCancel":
                                        case "topTouchEnd":
                                        case "topTouchMove":
                                        case "topTouchStart":
                                            a = v;
                                            break;
                                        case "topAnimationEnd":
                                        case "topAnimationIteration":
                                        case "topAnimationStart":
                                            a = l;
                                            break;
                                        case "topTransitionEnd":
                                            a = g;
                                            break;
                                        case "topScroll":
                                            a = y;
                                            break;
                                        case "topWheel":
                                            a = _;
                                            break;
                                        case "topCopy":
                                        case "topCut":
                                        case "topPaste":
                                            a = c
                                    }
                                    a ? void 0 : i("86", e);
                                    var u = a.getPooled(o, t, n, r);
                                    return s.accumulateTwoPhaseDispatches(u), u
                                },
                                didPutListener: function(e, t, n) {
                                    if ("onClick" === t && !o(e._tag)) {
                                        var i = r(e),
                                            s = u.getNodeFromInstance(e);
                                        w[i] || (w[i] = a.listen(s, "click", C))
                                    }
                                },
                                willDeleteListener: function(e, t) {
                                    if ("onClick" === t && !o(e._tag)) {
                                        var n = r(e);
                                        w[n].remove(), delete w[n]
                                    }
                                }
                            };
                        t.exports = T
                    }, {
                        113: 113,
                        122: 122,
                        129: 129,
                        137: 137,
                        19: 19,
                        33: 33,
                        76: 76,
                        77: 77,
                        79: 79,
                        80: 80,
                        81: 81,
                        83: 83,
                        84: 84,
                        85: 85,
                        86: 86,
                        87: 87,
                        88: 88,
                        99: 99
                    }],
                    76: [function(e, t, n) {
                        "use strict";

                        function r(e, t, n, r) {
                            return o.call(this, e, t, n, r)
                        }
                        var o = e(80),
                            i = {
                                animationName: null,
                                elapsedTime: null,
                                pseudoElement: null
                            };
                        o.augmentClass(r, i), t.exports = r
                    }, {
                        80: 80
                    }],
                    77: [function(e, t, n) {
                        "use strict";

                        function r(e, t, n, r) {
                            return o.call(this, e, t, n, r)
                        }
                        var o = e(80),
                            i = {
                                clipboardData: function(e) {
                                    return "clipboardData" in e ? e.clipboardData : window.clipboardData
                                }
                            };
                        o.augmentClass(r, i), t.exports = r
                    }, {
                        80: 80
                    }],
                    78: [function(e, t, n) {
                        "use strict";

                        function r(e, t, n, r) {
                            return o.call(this, e, t, n, r)
                        }
                        var o = e(80),
                            i = {
                                data: null
                            };
                        o.augmentClass(r, i), t.exports = r
                    }, {
                        80: 80
                    }],
                    79: [function(e, t, n) {
                        "use strict";

                        function r(e, t, n, r) {
                            return o.call(this, e, t, n, r)
                        }
                        var o = e(84),
                            i = {
                                dataTransfer: null
                            };
                        o.augmentClass(r, i), t.exports = r
                    }, {
                        84: 84
                    }],
                    80: [function(e, t, n) {
                        "use strict";

                        function r(e, t, n, r) {
                            this.dispatchConfig = e, this._targetInst = t, this.nativeEvent = n;
                            var o = this.constructor.Interface;
                            for (var i in o)
                                if (o.hasOwnProperty(i)) {
                                    var s = o[i];
                                    s ? this[i] = s(n) : "target" === i ? this.target = r : this[i] = n[i]
                                }
                            var u = null != n.defaultPrevented ? n.defaultPrevented : n.returnValue === !1;
                            return u ? this.isDefaultPrevented = a.thatReturnsTrue : this.isDefaultPrevented = a.thatReturnsFalse, this.isPropagationStopped = a.thatReturnsFalse, this
                        }
                        var o = e(143),
                            i = e(24),
                            a = e(129),
                            s = (e(142), "function" == typeof Proxy, ["dispatchConfig", "_targetInst", "nativeEvent", "isDefaultPrevented", "isPropagationStopped", "_dispatchListeners", "_dispatchInstances"]),
                            u = {
                                type: null,
                                target: null,
                                currentTarget: a.thatReturnsNull,
                                eventPhase: null,
                                bubbles: null,
                                cancelable: null,
                                timeStamp: function(e) {
                                    return e.timeStamp || Date.now()
                                },
                                defaultPrevented: null,
                                isTrusted: null
                            };
                        o(r.prototype, {
                            preventDefault: function() {
                                this.defaultPrevented = !0;
                                var e = this.nativeEvent;
                                e && (e.preventDefault ? e.preventDefault() : "unknown" != typeof e.returnValue && (e.returnValue = !1), this.isDefaultPrevented = a.thatReturnsTrue)
                            },
                            stopPropagation: function() {
                                var e = this.nativeEvent;
                                e && (e.stopPropagation ? e.stopPropagation() : "unknown" != typeof e.cancelBubble && (e.cancelBubble = !0), this.isPropagationStopped = a.thatReturnsTrue)
                            },
                            persist: function() {
                                this.isPersistent = a.thatReturnsTrue
                            },
                            isPersistent: a.thatReturnsFalse,
                            destructor: function() {
                                var e = this.constructor.Interface;
                                for (var t in e) this[t] = null;
                                for (var n = 0; n < s.length; n++) this[s[n]] = null
                            }
                        }), r.Interface = u, r.augmentClass = function(e, t) {
                            var n = this,
                                r = function() {};
                            r.prototype = n.prototype;
                            var a = new r;
                            o(a, e.prototype), e.prototype = a, e.prototype.constructor = e, e.Interface = o({}, n.Interface, t), e.augmentClass = n.augmentClass, i.addPoolingTo(e, i.fourArgumentPooler)
                        }, i.addPoolingTo(r, i.fourArgumentPooler), t.exports = r
                    }, {
                        129: 129,
                        142: 142,
                        143: 143,
                        24: 24
                    }],
                    81: [function(e, t, n) {
                        "use strict";

                        function r(e, t, n, r) {
                            return o.call(this, e, t, n, r)
                        }
                        var o = e(87),
                            i = {
                                relatedTarget: null
                            };
                        o.augmentClass(r, i), t.exports = r
                    }, {
                        87: 87
                    }],
                    82: [function(e, t, n) {
                        "use strict";

                        function r(e, t, n, r) {
                            return o.call(this, e, t, n, r)
                        }
                        var o = e(80),
                            i = {
                                data: null
                            };
                        o.augmentClass(r, i), t.exports = r
                    }, {
                        80: 80
                    }],
                    83: [function(e, t, n) {
                        "use strict";

                        function r(e, t, n, r) {
                            return o.call(this, e, t, n, r)
                        }
                        var o = e(87),
                            i = e(99),
                            a = e(100),
                            s = e(101),
                            u = {
                                key: a,
                                location: null,
                                ctrlKey: null,
                                shiftKey: null,
                                altKey: null,
                                metaKey: null,
                                repeat: null,
                                locale: null,
                                getModifierState: s,
                                charCode: function(e) {
                                    return "keypress" === e.type ? i(e) : 0
                                },
                                keyCode: function(e) {
                                    return "keydown" === e.type || "keyup" === e.type ? e.keyCode : 0
                                },
                                which: function(e) {
                                    return "keypress" === e.type ? i(e) : "keydown" === e.type || "keyup" === e.type ? e.keyCode : 0
                                }
                            };
                        o.augmentClass(r, u), t.exports = r
                    }, {
                        100: 100,
                        101: 101,
                        87: 87,
                        99: 99
                    }],
                    84: [function(e, t, n) {
                        "use strict";

                        function r(e, t, n, r) {
                            return o.call(this, e, t, n, r)
                        }
                        var o = e(87),
                            i = e(90),
                            a = e(101),
                            s = {
                                screenX: null,
                                screenY: null,
                                clientX: null,
                                clientY: null,
                                ctrlKey: null,
                                shiftKey: null,
                                altKey: null,
                                metaKey: null,
                                getModifierState: a,
                                button: function(e) {
                                    var t = e.button;
                                    return "which" in e ? t : 2 === t ? 2 : 4 === t ? 1 : 0
                                },
                                buttons: null,
                                relatedTarget: function(e) {
                                    return e.relatedTarget || (e.fromElement === e.srcElement ? e.toElement : e.fromElement)
                                },
                                pageX: function(e) {
                                    return "pageX" in e ? e.pageX : e.clientX + i.currentScrollLeft
                                },
                                pageY: function(e) {
                                    return "pageY" in e ? e.pageY : e.clientY + i.currentScrollTop
                                }
                            };
                        o.augmentClass(r, s), t.exports = r
                    }, {
                        101: 101,
                        87: 87,
                        90: 90
                    }],
                    85: [function(e, t, n) {
                        "use strict";

                        function r(e, t, n, r) {
                            return o.call(this, e, t, n, r)
                        }
                        var o = e(87),
                            i = e(101),
                            a = {
                                touches: null,
                                targetTouches: null,
                                changedTouches: null,
                                altKey: null,
                                metaKey: null,
                                ctrlKey: null,
                                shiftKey: null,
                                getModifierState: i
                            };
                        o.augmentClass(r, a), t.exports = r
                    }, {
                        101: 101,
                        87: 87
                    }],
                    86: [function(e, t, n) {
                        "use strict";

                        function r(e, t, n, r) {
                            return o.call(this, e, t, n, r)
                        }
                        var o = e(80),
                            i = {
                                propertyName: null,
                                elapsedTime: null,
                                pseudoElement: null
                            };
                        o.augmentClass(r, i), t.exports = r
                    }, {
                        80: 80
                    }],
                    87: [function(e, t, n) {
                        "use strict";

                        function r(e, t, n, r) {
                            return o.call(this, e, t, n, r)
                        }
                        var o = e(80),
                            i = e(102),
                            a = {
                                view: function(e) {
                                    if (e.view) return e.view;
                                    var t = i(e);
                                    if (t.window === t) return t;
                                    var n = t.ownerDocument;
                                    return n ? n.defaultView || n.parentWindow : window
                                },
                                detail: function(e) {
                                    return e.detail || 0
                                }
                            };
                        o.augmentClass(r, a), t.exports = r
                    }, {
                        102: 102,
                        80: 80
                    }],
                    88: [function(e, t, n) {
                        "use strict";

                        function r(e, t, n, r) {
                            return o.call(this, e, t, n, r)
                        }
                        var o = e(84),
                            i = {
                                deltaX: function(e) {
                                    return "deltaX" in e ? e.deltaX : "wheelDeltaX" in e ? -e.wheelDeltaX : 0
                                },
                                deltaY: function(e) {
                                    return "deltaY" in e ? e.deltaY : "wheelDeltaY" in e ? -e.wheelDeltaY : "wheelDelta" in e ? -e.wheelDelta : 0
                                },
                                deltaZ: null,
                                deltaMode: null
                            };
                        o.augmentClass(r, i), t.exports = r
                    }, {
                        84: 84
                    }],
                    89: [function(e, t, n) {
                        "use strict";
                        var r = e(113),
                            o = (e(137), {}),
                            i = {
                                reinitializeTransaction: function() {
                                    this.transactionWrappers = this.getTransactionWrappers(), this.wrapperInitData ? this.wrapperInitData.length = 0 : this.wrapperInitData = [], this._isInTransaction = !1
                                },
                                _isInTransaction: !1,
                                getTransactionWrappers: null,
                                isInTransaction: function() {
                                    return !!this._isInTransaction
                                },
                                perform: function(e, t, n, o, i, a, s, u) {
                                    this.isInTransaction() ? r("27") : void 0;
                                    var l, c;
                                    try {
                                        this._isInTransaction = !0, l = !0, this.initializeAll(0), c = e.call(t, n, o, i, a, s, u), l = !1
                                    } finally {
                                        try {
                                            if (l) try {
                                                this.closeAll(0)
                                            } catch (e) {} else this.closeAll(0)
                                        } finally {
                                            this._isInTransaction = !1
                                        }
                                    }
                                    return c
                                },
                                initializeAll: function(e) {
                                    for (var t = this.transactionWrappers, n = e; n < t.length; n++) {
                                        var r = t[n];
                                        try {
                                            this.wrapperInitData[n] = o, this.wrapperInitData[n] = r.initialize ? r.initialize.call(this) : null
                                        } finally {
                                            if (this.wrapperInitData[n] === o) try {
                                                this.initializeAll(n + 1)
                                            } catch (e) {}
                                        }
                                    }
                                },
                                closeAll: function(e) {
                                    this.isInTransaction() ? void 0 : r("28");
                                    for (var t = this.transactionWrappers, n = e; n < t.length; n++) {
                                        var i, a = t[n],
                                            s = this.wrapperInitData[n];
                                        try {
                                            i = !0, s !== o && a.close && a.close.call(this, s), i = !1
                                        } finally {
                                            if (i) try {
                                                this.closeAll(n + 1)
                                            } catch (e) {}
                                        }
                                    }
                                    this.wrapperInitData.length = 0
                                }
                            };
                        t.exports = i
                    }, {
                        113: 113,
                        137: 137
                    }],
                    90: [function(e, t, n) {
                        "use strict";
                        var r = {
                            currentScrollLeft: 0,
                            currentScrollTop: 0,
                            refreshScrollValues: function(e) {
                                r.currentScrollLeft = e.x, r.currentScrollTop = e.y
                            }
                        };
                        t.exports = r
                    }, {}],
                    91: [function(e, t, n) {
                        "use strict";

                        function r(e, t) {
                            return null == t ? o("30") : void 0, null == e ? t : Array.isArray(e) ? Array.isArray(t) ? (e.push.apply(e, t), e) : (e.push(t), e) : Array.isArray(t) ? [e].concat(t) : [e, t]
                        }
                        var o = e(113);
                        e(137);
                        t.exports = r
                    }, {
                        113: 113,
                        137: 137
                    }],
                    92: [function(e, t, n) {
                        "use strict";

                        function r(e) {
                            for (var t = 1, n = 0, r = 0, i = e.length, a = i & -4; r < a;) {
                                for (var s = Math.min(r + 4096, a); r < s; r += 4) n += (t += e.charCodeAt(r)) + (t += e.charCodeAt(r + 1)) + (t += e.charCodeAt(r + 2)) + (t += e.charCodeAt(r + 3));
                                t %= o, n %= o
                            }
                            for (; r < i; r++) n += t += e.charCodeAt(r);
                            return t %= o, n %= o, t | n << 16
                        }
                        var o = 65521;
                        t.exports = r
                    }, {}],
                    93: [function(e, t, n) {
                        "use strict";
                        var r = function(e) {
                            return "undefined" != typeof MSApp && MSApp.execUnsafeLocalFunction ? function(t, n, r, o) {
                                MSApp.execUnsafeLocalFunction(function() {
                                    return e(t, n, r, o)
                                })
                            } : e
                        };
                        t.exports = r
                    }, {}],
                    94: [function(e, t, n) {
                        "use strict";

                        function r(e, t, n) {
                            var r = null == t || "boolean" == typeof t || "" === t;
                            if (r) return "";
                            var o = isNaN(t);
                            return o || 0 === t || i.hasOwnProperty(e) && i[e] ? "" + t : ("string" == typeof t && (t = t.trim()), t + "px")
                        }
                        var o = e(4),
                            i = (e(142), o.isUnitlessNumber);
                        t.exports = r
                    }, {
                        142: 142,
                        4: 4
                    }],
                    95: [function(e, t, n) {
                        "use strict";

                        function r(e) {
                            var t = "" + e,
                                n = i.exec(t);
                            if (!n) return t;
                            var r, o = "",
                                a = 0,
                                s = 0;
                            for (a = n.index; a < t.length; a++) {
                                switch (t.charCodeAt(a)) {
                                    case 34:
                                        r = "&quot;";
                                        break;
                                    case 38:
                                        r = "&amp;";
                                        break;
                                    case 39:
                                        r = "&#x27;";
                                        break;
                                    case 60:
                                        r = "&lt;";
                                        break;
                                    case 62:
                                        r = "&gt;";
                                        break;
                                    default:
                                        continue
                                }
                                s !== a && (o += t.substring(s, a)), s = a + 1, o += r
                            }
                            return s !== a ? o + t.substring(s, a) : o
                        }

                        function o(e) {
                            return "boolean" == typeof e || "number" == typeof e ? "" + e : r(e)
                        }
                        var i = /["'&<>]/;
                        t.exports = o
                    }, {}],
                    96: [function(e, t, n) {
                        "use strict";

                        function r(e) {
                            if (null == e) return null;
                            if (1 === e.nodeType) return e;
                            var t = a.get(e);
                            return t ? (t = s(t), t ? i.getNodeFromInstance(t) : null) : void("function" == typeof e.render ? o("44") : o("45", Object.keys(e)))
                        }
                        var o = e(113),
                            i = (e(120), e(33)),
                            a = e(57),
                            s = e(103);
                        e(137), e(142);
                        t.exports = r
                    }, {
                        103: 103,
                        113: 113,
                        120: 120,
                        137: 137,
                        142: 142,
                        33: 33,
                        57: 57
                    }],
                    97: [function(e, t, n) {
                        (function(n) {
                            "use strict";

                            function r(e, t, n, r) {
                                if (e && "object" == typeof e) {
                                    var o = e,
                                        i = void 0 === o[n];
                                    i && null != t && (o[n] = t)
                                }
                            }

                            function o(e, t) {
                                if (null == e) return e;
                                var n = {};
                                return i(e, r, n), n
                            }
                            var i = (e(22), e(118));
                            e(142);
                            "undefined" != typeof n && n.env, t.exports = o
                        }).call(this, void 0)
                    }, {
                        118: 118,
                        142: 142,
                        22: 22
                    }],
                    98: [function(e, t, n) {
                        "use strict";

                        function r(e, t, n) {
                            Array.isArray(e) ? e.forEach(t, n) : e && t.call(n, e)
                        }
                        t.exports = r
                    }, {}],
                    99: [function(e, t, n) {
                        "use strict";

                        function r(e) {
                            var t, n = e.keyCode;
                            return "charCode" in e ? (t = e.charCode, 0 === t && 13 === n && (t = 13)) : t = n, t >= 32 || 13 === t ? t : 0
                        }
                        t.exports = r
                    }, {}],
                    100: [function(e, t, n) {
                        "use strict";

                        function r(e) {
                            if (e.key) {
                                var t = i[e.key] || e.key;
                                if ("Unidentified" !== t) return t
                            }
                            if ("keypress" === e.type) {
                                var n = o(e);
                                return 13 === n ? "Enter" : String.fromCharCode(n)
                            }
                            return "keydown" === e.type || "keyup" === e.type ? a[e.keyCode] || "Unidentified" : ""
                        }
                        var o = e(99),
                            i = {
                                Esc: "Escape",
                                Spacebar: " ",
                                Left: "ArrowLeft",
                                Up: "ArrowUp",
                                Right: "ArrowRight",
                                Down: "ArrowDown",
                                Del: "Delete",
                                Win: "OS",
                                Menu: "ContextMenu",
                                Apps: "ContextMenu",
                                Scroll: "ScrollLock",
                                MozPrintableKey: "Unidentified"
                            },
                            a = {
                                8: "Backspace",
                                9: "Tab",
                                12: "Clear",
                                13: "Enter",
                                16: "Shift",
                                17: "Control",
                                18: "Alt",
                                19: "Pause",
                                20: "CapsLock",
                                27: "Escape",
                                32: " ",
                                33: "PageUp",
                                34: "PageDown",
                                35: "End",
                                36: "Home",
                                37: "ArrowLeft",
                                38: "ArrowUp",
                                39: "ArrowRight",
                                40: "ArrowDown",
                                45: "Insert",
                                46: "Delete",
                                112: "F1",
                                113: "F2",
                                114: "F3",
                                115: "F4",
                                116: "F5",
                                117: "F6",
                                118: "F7",
                                119: "F8",
                                120: "F9",
                                121: "F10",
                                122: "F11",
                                123: "F12",
                                144: "NumLock",
                                145: "ScrollLock",
                                224: "Meta"
                            };
                        t.exports = r
                    }, {
                        99: 99
                    }],
                    101: [function(e, t, n) {
                        "use strict";

                        function r(e) {
                            var t = this,
                                n = t.nativeEvent;
                            if (n.getModifierState) return n.getModifierState(e);
                            var r = i[e];
                            return !!r && !!n[r]
                        }

                        function o(e) {
                            return r
                        }
                        var i = {
                            Alt: "altKey",
                            Control: "ctrlKey",
                            Meta: "metaKey",
                            Shift: "shiftKey"
                        };
                        t.exports = o
                    }, {}],
                    102: [function(e, t, n) {
                        "use strict";

                        function r(e) {
                            var t = e.target || e.srcElement || window;
                            return t.correspondingUseElement && (t = t.correspondingUseElement), 3 === t.nodeType ? t.parentNode : t
                        }
                        t.exports = r
                    }, {}],
                    103: [function(e, t, n) {
                        "use strict";

                        function r(e) {
                            for (var t;
                                (t = e._renderedNodeType) === o.COMPOSITE;) e = e._renderedComponent;
                            return t === o.HOST ? e._renderedComponent : t === o.EMPTY ? null : void 0
                        }
                        var o = e(62);
                        t.exports = r
                    }, {
                        62: 62
                    }],
                    104: [function(e, t, n) {
                        "use strict";

                        function r(e) {
                            var t = e && (o && e[o] || e[i]);
                            if ("function" == typeof t) return t
                        }
                        var o = "function" == typeof Symbol && Symbol.iterator,
                            i = "@@iterator";
                        t.exports = r
                    }, {}],
                    105: [function(e, t, n) {
                        "use strict";

                        function r() {
                            return o++
                        }
                        var o = 1;
                        t.exports = r
                    }, {}],
                    106: [function(e, t, n) {
                        "use strict";

                        function r(e) {
                            for (; e && e.firstChild;) e = e.firstChild;
                            return e
                        }

                        function o(e) {
                            for (; e;) {
                                if (e.nextSibling) return e.nextSibling;
                                e = e.parentNode
                            }
                        }

                        function i(e, t) {
                            for (var n = r(e), i = 0, a = 0; n;) {
                                if (3 === n.nodeType) {
                                    if (a = i + n.textContent.length, i <= t && a >= t) return {
                                        node: n,
                                        offset: t - i
                                    };
                                    i = a
                                }
                                n = r(o(n))
                            }
                        }
                        t.exports = i
                    }, {}],
                    107: [function(e, t, n) {
                        "use strict";

                        function r() {
                            return !i && o.canUseDOM && (i = "textContent" in document.documentElement ? "textContent" : "innerText"), i
                        }
                        var o = e(123),
                            i = null;
                        t.exports = r
                    }, {
                        123: 123
                    }],
                    108: [function(e, t, n) {
                        "use strict";

                        function r(e, t) {
                            var n = {};
                            return n[e.toLowerCase()] = t.toLowerCase(), n["Webkit" + e] = "webkit" + t, n["Moz" + e] = "moz" + t, n["ms" + e] = "MS" + t, n["O" + e] = "o" + t.toLowerCase(), n
                        }

                        function o(e) {
                            if (s[e]) return s[e];
                            if (!a[e]) return e;
                            var t = a[e];
                            for (var n in t)
                                if (t.hasOwnProperty(n) && n in u) return s[e] = t[n];
                            return ""
                        }
                        var i = e(123),
                            a = {
                                animationend: r("Animation", "AnimationEnd"),
                                animationiteration: r("Animation", "AnimationIteration"),
                                animationstart: r("Animation", "AnimationStart"),
                                transitionend: r("Transition", "TransitionEnd")
                            },
                            s = {},
                            u = {};
                        i.canUseDOM && (u = document.createElement("div").style, "AnimationEvent" in window || (delete a.animationend.animation, delete a.animationiteration.animation, delete a.animationstart.animation), "TransitionEvent" in window || delete a.transitionend.transition), t.exports = o
                    }, {
                        123: 123
                    }],
                    109: [function(e, t, n) {
                        "use strict";

                        function r(e) {
                            if (e) {
                                var t = e.getName();
                                if (t) return " Check the render method of `" + t + "`."
                            }
                            return ""
                        }

                        function o(e) {
                            return "function" == typeof e && "undefined" != typeof e.prototype && "function" == typeof e.prototype.mountComponent && "function" == typeof e.prototype.receiveComponent
                        }

                        function i(e, t) {
                            var n;
                            if (null === e || e === !1) n = l.create(i);
                            else if ("object" == typeof e) {
                                var s = e,
                                    u = s.type;
                                if ("function" != typeof u && "string" != typeof u) {
                                    var d = "";
                                    d += r(s._owner), a("130", null == u ? u : typeof u, d)
                                }
                                "string" == typeof s.type ? n = c.createInternalComponent(s) : o(s.type) ? (n = new s.type(s), n.getHostNode || (n.getHostNode = n.getNativeNode)) : n = new p(s)
                            } else "string" == typeof e || "number" == typeof e ? n = c.createInstanceForText(e) : a("131", typeof e);
                            return n._mountIndex = 0, n._mountImage = null, n
                        }
                        var a = e(113),
                            s = e(143),
                            u = e(29),
                            l = e(49),
                            c = e(54),
                            p = (e(105), e(137), e(142), function(e) {
                                this.construct(e)
                            });
                        s(p.prototype, u, {
                            _instantiateReactComponent: i
                        }), t.exports = i
                    }, {
                        105: 105,
                        113: 113,
                        137: 137,
                        142: 142,
                        143: 143,
                        29: 29,
                        49: 49,
                        54: 54
                    }],
                    110: [function(e, t, n) {
                        "use strict";

                        function r(e, t) {
                            if (!i.canUseDOM || t && !("addEventListener" in document)) return !1;
                            var n = "on" + e,
                                r = n in document;
                            if (!r) {
                                var a = document.createElement("div");
                                a.setAttribute(n, "return;"), r = "function" == typeof a[n]
                            }
                            return !r && o && "wheel" === e && (r = document.implementation.hasFeature("Events.wheel", "3.0")), r
                        }
                        var o, i = e(123);
                        i.canUseDOM && (o = document.implementation && document.implementation.hasFeature && document.implementation.hasFeature("", "") !== !0), t.exports = r
                    }, {
                        123: 123
                    }],
                    111: [function(e, t, n) {
                        "use strict";

                        function r(e) {
                            var t = e && e.nodeName && e.nodeName.toLowerCase();
                            return "input" === t ? !!o[e.type] : "textarea" === t
                        }
                        var o = {
                            color: !0,
                            date: !0,
                            datetime: !0,
                            "datetime-local": !0,
                            email: !0,
                            month: !0,
                            number: !0,
                            password: !0,
                            range: !0,
                            search: !0,
                            tel: !0,
                            text: !0,
                            time: !0,
                            url: !0,
                            week: !0
                        };
                        t.exports = r
                    }, {}],
                    112: [function(e, t, n) {
                        "use strict";

                        function r(e) {
                            return '"' + o(e) + '"'
                        }
                        var o = e(95);
                        t.exports = r
                    }, {
                        95: 95
                    }],
                    113: [function(e, t, n) {
                        "use strict";

                        function r(e) {
                            for (var t = arguments.length - 1, n = "Minified React error #" + e + "; visit http://facebook.github.io/react/docs/error-decoder.html?invariant=" + e, r = 0; r < t; r++) n += "&args[]=" + encodeURIComponent(arguments[r + 1]);
                            n += " for the full message or use the non-minified dev environment for full errors and additional helpful warnings.";
                            var o = new Error(n);
                            throw o.name = "Invariant Violation", o.framesToPop = 1, o
                        }
                        t.exports = r
                    }, {}],
                    114: [function(e, t, n) {
                        "use strict";
                        var r = e(60);
                        t.exports = r.renderSubtreeIntoContainer
                    }, {
                        60: 60
                    }],
                    115: [function(e, t, n) {
                        "use strict";
                        var r, o = e(123),
                            i = e(10),
                            a = /^[ \r\n\t\f]/,
                            s = /<(!--|link|noscript|meta|script|style)[ \r\n\t\f\/>]/,
                            u = e(93),
                            l = u(function(e, t) {
                                if (e.namespaceURI !== i.svg || "innerHTML" in e) e.innerHTML = t;
                                else {
                                    r = r || document.createElement("div"), r.innerHTML = "<svg>" + t + "</svg>";
                                    for (var n = r.firstChild; n.firstChild;) e.appendChild(n.firstChild)
                                }
                            });
                        if (o.canUseDOM) {
                            var c = document.createElement("div");
                            c.innerHTML = " ", "" === c.innerHTML && (l = function(e, t) {
                                if (e.parentNode && e.parentNode.replaceChild(e, e), a.test(t) || "<" === t[0] && s.test(t)) {
                                    e.innerHTML = String.fromCharCode(65279) + t;
                                    var n = e.firstChild;
                                    1 === n.data.length ? e.removeChild(n) : n.deleteData(0, 1)
                                } else e.innerHTML = t
                            }), c = null
                        }
                        t.exports = l
                    }, {
                        10: 10,
                        123: 123,
                        93: 93
                    }],
                    116: [function(e, t, n) {
                        "use strict";
                        var r = e(123),
                            o = e(95),
                            i = e(115),
                            a = function(e, t) {
                                if (t) {
                                    var n = e.firstChild;
                                    if (n && n === e.lastChild && 3 === n.nodeType) return void(n.nodeValue = t)
                                }
                                e.textContent = t
                            };
                        r.canUseDOM && ("textContent" in document.documentElement || (a = function(e, t) {
                            return 3 === e.nodeType ? void(e.nodeValue = t) : void i(e, o(t))
                        })), t.exports = a
                    }, {
                        115: 115,
                        123: 123,
                        95: 95
                    }],
                    117: [function(e, t, n) {
                        "use strict";

                        function r(e, t) {
                            var n = null === e || e === !1,
                                r = null === t || t === !1;
                            if (n || r) return n === r;
                            var o = typeof e,
                                i = typeof t;
                            return "string" === o || "number" === o ? "string" === i || "number" === i : "object" === i && e.type === t.type && e.key === t.key
                        }
                        t.exports = r
                    }, {}],
                    118: [function(e, t, n) {
                        "use strict";

                        function r(e, t) {
                            return e && "object" == typeof e && null != e.key ? l.escape(e.key) : t.toString(36)
                        }

                        function o(e, t, n, i) {
                            var d = typeof e;
                            if ("undefined" !== d && "boolean" !== d || (e = null), null === e || "string" === d || "number" === d || "object" === d && e.$$typeof === s) return n(i, e, "" === t ? c + r(e, 0) : t), 1;
                            var f, h, m = 0,
                                v = "" === t ? c : t + p;
                            if (Array.isArray(e))
                                for (var g = 0; g < e.length; g++) f = e[g], h = v + r(f, g), m += o(f, h, n, i);
                            else {
                                var y = u(e);
                                if (y) {
                                    var _, C = y.call(e);
                                    if (y !== e.entries)
                                        for (var b = 0; !(_ = C.next()).done;) f = _.value, h = v + r(f, b++), m += o(f, h, n, i);
                                    else
                                        for (; !(_ = C.next()).done;) {
                                            var E = _.value;
                                            E && (f = E[1], h = v + l.escape(E[0]) + p + r(f, 0), m += o(f, h, n, i))
                                        }
                                } else if ("object" === d) {
                                    var x = "",
                                        w = String(e);
                                    a("31", "[object Object]" === w ? "object with keys {" + Object.keys(e).join(", ") + "}" : w, x)
                                }
                            }
                            return m
                        }

                        function i(e, t, n) {
                            return null == e ? 0 : o(e, "", t, n)
                        }
                        var a = e(113),
                            s = (e(120), e(48)),
                            u = e(104),
                            l = (e(137), e(22)),
                            c = (e(142), "."),
                            p = ":";
                        t.exports = i
                    }, {
                        104: 104,
                        113: 113,
                        120: 120,
                        137: 137,
                        142: 142,
                        22: 22,
                        48: 48
                    }],
                    119: [function(e, t, n) {
                        "use strict";
                        var r = (e(143), e(129)),
                            o = (e(142), r);
                        t.exports = o
                    }, {
                        129: 129,
                        142: 142,
                        143: 143
                    }],
                    120: [function(t, n, r) {
                        "use strict";
                        var o = e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;
                        n.exports = o.ReactCurrentOwner
                    }, {}],
                    121: [function(t, n, r) {
                        "use strict";
                        n.exports = e
                    }, {}],
                    122: [function(e, t, n) {
                        "use strict";
                        var r = e(129),
                            o = {
                                listen: function(e, t, n) {
                                    return e.addEventListener ? (e.addEventListener(t, n, !1), {
                                        remove: function() {
                                            e.removeEventListener(t, n, !1)
                                        }
                                    }) : e.attachEvent ? (e.attachEvent("on" + t, n), {
                                        remove: function() {
                                            e.detachEvent("on" + t, n)
                                        }
                                    }) : void 0
                                },
                                capture: function(e, t, n) {
                                    return e.addEventListener ? (e.addEventListener(t, n, !0), {
                                        remove: function() {
                                            e.removeEventListener(t, n, !0)
                                        }
                                    }) : {
                                        remove: r
                                    }
                                },
                                registerDefault: function() {}
                            };
                        t.exports = o
                    }, {
                        129: 129
                    }],
                    123: [function(e, t, n) {
                        "use strict";
                        var r = !("undefined" == typeof window || !window.document || !window.document.createElement),
                            o = {
                                canUseDOM: r,
                                canUseWorkers: "undefined" != typeof Worker,
                                canUseEventListeners: r && !(!window.addEventListener && !window.attachEvent),
                                canUseViewport: r && !!window.screen,
                                isInWorker: !r
                            };
                        t.exports = o
                    }, {}],
                    124: [function(e, t, n) {
                        "use strict";

                        function r(e) {
                            return e.replace(o, function(e, t) {
                                return t.toUpperCase()
                            })
                        }
                        var o = /-(.)/g;
                        t.exports = r
                    }, {}],
                    125: [function(e, t, n) {
                        "use strict";

                        function r(e) {
                            return o(e.replace(i, "ms-"))
                        }
                        var o = e(124),
                            i = /^-ms-/;
                        t.exports = r
                    }, {
                        124: 124
                    }],
                    126: [function(e, t, n) {
                        "use strict";

                        function r(e, t) {
                            return !(!e || !t) && (e === t || !o(e) && (o(t) ? r(e, t.parentNode) : "contains" in e ? e.contains(t) : !!e.compareDocumentPosition && !!(16 & e.compareDocumentPosition(t))))
                        }
                        var o = e(139);
                        t.exports = r
                    }, {
                        139: 139
                    }],
                    127: [function(e, t, n) {
                        "use strict";

                        function r(e) {
                            var t = e.length;
                            if (Array.isArray(e) || "object" != typeof e && "function" != typeof e ? a(!1) : void 0, "number" != typeof t ? a(!1) : void 0, 0 === t || t - 1 in e ? void 0 : a(!1), "function" == typeof e.callee ? a(!1) : void 0, e.hasOwnProperty) try {
                                return Array.prototype.slice.call(e)
                            } catch (e) {}
                            for (var n = Array(t), r = 0; r < t; r++) n[r] = e[r];
                            return n
                        }

                        function o(e) {
                            return !!e && ("object" == typeof e || "function" == typeof e) && "length" in e && !("setInterval" in e) && "number" != typeof e.nodeType && (Array.isArray(e) || "callee" in e || "item" in e)
                        }

                        function i(e) {
                            return o(e) ? Array.isArray(e) ? e.slice() : r(e) : [e]
                        }
                        var a = e(137);
                        t.exports = i
                    }, {
                        137: 137
                    }],
                    128: [function(e, t, n) {
                        "use strict";

                        function r(e) {
                            var t = e.match(c);
                            return t && t[1].toLowerCase()
                        }

                        function o(e, t) {
                            var n = l;
                            l ? void 0 : u(!1);
                            var o = r(e),
                                i = o && s(o);
                            if (i) {
                                n.innerHTML = i[1] + e + i[2];
                                for (var c = i[0]; c--;) n = n.lastChild
                            } else n.innerHTML = e;
                            var p = n.getElementsByTagName("script");
                            p.length && (t ? void 0 : u(!1), a(p).forEach(t));
                            for (var d = Array.from(n.childNodes); n.lastChild;) n.removeChild(n.lastChild);
                            return d
                        }
                        var i = e(123),
                            a = e(127),
                            s = e(133),
                            u = e(137),
                            l = i.canUseDOM ? document.createElement("div") : null,
                            c = /^\s*<(\w+)/;
                        t.exports = o
                    }, {
                        123: 123,
                        127: 127,
                        133: 133,
                        137: 137
                    }],
                    129: [function(e, t, n) {
                        "use strict";

                        function r(e) {
                            return function() {
                                return e
                            }
                        }
                        var o = function() {};
                        o.thatReturns = r, o.thatReturnsFalse = r(!1), o.thatReturnsTrue = r(!0), o.thatReturnsNull = r(null), o.thatReturnsThis = function() {
                            return this
                        }, o.thatReturnsArgument = function(e) {
                            return e
                        }, t.exports = o
                    }, {}],
                    130: [function(e, t, n) {
                        "use strict";
                        var r = {};
                        t.exports = r
                    }, {}],
                    131: [function(e, t, n) {
                        "use strict";

                        function r(e) {
                            try {
                                e.focus()
                            } catch (e) {}
                        }
                        t.exports = r
                    }, {}],
                    132: [function(e, t, n) {
                        "use strict";

                        function r() {
                            if ("undefined" == typeof document) return null;
                            try {
                                return document.activeElement || document.body
                            } catch (e) {
                                return document.body
                            }
                        }
                        t.exports = r
                    }, {}],
                    133: [function(e, t, n) {
                        "use strict";

                        function r(e) {
                            return a ? void 0 : i(!1), d.hasOwnProperty(e) || (e = "*"), s.hasOwnProperty(e) || ("*" === e ? a.innerHTML = "<link />" : a.innerHTML = "<" + e + "></" + e + ">", s[e] = !a.firstChild), s[e] ? d[e] : null
                        }
                        var o = e(123),
                            i = e(137),
                            a = o.canUseDOM ? document.createElement("div") : null,
                            s = {},
                            u = [1, '<select multiple="true">', "</select>"],
                            l = [1, "<table>", "</table>"],
                            c = [3, "<table><tbody><tr>", "</tr></tbody></table>"],
                            p = [1, '<svg xmlns="http://www.w3.org/2000/svg">', "</svg>"],
                            d = {
                                "*": [1, "?<div>", "</div>"],
                                area: [1, "<map>", "</map>"],
                                col: [2, "<table><tbody></tbody><colgroup>", "</colgroup></table>"],
                                legend: [1, "<fieldset>", "</fieldset>"],
                                param: [1, "<object>", "</object>"],
                                tr: [2, "<table><tbody>", "</tbody></table>"],
                                optgroup: u,
                                option: u,
                                caption: l,
                                colgroup: l,
                                tbody: l,
                                tfoot: l,
                                thead: l,
                                td: c,
                                th: c
                            },
                            f = ["circle", "clipPath", "defs", "ellipse", "g", "image", "line", "linearGradient", "mask", "path", "pattern", "polygon", "polyline", "radialGradient", "rect", "stop", "text", "tspan"];
                        f.forEach(function(e) {
                            d[e] = p, s[e] = !0
                        }), t.exports = r
                    }, {
                        123: 123,
                        137: 137
                    }],
                    134: [function(e, t, n) {
                        "use strict";

                        function r(e) {
                            return e === window ? {
                                x: window.pageXOffset || document.documentElement.scrollLeft,
                                y: window.pageYOffset || document.documentElement.scrollTop
                            } : {
                                x: e.scrollLeft,
                                y: e.scrollTop
                            }
                        }
                        t.exports = r
                    }, {}],
                    135: [function(e, t, n) {
                        "use strict";

                        function r(e) {
                            return e.replace(o, "-$1").toLowerCase()
                        }
                        var o = /([A-Z])/g;
                        t.exports = r
                    }, {}],
                    136: [function(e, t, n) {
                        "use strict";

                        function r(e) {
                            return o(e).replace(i, "-ms-")
                        }
                        var o = e(135),
                            i = /^ms-/;
                        t.exports = r
                    }, {
                        135: 135
                    }],
                    137: [function(e, t, n) {
                        "use strict";

                        function r(e, t, n, r, i, a, s, u) {
                            if (o(t), !e) {
                                var l;
                                if (void 0 === t) l = new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");
                                else {
                                    var c = [n, r, i, a, s, u],
                                        p = 0;
                                    l = new Error(t.replace(/%s/g, function() {
                                        return c[p++]
                                    })), l.name = "Invariant Violation"
                                }
                                throw l.framesToPop = 1, l
                            }
                        }
                        var o = function(e) {};
                        t.exports = r
                    }, {}],
                    138: [function(e, t, n) {
                        "use strict";

                        function r(e) {
                            return !(!e || !("function" == typeof Node ? e instanceof Node : "object" == typeof e && "number" == typeof e.nodeType && "string" == typeof e.nodeName))
                        }
                        t.exports = r
                    }, {}],
                    139: [function(e, t, n) {
                        "use strict";

                        function r(e) {
                            return o(e) && 3 == e.nodeType
                        }
                        var o = e(138);
                        t.exports = r
                    }, {
                        138: 138
                    }],
                    140: [function(e, t, n) {
                        "use strict";

                        function r(e) {
                            var t = {};
                            return function(n) {
                                return t.hasOwnProperty(n) || (t[n] = e.call(this, n)), t[n]
                            }
                        }
                        t.exports = r
                    }, {}],
                    141: [function(e, t, n) {
                        "use strict";

                        function r(e, t) {
                            return e === t ? 0 !== e || 0 !== t || 1 / e === 1 / t : e !== e && t !== t
                        }

                        function o(e, t) {
                            if (r(e, t)) return !0;
                            if ("object" != typeof e || null === e || "object" != typeof t || null === t) return !1;
                            var n = Object.keys(e),
                                o = Object.keys(t);
                            if (n.length !== o.length) return !1;
                            for (var a = 0; a < n.length; a++)
                                if (!i.call(t, n[a]) || !r(e[n[a]], t[n[a]])) return !1;
                            return !0
                        }
                        var i = Object.prototype.hasOwnProperty;
                        t.exports = o
                    }, {}],
                    142: [function(e, t, n) {
                        "use strict";
                        var r = e(129),
                            o = r;
                        t.exports = o
                    }, {
                        129: 129
                    }],
                    143: [function(e, t, n) {
                        "use strict";

                        function r(e) {
                            if (null === e || void 0 === e) throw new TypeError("Object.assign cannot be called with null or undefined");
                            return Object(e)
                        }

                        function o() {
                            try {
                                if (!Object.assign) return !1;
                                var e = new String("abc");
                                if (e[5] = "de", "5" === Object.getOwnPropertyNames(e)[0]) return !1;
                                for (var t = {}, n = 0; n < 10; n++) t["_" + String.fromCharCode(n)] = n;
                                var r = Object.getOwnPropertyNames(t).map(function(e) {
                                    return t[e]
                                });
                                if ("0123456789" !== r.join("")) return !1;
                                var o = {};
                                return "abcdefghijklmnopqrst".split("").forEach(function(e) {
                                    o[e] = e
                                }), "abcdefghijklmnopqrst" === Object.keys(Object.assign({}, o)).join("")
                            } catch (e) {
                                return !1
                            }
                        }
                        var i = Object.prototype.hasOwnProperty,
                            a = Object.prototype.propertyIsEnumerable;
                        t.exports = o() ? Object.assign : function(e, t) {
                            for (var n, o, s = r(e), u = 1; u < arguments.length; u++) {
                                n = Object(arguments[u]);
                                for (var l in n) i.call(n, l) && (s[l] = n[l]);
                                if (Object.getOwnPropertySymbols) {
                                    o = Object.getOwnPropertySymbols(n);
                                    for (var c = 0; c < o.length; c++) a.call(n, o[c]) && (s[o[c]] = n[o[c]])
                                }
                            }
                            return s
                        }
                    }, {}]
                }, {}, [45])(45)
            })
        });
    }());
    SM.currentModule = null;
}, '', {
    "requires": ["react"]
});
YUI.add("react-redux", function(t) {
    SM.currentModule = "react-redux";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        var t = SM["import"];
        ! function(e, r) {
            "object" == typeof exports && "object" == typeof module ? module.exports = r(t("react"), t("redux")) : "function" == typeof define && define.amd ? define(["react", "redux"], r) : "object" == typeof exports ? exports.ReactRedux = r(t("react"), t("redux")) : e.ReactRedux = r(e.React, e.Redux)
        }(this, function(t, e) {
            return function(t) {
                function e(o) {
                    if (r[o]) return r[o].exports;
                    var n = r[o] = {
                        exports: {},
                        id: o,
                        loaded: !1
                    };
                    return t[o].call(n.exports, n, n.exports, e), n.loaded = !0, n.exports
                }
                var r = {};
                return e.m = t, e.c = r, e.p = "", e(0)
            }([function(t, e, r) {
                "use strict";

                function o(t) {
                    return t && t.__esModule ? t : {
                        "default": t
                    }
                }
                e.__esModule = !0, e.connect = e.Provider = void 0;
                var n = r(4),
                    s = o(n),
                    i = r(5),
                    a = o(i);
                e.Provider = s["default"], e.connect = a["default"]
            }, function(e, r) {
                e.exports = t
            }, function(t, e, r) {
                "use strict";
                e.__esModule = !0;
                var o = r(1);
                e["default"] = o.PropTypes.shape({
                    subscribe: o.PropTypes.func.isRequired,
                    dispatch: o.PropTypes.func.isRequired,
                    getState: o.PropTypes.func.isRequired
                })
            }, function(t, e) {
                "use strict";

                function r(t) {
                    "undefined" != typeof console && "function" == typeof console.error && console.error(t);
                    try {
                        throw Error(t)
                    } catch (e) {}
                }
                e.__esModule = !0, e["default"] = r
            }, function(t, e, r) {
                "use strict";

                function o(t) {
                    return t && t.__esModule ? t : {
                        "default": t
                    }
                }

                function n(t, e) {
                    if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
                }

                function s(t, e) {
                    if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                    return !e || "object" != typeof e && "function" != typeof e ? t : e
                }

                function i(t, e) {
                    if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                    t.prototype = Object.create(e && e.prototype, {
                        constructor: {
                            value: t,
                            enumerable: !1,
                            writable: !0,
                            configurable: !0
                        }
                    }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
                }
                e.__esModule = !0, e["default"] = void 0;
                var a = r(1),
                    p = r(2),
                    u = o(p),
                    c = r(3),
                    f = (o(c), function(t) {
                        function e(r, o) {
                            n(this, e);
                            var i = s(this, t.call(this, r, o));
                            return i.store = r.store, i
                        }
                        return i(e, t), e.prototype.getChildContext = function() {
                            return {
                                store: this.store
                            }
                        }, e.prototype.render = function() {
                            var t = this.props.children;
                            return a.Children.only(t)
                        }, e
                    }(a.Component));
                e["default"] = f, f.propTypes = {
                    store: u["default"].isRequired,
                    children: a.PropTypes.element.isRequired
                }, f.childContextTypes = {
                    store: u["default"].isRequired
                }
            }, function(t, e, r) {
                "use strict";

                function o(t) {
                    return t && t.__esModule ? t : {
                        "default": t
                    }
                }

                function n(t, e) {
                    if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
                }

                function s(t, e) {
                    if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                    return !e || "object" != typeof e && "function" != typeof e ? t : e
                }

                function i(t, e) {
                    if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                    t.prototype = Object.create(e && e.prototype, {
                        constructor: {
                            value: t,
                            enumerable: !1,
                            writable: !0,
                            configurable: !0
                        }
                    }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
                }

                function a(t) {
                    return t.displayName || t.name || "Component"
                }

                function p(t, e) {
                    try {
                        return t.apply(e)
                    } catch (r) {
                        return T.value = r, T
                    }
                }

                function u(t, e, r) {
                    var o = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : {},
                        u = !!t,
                        h = t || w,
                        d = void 0;
                    d = "function" == typeof e ? e : e ? v["default"](e) : x;
                    var y = r || C,
                        b = o.pure,
                        g = void 0 === b ? !0 : b,
                        m = o.withRef,
                        O = void 0 === m ? !1 : m,
                        D = g && y !== C,
                        j = _++;
                    return function(t) {
                        function e(t, e, r) {
                            var o = y(t, e, r);
                            return o
                        }
                        var r = "Connect(" + a(t) + ")",
                            o = function(o) {
                                function a(t, e) {
                                    n(this, a);
                                    var i = s(this, o.call(this, t, e));
                                    i.version = j, i.store = t.store || e.store, M["default"](i.store, 'Could not find "store" in either the context or ' + ('props of "' + r + '". ') + "Either wrap the root component in a <Provider>, " + ('or explicitly pass "store" as a prop to "' + r + '".'));
                                    var p = i.store.getState();
                                    return i.state = {
                                        storeState: p
                                    }, i.clearCache(), i
                                }
                                return i(a, o), a.prototype.shouldComponentUpdate = function() {
                                    return !g || this.haveOwnPropsChanged || this.hasStoreStateChanged
                                }, a.prototype.computeStateProps = function(t, e) {
                                    if (!this.finalMapStateToProps) return this.configureFinalMapState(t, e);
                                    var r = t.getState(),
                                        o = this.doStatePropsDependOnOwnProps ? this.finalMapStateToProps(r, e) : this.finalMapStateToProps(r);
                                    return o
                                }, a.prototype.configureFinalMapState = function(t, e) {
                                    var r = h(t.getState(), e),
                                        o = "function" == typeof r;
                                    return this.finalMapStateToProps = o ? r : h, this.doStatePropsDependOnOwnProps = 1 !== this.finalMapStateToProps.length, o ? this.computeStateProps(t, e) : r
                                }, a.prototype.computeDispatchProps = function(t, e) {
                                    if (!this.finalMapDispatchToProps) return this.configureFinalMapDispatch(t, e);
                                    var r = t.dispatch,
                                        o = this.doDispatchPropsDependOnOwnProps ? this.finalMapDispatchToProps(r, e) : this.finalMapDispatchToProps(r);
                                    return o
                                }, a.prototype.configureFinalMapDispatch = function(t, e) {
                                    var r = d(t.dispatch, e),
                                        o = "function" == typeof r;
                                    return this.finalMapDispatchToProps = o ? r : d, this.doDispatchPropsDependOnOwnProps = 1 !== this.finalMapDispatchToProps.length, o ? this.computeDispatchProps(t, e) : r
                                }, a.prototype.updateStatePropsIfNeeded = function() {
                                    var t = this.computeStateProps(this.store, this.props);
                                    return this.stateProps && P["default"](t, this.stateProps) ? !1 : (this.stateProps = t, !0)
                                }, a.prototype.updateDispatchPropsIfNeeded = function() {
                                    var t = this.computeDispatchProps(this.store, this.props);
                                    return this.dispatchProps && P["default"](t, this.dispatchProps) ? !1 : (this.dispatchProps = t, !0)
                                }, a.prototype.updateMergedPropsIfNeeded = function() {
                                    var t = e(this.stateProps, this.dispatchProps, this.props);
                                    return this.mergedProps && D && P["default"](t, this.mergedProps) ? !1 : (this.mergedProps = t, !0)
                                }, a.prototype.isSubscribed = function() {
                                    return "function" == typeof this.unsubscribe
                                }, a.prototype.trySubscribe = function() {
                                    u && !this.unsubscribe && (this.unsubscribe = this.store.subscribe(this.handleChange.bind(this)), this.handleChange())
                                }, a.prototype.tryUnsubscribe = function() {
                                    this.unsubscribe && (this.unsubscribe(), this.unsubscribe = null)
                                }, a.prototype.componentDidMount = function() {
                                    this.trySubscribe()
                                }, a.prototype.componentWillReceiveProps = function(t) {
                                    g && P["default"](t, this.props) || (this.haveOwnPropsChanged = !0)
                                }, a.prototype.componentWillUnmount = function() {
                                    this.tryUnsubscribe(), this.clearCache()
                                }, a.prototype.clearCache = function() {
                                    this.dispatchProps = null, this.stateProps = null, this.mergedProps = null, this.haveOwnPropsChanged = !0, this.hasStoreStateChanged = !0, this.haveStatePropsBeenPrecalculated = !1, this.statePropsPrecalculationError = null, this.renderedElement = null, this.finalMapDispatchToProps = null, this.finalMapStateToProps = null
                                }, a.prototype.handleChange = function() {
                                    if (this.unsubscribe) {
                                        var t = this.store.getState(),
                                            e = this.state.storeState;
                                        if (!g || e !== t) {
                                            if (g && !this.doStatePropsDependOnOwnProps) {
                                                var r = p(this.updateStatePropsIfNeeded, this);
                                                if (!r) return;
                                                r === T && (this.statePropsPrecalculationError = T.value), this.haveStatePropsBeenPrecalculated = !0
                                            }
                                            this.hasStoreStateChanged = !0, this.setState({
                                                storeState: t
                                            })
                                        }
                                    }
                                }, a.prototype.getWrappedInstance = function() {
                                    return M["default"](O, "To access the wrapped instance, you need to specify { withRef: true } as the fourth argument of the connect() call."), this.refs.wrappedInstance
                                }, a.prototype.render = function() {
                                    var e = this.haveOwnPropsChanged,
                                        r = this.hasStoreStateChanged,
                                        o = this.haveStatePropsBeenPrecalculated,
                                        n = this.statePropsPrecalculationError,
                                        s = this.renderedElement;
                                    if (this.haveOwnPropsChanged = !1, this.hasStoreStateChanged = !1, this.haveStatePropsBeenPrecalculated = !1, this.statePropsPrecalculationError = null, n) throw n;
                                    var i = !0,
                                        a = !0;
                                    g && s && (i = r || e && this.doStatePropsDependOnOwnProps, a = e && this.doDispatchPropsDependOnOwnProps);
                                    var p = !1,
                                        u = !1;
                                    o ? p = !0 : i && (p = this.updateStatePropsIfNeeded()), a && (u = this.updateDispatchPropsIfNeeded());
                                    var h = !0;
                                    return h = p || u || e ? this.updateMergedPropsIfNeeded() : !1, !h && s ? s : this.renderedElement = O ? f.createElement(t, c({}, this.mergedProps, {
                                        ref: "wrappedInstance"
                                    })) : f.createElement(t, this.mergedProps)
                                }, a
                            }(f.Component);
                        return o.displayName = r, o.WrappedComponent = t, o.contextTypes = {
                            store: l["default"]
                        }, o.propTypes = {
                            store: l["default"]
                        }, S["default"](o, t)
                    }
                }
                var c = Object.assign || function(t) {
                    for (var e = 1; e < arguments.length; e++) {
                        var r = arguments[e];
                        for (var o in r) Object.prototype.hasOwnProperty.call(r, o) && (t[o] = r[o])
                    }
                    return t
                };
                e.__esModule = !0, e["default"] = u;
                var f = r(1),
                    h = r(2),
                    l = o(h),
                    d = r(6),
                    P = o(d),
                    y = r(7),
                    v = o(y),
                    b = r(3),
                    g = (o(b), r(12)),
                    m = (o(g), r(8)),
                    S = o(m),
                    O = r(9),
                    M = o(O),
                    w = function(t) {
                        return {}
                    },
                    x = function(t) {
                        return {
                            dispatch: t
                        }
                    },
                    C = function(t, e, r) {
                        return c({}, r, t, e)
                    },
                    T = {
                        value: null
                    },
                    _ = 0
            }, function(t, e) {
                "use strict";

                function r(t, e) {
                    if (t === e) return !0;
                    var r = Object.keys(t),
                        o = Object.keys(e);
                    if (r.length !== o.length) return !1;
                    for (var n = Object.prototype.hasOwnProperty, s = 0; r.length > s; s++)
                        if (!n.call(e, r[s]) || t[r[s]] !== e[r[s]]) return !1;
                    return !0
                }
                e.__esModule = !0, e["default"] = r
            }, function(t, e, r) {
                "use strict";

                function o(t) {
                    return function(e) {
                        return n.bindActionCreators(t, e)
                    }
                }
                e.__esModule = !0, e["default"] = o;
                var n = r(13)
            }, function(t, e) {
                "use strict";
                var r = {
                        childContextTypes: !0,
                        contextTypes: !0,
                        defaultProps: !0,
                        displayName: !0,
                        getDefaultProps: !0,
                        mixins: !0,
                        propTypes: !0,
                        type: !0
                    },
                    o = {
                        name: !0,
                        length: !0,
                        prototype: !0,
                        caller: !0,
                        arguments: !0,
                        arity: !0
                    };
                t.exports = function(t, e) {
                    for (var n = Object.getOwnPropertyNames(e), s = 0; n.length > s; ++s) r[n[s]] || o[n[s]] || (t[n[s]] = e[n[s]]);
                    return t
                }
            }, function(t, e, r) {
                "use strict";
                var o = function(t, e, r, o, n, s, i, a) {
                    if (!t) {
                        var p;
                        if (void 0 === e) p = Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");
                        else {
                            var u = [r, o, n, s, i, a],
                                c = 0;
                            p = Error(e.replace(/%s/g, function() {
                                return u[c++]
                            })), p.name = "Invariant Violation"
                        }
                        throw p.framesToPop = 1, p
                    }
                };
                t.exports = o
            }, function(t, e) {
                function r(t) {
                    var e = !1;
                    if (null != t && "function" != typeof t.toString) try {
                        e = !!(t + "")
                    } catch (r) {}
                    return e
                }
                t.exports = r
            }, function(t, e) {
                function r(t) {
                    return !!t && "object" == typeof t
                }
                t.exports = r
            }, function(t, e, r) {
                function o(t) {
                    if (!s(t) || c.call(t) != i || n(t)) return !1;
                    var e = a;
                    if ("function" == typeof t.constructor && (e = f(t)), null === e) return !0;
                    var r = e.constructor;
                    return "function" == typeof r && r instanceof r && p.call(r) == u
                }
                var n = r(10),
                    s = r(11),
                    i = "[object Object]",
                    a = Object.prototype,
                    p = Function.prototype.toString,
                    u = p.call(Object),
                    c = a.toString,
                    f = Object.getPrototypeOf;
                t.exports = o
            }, function(t, r) {
                t.exports = e
            }])
        })
    }(), SM.currentModule = null
}, "", {
    requires: ["redux"]
});
YUI.add('react', function(Y) {
    SM.currentModule = 'react';
    var exports = {};
    var module = SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    (function() {
        /**
         * React (with addons) v15.4.2
         *
         * Copyright 2013-present, Facebook, Inc.
         * All rights reserved.
         *
         * This source code is licensed under the BSD-style license found in the
         * LICENSE file in the root directory of this source tree. An additional grant
         * of patent rights can be found in the PATENTS file in the same directory.
         *
         */
        ! function(e) {
            if ("object" == typeof exports && "undefined" != typeof module) module.exports = e();
            else if ("function" == typeof define && define.amd) define([], e);
            else {
                var t;
                t = "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : this, t.React = e()
            }
        }(function() {
            return function e(t, n, r) {
                function o(a, s) {
                    if (!n[a]) {
                        if (!t[a]) {
                            var u = "function" == typeof require && require;
                            if (!s && u) return u(a, !0);
                            if (i) return i(a, !0);
                            var c = new Error("Cannot find module '" + a + "'");
                            throw c.code = "MODULE_NOT_FOUND", c
                        }
                        var p = n[a] = {
                            exports: {}
                        };
                        t[a][0].call(p.exports, function(e) {
                            var n = t[a][1][e];
                            return o(n ? n : e)
                        }, p, p.exports, e, t, n, r)
                    }
                    return n[a].exports
                }
                for (var i = "function" == typeof require && require, a = 0; a < r.length; a++) o(r[a]);
                return o
            }({
                1: [function(e, t, n) {
                    "use strict";

                    function r(e, t) {
                        var n = {};
                        return n[e.toLowerCase()] = t.toLowerCase(), n["Webkit" + e] = "webkit" + t, n["Moz" + e] = "moz" + t, n["ms" + e] = "MS" + t, n["O" + e] = "o" + t.toLowerCase(), n
                    }

                    function o(e) {
                        if (s[e]) return s[e];
                        if (!a[e]) return e;
                        var t = a[e];
                        for (var n in t)
                            if (t.hasOwnProperty(n) && n in u) return s[e] = t[n];
                        return ""
                    }
                    var i = e(40),
                        a = {
                            animationend: r("Animation", "AnimationEnd"),
                            animationiteration: r("Animation", "AnimationIteration"),
                            animationstart: r("Animation", "AnimationStart"),
                            transitionend: r("Transition", "TransitionEnd")
                        },
                        s = {},
                        u = {};
                    i.canUseDOM && (u = document.createElement("div").style, "AnimationEvent" in window || (delete a.animationend.animation, delete a.animationiteration.animation, delete a.animationstart.animation), "TransitionEvent" in window || delete a.transitionend.transition), t.exports = o
                }, {
                    40: 40
                }],
                2: [function(e, t, n) {
                    "use strict";

                    function r(e) {
                        var t = /[=:]/g,
                            n = {
                                "=": "=0",
                                ":": "=2"
                            },
                            r = ("" + e).replace(t, function(e) {
                                return n[e]
                            });
                        return "$" + r
                    }

                    function o(e) {
                        var t = /(=0|=2)/g,
                            n = {
                                "=0": "=",
                                "=2": ":"
                            },
                            r = "." === e[0] && "$" === e[1] ? e.substring(2) : e.substring(1);
                        return ("" + r).replace(t, function(e) {
                            return n[e]
                        })
                    }
                    var i = {
                        escape: r,
                        unescape: o
                    };
                    t.exports = i
                }, {}],
                3: [function(e, t, n) {
                    "use strict";
                    var r = e(18),
                        o = e(24),
                        i = {
                            linkState: function(e) {
                                return new r(this.state[e], o.createStateKeySetter(this, e))
                            }
                        };
                    t.exports = i
                }, {
                    18: 18,
                    24: 24
                }],
                4: [function(e, t, n) {
                    "use strict";
                    var r = e(35),
                        o = (e(43), function(e) {
                            var t = this;
                            if (t.instancePool.length) {
                                var n = t.instancePool.pop();
                                return t.call(n, e), n
                            }
                            return new t(e)
                        }),
                        i = function(e, t) {
                            var n = this;
                            if (n.instancePool.length) {
                                var r = n.instancePool.pop();
                                return n.call(r, e, t), r
                            }
                            return new n(e, t)
                        },
                        a = function(e, t, n) {
                            var r = this;
                            if (r.instancePool.length) {
                                var o = r.instancePool.pop();
                                return r.call(o, e, t, n), o
                            }
                            return new r(e, t, n)
                        },
                        s = function(e, t, n, r) {
                            var o = this;
                            if (o.instancePool.length) {
                                var i = o.instancePool.pop();
                                return o.call(i, e, t, n, r), i
                            }
                            return new o(e, t, n, r)
                        },
                        u = function(e) {
                            var t = this;
                            e instanceof t ? void 0 : r("25"), e.destructor(), t.instancePool.length < t.poolSize && t.instancePool.push(e)
                        },
                        c = 10,
                        p = o,
                        l = function(e, t) {
                            var n = e;
                            return n.instancePool = [], n.getPooled = t || p, n.poolSize || (n.poolSize = c), n.release = u, n
                        },
                        f = {
                            addPoolingTo: l,
                            oneArgumentPooler: o,
                            twoArgumentPooler: i,
                            threeArgumentPooler: a,
                            fourArgumentPooler: s
                        };
                    t.exports = f
                }, {
                    35: 35,
                    43: 43
                }],
                5: [function(e, t, n) {
                    "use strict";
                    var r = e(46),
                        o = e(9),
                        i = e(11),
                        a = e(23),
                        s = e(10),
                        u = e(14),
                        c = e(15),
                        p = e(21),
                        l = e(28),
                        f = e(34),
                        d = (e(45), c.createElement),
                        h = c.createFactory,
                        v = c.cloneElement,
                        y = r,
                        m = {
                            Children: {
                                map: o.map,
                                forEach: o.forEach,
                                count: o.count,
                                toArray: o.toArray,
                                only: f
                            },
                            Component: i,
                            PureComponent: a,
                            createElement: d,
                            cloneElement: v,
                            isValidElement: c.isValidElement,
                            PropTypes: p,
                            createClass: s.createClass,
                            createFactory: h,
                            createMixin: function(e) {
                                return e
                            },
                            DOM: u,
                            version: l,
                            __spread: y
                        };
                    t.exports = m
                }, {
                    10: 10,
                    11: 11,
                    14: 14,
                    15: 15,
                    21: 21,
                    23: 23,
                    28: 28,
                    34: 34,
                    45: 45,
                    46: 46,
                    9: 9
                }],
                6: [function(e, t, n) {
                    "use strict";

                    function r() {
                        if (!o) {
                            var t = e(30);
                            o = t.__SECRET_INJECTED_REACT_DOM_DO_NOT_USE_OR_YOU_WILL_BE_FIRED
                        }
                        return o
                    }
                    var o;
                    n.getReactDOM = r
                }, {
                    30: 30
                }],
                7: [function(e, t, n) {
                    "use strict";

                    function r(e, t) {
                        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                    }

                    function o(e, t) {
                        if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                        return !t || "object" != typeof t && "function" != typeof t ? e : t
                    }

                    function i(e, t) {
                        if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
                        e.prototype = Object.create(t && t.prototype, {
                            constructor: {
                                value: e,
                                enumerable: !1,
                                writable: !0,
                                configurable: !0
                            }
                        }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
                    }

                    function a(e) {
                        var t = "transition" + e + "Timeout",
                            n = "transition" + e;
                        return function(e) {
                            if (e[n]) {
                                if (null == e[t]) return new Error(t + " wasn't supplied to ReactCSSTransitionGroup: this can cause unreliable animations and won't be supported in a future version of React. See https://fb.me/react-animation-transition-group-timeout for more information.");
                                if ("number" != typeof e[t]) return new Error(t + " must be a number (in milliseconds)")
                            }
                        }
                    }
                    var s = e(46),
                        u = e(5),
                        c = e(27),
                        p = e(8),
                        l = function(e) {
                            function t() {
                                var n, i, a;
                                r(this, t);
                                for (var s = arguments.length, c = Array(s), l = 0; l < s; l++) c[l] = arguments[l];
                                return n = i = o(this, e.call.apply(e, [this].concat(c))), i._wrapChild = function(e) {
                                    return u.createElement(p, {
                                        name: i.props.transitionName,
                                        appear: i.props.transitionAppear,
                                        enter: i.props.transitionEnter,
                                        leave: i.props.transitionLeave,
                                        appearTimeout: i.props.transitionAppearTimeout,
                                        enterTimeout: i.props.transitionEnterTimeout,
                                        leaveTimeout: i.props.transitionLeaveTimeout
                                    }, e)
                                }, a = n, o(i, a)
                            }
                            return i(t, e), t.prototype.render = function() {
                                return u.createElement(c, s({}, this.props, {
                                    childFactory: this._wrapChild
                                }))
                            }, t
                        }(u.Component);
                    l.displayName = "ReactCSSTransitionGroup", l.propTypes = {
                        transitionName: p.propTypes.name,
                        transitionAppear: u.PropTypes.bool,
                        transitionEnter: u.PropTypes.bool,
                        transitionLeave: u.PropTypes.bool,
                        transitionAppearTimeout: a("Appear"),
                        transitionEnterTimeout: a("Enter"),
                        transitionLeaveTimeout: a("Leave")
                    }, l.defaultProps = {
                        transitionAppear: !1,
                        transitionEnter: !0,
                        transitionLeave: !0
                    }, t.exports = l
                }, {
                    27: 27,
                    46: 46,
                    5: 5,
                    8: 8
                }],
                8: [function(e, t, n) {
                    "use strict";
                    var r = e(5),
                        o = e(6),
                        i = e(39),
                        a = e(26),
                        s = e(34),
                        u = 17,
                        c = r.createClass({
                            displayName: "ReactCSSTransitionGroupChild",
                            propTypes: {
                                name: r.PropTypes.oneOfType([r.PropTypes.string, r.PropTypes.shape({
                                    enter: r.PropTypes.string,
                                    leave: r.PropTypes.string,
                                    active: r.PropTypes.string
                                }), r.PropTypes.shape({
                                    enter: r.PropTypes.string,
                                    enterActive: r.PropTypes.string,
                                    leave: r.PropTypes.string,
                                    leaveActive: r.PropTypes.string,
                                    appear: r.PropTypes.string,
                                    appearActive: r.PropTypes.string
                                })]).isRequired,
                                appear: r.PropTypes.bool,
                                enter: r.PropTypes.bool,
                                leave: r.PropTypes.bool,
                                appearTimeout: r.PropTypes.number,
                                enterTimeout: r.PropTypes.number,
                                leaveTimeout: r.PropTypes.number
                            },
                            transition: function(e, t, n) {
                                var r = o.getReactDOM().findDOMNode(this);
                                if (!r) return void(t && t());
                                var s = this.props.name[e] || this.props.name + "-" + e,
                                    u = this.props.name[e + "Active"] || s + "-active",
                                    c = null,
                                    p = function(e) {
                                        e && e.target !== r || (clearTimeout(c), i.removeClass(r, s), i.removeClass(r, u), a.removeEndEventListener(r, p), t && t())
                                    };
                                i.addClass(r, s), this.queueClassAndNode(u, r), n ? (c = setTimeout(p, n), this.transitionTimeouts.push(c)) : a.addEndEventListener(r, p)
                            },
                            queueClassAndNode: function(e, t) {
                                this.classNameAndNodeQueue.push({
                                    className: e,
                                    node: t
                                }), this.timeout || (this.timeout = setTimeout(this.flushClassNameAndNodeQueue, u))
                            },
                            flushClassNameAndNodeQueue: function() {
                                this.isMounted() && this.classNameAndNodeQueue.forEach(function(e) {
                                    i.addClass(e.node, e.className)
                                }), this.classNameAndNodeQueue.length = 0, this.timeout = null
                            },
                            componentWillMount: function() {
                                this.classNameAndNodeQueue = [], this.transitionTimeouts = []
                            },
                            componentWillUnmount: function() {
                                this.timeout && clearTimeout(this.timeout), this.transitionTimeouts.forEach(function(e) {
                                    clearTimeout(e)
                                }), this.classNameAndNodeQueue.length = 0
                            },
                            componentWillAppear: function(e) {
                                this.props.appear ? this.transition("appear", e, this.props.appearTimeout) : e()
                            },
                            componentWillEnter: function(e) {
                                this.props.enter ? this.transition("enter", e, this.props.enterTimeout) : e()
                            },
                            componentWillLeave: function(e) {
                                this.props.leave ? this.transition("leave", e, this.props.leaveTimeout) : e()
                            },
                            render: function() {
                                return s(this.props.children)
                            }
                        });
                    t.exports = c
                }, {
                    26: 26,
                    34: 34,
                    39: 39,
                    5: 5,
                    6: 6
                }],
                9: [function(e, t, n) {
                    "use strict";

                    function r(e) {
                        return ("" + e).replace(b, "$&/")
                    }

                    function o(e, t) {
                        this.func = e, this.context = t, this.count = 0
                    }

                    function i(e, t, n) {
                        var r = e.func,
                            o = e.context;
                        r.call(o, t, e.count++)
                    }

                    function a(e, t, n) {
                        if (null == e) return e;
                        var r = o.getPooled(t, n);
                        m(e, i, r), o.release(r)
                    }

                    function s(e, t, n, r) {
                        this.result = e, this.keyPrefix = t, this.func = n, this.context = r, this.count = 0
                    }

                    function u(e, t, n) {
                        var o = e.result,
                            i = e.keyPrefix,
                            a = e.func,
                            s = e.context,
                            u = a.call(s, t, e.count++);
                        Array.isArray(u) ? c(u, o, n, y.thatReturnsArgument) : null != u && (v.isValidElement(u) && (u = v.cloneAndReplaceKey(u, i + (!u.key || t && t.key === u.key ? "" : r(u.key) + "/") + n)), o.push(u))
                    }

                    function c(e, t, n, o, i) {
                        var a = "";
                        null != n && (a = r(n) + "/");
                        var c = s.getPooled(t, a, o, i);
                        m(e, u, c), s.release(c)
                    }

                    function p(e, t, n) {
                        if (null == e) return e;
                        var r = [];
                        return c(e, r, null, t, n), r
                    }

                    function l(e, t, n) {
                        return null
                    }

                    function f(e, t) {
                        return m(e, l, null)
                    }

                    function d(e) {
                        var t = [];
                        return c(e, t, null, y.thatReturnsArgument), t
                    }
                    var h = e(4),
                        v = e(15),
                        y = e(41),
                        m = e(37),
                        g = h.twoArgumentPooler,
                        E = h.fourArgumentPooler,
                        b = /\/+/g;
                    o.prototype.destructor = function() {
                        this.func = null, this.context = null, this.count = 0
                    }, h.addPoolingTo(o, g), s.prototype.destructor = function() {
                        this.result = null, this.keyPrefix = null, this.func = null, this.context = null, this.count = 0
                    }, h.addPoolingTo(s, E);
                    var T = {
                        forEach: a,
                        map: p,
                        mapIntoWithKeyPrefixInternal: c,
                        count: f,
                        toArray: d
                    };
                    t.exports = T
                }, {
                    15: 15,
                    37: 37,
                    4: 4,
                    41: 41
                }],
                10: [function(e, t, n) {
                    "use strict";

                    function r(e) {
                        return e
                    }

                    function o(e, t) {
                        var n = b.hasOwnProperty(t) ? b[t] : null;
                        _.hasOwnProperty(t) && ("OVERRIDE_BASE" !== n ? f("73", t) : void 0), e && ("DEFINE_MANY" !== n && "DEFINE_MANY_MERGED" !== n ? f("74", t) : void 0)
                    }

                    function i(e, t) {
                        if (t) {
                            "function" == typeof t ? f("75") : void 0, v.isValidElement(t) ? f("76") : void 0;
                            var n = e.prototype,
                                r = n.__reactAutoBindPairs;
                            t.hasOwnProperty(g) && T.mixins(e, t.mixins);
                            for (var i in t)
                                if (t.hasOwnProperty(i) && i !== g) {
                                    var a = t[i],
                                        s = n.hasOwnProperty(i);
                                    if (o(s, i), T.hasOwnProperty(i)) T[i](e, a);
                                    else {
                                        var p = b.hasOwnProperty(i),
                                            l = "function" == typeof a,
                                            d = l && !p && !s && t.autobind !== !1;
                                        if (d) r.push(i, a), n[i] = a;
                                        else if (s) {
                                            var h = b[i];
                                            !p || "DEFINE_MANY_MERGED" !== h && "DEFINE_MANY" !== h ? f("77", h, i) : void 0, "DEFINE_MANY_MERGED" === h ? n[i] = u(n[i], a) : "DEFINE_MANY" === h && (n[i] = c(n[i], a))
                                        } else n[i] = a
                                    }
                                }
                        }
                    }

                    function a(e, t) {
                        if (t)
                            for (var n in t) {
                                var r = t[n];
                                if (t.hasOwnProperty(n)) {
                                    var o = n in T;
                                    o ? f("78", n) : void 0;
                                    var i = n in e;
                                    i ? f("79", n) : void 0, e[n] = r
                                }
                            }
                    }

                    function s(e, t) {
                        e && t && "object" == typeof e && "object" == typeof t ? void 0 : f("80");
                        for (var n in t) t.hasOwnProperty(n) && (void 0 !== e[n] ? f("81", n) : void 0, e[n] = t[n]);
                        return e
                    }

                    function u(e, t) {
                        return function() {
                            var n = e.apply(this, arguments),
                                r = t.apply(this, arguments);
                            if (null == n) return r;
                            if (null == r) return n;
                            var o = {};
                            return s(o, n), s(o, r), o
                        }
                    }

                    function c(e, t) {
                        return function() {
                            e.apply(this, arguments), t.apply(this, arguments)
                        }
                    }

                    function p(e, t) {
                        var n = t.bind(e);
                        return n
                    }

                    function l(e) {
                        for (var t = e.__reactAutoBindPairs, n = 0; n < t.length; n += 2) {
                            var r = t[n],
                                o = t[n + 1];
                            e[r] = p(e, o)
                        }
                    }
                    var f = e(35),
                        d = e(46),
                        h = e(11),
                        v = e(15),
                        y = (e(20), e(19)),
                        m = e(42),
                        g = (e(43), e(45), "mixins"),
                        E = [],
                        b = {
                            mixins: "DEFINE_MANY",
                            statics: "DEFINE_MANY",
                            propTypes: "DEFINE_MANY",
                            contextTypes: "DEFINE_MANY",
                            childContextTypes: "DEFINE_MANY",
                            getDefaultProps: "DEFINE_MANY_MERGED",
                            getInitialState: "DEFINE_MANY_MERGED",
                            getChildContext: "DEFINE_MANY_MERGED",
                            render: "DEFINE_ONCE",
                            componentWillMount: "DEFINE_MANY",
                            componentDidMount: "DEFINE_MANY",
                            componentWillReceiveProps: "DEFINE_MANY",
                            shouldComponentUpdate: "DEFINE_ONCE",
                            componentWillUpdate: "DEFINE_MANY",
                            componentDidUpdate: "DEFINE_MANY",
                            componentWillUnmount: "DEFINE_MANY",
                            updateComponent: "OVERRIDE_BASE"
                        },
                        T = {
                            displayName: function(e, t) {
                                e.displayName = t
                            },
                            mixins: function(e, t) {
                                if (t)
                                    for (var n = 0; n < t.length; n++) i(e, t[n])
                            },
                            childContextTypes: function(e, t) {
                                e.childContextTypes = d({}, e.childContextTypes, t)
                            },
                            contextTypes: function(e, t) {
                                e.contextTypes = d({}, e.contextTypes, t)
                            },
                            getDefaultProps: function(e, t) {
                                e.getDefaultProps ? e.getDefaultProps = u(e.getDefaultProps, t) : e.getDefaultProps = t
                            },
                            propTypes: function(e, t) {
                                e.propTypes = d({}, e.propTypes, t)
                            },
                            statics: function(e, t) {
                                a(e, t)
                            },
                            autobind: function() {}
                        },
                        _ = {
                            replaceState: function(e, t) {
                                this.updater.enqueueReplaceState(this, e), t && this.updater.enqueueCallback(this, t, "replaceState")
                            },
                            isMounted: function() {
                                return this.updater.isMounted(this)
                            }
                        },
                        P = function() {};
                    d(P.prototype, h.prototype, _);
                    var w = {
                        createClass: function(e) {
                            var t = r(function(e, n, r) {
                                this.__reactAutoBindPairs.length && l(this), this.props = e, this.context = n, this.refs = m, this.updater = r || y, this.state = null;
                                var o = this.getInitialState ? this.getInitialState() : null;
                                "object" != typeof o || Array.isArray(o) ? f("82", t.displayName || "ReactCompositeComponent") : void 0, this.state = o
                            });
                            t.prototype = new P, t.prototype.constructor = t, t.prototype.__reactAutoBindPairs = [], E.forEach(i.bind(null, t)), i(t, e), t.getDefaultProps && (t.defaultProps = t.getDefaultProps()), t.prototype.render ? void 0 : f("83");
                            for (var n in b) t.prototype[n] || (t.prototype[n] = null);
                            return t
                        },
                        injection: {
                            injectMixin: function(e) {
                                E.push(e)
                            }
                        }
                    };
                    t.exports = w
                }, {
                    11: 11,
                    15: 15,
                    19: 19,
                    20: 20,
                    35: 35,
                    42: 42,
                    43: 43,
                    45: 45,
                    46: 46
                }],
                11: [function(e, t, n) {
                    "use strict";

                    function r(e, t, n) {
                        this.props = e, this.context = t, this.refs = a, this.updater = n || i
                    }
                    var o = e(35),
                        i = e(19),
                        a = (e(31), e(42));
                    e(43), e(45);
                    r.prototype.isReactComponent = {}, r.prototype.setState = function(e, t) {
                        "object" != typeof e && "function" != typeof e && null != e ? o("85") : void 0, this.updater.enqueueSetState(this, e), t && this.updater.enqueueCallback(this, t, "setState")
                    }, r.prototype.forceUpdate = function(e) {
                        this.updater.enqueueForceUpdate(this), e && this.updater.enqueueCallback(this, e, "forceUpdate")
                    };
                    t.exports = r
                }, {
                    19: 19,
                    31: 31,
                    35: 35,
                    42: 42,
                    43: 43,
                    45: 45
                }],
                12: [function(e, t, n) {
                    "use strict";
                    var r = e(36),
                        o = {
                            shouldComponentUpdate: function(e, t) {
                                return r(this, e, t)
                            }
                        };
                    t.exports = o
                }, {
                    36: 36
                }],
                13: [function(e, t, n) {
                    "use strict";
                    var r = {
                        current: null
                    };
                    t.exports = r
                }, {}],
                14: [function(e, t, n) {
                    "use strict";
                    var r = e(15),
                        o = r.createFactory,
                        i = {
                            a: o("a"),
                            abbr: o("abbr"),
                            address: o("address"),
                            area: o("area"),
                            article: o("article"),
                            aside: o("aside"),
                            audio: o("audio"),
                            b: o("b"),
                            base: o("base"),
                            bdi: o("bdi"),
                            bdo: o("bdo"),
                            big: o("big"),
                            blockquote: o("blockquote"),
                            body: o("body"),
                            br: o("br"),
                            button: o("button"),
                            canvas: o("canvas"),
                            caption: o("caption"),
                            cite: o("cite"),
                            code: o("code"),
                            col: o("col"),
                            colgroup: o("colgroup"),
                            data: o("data"),
                            datalist: o("datalist"),
                            dd: o("dd"),
                            del: o("del"),
                            details: o("details"),
                            dfn: o("dfn"),
                            dialog: o("dialog"),
                            div: o("div"),
                            dl: o("dl"),
                            dt: o("dt"),
                            em: o("em"),
                            embed: o("embed"),
                            fieldset: o("fieldset"),
                            figcaption: o("figcaption"),
                            figure: o("figure"),
                            footer: o("footer"),
                            form: o("form"),
                            h1: o("h1"),
                            h2: o("h2"),
                            h3: o("h3"),
                            h4: o("h4"),
                            h5: o("h5"),
                            h6: o("h6"),
                            head: o("head"),
                            header: o("header"),
                            hgroup: o("hgroup"),
                            hr: o("hr"),
                            html: o("html"),
                            i: o("i"),
                            iframe: o("iframe"),
                            img: o("img"),
                            input: o("input"),
                            ins: o("ins"),
                            kbd: o("kbd"),
                            keygen: o("keygen"),
                            label: o("label"),
                            legend: o("legend"),
                            li: o("li"),
                            link: o("link"),
                            main: o("main"),
                            map: o("map"),
                            mark: o("mark"),
                            menu: o("menu"),
                            menuitem: o("menuitem"),
                            meta: o("meta"),
                            meter: o("meter"),
                            nav: o("nav"),
                            noscript: o("noscript"),
                            object: o("object"),
                            ol: o("ol"),
                            optgroup: o("optgroup"),
                            option: o("option"),
                            output: o("output"),
                            p: o("p"),
                            param: o("param"),
                            picture: o("picture"),
                            pre: o("pre"),
                            progress: o("progress"),
                            q: o("q"),
                            rp: o("rp"),
                            rt: o("rt"),
                            ruby: o("ruby"),
                            s: o("s"),
                            samp: o("samp"),
                            script: o("script"),
                            section: o("section"),
                            select: o("select"),
                            small: o("small"),
                            source: o("source"),
                            span: o("span"),
                            strong: o("strong"),
                            style: o("style"),
                            sub: o("sub"),
                            summary: o("summary"),
                            sup: o("sup"),
                            table: o("table"),
                            tbody: o("tbody"),
                            td: o("td"),
                            textarea: o("textarea"),
                            tfoot: o("tfoot"),
                            th: o("th"),
                            thead: o("thead"),
                            time: o("time"),
                            title: o("title"),
                            tr: o("tr"),
                            track: o("track"),
                            u: o("u"),
                            ul: o("ul"),
                            var: o("var"),
                            video: o("video"),
                            wbr: o("wbr"),
                            circle: o("circle"),
                            clipPath: o("clipPath"),
                            defs: o("defs"),
                            ellipse: o("ellipse"),
                            g: o("g"),
                            image: o("image"),
                            line: o("line"),
                            linearGradient: o("linearGradient"),
                            mask: o("mask"),
                            path: o("path"),
                            pattern: o("pattern"),
                            polygon: o("polygon"),
                            polyline: o("polyline"),
                            radialGradient: o("radialGradient"),
                            rect: o("rect"),
                            stop: o("stop"),
                            svg: o("svg"),
                            text: o("text"),
                            tspan: o("tspan")
                        };
                    t.exports = i
                }, {
                    15: 15
                }],
                15: [function(e, t, n) {
                    "use strict";

                    function r(e) {
                        return void 0 !== e.ref
                    }

                    function o(e) {
                        return void 0 !== e.key
                    }
                    var i = e(46),
                        a = e(13),
                        s = (e(45), e(31), Object.prototype.hasOwnProperty),
                        u = e(16),
                        c = {
                            key: !0,
                            ref: !0,
                            __self: !0,
                            __source: !0
                        },
                        p = function(e, t, n, r, o, i, a) {
                            var s = {
                                $$typeof: u,
                                type: e,
                                key: t,
                                ref: n,
                                props: a,
                                _owner: i
                            };
                            return s
                        };
                    p.createElement = function(e, t, n) {
                        var i, u = {},
                            l = null,
                            f = null,
                            d = null,
                            h = null;
                        if (null != t) {
                            r(t) && (f = t.ref), o(t) && (l = "" + t.key), d = void 0 === t.__self ? null : t.__self, h = void 0 === t.__source ? null : t.__source;
                            for (i in t) s.call(t, i) && !c.hasOwnProperty(i) && (u[i] = t[i])
                        }
                        var v = arguments.length - 2;
                        if (1 === v) u.children = n;
                        else if (v > 1) {
                            for (var y = Array(v), m = 0; m < v; m++) y[m] = arguments[m + 2];
                            u.children = y
                        }
                        if (e && e.defaultProps) {
                            var g = e.defaultProps;
                            for (i in g) void 0 === u[i] && (u[i] = g[i])
                        }
                        return p(e, l, f, d, h, a.current, u)
                    }, p.createFactory = function(e) {
                        var t = p.createElement.bind(null, e);
                        return t.type = e, t
                    }, p.cloneAndReplaceKey = function(e, t) {
                        var n = p(e.type, t, e.ref, e._self, e._source, e._owner, e.props);
                        return n
                    }, p.cloneElement = function(e, t, n) {
                        var u, l = i({}, e.props),
                            f = e.key,
                            d = e.ref,
                            h = e._self,
                            v = e._source,
                            y = e._owner;
                        if (null != t) {
                            r(t) && (d = t.ref, y = a.current), o(t) && (f = "" + t.key);
                            var m;
                            e.type && e.type.defaultProps && (m = e.type.defaultProps);
                            for (u in t) s.call(t, u) && !c.hasOwnProperty(u) && (void 0 === t[u] && void 0 !== m ? l[u] = m[u] : l[u] = t[u])
                        }
                        var g = arguments.length - 2;
                        if (1 === g) l.children = n;
                        else if (g > 1) {
                            for (var E = Array(g), b = 0; b < g; b++) E[b] = arguments[b + 2];
                            l.children = E
                        }
                        return p(e.type, f, d, h, v, y, l)
                    }, p.isValidElement = function(e) {
                        return "object" == typeof e && null !== e && e.$$typeof === u
                    }, t.exports = p
                }, {
                    13: 13,
                    16: 16,
                    31: 31,
                    45: 45,
                    46: 46
                }],
                16: [function(e, t, n) {
                    "use strict";
                    var r = "function" == typeof Symbol && Symbol.for && Symbol.for("react.element") || 60103;
                    t.exports = r
                }, {}],
                17: [function(e, t, n) {
                    "use strict";
                    var r = e(35),
                        o = e(9),
                        i = e(15),
                        a = e(41),
                        s = (e(43), e(45), {
                            create: function(e) {
                                if ("object" != typeof e || !e || Array.isArray(e)) return e;
                                if (i.isValidElement(e)) return e;
                                1 === e.nodeType ? r("0") : void 0;
                                var t = [];
                                for (var n in e) o.mapIntoWithKeyPrefixInternal(e[n], t, n, a.thatReturnsArgument);
                                return t
                            }
                        });
                    t.exports = s
                }, {
                    15: 15,
                    35: 35,
                    41: 41,
                    43: 43,
                    45: 45,
                    9: 9
                }],
                18: [function(e, t, n) {
                    "use strict";

                    function r(e, t) {
                        this.value = e, this.requestChange = t
                    }

                    function o(e) {
                        var t = {
                            value: void 0 === e ? i.PropTypes.any.isRequired : e.isRequired,
                            requestChange: i.PropTypes.func.isRequired
                        };
                        return i.PropTypes.shape(t)
                    }
                    var i = e(5);
                    r.PropTypes = {
                        link: o
                    }, t.exports = r
                }, {
                    5: 5
                }],
                19: [function(e, t, n) {
                    "use strict";

                    function r(e, t) {}
                    var o = (e(45), {
                        isMounted: function(e) {
                            return !1
                        },
                        enqueueCallback: function(e, t) {},
                        enqueueForceUpdate: function(e) {
                            r(e, "forceUpdate")
                        },
                        enqueueReplaceState: function(e, t) {
                            r(e, "replaceState")
                        },
                        enqueueSetState: function(e, t) {
                            r(e, "setState")
                        }
                    });
                    t.exports = o
                }, {
                    45: 45
                }],
                20: [function(e, t, n) {
                    "use strict";
                    var r = {};
                    t.exports = r
                }, {}],
                21: [function(e, t, n) {
                    "use strict";

                    function r(e, t) {
                        return e === t ? 0 !== e || 1 / e === 1 / t : e !== e && t !== t
                    }

                    function o(e) {
                        this.message = e, this.stack = ""
                    }

                    function i(e) {
                        function t(t, n, r, i, a, s, u) {
                            if (i = i || x, s = s || r, null == n[r]) {
                                var c = _[a];
                                return t ? new o(null === n[r] ? "The " + c + " `" + s + "` is marked as required " + ("in `" + i + "`, but its value is `null`.") : "The " + c + " `" + s + "` is marked as required in " + ("`" + i + "`, but its value is `undefined`.")) : null
                            }
                            return e(n, r, i, a, s)
                        }
                        var n = t.bind(null, !1);
                        return n.isRequired = t.bind(null, !0), n
                    }

                    function a(e) {
                        function t(t, n, r, i, a, s) {
                            var u = t[n],
                                c = g(u);
                            if (c !== e) {
                                var p = _[i],
                                    l = E(u);
                                return new o("Invalid " + p + " `" + a + "` of type " + ("`" + l + "` supplied to `" + r + "`, expected ") + ("`" + e + "`."))
                            }
                            return null
                        }
                        return i(t)
                    }

                    function s() {
                        return i(w.thatReturns(null))
                    }

                    function u(e) {
                        function t(t, n, r, i, a) {
                            if ("function" != typeof e) return new o("Property `" + a + "` of component `" + r + "` has invalid PropType notation inside arrayOf.");
                            var s = t[n];
                            if (!Array.isArray(s)) {
                                var u = _[i],
                                    c = g(s);
                                return new o("Invalid " + u + " `" + a + "` of type " + ("`" + c + "` supplied to `" + r + "`, expected an array."))
                            }
                            for (var p = 0; p < s.length; p++) {
                                var l = e(s, p, r, i, a + "[" + p + "]", P);
                                if (l instanceof Error) return l
                            }
                            return null
                        }
                        return i(t)
                    }

                    function c() {
                        function e(e, t, n, r, i) {
                            var a = e[t];
                            if (!T.isValidElement(a)) {
                                var s = _[r],
                                    u = g(a);
                                return new o("Invalid " + s + " `" + i + "` of type " + ("`" + u + "` supplied to `" + n + "`, expected a single ReactElement."))
                            }
                            return null
                        }
                        return i(e)
                    }

                    function p(e) {
                        function t(t, n, r, i, a) {
                            if (!(t[n] instanceof e)) {
                                var s = _[i],
                                    u = e.name || x,
                                    c = b(t[n]);
                                return new o("Invalid " + s + " `" + a + "` of type " + ("`" + c + "` supplied to `" + r + "`, expected ") + ("instance of `" + u + "`."))
                            }
                            return null
                        }
                        return i(t)
                    }

                    function l(e) {
                        function t(t, n, i, a, s) {
                            for (var u = t[n], c = 0; c < e.length; c++)
                                if (r(u, e[c])) return null;
                            var p = _[a],
                                l = JSON.stringify(e);
                            return new o("Invalid " + p + " `" + s + "` of value `" + u + "` " + ("supplied to `" + i + "`, expected one of " + l + "."))
                        }
                        return Array.isArray(e) ? i(t) : w.thatReturnsNull
                    }

                    function f(e) {
                        function t(t, n, r, i, a) {
                            if ("function" != typeof e) return new o("Property `" + a + "` of component `" + r + "` has invalid PropType notation inside objectOf.");
                            var s = t[n],
                                u = g(s);
                            if ("object" !== u) {
                                var c = _[i];
                                return new o("Invalid " + c + " `" + a + "` of type " + ("`" + u + "` supplied to `" + r + "`, expected an object."))
                            }
                            for (var p in s)
                                if (s.hasOwnProperty(p)) {
                                    var l = e(s, p, r, i, a + "." + p, P);
                                    if (l instanceof Error) return l
                                }
                            return null
                        }
                        return i(t)
                    }

                    function d(e) {
                        function t(t, n, r, i, a) {
                            for (var s = 0; s < e.length; s++) {
                                var u = e[s];
                                if (null == u(t, n, r, i, a, P)) return null
                            }
                            var c = _[i];
                            return new o("Invalid " + c + " `" + a + "` supplied to " + ("`" + r + "`."))
                        }
                        return Array.isArray(e) ? i(t) : w.thatReturnsNull
                    }

                    function h() {
                        function e(e, t, n, r, i) {
                            if (!y(e[t])) {
                                var a = _[r];
                                return new o("Invalid " + a + " `" + i + "` supplied to " + ("`" + n + "`, expected a ReactNode."))
                            }
                            return null
                        }
                        return i(e)
                    }

                    function v(e) {
                        function t(t, n, r, i, a) {
                            var s = t[n],
                                u = g(s);
                            if ("object" !== u) {
                                var c = _[i];
                                return new o("Invalid " + c + " `" + a + "` of type `" + u + "` " + ("supplied to `" + r + "`, expected `object`."))
                            }
                            for (var p in e) {
                                var l = e[p];
                                if (l) {
                                    var f = l(s, p, r, i, a + "." + p, P);
                                    if (f) return f
                                }
                            }
                            return null
                        }
                        return i(t)
                    }

                    function y(e) {
                        switch (typeof e) {
                            case "number":
                            case "string":
                            case "undefined":
                                return !0;
                            case "boolean":
                                return !e;
                            case "object":
                                if (Array.isArray(e)) return e.every(y);
                                if (null === e || T.isValidElement(e)) return !0;
                                var t = A(e);
                                if (!t) return !1;
                                var n, r = t.call(e);
                                if (t !== e.entries) {
                                    for (; !(n = r.next()).done;)
                                        if (!y(n.value)) return !1
                                } else
                                    for (; !(n = r.next()).done;) {
                                        var o = n.value;
                                        if (o && !y(o[1])) return !1
                                    }
                                return !0;
                            default:
                                return !1
                        }
                    }

                    function m(e, t) {
                        return "symbol" === e || "Symbol" === t["@@toStringTag"] || "function" == typeof Symbol && t instanceof Symbol
                    }

                    function g(e) {
                        var t = typeof e;
                        return Array.isArray(e) ? "array" : e instanceof RegExp ? "object" : m(t, e) ? "symbol" : t
                    }

                    function E(e) {
                        var t = g(e);
                        if ("object" === t) {
                            if (e instanceof Date) return "date";
                            if (e instanceof RegExp) return "regexp"
                        }
                        return t
                    }

                    function b(e) {
                        return e.constructor && e.constructor.name ? e.constructor.name : x
                    }
                    var T = e(15),
                        _ = e(20),
                        P = e(22),
                        w = e(41),
                        A = e(33),
                        x = (e(45), "<<anonymous>>"),
                        O = {
                            array: a("array"),
                            bool: a("boolean"),
                            func: a("function"),
                            number: a("number"),
                            object: a("object"),
                            string: a("string"),
                            symbol: a("symbol"),
                            any: s(),
                            arrayOf: u,
                            element: c(),
                            instanceOf: p,
                            node: h(),
                            objectOf: f,
                            oneOf: l,
                            oneOfType: d,
                            shape: v
                        };
                    o.prototype = Error.prototype, t.exports = O
                }, {
                    15: 15,
                    20: 20,
                    22: 22,
                    33: 33,
                    41: 41,
                    45: 45
                }],
                22: [function(e, t, n) {
                    "use strict";
                    var r = "SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";
                    t.exports = r
                }, {}],
                23: [function(e, t, n) {
                    "use strict";

                    function r(e, t, n) {
                        this.props = e, this.context = t, this.refs = u, this.updater = n || s
                    }

                    function o() {}
                    var i = e(46),
                        a = e(11),
                        s = e(19),
                        u = e(42);
                    o.prototype = a.prototype, r.prototype = new o, r.prototype.constructor = r, i(r.prototype, a.prototype), r.prototype.isPureReactComponent = !0, t.exports = r
                }, {
                    11: 11,
                    19: 19,
                    42: 42,
                    46: 46
                }],
                24: [function(e, t, n) {
                    "use strict";

                    function r(e, t) {
                        var n = {};
                        return function(r) {
                            n[t] = r, e.setState(n)
                        }
                    }
                    var o = {
                        createStateSetter: function(e, t) {
                            return function(n, r, o, i, a, s) {
                                var u = t.call(e, n, r, o, i, a, s);
                                u && e.setState(u)
                            }
                        },
                        createStateKeySetter: function(e, t) {
                            var n = e.__keySetters || (e.__keySetters = {});
                            return n[t] || (n[t] = r(e, t))
                        }
                    };
                    o.Mixin = {
                        createStateSetter: function(e) {
                            return o.createStateSetter(this, e)
                        },
                        createStateKeySetter: function(e) {
                            return o.createStateKeySetter(this, e)
                        }
                    }, t.exports = o
                }, {}],
                25: [function(e, t, n) {
                    "use strict";
                    var r = e(32),
                        o = {
                            getChildMapping: function(e, t) {
                                return e ? r(e) : e
                            },
                            mergeChildMappings: function(e, t) {
                                function n(n) {
                                    return t.hasOwnProperty(n) ? t[n] : e[n]
                                }
                                e = e || {}, t = t || {};
                                var r = {},
                                    o = [];
                                for (var i in e) t.hasOwnProperty(i) ? o.length && (r[i] = o, o = []) : o.push(i);
                                var a, s = {};
                                for (var u in t) {
                                    if (r.hasOwnProperty(u))
                                        for (a = 0; a < r[u].length; a++) {
                                            var c = r[u][a];
                                            s[r[u][a]] = n(c)
                                        }
                                    s[u] = n(u)
                                }
                                for (a = 0; a < o.length; a++) s[o[a]] = n(o[a]);
                                return s
                            }
                        };
                    t.exports = o
                }, {
                    32: 32
                }],
                26: [function(e, t, n) {
                    "use strict";

                    function r() {
                        var e = s("animationend"),
                            t = s("transitionend");
                        e && u.push(e), t && u.push(t)
                    }

                    function o(e, t, n) {
                        e.addEventListener(t, n, !1)
                    }

                    function i(e, t, n) {
                        e.removeEventListener(t, n, !1)
                    }
                    var a = e(40),
                        s = e(1),
                        u = [];
                    a.canUseDOM && r();
                    var c = {
                        addEndEventListener: function(e, t) {
                            return 0 === u.length ? void window.setTimeout(t, 0) : void u.forEach(function(n) {
                                o(e, n, t)
                            })
                        },
                        removeEndEventListener: function(e, t) {
                            0 !== u.length && u.forEach(function(n) {
                                i(e, n, t)
                            })
                        }
                    };
                    t.exports = c
                }, {
                    1: 1,
                    40: 40
                }],
                27: [function(e, t, n) {
                    "use strict";

                    function r(e, t) {
                        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                    }

                    function o(e, t) {
                        if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                        return !t || "object" != typeof t && "function" != typeof t ? e : t
                    }

                    function i(e, t) {
                        if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
                        e.prototype = Object.create(t && t.prototype, {
                            constructor: {
                                value: e,
                                enumerable: !1,
                                writable: !0,
                                configurable: !0
                            }
                        }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
                    }
                    var a = e(46),
                        s = e(5),
                        u = e(25),
                        c = e(41),
                        p = function(e) {
                            function t() {
                                var n, i, s;
                                r(this, t);
                                for (var c = arguments.length, p = Array(c), l = 0; l < c; l++) p[l] = arguments[l];
                                return n = i = o(this, e.call.apply(e, [this].concat(p))), i.state = {
                                    children: u.getChildMapping(i.props.children)
                                }, i.performAppear = function(e) {
                                    i.currentlyTransitioningKeys[e] = !0;
                                    var t = i.refs[e];
                                    t.componentWillAppear ? t.componentWillAppear(i._handleDoneAppearing.bind(i, e)) : i._handleDoneAppearing(e)
                                }, i._handleDoneAppearing = function(e) {
                                    var t = i.refs[e];
                                    t.componentDidAppear && t.componentDidAppear(), delete i.currentlyTransitioningKeys[e];
                                    var n = u.getChildMapping(i.props.children);
                                    n && n.hasOwnProperty(e) || i.performLeave(e)
                                }, i.performEnter = function(e) {
                                    i.currentlyTransitioningKeys[e] = !0;
                                    var t = i.refs[e];
                                    t.componentWillEnter ? t.componentWillEnter(i._handleDoneEntering.bind(i, e)) : i._handleDoneEntering(e)
                                }, i._handleDoneEntering = function(e) {
                                    var t = i.refs[e];
                                    t.componentDidEnter && t.componentDidEnter(), delete i.currentlyTransitioningKeys[e];
                                    var n = u.getChildMapping(i.props.children);
                                    n && n.hasOwnProperty(e) || i.performLeave(e)
                                }, i.performLeave = function(e) {
                                    i.currentlyTransitioningKeys[e] = !0;
                                    var t = i.refs[e];
                                    t.componentWillLeave ? t.componentWillLeave(i._handleDoneLeaving.bind(i, e)) : i._handleDoneLeaving(e)
                                }, i._handleDoneLeaving = function(e) {
                                    var t = i.refs[e];
                                    t.componentDidLeave && t.componentDidLeave(), delete i.currentlyTransitioningKeys[e];
                                    var n = u.getChildMapping(i.props.children);
                                    n && n.hasOwnProperty(e) ? i.performEnter(e) : i.setState(function(t) {
                                        var n = a({}, t.children);
                                        return delete n[e], {
                                            children: n
                                        }
                                    })
                                }, s = n, o(i, s)
                            }
                            return i(t, e), t.prototype.componentWillMount = function() {
                                this.currentlyTransitioningKeys = {}, this.keysToEnter = [], this.keysToLeave = []
                            }, t.prototype.componentDidMount = function() {
                                var e = this.state.children;
                                for (var t in e) e[t] && this.performAppear(t)
                            }, t.prototype.componentWillReceiveProps = function(e) {
                                var t = u.getChildMapping(e.children),
                                    n = this.state.children;
                                this.setState({
                                    children: u.mergeChildMappings(n, t)
                                });
                                var r;
                                for (r in t) {
                                    var o = n && n.hasOwnProperty(r);
                                    !t[r] || o || this.currentlyTransitioningKeys[r] || this.keysToEnter.push(r)
                                }
                                for (r in n) {
                                    var i = t && t.hasOwnProperty(r);
                                    !n[r] || i || this.currentlyTransitioningKeys[r] || this.keysToLeave.push(r)
                                }
                            }, t.prototype.componentDidUpdate = function() {
                                var e = this.keysToEnter;
                                this.keysToEnter = [], e.forEach(this.performEnter);
                                var t = this.keysToLeave;
                                this.keysToLeave = [], t.forEach(this.performLeave)
                            }, t.prototype.render = function() {
                                var e = [];
                                for (var t in this.state.children) {
                                    var n = this.state.children[t];
                                    n && e.push(s.cloneElement(this.props.childFactory(n), {
                                        ref: t,
                                        key: t
                                    }))
                                }
                                var r = a({}, this.props);
                                return delete r.transitionLeave, delete r.transitionName, delete r.transitionAppear, delete r.transitionEnter, delete r.childFactory, delete r.transitionLeaveTimeout, delete r.transitionEnterTimeout, delete r.transitionAppearTimeout, delete r.component, s.createElement(this.props.component, r, e)
                            }, t
                        }(s.Component);
                    p.displayName = "ReactTransitionGroup", p.propTypes = {
                        component: s.PropTypes.any,
                        childFactory: s.PropTypes.func
                    }, p.defaultProps = {
                        component: "span",
                        childFactory: c.thatReturnsArgument
                    }, t.exports = p
                }, {
                    25: 25,
                    41: 41,
                    46: 46,
                    5: 5
                }],
                28: [function(e, t, n) {
                    "use strict";
                    t.exports = "15.4.2"
                }, {}],
                29: [function(e, t, n) {
                    "use strict";
                    var r = e(3),
                        o = e(5),
                        i = (e(6), e(12)),
                        a = e(7),
                        s = e(17),
                        u = e(27),
                        c = e(36),
                        p = e(38);
                    o.addons = {
                        CSSTransitionGroup: a,
                        LinkedStateMixin: r,
                        PureRenderMixin: i,
                        TransitionGroup: u,
                        createFragment: s.create,
                        shallowCompare: c,
                        update: p
                    }, t.exports = o
                }, {
                    12: 12,
                    17: 17,
                    27: 27,
                    3: 3,
                    36: 36,
                    38: 38,
                    5: 5,
                    6: 6,
                    7: 7
                }],
                30: [function(e, t, n) {
                    "use strict";
                    var r = e(46),
                        o = e(29),
                        i = r({
                            __SECRET_INJECTED_REACT_DOM_DO_NOT_USE_OR_YOU_WILL_BE_FIRED: null,
                            __SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED: {
                                ReactCurrentOwner: e(13)
                            }
                        }, o);
                    t.exports = i
                }, {
                    13: 13,
                    29: 29,
                    46: 46
                }],
                31: [function(e, t, n) {
                    "use strict";
                    var r = !1;
                    t.exports = r
                }, {}],
                32: [function(e, t, n) {
                    (function(n) {
                        "use strict";

                        function r(e, t, n, r) {
                            if (e && "object" == typeof e) {
                                var o = e,
                                    i = void 0 === o[n];
                                i && null != t && (o[n] = t)
                            }
                        }

                        function o(e, t) {
                            if (null == e) return e;
                            var n = {};
                            return i(e, r, n), n
                        }
                        var i = (e(2), e(37));
                        e(45);
                        "undefined" != typeof n && n.env, t.exports = o
                    }).call(this, void 0)
                }, {
                    2: 2,
                    37: 37,
                    45: 45
                }],
                33: [function(e, t, n) {
                    "use strict";

                    function r(e) {
                        var t = e && (o && e[o] || e[i]);
                        if ("function" == typeof t) return t
                    }
                    var o = "function" == typeof Symbol && Symbol.iterator,
                        i = "@@iterator";
                    t.exports = r
                }, {}],
                34: [function(e, t, n) {
                    "use strict";

                    function r(e) {
                        return i.isValidElement(e) ? void 0 : o("143"), e
                    }
                    var o = e(35),
                        i = e(15);
                    e(43);
                    t.exports = r
                }, {
                    15: 15,
                    35: 35,
                    43: 43
                }],
                35: [function(e, t, n) {
                    "use strict";

                    function r(e) {
                        for (var t = arguments.length - 1, n = "Minified React error #" + e + "; visit http://facebook.github.io/react/docs/error-decoder.html?invariant=" + e, r = 0; r < t; r++) n += "&args[]=" + encodeURIComponent(arguments[r + 1]);
                        n += " for the full message or use the non-minified dev environment for full errors and additional helpful warnings.";
                        var o = new Error(n);
                        throw o.name = "Invariant Violation", o.framesToPop = 1, o
                    }
                    t.exports = r
                }, {}],
                36: [function(e, t, n) {
                    "use strict";

                    function r(e, t, n) {
                        return !o(e.props, t) || !o(e.state, n)
                    }
                    var o = e(44);
                    t.exports = r
                }, {
                    44: 44
                }],
                37: [function(e, t, n) {
                    "use strict";

                    function r(e, t) {
                        return e && "object" == typeof e && null != e.key ? c.escape(e.key) : t.toString(36)
                    }

                    function o(e, t, n, i) {
                        var f = typeof e;
                        if ("undefined" !== f && "boolean" !== f || (e = null), null === e || "string" === f || "number" === f || "object" === f && e.$$typeof === s) return n(i, e, "" === t ? p + r(e, 0) : t), 1;
                        var d, h, v = 0,
                            y = "" === t ? p : t + l;
                        if (Array.isArray(e))
                            for (var m = 0; m < e.length; m++) d = e[m], h = y + r(d, m), v += o(d, h, n, i);
                        else {
                            var g = u(e);
                            if (g) {
                                var E, b = g.call(e);
                                if (g !== e.entries)
                                    for (var T = 0; !(E = b.next()).done;) d = E.value, h = y + r(d, T++), v += o(d, h, n, i);
                                else
                                    for (; !(E = b.next()).done;) {
                                        var _ = E.value;
                                        _ && (d = _[1], h = y + c.escape(_[0]) + l + r(d, 0), v += o(d, h, n, i))
                                    }
                            } else if ("object" === f) {
                                var P = "",
                                    w = String(e);
                                a("31", "[object Object]" === w ? "object with keys {" + Object.keys(e).join(", ") + "}" : w, P)
                            }
                        }
                        return v
                    }

                    function i(e, t, n) {
                        return null == e ? 0 : o(e, "", t, n)
                    }
                    var a = e(35),
                        s = (e(13), e(16)),
                        u = e(33),
                        c = (e(43), e(2)),
                        p = (e(45), "."),
                        l = ":";
                    t.exports = i
                }, {
                    13: 13,
                    16: 16,
                    2: 2,
                    33: 33,
                    35: 35,
                    43: 43,
                    45: 45
                }],
                38: [function(e, t, n) {
                    "use strict";

                    function r(e) {
                        return Array.isArray(e) ? e.concat() : e && "object" == typeof e ? s(new e.constructor, e) : e
                    }

                    function o(e, t, n) {
                        Array.isArray(e) ? void 0 : a("1", n, e);
                        var r = t[n];
                        Array.isArray(r) ? void 0 : a("2", n, r)
                    }

                    function i(e, t) {
                        if ("object" != typeof t ? a("3", v.join(", "), f) : void 0, u.call(t, f)) return 1 !== Object.keys(t).length ? a("4", f) : void 0, t[f];
                        var n = r(e);
                        if (u.call(t, d)) {
                            var m = t[d];
                            m && "object" == typeof m ? void 0 : a("5", d, m), n && "object" == typeof n ? void 0 : a("6", d, n), s(n, t[d])
                        }
                        u.call(t, c) && (o(e, t, c), t[c].forEach(function(e) {
                            n.push(e)
                        })), u.call(t, p) && (o(e, t, p), t[p].forEach(function(e) {
                            n.unshift(e)
                        })), u.call(t, l) && (Array.isArray(e) ? void 0 : a("7", l, e), Array.isArray(t[l]) ? void 0 : a("8", l, t[l]), t[l].forEach(function(e) {
                            Array.isArray(e) ? void 0 : a("8", l, t[l]), n.splice.apply(n, e)
                        })), u.call(t, h) && ("function" != typeof t[h] ? a("9", h, t[h]) : void 0, n = t[h](n));
                        for (var g in t) y.hasOwnProperty(g) && y[g] || (n[g] = i(e[g], t[g]));
                        return n
                    }
                    var a = e(35),
                        s = e(46),
                        u = (e(43), {}.hasOwnProperty),
                        c = "$push",
                        p = "$unshift",
                        l = "$splice",
                        f = "$set",
                        d = "$merge",
                        h = "$apply",
                        v = [c, p, l, f, d, h],
                        y = {};
                    v.forEach(function(e) {
                        y[e] = !0
                    }), t.exports = i
                }, {
                    35: 35,
                    43: 43,
                    46: 46
                }],
                39: [function(e, t, n) {
                    "use strict";

                    function r(e, t) {
                        for (var n = e; n.parentNode;) n = n.parentNode;
                        var r = n.querySelectorAll(t);
                        return Array.prototype.indexOf.call(r, e) !== -1
                    }
                    var o = e(43),
                        i = {
                            addClass: function(e, t) {
                                return /\s/.test(t) ? o(!1) : void 0, t && (e.classList ? e.classList.add(t) : i.hasClass(e, t) || (e.className = e.className + " " + t)), e
                            },
                            removeClass: function(e, t) {
                                return /\s/.test(t) ? o(!1) : void 0, t && (e.classList ? e.classList.remove(t) : i.hasClass(e, t) && (e.className = e.className.replace(new RegExp("(^|\\s)" + t + "(?:\\s|$)", "g"), "$1").replace(/\s+/g, " ").replace(/^\s*|\s*$/g, ""))), e
                            },
                            conditionClass: function(e, t, n) {
                                return (n ? i.addClass : i.removeClass)(e, t)
                            },
                            hasClass: function(e, t) {
                                return /\s/.test(t) ? o(!1) : void 0, e.classList ? !!t && e.classList.contains(t) : (" " + e.className + " ").indexOf(" " + t + " ") > -1
                            },
                            matchesSelector: function(e, t) {
                                var n = e.matches || e.webkitMatchesSelector || e.mozMatchesSelector || e.msMatchesSelector || function(t) {
                                    return r(e, t)
                                };
                                return n.call(e, t)
                            }
                        };
                    t.exports = i
                }, {
                    43: 43
                }],
                40: [function(e, t, n) {
                    "use strict";
                    var r = !("undefined" == typeof window || !window.document || !window.document.createElement),
                        o = {
                            canUseDOM: r,
                            canUseWorkers: "undefined" != typeof Worker,
                            canUseEventListeners: r && !(!window.addEventListener && !window.attachEvent),
                            canUseViewport: r && !!window.screen,
                            isInWorker: !r
                        };
                    t.exports = o
                }, {}],
                41: [function(e, t, n) {
                    "use strict";

                    function r(e) {
                        return function() {
                            return e
                        }
                    }
                    var o = function() {};
                    o.thatReturns = r, o.thatReturnsFalse = r(!1), o.thatReturnsTrue = r(!0), o.thatReturnsNull = r(null), o.thatReturnsThis = function() {
                        return this
                    }, o.thatReturnsArgument = function(e) {
                        return e
                    }, t.exports = o
                }, {}],
                42: [function(e, t, n) {
                    "use strict";
                    var r = {};
                    t.exports = r
                }, {}],
                43: [function(e, t, n) {
                    "use strict";

                    function r(e, t, n, r, i, a, s, u) {
                        if (o(t), !e) {
                            var c;
                            if (void 0 === t) c = new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");
                            else {
                                var p = [n, r, i, a, s, u],
                                    l = 0;
                                c = new Error(t.replace(/%s/g, function() {
                                    return p[l++]
                                })), c.name = "Invariant Violation"
                            }
                            throw c.framesToPop = 1, c
                        }
                    }
                    var o = function(e) {};
                    t.exports = r
                }, {}],
                44: [function(e, t, n) {
                    "use strict";

                    function r(e, t) {
                        return e === t ? 0 !== e || 0 !== t || 1 / e === 1 / t : e !== e && t !== t
                    }

                    function o(e, t) {
                        if (r(e, t)) return !0;
                        if ("object" != typeof e || null === e || "object" != typeof t || null === t) return !1;
                        var n = Object.keys(e),
                            o = Object.keys(t);
                        if (n.length !== o.length) return !1;
                        for (var a = 0; a < n.length; a++)
                            if (!i.call(t, n[a]) || !r(e[n[a]], t[n[a]])) return !1;
                        return !0
                    }
                    var i = Object.prototype.hasOwnProperty;
                    t.exports = o
                }, {}],
                45: [function(e, t, n) {
                    "use strict";
                    var r = e(41),
                        o = r;
                    t.exports = o
                }, {
                    41: 41
                }],
                46: [function(e, t, n) {
                    "use strict";

                    function r(e) {
                        if (null === e || void 0 === e) throw new TypeError("Object.assign cannot be called with null or undefined");
                        return Object(e)
                    }

                    function o() {
                        try {
                            if (!Object.assign) return !1;
                            var e = new String("abc");
                            if (e[5] = "de", "5" === Object.getOwnPropertyNames(e)[0]) return !1;
                            for (var t = {}, n = 0; n < 10; n++) t["_" + String.fromCharCode(n)] = n;
                            var r = Object.getOwnPropertyNames(t).map(function(e) {
                                return t[e]
                            });
                            if ("0123456789" !== r.join("")) return !1;
                            var o = {};
                            return "abcdefghijklmnopqrst".split("").forEach(function(e) {
                                o[e] = e
                            }), "abcdefghijklmnopqrst" === Object.keys(Object.assign({}, o)).join("")
                        } catch (e) {
                            return !1
                        }
                    }
                    var i = Object.prototype.hasOwnProperty,
                        a = Object.prototype.propertyIsEnumerable;
                    t.exports = o() ? Object.assign : function(e, t) {
                        for (var n, o, s = r(e), u = 1; u < arguments.length; u++) {
                            n = Object(arguments[u]);
                            for (var c in n) i.call(n, c) && (s[c] = n[c]);
                            if (Object.getOwnPropertySymbols) {
                                o = Object.getOwnPropertySymbols(n);
                                for (var p = 0; p < o.length; p++) a.call(n, o[p]) && (s[o[p]] = n[o[p]])
                            }
                        }
                        return s
                    }
                }, {}]
            }, {}, [30])(30)
        });
    }());
    SM.currentModule = null;
}, '', {
    "requires": []
});
YUI.add("redux-thunk", function(e) {
    SM.currentModule = "redux-thunk";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        ! function(e, t) {
            "object" == typeof exports && "object" == typeof module ? module.exports = t() : "function" == typeof define && define.amd ? define([], t) : "object" == typeof exports ? exports.ReduxThunk = t() : e.ReduxThunk = t()
        }(this, function() {
            return function(e) {
                function t(u) {
                    if (n[u]) return n[u].exports;
                    var r = n[u] = {
                        exports: {},
                        id: u,
                        loaded: !1
                    };
                    return e[u].call(r.exports, r, r.exports, t), r.loaded = !0, r.exports
                }
                var n = {};
                return t.m = e, t.c = n, t.p = "", t(0)
            }([function(e, t, n) {
                e.exports = n(1)
            }, function(e, t) {
                "use strict";

                function n(e) {
                    return function(t) {
                        var n = t.dispatch,
                            u = t.getState;
                        return function(t) {
                            return function(r) {
                                return "function" == typeof r ? r(n, u, e) : t(r)
                            }
                        }
                    }
                }
                t.__esModule = !0;
                var u = n();
                u.withExtraArgument = n, t["default"] = u
            }])
        })
    }(), SM.currentModule = null
}, "", {
    requires: []
});
YUI.add("redux", function(t) {
    SM.currentModule = "redux";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        ! function(t, e) {
            "object" == typeof exports && "object" == typeof module ? module.exports = e() : "function" == typeof define && define.amd ? define([], e) : "object" == typeof exports ? exports.Redux = e() : t.Redux = e()
        }(this, function() {
            return function(t) {
                function e(r) {
                    if (n[r]) return n[r].exports;
                    var o = n[r] = {
                        exports: {},
                        id: r,
                        loaded: !1
                    };
                    return t[r].call(o.exports, o, o.exports, e), o.loaded = !0, o.exports
                }
                var n = {};
                return e.m = t, e.c = n, e.p = "", e(0)
            }([function(t, e, n) {
                "use strict";

                function r(t) {
                    return t && t.__esModule ? t : {
                        "default": t
                    }
                }
                e.__esModule = !0, e.compose = e.applyMiddleware = e.bindActionCreators = e.combineReducers = e.createStore = void 0;
                var o = n(2),
                    u = r(o),
                    i = n(7),
                    c = r(i),
                    a = n(6),
                    f = r(a),
                    s = n(5),
                    d = r(s),
                    l = n(1),
                    p = r(l),
                    y = n(3);
                r(y), e.createStore = u["default"], e.combineReducers = c["default"], e.bindActionCreators = f["default"], e.applyMiddleware = d["default"], e.compose = p["default"]
            }, function(t, e) {
                "use strict";

                function n() {
                    for (var t = arguments.length, e = Array(t), n = 0; t > n; n++) e[n] = arguments[n];
                    if (0 === e.length) return function(t) {
                        return t
                    };
                    var r = function() {
                        var t = e[e.length - 1],
                            n = e.slice(0, -1);
                        return {
                            v: function() {
                                return n.reduceRight(function(t, e) {
                                    return e(t)
                                }, t.apply(void 0, arguments))
                            }
                        }
                    }();
                    return "object" == typeof r ? r.v : void 0
                }
                e.__esModule = !0, e["default"] = n
            }, function(t, e, n) {
                "use strict";

                function r(t) {
                    return t && t.__esModule ? t : {
                        "default": t
                    }
                }

                function o(t, e, n) {
                    function r() {
                        b === h && (b = h.slice())
                    }

                    function u() {
                        return v
                    }

                    function c(t) {
                        if ("function" != typeof t) throw Error("Expected listener to be a function.");
                        var e = !0;
                        return r(), b.push(t),
                            function() {
                                if (e) {
                                    e = !1, r();
                                    var n = b.indexOf(t);
                                    b.splice(n, 1)
                                }
                            }
                    }

                    function s(t) {
                        if (!i["default"](t)) throw Error("Actions must be plain objects. Use custom middleware for async actions.");
                        if (void 0 === t.type) throw Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');
                        if (m) throw Error("Reducers may not dispatch actions.");
                        try {
                            m = !0, v = y(v, t)
                        } finally {
                            m = !1
                        }
                        for (var e = h = b, n = 0; e.length > n; n++) e[n]();
                        return t
                    }

                    function d(t) {
                        if ("function" != typeof t) throw Error("Expected the nextReducer to be a function.");
                        y = t, s({
                            type: f.INIT
                        })
                    }

                    function l() {
                        var t, e = c;
                        return t = {
                            subscribe: function(t) {
                                function n() {
                                    t.next && t.next(u())
                                }
                                if ("object" != typeof t) throw new TypeError("Expected the observer to be an object.");
                                n();
                                var r = e(n);
                                return {
                                    unsubscribe: r
                                }
                            }
                        }, t[a["default"]] = function() {
                            return this
                        }, t
                    }
                    var p;
                    if ("function" == typeof e && void 0 === n && (n = e, e = void 0), void 0 !== n) {
                        if ("function" != typeof n) throw Error("Expected the enhancer to be a function.");
                        return n(o)(t, e)
                    }
                    if ("function" != typeof t) throw Error("Expected the reducer to be a function.");
                    var y = t,
                        v = e,
                        h = [],
                        b = h,
                        m = !1;
                    return s({
                        type: f.INIT
                    }), p = {
                        dispatch: s,
                        subscribe: c,
                        getState: u,
                        replaceReducer: d
                    }, p[a["default"]] = l, p
                }
                e.__esModule = !0, e.ActionTypes = void 0, e["default"] = o;
                var u = n(4),
                    i = r(u),
                    c = n(11),
                    a = r(c),
                    f = e.ActionTypes = {
                        INIT: "@@redux/INIT"
                    }
            }, function(t, e) {
                "use strict";

                function n(t) {
                    "undefined" != typeof console && "function" == typeof console.error && console.error(t);
                    try {
                        throw Error(t)
                    } catch (e) {}
                }
                e.__esModule = !0, e["default"] = n
            }, function(t, e, n) {
                function r(t) {
                    if (!i(t) || l.call(t) != c || u(t)) return !1;
                    var e = o(t);
                    if (null === e) return !0;
                    var n = s.call(e, "constructor") && e.constructor;
                    return "function" == typeof n && n instanceof n && f.call(n) == d
                }
                var o = n(8),
                    u = n(9),
                    i = n(10),
                    c = "[object Object]",
                    a = Object.prototype,
                    f = Function.prototype.toString,
                    s = a.hasOwnProperty,
                    d = f.call(Object),
                    l = a.toString;
                t.exports = r
            }, function(t, e, n) {
                "use strict";

                function r(t) {
                    return t && t.__esModule ? t : {
                        "default": t
                    }
                }

                function o() {
                    for (var t = arguments.length, e = Array(t), n = 0; t > n; n++) e[n] = arguments[n];
                    return function(t) {
                        return function(n, r, o) {
                            var i = t(n, r, o),
                                a = i.dispatch,
                                f = [],
                                s = {
                                    getState: i.getState,
                                    dispatch: function(t) {
                                        return a(t)
                                    }
                                };
                            return f = e.map(function(t) {
                                return t(s)
                            }), a = c["default"].apply(void 0, f)(i.dispatch), u({}, i, {
                                dispatch: a
                            })
                        }
                    }
                }
                e.__esModule = !0;
                var u = Object.assign || function(t) {
                    for (var e = 1; arguments.length > e; e++) {
                        var n = arguments[e];
                        for (var r in n) Object.prototype.hasOwnProperty.call(n, r) && (t[r] = n[r])
                    }
                    return t
                };
                e["default"] = o;
                var i = n(1),
                    c = r(i)
            }, function(t, e) {
                "use strict";

                function n(t, e) {
                    return function() {
                        return e(t.apply(void 0, arguments))
                    }
                }

                function r(t, e) {
                    if ("function" == typeof t) return n(t, e);
                    if ("object" != typeof t || null === t) throw Error("bindActionCreators expected an object or a function, instead received " + (null === t ? "null" : typeof t) + '. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');
                    for (var r = Object.keys(t), o = {}, u = 0; r.length > u; u++) {
                        var i = r[u],
                            c = t[i];
                        "function" == typeof c && (o[i] = n(c, e))
                    }
                    return o
                }
                e.__esModule = !0, e["default"] = r
            }, function(t, e, n) {
                "use strict";

                function r(t) {
                    return t && t.__esModule ? t : {
                        "default": t
                    }
                }

                function o(t, e) {
                    var n = e && e.type,
                        r = n && '"' + n + '"' || "an action";
                    return "Given action " + r + ', reducer "' + t + '" returned undefined. To ignore an action, you must explicitly return the previous state.'
                }

                function u(t) {
                    Object.keys(t).forEach(function(e) {
                        var n = t[e],
                            r = n(void 0, {
                                type: c.ActionTypes.INIT
                            });
                        if (void 0 === r) throw Error('Reducer "' + e + '" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined.');
                        var o = "@@redux/PROBE_UNKNOWN_ACTION_" + Math.random().toString(36).substring(7).split("").join(".");
                        if (void 0 === n(void 0, {
                                type: o
                            })) throw Error('Reducer "' + e + '" returned undefined when probed with a random type. ' + ("Don't try to handle " + c.ActionTypes.INIT + ' or other actions in "redux/*" ') + "namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined.")
                    })
                }

                function i(t) {
                    for (var e = Object.keys(t), n = {}, r = 0; e.length > r; r++) {
                        var i = e[r];
                        "function" == typeof t[i] && (n[i] = t[i])
                    }
                    var c, a = Object.keys(n);
                    try {
                        u(n)
                    } catch (f) {
                        c = f
                    }
                    return function() {
                        var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
                            e = arguments[1];
                        if (c) throw c;
                        for (var r = !1, u = {}, i = 0; a.length > i; i++) {
                            var f = a[i],
                                s = n[f],
                                d = t[f],
                                l = s(d, e);
                            if (void 0 === l) {
                                var p = o(f, e);
                                throw Error(p)
                            }
                            u[f] = l, r = r || l !== d
                        }
                        return r ? u : t
                    }
                }
                e.__esModule = !0, e["default"] = i;
                var c = n(2),
                    a = n(4),
                    f = (r(a), n(3));
                r(f)
            }, function(t, e) {
                function n(t) {
                    return r(Object(t))
                }
                var r = Object.getPrototypeOf;
                t.exports = n
            }, function(t, e) {
                function n(t) {
                    var e = !1;
                    if (null != t && "function" != typeof t.toString) try {
                        e = !!(t + "")
                    } catch (n) {}
                    return e
                }
                t.exports = n
            }, function(t, e) {
                function n(t) {
                    return !!t && "object" == typeof t
                }
                t.exports = n
            }, function(t, e, n) {
                (function(e) {
                    "use strict";
                    t.exports = n(12)(e || window || this)
                }).call(e, function() {
                    return this
                }())
            }, function(t, e) {
                "use strict";
                t.exports = function(t) {
                    var e, n = t.Symbol;
                    return "function" == typeof n ? n.observable ? e = n.observable : (e = "function" == typeof n["for"] ? n["for"]("observable") : n("observable"), n.observable = e) : e = "@@observable", e
                }
            }])
        })
    }(), SM.currentModule = null
}, "", {
    requires: []
});
YUI.add("rsvp", function(t) {
    SM.currentModule = "rsvp";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        /*!
         * @overview RSVP - a tiny implementation of Promises/A+.
         * @copyright Copyright (c) 2016 Yehuda Katz, Tom Dale, Stefan Penner and contributors
         * @license   Licensed under MIT license
         *            See https://raw.githubusercontent.com/tildeio/rsvp.js/master/LICENSE
         * @version   3.3.3
         */
        ! function(t, r) {
            "object" == typeof exports && "undefined" != typeof module ? r(exports) : "function" == typeof define && define.amd ? define(["exports"], r) : r(t.RSVP = t.RSVP || {})
        }(this, function(exports) {
            "use strict";

            function t(t, r) {
                for (var e = 0, n = t.length; n > e; e++)
                    if (t[e] === r) return e;
                return -1
            }

            function r(t) {
                var r = t._promiseCallbacks;
                return r || (r = t._promiseCallbacks = {}), r
            }

            function e(t, r) {
                return "onerror" === t ? void gt.on("error", r) : 2 !== arguments.length ? gt[t] : void(gt[t] = r)
            }

            function n(t) {
                return "function" == typeof t || "object" == typeof t && null !== t
            }

            function o(t) {
                return "function" == typeof t
            }

            function i(t) {
                return "object" == typeof t && null !== t
            }

            function u() {}

            function s() {
                setTimeout(function() {
                    for (var t = 0; t < St.length; t++) {
                        var r = St[t],
                            e = r.payload;
                        e.guid = e.key + e.id, e.childGuid = e.key + e.childId, e.error && (e.stack = e.error.stack), gt.trigger(r.name, r.payload)
                    }
                    St.length = 0
                }, 50)
            }

            function a(t, r, e) {
                1 === St.push({
                    name: t,
                    payload: {
                        key: r._guidKey,
                        id: r._id,
                        eventName: t,
                        detail: r._result,
                        childId: e && e._id,
                        label: r._label,
                        timeStamp: jt(),
                        error: gt["instrument-with-stack"] ? new Error(r._label) : null
                    }
                }) && s()
            }

            function c(t, r) {
                var e = this;
                if (t && "object" == typeof t && t.constructor === e) return t;
                var n = new e(l, r);
                return y(n, t), n
            }

            function f() {
                return new TypeError("A promises callback cannot return that same promise.")
            }

            function l() {}

            function h(t) {
                try {
                    return t.then
                } catch (r) {
                    return Ot.error = r, Ot
                }
            }

            function p(t, r, e, n) {
                try {
                    t.call(r, e, n)
                } catch (o) {
                    return o
                }
            }

            function v(t, r, e) {
                gt.async(function(t) {
                    var n = !1,
                        o = p(e, r, function(e) {
                            n || (n = !0, r !== e ? y(t, e, void 0) : w(t, e))
                        }, function(r) {
                            n || (n = !0, g(t, r))
                        }, "Settle: " + (t._label || " unknown promise"));
                    !n && o && (n = !0, g(t, o))
                }, t)
            }

            function d(t, r) {
                r._state === Mt ? w(t, r._result) : r._state === kt ? (r._onError = null, g(t, r._result)) : b(r, void 0, function(e) {
                    r !== e ? y(t, e, void 0) : w(t, e)
                }, function(r) {
                    return g(t, r)
                })
            }

            function _(t, r, e) {
                r.constructor === t.constructor && e === M && t.constructor.resolve === c ? d(t, r) : e === Ot ? g(t, Ot.error) : void 0 === e ? w(t, r) : o(e) ? v(t, r, e) : w(t, r)
            }

            function y(t, r) {
                t === r ? w(t, r) : n(r) ? _(t, r, h(r)) : w(t, r)
            }

            function m(t) {
                t._onError && t._onError(t._result), E(t)
            }

            function w(t, r) {
                t._state === Tt && (t._result = r, t._state = Mt, 0 === t._subscribers.length ? gt.instrument && a("fulfilled", t) : gt.async(E, t))
            }

            function g(t, r) {
                t._state === Tt && (t._state = kt, t._result = r, gt.async(m, t))
            }

            function b(t, r, e, n) {
                var o = t._subscribers,
                    i = o.length;
                t._onError = null, o[i] = r, o[i + Mt] = e, o[i + kt] = n, 0 === i && t._state && gt.async(E, t)
            }

            function E(t) {
                var r = t._subscribers,
                    e = t._state;
                if (gt.instrument && a(e === Mt ? "fulfilled" : "rejected", t), 0 !== r.length) {
                    for (var n = void 0, o = void 0, i = t._result, u = 0; u < r.length; u += 3) n = r[u], o = r[u + e], n ? S(e, n, o, i) : o(i);
                    t._subscribers.length = 0
                }
            }

            function j() {
                this.error = null
            }

            function A(t, r) {
                try {
                    return t(r)
                } catch (e) {
                    return Ct.error = e, Ct
                }
            }

            function S(t, r, e, n) {
                var i = o(e),
                    u = void 0,
                    s = void 0,
                    a = void 0,
                    c = void 0;
                if (i) {
                    if (u = A(e, n), u === Ct ? (c = !0, s = u.error, u = null) : a = !0, r === u) return void g(r, f())
                } else u = n, a = !0;
                r._state !== Tt || (i && a ? y(r, u) : c ? g(r, s) : t === Mt ? w(r, u) : t === kt && g(r, u))
            }

            function T(t, r) {
                var e = !1;
                try {
                    r(function(r) {
                        e || (e = !0, y(t, r))
                    }, function(r) {
                        e || (e = !0, g(t, r))
                    })
                } catch (n) {
                    g(t, n)
                }
            }

            function M(t, r, e) {
                var n = arguments,
                    o = this,
                    i = o._state;
                if (i === Mt && !t || i === kt && !r) return gt.instrument && a("chained", o, o), o;
                o._onError = null;
                var u = new o.constructor(l, e),
                    s = o._result;
                return gt.instrument && a("chained", o, u), i ? ! function() {
                    var t = n[i - 1];
                    gt.async(function() {
                        return S(i, u, t, s)
                    })
                }() : b(o, u, t, r), u
            }

            function k(t, r, e) {
                return t === Mt ? {
                    state: "fulfilled",
                    value: e
                } : {
                    state: "rejected",
                    reason: e
                }
            }

            function O(t, r, e, n) {
                this._instanceConstructor = t, this.promise = new t(l, n), this._abortOnReject = e, this._validateInput(r) ? (this._input = r, this.length = r.length, this._remaining = r.length, this._init(), 0 === this.length ? w(this.promise, this._result) : (this.length = this.length || 0, this._enumerate(), 0 === this._remaining && w(this.promise, this._result))) : g(this.promise, this._validationError())
            }

            function C(t, r) {
                return new O(this, t, !0, r).promise
            }

            function R(t, r) {
                var e = this,
                    n = new e(l, r);
                if (!Et(t)) return g(n, new TypeError("You must pass an array to race.")), n;
                for (var o = 0; n._state === Tt && o < t.length; o++) b(e.resolve(t[o]), void 0, function(t) {
                    return y(n, t)
                }, function(t) {
                    return g(n, t)
                });
                return n
            }

            function I(t, r) {
                var e = this,
                    n = new e(l, r);
                return g(n, t), n
            }

            function P() {
                throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")
            }

            function x() {
                throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")
            }

            function N(t, r) {
                this._id = It++, this._label = r, this._state = void 0, this._result = void 0, this._subscribers = [], gt.instrument && a("created", this), l !== t && ("function" != typeof t && P(), this instanceof N ? T(this, t) : x())
            }

            function Y() {
                this.value = void 0
            }

            function U(t) {
                try {
                    return t.then
                } catch (r) {
                    return Pt.value = r, Pt
                }
            }

            function q(t, r, e) {
                try {
                    t.apply(r, e)
                } catch (n) {
                    return Pt.value = n, Pt
                }
            }

            function D(t, r) {
                for (var e = {}, n = t.length, o = new Array(n), i = 0; n > i; i++) o[i] = t[i];
                for (var u = 0; u < r.length; u++) {
                    var s = r[u];
                    e[s] = o[u + 1]
                }
                return e
            }

            function K(t) {
                for (var r = t.length, e = new Array(r - 1), n = 1; r > n; n++) e[n - 1] = t[n];
                return e
            }

            function V(t, r) {
                return {
                    then: function(e, n) {
                        return t.call(r, e, n)
                    }
                }
            }

            function F(t, r) {
                var e = function() {
                    for (var e = this, n = arguments.length, o = new Array(n + 1), i = !1, u = 0; n > u; ++u) {
                        var s = arguments[u];
                        if (!i) {
                            if (i = W(s), i === xt) {
                                var a = new N(l);
                                return g(a, xt.value), a
                            }
                            i && i !== !0 && (s = V(i, s))
                        }
                        o[u] = s
                    }
                    var c = new N(l);
                    return o[n] = function(t, e) {
                        t ? g(c, t) : void 0 === r ? y(c, e) : r === !0 ? y(c, K(arguments)) : Et(r) ? y(c, D(arguments, r)) : y(c, e)
                    }, i ? L(c, o, t, e) : G(c, o, t, e)
                };
                return e.__proto__ = t, e
            }

            function G(t, r, e, n) {
                var o = q(e, n, r);
                return o === Pt && g(t, o.value), t
            }

            function L(t, r, e, n) {
                return N.all(r).then(function(r) {
                    var o = q(e, n, r);
                    return o === Pt && g(t, o.value), t
                })
            }

            function W(t) {
                return t && "object" == typeof t ? t.constructor === N ? !0 : U(t) : !1
            }

            function $(t, r) {
                return N.all(t, r)
            }

            function z(t, r, e) {
                this._superConstructor(t, r, !1, e)
            }

            function B(t, r) {
                return new z(N, t, r).promise
            }

            function H(t, r) {
                return N.race(t, r)
            }

            function J(t, r, e) {
                this._superConstructor(t, r, !0, e)
            }

            function Q(t, r) {
                return new J(N, t, r).promise
            }

            function X(t, r, e) {
                this._superConstructor(t, r, !1, e)
            }

            function Z(t, r) {
                return new X(N, t, r).promise
            }

            function tt(t) {
                throw setTimeout(function() {
                    throw t
                }), t
            }

            function rt(t) {
                var r = {
                    resolve: void 0,
                    reject: void 0
                };
                return r.promise = new N(function(t, e) {
                    r.resolve = t, r.reject = e
                }, t), r
            }

            function et(t, r, e) {
                return N.all(t, e).then(function(t) {
                    if (!o(r)) throw new TypeError("You must pass a function as map's second argument.");
                    for (var n = t.length, i = new Array(n), u = 0; n > u; u++) i[u] = r(t[u]);
                    return N.all(i, e)
                })
            }

            function nt(t, r) {
                return N.resolve(t, r)
            }

            function ot(t, r) {
                return N.reject(t, r)
            }

            function it(t, r) {
                return N.all(t, r)
            }

            function ut(t, r) {
                return N.resolve(t, r).then(function(t) {
                    return it(t, r)
                })
            }

            function st(t, r, e) {
                var n = Et(t) ? it(t, e) : ut(t, e);
                return n.then(function(t) {
                    if (!o(r)) throw new TypeError("You must pass a function as filter's second argument.");
                    for (var n = t.length, i = new Array(n), u = 0; n > u; u++) i[u] = r(t[u]);
                    return it(i, e).then(function(r) {
                        for (var e = new Array(n), o = 0, i = 0; n > i; i++) r[i] && (e[o] = t[i], o++);
                        return e.length = o, e
                    })
                })
            }

            function at(t, r) {
                Ft[Nt] = t, Ft[Nt + 1] = r, Nt += 2, 2 === Nt && Gt()
            }

            function ct() {
                var t = process.nextTick,
                    r = process.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/);
                return Array.isArray(r) && "0" === r[1] && "10" === r[2] && (t = setImmediate),
                    function() {
                        return t(vt)
                    }
            }

            function ft() {
                return "undefined" != typeof Yt ? function() {
                    Yt(vt)
                } : pt()
            }

            function lt() {
                var t = 0,
                    r = new Dt(vt),
                    e = document.createTextNode("");
                return r.observe(e, {
                        characterData: !0
                    }),
                    function() {
                        return e.data = t = ++t % 2
                    }
            }

            function ht() {
                var t = new MessageChannel;
                return t.port1.onmessage = vt,
                    function() {
                        return t.port2.postMessage(0)
                    }
            }

            function pt() {
                return function() {
                    return setTimeout(vt, 1)
                }
            }

            function vt() {
                for (var t = 0; Nt > t; t += 2) {
                    var r = Ft[t],
                        e = Ft[t + 1];
                    r(e), Ft[t] = void 0, Ft[t + 1] = void 0
                }
                Nt = 0
            }

            function dt() {
                try {
                    var t = require,
                        r = t("vertx");
                    return Yt = r.runOnLoop || r.runOnContext, ft()
                } catch (e) {
                    return pt()
                }
            }

            function _t(t, r, e) {
                return r in t ? Object.defineProperty(t, r, {
                    value: e,
                    enumerable: !0,
                    configurable: !0,
                    writable: !0
                }) : t[r] = e, t
            }

            function yt() {
                gt.on.apply(gt, arguments)
            }

            function mt() {
                gt.off.apply(gt, arguments)
            }
            var wt = {
                    mixin: function(t) {
                        return t.on = this.on, t.off = this.off, t.trigger = this.trigger, t._promiseCallbacks = void 0, t
                    },
                    on: function(e, n) {
                        if ("function" != typeof n) throw new TypeError("Callback must be a function");
                        var o = r(this),
                            i = void 0;
                        i = o[e], i || (i = o[e] = []), -1 === t(i, n) && i.push(n)
                    },
                    off: function(e, n) {
                        var o = r(this),
                            i = void 0,
                            u = void 0;
                        return n ? (i = o[e], u = t(i, n), void(-1 !== u && i.splice(u, 1))) : void(o[e] = [])
                    },
                    trigger: function(t, e, n) {
                        var o = r(this),
                            i = void 0,
                            u = void 0;
                        if (i = o[t])
                            for (var s = 0; s < i.length; s++)(u = i[s])(e, n)
                    }
                },
                gt = {
                    instrument: !1
                };
            wt.mixin(gt);
            var bt = void 0;
            bt = Array.isArray ? Array.isArray : function(t) {
                return "[object Array]" === Object.prototype.toString.call(t)
            };
            var Et = bt,
                jt = Date.now || function() {
                    return (new Date).getTime()
                },
                At = Object.create || function(t) {
                    if (arguments.length > 1) throw new Error("Second argument not supported");
                    if ("object" != typeof t) throw new TypeError("Argument must be an object");
                    return u.prototype = t, new u
                },
                St = [],
                Tt = void 0,
                Mt = 1,
                kt = 2,
                Ot = new j,
                Ct = new j;
            O.prototype._validateInput = function(t) {
                return Et(t)
            }, O.prototype._validationError = function() {
                return new Error("Array Methods must be provided an Array")
            }, O.prototype._init = function() {
                this._result = new Array(this.length)
            }, O.prototype._enumerate = function() {
                for (var t = this.length, r = this.promise, e = this._input, n = 0; r._state === Tt && t > n; n++) this._eachEntry(e[n], n)
            }, O.prototype._settleMaybeThenable = function(t, r) {
                var e = this._instanceConstructor,
                    n = e.resolve;
                if (n === c) {
                    var o = h(t);
                    if (o === M && t._state !== Tt) t._onError = null, this._settledAt(t._state, r, t._result);
                    else if ("function" != typeof o) this._remaining--, this._result[r] = this._makeResult(Mt, r, t);
                    else if (e === N) {
                        var i = new e(l);
                        _(i, t, o), this._willSettleAt(i, r)
                    } else this._willSettleAt(new e(function(r) {
                        return r(t)
                    }), r)
                } else this._willSettleAt(n(t), r)
            }, O.prototype._eachEntry = function(t, r) {
                i(t) ? this._settleMaybeThenable(t, r) : (this._remaining--, this._result[r] = this._makeResult(Mt, r, t))
            }, O.prototype._settledAt = function(t, r, e) {
                var n = this.promise;
                n._state === Tt && (this._remaining--, this._abortOnReject && t === kt ? g(n, e) : this._result[r] = this._makeResult(t, r, e)), 0 === this._remaining && w(n, this._result)
            }, O.prototype._makeResult = function(t, r, e) {
                return e
            }, O.prototype._willSettleAt = function(t, r) {
                var e = this;
                b(t, void 0, function(t) {
                    return e._settledAt(Mt, r, t)
                }, function(t) {
                    return e._settledAt(kt, r, t)
                })
            };
            var Rt = "rsvp_" + jt() + "-",
                It = 0;
            N.cast = c, N.all = C, N.race = R, N.resolve = c, N.reject = I, N.prototype = {
                constructor: N,
                _guidKey: Rt,
                _onError: function(t) {
                    var r = this;
                    gt.after(function() {
                        r._onError && gt.trigger("error", t, r._label)
                    })
                },
                then: M,
                "catch": function(t, r) {
                    return this.then(void 0, t, r)
                },
                "finally": function(t, r) {
                    var e = this,
                        n = e.constructor;
                    return e.then(function(r) {
                        return n.resolve(t()).then(function() {
                            return r
                        })
                    }, function(r) {
                        return n.resolve(t()).then(function() {
                            throw r
                        })
                    }, r)
                }
            };
            var Pt = new Y,
                xt = new Y;
            z.prototype = At(O.prototype), z.prototype._superConstructor = O, z.prototype._makeResult = k, z.prototype._validationError = function() {
                return new Error("allSettled must be called with an array")
            }, J.prototype = At(O.prototype), J.prototype._superConstructor = O, J.prototype._init = function() {
                this._result = {}
            }, J.prototype._validateInput = function(t) {
                return t && "object" == typeof t
            }, J.prototype._validationError = function() {
                return new Error("Promise.hash must be called with an object")
            }, J.prototype._enumerate = function() {
                var t = this,
                    r = t.promise,
                    e = t._input,
                    n = [];
                for (var o in e) r._state === Tt && Object.prototype.hasOwnProperty.call(e, o) && n.push({
                    position: o,
                    entry: e[o]
                });
                var i = n.length;
                t._remaining = i;
                for (var u = void 0, s = 0; r._state === Tt && i > s; s++) u = n[s], t._eachEntry(u.entry, u.position)
            }, X.prototype = At(J.prototype), X.prototype._superConstructor = O, X.prototype._makeResult = k, X.prototype._validationError = function() {
                return new Error("hashSettled must be called with an object")
            };
            var Nt = 0,
                Yt = void 0,
                Ut = "undefined" != typeof window ? window : void 0,
                qt = Ut || {},
                Dt = qt.MutationObserver || qt.WebKitMutationObserver,
                Kt = "undefined" == typeof self && "undefined" != typeof process && "[object process]" === {}.toString.call(process),
                Vt = "undefined" != typeof Uint8ClampedArray && "undefined" != typeof importScripts && "undefined" != typeof MessageChannel,
                Ft = new Array(1e3),
                Gt = void 0;
            Gt = Kt ? ct() : Dt ? lt() : Vt ? ht() : void 0 === Ut && "function" == typeof require ? dt() : pt();
            var Lt = void 0;
            if ("object" == typeof self) Lt = self;
            else {
                if ("object" != typeof global) throw new Error("no global: `self` or `global` found");
                Lt = global
            }
            var Wt;
            gt.async = at, gt.after = function(t) {
                return setTimeout(t, 0)
            };
            var $t = nt,
                zt = function(t, r) {
                    return gt.async(t, r)
                };
            if ("undefined" != typeof window && "object" == typeof window.__PROMISE_INSTRUMENTATION__) {
                var Bt = window.__PROMISE_INSTRUMENTATION__;
                e("instrument", !0);
                for (var Ht in Bt) Bt.hasOwnProperty(Ht) && yt(Ht, Bt[Ht])
            }
            var Jt = (Wt = {
                cast: $t,
                Promise: N,
                EventTarget: wt,
                all: $,
                allSettled: B,
                race: H,
                hash: Q,
                hashSettled: Z,
                rethrow: tt,
                defer: rt,
                denodeify: F,
                configure: e,
                on: yt,
                off: mt,
                resolve: nt,
                reject: ot,
                map: et
            }, _t(Wt, "async", zt), _t(Wt, "filter", st), Wt);
            exports["default"] = Jt, exports.cast = $t, exports.Promise = N, exports.EventTarget = wt, exports.all = $, exports.allSettled = B, exports.race = H, exports.hash = Q, exports.hashSettled = Z, exports.rethrow = tt, exports.defer = rt, exports.denodeify = F, exports.configure = e, exports.on = yt, exports.off = mt, exports.resolve = nt, exports.reject = ot, exports.map = et, exports.async = zt, exports.filter = st, Object.defineProperty(exports, "__esModule", {
                value: !0
            })
        })
    }(), SM.currentModule = null
}, "", {
    requires: []
});
YUI.add("sm-abtest", function(e) {
    SM.currentModule = "sm-abtest";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";

        function t(e) {
            return new o.Promise(function(t, r) {
                var n = null;
                if (c[e] && (n = s.loadLocal(c[e])), n) t(n);
                else {
                    var i = f._getVisitorIdForVisitorType(e);
                    if (!i) return void r();
                    s.loadUri("/api/v2/abtest/" + e + "/" + i + "!tests").then(function(e) {
                        t(e)
                    }, function() {
                        r()
                    })
                }
            })
        }

        function r(e) {
            var t = e.get("TestName");
            if (!f[t]) {
                var r = function() {
                    f.call()
                };
                r.prototype = Object.create(f.prototype, {
                    constructor: {
                        value: r
                    },
                    sides: {
                        value: e.get("AllSides")
                    },
                    testName: {
                        value: e.get("TestName")
                    },
                    testID: {
                        value: e.get("TestID")
                    }
                }), f[t] = r
            }
            return f[t]
        }
        var n, i, s = SM["import"]("sm-resource-core"),
            o = SM["import"]("rsvp"),
            a = SM["import"]("lodash"),
            u = "",
            l = {
                ANALYTICS: "analytics",
                USER: "user",
                BOTH: "both"
            },
            c = (n = {}, babelHelpers.defineProperty(n, l.USER, "initialABUserTestsByUser"), babelHelpers.defineProperty(n, l.ANALYTICS, "initialABUserTestsByAnalyticsID"), babelHelpers.defineProperty(n, l.BOTH, "initialABUserTests"), n),
            d = (i = {}, babelHelpers.defineProperty(i, l.USER, null), babelHelpers.defineProperty(i, l.ANALYTICS, null), babelHelpers.defineProperty(i, l.BOTH, null), i),
            f = function() {};
        f.prototype = Object.create(Object.prototype, {
            sides: {
                configurable: !0,
                value: null
            },
            currentSide: {
                configurable: !0,
                writable: !0,
                value: null
            },
            testName: {
                configurable: !0,
                value: null
            },
            testID: {
                configurable: !0,
                value: null
            }
        }), a.assign(f.prototype, {
            getTestSideIfAssigned: function() {
                return this.currentSide
            },
            getTestSide: function() {
                throw new Error("Not implemented yet")
            },
            getAllTestSides: function() {
                return this.sides
            },
            side: function(e) {
                return this.sides[e]
            },
            sideName: function(e) {
                return a.invert(this.sides)[e]
            }
        }), f.getActiveTests = function() {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : l.BOTH;
            return new o.Promise(function(n) {
                if (e === l.BOTH && (f._getVisitorIdForVisitorType(l.USER) || (e = l.ANALYTICS)), d[e]) d[e].then(n, function() {
                    n([])
                });
                else {
                    var i = t(e).then(function(e) {
                        var t = {};
                        return e.forEach(function(e) {
                            var n = r(e),
                                i = new n;
                            i.currentSide = e.get("Side"), i.getTestSideIfAssigned() && (t[i.testName] = i)
                        }), t
                    }, function() {
                        n([])
                    });
                    d[e] = i, i.then(n)
                }
            })
        }, f._getVisitorIdForVisitorType = function(t) {
            var r, n = e.SM.Page && e.SM.Page.user && e.SM.Page.user.nickName;
            switch (t) {
                case l.ANALYTICS:
                    r = u;
                    break;
                case l.USER:
                    r = n;
                    break;
                case l.BOTH:
                    r = n + "." + u;
                    break;
                default:
                    throw new Error("invalid visitorType: " + t)
            }
            return r
        }, e.SM.Page.on("page:init", function(e) {
            u = e.analyticsId || ""
        }), module.exports = f, module.exports.VISITOR_TYPE = l, module.exports._loadTests = t
    }(), SM.currentModule = null
}, "", {
    requires: ["sm", "rsvp", "sm-resource-core", "lodash", "sm-page"]
});
YUI.add("sm-accepts-smugmug-cookies", function(e) {
    SM.currentModule = "sm-accepts-smugmug-cookies";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        var o, n = Error("Cross-origin cookie not sent"),
            t = SM.env.host.http + SM.env.host.main + "/visit",
            s = {
                headers: {
                    "Content-Type": "text/plain"
                },
                withCredentials: !0
            };
        SM.env.smCookiesOk || (o = SM.env.host.customDomain ? {
            _promise: null,
            then: function(o, i) {
                return this._promise || (this._promise = e.SM.io(t, s).then(function(o) {
                    return +o ? !0 : e.SM.io(t, s).then(function(e) {
                        if (+e) return !0;
                        throw n
                    })
                })), this._promise.then(o, i)
            }
        } : new e.Promise(function(e) {
            e(!0)
        }), SM.env.smCookiesOk = o), module.exports = SM.env.smCookiesOk
    }(), SM.currentModule = null
}, "", {
    requires: ["sm", "sm-io"]
});
YUI.add("sm-accordion-view", function(e) {
    SM.currentModule = "sm-accordion-view";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        e.namespace("SM.Views").Accordion = e.Base.create("sm-accordion-view", e.View, [], {
            containerTemplate: '<ul class="sm-accordion"></ul>',
            itemTemplate: '<li id="<%= data.id %>" class="<%= data.itemClassNames.join(" ") %>" data-label="<%= data.label %>"><a href="<%= data.url %>" data-item-id="<%= data.id %>" data-children-id="<%= data._childrenId %>" class="sm-h5 sm-accordion-item-label"><%= data.label %></a><ul id="<%= data._childrenId %>" class="sm-accordion-children"><%== data._renderedItems %></ul></li>',
            subItemContainerTemplate: '<li id="<%= data.id %>" class="sm-accordion-item<%=data.cssClass%>"<% if (data.id) { %> data-id="<%= data.id %>"<% } %> data-label="<%= data.label %>"><%== data._renderedItem %></li>',
            subItemTemplate: '<% if (data.url) { %><a href="<%= data.url %>" class="sm-accordion-item-label" data-item-id="<%= data.id %>"><%= data.label %></a><% } else { %><span class="sm-accordion-item-label" data-item-id="<%= data.id %>"><%= data.label %></span><% } %>',
            destructor: function() {
                this._detachEvents()
            },
            render: function() {
                var t, a, i, s, l = this.get("container"),
                    n = this._compileTemplates(),
                    d = this.get("items"),
                    m = d.length,
                    c = [];
                for (s = 0; m > s; s++) t = d[s], a = ["sm-accordion-item"], i = d[s].children, i && i.length > 0 && a.push("sm-accordion-item-has-children"), t.open && a.push("sm-accordion-item-open"), c.push(n.item(e.merge({
                    id: e.guid(),
                    itemClassNames: a,
                    url: "#",
                    label: t.label,
                    _childrenId: e.guid(),
                    _renderedItems: this._renderSubItems(i)
                }, t)));
                return l.append(c.join("")), this._attachEvents(), this
            },
            _renderSubItems: function(t) {
                var a, i, s = this._compileTemplates(),
                    l = 0,
                    n = [];
                if (!t) return "";
                for (e.Lang.isArray(t) || (t = [t]), l = t.length, i = 0; l > i; i++) a = t[i], a && (a.id || (a.id = e.guid()), n.push(s.subItemContainer({
                    id: a.id,
                    item: a,
                    label: a.label,
                    cssClass: a.cssClass ? " " + a.cssClass : "",
                    _renderedItem: s.subItem(a)
                })));
                return n.join("")
            },
            addSubItem: function(e, t) {
                var a = this.get("container"),
                    i = a.all(">.sm-accordion-item").item(e);
                i && (i.addClass("sm-accordion-item-has-children"), i.one(".sm-accordion-children").append(this._renderSubItems(t)))
            },
            _attachEvents: function() {
                var e = this.get("container");
                this._detachEvents(), this._eventHandles = [], this._eventHandles.push(e.delegate("click", this._onItemClick, "> .sm-accordion-item > a", this))
            },
            _detachEvents: function() {
                new e.EventHandle(this._eventHandles).detach()
            },
            _compileTemplates: function() {
                return this._templates || (this._templates = {
                    item: e.Template.Micro.compile(this.itemTemplate),
                    subItemContainer: e.Template.Micro.compile(this.subItemContainerTemplate),
                    subItem: e.Template.Micro.compile(this.subItemTemplate)
                }), this._templates
            },
            _onItemClick: function(e) {
                var t = this.get("container"),
                    a = e.currentTarget.get("parentNode");
                a.hasClass("sm-accordion-item-open") ? a.removeClass("sm-accordion-item-open") : (this.get("mutuallyExclusive") && (this._allItems || (this._allItems = t.all(".sm-accordion-item")), this._allItems.removeClass("sm-accordion-item-open")), a.addClass("sm-accordion-item-open")), e.preventDefault()
            }
        }, {
            ATTRS: {
                items: {},
                mutuallyExclusive: {
                    value: !0
                }
            }
        })
    }(), SM.currentModule = null
}, "", {
    requires: ["template-micro", "node", "view", "sm-templates-form", "sm-templates-button"]
});
YUI.add("sm-action-panel", function(e) {
    SM.currentModule = "sm-action-panel";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: !0
        });
        var e = SM["import"]("sm-component-button"),
            t = SM["import"]("sm-modal"),
            n = SM["import"]("sm-component-panel-base"),
            o = SM["import"]("react"),
            r = function(r) {
                function l() {
                    return babelHelpers.classCallCheck(this, l), babelHelpers.possibleConstructorReturn(this, (l.__proto__ || Object.getPrototypeOf(l)).apply(this, arguments))
                }
                return babelHelpers.inherits(l, r), babelHelpers.createClass(l, [{
                    key: "render",
                    value: function() {
                        var r = this,
                            l = this.props,
                            s = l.children,
                            i = l.closeButtonSkin,
                            a = l.closeButtonText,
                            c = l.title,
                            u = l.width,
                            p = babelHelpers.objectWithoutProperties(l, ["children", "closeButtonSkin", "closeButtonText", "title", "width"]);
                        return o.createElement(t, babelHelpers["extends"]({
                            ref: function(e) {
                                return r._modalPanel = e
                            }
                        }, p), o.createElement(n, {
                            className: "sm-action-panel",
                            headerPosition: n.HEADER_INSIDE,
                            width: u
                        }, c && o.createElement(n.Header, null, o.createElement("h1", null, c)), o.createElement(n.Body, null, s, o.createElement(e, {
                            className: "sm-action-panel-close",
                            onClick: this._onCloseClick.bind(this),
                            skin: i
                        }, a))))
                    }
                }, {
                    key: "_onCloseClick",
                    value: function(e) {
                        e.stopPropagation(), this._modalPanel.hide()
                    }
                }]), l
            }(SM["import"]("sm-component-pure-render"));
        exports["default"] = r;
        var l = o.PropTypes;
        r.propTypes = {
            children: function(t, n, r) {
                var l = !1;
                return o.Children.forEach(t[n], function(t) {
                    t && t.type !== e && (l = !0)
                }), l ? new Error(r + ": all children must be <Button>s") : void 0
            },
            closeButtonSkin: l.string,
            closeButtonText: l.string,
            title: l.string,
            width: l.number
        }, r.defaultProps = {
            closeButtonSkin: "default",
            closeButtonText: "Close",
            width: 336
        }, module.exports = exports["default"]
    }(), SM.currentModule = null
}, "", {
    requires: ["react", "sm", "sm-component-button", "sm-component-panel-base", "sm-component-pure-render", "sm-modal"]
});
YUI.add("sm-album-model", function(e) {
    SM.currentModule = "sm-album-model";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        ! function() {
            var l = e.Base.create("sm-album-model", e.Model, [e.SM.ModelSyncAPI, e.ModelRelate], {
                idAttribute: "AlbumID",
                apiEndpoint: "album",
                initializer: function() {
                    var l = this.get("HighlightImageData");
                    l && this.set("HighlightImageModel", new e.SM.Models.Image(l))
                },
                apiCategories: {
                    "default": {
                        expanded: {
                            Image: e.SM.Models.Image
                        }
                    }
                }
            }, {
                ATTRS: {
                    AlbumID: {
                        value: null
                    },
                    AlbumKey: {
                        value: null
                    },
                    NickName: {
                        value: null
                    },
                    Title: {
                        value: ""
                    },
                    Description: {
                        value: ""
                    },
                    NiceName: {
                        value: ""
                    },
                    Public: {
                        value: !0
                    },
                    CategoryID: {
                        value: 0
                    },
                    SubCategoryID: {
                        value: 0
                    },
                    HighlightImageID: {
                        value: 0
                    },
                    URL: {
                        value: null
                    },
                    Share: {
                        value: !1
                    },
                    CanSave: {
                        value: !1
                    },
                    Protected: {
                        value: !0
                    },
                    Keywords: {
                        value: null
                    },
                    LargestSize: {
                        value: null
                    },
                    Watermark: {
                        value: !1
                    },
                    WorldSearchable: {
                        value: !0
                    },
                    SmugSearchable: {
                        value: !0
                    },
                    ShowKeywords: {
                        value: null
                    },
                    Geography: {
                        value: !0
                    },
                    ProofDays: {
                        value: 0
                    },
                    TemplateID: {
                        value: 0
                    },
                    SquareThumbs: {
                        value: !0
                    },
                    UploadKey: {
                        value: ""
                    },
                    Printable: {
                        value: !1
                    },
                    HasImages: {
                        value: !1
                    },
                    IsOwner: {
                        value: !1
                    },
                    IsAssistant: {
                        value: !1
                    },
                    IsFriend: {
                        value: !1
                    },
                    IsFamily: {
                        value: !1
                    },
                    External: {
                        value: !1
                    },
                    FriendEdit: {
                        value: !1
                    },
                    FamilyEdit: {
                        value: !1
                    },
                    EXIF: {
                        value: !1
                    },
                    Filenames: {
                        value: !1
                    },
                    Slideshow: {
                        value: !0
                    },
                    IsPrivate: {
                        value: !1
                    },
                    SecurityType: {
                        value: null
                    },
                    EffectiveSecurityType: {
                        value: null
                    },
                    AllowDownloads: {
                        value: !1
                    },
                    HasDownloadPassword: {
                        value: !1
                    },
                    DownloadPassword: {
                        value: ""
                    },
                    IsSellable: {
                        value: !1
                    }
                },
                RELATIONSHIPS: {
                    Images: {
                        type: "toMany",
                        key: "AlbumID",
                        relatedModel: e.SM.Models.Image,
                        relatedKey: "AlbumID",
                        listType: e.SM.Models.ImageList
                    },
                    Image: {
                        type: "toOne",
                        key: "HighlightImageID",
                        relatedModel: e.SM.Models.Image,
                        relatedKey: "ImageID"
                    },
                    User: {
                        type: "toOne",
                        key: "NickName",
                        relatedModel: e.SM.Models.User,
                        relatedKey: "NickName"
                    }
                }
            });
            e.namespace("SM.Models").Album = l
        }(),
        function() {
            var l = e.Base.create("sm-models-albumlist", e.ModelList, [e.SM.ModelListSyncAPI], {
                model: e.SM.Models.Album,
                initializer: function(e) {},
                apiEndpoint: "albums",
                apiCategories: {
                    featured: {
                        method: "featured",
                        expanded: {
                            HighlightImages: e.SM.Models.ImageList
                        }
                    },
                    recent: {
                        method: "recent",
                        expanded: {
                            HighlightImages: e.SM.Models.ImageList
                        }
                    }
                }
            }, {
                ATTRS: {}
            });
            e.namespace("SM.Models").AlbumList = l
        }()
    }(), SM.currentModule = null
}, "", {
    requires: ["base", "model", "model-list", "model-relate", "sm-api", "sm-image-model", "sm-model-list-sync-api", "sm-model-sync-api"]
});
YUI.add("sm-analytics", function(e) {
    SM.currentModule = "sm-analytics";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        var t = SM["import"]("lodash"),
            n = SM["import"]("sm-abtest"),
            a = SM["import"]("sm-dom"),
            r = SM["import"]("rsvp"),
            i = SM["import"]("sm-smuglog"),
            o = function(e) {
                if (!a.win.SMDataLayer && (a.win.SMDataLayer = [e], function(e, t, n, a, r) {
                        e[a] = e[a] || [], e[a].push({
                            "gtm.start": (new Date).getTime(),
                            event: "gtm.js"
                        });
                        var i = t.getElementsByTagName(n)[0],
                            o = t.createElement(n),
                            s = "dataLayer" != a ? "&l=" + a : "";
                        o.async = !0, o.src = "//www.googletagmanager.com/gtm.js?id=" + r + s, i.parentNode.insertBefore(o, i)
                    }(a.win, a.doc, "script", "SMDataLayer", e.tag_manager_id), a.win.SMDataLayer_preInit)) {
                    var t = a.win.SMDataLayer_preInit;
                    a.win.SMDataLayer_preInit = null;
                    for (var n, r = 0; n = t[r]; r++) a.win.SMDataLayer.push(n)
                }
            },
            s = function() {
                return a.win.SMDataLayer ? a.win.SMDataLayer : a.win.SMDataLayer_preInit || (a.win.SMDataLayer_preInit = [])
            },
            u = function(e) {
                var n = t.mapValues(e, function() {
                    return ""
                });
                s().push(n), s().push(t.omit(e, function(e) {
                    return void 0 === e || null === e
                }))
            },
            c = {};
        c.logEvent = function(e, a, i, o) {
            return i || (i = {}), new r.Promise(function(r, u) {
                n.getActiveTests(n.VISITOR_TYPE.BOTH).then(function(n) {
                    var u = t.transform(n, function(e, t) {
                        e[t.testID] = t.sideName(t.getTestSideIfAssigned())
                    }, {});
                    i = t.defaults({
                        ue_action: a
                    }, u, i, {
                        action_source: "user"
                    }), s().push({
                        event_data: ""
                    });
                    var c = {
                        event: "metric",
                        event_category: e,
                        event_action: a,
                        event_data: i,
                        event_snowplow_version: 1
                    };
                    o && (c.event_user_id_override = o), s().push(c), setTimeout(function() {
                        r()
                    }, 500)
                })
            })
        }, c.logTransaction = function(e, n, a, r, i, o) {
            i || (i = {});
            var u = i.data || {};
            return s().push({
                event_data: ""
            }), s().push({
                event: "transaction",
                event_snowplow_version: 1,
                event_category: e,
                event_action: n,
                event_data: u,
                event_user_id_override: o,
                transactionId: a,
                transactionTotal: r,
                transactionAffiliation: i.affiliation,
                transactionShipping: i.shipping,
                transactionTax: i.tax,
                transactionProducts: i.products
            }), c.logEvent(e, n, t.defaults({
                transaction_id: a
            }, u), o)
        }, module.exports.logEvent = c.logEvent, module.exports.logTransaction = c.logTransaction, module.exports.dataLayerPush = u, module.exports._dataLayer = s, e.namespace("SM").Analytics = c;
        var l = Object.create(null, {
            dataLayer: {
                writable: !0,
                value: {}
            },
            visitorUserRefTag: {
                get: function() {
                    return this.dataLayer.visitor_user_reftag
                }
            },
            visitorIsTrial: {
                get: function() {
                    return this.dataLayer.visitor_is_trial
                }
            },
            visitorIsParticipant: {
                get: function() {
                    return this.dataLayer.visitor_is_participant
                }
            },
            ownerUserRefTag: {
                get: function() {
                    return this.dataLayer.user_reftag
                }
            },
            pageType: {
                get: function() {
                    return this.dataLayer.page_type || null
                }
            }
        });
        t.assign(l, {
            init: function(e) {
                this.dataLayer = t.clone(e), o(e);
                var n = Object.create(h, {
                    tracker: {
                        value: this
                    }
                });
                n.log()
            },
            createEvent: function(e, n, a) {
                var r = Object.create(E, {
                    tracker: {
                        value: this
                    },
                    category: {
                        value: e
                    },
                    action: {
                        value: n
                    }
                });
                return a && t.assign(r, a), r
            },
            createTransaction: function(e, n, a) {
                var r = Object.create(I, {
                    tracker: {
                        value: this
                    },
                    orderId: {
                        value: e
                    },
                    total: {
                        value: n
                    }
                });
                return a && t.assign(r, a), r
            },
            trackPageView: function(e) {
                var t = this;
                return new r.Promise(function(n) {
                    u({
                        event: "page_view",
                        event_snowplow_version: 2,
                        page_view_contexts: e
                    }), t._resolveAfterDelay(n)
                })
            },
            trackEvent: function(e, t, n, a, i, o, s) {
                var c = this;
                return new r.Promise(function(r) {
                    u({
                        event: "metric",
                        event_snowplow_version: 2,
                        event_category: e,
                        event_action: t,
                        event_label: n,
                        event_property: a,
                        event_value: i,
                        event_contexts: o,
                        event_user_id_override: s
                    }), c._resolveAfterDelay(r)
                })
            },
            trackTransaction: function(e) {
                var t = this;
                return new r.Promise(function(n) {
                    u({
                        event: "transaction",
                        event_snowplow_version: 2,
                        event_category: "",
                        event_action: "",
                        transactionId: e.orderId,
                        transactionTotal: e.total,
                        transactionAffiliation: e.affiliation,
                        transactionTax: e.tax,
                        transactionShipping: e.shipping,
                        transactionCity: e.city,
                        transactionState: e.state,
                        transactionCountry: e.country,
                        transactionProducts: e.items.map(function(e) {
                            return {
                                orderId: e.orderId,
                                sku: e.sku,
                                name: e.name,
                                category: e.category,
                                price: e.price,
                                quantity: e.quantity
                            }
                        }),
                        event_contexts: e.contexts,
                        event_user_id_override: e.eventUserId
                    }), e.items.forEach(function(t) {
                        u({
                            event: "transaction_add_item",
                            event_snowplow_version: 2,
                            event_category: "",
                            event_action: "",
                            productOrderId: t.orderId,
                            productSku: t.sku,
                            productName: t.name,
                            productCategory: t.category,
                            productPrice: t.price,
                            productQuantity: t.quantity,
                            event_contexts: e.contexts,
                            event_user_id_override: e.eventUserId
                        })
                    }), u({
                        event: "transaction_track",
                        event_snowplow_version: 2,
                        event_category: "",
                        event_action: "",
                        event_user_id_override: e.eventUserId
                    }), t._resolveAfterDelay(n)
                })
            },
            _resolveAfterDelay: function(e) {
                setTimeout(function() {
                    e()
                }, 500)
            }
        }), module.exports.Tracker = l;
        var g = {
                API_ENDPOINT: "iglu:com.smugmug/api_endpoint/jsonschema/1-0-0",
                API_ERROR: "iglu:com.smugmug/api_error/jsonschema/1-0-0",
                API_REQUEST: "iglu:com.smugmug/api_request/jsonschema/1-0-0",
                AUTHENTICATION: "iglu:com.smugmug/authentication/jsonschema/1-0-0",
                DEVICE: "iglu:com.smugmug/device/jsonschema/1-0-1",
                COLLECTION: "iglu:com.smugmug/collection/jsonschema/1-0-0",
                CONTENT: "iglu:com.smugmug/content/jsonschema/1-0-0",
                IMAGE: "iglu:com.smugmug/image/jsonschema/1-0-0",
                IMAGE_EDIT: "iglu:com.smugmug/image_edit/jsonschema/1-0-0",
                NODE: "iglu:com.smugmug/node/jsonschema/1-0-3",
                NOTIFICATION: "iglu:com.smugmug/notification/jsonschema/1-0-0",
                PAYMENT: "iglu:com.smugmug/payment/jsonschema/1-0-0",
                PRODUCT: "iglu:com.smugmug/product/jsonschema/1-0-0",
                SCREEN: "iglu:com.smugmug/screen/jsonschema/1-0-0",
                SEARCH: "iglu:com.smugmug/search/jsonschema/1-0-0",
                SHARING: "iglu:com.smugmug/sharing/jsonschema/1-0-0",
                SUBSCRIPTION: "iglu:com.smugmug/subscription/jsonschema/1-0-0",
                SURVEY: "iglu:com.smugmug/survey/jsonschema/1-0-0",
                TESTING: "iglu:com.smugmug/testing/jsonschema/1-0-0",
                USER: "iglu:com.smugmug/user/jsonschema/1-0-0",
                TEST: "iglu:com.smugmug/test_event/jsonschema/1-0-0"
            },
            d = babelHelpers.defineProperty({}, g.SCREEN, {
                SCREEN_NAME: "screen_name"
            }),
            m = {
                ACCOUNT_CLOSE: "Account Close",
                ACCOUNT_EXPIRATION: "Account Expiration",
                ADD_TO_CART: "Add To Cart",
                BUY: "Buy",
                CONTACTS: "Contacts",
                PRIVATE_SHARING: "Private Sharing",
                GETTING_STARTED: "Getting Started",
                HEADER_TOOL_BAR: "Header Tool Bar",
                HELP_MENU: "Help Menu",
                HELP_GUIDE: "Help Guide",
                IMAGE_EDITOR: "Image Editor",
                IMAGE_TOOL: "Image Tool",
                LIGHTBOX: "Lightbox",
                LOGIN: "Login",
                MARKETING_PAGE: "Marketing Page",
                MIGRATION: "Migration",
                MIGRATION_PREVIEW_MODAL: "Migration Preview Modal",
                PARTNER_PRODUCTS: "Partner Products",
                PHANFARE_MIGRATION: "Phanfare Migration",
                PICTURELIFE_MIGRATION: "Picturelife Migration",
                PROMOTION: "promotion",
                SHARED_WITH_ME: "Shared With Me",
                SHARE_PANEL: "Share Panel",
                SIGNUP: "Sign Up",
                SUBSCRIBE: "Subscribe",
                SUBSCRIPTION_SETTINGS: "Subscription Settings",
                TRANSACTION: "transaction",
                TRIAL: "Trial",
                UPLOAD: "Upload",
                SLIDESHOW: "Slideshow",
                LIGHTBOX_IMAGE_TOOL: "Lightbox Image Tool",
                FAVORITE: "Favorite",
                WATERMARK: "Watermark"
            },
            v = {
                MARKETING_NAVIGATION_CLICK: "Navigation Click",
                MARKETING_EXPAND_TEXT: "Expand Text",
                MARKETING_EXPAND_MENU: "Expand Menu",
                MARKETING_PLAY_VIDEO: "Play Video",
                SCREEN_VIEW: "Screen View"
            },
            _ = {
                LABEL: "label",
                PROPERTY: "property",
                VALUE: "value"
            },
            p = {
                SECTION_BODY: "Body",
                SECTION_HERO: "Hero"
            },
            T = Object.create(null, {
                tracker: {
                    value: null
                },
                eventUserId: {
                    value: null,
                    writable: !0
                },
                isGuest: {
                    get: function() {
                        return this._isGuest
                    },
                    set: function(e) {
                        if (!t.isBoolean(e)) throw new Error("Boolean required");
                        this._isGuest = e
                    }
                },
                isOwner: {
                    get: function() {
                        return this._isOwner
                    },
                    set: function(e) {
                        if (!t.isBoolean(e)) throw new Error("Boolean required");
                        this._isOwner = e
                    }
                },
                pageType: {
                    get: function() {
                        return this._pageType || this.tracker.pageType
                    },
                    set: function(e) {
                        if (!t.isString(e)) throw new Error("String required");
                        this._pageType = e
                    }
                },
                systemAction: {
                    get: function() {
                        return this._systemAction || !1
                    },
                    set: function(e) {
                        if (!t.isBoolean(e)) throw new Error("Boolean required");
                        this._systemAction = e
                    }
                },
                contexts: {
                    get: function() {
                        return this._contexts || (this._contexts = []), this._contexts
                    }
                }
            });
        t.assign(T, {
            addContext: function(e, n) {
                return this.contexts.push({
                    schema: e,
                    data: t.omit(n, function(e) {
                        return void 0 === e || null === e
                    })
                }), this
            },
            addStandardContexts: function() {
                var e = this;
                return new r.Promise(function(r) {
                    e.addContext(g.USER, {
                        action_source: e.systemAction ? "System" : "User",
                        is_logged_in: e.tracker.visitorUserRefTag ? !0 : !1,
                        is_trial_account: e.tracker.visitorUserRefTag ? e.tracker.visitorIsTrial ? !0 : !1 : null,
                        is_participant_account: e.tracker.visitorUserRefTag ? e.tracker.visitorIsParticipant ? !0 : !1 : null,
                        is_guest: e.isGuest,
                        is_owner: e.isOwner
                    });
                    var o = a.win.devicePixelRatio;
                    o && o > 0 && 10 > o ? (o *= 100, o = Math.floor(o), o /= 100) : (i.error("sm-analytics", "Invalid or undefined pixel_density " + o), o = void 0), e.addContext(g.DEVICE, {
                        pixel_density: o
                    }), e.pageType && e.addContext(g.CONTENT, {
                        page_type: e.pageType
                    }), n.getActiveTests(n.VISITOR_TYPE.BOTH).then(function(n) {
                        t.forOwn(n, function(t) {
                            t.getTestSideIfAssigned() && e.addContext(g.TESTING, {
                                test_name: t.testID,
                                condition: t.sideName(t.getTestSideIfAssigned())
                            })
                        }), r()
                    }, function(e) {
                        i.error("sm-analytics", e), i.add("sm-analytics", "Failed to get active A/B Tests.", i.LEVEL_WARNING), r()
                    })
                })
            },
            log: function() {
                throw new Error("Individual event type should implement log()")
            }
        }), module.exports.ACTION = v, module.exports.CATEGORY = m, module.exports.CONTEXT = g, module.exports.CONTEXT_PARAM = d, module.exports.EVENT_PARAM = _, module.exports.SCREEN_CONTEXTS = p, module.exports._TrackerEvent = T, c.CATEGORY = m;
        var E = Object.create(T, {
            category: {
                value: ""
            },
            action: {
                value: ""
            },
            label: {
                value: null,
                writable: !0
            },
            property: {
                value: null,
                writable: !0
            },
            value: {
                get: function() {
                    return this._value
                },
                set: function(e) {
                    if (!t.isFinite(e)) throw new Error("Number required");
                    this._value = e
                }
            }
        });
        t.assign(E, {
            log: function() {
                var e = this;
                return this.addStandardContexts().then(function() {
                    return e.tracker.trackEvent(e.category, e.action, e.label, e.property, e.value, e.contexts, e.eventUserId)
                }, function() {
                    i.add("sm-analytics", "Failed to add standard contexts to event.", i.LEVEL_WARNING)
                })
            }
        });
        var I = Object.create(T, {
            orderId: {
                value: null
            },
            total: {
                value: null
            },
            tax: {
                value: null,
                writable: !0
            },
            affiliation: {
                value: null,
                writable: !0
            },
            shipping: {
                value: null,
                writable: !0
            },
            city: {
                value: null,
                writable: !0
            },
            state: {
                value: null,
                writable: !0
            },
            country: {
                value: null,
                writable: !0
            },
            items: {
                get: function() {
                    return this._items || (this._items = []), this._items
                }
            }
        });
        t.assign(I, {
            addItem: function(e, n, a, r) {
                var i = Object.create(f, {
                    orderId: {
                        value: this.orderId
                    },
                    sku: {
                        value: e
                    },
                    price: {
                        value: n
                    },
                    quantity: {
                        value: a
                    }
                });
                return r && t.assign(i, r), this.items.push(i), i
            },
            log: function() {
                var e = this;
                return this.addStandardContexts().then(function() {
                    return e.tracker.trackTransaction(e)
                }, function(e) {
                    i.error("sm-analytics", e), i.add("sm-analytics", "Failed to add standard contexts to transaction.", i.LEVEL_WARNING)
                })
            }
        });
        var f = Object.create(null, {
                orderId: {
                    value: null
                },
                sku: {
                    value: null
                },
                price: {
                    value: null
                },
                quantity: {
                    value: null
                },
                name: {
                    value: null,
                    writable: !0
                },
                category: 
{                    value: null,
                    writable: !0
                }
            }),
            h = Object.create(T);
        t.assign(h, {
            log: function() {
                var e = this;
                return this.addStandardContexts().then(function() {
                    return e.tracker.trackPageView(e.contexts)
                }, function() {
                    i.add("sm-analytics", "Failed to add standard contexts to event.", i.LEVEL_WARNING)
                })
            }
        })
    }(), SM.currentModule = null
}, "", {
    requires: ["lodash", "promise", "rsvp", "sm", "sm-dom", "sm-abtest", "sm-smuglog"]
});
YUI.add("sm-api-base", function(e) {
    SM.currentModule = "sm-api-base";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        e.namespace("SM").API = {
            EXCEPTION_UNKNOWN: "Unknown API Error",
            STATUS_OK: "ok",
            STATUS_FAIL: "fail",
            URL: "/services/api/json/1.4.0/",
            flushCache: function() {
                if (e.SM.API._cache)
                    for (var n in e.SM.API._cache) delete e.SM.API._cache[n]
            }
        }
    }(), SM.currentModule = null
}, "", {});
YUI.add("sm-api-redux-action-types", function(e) {
    SM.currentModule = "sm-api-redux-action-types";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: !0
        });
        exports.REQUEST = "API_V2_REQUEST", exports.RESPONSE = "API_V2_RESPONSE"
    }(), SM.currentModule = null
}, "", {
    requires: ["sm"]
});
YUI.add("sm-api-redux-actions", function(e) {
    SM.currentModule = "sm-api-redux-actions";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: !0
        });
        var e = SM["import"]("sm-api-redux-selectors"),
            r = e.getPreviousExpansions,
            t = SM["import"]("sm-api-redux-action-types"),
            n = t.REQUEST,
            s = t.RESPONSE,
            u = SM["import"]("sm-api-redux-utils"),
            o = u.getCanonicalUri,
            i = "Filtering fields is not supported by `sm-api-redux::get`",
            a = exports.request = function(e) {
                var r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : "api-redux";
                return babelHelpers["extends"]({
                    type: n,
                    trigger: r
                }, e)
            },
            d = exports.response = function(e, r) {
                var t = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : "api-redux";
                return {
                    type: s,
                    rawResponse: e,
                    lookupKey: r,
                    trigger: t
                }
            },
            p = exports._makeRequest = function() {
                var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
                return e.fields && (delete e.fields, console.warn(i)),
                    function(t, n, s) {
                        var u = s.io;
                        return t(a(e)), new Promise(function(s, i) {
                            u(babelHelpers["extends"]({}, e, {
                                type: "v2",
                                uris: !0,
                                nestExpansions: !1,
                                expand: r(n(), e.uri)
                            })).then(function(e) {
                                var r = e.raw,
                                    n = o(r.Response.Uri);
                                t(d(r, n)), s(n)
                            })["catch"](function(e) {
                                i(e)
                            })
                        })
                    }
            };
        exports.fetchFromAPI = function(e) {
            return p(babelHelpers["extends"]({}, e, {
                method: "GET"
            }))
        }, exports.postToAPI = function(e) {
            return p(babelHelpers["extends"]({}, e, {
                method: "POST"
            }))
        }, exports.patchToAPI = function(e) {
            return p(babelHelpers["extends"]({}, e, {
                method: "PATCH"
            }))
        }, exports.deleteFromAPI = function(e) {
            return p(babelHelpers["extends"]({}, e, {
                method: "DELETE"
            }))
        }
    }(), SM.currentModule = null
}, "", {
    requires: ["sm", "sm-api-redux-action-types", "sm-api-redux-selectors", "sm-api-redux-utils", "sm-redux-store"]
});
YUI.add("sm-api-redux-paginator-action-types", function(e) {
    SM.currentModule = "sm-api-redux-paginator-action-types";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: !0
        });
        exports.PAGINATION_REQUEST = "API_V2_PAGINATION_REQUEST", exports.PAGINATION_REQUEST_FAILURE = "API_V2_PAGINATION_REQUEST_FAIL"
    }(), SM.currentModule = null
}, "", {
    requires: ["sm"]
});
YUI.add("sm-api-redux-paginator-reducers", function(e) {
    SM.currentModule = "sm-api-redux-paginator-reducers";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        "use strict";

        function e() {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
                r = arguments[1];
            switch (r.type) {
                case a:
                    return babelHelpers["extends"]({}, e, babelHelpers.defineProperty({}, r.data.uri, [].concat(babelHelpers.toConsumableArray(e[r.data.uri] || []), [{
                        start: r.data.start,
                        count: r.data.count,
                        requestData: r.data.requestData
                    }])));
                case n:
                    var t = e[r.data.uri] || [];
                    return t = t.filter(function(e) {
                        return e.start === r.data.start && e.count === r.data.count
                    }), babelHelpers["extends"]({}, e, babelHelpers.defineProperty({}, r.data.uri, t));
                default:
                    return e
            }
        }

        function r() {
            var r = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
                t = arguments[1],
                a = r.paginator,
                n = void 0 === a ? {} : a;
            return n = [e].reduce(function(e, r) {
                return r(e, t)
            }, n), babelHelpers["extends"]({}, r, {
                paginator: n
            })
        }
        Object.defineProperty(exports, "__esModule", {
            value: !0
        }), exports.INTERNAL = r;
        var t = SM["import"]("sm-api-redux-paginator-action-types"),
            a = t.PAGINATION_REQUEST,
            n = t.PAGINATION_REQUEST_FAILURE
    }(), SM.currentModule = null
}, "", {
    requires: ["sm", "sm-api-redux-paginator-action-types"]
});
YUI.add("sm-api-redux-reducers", function(e) {
    SM.currentModule = "sm-api-redux-reducers";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: !0
        });
        var e = SM["import"]("sm-api-redux-action-types"),
            r = e.REQUEST,
            t = e.RESPONSE,
            n = SM["import"]("sm-api-redux-utils"),
            s = n.getCanonicalUri,
            a = function() {
                var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
                    t = arguments[1],
                    n = arguments[2];
                switch (t.type) {
                    case r:
                        var s = t.expand;
                        return Array.isArray(s) && ! function() {
                            var e = {};
                            s.forEach(function(r) {
                                e[r] = !0
                            }), s = e
                        }(), s = Object.assign({}, n, s), babelHelpers["extends"]({}, e, babelHelpers.defineProperty({}, t.uri, {
                            previousExpansions: s || {}
                        }));
                    default:
                        return e
                }
            },
            u = function(e, r) {
                var t = r.rawResponse.Response,
                    n = r.lookupKey;
                if (!n) return e;
                var s = t.Locator,
                    a = (t[s], t.Uri, babelHelpers.objectWithoutProperties(t, [s, "Uri"]));
                return babelHelpers["extends"]({}, e, {
                    uriMetadata: babelHelpers["extends"]({}, e.uriMetadata || {}, babelHelpers.defineProperty({}, n, babelHelpers["extends"]({}, a)))
                })
            },
            i = (exports.INTERNAL = function() {
                var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
                    n = arguments[1];
                switch (n.type) {
                    case r:
                        var s = e.requests,
                            i = s && s[n.uri],
                            o = i && i.previousExpansions || {};
                        return babelHelpers["extends"]({}, e, {
                            requests: a(e.requests, n, o)
                        });
                    case t:
                        return u(e, n);
                    default:
                        return e
                }
            }, function(e, r) {
                var t = {};
                for (var n in r.Uris) {
                    var a = r.Uris[n];
                    "object" === ("undefined" == typeof a ? "undefined" : babelHelpers["typeof"](a)) && (a = a.Uri), t[n] = s(a)
                }
                return babelHelpers.defineProperty({}, e, babelHelpers["extends"]({}, r, {
                    Uris: t
                }))
            }),
            o = function(e, r) {
                var t = {};
                if (Array.isArray(r) && r[0].Uri) {
                    var n = r.map(function(e) {
                        var r = s(e.Uri);
                        return Object.assign(t, i(r, e)), r
                    });
                    return t[e] = {
                        Uris: n
                    }, t
                }
                return r && r.Uris ? i(e, r) : r ? babelHelpers.defineProperty({}, e, r) : {}
            },
            p = function() {
                var e = (arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, arguments[1]),
                    r = e.lookupKey,
                    t = e.rawResponse,
                    n = t.Response;
                if (!n) return {};
                r = r || s(n.Uri);
                var a = o(r, n[n.Locator]),
                    u = t.Expansions;
                for (var i in u) {
                    var p = s(i),
                        l = u[i],
                        d = l[l.Locator];
                    Object.assign(a, o(p, d))
                }
                return a
            };
        exports.DATA = function() {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
                r = arguments[1];
            switch (r.type) {
                case t:
                    return babelHelpers["extends"]({}, e, p(e, r));
                default:
                    return e
            }
        }
    }(), SM.currentModule = null
}, "", {
    requires: ["sm", "sm-api-redux-action-types", "sm-api-redux-utils", "sm-uri"]
});
YUI.add("sm-api-redux-selectors", function(r) {
    SM.currentModule = "sm-api-redux-selectors";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        "use strict";

        function r(r, e) {
            var n = r._internal;
            n = void 0 === n ? {} : n;
            var t = n.uriMetadata;
            t = void 0 === t ? {} : t;
            var u = t[e];
            return u
        }
        Object.defineProperty(exports, "__esModule", {
            value: !0
        }), exports.getEntityMetadata = r;
        var e = function(r, e) {
                return r.data[e]
            },
            n = exports.getEntity = function(r, n) {
                var t = e(r, n);
                if (t) {
                    var u = Object.keys(t);
                    if (1 === u.length && "Uris" === u[0]) {
                        var i = function() {
                            var n = [];
                            return t.Uris.forEach(function(t) {
                                n.push(e(r, t))
                            }), {
                                v: n
                            }
                        }();
                        if ("object" === ("undefined" == typeof i ? "undefined" : babelHelpers["typeof"](i))) return i.v
                    }
                    return t
                }
            },
            t = (exports.getPreviousExpansions = function(r, e) {
                var n = r._internal && r._internal.requests,
                    t = n && n[e];
                return t && t.previousExpansions || {}
            }, function(r, e, t) {
                var u = n(r, e);
                if (u && u.Uris) {
                    var i = u.Uris[t];
                    return n(r, i)
                }
            }),
            u = exports.getExpansion = function(r, e, n) {
                var u = n.split("."),
                    i = e,
                    a = void 0;
                return u.forEach(function(e) {
                    a = t(r, i, e), i = a && a.Uri
                }), a
            };
        exports.hasExpansions = function(r, e, n) {
            return n.every(function(n) {
                return u(r, e, n)
            })
        }
    }(), SM.currentModule = null
}, "", {
    requires: ["sm"]
});
YUI.add("sm-api-redux-utils", function(r) {
    SM.currentModule = "sm-api-redux-utils";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: !0
        });
        var r = SM["import"]("sm-uri");
        exports.getCanonicalUri = function(e) {
            if (e) {
                var u = new r(e),
                    t = u.queryParams,
                    i = u.path,
                    n = t;
                for (var s in t)(s.startsWith("_") || "APIKey" === s) && delete n[s];
                var a = r.stringifyQuery(n);
                return a ? i + "?" + a : i
            }
        }
    }(), SM.currentModule = null
}, "", {
    requires: ["sm", "sm-uri"]
});
YUI.add("sm-api", function(t) {
    SM.currentModule = "sm-api";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        var e, r = t.Lang.isArray,
            a = t.Array;
        e = t.SM.API = t.mix(function(t) {
            t && (this.url = t.source || e.URL, this.transport = t.transport)
        }, t.SM.API), e.prototype.sendRequest = function(e) {
            if (r(e)) return this.sendBatchRequest.apply(this, arguments);
            var a = e.apiMethod || e.method,
                n = e.httpMethod || e.apiMethod && e.method || e.cfg && e.cfg.method;
            return e = t.merge(e), e.type = "api140", e.url = this.url, e.transport = this.transport, e.apiMethod = a, e.method = e.httpMethod = n, e.callback && !e.on && (e.on = e.callback), t.SM.io(e)
        }, e.prototype.sendBatchRequest = function(e, r) {
            var n, o, s, u = [];
            for (n = 0, o = e.length; o > n; ++n) u.push(this.sendRequest(e[n]));
            return s = t.batch.apply(t, u), r && (r = t.rbind.apply(t, a(arguments, 1, !0)), s.then(r, r)), s
        }
    }(), SM.currentModule = null
}, "", {
    requires: ["sm-api-base", "sm-api140-transaction", "sm-api2-transaction"]
});
YUI.add("sm-api140-transaction", function(e) {
    SM.currentModule = "sm-api140-transaction";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        function t(e) {
            o.call(this, e)
        }
        var r = e.SM.API,
            s = e.SM.io,
            o = e.SM.io.Transaction.xhr,
            n = e.JSON.stringify,
            a = "object",
            i = "$meta",
            h = {
                GET: !0,
                OPTIONS: !0
            },
            c = {
                POST: !0,
                PUT: !0
            };
        r._cache || (r._cache = {}), e.extend(t, o, {
            _init: function() {
                var t, s = this.request = e.merge(this.request),
                    o = s.url || (s.url = r.URL),
                    i = {},
                    h = s.data || {};
                if (s.method = (s.method || "GET").toUpperCase(), c[s.method] && !h._token && (this._token = e.SM.CSRF.getToken()), "freshRequest" in s || (s.freshRequest = c[s.method]), "cacheResponse" in s || (s.cacheResponse = !0), s.headers)
                    for (t in s.headers) i[t.toLowerCase()] = s.headers[t];
                if ("accept" in i || (i.accept = "application/json"), s.headers = i, typeof h === a) {
                    h = e.merge(h), h.method = s.apiMethod;
                    for (t in h) h.hasOwnProperty(t) && typeof h[t] === a && (h[t] = n(h[t]));
                    s._data = h, h = e.QueryString.stringify(h)
                }
                c[s.method] ? s.data = h : (s.url += (o.indexOf("?") > -1 ? "&" : "?") + h, s.data = null)
            },
            send: function() {
                var t = this,
                    o = this.request,
                    n = h[o.method],
                    a = o.method + o.url + (o.data || ""),
                    i = o.transport,
                    c = i && s[i] || s[this._defaultTransport];
                return !n || this.response || o.freshRequest || (this.response = !o.freshRequest && r._cache[a]), this.response || (this.response = new e.Promise(function(r, s) {
                    function n(n, h) {
                        var c;
                        t._complete || (t._complete = !0, c = n ? {
                            error: n
                        } : t._formatResponse(this, h), c.error ? c.error.message && c.error.message.indexOf("token") > -1 ? i ? (e.SM.SmugLog.add("sm-api140-transaction", {
                            message: "Failed resubmission with new CSRF token.",
                            method: o.apiMethod
                        }, e.SM.SmugLog.LEVEL_WARNING), s(c)) : (t._complete = !1, i = !0, e.SM.CSRF.refreshToken().then(a, s)) : s(c) : r(c))
                    }

                    function a(r) {
                        if (r) {
                            var s = o._data;
                            s._token = r, o.data = e.QueryString.stringify(s)
                        }
                        t._connection = c.send(o, n)
                    }
                    var i = !1;
                    t._token ? t._token.then(a) : a()
                }), this._notifier = new e.Promise.EventNotifier, this._notifier.addEvents(this.response), this._addQueuedSubs(), n && o.cacheResponse && (r._cache[a] = this.response)), this.response
            },
            _formatResponse: function(e, t) {
                var s = {
                        request: this.request,
                        data: e,
                        response: {}
                    },
                    o = this.request.resultLocator;
                if (t) {
                    if ("string" == typeof t) try {
                        t = JSON.parse(t)
                    } catch (n) {
                        throw new Error("Unable to parse as JSON")
                    }
                    t.stat === r.STATUS_FAIL && (s.error = new Error(t.message || r.EXCEPTION_UNKNOWN), t.errors && (s.error.errors = t.errors)), s.response.meta = {
                        stat: t.stat,
                        method: t.method,
                        cache: "boolean" == typeof t.cache ? t.cache : !0
                    }, delete t.stat, delete t.method, delete t.cache, t[i] && this._addMeta(t, o), s.response.results = o && t[o] || t
                }
                return s
            },
            _addMeta: function(e, t) {
                var r, s, o, n, a, h = e[i],
                    c = e[t];
                if (c && h)
                    for (r = 0, s = c.length; s > r; ++r)
                        if (o = c[r], n = h[o[i]])
                            for (a in n) !o.hasOwnProperty(a) && n.hasOwnProperty(a) && (o[a] = n[a])
            }
        }), e.SM.io.Transaction.api140 = t
    }(), SM.currentModule = null
}, "", {
    requires: ["oop", "json-stringify", "sm-api-base", "sm-csrf", "sm-io-xhr-transaction"]
});
YUI.add("sm-api2-transaction", function(e) {
    SM.currentModule = "sm-api2-transaction";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        "use strict";

        function n(e) {
            for (var n in e)
                if (e.hasOwnProperty(n)) return !1;
            return !0
        }

        function i(e, n) {
            var r, s, o, a, p, u;
            for (s = 0, o = n.length; void 0 !== e && o > s; ++s) {
                if (t(e)) {
                    for (r = [], n = n.slice(s), a = 0, p = e.length; p > a; ++a) u = i(e[a], n), t(u) ? r.push.apply(r, u) : r.push(u);
                    return r
                }
                e = e[n[s]]
            }
            return e
        }

        function r(e) {
            s.call(this, e)
        }
        var s = e.SM.io.Transaction.xhr,
            t = e.Lang.isArray,
            o = e.Array.hash,
            a = e.Object.keys,
            p = e.Object.values,
            u = "object",
            f = "string",
            d = {
                GET: !0,
                OPTIONS: !0
            },
            h = {
                DELETE: !0,
                PATCH: !0,
                POST: !0,
                PUT: !0
            },
            l = "https://" + SM.env.host.api,
            c = SM["import"]("sm-uri"),
            _ = /(api\/v2\/(?:album\/[a-zA-Z0-9]{6,}\/)?image\/[a-zA-Z0-9]{7,})(-\d)?(.*)/;
        e.SM.API && e.SM.API._cache || (e.namespace("SM.API")._cache = {}), e.extend(r, s, {
            _init: function() {
                var n, i, r, s, t, p, f = this.request,
                    d = e.SM.Uri(f.uri),
                    c = (f.apiRoot || l) + d.path,
                    m = (f.method || "GET").toUpperCase(),
                    g = "undefined" == typeof f.nestExpansions ? !0 : f.nestExpansions,
                    y = {},
                    U = d.queryParams,
                    v = !(f.uris !== !0 && !f.verbose),
                    S = !v && f.uris ? o(f.uris) : {},
                    x = f.data;
                if (U._shorturis = "", U.APIKey = SM.env.apiKey, f.query && e.mix(U, e.SM.Uri.parseQuery(f.query.join("&"))), h[m] && (!x || !x._token)) {
                    this._token = e.SM.CSRF.getToken();
                    var M = d.path.match(_);
                    M && (this._imageUriData = {
                        versionlessUri: M[1],
                        imageVersion: M[2],
                        pathAfterKey: M[3]
                    }, this._needsVersionedImageUri = !this._imageUriData.imageVersion)
                }
                if (f.headers)
                    for (r in f.headers) f.headers.hasOwnProperty(r) && (y[r.toLowerCase()] = f.headers[r]);
                if ("accept" in y || (y.accept = "application/json"), U._accept = y.accept, "content-type" in y || !h[m] || (y["content-type"] = "application/json"), ("PATCH" === m || "PUT" === m || "DELETE" === m) && (U._method = m, m = "POST"), f.verbose && (U._verbose = ""), x && !h[m] && (("undefined" == typeof x ? "undefined" : babelHelpers["typeof"](x)) !== u && (x = e.SM.Uri.parseQuery(x)), e.mix(U, x, !0), x = null), c += "?" + e.SM.Uri.stringifyQuery(U), f.fields) {
                    for (p = [], c += "&_filter=", s = 0, t = f.fields.length; t > s; ++s) f.fields[s] && p.push(encodeURIComponent(f.fields[s]));
                    c += p.join(",")
                }
                if (f.expand || f.append) {
                    if (n = this._compileExpansions(f.expand, f.append), !v)
                        for (i in n) - 1 === i.indexOf(".") && (S[i] = !0);
                    c += "&_expand=" + this._prepareExpansions(n, v)
                }
                if (!v) {
                    for (p = [], S = a(S), c += "&_filteruri=", s = 0, t = S.length; t > s; ++s) S[s] && p.push(encodeURIComponent(S[s]));
                    c += "&_filteruri=" + p.join(",")
                }
                this.request = e.merge(f, {
                    url: c,
                    data: x,
                    headers: y,
                    method: m,
                    nestExpansions: g,
                    withCredentials: !0,
                    _expansions: n,
                    _original: f
                })
            },
            _prepareExpansions: function(e, n) {
                var i, r, s, t, o, p, d, h, l = [];
                for (i in e) {
                    if (s = e[i], r = i.slice(i.lastIndexOf(".") + 1), t = ["?_shorturis="], s.data)
                        if (babelHelpers["typeof"](s.data) === u)
                            for (p in s.data) s.data.hasOwnProperty(p) && t.push(p + "=" + s.data[p]);
                        else babelHelpers["typeof"](s.data) === f && t.push(decodeURIComponent(s.data));
                    s.fields && t.push("_filter=" + a(s.fields).join(",")), s.uris && (s.allUris || !s.onlyUris && n || t.push("_filteruri=" + a(s.uris))), s.query = r + encodeURIComponent(t.join("&"))
                }
                for (i in e)
                    if (!e[i].nested) {
                        for (t = i.split(/\./), o = [], d = 0, h = t.length; h > d; ++d) s = e[t.slice(0, d + 1).join(".")], o[d] = s.query;
                        l.push(o.join("."))
                    }
                return l.join(",")
            },
            _compileExpansions: function(n, i) {
                function r(e, n) {
                    var i, r, s, t;
                    if (e.indexOf(".") > -1)
                        for (r = e.split("."), s = 1, t = r.length; t > s; ++s) e = r.slice(0, s).join("."), l[e] || (l[e] = {
                            uris: {},
                            prune: n
                        }), i = l[e], i.prune && (i.prune = n), i.uris[r[s]] = !0, i.nested = !0
                }

                function s(e, n) {
                    var i, s, t;
                    for (i in e) e.hasOwnProperty(i) && e[i].indexOf(".") > -1 && (s = e[i], n && (s = n + "." + s), t = s.slice(s.lastIndexOf(".") + 1), s = s.slice(0, -(t.length + 1)), l[s] || (l[s] = {
                        fields: {},
                        uris: {},
                        prune: !0
                    }), l[s].fields[t] = !0, r(s, !0))
                }
                var a, p, f, d, h, l = {};
                t(n) && (n = o(n)), n || (n = {}), i && s(i);
                for (a in n)
                    if (n.hasOwnProperty(a)) {
                        if (p = n[a], f = l[a], p.append && s(p.append, a), f) {
                            if (p.uris)
                                if (p.uris === !0) f.allUris = !0;
                                else if (!f.allUris)
                                for (f.onlyUris = !0, d = 0, h = p.uris.length; h > d; ++d) f.uris[p.uris[d]] = !0;
                            if (p.fields && f.fields)
                                for (d = 0, h = p.fields.length; h > d; ++d) f.fields[p.fields[d]] = !0;
                            else f.fields = null;
                            p.data && (f.data = f.data ? e.merge(f.data, p.data) : p.data), f.prune = !1
                        } else l[a] = p = ("undefined" == typeof p ? "undefined" : babelHelpers["typeof"](p)) === u ? e.merge(p) : {}, t(p.uris) ? (p.uris = o(p.uris), p.onlyUris = !0) : (p.uris === !0 && (p.allUris = !0), p.uris = {}), p.fields && (p.fields = o(p.fields));
                        r(a, !1)
                    }
                return l
            },
            send: function() {
                var n = this.request,
                    i = n.cache && d[n.method],
                    r = n.method + n.url + (n.data || "");
                return i && !this.response && (this.response = e.SM.API._cache[r]), this.response ? this.response : (this.response = this._sendOrQueue(), this._notifier = new e.Promise.EventNotifier, this._notifier.addEvents(this.response), this._addQueuedSubs(), i && (e.SM.API._cache[r] = this.response), this.response)
            },
            _dispatch: function() {
                var n, i = this,
                    r = this.request;
                return n = r.transport && e.SM.io[r.transport] || e.SM.io[this._defaultTransport], new e.Promise(function(s, t) {
                    i._connection = n.send(r, function(n, r) {
                        var o, a, p = this;
                        if (!i._complete) {
                            if (n) {
                                if (401 === p.status && !i._retriedRequest) return i._retriedRequest = !0, a = e.SM.CSRF.getToken(), i._token = i._token === a ? e.SM.CSRF.refreshToken() : a, void i._sendOrQueue().then(function(e) {
                                    i._complete = !0, s(e)
                                }, function(e) {
                                    i._complete = !0, t(e)
                                });
                                if (i._imageUriData && !i._fetchedImageVersion) return i._needsVersionedImageUri = !0, void i._sendOrQueue().then(function(e) {
                                    i._complete = !0, s(e)
                                }, function(e) {
                                    i._complete = !0, t(e)
                                });
                                o = {
                                    error: n
                                }
                            } else o = i._formatResponse(p, r);
                            i._complete = !0, o.error ? t(o) : s(o)
                        }
                    })
                })
            },
            _sendOrQueue: function() {
                var n, i = this,
                    r = this,
                    s = this.request;
                return this._token ? (s._data || (s._data = s.data || {}), n = this._token, this._needsVersionedImageUri && (n = Promise.all([n, this._fetchVersionedImageUri().then(function(e) {
                    i._needsVersionedImageUri = !1, i._fetchedImageVersion = !0;
                    var n = l + e;
                    i._imageUriData.pathAfterKey && (n += i._imageUriData.pathAfterKey);
                    var r = new c(s.url),
                        t = r.query;
                    t && (n += "?" + t), s.url = n
                })]).then(function(e) {
                    return e[0]
                })), n.then(function(n) {
                    var i = s._data;
                    return i._token = n, s.data = e.JSON.stringify(i), r._dispatch()
                }, function(n) {
                    throw e.SM.SmugLog.add("sm-api2-transaction", {
                        message: "Error getting CSRF token.",
                        method: s.method,
                        url: s.uri,
                        error: n ? n.message || n : "(unknown)"
                    }, e.SM.SmugLog.LEVEL_WARNING), n
                })) : this._dispatch()
            },
            _fetchVersionedImageUri: function() {
                var e = l + "/" + this._imageUriData.versionlessUri;
                return new r({
                    uri: e
                }).then(function(e) {
                    var n = new c(e.response.Uri),
                        i = n.path;
                    return i
                })
            },
            _formatResponse: function(e, n) {
                var i, r, s = {
                        raw: n,
                        request: this.request._original,
                        data: e
                    },
                    t = this.request._expansions;
                if (n && n.Response)
                    if (s.response = n.Response[n.Response.Locator], n.Response.Pages && (s.pagination = n.Response.Pages), s.response) n.Expansions && this.request.nestExpansions && this._addExpansions(n), (s.request.fields || n.Expansions) && (this._appendFields(s.response, s.request), this._pruneExpansions(s.response, t));
                    else if (n.Response.Uris) {
                    i = n.Response.Uris;
                    for (r in i)
                        if (i.hasOwnProperty(r)) {
                            s.statusUri = i[r].Uri;
                            break
                        }
                }
                return s
            },
            _addExpansions: function(e) {
                var n, i, r, s, t, o, a, u, f = e.Expansions,
                    d = e.Response;
                if (d && f)
                    for (n = p(f), n.push(d), i = n.length - 1; i >= 0; --i)
                        if (t = n[i], o = t[t.Locator])
                            for ("Object" === t.LocatorType && (o = [o]), r = o.length - 1; r >= 0; --r)
                                if (a = o[r], a.Uris)
                                    for (s in a.Uris) u = f[a.Uris[s]], u && (a[u.EndpointType] = u[u.Locator])
            },
            _appendFields: function(e, n) {
                function r(e, n) {
                    if (e && n) {
                        var r, s, o, a = {};
                        for (r in n) n.hasOwnProperty(r) && (a[r] = n[r].split("."));
                        for (t(e) || (e = [e]), s = 0, o = e.length; o > s; ++s)
                            if (e[s])
                                for (r in a) e[s][r] = i(e[s], a[r])
                    }
                }
                var s, o;
                if (r(e, n.append), n.expand) {
                    s = n.expand;
                    for (o in s) s.hasOwnProperty(o) && s[o].append && r(i(e, o.split(/\./)), s[o].append)
                }
            },
            _pruneExpansions: function(e, r) {
                var s, o, a, p, u, f, d, h, l = [];
                for (s in r) r.hasOwnProperty(s) && r[s].prune && (h = s.split(/\./), l.push({
                    property: h.pop(),
                    path: h
                }));
                if (l.length)
                    for (t(e) || (e = [e]), o = 0, a = e.length; a > o; ++o)
                        for (p = l.length - 1; p >= 0; --p)
                            if (s = l[p], f = s.path.length ? i(e[o], s.path) : e[o])
                                for (t(f) || (f = [f]), u = f.length - 1; u >= 0; --u) d = f[u], d && (delete d[s.property], delete d.Uris[s.property], n(d.Uris) && delete d.Uris)
            }
        }), e.SM.io.Transaction.v2 = r
    }(), SM.currentModule = null
}, "", {
    requires: ["oop", "json-stringify", "sm-api-base", "sm-io-xhr-transaction", "sm-csrf", "sm-smuglog", "sm-uri"]
});
YUI.add("sm-api2", function(e) {
    SM.currentModule = "sm-api2";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        "use strict";

        function t(e, t) {
            var r, n, u, i, m, s;
            if (o(e)) {
                for (r = [], m = 0, s = e.length; s > m; ++m)
                    if (u = e[m], a(u)) {
                        n = [];
                        for (i in u) u.hasOwnProperty(i) && n.push(i + "=" + u[i]);
                        r[m] = encodeURIComponent(n.join("&"))
                    } else r[m] = encodeURIComponent(t + "=" + u);
                return "_multiargs=" + r.join(",")
            }
            if (a(e)) {
                r = [];
                for (i in e) e.hasOwnProperty(i) && r.push(i + "=" + encodeURIComponent(e[i]));
                return r.join("&")
            }
            return t + "=" + encodeURIComponent(e)
        }

        function r(r, n) {
            return function(o, a) {
                var i = {
                    type: "v2",
                    uri: u + r,
                    data: t(o, n)
                };
                return e.SM.io(a ? e.merge(a, i) : i)
            }
        }

        function n(r, n, a) {
            return function(i, m) {
                var s, g = o(i) ? i[0] : i;
                return g.path || (g + "").indexOf("/") > -1 ? this.getNode(i, m, a) : (s = {
                    type: "v2",
                    uri: u + r,
                    data: t(i, n)
                }, e.SM.io(m ? e.merge(m, s) : s))
            }
        }
        var o = e.Lang.isArray,
            a = e.Lang.isObject,
            u = "/api/v2",
            i = {
                All: !0,
                Pending: !0,
                Approved: !0
            };
        e.SM.API2 = function(t) {
            return t = "string" == typeof t ? {
                uri: t
            } : e.merge(t), t.type = "v2", e.SM.io(t)
        }, e.mix(e.SM.API2, {
            getUser: function(r, n) {
                var i;
                return a(r) && !o(r) && (n = r, r = null), i = r ? {
                    type: "v2",
                    uri: u + "/user!nicknamelookup",
                    data: t(r, "nickname")
                } : {
                    type: "v2",
                    uri: u + "!siteuser"
                }, e.SM.io(n ? e.merge(n, i) : i)
            },
            userSearch: r("/user!search", "q"),
            getFolder: function(e, t) {
                return this.getNode(e, t, "Folder")
            },
            getPage: n("/page!keylookup", "pagekey", "Page"),
            getAlbum: n("/album!albumkeylookup", "albumkey", "Album"),
            getNode: function(r, n, o) {
                var a, i, m = r.user || r.nickName || r.nickname || e.SM.Page && e.SM.Page.owner && e.SM.Page.owner.nickName,
                    s = this;
                return r = r.path || r.urlpath || r, m ? (a = {
                    type: "v2",
                    uri: u + "!nicknameurlpathlookup",
                    data: t({
                        nickname: m,
                        urlpath: r
                    })
                }, i = e.SM.io(n ? e.merge(n, a) : a), o && (i = i.then(function(t) {
                    var n = e.JSON.parse(t.data.responseText);
                    if (n.Response.Locator !== o) throw new Error("Path " + r + " is not of type " + o);
                    return t
                })), i) : e.SM.io({
                    type: "v2",
                    uri: u + "!siteuser",
                    fields: ["NickName"]
                }).then(function(e) {
                    return r = r.path ? r : {
                        path: r
                    }, r.user = e.response.NickName, s.getNode(r, n, o)
                })
            },
            getImage: r("/image!imagekeylookup", "imagekey"),
            getAlbumImage: function(t, r) {
                var n, a, i = e.SM.Page && e.SM.Page.album && e.SM.Page.album.get("AlbumKey"),
                    m = {
                        type: "v2",
                        uri: u + "/album!albumimagekeylookup"
                    },
                    s = t;
                if (o(t))
                    for (s = [], n = 0, a = t.length; a > n; ++n) "string" == typeof t[n] ? s[n] = {
                        albumkey: i,
                        imagekey: t[n]
                    } : s[n] = t[n];
                else "string" == typeof t && (s = {
                    albumkey: i,
                    imagekey: t
                });
                return m.data = s, e.SM.io(r ? e.merge(r, m) : m)
            },
            getAlbumTemplate: r("/albumtemplate!idlookup", "albumtemplateid"),
            getWatermark: r("/watermark!idlookup", "watermarkid"),
            getPrintmark: r("/printmark!idlookup", "printmarkid"),
            getUserRootFolder: r("/folder/user!nicknamelookup", "nickname"),
            getUserWatermarks: function(t, r) {
                var n = {
                    type: "v2",
                    uri: u + "/user/" + t + "!watermarks"
                };
                return e.SM.io(r ? e.merge(r, n) : n)
            },
            getUserPrintmarks: function(t, r) {
                var n = {
                    type: "v2",
                    uri: u + "/user/" + t + "!printmarks"
                };
                return e.SM.io(r ? e.merge(r, n) : n)
            },
            getComment: r("/comment!idlookup", "commentid"),
            getAlbumComments: function(e, t) {
                return this.getComments("Album", e, t)
            },
            getImageComments: function(e, t) {
                return this.getComments("Image", e, t)
            },
            getNodeComments: function(e, t) {
                return this.getComments("Node", e, t)
            },
            getComments: function(t, r, n) {
                n && (n = n.charAt(0).toUpperCase() + n.slice(1).toLowerCase(), i[n] || (n = null)), e.SM.io({
                    type: "v2",
                    uri: u + "/comment!lookuptype",
                    data: {
                        type: t,
                        typeid: r,
                        status: n || "Approved"
                    }
                })
            },
            getCoupon: r("/coupon!idlookup", "couponid"),
            getMarketingEvent: r("/marketingevent!idlookup", "marketingeventid"),
            getUserStats: r("/stats/user!lookupstats", "nickname"),
            getAlbumStats: r("/stats/album!lookupstats", "albumkey"),
            getImageStats: r("/stats/image!lookupstats", "imagekey"),
            getTemplate: r("/template!idlookup", "templateid"),
            getAlbumImages: function(t, r) {
                var n = {
                    type: "v2",
                    uri: u + "/album/" + t + "!images"
                };
                return e.SM.io(r ? e.merge(r, n) : n)
            },
            getSmugVault: function(t, r) {
                var n = {
                    type: "v2",
                    uri: u + "/smugvault/" + t
                };
                return e.SM.io(r ? e.merge(r, n) : n)
            }
        }, !0)
    }(), SM.currentModule = null
}, "", {
    requires: ["sm-api2-transaction"]
});
YUI.add("sm-apierror-model", function(e) {
    SM.currentModule = "sm-apierror-model";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        var r = e.Base.create("sm-apierror", e.Model, [], {}, {
            ATTRS: {
                Field: {
                    value: ""
                },
                Message: {
                    value: ""
                },
                Code: {
                    value: null
                },
                Severity: {
                    value: "medium"
                }
            }
        });
        e.namespace("SM.Models").APIError = r
    }(), SM.currentModule = null
}, "", {
    requires: ["base-build", "model"]
});
YUI.add("sm-banner", function(e) {
    SM.currentModule = "sm-banner";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        ! function() {
            var e = SM["import"]("react"),
                t = SM["import"]("classnames"),
                r = e.PropTypes,
                n = e.addons.CSSTransitionGroup,
                a = SM["import"]("sm-component-pure-render"),
                s = function(r) {
                    function a() {
                        return babelHelpers.classCallCheck(this, a), babelHelpers.possibleConstructorReturn(this, (a.__proto__ || Object.getPrototypeOf(a)).apply(this, arguments))
                    }
                    return babelHelpers.inherits(a, r), babelHelpers.createClass(a, [{
                        key: "render",
                        value: function() {
                            var t = this.props,
                                r = this._renderContents(t);
                            return t.animate ? e.createElement(n, {
                                component: "div",
                                transitionName: t.animationEffect,
                                transitionAppear: !0,
                                transitionAppearTimeout: 500,
                                transitionEnterTimeout: 500,
                                transitionLeaveTimeout: 500
                            }, r) : r
                        }
                    }, {
                        key: "_renderContents",
                        value: function(r) {
                            var n = ["sm-banner"].concat(r.className);
                            return e.createElement("div", {
                                className: t(n)
                            }, r.children ? r.children : null)
                        }
                    }]), a
                }(a);
            s.propTypes = {
                animate: r.bool,
                animationEffect: r.string
            }, s.defaultProps = {
                animate: !0,
                animationEffect: "reveal"
            }, module.exports = exports = s
        }(), ! function() {
            var e = SM["import"]("react"),
                t = SM["import"]("classnames"),
                r = function(r) {
                    var n = r.className,
                        a = r.children,
                        s = babelHelpers.objectWithoutProperties(r, ["className", "children"]),
                        o = ["sm-banner-title"].concat(n);
                    return e.createElement("h2", babelHelpers["extends"]({
                        className: t(o)
                    }, s), a)
                };
            exports.Title = r
        }(), ! function() {
            var e = SM["import"]("react"),
                t = SM["import"]("classnames"),
                r = function(r) {
                    var n = r.className,
                        a = r.children,
                        s = babelHelpers.objectWithoutProperties(r, ["className", "children"]),
                        o = ["sm-banner-message"].concat(n);
                    return e.createElement("p", babelHelpers["extends"]({
                        className: t(o)
                    }, s), a)
                };
            exports.Message = r
        }()
    }(), SM.currentModule = null
}, "", {
    requires: ["sm", "sm-dom", "react", "react-dom", "classnames", "sm-component-pure-render"]
});
YUI.add("sm-breadcrumb-view", function(e) {
    SM.currentModule = "sm-breadcrumb-view";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        var a = e.Template.Micro;
        e.namespace("SM.Views").Breadcrumb = e.Base.create("sm-views-breadcrumb", e.View, [], {
            containerTemplate: '<ul class="sm-breadcrumb"></ul>',
            itemTemplate: '<li class="sm-breadcrumb-item"><% if (data.url) { %><a href="<%= data.url %>"><% } %><% if (data.icon) { %><span class="sm-fonticon sm-fonticon-small sm-fonticon-<%= data.icon %>"></span><% } %><%== data.name %><% if (data.url) { %></a><% } %></li>',
            itemNameTemplate: "<%= data.name %>",
            lastItemNameTemplate: "<%= data.name %>",
            separatorTemplate: '<li class="sm-breadcrumb-item sm-breadcrumb-separator yui3-u"><span class="sm-fonticon sm-fonticon-small sm-fonticon-AngleBracketRight"></span></li>',
            _menu: null,
            render: function() {
                var a, t, m = this.get("container"),
                    n = this.get("items"),
                    i = n.length,
                    l = i > this.get("showLevels"),
                    s = [],
                    r = this._compileTemplates();
                l && (a = e.Node.create(r.item({
                    url: "#",
                    icon: "FolderExpand"
                })), e.Array.each(n, function(e, a) {
                    a > 0 && i - 2 > a && s.push({
                        data: e.data || {},
                        label: e.name,
                        url: e.url
                    })
                }, this), t = a.one("a"), t.plug(e.SM.Plugin.Menu, {
                    items: s
                }), this._menu = t.menu, e.delegate("click", function(e) {
                    e.preventDefault()
                }, a, ">a", this)), e.Array.each(n, function(e, t) {
                    var n, s = t === i - 1,
                        u = t === i - 2;
                    0 === t ? n = r.item({
                        data: e.data || {},
                        icon: "Home",
                        url: e.url
                    }) : l && 1 === t ? n = a : (s ? e.name = r.lastItemName({
                        name: e.name
                    }) : e.name = r.itemName({
                        name: e.name
                    }), (!l || s || u) && (n = r.item(e))), n && (m.append(n), s || m.append(this.separatorTemplate))
                }, this)
            },
            _compileTemplates: function() {
                var e = {};
                return e.item = a.compile(this.itemTemplate), e.itemName = a.compile(this.itemNameTemplate), e.lastItemName = a.compile(this.lastItemNameTemplate), e
            },
            getMenu: function() {
                return this._menu
            }
        }, {
            ATTRS: {
                items: {
                    value: []
                },
                showLevels: {
                    value: 3
                }
            }
        })
    }(), SM.currentModule = null
}, "", {
    requires: ["template-micro", "view", "sm-menu", "gallery-sm-menu-plugin"]
});
YUI.add("sm-button", function(s) {
    SM.currentModule = "sm-button";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        var a = s.Lang,
            e = s.Node,
            n = s.Base,
            t = (s.Widget, window.SM, "sm-button-icon"),
            l = "sm-button-iconlabel",
            o = "sm-button-size-small",
            c = "sm-button-size-large",
            i = "sm-button-skin-default",
            u = "sm-button-skin-submit",
            d = "sm-button-skin-accent",
            b = "sm-button-skin-default",
            m = "label",
            C = "icon",
            r = "fonticon",
            h = "iconlabel",
            p = "fonticonlabel",
            N = "light",
            f = "dark",
            S = "happy",
            v = "sad",
            L = "small",
            I = "medium",
            M = "large",
            g = '<span class="sm-button-label">{label}</span>',
            k = '<span class="sm-icon {iconClassName}"></span>',
            E = '<span class="sm-icon {iconClassName}"></span><span class="sm-button-label">{label}</span>',
            A = '<span class="sm-fonticon {iconClassName}">{iconChar}</span>',
            T = '<span class="sm-fonticon {iconClassName}">{iconChar}</span><span class="sm-button-label">{label}</span>',
            O = "boundingBox",
            y = "label",
            B = "type",
            P = n.create("sm-button", s.Button, [], {
                CONTENT_TEMPLATE: null,
                initializer: function(s) {},
                destructor: function() {},
                renderUI: function() {
                    var s = this.get(O),
                        n = this.get(B),
                        P = this.get(y),
                        _ = this.get("iconClassName"),
                        w = this.get("iconChar"),
                        z = this.get("skin"),
                        F = this.get("size"),
                        U = this.get("value"),
                        R = n === r ? "sm-fonticon-small" : "sm-icon-sml";
                    switch (_ = F === L ? _ + " " + R : _, _ = z === S || z === v ? _ + " sm-icon-emph" : _, s.addClass("sm-button"), s.hasClass(t) && s.removeClass(t), s.hasClass(l) && s.removeClass(l), n) {
                        case m:
                            s.setContent(e.create(a.sub(g, {
                                label: P
                            })));
                            break;
                        case C:
                            s.addClass(t), s.setContent(e.create(a.sub(k, {
                                iconClassName: _
                            })));
                            break;
                        case r:
                            s.addClass(t), s.setContent(e.create(a.sub(A, {
                                iconClassName: _,
                                iconChar: w
                            })));
                            break;
                        case h:
                            s.addClass(l), s.setContent(e.create(a.sub(E, {
                                label: P,
                                iconClassName: _
                            })));
                            break;
                        case p:
                            s.addClass(l), s.setContent(e.create(a.sub(T, {
                                label: P,
                                iconClassName: _,
                                iconChar: w
                            })))
                    }
                    switch (F) {
                        case L:
                            s.addClass(o);
                            break;
                        case I:
                            s.addClass(o);
                            break;
                        case M:
                            s.addClass(c)
                    }
                    switch (z) {
                        case N:
                            s.addClass(u);
                            break;
                        case f:
                            s.addClass(i);
                            break;
                        case S:
                            s.addClass(d);
                            break;
                        case v:
                            s.addClass(b)
                    }
                    this.get("nochrome") && s.addClass("sm-button-nochrome"), this.get("nocaps") && s.addClass("sm-button-nocaps"), U && s.setAttribute("data-value", U)
                },
                syncUI: function() {},
                setLabel: function(s) {
                    "undefined" != typeof s.label && this.set(y, s.label), "undefined" != typeof s.type && this.set(B, s.type), "undefined" != typeof s.iconClassName && this.set("iconClassName", s.iconClassName), this.renderUI()
                }
            }, {
                CSS_PREFIX: "sm-button",
                ATTRS: {
                    label: {
                        value: ""
                    },
                    type: {
                        value: m
                    },
                    value: {
                        value: ""
                    },
                    iconClassName: {
                        value: ""
                    },
                    iconChar: {
                        value: ""
                    },
                    skin: {
                        value: N
                    },
                    size: {
                        value: I
                    },
                    nochrome: {
                        value: !1
                    },
                    nocaps: {
                        value: !1
                    },
                    disabled: {
                        value: !1
                    }
                },
                TYPES: {
                    LABEL: m,
                    ICON: C,
                    FONTICON: r,
                    ICON_LABEL: h,
                    FONTICON_LABEL: p
                },
                SKINS: {
                    LIGHT: N,
                    DARK: f,
                    HAPPY: S,
                    SAD: v
                },
                SIZES: {
                    SMALL: L,
                    MEDIUM: I,
                    LARGE: M
                },
                TEMPLATES: {
                    ICON: k,
                    FONTICON: A,
                    ICON_LABEL: E,
                    FONTICON_LABEL: T
                }
            });
        s.namespace("SM"), s.SM.Button = P
    }(), SM.currentModule = null
}, "", {
    requires: ["base", "button", "node"]
});
YUI.add("sm-buy-menu", function(e) {
    SM.currentModule = "sm-buy-menu";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        function a(a) {
            this.galleryAlbum = a.galleryAlbum, this.menu = new e.SM.Menu({
                items: [{
                    label: "This Photo",
                    data: "photo",
                    id: "BuyPhoto"
                }, {
                    label: "Photos from this Gallery",
                    data: "photos",
                    id: "BuyPhotos"
                }, {
                    label: "Buy Photo Package",
                    data: "package",
                    id: "BuyPackage",
                    state: {
                        hidden: !0
                    }
                }, {
                    label: "Buy Gallery Download",
                    data: "digitaldownload",
                    id: "BuyDigitalDownload",
                    state: {
                        hidden: !0
                    }
                }, {
                    label: "Create a Card",
                    data: "createacard",
                    id: "MakeCards",
                    state: {
                        hidden: !0
                    }
                }, {
                    label: "Build a Book",
                    data: "special",
                    id: "SpecialBuy",
                    state: {
                        hidden: !0
                    }
                }]
            }), this.menu.on("itemClick", this._handleMenuItemClick, this), this._loadMenu()
        }
        var t = "rpc.gallery.getbuyitems",
            l = null,
            o = null,
            s = null,
            r = SM["import"]("sm-analytics"),
            i = SM["import"]("sm-dom"),
            n = SM["import"]("sm-page"),
            d = SM["import"]("sm-uri"),
            u = SM["import"]("sm-models-usernode");
        a.prototype = {
            destroy: function() {
                this.menu.destroy({
                    remove: !0
                })
            },
            update: function(e, a, t, l, o) {
                var s, r, i = this.menu,
                    n = this.album,
                    d = !n || !a || n && a && n.get("AlbumID") !== a.get("AlbumID");
                e && e.get("CanBuy") || (l = !0), e && ((d || o) && (s = e.get("IsOwner"), s && i.getNodeById("SpecialBuy").show()), r = i.getNodeById("BuyPhoto"), "mp4" === e.get("Format").toLowerCase() ? r.label = "This Video" : e.get("IsEZProject") ? r.label = "This Card" : r.label = "This Photo", i.renderNode(r)), l ? i.getNodeById("BuyPhoto").hide() : e && i.getNodeById("BuyPhoto").show(), this.image = e, this.album = a, this.galleryAlbum = t
            },
            _handleMenuItemClick: function(a) {
                var t = a.item.data,
                    c = this.image,
                    m = this.album,
                    h = this.galleryAlbum,
                    y = SM["import"]("sm-cart-helpers"),
                    g = "Gallery";
                null !== i.querySelector(".sm-lightbox-basic") && (g = "Lightbox");
                var b = "";
                switch (t) {
                    case "photo":
                        b = "This Photo";
                        break;
                    case "photos":
                        b = "Photos From This Gallery";
                        break;
                    case "createacard":
                        b = "Create A Card";
                        break;
                    case "package":
                        b = "Buy Photo Package";
                        break;
                    case "digitaldownload":
                        b = "Buy Gallery Download";
                        break;
                    case "special":
                        b = "Build a Book"
                }
                var p = {
                    node_type: "Page",
                    node_id: n.nodeId,
                    node_uri: window.location.pathname
                };
                if (void 0 !== n.galleryView && (p.node_type = "Gallery", p.gallery_style = n.galleryView.get("galleryStyle")), r.Tracker.createEvent(r.CATEGORY.BUY, "Menu Click", {
                        property: g,
                        label: b,
                        isOwner: !(!n.user || !n.user.isOwner)
                    }).addContext(r.CONTEXT.NODE, p).log(), e.Lang.isNull(t) === !1 && t.length > 0) switch (t) {
                    case "photo":
                        y.deprecatedShowAddToCart(c, h || m);
                        break;
                    case "photos":
                        location.href = window.SM.env.host.cartUrl + "batchadd?url=" + encodeURIComponent(location.href);
                        break;
                    case "createacard":
                        var w = !!(m && m.get("AlbumKey") && c && c.get("ImageKey")),
                            B = !(!n.model || n.model.get("PrivacyLevel") != u.PRIVACY_LEVELS.PUBLIC),
                            M = w && (c.get("IsOwner") || c.get("IsSellable") && B && !this.hasPricingFeature);
                        M ? i.win.location = "/cardcreator/launch-page?" + d.stringifyQuery({
                            AlbumKey: m.get("AlbumKey"),
                            ImageKey: c.get("ImageKey")
                        }) : e.use("sm-gallery-overlays", function() {
                            l && l.destroy(), l = new e.SM.EZBuilderOverlay({
                                image: c,
                                album: m
                            }), l.show()
                        });
                        break;
                    case "package":
                        e.use("sm-gallery-overlays", function() {
                            o || (o = new e.SM.PackagesOverlay, o.render()), c && o.set("image", c), o.set("album", h), o.show()
                        });
                        break;
                    case "digitaldownload":
                        m && e.use(["sm-gallery-overlays", "sm-form"], function() {
                            var a = new e.SM.DigitalDownloadOverlay({
                                album: m,
                                image: c
                            });
                            a.after("visibleChange", function(e) {
                                e.newVal || a.destroy()
                            }), a.render().show()
                        });
                        break;
                    case "special":
                        m && e.use("sm-gallery-overlays", function() {
                            s || (s = new e.SM.OwnerBuyOverlay({
                                album: m
                            }), s.render()), s.show()
                        })
                }
            },
            _loadMenu: function() {
                var a = this.galleryAlbum,
                    l = new e.SM.API;
                !this._initializedData && a && l.sendRequest({
                    method: t,
                    data: {
                        albumId: a.get("AlbumID"),
                        albumKey: a.get("AlbumKey")
                    },
                    callback: {
                        success: function(e) {
                            var t = e.response,
                                l = t.results,
                                o = this.menu;
                            o.get("destroyed") || (l.hasPackages === !0 && o.getNodeById("BuyPackage").show(), l.hasDigitalDownloads === !0 && o.getNodeById("BuyDigitalDownload").show(), l.canMakeCards === !0 && o.getNodeById("MakeCards").show(), l.hasPricingFeature && (this.hasPricingFeature = !0), a.get("IsOwner") && o.getNodeById("SpecialBuy").show(), this.target && o.reposition(this.target))
                        },
                        context: this
                    },
                    cacheResponse: !0
                }), this._initializedData = !0
            }
        }, e.namespace("SM.Menus").Buy = a
    }(), SM.currentModule = null
}, "", {
    requires: ["sm", "sm-analytics", "sm-api", "sm-cart-helpers", "sm-dom", "sm-menu", "sm-models-usernode", "sm-page", "sm-uri"]
});
YUI.add("sm-cart", function(e) {
    SM.currentModule = "sm-cart";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        var t = SM["import"]("lodash"),
            r = SM["import"]("sm-resource-core"),
            o = SM["import"]("sm-smuglog"),
            a = "https://" + SM.env.host.ssl,
            n = new Error("Added cart item not found in cart"),
            s = "undefined" == typeof location ? {
                href: "(unknown)"
            } : location,
            d = e.mix(new e.EventTarget, {
                URL: a + "/cart",
                API_URI_ROOT: "/api/v2/cart",
                itemsLoaded: null,
                _lastCount: null,
                items: [],
                getItems: function(e) {
                    var a, n = d.itemsLoaded;
                    return e || (e = {}), (!d.itemsLoaded || e.refresh) && (a = n, n = r.loadUri(d.API_URI_ROOT + "!items", {
                        expand: ["CartItemType", "CartItemContents.CartItemContentType"]
                    }).then(function(e) {
                        return d._lastCount = t.reduce(e, function(e, t) {
                            return e + t.get("Quantity")
                        }, 0), d.itemsLoaded === a && (d.itemsLoaded = n, d.items.splice.apply(d.items, [0, d.items.length].concat(e))), d.items
                    }, function(t) {
                        if (e.allowFailure) throw t;
                        return o.add("sm-cart", {
                            message: "Error loading cart items",
                            error: t.error || t
                        }, o.LEVEL_ERROR), d.items
                    }), e.allowFailure || (d.itemsLoaded = n, a = n)), n
                },
                addItem: function(e, a) {
                    var i, m, c, u, l, h = [],
                        f = d._lastCount;
                    return i = r.postUri(e, {
                        data: a
                    }), i.then(function(e) {
                        return m = e, h.push("Item " + m.get("Uri") + " added"), d.getItems({
                            refresh: !0
                        })["catch"](function(e) {
                            throw h.push("Error fetching cart items after !buy: " + (e.error || e).message), l = e, e
                        })
                    }, function(t) {
                        throw h.push("!buy failed: " + (t.error || t).message), d.fire("error", {
                            message: "Failed to add item to the cart",
                            uri: e,
                            params: a
                        }), u = t, t
                    }).then(function(e) {
                        if (c = e.length, !(e.indexOf(m) > -1)) throw h.push("Added item " + m.get("Uri") + " not found in cart items (" + t.map(e, function(e) {
                            return e.get("Uri")
                        }) + ")"), n;
                        d.fire("contentsChange", {
                            action: "add",
                            items: e,
                            newItem: m
                        })
                    })["catch"](function(e) {
                        (e === u || e === l || e === n) && (e = null), o.add("sm-cart", {
                            message: "Cart.addItem() trouble",
                            postParams: a,
                            location: s.href,
                            progress: h,
                            beforeCount: f,
                            afterCount: c,
                            addedItem: m || "(none)",
                            addError: u,
                            cartItemsError: l,
                            error: e && (e.error || e)
                        }, o.LEVEL_WARNING)
                    }), i
                },
                empty: function() {
                    d.itemsLoaded = e.SM.io({
                        type: "v2",
                        method: "post",
                        uri: d.API_URI_ROOT + "!empty"
                    }).then(function() {
                        var e = d.items.splice(0, d.items.length);
                        return d.fire("contentsChange", {
                            action: "empty",
                            items: d.items,
                            removed: e
                        }), d.items
                    }, function(e) {
                        return o.error("sm-cart", {
                            message: "Error while emptying cart",
                            error: e && e.message || e,
                            method: "empty",
                            location: s.href
                        }), d.fire("error", {
                            message: e && e.message || e
                        }), d.getItems({
                            refresh: !0
                        })
                    })
                },
                _oldAPI: new e.SM.API({
                    source: "/rpc/cart.mg"
                }),
                getUserCart: function(e, t) {
                    d._oldAPI.sendRequest({
                        method: "getUserCart",
                        httpMethod: "POST",
                        data: {
                            cartId: e
                        },
                        callback: t,
                        cacheResponse: !1
                    })
                },
                getDigitalDownloadData: function(e, t, r) {
                    d._oldAPI.sendRequest({
                        method: "getGalleryDownloads",
                        httpMethod: "POST",
                        data: {
                            AlbumID: e,
                            ImageID: t
                        },
                        callback: r,
                        cacheResponse: !1
                    })
                },
                addDownloadItem: function(t, r) {
                    d._oldAPI.sendRequest({
                        method: "addAlbumDownload",
                        httpMethod: "POST",
                        data: e.merge({
                            quantity: 0,
                            productId: 0,
                            skuId: 0,
                            vendorId: "SmugMug",
                            albumId: 0,
                            imageId: 0
                        }, t),
                        callback: r,
                        cacheResponse: !1
                    })
                },
                addEZProjectItems: function(t, r, o, a, n, s) {
                    (void 0 === n || "undefined" === n || null === n || "null" === n) && (n = ""), d._oldAPI.sendRequest({
                        method: "addEZProjectItems",
                        httpMethod: "POST",
                        data: {
                            imageID: t,
                            imageKey: r,
                            productID: o,
                            quantities: e.JSON.stringify(a),
                            cartId: n
                        },
                        callback: {
                            success: s,
                            context: this
                        }
                    })
                }
            });
        module.exports = d, e.SM.Cart = d
    }(), SM.currentModule = null
}, "", {
    requires: ["sm", "lodash", "event-custom-base", "sm-api2-transaction", "sm-resource-core", "sm-smuglog"]
});
YUI.add("sm-codemirror-plugin", function(t) {
    SM.currentModule = "sm-codemirror-plugin";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        var e = SM["import"]("codemirror"),
            i = {
                js: "text/javascript",
                css: "css",
                html: "text/html",
                markdown: "markdown"
            },
            r = {
                autoCloseBrackets: !0,
                dragDrop: !1,
                indentUnit: 2,
                lineNumbers: !1,
                lineWrapping: !1,
                matchBrackets: !0,
                styleActiveLine: !0,
                theme: "zenburn"
            },
            n = {
                browser: !0,
                undef: !0,
                devel: !0,
                eqnull: !0,
                noempty: !0
            },
            o = "codemirror:init",
            s = "codemirror:change",
            a = "CodeMirror";
        t.namespace("SM.Plugin").CodeMirror = t.Base.create("sm-codemirror-plugin", t.Plugin.Base, [], {
            _codeMirrorConfig: r,
            initializer: function() {
                var t = this.get("host");
                t.hide(), t.hasAttribute("placeholder") || t.setAttribute("placeholder", "Enter code here..."), this.publish(o, {
                    fireOnce: !0
                }), this._eventHandles = [], this._buildCodeMirrorConfig(), this._initCodeMirror(), this._attachCodeMirrorEvents(), this._codeEditor.refresh(), this.fire(o)
            },
            destructor: function() {
                new t.EventHandle(this._eventHandles).detach(), this.get("wrapperNode").remove(!0)
            },
            _afterConfigChange: function(e) {
                var i = e.newVal,
                    r = this._codeEditor,
                    n = this._codeMirrorConfig;
                t.Object.each(i, function(t, e) {
                    r.setOption(e, t)
                }), this._codeMirrorConfig = t.merge(n, e.newVal)
            },
            _afterLintUpdate: function(t, e) {
                var i, r, n, o = e.length,
                    s = this._codeEditor.lineCount(),
                    a = this._codeEditor.getViewport();
                this._hasLintErrors = o > 0;
                for (var d = 0; s > d; d++)
                    if (i = e[d], n = [], i) {
                        r = i.length, this._codeEditor.addLineClass(d, "wrap", "CodeMirror-has-lint-marker");
                        for (var l = 0; r > l; l++) n.push(i[l].message);
                        this._annotations[d] = {
                            length: n.length,
                            messages: n.join("<br>")
                        }, d >= a.from && d <= a.to && this._renderFonticonMarker(d)
                    } else this._codeEditor.removeLineClass(d, "wrap", "CodeMirror-has-lint-marker"), this._annotations[d] = {
                        length: 0,
                        messages: ""
                    }
            },
            _attachCodeMirrorEvents: function() {
                var e = this;
                this._eventHandles.push(this.after("cmConfigChange", this._afterConfigChange, this)), this._codeEditor.on("change", function(i, r) {
                    e._changeTimer && e._changeTimer.cancel(), e._changeTimer = t.later(e.get("changeInterval"), e, function() {
                        this.fire(s, {
                            changeObj: r
                        })
                    })
                })
            },
            _buildCodeMirrorConfig: function() {
                var e = this.get("editorMode"),
                    r = this.get("cmConfig"),
                    n = this,
                    o = {};
                r.mode = i[e.toLowerCase()], r.mode === i.html && (o.autoCloseTags = {
                    whenClosing: !0,
                    whenOpening: !0,
                    indentTags: []
                }), r.mode === i.js && (o.lineNumbers = !0, this.get("enableJSHint") && t.Get.js(SM.env.host.http + SM.env.host.cdn + "/include/js/jshint.js", {
                    onSuccess: function() {
                        window.JSHINT && n._configureAndEnableJSHint()
                    }
                })), this._codeMirrorConfig = t.merge(this._codeMirrorConfig, o, r)
            },
            _configureAndEnableJSHint: function() {
                var i = this.get("jsHintConfig");
                this._linting = !0, this._hasLintErrors = !1, this._annotations = [], this._codeEditor.setOption("gutters", ["CodeMirror-lint-markers"]), this._codeEditor.setOption("lintWith", {
                    getAnnotations: e.javascriptValidatorWithOptions(t.merge(n, i)),
                    onUpdateLinting: t.bind(this._afterLintUpdate, this),
                    tooltips: !1
                })
            },
            _initCodeMirror: function() {
                var t = this.get("host"),
                    i = this.get("editorMode");
                this._codeEditor = e.fromTextArea(t.getDOMNode(), this._codeMirrorConfig), this.get("editorNode").addClass(i), this._setInitialSize()
            },
            _renderFonticonMarker: function(e) {
                var i, r, n = this._annotations[e],
                    o = this._codeEditor.lineInfo(e);
                o && (i = r = t.one(o.gutterMarkers["CodeMirror-lint-markers"]), n.length > 1 && (r = i.one(".CodeMirror-lint-marker-multiple")), r.addClass("sm-fonticon-sml"), i.hasClass("CodeMirror-lint-marker-error") ? r.removeClass("sm-fonticon-Warning").addClass("sm-fonticon-XCrossEncircled") : r.removeClass("sm-fonticon-XCrossEncircled").addClass("sm-fonticon-Warning"), t.SM.Page.Tooltip.attachToNode(n.messages, r, {
                    alignment: "right"
                }))
            },
            _resetJSHintConfig: function(i) {
                return this._linting && this._codeEditor.setOption("lintWith", {
                    getAnnotations: e.javascriptValidatorWithOptions(t.merge(n, i)),
                    onUpdateLinting: t.bind(this._afterLintUpdate, this),
                    tooltips: !1
                }), i
            },
            _setInitialSize: function() {
                var t = parseInt(this.get("editorWidth"), 10) || null,
                    e = parseInt(this.get("editorHeight"), 10) || null;
                (t || e) && this._codeEditor.setSize(t, e)
            },
            getEditorContents: function() {
                return t.Lang.trim(this._codeEditor.getValue())
            },
            getSelectedRange: function() {
                return {
                    from: this._codeEditor.getCursor(!0),
                    to: this._codeEditor.getCursor(!1)
                }
            },
            hasLintErrors: function() {
                return this._linting && this._hasLintErrors
            },
            refreshEditor: function() {
                this._codeEditor.refresh()
            },
            resizeEditor: function(t, e) {
                var i = parseInt(e, 10) || null,
                    r = parseInt(t, 10) || null;
                this._codeEditor.setSize(i, r), this.refreshEditor()
            },
            setEditorContents: function(t) {
                return t !== this.getEditorContents() && this._codeEditor.setValue(t), this
            }
        }, {
            NS: a,
            ATTRS: {
                changeInterval: {
                    value: 500
                },
                cmConfig: {
                    value: {}
                },
                editorHeight: {
                    value: null,
                    setter: function(t) {
                        return t = parseInt(t, 10), this._codeEditor.setSize(null, t), t
                    }
                },
                editorMode: {
                    value: "js"
                },
                editorNode: {
                    value: null,
                    getter: function(e) {
                        return e || (e = t.one(this._codeEditor.getScrollerElement()), this._setStateVal("editorNode", e)), e
                    }
                },
                editorWidth: {
                    value: null,
                    setter: function(t) {
                        return t = parseInt(t, 10), this._codeEditor.setSize(t, null), t
                    }
                },
                enableJSHint: {
                    value: !1
                },
                gutterNode: {
                    value: null,
                    getter: function(e) {
                        return e || (e = t.one(this._codeEditor.getGutterElement()), this._setStateVal("gutterNode", e)), e
                    }
                },
                initialContent: {
                    value: null
                },
                jsHintConfig: {
                    value: null,
                    setter: "_resetJSHintConfig"
                },
                scrollbarNode: {
                    value: null,
                    getter: function(t) {
                        return t || (t = this.get("wrapperNode").one(".CodeMirror-scrollbar"), this._setStateVal("scrollbarNode", t)), t
                    }
                },
                wrapperNode: {
                    value: null,
                    getter: function(e) {
                        return e || (e = t.one(this._codeEditor.getWrapperElement()), this._setStateVal("wrapperNode", e)), e
                    }
                }
            }
        })
    }(), SM.currentModule = null
}, "", {
    requires: ["codemirror", "base", "node", "plugin", "get", "sm-page-tooltip"]
});
YUI.add("sm-colorpicker", function(t) {
    SM.currentModule = "sm-colorpicker";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        var e = 192,
            a = 192,
            i = 24,
            r = 192,
            n = 12,
            s = 43,
            o = t.Base.create("sm-colorpicker", t.View, [], {
                containerTemplate: '<div class="sm-colorpicker"></div>',
                template: '<div class="sm-colorpicker-content" style="position: relative; width: ' + (e + n + i) + "px; height: " + (a + s) + 'px"><div class="sm-colorpicker-hex" style="position: absolute; width: ' + (e + n + i) + "px; height: " + s + 'px;">' + t.SM.Templates.textbox({
                    name: "hex"
                }) + '</div><canvas width="' + e + '" height="' + a + '" class="sm-colorpicker-box" style="position: absolute; top: ' + s + 'px;"></canvas><canvas width="' + e + '" height="' + a + '" class="sm-colorpicker-mouseable sm-colorpicker-box-indicator" style="position:absolute; top: ' + s + 'px;"></canvas><canvas width="' + i + '" height="' + a + '" class="sm-colorpicker-bar" style="position: absolute; top: ' + s + "px; left: " + (e + n) + 'px;"></canvas><canvas width="' + i + '" height="' + a + '" class="sm-colorpicker-mouseable sm-colorpicker-bar-indicator" style="position: absolute; top: ' + s + "px; left: " + (e + n) + 'px;"></canvas></div>',
                initializer: function(t) {
                    var e;
                    if (t || (t = {}), t.hex) {
                        e = "limited" === this.get("paletteMode") ? this._clampColor(t.hex) : t.hex;
                        var a = this._hex2rgb(e),
                            i = this._rgb2hsv(a);
                        this.setAttrs({
                            hue: i[0],
                            saturation: i[1],
                            brightness: i[2]
                        })
                    }
                    this._polyfillRequestAnimationFrame()
                },
                render: function() {
                    if (this._isRendered) return this;
                    this._isRendered = !0;
                    var t = this.get("container");
                    return t.setHTML(this.template), this.get("container").one("[name=hex]").set("value", "#" + this.get("hex")), this._drawBox(), this._drawBoxIndicator(), this._drawBar(), this._drawBarIndicator(), this._eventHandles = [t.delegate("mousedown", this._startIndicatorDrag, ".sm-colorpicker-mouseable", this), this.after("hueChange", function(t) {
                        this._drawBox(), "cp-drag" !== t.src && this._drawBarIndicator()
                    }, this), this.after(["saturationChange", "brightnessChange"], function(t) {
                        "cp-drag" !== t.src && this._drawBoxIndicator()
                    }, this), this.after(["hueChange", "saturationChange", "brightnessChange"], function(t) {
                        "cp-sync" !== t.src && this.set("hex", this._rgb2hex(this._hsv2rgb(this.get("hue"), this.get("saturation"), this.get("brightness"))), {
                            src: "cp-sync"
                        })
                    }), this.after("hexChange", function(t) {
                        if ("cp-sync" !== t.src) {
                            var e = this._hex2rgb(t.newVal),
                                a = this._rgb2hsv(e);
                            this.setAttrs({
                                hue: a[0],
                                saturation: a[1],
                                brightness: a[2]
                            }, {
                                src: "cp-sync"
                            })
                        }
                    }), this.after("paletteModeChange", function() {
                        this._drawBox()
                    }), t.one("[name=hex]").on("valuechange", function(t) {
                        this.set("hex", t.target.get("value"), {
                            src: "cp-text"
                        })
                    }, this), this.after("hexChange", function(e) {
                        "cp-text" !== e.src && t.one("[name=hex]").set("value", "#" + e.newVal)
                    })], this
                },
                destructor: function() {
                    this._endIndicatorDrag(), new t.EventHandle(this._eventHandles).detach()
                },
                _animateIndicator: function() {
                    var i = this,
                        r = Math.max(0, Math.min(e, i._mouseRawX + i._canvasOffsetX)),
                        n = Math.max(0, Math.min(a, i._mouseRawY + i._canvasOffsetY));
                    (r !== i._prevMouseX || n !== i._prevMouseY) && (i._prevMouseX = r, i._prevMouseY = n, i._refreshIndicatorFn.call(i, r, n)), i._animateTimer = window.requestAnimationFrame(t.bind(i._animateIndicator, i))
                },
                _refreshBoxIndicator: function(t, i) {
                    var r = 100 * t / e,
                        n = 100 - 100 * i / a;
                    "limited" === this.get("paletteMode") && (r *= Math.min(1, 2 - n / 50)), this.set("saturation", r, {
                        src: "cp-drag"
                    }), this.set("brightness", n, {
                        src: "cp-drag"
                    }), this._drawBoxIndicator([t, i])
                },
                _refreshBarIndicator: function(t, e) {
                    this.set("hue", Math.max(0, Math.min(360, 360 * e / r)), {
                        src: "cp-drag"
                    }), this._drawBarIndicator()
                },
                _storeMouseCoordinates: function(t) {
                    this._mouseRawX = t.clientX, this._mouseRawY = t.clientY
                },
                _startIndicatorDrag: function(e) {
                    var a = e.currentTarget,
                        i = a.getXY();
                    this._canvasOffsetX = a.get("docScrollX") - i[0], this._canvasOffsetY = a.get("docScrollY") - i[1], this._whileDragHandle = t.one("body").on("mousemove", this._storeMouseCoordinates, this), this._storeMouseCoordinates(e), a.hasClass("sm-colorpicker-box-indicator") ? this._refreshIndicatorFn = this._refreshBoxIndicator : a.hasClass("sm-colorpicker-bar-indicator") && (this._refreshIndicatorFn = this._refreshBarIndicator), this._animateIndicator(), this._endDragHandle = t.one("body").on(["mouseup", "mouseleave"], function() {
                        this._endIndicatorDrag()
                    }, this), e.preventDefault()
                },
                _endIndicatorDrag: function() {
                    this._whileDragHandle && this._whileDragHandle.detach(), this._whileDragHandle = null, this._endDragHandle && this._endDragHandle.detach(), this._endDragHandle = null, window.cancelAnimationFrame(this._animateTimer)
                },
                _drawBox: function() {
                    var t, i, r, n, s, o, h = this.get("container").one(".sm-colorpicker-box").getDOMNode().getContext("2d"),
                        c = this.get("paletteMode"),
                        l = this.get("hue"),
                        d = 0,
                        u = h.createImageData(e, a);
                    for (o = 0; a > o; o++)
                        for (t = 100 - 100 * o / a, i = Math.min(1, 2 * o / a), r = 0, s = 0; e > s; s++) n = this._hsv2rgb(l, r, t), u.data[d++] = n[0], u.data[d++] = n[1], u.data[d++] = n[2], u.data[d++] = 255, "full" === c ? r = 100 * s / e : r += 100 * i / e;
                    h.putImageData(u, 0, 0)
                },
                _drawBoxIndicator: function(t) {
                    var i, r, n = this._boxIndicatorCtx || (this._boxIndicatorCtx = this.get("container").one(".sm-colorpicker-box-indicator").getDOMNode().getContext("2d"));
                    if (t && t.length) i = t[0], r = t[1];
                    else {
                        var s = this.get("saturation"),
                            o = this.get("brightness");
                        if (i = s * e / 100, r = (100 - o) * (a / 100), "limited" === this.get("paletteMode") && o > 50) {
                            var h = Math.max(100 / e, 100 - -2 * (50 - o));
                            i *= 100 / h
                        }
                    }
                    n.clearRect(0, 0, e, a), n.strokeStyle = "rgba(0,0,0,.5)", n.lineWidth = 2, n.beginPath(), n.arc(i + 1, r + 1, 5, 0, 2 * Math.PI, !1), n.stroke(), n.closePath(), n.beginPath(), n.strokeStyle = "white", n.arc(i, r, 5, 0, 2 * Math.PI, !1), n.stroke(), n.closePath()
                },
                _drawBar: function() {
                    var t, e, a, n, s = this.get("container").one(".sm-colorpicker-bar").getDOMNode().getContext("2d"),
                        o = s.createImageData(i, r),
                        h = 0;
                    for (n = 0; r > n; n++)
                        for (e = n / r * 360, t = this._hsv2rgb(e, 100, 100), a = 0; i > a; a++) o.data[h++] = t[0], o.data[h++] = t[1], o.data[h++] = t[2], o.data[h++] = 255;
                    s.putImageData(o, 0, 0)
                },
                _drawBarIndicator: function() {
                    var t = this.get("hue"),
                        e = t / 360 * r,
                        a = this._barIndicatorCtx || (this._barIndicatorCtx = this.get("container").one(".sm-colorpicker-bar-indicator").getDOMNode().getContext("2d"));
                    a.clearRect(0, 0, i, r), a.beginPath(), a.moveTo(0, e), a.rect(1, e - 3, i - 2, 6), a.strokeStyle = "white", a.lineWidth = 3, a.stroke()
                },
                _hsv2rgb: function(t, e, a) {
                    t /= 60, e /= 100, a /= 100;
                    var i = Math.floor(t) % 6,
                        r = t - Math.floor(t),
                        n = 255 * a * (1 - e),
                        s = 255 * a * (1 - e * r),
                        o = 255 * a * (1 - e * (1 - r));
                    switch (a = 255 * a, i) {
                        case 0:
                            return [a, o, n];
                        case 1:
                            return [s, a, n];
                        case 2:
                            return [n, a, o];
                        case 3:
                            return [n, s, a];
                        case 4:
                            return [o, n, a];
                        case 5:
                            return [a, n, s]
                    }
                },
                _rgb2hex: function(t) {
                    var e, a = [],
                        i = "";
                    for (a[0] = Math.round(t[0]).toString(16), a[1] = Math.round(t[1]).toString(16), a[2] = Math.round(t[2]).toString(16), e = 0; 3 > e; e++) 1 === a[e].length && (i += "0"), i += a[e];
                    return i
                },
                _hex2rgb: function(t) {
                    var e, a = t.match(/^\s*#?([A-Fa-f0-9]{6})\s*$/),
                        i = [];
                    return a ? (e = a[1], i[0] = parseInt(e[0] + e[1], 16), i[1] = parseInt(e[2] + e[3], 16), i[2] = parseInt(e[4] + e[5], 16), i) : null
                },
                _rgb2hsv: function(t) {
                    if (!t) return null;
                    var e, a, i, r = t[0],
                        n = t[1],
                        s = t[2],
                        o = Math.min(r, n, s),
                        h = Math.max(r, n, s),
                        c = h - o;
                    return a = 0 === h ? 0 : c / h * 1e3 / 10, h === o ? e = 0 : r === h ? e = (n - s) / c : n === h ? e = 2 + (s - r) / c : s === h && (e = 4 + (r - n) / c), e = Math.min(60 * e, 360), 0 > e && (e += 360), i = h / 255 * 1e3 / 10, [e, a, i]
                },
                _clampColor: function(t) {
                    if ("full" === this.get("paletteMode")) return t;
                    var e = this._hex2rgb(t),
                        a = this._rgb2hsv(e),
                        i = a[1],
                        r = a[2],
                        n = i + 2 * r;
                    if (n > 200) {
                        var s = n - 200,
                            o = Math.ceil(s / 3),
                            h = this._hsv2rgb(a[0], i - o, r - o);
                        return this._rgb2hex(h)
                    }
                    return t
                },
                _polyfillRequestAnimationFrame: function() {
                    for (var t = 0, e = ["ms", "moz", "webkit", "o"], a = 0; a < e.length && !window.requestAnimationFrame; ++a) window.requestAnimationFrame = window[e[a] + "RequestAnimationFrame"], window.cancelAnimationFrame = window[e[a] + "CancelAnimationFrame"] || window[e[a] + "CancelRequestAnimationFrame"];
                    window.requestAnimationFrame || (window.requestAnimationFrame = function(e) {
                        var a = (new Date).getTime(),
                            i = Math.max(0, 16 - (a - t)),
                            r = window.setTimeout(function() {
                                e(a + i)
                            }, i);
                        return t = a + i, r
                    }), window.cancelAnimationFrame || (window.cancelAnimationFrame = function(t) {
                        clearTimeout(t)
                    })
                }
            }, {
                ATTRS: {
                    paletteMode: {
                        value: "limited",
                        setter: function(e) {
                            return "full" !== e && "limited" !== e ? t.AttributeCore.INVALID_VALUE : e
                        }
                    },
                    hue: {
                        value: 225
                    },
                    saturation: {
                        value: 10
                    },
                    brightness: {
                        value: 16
                    },
                    hex: {
                        value: "242528",
                        setter: function(e, a, i) {
                            return e && "#" === e[0] && (e = e.substring(1)), /^[0-9a-fA-F]{6}$/.test(e) ? ("limited" === this.get("paletteMode") && (e = this._clampColor(e)), i && i.src && "cp-text" === i.src || this._rendered && this.get("container").one("[name=hex]").set("value", "#" + e), e) : t.AttributeCore.INVALID_VALUE
                        }
                    }
                }
            });
        t.namespace("SM").ColorPicker = o
    }(), SM.currentModule = null
}, "", {
    requires: ["view", "color-base", "color-hsl", "color-hsv", "sm-templates-form"]
});
YUI.add("sm-comment-view-deprecated", function(e) {
    SM.currentModule = "sm-comment-view-deprecated";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        var t = SM["import"]("sm-google-plus");
        e.namespace("SM.Views").CommentList = e.Base.create("sm-views-commentlist", e.View, [], {
            commentsContainerTemplate: '<ul class="sm-comment-list"></ul>',
            commentTemplate: '<li class="sm-comment-listitem" data-commentid="<%= data.CommentID %>"><div class="sm-comment-listitem-avatar"><% if (data.ProfileURL) { %><a href="<%= data.ProfileURL %>"><% } %><% if (data.lazyGoogleProfileImage) { %><img /><% } else if (data.ProfileImageURL) { %><img src="<%= data.ProfileImageURL %>"/><% } else { %><span class="sm-fonticon sm-fonticon-User"></span><% } %><% if (data.ProfileURL) { %></a><% } %></div><% if (data.Rating) { %><div class="sm-comment-listitem-rating"><span class="sm-text-mini">Rated: </span><% for (var i=0; i<data.Rating; i++) { %><span class="sm-fonticon sm-fonticon-small sm-fonticon-StarMini"></span><% } %></div><% } %><div class="sm-comment-listitem-comment"><span><% if (data.ProfileURL) { %><a href="<%= data.ProfileURL %>"><% } %><h3><%= data.Name %></h3><% if (data.ProfileURL) { %></a><% } %><span class="sm-text-mini"><%= data.DateFriendly %></span></span><p><%== data.Comment %></p><% if (SM.env.loggedInUser && SM.env.loggedInUser.isOwner && data.CommentID) { %><div class="sm-comment-owner-actions" text-align="right"><% if (data.Status === "Pending") { %>' + e.SM.Templates.button({
                icon: "CheckMark",
                size: "small",
                value: "approve",
                label: "Approve",
                noChrome: !0
            }) + "<% } %>" + e.SM.Templates.button({
                icon: "XCross",
                size: "small",
                value: "remove",
                label: "Remove",
                noChrome: !0
            }) + "</div><% } %></div></li>",
            emptyCommentTemplate: '<li class="sm-comment-listitem sm-comment-listitem-none">No Comments</li>',
            initializer: function() {
                this._eventHandles = [], this._compiledTemplates = this._compileTemplates(), this._hasComments = !1, this._serviceIds = e.SM.Views.CommentList.AddComment.SERVICE_IDS
            },
            destructor: function() {
                new e.EventHandle(this._eventHandles).detach(), this._commentsAddHandler && this._commentsAddHandler.detach(), this._commentsActionHandler && this._commentsActionHandler.detach(), this._commentsContainer && this._commentsContainer.destroy({
                    remove: !0
                })
            },
            render: function() {
                var s = this.get("container"),
                    n = this.get("comments"),
                    i = this._compiledTemplates,
                    a = this._serviceIds;
                if (this._commentsContainer || (this._commentsContainer = e.Node.create(this.commentsContainerTemplate)), this._preRenderCleanup(), n && n.size()) {
                    this._hasComments = !0;
                    var o = this._commentsContainer;
                    n.each(function(s) {
                        var n = s.ServiceID === a.GOOGLE;
                        s = e.merge(s, {
                            lazyGoogleProfileImage: n
                        });
                        var m = o.appendChild(i.comment(s));
                        n && t.getProfileImageUrl(s.SocialID).then(function(e) {
                            m.one("img").setAttribute("src", e.image.url)
                        })
                    }, this)
                } else this._commentsContainer.setHTML(e.Node.create(this.emptyCommentTemplate));
                return this._commentsContainer.inDoc() || s.append(this._commentsContainer), n && (this._commentsAddHandler = n.on("add", this._onCommentAdd, this), this._commentsActionHandler = this._commentsContainer.delegate("click", this._handleActionClick, ".sm-button", this)), this.fire("render"), this
            },
            _compileTemplates: function() {
                return {
                    comment: e.Template.Micro.compile(this.commentTemplate)
                }
            },
            _onCommentAdd: function(e) {
                var t = e.model,
                    s = this._compiledTemplates.comment(t);
                return this._hasComments || this._commentsContainer.setHTML(""), e.index ? this._commentsContainer.append(s) : this._commentsContainer.prepend(s), this._hasComments = !0, this
            },
            _handleActionClick: function(e) {
                var t = e.currentTarget,
                    s = t.getData("value"),
                    n = t.ancestor("li"),
                    i = n.getData("commentid");
                this._handleComment(s, i, n)
            },
            _handleComment: function(t, s, n) {
                var i = new e.SM.API;
                i.sendRequest({
                    method: "rpc.comment." + t,
                    data: {
                        commentId: s
                    },
                    cfg: {
                        method: "POST"
                    },
                    callback: {
                        success: function() {
                            "remove" === t ? n.remove() : "approve" === t && n.one("[data-value=approve]").remove()
                        }
                    }
                })
            },
            _preRenderCleanup: function() {
                this._commentsContainer.setHTML(""), this._commentsAddHandler && (this._commentsAddHandler.detach(), this._commentsAddHandler = null)
            }
        }, {
            ATTRS: {
                comments: {
                    value: new e.LazyModelList
                }
            }
        });
        var s = e.Template.Micro,
            n = {
                SMUGMUG: 0,
                FACEBOOK: 1,
                GOOGLE: 11
            },
            i = s.compile('<iframe frameborder="0" width="200" height="48" src="<%= data.host %>/frame/sociallogin?nodeId=<%= data.nodeId %>&customDomain=<%= data.customDomain %>"></iframe>');
        e.namespace("SM.Views.CommentList").AddComment = e.Base.create("sm-commentlist-add", e.Plugin.Base, [], {
            template: s.compile('<div class="sm-comment-add"><p class="sm-text-mini sm-comment-add-message"><%= data.addMessage %></p><div class="sm-comment-add-avatar"><span class="sm-fonticon sm-fonticon-User"></span></div><div class="sm-comment-add-form">' + e.SM.Templates.textarea({
                name: "comment"
            }) + '<div class="yui3-g sm-comment-add-actions" style="display: none;"><div class="yui3-u-2-3 sm-comment-add-rate"><span class="sm-text-small">Rate: </span><div class="sm-comment-add-stars"><% for (var i=5; i>0; i--) { %><span class="sm-fonticon sm-fonticon-small sm-comment-add-star" data-rating="<%= i%>"></span><% } %></div></div><div class="yui3-u-1-3 sm-comment-add-post">' + e.SM.Templates.button({
                label: "Post",
                value: "post",
                size: "small",
                skin: "submit"
            }) + '</div></div><div class="sm-comment-add-login sm-flex sm-flex-row sm-flex-items-center"><p>Log In: </p><div>' + e.SM.Templates.button({
                className: "sm-login",
                icon: "SmugMug",
                value: "smlogin",
                size: "small",
                skin: "submit"
            }) + '</div><div class="sm-progress-spinner"></div><div class="sm-comment-social-login"><div class="sm-comment-social-buttons"></div></div></div></div></div>'),
            initializer: function() {
                var e = this.get("host");
                this._eventHandles = [], this._loginChecked = !1, e.once("render", this._onHostRender, this)
            },
            destructor: function() {
                new e.EventHandle(this._eventHandles).detach(), this._destroyFrame(), this._container && this._container.destroy({
                    remove: !0
                }), e.SM.Page.uxdisabled = !1
            },
            _onHostRender: function() {
                var t, s = this.get("host"),
                    n = s.get("container");
                this._destroyFrame(), this._container = t = e.Node.create(this.template({
                    addMessage: this.get("addMessage")
                })), this._textarea = t.one("textarea[name=comment]"), n.prepend(t), this._bindEvents()
            },
            _bindEvents: function() {
                var e = this._container;
                return e && this._eventHandles.push(e.delegate("click", this._onTextareaClick, "textarea[name=comment]", this), e.delegate("blur", this._onTextareaBlur, "textarea[name=comment]", this), e.delegate("click", this._onButtonClick, ".sm-button", this), e.delegate("click", this._onStarClick, ".sm-comment-add-star", this), this.on("login", this._onLogin, this), this.on("addMessageChange", this._onAddMessageChange, this)), this
            },
            _onTextareaClick: function() {
                e.SM.Page.uxdisabled = !0, this._checkLogin()
            },
            _onTextareaBlur: function() {
                e.SM.Page.uxdisabled = !1
            },
            _onButtonClick: function(t) {
                var s = this.get("host"),
                    n = t.currentTarget,
                    i = n.getData("value"),
                    a = e.Lang.trim(this._textarea.get("value")),
                    o = this.get("userInfo"),
                    m = this.get("rating");
                "post" === i && a ? (this.fire("post", {
                    comment: a,
                    rating: m,
                    userInfo: o
                }), this._textarea.set("value", ""), s.get("comments").add({
                    Name: o.name,
                    ProfileImageURL: o.profileImageURL,
                    Comment: e.Escape.html(a).replace(/\n/g, "<br/>"),
                    Rating: m,
                    DateFriendly: "just now"
                }, {
                    index: 0
                }), this._clearStarRating()) : "smlogin" === i && e.SM.Page.loginPage()
            },
            _checkLogin: function() {
                var t = e.SM.Page.user;
                if (!this._loginChecked) return this._loginChecked = !0, t ? void this.fire("login", {
                    userInfo: {
                        serviceId: n.SMUGMUG,
                        id: t.nickName,
                        name: t.displayName,
                        profileImageURL: t.bioPhotoUrl
                    }
                }) : void this._showLogin()
            },
            _showLogin: function() {
                var e = this._container,
                    t = this._textarea;
                t.setAttribute("disabled", "disabled").setAttribute("placeholder", "You must log in to leave a comment."), t.blur(), e.one(".sm-progress-spinner").addClass("sm-progress-spinner-visible"), e.one(".sm-comment-add-login").addClass("sm-comment-add-login-visible"), this._renderSocialLogin()
            },
            _renderSocialLogin: function() {
                var t = this._container,
                    s = t.one(".sm-comment-social-buttons"),
                    n = SM.env.host;
                this._frameNode = s.appendChild(i({
                    customDomain: n.customDomain,
                    host: "https://" + n.ssl,
                    nodeId: e.SM.Page.nodeId
                })), this._frameMessageHandle = e.on("message", this._onWindowMessage, window, this)
            },
            _onLogin: function(e) {
                var t = e.userInfo,
                    s = this._container,
                    n = this._textarea;
                n.removeAttribute("disabled").removeAttribute("placeholder"), n.focus(), this._set("userInfo", t), t.profileImageURL && s.one(".sm-comment-add-avatar").setHTML('<img src="' + t.profileImageURL + '"/>'), s.one(".sm-comment-add-login").hide(), s.one(".sm-comment-add-actions").show()
            },
            _onStarClick: function(e) {
                var t = e.currentTarget;
                this._clearStarRating()._setStarRating(t)
            },
            _setStarRating: function(e) {
                return e.addClass("sm-comment-add-staron"), this._set("rating", parseInt(e.getData("rating"), 10)), this
            },
            _clearStarRating: function() {
                return this._container.all(".sm-comment-add-star").removeClass("sm-comment-add-staron"), this._set("rating", null), this
            },
            _onAddMessageChange: function(e) {
                var t = e.newVal;
                this._container.one(".sm-comment-add-message").setHTML(t)
            },
            _destroyFrame: function() {
                var e = this._frameNode,
                    t = this._frameMessageHandle;
                e && (e.destroy({
                    remove: !0
                }), e = null), t && (t.detach(), t = null)
            },
            _onWindowMessage: function(t) {
                var s, n = SM.env.host,
                    i = t._event,
                    a = this._container;
                if (i.origin === "https://" + n.ssl) {
                    try {
                        s = e.JSON.parse(i.data)
                    } catch (t) {
                        return
                    }
                    switch (s.type) {
                        case "login":
                            s.data || (a.one(".sm-progress-spinner").removeClass("sm-progress-spinner-visible"), a.one(".sm-comment-social-login").addClass("sm-comment-social-login-visible"));
                            break;
                        case "profile":
                            a.one(".sm-progress-spinner").removeClass("sm-progress-spinner-visible"), a.one(".sm-comment-social-login").removeClass("sm-comment-social-login-visible"), this.fire("login", {
                                userInfo: s.data
                            })
                    }
                }
            }
        }, {
            NS: "addcomment",
            ATTRS: {
                userInfo: {
                    readOnly: !0
                },
                rating: {
                    readOnly: !0
                },
                addMessage: {}
            },
            SERVICE_IDS: n
        }), e.namespace("SM.Views.CommentList").Generic = e.Base.create("sm-views-commentlist-generic", e.View, [], {
            _getAPIMethodName: "rpc.comment.get",
            _addAPIMethodName: "rpc.comment.add",
            initializer: function() {
                this._eventHandles = [], this.commentList = null, this._pageNumber = 0
            },
            destructor: function() {
                e.Array.each(this._eventHandles, function(e) {
                    e.detach()
                }), this.commentList && this.commentList.destroy()
            },
            render: function() {
                var t = this._loadComments(1),
                    s = this;
                this.commentList || (this.commentList = new e.SM.Views.CommentList, this.commentList.plug(e.SM.Views.CommentList.AddComment), this._eventHandles.push(this.commentList.addcomment.on("post", this._onPostComment, this))), t.then(function(e) {
                    0 === e.Comments.length && (s.commentList._hasComments = !1), s._renderComments(e.Comments), s._renderPagination(e.Pagination)
                })
            },
            _renderComments: function(t) {
                var s, n = this.get("container"),
                    i = new e.LazyModelList;
                return i.add(t), this.commentList.set("comments", i), this.commentList.render(), s = this.commentList.get("container"), s.inDoc() || n.append(s), this
            },
            _renderPagination: function(t) {
                t.currentPage < t.totalPages ? this._loadMoreButton || (this._loadMoreButton = e.Node.create(e.SM.Templates.button({
                    label: "Load More",
                    value: "loadmore",
                    size: "small"
                })), this.get("container").append(this._loadMoreButton), this._eventHandles.push(this._loadMoreButton.on("click", this._onLoadMoreClick, this))) : this._loadMoreButton && this._loadMoreButton.remove(!0)
            },
            _loadComments: function(t) {
                var s = this,
                    n = new e.SM.API;
                return s._pageNumber = t, new e.Promise(function(e) {
                    n.sendRequest({
                        freshRequest: !0,
                        method: s._getAPIMethodName,
                        data: {
                            pageNumber: t,
                            pageSize: s.get("pageSize"),
                            type: s.get("type"),
                            typeId: s.get("typeId"),
                            typeKey: s.get("typeKey")
                        },
                        callback: {
                            success: function(t) {
                                e(t.response.results)
                            }
                        }
                    })
                })
            },
            _onPostComment: function(e) {
                var t = e.comment,
                    s = e.rating,
                    n = e.userInfo;
                this._addComment(t, s, n)
            },
            _addComment: function(t, s, n) {
                var i = new e.SM.API,
                    a = {
                        type: this.get("type"),
                        typeId: this.get("typeId"),
                        typeKey: this.get("typeKey"),
                        comment: t,
                        rating: s
                    };
                n.serviceId !== e.SM.Views.CommentList.AddComment.SERVICE_IDS.SMUGMUG && (a.serviceId = n.serviceId, a.socialId = n.id, a.name = n.name), i.sendRequest({
                    method: this._addAPIMethodName,
                    data: a,
                    cfg: {
                        method: "POST"
                    },
                    callback: {
                        success: function() {}
                    }
                })
            },
            _onLoadMoreClick: function(e) {
                var t = this._loadComments(this._pageNumber + 1),
                    s = this;
                e.preventDefault(), t.then(function(e) {
                    s.commentList.get("comments").add(e.Comments), s._renderPagination(e.Pagination)
                })
            }
        }, {
            ATTRS: {
                type: {},
                typeId: {},
                typeKey: {},
                pageSize: {
                    value: 10
                }
            }
        }), e.namespace("SM.Views.CommentList").Panel = e.Base.create("sm-views-commentlist-panel", e.SM.Panel, [], {
            commentsTemplate: '<div class="sm-gallery-comments-container sm-panel-content-margin"></div>',
            destructor: function() {
                this._commentsView && this._commentsView.destroy()
            },
            renderUI: function() {
                e.SM.Views.CommentList.Panel.superclass.renderUI.call(this), this.setStdModContent("body", this._getBodyNode(), "after"), this.update(this.get("image"))
            },
            _getBodyNode: function() {
                var t = e.Node.create(this.commentsTemplate);
                return this._commentsView = new e.SM.Views.CommentList.Generic({
                    container: e.Node.create("<div></div>"),
                    iframeHeight: 336
                }), t.append(this._commentsView.get("container")), t
            },
            update: function(t) {
                var s = !0,
                    n = t.getRelated("Album"),
                    i = e.SM.Page.album;
                i && (s = i.get("Comments")), s = s && n.get("Comments"), s ? (this._commentsView.setAttrs({
                    type: "Image",
                    typeId: t.get("ImageID"),
                    typeKey: t.get("ImageKey")
                }), this._commentsView.render(), this._commentsView.get("container").show()) : this._commentsView.get("container").hide()
            }
        }, {
            CSS_PREFIX: "sm-panel",
            ATTRS: {
                image: {
                    value: null
                },
                centered: {
                    value: !0
                },
                width: {
                    value: 432
                },
                title: {
                    value: "Comments"
                },
                closable: {
                    value: !0
                },
                draggable: {
                    value: !0
                },
                scrollHeight: {
                    value: 336
                },
                fillHeight: {
                    value: 336
                }
            }
        })
    }(), SM.currentModule = null
}, "", {
    requires: ["node", "json-parse", "lazy-model-list", "sm", "sm-api", "sm-google-plus", "sm-panel", "sm-templates-form", "sm-templates-button", "promise", "template-micro", "view"]
});
YUI.add("sm-comments-action-types", function(E) {
    SM.currentModule = "sm-comments-action-types";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: !0
        });
        exports.REQUEST_COMMENTS = "REQUEST_COMMENTS", exports.RECEIVE_COMMENTS = "RECEIVE_COMMENTS", exports.REQUEST_NEXT_PAGE = "REQUEST_NEXT_PAGE", exports.GET_NEXT_PAGE_SUCCESS = "GET_NEXT_PAGE_SUCCESS", exports.REQUEST_ADD_COMMENT = "REQUEST_ADD_COMMENT", exports.ADD_COMMENT_SUCCESS = "ADD_COMMENT_SUCCESS", exports.REQUEST_REMOVE_COMMENT = "REQUEST_REMOVE_COMMENT", exports.REMOVE_COMMENT_SUCCESS = "REMOVE_COMMENT_SUCCESS", exports.REQUEST_APPROVE_COMMENT = "REQUEST_APPROVE_COMMENT", exports.APPROVE_COMMENT_SUCCESS = "APPROVE_COMMENT_SUCCESS", exports.LOGIN = "LOGIN", exports.LOGIN_BUTTONS_LOADED = "LOGIN_BUTTONS_LOADED", exports.SET_RATING = "SET_RATING"
    }(), SM.currentModule = null
}, "", {});
YUI.add("sm-comments-actions", function(e) {
    SM.currentModule = "sm-comments-actions";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        "use strict";

        function e(e) {
            return function(r, o) {
                var s = N(o(), e),
                    u = s ? s.resourcesToRefresh : [],
                    c = void 0;
                switch (e.endpointType) {
                    case "Image":
                    case "AlbumImage":
                        c = "ImageComments";
                        break;
                    case "Album":
                    case "Folder":
                    case "Node":
                    case "Page":
                        c = "NodeComments";
                        break;
                    default:
                        throw new Error("Unable to fetch comments - unsupported parent resource type")
                }
                var m = babelHelpers.defineProperty({}, c, {
                    count: U,
                    paginate: !0,
                    start: 1
                });
                r(t(e)), e.expand(m, {
                    refresh: -1 !== u.indexOf(e.get("Uri"))
                }).then(function(t) {
                    var o = t.ImageComments || t.NodeComments;
                    r(n(o, e))
                })
            }
        }

        function t(e) {
            return {
                type: R.REQUEST_COMMENTS,
                parentResource: e
            }
        }

        function n(e, t) {
            return {
                type: R.RECEIVE_COMMENTS,
                paginator: e,
                parentResource: t
            }
        }

        function r(e) {
            return function(t, n) {
                var r = N(n(), e),
                    u = r.paginator,
                    c = r.paginatorStart;
                t(o()), u.getNextPage({
                    count: U,
                    start: c
                }).then(function(n) {
                    t(s(n, e))
                })
            }
        }

        function o() {
            return {
                type: R.REQUEST_NEXT_PAGE
            }
        }

        function s(e, t) {
            return {
                type: R.GET_NEXT_PAGE_SUCCESS,
                paginator: e,
                parentResource: t
            }
        }

        function u(e, t, n) {
            return function(r, o) {
                var s = o(),
                    u = s.commentsUser;
                u && (r(c()), g.postUri(n.getExpansionUri(v[n.endpointType]), {
                    data: {
                        Comment: e,
                        Rating: t,
                        Name: u.name,
                        ServiceID: u.serviceID,
                        SocialID: u.socialID
                    }
                }).then(function(e) {
                    r(m(e, n))
                }))
            }
        }

        function c() {
            return {
                type: R.REQUEST_ADD_COMMENT
            }
        }

        function m(e, t) {
            return {
                type: R.ADD_COMMENT_SUCCESS,
                commentResource: e,
                parentResource: t
            }
        }

        function a(e, t) {
            return function(n, r) {
                var o = N(r(), t),
                    s = l(o, e).get("Uri");
                n(i()), g.deleteUri(s).then(function() {
                    n(p(e, t))
                })
            }
        }

        function i() {
            return {
                type: R.REQUEST_REMOVE_COMMENT
            }
        }

        function p(e, t) {
            return {
                type: R.REMOVE_COMMENT_SUCCESS,
                uri: e,
                parentResource: t
            }
        }

        function E(e, t) {
            return function(n, r) {
                var o = N(r(), t),
                    s = l(o, e);
                n(f()), g.postUri(s.getExpansionUri("CommentApprove")).then(function() {
                    return g.loadUri(s.get("Uri"))
                }).then(function(r) {
                    n(S(e, r, t))
                })
            }
        }

        function f() {
            return {
                type: R.REQUEST_APPROVE_COMMENT
            }
        }

        function S(e, t, n) {
            return {
                type: R.APPROVE_COMMENT_SUCCESS,
                uri: e,
                approvedCommentResource: t,
                parentResource: n
            }
        }

        function C(e) {
            return {
                type: R.LOGIN,
                user: e
            }
        }

        function M(e) {
            return {
                type: R.LOGIN_BUTTONS_LOADED,
                parentResource: e
            }
        }

        function d(e, t) {
            return {
                type: R.SET_RATING,
                rating: e,
                parentResource: t
            }
        }
        Object.defineProperty(exports, "__esModule", {
            value: !0
        }), exports.fetchComments = e, exports.requestComments = t, exports.receiveComments = n, exports.getNextPage = r, exports.requestNextPage = o, exports.getNextPageSuccess = s, exports.addComment = u, exports.requestAddComment = c, exports.addCommentSuccess = m, exports.removeComment = a, exports.requestRemoveComment = i, exports.removeCommentSuccess = p, exports.approveComment = E, exports.requestApproveComment = f, exports.approveCommentSuccess = S, exports.login = C, exports.loginButtonsLoaded = M, exports.setRating = d;
        var g = SM["import"]("sm-resource-core"),
            R = SM["import"]("sm-comments-action-types"),
            _ = SM["import"]("sm-comments-selectors"),
            N = _.getCommentsTreeByResource,
            l = _.getCommentResourceByUri,
            T = SM["import"]("sm-comments-constants"),
            U = T.PAGE_SIZE,
            v = T.EXPANSION_NAME_MAP
    }(), SM.currentModule = null
}, "", {
    requires: ["sm", "sm-comments-action-types", "sm-comments-constants", "sm-comments-selectors", "sm-resource"]
});
YUI.add("sm-comments-component-add-comment", function(e) {
    SM.currentModule = "sm-comments-component-add-comment";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: !0
        });
        var e = SM["import"]("react"),
            t = SM["import"]("react-dom"),
            n = SM["import"]("react-redux"),
            o = n.connect,
            r = SM["import"]("sm-component-button"),
            s = SM["import"]("sm-component-textarea"),
            m = SM["import"]("sm-page"),
            a = SM["import"]("sm-comments-actions"),
            c = a.login,
            i = a.setRating,
            l = a.addComment,
            u = SM["import"]("sm-comments-selectors"),
            p = u.getCommentsTreeByResource,
            d = SM["import"]("sm-comments-component-avatar"),
            g = SM["import"]("sm-comments-component-rating-input"),
            v = SM["import"]("sm-comments-component-login-container"),
            h = function(n) {
                function o(e) {
                    babelHelpers.classCallCheck(this, o);
                    var t = babelHelpers.possibleConstructorReturn(this, (o.__proto__ || Object.getPrototypeOf(o)).call(this, e));
                    return t.state = {
                        loginChecked: !1
                    }, t._eventHandlers = {
                        onTextAreaClick: t._onTextAreaClick.bind(t),
                        onPostClick: t._onPostClick.bind(t)
                    }, t
                }
                return babelHelpers.inherits(o, n), babelHelpers.createClass(o, [{
                    key: "componentDidUpdate",
                    value: function(e, t) {
                        !e.user.loggedIn && this.props.user.loggedIn && this._input.focus()
                    }
                }, {
                    key: "render",
                    value: function() {
                        var n = this,
                            o = this.props,
                            r = o.user,
                            m = o.parentResource,
                            a = !this.state.loginChecked || r.loggedIn;
                        return e.createElement("div", {
                            className: "sm-comment-add"
                        }, e.createElement("div", {
                            className: "sm-comment-add-avatar"
                        }, e.createElement(d, {
                            profileImageURL: r && r.profileImageURL
                        })), e.createElement("div", {
                            className: "sm-comment-add-form"
                        }, e.createElement(s, {
                            ref: function(e) {
                                return n._input = t.findDOMNode(e)
                            },
                            disabled: !a,
                            placeholder: a ? "" : "You must log in to leave a comment.",
                            onClick: this._eventHandlers.onTextAreaClick
                        }), a ? this._renderCommentAddActions() : e.createElement(v, {
                            parentResource: m
                        })))
                    }
                }, {
                    key: "_renderCommentAddActions",
                    value: function() {
                        var t = this.props,
                            n = t.dispatch,
                            o = t.currentRating,
                            s = t.parentResource;
                        return this.state.loginChecked ? e.createElement("div", {
                            className: "yui3-g sm-comment-add-actions"
                        }, e.createElement("div", {
                            className: "yui3-u-2-3 sm-comment-add-rate"
                        }, e.createElement("span", {
                            className: "sm-text-small"
                        }, "Rate: "), e.createElement(g, {
                            rating: o,
                            onStarClick: function(e) {
                                n(i(o === e ? 0 : e, s))
                            }
                        })), e.createElement("div", {
                            className: "yui3-u-1-3 sm-comment-add-post"
                        }, e.createElement(r, {
                            value: "post",
                            size: "small",
                            onClick: this._eventHandlers.onPostClick
                        }, "Post"))) : null
                    }
                }, {
                    key: "_onTextAreaClick",
                    value: function() {
                        var e = this.props.dispatch;
                        m.user && e(c({
                            profileImageURL: m.user.bioPhotoUrl
                        })), this.setState({
                            loginChecked: !0
                        })
                    }
                }, {
                    key: "_onPostClick",
                    value: function() {
                        var e = this.props,
                            t = e.dispatch,
                            n = e.currentRating,
                            o = e.parentResource,
                            r = this._input,
                            s = r.value;
                        s && (t(l(s, n, o)), r.value = "", t(i(0, o)))
                    }
                }]), o
            }(SM["import"]("sm-component-pure-render")),
            f = function(e, t) {
                var n = p(e, t.parentResource);
                return {
                    currentRating: n && n.currentRating,
                    user: e.commentsUser
                }
            },
            C = function(e) {
                return {
                    dispatch: e
                }
            };
        h = o(f, C)(h), exports["default"] = h, module.exports = exports["default"]
    }(), SM.currentModule = null
}, "", {
    requires: ["react", "react-dom", "react-redux", "sm", "sm-comments-actions", "sm-comments-component-avatar", "sm-comments-component-login-container", "sm-comments-component-rating-input", "sm-comments-selectors", "sm-component-button", "sm-component-textarea", "sm-page"]
});
YUI.add("sm-comments-component-avatar", function(e) {
    SM.currentModule = "sm-comments-component-avatar";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: !0
        });
        var e = SM["import"]("react"),
            r = SM["import"]("sm-component-icon"),
            t = function(t) {
                var o = t.profileURL,
                    n = t.profileImageURL,
                    c = n ? e.createElement("img", {
                        src: n
                    }) : e.createElement(r, {
                        icon: "User"
                    });
                return o ? e.createElement("a", {
                    href: o
                }, c) : c
            },
            o = e.PropTypes;
        t.propTypes = {
            profileURL: o.string,
            profileImageURL: o.string
        }, exports["default"] = t, module.exports = exports["default"]
    }(), SM.currentModule = null
}, "", {
    requires: ["react", "sm", "sm-component-icon"]
});
YUI.add("sm-comments-component-comment-list", function(e) {
    SM.currentModule = "sm-comments-component-comment-list";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: !0
        });
        var e = SM["import"]("react"),
            o = SM["import"]("sm-comments-component-comment"),
            n = SM["import"]("sm-component-button"),
            m = function(m) {
                var t = m.comments,
                    c = m.onCommentApproveClick,
                    r = m.onCommentRemoveClick,
                    l = m.isOwner,
                    s = m.showLoadMore,
                    i = m.onLoadMoreClick;
                return e.createElement("div", null, e.createElement("ul", {
                    className: "sm-comment-list"
                }, t.map(function(n, m) {
                    return e.createElement(o, {
                        comment: n,
                        key: "sm-comment-item-" + m,
                        onApproveClick: c,
                        onRemoveClick: r,
                        isOwner: l
                    })
                }), 0 === t.length && e.createElement("li", {
                    className: "sm-comment-listitem sm-comment-listitem-none"
                }, "No Comments")), s && e.createElement(n, {
                    value: "loadmore",
                    size: "small",
                    onClick: i
                }, "Load More"))
            },
            t = e.PropTypes;
        m.propTypes = {
            comments: t.arrayOf(t.object),
            onCommentApproveClick: t.func,
            onCommentRemoveClick: t.func,
            isOwner: t.bool,
            showLoadMore: t.bool,
            onLoadMoreClick: t.func
        }, m.defaultProps = {
            comments: [],
            onCommentApproveClick: function() {},
            onCommentRemoveClick: function() {},
            isOwner: !1,
            showLoadMore: !1,
            onLoadMoreClick: function() {}
        }, exports["default"] = m, module.exports = exports["default"]
    }(), SM.currentModule = null
}, "", {
    requires: ["react", "sm", "sm-comments-component-comment", "sm-component-button"]
});
YUI.add("sm-comments-component-comment", function(e) {
    SM.currentModule = "sm-comments-component-comment";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: !0
        });
        var e = SM["import"]("react"),
            t = SM["import"]("sm-pretty-date"),
            n = SM["import"]("sm-component-button"),
            r = SM["import"]("sm-component-icon"),
            m = SM["import"]("sm-comments-component-avatar"),
            o = SM["import"]("sm-comments-component-rating"),
            s = SM["import"]("sm-comments-constants"),
            a = s.STATUS_PENDING,
            i = s.STATUS_APPROVED,
            c = function(s) {
                function i(e) {
                    babelHelpers.classCallCheck(this, i);
                    var t = babelHelpers.possibleConstructorReturn(this, (i.__proto__ || Object.getPrototypeOf(i)).call(this, e));
                    return t._eventHandlers = {
                        onApproveClick: t._onApproveClick.bind(t),
                        onRemoveClick: t._onRemoveClick.bind(t)
                    }, t
                }
                return babelHelpers.inherits(i, s), babelHelpers.createClass(i, [{
                    key: "render",
                    value: function() {
                        var t = this.props,
                            n = t.isOwner,
                            r = t.comment;
                        return e.createElement("li", {
                            className: "sm-comment-listitem"
                        }, e.createElement("div", {
                            className: "sm-comment-listitem-avatar"
                        }, e.createElement(m, {
                            profileURL: r.userProfileURL,
                            profileImageURL: r.userProfileImageURL
                        })), r.rating ? e.createElement(o, {
                            rating: r.rating
                        }) : null, e.createElement("div", {
                            className: "sm-comment-listitem-comment"
                        }, this._renderUserAndTimestamp(), e.createElement("p", {
                            className: "sm-comment-text",
                            dangerouslySetInnerHTML: {
                                __html: r.text
                            }
                        }), n && this._renderOwnerActions()))
                    }
                }, {
                    key: "_renderUserAndTimestamp",
                    value: function() {
                        var n = this.props.comment,
                            r = n.userProfileURL,
                            m = e.createElement("h3", {
                                className: "sm-comment-username"
                            }, n.userName);
                        return r && (m = e.createElement("a", {
                            href: r
                        }, m)), e.createElement("span", null, m, e.createElement("span", {
                            className: "sm-text-mini"
                        }, t(n.timestamp)))
                    }
                }, {
                    key: "_renderOwnerActions",
                    value: function() {
                        var t = this.props.comment,
                            m = this._eventHandlers;
                        return e.createElement("div", {
                            className: "sm-comment-owner-actions"
                        }, t.status === a && e.createElement(n, {
                            size: "small",
                            noChrome: !0,
                            value: "approve",
                            onClick: m.onApproveClick
                        }, e.createElement(r, {
                            icon: "CheckMark",
                            size: "small"
                        }), e.createElement("span", {
                            className: "sm-button-label"
                        }, "Approve")), e.createElement(n, {
                            size: "small",
                            noChrome: !0,
                            value: "remove",
                            onClick: m.onRemoveClick
                        }, e.createElement(r, {
                            icon: "XCross",
                            size: "small"
                        }), e.createElement("span", {
                            className: "sm-button-label"
                        }, "Remove")))
                    }
                }, {
                    key: "_onApproveClick",
                    value: function() {
                        var e = this.props,
                            t = e.onApproveClick,
                            n = e.comment;
                        t(n.uri)
                    }
                }, {
                    key: "_onRemoveClick",
                    value: function() {
                        var e = this.props,
                            t = e.onRemoveClick,
                            n = e.comment;
                        t(n.uri)
                    }
                }]), i
            }(SM["import"]("sm-component-pure-render")),
            l = e.PropTypes;
        c.propTypes = {
            comment: l.shape({
                uri: l.string.isRequired,
                userName: l.string.isRequired,
                userProfileURL: l.string,
                userProfileImageURL: l.string,
                text: l.string.isRequired,
                timestamp: l.string.isRequired,
                rating: l.oneOf([0, 1, 2, 3, 4, 5]),
                status: l.oneOf([a, i]).isRequired
            }).isRequired,
            onApproveClick: l.func,
            onRemoveClick: l.func
        }, c.defaultProps = {
            comment: {
                uri: "",
                userName: "",
                userProfileURL: "",
                userProfileImageURL: "",
                text: "",
                timestamp: "",
                rating: 0,
                status: a
            },
            onApproveClick: function() {},
            onRemoveClick: function() {}
        }, exports["default"] = c, module.exports = exports["default"]
    }(), SM.currentModule = null
}, "", {
    requires: ["react", "sm", "sm-comments-component-avatar", "sm-comments-component-rating", "sm-component-button", "sm-component-icon", "sm-comments-constants", "sm-pretty-date"]
});
YUI.add("sm-comments-component-login-buttons", function(e) {
    SM.currentModule = "sm-comments-component-login-buttons";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: !0
        });
        var e = SM["import"]("react"),
            o = SM["import"]("sm-dom"),
            t = SM["import"]("sm-component-button"),
            n = SM["import"]("sm-component-icon"),
            m = SM["import"]("sm-page"),
            s = SM["import"]("sm-uri"),
            i = function(i) {
                var r = i.loginButtonsLoaded,
                    c = SM.env.host,
                    l = c.ssl,
                    u = c.customDomain,
                    a = {
                        nodeId: m.nodeId
                    };
                u && (a.customDomain = !0);
                var d = "https://" + l + "/frame/sociallogin?" + s.stringifyQuery(a);
                return e.createElement("div", {
                    className: "sm-comments-login-buttons"
                }, e.createElement(t, {
                    skin: "submit",
                    size: "small",
                    className: "sm-comments-sm-login-button",
                    onClick: function() {
                        o.doc.location.href = "/login?goTo=" + o.doc.location.href
                    }
                }, e.createElement(n, {
                    icon: "SmugMug",
                    size: "small"
                })), e.createElement("iframe", {
                    style: {
                        visibility: r ? "visible" : "hidden"
                    },
                    frameBorder: "0",
                    width: r ? "200" : "0",
                    height: "48",
                    src: d
                }))
            };
        exports["default"] = i, module.exports = exports["default"]
    }(), SM.currentModule = null
}, "", {
    requires: ["react", "sm", "sm-component-button", "sm-component-icon", "sm-dom", "sm-page", "sm-uri"]
});
YUI.add("sm-comments-component-login-container", function(e) {
    SM.currentModule = "sm-comments-component-login-container";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: !0
        });
        var e = SM["import"]("react"),
            n = SM["import"]("react-redux"),
            t = n.connect,
            o = SM["import"]("sm-component-busy"),
            s = SM["import"]("sm-dom"),
            r = SM["import"]("sm-comments-selectors"),
            a = r.getCommentsTreeByResource,
            m = SM["import"]("sm-comments-actions"),
            i = m.loginButtonsLoaded,
            c = m.login,
            l = SM["import"]("sm-comments-component-login-buttons"),
            u = function(n) {
                function t(e) {
                    babelHelpers.classCallCheck(this, t);
                    var n = babelHelpers.possibleConstructorReturn(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this, e));
                    return n._eventHandlers = {
                        onWindowMessage: n._onWindowMessage.bind(n)
                    }, n
                }
                return babelHelpers.inherits(t, n), babelHelpers.createClass(t, [{
                    key: "componentDidMount",
                    value: function() {
                        s.win.addEventListener("message", this._eventHandlers.onWindowMessage)
                    }
                }, {
                    key: "componentWillUnmount",
                    value: function() {
                        s.win.removeEventListener("message", this._eventHandlers.onWindowMessage)
                    }
                }, {
                    key: "render",
                    value: function() {
                        var n = this.props.loginButtonsLoaded;
                        return e.createElement("div", {
                            className: "sm-comments-login-container sm-flex sm-flex-row sm-flex-items-center"
                        }, e.createElement("p", {
                            className: "sm-comments-login-label"
                        }, "Log In: "), e.createElement(l, {
                            loginButtonsLoaded: n
                        }), !n && e.createElement(o, {
                            className: "sm-comments-login-busy"
                        }))
                    }
                }, {
                    key: "_onWindowMessage",
                    value: function(e) {
                        var n = this.props,
                            t = n.dispatch,
                            o = n.parentResource,
                            s = SM.env.host.ssl,
                            r = void 0;
                        if (e.origin === "https://" + s) {
                            try {
                                r = JSON.parse(e.data)
                            } catch (a) {
                                return
                            }
                            switch (r.type) {
                                case "login":
                                    t(i(o));
                                    break;
                                case "profile":
                                    var m = r.data,
                                        l = m.profileImageURL,
                                        u = m.name,
                                        d = m.serviceId,
                                        p = m.id;
                                    t(c({
                                        profileImageURL: l,
                                        name: u,
                                        serviceID: d,
                                        socialID: p
                                    }))
                            }
                        }
                    }
                }]), t
            }(e.Component),
            d = function(e, n) {
                var t = a(e, n.parentResource);
                return {
                    loginButtonsLoaded: t && t.loginButtonsLoaded
                }
            };
        exports["default"] = t(d)(u), module.exports = exports["default"]
    }(), SM.currentModule = null
}, "", {
    requires: ["react", "react-redux", "sm-comments-component-login-buttons", "sm-comments-selectors", "sm-component-busy", "sm-dom"]
});
YUI.add("sm-comments-component-paginated-comment-list", function(e) {
    SM.currentModule = "sm-comments-component-paginated-comment-list";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: !0
        });
        var e = SM["import"]("react"),
            t = SM["import"]("react-redux"),
            o = t.connect,
            r = SM["import"]("sm-page"),
            n = SM["import"]("sm-comments-selectors"),
            s = n.getCommentsTreeByResource,
            m = SM["import"]("sm-comments-actions"),
            c = m.fetchComments,
            a = m.approveComment,
            i = m.removeComment,
            u = m.getNextPage,
            p = SM["import"]("sm-comments-component-comment-list"),
            l = function(t) {
                function o() {
                    return babelHelpers.classCallCheck(this, o), babelHelpers.possibleConstructorReturn(this, (o.__proto__ || Object.getPrototypeOf(o)).apply(this, arguments))
                }
                return babelHelpers.inherits(o, t), babelHelpers.createClass(o, [{
                    key: "componentDidMount",
                    value: function() {
                        var e = this.props,
                            t = e.dispatch,
                            o = e.parentResource;
                        t(c(o))
                    }
                }, {
                    key: "componentWillReceiveProps",
                    value: function(e) {
                        var t = e.dispatch,
                            o = e.parentResource;
                        this.props.parentResource !== o && t(c(o))
                    }
                }, {
                    key: "render",
                    value: function() {
                        return e.createElement(p, this.props)
                    }
                }]), o
            }(e.Component),
            d = function(e, t) {
                var o = t.parentResource,
                    n = s(e, o);
                if (!n) return t;
                var m = n.items,
                    c = n.totalResources,
                    a = n.paginator,
                    i = n.paginatorStart;
                return {
                    comments: m.map(function(e) {
                        return {
                            uri: e.get("Uri"),
                            userName: e.get("Name"),
                            userProfileURL: e.get("ProfileURL"),
                            userProfileImageURL: e.get("ProfileImageURL"),
                            text: e.get("Comment"),
                            timestamp: e.get("Date"),
                            rating: e.get("Rating"),
                            status: e.get("Status")
                        }
                    }),
                    isOwner: r.isOwnerOrAdmin({
                        includeAssistants: !1
                    }),
                    showLoadMore: a && c >= i
                }
            },
            f = function(e, t) {
                var o = t.parentResource;
                return {
                    dispatch: e,
                    onCommentApproveClick: function(t) {
                        e(a(t, o))
                    },
                    onCommentRemoveClick: function(t) {
                        e(i(t, o))
                    },
                    onLoadMoreClick: function() {
                        e(u(o))
                    }
                }
            };
        exports["default"] = o(d, f)(l), module.exports = exports["default"]
    }(), SM.currentModule = null
}, "", {
    requires: ["react", "react-redux", "sm", "sm-comments-component-comment-list", "sm-comments-selectors", "sm-page"]
});
YUI.add("sm-comments-component-rating-input", function(n) {
    SM.currentModule = "sm-comments-component-rating-input";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: !0
        });
        var n = SM["import"]("react"),
            t = SM["import"]("classnames"),
            e = SM["import"]("sm-comments-constants"),
            s = e.MAX_RATING,
            r = function(e) {
                for (var r = e.rating, o = e.onStarClick, a = [], m = function(e) {
                        var s = r >= e,
                            m = t({
                                "sm-fonticon": !0,
                                "sm-fonticon-small": !0,
                                "sm-comment-add-star": !0,
                                "sm-comment-add-staron": s
                            });
                        a.push(n.createElement("span", {
                            key: "sm-comment-add-star-" + e,
                            className: m,
                            size: "small",
                            onClick: function() {
                                o(e)
                            }
                        }))
                    }, c = s; c > 0; --c) m(c);
                return n.createElement("div", {
                    className: "sm-comment-add-stars"
                }, a)
            },
            o = n.PropTypes;
        r.propTypes = {
            rating: o.oneOf(Array.from({
                length: s + 1
            }, function(n, t) {
                return t
            })).isRequired,
            onStarClick: o.func
        }, r.defaultProps = {
            rating: 0
        }, exports["default"] = r, module.exports = exports["default"]
    }(), SM.currentModule = null
}, "", {
    requires: ["classnames", "react", "sm", "sm-comments-constants"]
});
YUI.add("sm-comments-component-rating", function(e) {
    SM.currentModule = "sm-comments-component-rating";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: !0
        });
        var e = SM["import"]("react"),
            t = SM["import"]("sm-component-icon"),
            n = function(n) {
                for (var r = n.rating, m = [], o = 1; r >= o; o++) m.push(e.createElement(t, {
                    icon: "StarMini",
                    size: "small",
                    key: "sm-comment-star-" + o
                }));
                return e.createElement("div", {
                    className: "sm-comment-listitem-rating"
                }, e.createElement("span", {
                    className: "sm-text-mini"
                }, "Rated: "), m)
            },
            r = e.PropTypes;
        n.propTypes = {
            rating: r.number
        }, n.defaultProps = {
            rating: 0
        }, exports["default"] = n, module.exports = exports["default"]
    }(), SM.currentModule = null
}, "", {
    requires: ["react", "sm", "sm-component-icon"]
});
YUI.add("sm-comments-constants", function(e) {
    SM.currentModule = "sm-comments-constants";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: !0
        });
        exports.EXPANSION_NAME_MAP = {
            Image: "ImageComments",
            AlbumImage: "ImageComments",
            Node: "NodeComments"
        }, exports.PAGE_SIZE = 10, exports.MAX_RATING = 5, exports.STATUS_PENDING = "Pending", exports.STATUS_APPROVED = "Approved"
    }(), SM.currentModule = null
}, "", {});
YUI.add("sm-comments-reducers", function(e) {
    SM.currentModule = "sm-comments-reducers";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        "use strict";

        function e() {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
                r = arguments[1];
            switch (r.type) {
                case t.ADD_COMMENT_SUCCESS:
                case t.REMOVE_COMMENT_SUCCESS:
                case t.APPROVE_COMMENT_SUCCESS:
                case t.REQUEST_COMMENTS:
                case t.RECEIVE_COMMENTS:
                case t.GET_NEXT_PAGE_SUCCESS:
                case t.SET_RATING:
                case t.LOGIN_BUTTONS_LOADED:
                    var s = r.parentResource,
                        n = s.get("Uri");
                    return babelHelpers["extends"]({}, e, babelHelpers.defineProperty({}, n, babelHelpers["extends"]({}, a(e[n], r), {
                        parentResource: s
                    })));
                default:
                    return e
            }
        }

        function r() {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {
                    loggedIn: !1
                },
                r = arguments[1];
            switch (r.type) {
                case t.LOGIN:
                    return babelHelpers["extends"]({
                        loggedIn: !0
                    }, r.user);
                default:
                    return e
            }
        }
        Object.defineProperty(exports, "__esModule", {
            value: !0
        }), exports.comments = e, exports.commentsUser = r;
        var t = SM["import"]("sm-comments-action-types"),
            s = function() {
                var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [],
                    r = arguments[1];
                switch (r.type) {
                    case t.ADD_COMMENT_SUCCESS:
                        return [r.commentResource].concat(babelHelpers.toConsumableArray(e));
                    case t.REMOVE_COMMENT_SUCCESS:
                        return e.filter(function(e) {
                            return e.get("Uri") !== r.uri
                        });
                    case t.APPROVE_COMMENT_SUCCESS:
                        return e.map(function(e) {
                            return e.get("Uri") === r.uri ? r.approvedCommentResource : e
                        });
                    case t.GET_NEXT_PAGE_SUCCESS:
                        return [].concat(babelHelpers.toConsumableArray(e), babelHelpers.toConsumableArray(r.paginator.resources));
                    default:
                        return e
                }
            },
            a = function() {
                var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {
                        paginatorStart: 1,
                        resourcesToRefresh: [],
                        isFetching: !1,
                        items: [],
                        currentRating: 0,
                        loginButtonsLoaded: !1,
                        totalResources: 0
                    },
                    r = arguments[1];
                switch (r.type) {
                    case t.ADD_COMMENT_SUCCESS:
                        return babelHelpers["extends"]({}, e, {
                            items: s(e.items, r),
                            totalResources: e.totalResources + 1,
                            paginatorStart: e.paginatorStart + 1,
                            resourcesToRefresh: Array.from(new Set([].concat(babelHelpers.toConsumableArray(e.resourcesToRefresh), [r.parentResource.get("Uri")])))
                        });
                    case t.APPROVE_COMMENT_SUCCESS:
                        return babelHelpers["extends"]({}, e, {
                            items: s(e.items, r),
                            resourcesToRefresh: Array.from(new Set([].concat(babelHelpers.toConsumableArray(e.resourcesToRefresh), [r.parentResource.get("Uri")])))
                        });
                    case t.REMOVE_COMMENT_SUCCESS:
                        return babelHelpers["extends"]({}, e, {
                            items: s(e.items, r),
                            totalResources: Math.max(e.totalResources - 1, 0),
                            paginatorStart: Math.max(e.paginatorStart - 1, 1),
                            resourcesToRefresh: Array.from(new Set([].concat(babelHelpers.toConsumableArray(e.resourcesToRefresh), [r.parentResource.get("Uri")])))
                        });
                    case t.REQUEST_COMMENTS:
                        return babelHelpers["extends"]({}, e, {
                            isFetching: !0
                        });
                    case t.RECEIVE_COMMENTS:
                        var a = r.paginator,
                            n = a.resources;
                        return babelHelpers["extends"]({}, e, {
                            items: n,
                            isFetching: !1,
                            paginator: a,
                            paginatorStart: n.length + 1,
                            totalResources: a.totalResources,
                            resourcesToRefresh: e.resourcesToRefresh.filter(function(e) {
                                return e !== r.parentResource.get("Uri")
                            })
                        });
                    case t.GET_NEXT_PAGE_SUCCESS:
                        return babelHelpers["extends"]({}, e, {
                            paginator: r.paginator,
                            paginatorStart: e.paginatorStart + r.paginator.resources.length + 1,
                            items: s(e.items, r)
                        });
                    case t.SET_RATING:
                        return babelHelpers["extends"]({}, e, {
                            currentRating: r.rating
                        });
                    case t.LOGIN_BUTTONS_LOADED:
                        return babelHelpers["extends"]({}, e, {
                            loginButtonsLoaded: !0
                        });
                    default:
                        return e
                }
            }
    }(), SM.currentModule = null
}, "", {
    requires: ["sm", "sm-comments-action-types", "sm-comments-selectors"]
});
YUI.add("sm-comments-selectors", function(e) {
    SM.currentModule = "sm-comments-selectors";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        "use strict";

        function e(e, t) {
            return e.comments[t.get("Uri")]
        }

        function t(e, t) {
            return e.items.find(function(e) {
                return e.get("Uri") === t
            })
        }
        Object.defineProperty(exports, "__esModule", {
            value: !0
        }), exports.getCommentsTreeByResource = e, exports.getCommentResourceByUri = t
    }(), SM.currentModule = null
}, "", {});
YUI.add("sm-comments", function(e) {
    SM.currentModule = "sm-comments";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: !0
        });
        var e = SM["import"]("react"),
            r = SM["import"]("react-redux"),
            t = r.Provider,
            m = SM["import"]("sm-redux-store"),
            o = SM["import"]("sm-smuglog"),
            n = SM["import"]("sm-comments-component-add-comment"),
            s = SM["import"]("sm-comments-component-paginated-comment-list"),
            c = function(r) {
                var o = r.resource;
                return e.createElement(t, {
                    store: m
                }, e.createElement("div", null, e.createElement(n, {
                    parentResource: o
                }), e.createElement(s, {
                    parentResource: o
                })))
            },
            u = function(e, r) {
                var t = e[r];
                return t.isSmugMugResource ? void 0 : o.error("Comments", {
                    message: "'" + r + "' must be a Resource",
                    prop: t
                })
            };
        c.propTypes = {
            resource: u
        }, exports["default"] = c, module.exports = exports["default"]
    }(), SM.currentModule = null
}, "", {
    requires: ["react", "react-redux", "sm", "sm-comments-component-add-comment", "sm-comments-component-paginated-comment-list", "sm-redux-store", "sm-smuglog"]
});
YUI.add("sm-component-adaptiveformfield", function(e) {
    SM.currentModule = "sm-component-adaptiveformfield";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: !0
        });
        var e = SM["import"]("react"),
            r = e.PropTypes,
            t = function(r) {
                var t = e.Children.only(r.children),
                    l = t.props.id || "",
                    o = !t.props.value,
                    a = r.label,
                    d = r.error,
                    s = babelHelpers.objectWithoutProperties(r, ["label", "error"]);
                return e.createElement("div", babelHelpers["extends"]({
                    className: "sm-form-field-adaptive",
                    "data-empty-field": o,
                    "data-error-field": !!d
                }, s), t, e.createElement("label", {
                    htmlFor: l
                }, a), e.createElement("p", {
                    className: "sm-form-field-error-msg"
                }, d))
            };
        t.propTypes = {
            label: r.string.isRequired,
            error: r.string
        }, exports["default"] = t, module.exports = exports["default"]
    }(), SM.currentModule = null
}, "", {
    requires: ["sm", "react"]
});
YUI.add("sm-component-breadcrumbs", function(e) {
    SM.currentModule = "sm-component-breadcrumbs";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        "use strict";
        var e = SM["import"]("react"),
            r = function(r) {
                function t() {
                    return babelHelpers.classCallCheck(this, t), babelHelpers.possibleConstructorReturn(this, (t.__proto__ || Object.getPrototypeOf(t)).apply(this, arguments))
                }
                return babelHelpers.inherits(t, r), babelHelpers.createClass(t, [{
                    key: "render",
                    value: function() {
                        var r = this.props,
                            t = "sm-breadcrumbs";
                        return r.className && (t += " " + r.className), e.createElement("ul", {
                            className: t
                        }, r.children)
                    }
                }]), t
            }(SM["import"]("sm-component-pure-render"));
        exports.Breadcrumbs = r, ! function() {
            var e = SM["import"]("react"),
                r = SM["import"]("sm-component-icon"),
                t = function(t) {
                    function s() {
                        return babelHelpers.classCallCheck(this, s), babelHelpers.possibleConstructorReturn(this, (s.__proto__ || Object.getPrototypeOf(s)).apply(this, arguments))
                    }
                    return babelHelpers.inherits(s, t), babelHelpers.createClass(s, [{
                        key: "render",
                        value: function() {
                            var t = this.props,
                                s = t.icon,
                                n = (t.emphasis, t.url),
                                o = "sm-breadcrumb";
                            return n ? e.createElement("li", {
                                className: o
                            }, e.createElement("a", {
                                href: n
                            }, s && e.createElement(r, {
                                icon: s,
                                size: "small"
                            }), t.children)) : e.createElement("li", {
                                className: o
                            }, s && e.createElement(r, {
                                icon: s,
                                size: "small"
                            }), t.children)
                        }
                    }]), s
                }(SM["import"]("sm-component-pure-render")),
                s = e.PropTypes;
            t.propTypes = {
                emphasis: s.bool,
                url: s.string,
                icon: s.string
            }, exports.Breadcrumb = t
        }()
    }(), SM.currentModule = null
}, "", {
    requires: ["react", "react-dom", "sm", "sm-component-button", "sm-component-icon", "sm-component-menu", "sm-component-pure-render", "lodash", "classnames"]
});
YUI.add("sm-component-busy", function(e) {
    SM.currentModule = "sm-component-busy";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        var r = SM["import"]("react"),
            s = r.PropTypes,
            n = r.createClass({
                displayName: "BusyIndicator",
                propTypes: {
                    className: s.oneOfType([s.arrayOf(s.string), s.string])
                },
                render: function() {
                    var e = ["sm-progress-spinner", "sm-progress-spinner-visible"].concat(this.props.className);
                    return r.createElement("div", {
                        className: e.join(" ")
                    })
                }
            });
        e.namespace("SM.Component").BusyIndicator = n, module.exports = n
    }(), SM.currentModule = null
}, "", {
    requires: ["react", "sm"]
});
YUI.add("sm-component-button", function(e) {
    SM.currentModule = "sm-component-button";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: !0
        });
        var e = SM["import"]("classnames"),
            t = SM["import"]("react"),
            r = function(r) {
                function n() {
                    return babelHelpers.classCallCheck(this, n), babelHelpers.possibleConstructorReturn(this, (n.__proto__ || Object.getPrototypeOf(n)).apply(this, arguments))
                }
                return babelHelpers.inherits(n, r), babelHelpers.createClass(n, [{
                    key: "render",
                    value: function() {
                        var r = this.props,
                            n = r.children,
                            s = r.className,
                            o = r.href,
                            l = r.noChrome,
                            a = r.size,
                            u = r.skin,
                            i = r.value,
                            c = babelHelpers.objectWithoutProperties(r, ["children", "className", "href", "noChrome", "size", "skin", "value"]),
                            m = ["sm-button", {
                                "sm-button-nochrome": l
                            }, "sm-button-size-" + a, "sm-button-skin-" + u].concat(s),
                            p = o ? "a" : "button";
                        return t.createElement(p, babelHelpers["extends"]({
                            className: e(m),
                            "data-value": i || null,
                            href: o || null
                        }, c), n)
                    }
                }]), n
            }(SM["import"]("sm-component-pure-render"));
        exports["default"] = r, r.displayName = "Button";
        var n = t.PropTypes;
        r.propTypes = {
            className: n.oneOfType([n.arrayOf(n.string), n.string]),
            disabled: n.bool,
            href: n.string,
            noChrome: n.bool,
            size: n.oneOf(["small", "large"]),
            skin: n.oneOf(["accent", "default", "none", "submit"]),
            title: n.string,
            type: n.oneOf(["button", "submit"]),
            value: n.string
        }, r.defaultProps = {
            disabled: !1,
            noChrome: !1,
            size: "large",
            skin: "default",
            type: "button"
        }, module.exports = exports["default"]
    }(), SM.currentModule = null
}, "", {
    requires: ["classnames", "react", "react-dom", "sm", "sm-component-pure-render"]
});
YUI.add("sm-component-buttongroup", function(e) {
    SM.currentModule = "sm-component-buttongroup";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        var r = SM["import"]("react"),
            t = r.PropTypes,
            n = SM["import"]("classnames"),
            s = r.createClass({
                displayName: "ButtonGroup",
                propTypes: {
                    className: t.string,
                    size: t.oneOf(["large", "small"])
                },
                getDefaultProps: function() {
                    return {
                        className: "",
                        size: "large"
                    }
                },
                render: function() {
                    var e = this.props,
                        t = n("sm-button-group", "sm-button-group-size-" + e.size, "yui3-g"),
                        s = r.Children.toArray(e.children),
                        o = s.filter(function(e) {
                            return !!e
                        }),
                        u = o.length;
                    return o = o.map(function(t) {
                        var s = "yui3-u-1";
                        return u > 1 && (s += "-" + u), r.cloneElement(t, {
                            className: n(s, t.props.className),
                            size: e.size
                        })
                    }), r.createElement("div", {
                        className: n(t, e.className)
                    }, o)
                }
            });
        e.namespace("SM.Component").ButtonGroup = s, module.exports = s
    }(), SM.currentModule = null
}, "", {
    requires: ["classnames", "sm-component-button"]
});
YUI.add("sm-component-checkbox", function(e) {
    SM.currentModule = "sm-component-checkbox";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        var s = SM["import"]("react"),
            o = SM["import"]("classnames"),
            c = s.createClass({
                displayName: "Checkbox",
                propTypes: {
                    checked: s.PropTypes.bool.isRequired,
                    onChange: s.PropTypes.func
                },
                getDefaultProps: function() {
                    return {
                        checked: !1
                    }
                },
                render: function() {
                    var e, c = {
                        "sm-form-field-checkbox-item": !0,
                        "yui3-button": !0,
                        "yui3-button-selected": this.props.checked
                    };
                    this.props.children && (e = s.createElement("span", {
                        className: "yui3-button-label"
                    }, this.props.children));
                    var n = this.props,
                        t = n.className,
                        r = babelHelpers.objectWithoutProperties(n, ["className"]);
                    return t && (c[t] = !0), s.createElement("button", babelHelpers["extends"]({}, r, {
                        type: "button",
                        onClick: this.handleClick,
                        className: o(c)
                    }), s.createElement("span", {
                        className: "sm-form-field-checkbox-icon-container"
                    }, s.createElement("span", {
                        className: "sm-form-field-checkbox-icon sm-fonticon sm-fonticon-sml sm-fonticon-CheckMark"
                    })), e)
                },
                handleClick: function() {
                    this.props.onChange && this.props.onChange(!this.props.checked)
                }
            });
        e.namespace("SM.Component").Checkbox = c, module.exports = c
    }(), SM.currentModule = null
}, "", {
    requires: ["classnames", "sm", "react"]
});
YUI.add("sm-component-collapsible-breadcrumbs", function(e) {
    SM.currentModule = "sm-component-collapsible-breadcrumbs";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        ! function() {
            var e = SM["import"]("react"),
                n = SM["import"]("react-dom"),
                r = SM["import"]("sm-component-menu"),
                t = SM["import"]("sm-component-button"),
                o = SM["import"]("sm-component-icon"),
                c = SM["import"]("sm-component-breadcrumbs"),
                l = c.Breadcrumbs,
                m = c.Breadcrumb,
                i = 3,
                s = function(c) {
                    function s() {
                        return babelHelpers.classCallCheck(this, s), babelHelpers.possibleConstructorReturn(this, (s.__proto__ || Object.getPrototypeOf(s)).apply(this, arguments))
                    }
                    return babelHelpers.inherits(s, c), babelHelpers.createClass(s, [{
                        key: "render",
                        value: function() {
                            var n = this,
                                c = this.props,
                                s = c.children,
                                u = s.filter(function(e) {
                                    return e
                                }),
                                a = u.length - i,
                                p = void 0;
                            if (a > 0) {
                                p = u.splice(1, a);
                                var d = e.createElement(m, {
                                    key: "1"
                                }, e.createElement(t, {
                                    noChrome: !0,
                                    onClick: this.handleMenuClick.bind(this)
                                }, e.createElement(o, {
                                    icon: "FolderExpand",
                                    size: "small"
                                })), e.createElement("div", null, e.createElement(r, {
                                    ref: "menuRef"
                                }, p.map(function(t, o) {
                                    return e.createElement(r.Item, {
                                        onClick: n.handleItemClick,
                                        key: o
                                    }, e.createElement("a", {
                                        href: t.props.url
                                    }, t.props.children))
                                }))));
                                u.splice(1, 0, d)
                            }
                            return e.createElement("div", null, e.createElement(l, null, u))
                        }
                    }, {
                        key: "handleMenuClick",
                        value: function(e) {
                            this.refs.menuRef.toggle(e.target), this.props.onMenuClick()
                        }
                    }, {
                        key: "handleItemClick",
                        value: function(e) {
                            var r = n.findDOMNode(e.item).querySelector("a").href;
                            r && (location.href = r)
                        }
                    }]), s
                }(SM["import"]("sm-component-pure-render")),
                u = e.PropTypes;
            s.propTypes = {
                onMenuClick: u.func
            }, s.defaultProps = {
                onMenuClick: function() {}
            }, module.exports = s
        }()
    }(), SM.currentModule = null
}, "", {
    requires: ["react", "react-dom", "sm", "sm-component-breadcrumbs", "sm-component-button", "sm-component-icon", "sm-component-menu", "sm-component-pure-render"]
});
YUI.add("sm-component-draggable", function(e) {
    SM.currentModule = "sm-component-draggable";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        var e = SM["import"]("react"),
            n = SM["import"]("react-dom"),
            r = SM["import"]("sm-dom"),
            t = SM["import"]("sm-draggable"),
            a = "content",
            o = function(o) {
                function l(e) {
                    return babelHelpers.classCallCheck(this, l), babelHelpers.possibleConstructorReturn(this, (l.__proto__ || Object.getPrototypeOf(l)).call(this, e))
                }
                return babelHelpers.inherits(l, o), babelHelpers.createClass(l, [{
                    key: "componentDidMount",
                    value: function() {
                        var e = this,
                            o = this.props,
                            l = n.findDOMNode(this.refs[a]),
                            s = this._findHandles(this.props.children),
                            i = {};
                        0 === s.length ? (l && r.classList(l).add("sm-component-draggable-handle"), i.handle = l) : i.handle = ".sm-component-draggable-handle";
                        var c = new t(l, Object.assign({}, i, o.draggableConfig));
                        c.on("drag", function(n) {
                            o.onDrag(n), e._moveElement(n)
                        }), c.on("dragend", function(e) {
                            o.onDragEnd(e)
                        }), this.draggableLib = c
                    }
                }, {
                    key: "componentDidUpdate",
                    value: function(e) {
                        var n = this.props.draggableConfig || {},
                            r = e.draggableConfig || {};
                        n.constrain && r.constrain !== n.constrain && this.draggableLib.setConstrain(n.constrain)
                    }
                }, {
                    key: "componentWillUnmount",
                    value: function() {
                        this.draggableLib && this.draggableLib.disable()
                    }
                }, {
                    key: "render",
                    value: function() {
                        var n = this.props,
                            r = e.Children.only(n.children),
                            t = e.cloneElement(r, {
                                ref: a
                            });
                        return t
                    }
                }, {
                    key: "_findHandles",
                    value: function(n) {
                        var r = this,
                            t = [];
                        return e.Children.forEach(n, function(e) {
                            if (e && e.type === l.DraggableHandle && t.push(e), e && e.props) {
                                var n = r._findHandles(e.props.children);
                                t = t.concat(n)
                            }
                        }), t
                    }
                }, {
                    key: "_moveElement",
                    value: function(e) {
                        var n = e.clientX,
                            r = e.clientY,
                            a = e.dragTarget,
                            o = e.pointerOffsetX,
                            l = e.pointerOffsetY;
                        t.moveElement(a, n - o, r - l)
                    }
                }]), l
            }(e.Component),
            l = e.PropTypes;
        o.propTypes = {
                children: l.element.isRequired,
                draggableConfig: l.shape({
                    constrain: l.oneOf(["vertical", "horizontal"]),
                    container: l.instanceOf(r.win.HTMLDivElement),
                    autoScroll: l.bool,
                    minDistance: l.number,
                    scrollMargin: l.number,
                    touchDelay: l.number
                }),
                onDrag: l.func,
                onDragEnd: l.func
            }, o.defaultProps = {
                onDrag: function() {},
                onDragEnd: function() {}
            }, module.exports = exports = o,
            function() {
                var e = SM["import"]("react"),
                    n = function(n) {
                        function r() {
                            return babelHelpers.classCallCheck(this, r), babelHelpers.possibleConstructorReturn(this, (r.__proto__ || Object.getPrototypeOf(r)).apply(this, arguments))
                        }
                        return babelHelpers.inherits(r, n), babelHelpers.createClass(r, [{
                            key: "render",
                            value: function() {
                                var n = this.props;
                                return e.createElement("div", babelHelpers["extends"]({
                                    className: "sm-component-draggable-handle"
                                }, n), n.children)
                            }
                        }]), r
                    }(e.Component);
                exports.DraggableHandle = n
            }()
    }(), SM.currentModule = null
}, "", {
    requires: ["react", "react-dom", "sm", "sm-dom", "sm-draggable", "lodash"]
});
YUI.add("sm-component-dropdown", function(e) {
    SM.currentModule = "sm-component-dropdown";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        ! function() {
            var e = SM["import"]("sm-component-pure-render"),
                n = SM["import"]("react"),
                t = SM["import"]("react-dom"),
                o = SM["import"]("lodash"),
                r = SM["import"]("sm-dom"),
                i = "DropdownComponent",
                l = 5,
                a = function(e) {
                    function o(e) {
                        babelHelpers.classCallCheck(this, o);
                        var n = babelHelpers.possibleConstructorReturn(this, (o.__proto__ || Object.getPrototypeOf(o)).call(this, e)),
                            t = 0,
                            r = e.defaultValue;
                        return r && (t = n._findIndexOf(e.children, r)), n.state = {
                            open: !1,
                            highlight: t,
                            value: t
                        }, n
                    }
                    return babelHelpers.inherits(o, e), babelHelpers.createClass(o, [{
                        key: "componentWillReceiveProps",
                        value: function(e) {
                            var n = this._findIndexOf(e.children, e.defaultValue);
                            this.setState({
                                value: n,
                                highlight: n
                            })
                        }
                    }, {
                        key: "componentDidUpdate",
                        value: function(e, o) {
                            var l = this.state,
                                a = l.open,
                                s = l.highlight,
                                p = n.Children.count(this.props.children) - 1;
                            if (!o.open && a || o.highlight !== s) {
                                var c = t.findDOMNode(this.refs[i]),
                                    h = r.querySelector('.sm-component-dropdown-option[data-index="' + s + '"]', c);
                                h || (o.highlight > s && s > 0 ? this.setState({
                                    highlight: s - 1
                                }) : o.highlight < s && p > s && this.setState({
                                    highlight: s + 1
                                }))
                            }
                        }
                    }, {
                        key: "render",
                        value: function() {
                            var e = this.props,
                                t = {
                                    onBlur: this._onBlurHandler.bind(this),
                                    onDropdownClick: this._onDropdownClickHandler.bind(this),
                                    onFocus: this._onFocusHandler.bind(this),
                                    onKeyDown: this._onKeyPressHandler.bind(this),
                                    onOptionClick: this._onOptionClickHandler.bind(this),
                                    onOptionHover: this._onOptionHoverHandler.bind(this)
                                };
                            return n.createElement(exports.Dropdown, babelHelpers["extends"]({}, e, t, {
                                open: this.state.open,
                                highlight: this.state.highlight,
                                value: this.state.value,
                                ref: i
                            }), e.children)
                        }
                    }, {
                        key: "_findIndexOf",
                        value: function(e, t) {
                            var o = 0,
                                r = 0,
                                i = !1;
                            return n.Children.forEach(e, function(e) {
                                !i && e && e.props.value === t && (o = r, i = !0), e && r++
                            }), o
                        }
                    }, {
                        key: "_onBlurHandler",
                        value: function() {
                            var e = this;
                            this._blurTimeout && clearTimeout(this._blurTimeout), this._blurTimer = setTimeout(function() {
                                e.setState({
                                    open: !1
                                })
                            }, 200)
                        }
                    }, {
                        key: "_onDropdownClickHandler",
                        value: function() {
                            this.setState({
                                open: !this.state.open
                            })
                        }
                    }, {
                        key: "_onFocusHandler",
                        value: function() {
                            this._blurTimeout && clearTimeout(this._blurTimeout)
                        }
                    }, {
                        key: "_onKeyPressHandler",
                        value: function(e) {
                            var t = e.key,
                                o = parseInt(this.state.highlight, 10),
                                r = n.Children.count(this.props.children) - 1,
                                i = o,
                                a = this.state.value,
                                s = !0,
                                p = !0;
                            switch (t) {
                                case "ArrowDown":
                                    i = r > o ? o + 1 : o;
                                    break;
                                case "ArrowUp":
                                    i = o > 0 ? o - 1 : o;
                                    break;
                                case "PageDown":
                                    i = o + l > r ? r : o + l;
                                    break;
                                case "PageUp":
                                    i = 0 > o - l ? 0 : o - l;
                                    break;
                                case "Escape":
                                    i = a, s = !1;
                                    break;
                                case " ":
                                case "Enter":
                                    this.state.open && a !== i && (a = i), s = !this.state.open;
                                    break;
                                default:
                                    p = !1
                            }
                            p && (this.setState({
                                highlight: i,
                                value: a,
                                open: s
                            }), e.preventDefault())
                        }
                    }, {
                        key: "_onOptionClickHandler",
                        value: function(e, n) {
                            this.setState({
                                value: n,
                                open: !1
                            })
                        }
                    }, {
                        key: "_onOptionHoverHandler",
                        value: function(e, n) {
                            n >= 0 && this.setState({
                                highlight: n
                            })
                        }
                    }]), o
                }(e),
                s = n.PropTypes;
            a.propTypes = {
                className: s.oneOfType([s.arrayOf(s.string), s.string]),
                disabled: s.bool,
                fallback: s.bool,
                onSelectionChange: s.func,
                defaultValue: s.string,
                size: s.oneOf(["small", "large"]),
                width: s.string
            }, a.defaultProps = {
                disabled: !1,
                onSelectionChange: o.noop,
                fallback: !1,
                defaultValue: "",
                size: "small",
                width: "300px"
            }, module.exports = exports = a
        }(), ! function() {
            var e = SM["import"]("sm-component-pure-render"),
                n = SM["import"]("react"),
                t = SM["import"]("react-dom"),
                o = SM["import"]("sm-component-button"),
                r = SM["import"]("sm-component-icon"),
                i = SM["import"]("lodash"),
                l = SM["import"]("classnames"),
                a = SM["import"]("sm-component-select"),
                s = a.Select,
                p = a.SelectOption,
                c = SM["import"]("sm-dom"),
                h = "DropdownButton",
                d = "DropdownList",
                u = function(e) {
                    function a(e) {
                        babelHelpers.classCallCheck(this, a);
                        var n = babelHelpers.possibleConstructorReturn(this, (a.__proto__ || Object.getPrototypeOf(a)).call(this, e));
                        return n._populateInternalChildren(e), n._handleMouseOver = n._handleMouseOver.bind(n), n._onFallbackSelectionChange = n._onFallbackSelectionChange.bind(n), n
                    }
                    return babelHelpers.inherits(a, e), babelHelpers.createClass(a, [{
                        key: "componentDidUpdate",
                        value: function(e) {
                            var n = this.props,
                                o = n.fallback,
                                r = n.onSelectionChange,
                                i = this.props,
                                l = i.open,
                                a = i.highlight,
                                s = i.value;
                            o || e.open === l || this._focusSelectButton();
                            var p = t.findDOMNode(this.refs[d]);
                            if (!e.open && l || e.highlight !== a) {
                                var h = c.querySelector('.sm-component-dropdown-option[data-index="' + a + '"]', p);
                                h && c.scrollIntoViewIfNeeded(h, !1)
                            }
                            if (e.value !== s && !this.props.fallback) {
                                var u = c.querySelector('.sm-component-dropdown-option[data-index="' + s + '"]', p);
                                if (u) {
                                    var m = u.getAttribute("data-value");
                                    (m || "" === m) && r(m)
                                }
                            }
                        }
                    }, {
                        key: "componentWillReceiveProps",
                        value: function(e) {
                            this._populateInternalChildren(e)
                        }
                    }, {
                        key: "render",
                        value: function() {
                            var e = this.props;
                            return e.fallback ? this._renderFallback() : this._renderCustom()
                        }
                    }, {
                        key: "_renderCustom",
                        value: function() {
                            var e = this.props,
                                t = ["sm-component-dropdown", e.className],
                                a = ["sm-form-field", "sm-form-field-select-wrapper", {
                                    "sm-form-field-error": e.error
                                }, {
                                    "sm-nochrome": e.noChrome
                                }],
                                s = ["sm-form-field-select", {
                                    "sm-form-field-select-large": "large" === e.size
                                }],
                                p = ["sm-form-field-select-arrow", {
                                    "sm-form-field-select-arrow-large": "large" === e.size
                                }],
                                c = this.internalChildren[this.props.value],
                                d = void 0;
                            c && (d = n.cloneElement(c, {
                                onClick: i.noop()
                            }));
                            var u = function(e) {
                                e.preventDefault()
                            };
                            return n.createElement("div", {
                                className: l(t),
                                style: {
                                    width: e.width
                                }
                            }, n.createElement("div", {
                                className: l(a)
                            }, n.createElement(o, {
                                "aria-expanded": e.open,
                                className: l(s),
                                disabled: e.disabled,
                                noChrome: !0,
                                onBlur: e.onBlur,
                                onFocus: e.onFocus,
                                onKeyDown: e.onKeyDown,
                                onMouseDown: u,
                                onMouseUp: e.onDropdownClick,
                                ref: h,
                                role: "combobox",
                                size: e.size,
                                tabIndex: 0
                            }, d), n.createElement(r, {
                                icon: "AngleBracketDown",
                                className: l(p),
                                size: e.size
                            })), this.props.open && this._renderList())
                        }
                    }, {
                        key: "_renderFallback",
                        value: function() {
                            var e = this.props,
                                t = (e.fallback, e.highlight, e.onDropdownClick, e.onKeyDown, e.onOptionClick, e.onOptionHover, e.onSelectionChange, e.children),
                                o = e.value,
                                r = babelHelpers.objectWithoutProperties(e, ["fallback", "highlight", "onDropdownClick", "onKeyDown", "onOptionClick", "onOptionHover", "onSelectionChange", "children", "value"]);
                            return t = n.Children.map(t, function(e) {
                                var t = "";
                                n.Children.forEach(e.props.children, function(e) {
                                    "object" !== ("undefined" == typeof e ? "undefined" : babelHelpers["typeof"](e)) && (t += e)
                                });
                                var o = n.createElement(p, {
                                    disabled: e.props.disabled
                                }, t);
                                return o
                            }), n.createElement(s, babelHelpers["extends"]({
                                value: o,
                                onChange: this._onFallbackSelectionChange
                            }, r), t)
                        }
                    }, {
                        key: "_renderList",
                        value: function() {
                            var e = this.internalChildren.slice(),
                                t = this.internalChildren[this.props.value];
                            t && (e[this.props.value] = n.cloneElement(t, {
                                "data-highlight": !0
                            }));
                            var o = this.internalChildren[this.props.highlight];
                            return o && (e[this.props.highlight] = n.cloneElement(o, {
                                "data-highlight": !0
                            })), n.createElement("ul", {
                                className: "sm-component-dropdown-list",
                                role: "listbox",
                                onMouseOver: this._handleMouseOver,
                                ref: d
                            }, e)
                        }
                    }, {
                        key: "_handleMouseOver",
                        value: function(e) {
                            var n = -1,
                                t = e.target;
                            if (t) {
                                var o = c.closest(t, "li");
                                if (!o) return;
                                n = o.getAttribute("data-index")
                            }
                            this.props.onOptionHover(e, parseInt(n, 10))
                        }
                    }, {
                        key: "_handleMouseClick",
                        value: function(e) {
                            var n = void 0,
                                t = e.currentTarget;
                            n = t ? t.getAttribute("data-index") : e.target.getAttribute("data-index"), n = parseInt(n, 10), this.props.onOptionClick(e, n), this._focusSelectButton(), e.preventDefault()
                        }
                    }, {
                        key: "_onFallbackSelectionChange",
                        value: function(e) {
                            var n = e.target;
                            n && (this.props.onOptionClick(e, n.value), this.props.onSelectionChange(n.value))
                        }
                    }, {
                        key: "_focusSelectButton",
                        value: function() {
                            this.refs[h] && (t.findDOMNode(this.refs[h]).focus(), this.props.onFocus())
                        }
                    }, {
                        key: "_populateInternalChildren",
                        value: function(e) {
                            var t = this,
                                o = this._handleMouseClick.bind(this),
                                r = 0;
                            this.internalChildren = [], n.Children.forEach(e.children, function(e) {
                                var i = void 0;
                                e && (i = e.props.disabled ? e : n.cloneElement(e, {
                                    onClick: o,
                                    "data-index": r,
                                    "data-value": e.props.value,
                                    key: r,
                                    role: "option"
                                }), r++, t.internalChildren.push(i))
                            })
                        }
                    }]), a
                }(e),
                m = n.PropTypes;
            u.propTypes = {
                className: m.oneOfType([m.arrayOf(m.string), m.string]),
                disabled: m.bool,
                fallback: m.bool,
                highlight: m.number,
                onDropdownClick: m.func,
                onKeyDown: m.func,
                onOptionClick: m.func,
                onOptionHover: m.func,
                onSelectionChange: m.func,
                size: m.oneOf(["small", "large"]),
                value: m.oneOfType([m.number, m.string]),
                width: m.string
            }, u.defaultProps = {
                disabled: !1,
                onBlur: i.noop,
                onFocus: i.noop,
                onKeyDown: i.noop,
                onOptionHover: i.noop,
                onSelectionChange: i.noop,
                fallback: !1,
                size: "small",
                width: "300px",
                highlight: 0,
                value: 0
            }, exports.Dropdown = u
        }(), ! function() {
            var e = SM["import"]("react"),
                n = SM["import"]("classnames"),
                t = function(t) {
                    function o() {
                        return babelHelpers.classCallCheck(this, o), babelHelpers.possibleConstructorReturn(this, (o.__proto__ || Object.getPrototypeOf(o)).apply(this, arguments))
                    }
                    return babelHelpers.inherits(o, t), babelHelpers.createClass(o, [{
                        key: "render",
                        value: function() {
                            var t = void 0,
                                o = void 0,
                                r = void 0,
                                i = void 0,
                                l = babelHelpers["extends"]({}, this.props),
                                a = ["sm-component-dropdown-option", t];
                            return e.createElement("li", babelHelpers["extends"]({
                                className: n(a),
                                "data-highlight": o,
                                "data-value": r,
                                "data-disabled": i
                            }, l), l.children)
                        }
                    }]), o
                }(e.Component),
                o = e.PropTypes;
            t.proptypes = {
                value: o.string,
                disabled: o.bool
            }, t.defaultProps = {
                disabled: !1
            }, exports.DropdownOption = t
        }()
    }(), SM.currentModule = null
}, "", {
    requires: ["react", "react-dom", "sm", "sm-dom", "classnames", "lodash", "sm-component-pure-render", "sm-component-button", "sm-component-icon", "sm-component-select"]
});
YUI.add("sm-component-icon", function(e) {
    SM.currentModule = "sm-component-icon";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        var e = SM["import"]("classnames"),
            r = SM["import"]("sm-component-pure-render"),
            s = SM["import"]("react"),
            t = function(r) {
                function t() {
                    return babelHelpers.classCallCheck(this, t), babelHelpers.possibleConstructorReturn(this, (t.__proto__ || Object.getPrototypeOf(t)).apply(this, arguments))
                }
                return babelHelpers.inherits(t, r), babelHelpers.createClass(t, [{
                    key: "render",
                    value: function() {
                        var r = this.props,
                            t = r.className,
                            n = r.icon,
                            o = babelHelpers.objectWithoutProperties(r, ["className", "icon"]),
                            a = e("sm-fonticon", "sm-fonticon-" + o.size, "sm-fonticon-" + n, t);
                        return s.createElement("span", babelHelpers["extends"]({
                            className: a
                        }, o))
                    }
                }]), t
            }(r),
            n = s.PropTypes;
        t.propTypes = {
            className: n.string,
            icon: n.string.isRequired,
            size: n.oneOf(["large", "small", "xlarge"])
        }, t.defaultProps = {
            size: "large"
        }, module.exports = t
    }(), SM.currentModule = null
}, "", {
    requires: ["classnames", "react", "react-dom", "sm", "sm-component-pure-render"]
});
YUI.add("sm-component-image", function(e) {
    SM.currentModule = "sm-component-image";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        "use strict";
        var s = (e.namespace("SM.Component"), SM["import"]("react")),
            r = s.PropTypes,
            t = SM["import"]("sm-imagesrcconfig"),
            i = SM["import"]("classnames"),
            a = s.createClass({
                displayName: "AspectRatio",
                propTypes: {
                    value: r.oneOfType([r.number.isRequired, r.oneOf(Object.keys(t.aspectRatio)).isRequired])
                },
                render: function() {
                    var e, r = this.props,
                        t = a.toNumber(r.value);
                    return t && (e = {
                        paddingBottom: 100 / t + "%"
                    }), s.createElement("div", {
                        className: r.className,
                        style: r.style
                    }, s.createElement("div", {
                        className: "sm-image-aspect-ratio",
                        style: e
                    }, r.children))
                },
                statics: {
                    toNumber: function(e) {
                        return "number" == typeof e ? e : t.aspectRatio[e]
                    }
                }
            });
        exports.AspectRatio = a;
        var n = function(e) {
            var r = e.children,
                t = e.processing,
                i = e.src,
                a = e.style,
                n = babelHelpers.objectWithoutProperties(e, ["children", "processing", "src", "style"]);
            if (t) return s.createElement("div", {
                className: "sm-image-processing"
            }, s.createElement(c, {
                className: "sm-image-processing-icon",
                icon: "ImageProcessing2"
            }), s.createElement("p", {
                className: "sm-image-processing-label"
            }, "Processing..."));
            var o = Object.assign({}, a, {
                backgroundImage: "url(" + i.url + ")"
            });
            return s.createElement("div", babelHelpers["extends"]({}, n, {
                style: o
            }), r)
        };
        n.propTypes = {
            processing: r.bool,
            src: r.shape({
                url: r.string.isRequired,
                width: r.number,
                height: r.number
            }).isRequired,
            style: r.object
        }, e.namespace("SM.Component").BackgroundImage = exports.BackgroundImage = n;
        var o = s.createClass({
            displayName: "ForegroundImage",
            propTypes: {
                processing: r.bool,
                src: r.shape({
                    url: r.string.isRequired,
                    width: r.number,
                    height: r.number
                }).isRequired
            },
            render: function() {
                var e = this.props.src;
                return s.createElement(p, babelHelpers["extends"]({}, this.props, {
                    src: e && e.url || "/img/spacer.gif"
                }))
            }
        });
        exports.ForegroundImage = o, e.namespace("SM.Component").ForegroundImage = o;
        var m = function() {
            var e = document.createElement("div"),
                s = ["ms", "Webkit", "Moz", "O"],
                r = "undefined" != typeof e.style.transform;
            if (!r)
                for (var t, i = 0; t = s[i]; i++)
                    if ("undefined" != typeof e.style[t + "Transform"]) {
                        r = !0;
                        break
                    }
            return e = null, r
        }();
        exports.CroppedImage = s.createClass({
            displayName: "CroppedImage",
            propTypes: {
                src: r.shape({
                    url: r.string.isRequired,
                    width: r.number.isRequired,
                    height: r.number.isRequired
                }).isRequired,
                upscale: r.bool
            },
            getDefaultProps: function() {
                return {
                    upscale: !1
                }
            },
            render: function() {
                return s.createElement(a, {
                    className: this.props.className,
                    style: this.props.style,
                    value: this.props.aspectRatio
                }, s.createElement(o, {
                    className: this._getImageClassName(),
                    src: this.props.src,
                    processing: this.props.processing
                }), this.props.children)
            },
            _getImageClassName: function() {
                var e = a.toNumber(this.props.aspectRatio),
                    s = this.props.src,
                    r = this.props.upscale;
                return s ? i(e > s.width / s.height ? {
                    "sm-image-center-vertical": m,
                    "sm-image-fit-width": !r,
                    "sm-image-full-width": r
                } : {
                    "sm-image-center-horizontal": m,
                    "sm-image-fit-height": !r,
                    "sm-image-full-height": r
                }) : ""
            }
        }), e.namespace("SM.Component").CroppedImage = exports.CroppedImage, exports.ProtectedImage = s.createClass({
            displayName: "ProtectedImage",
            propTypes: {
                processing: r.bool,
                src: r.shape({
                    url: r.string.isRequired,
                    width: r.number.isRequired,
                    height: r.number.isRequired
                }).isRequired,
                style: r.shape({
                    height: r.number,
                    maxHeight: r.number,
                    maxWidth: r.number,
                    width: r.number
                })
            },
            getDefaultProps: function() {
                return {
                    style: {}
                }
            },
            _getStyle: function() {
                var e = this.props.src,
                    r = this.props.style,
                    i = r.height,
                    a = r.width;
                if (!e) return r;
                if (r.maxWidth || r.maxHeight) {
                    var n = t.fitInDimensions(e, r.maxWidth, r.maxHeight);
                    (!i || i > n.height) && (i = n.height), (!a || a > n.width) && (a = n.width)
                }
                return i || (i = e.height), a || (a = e.width), s.addons.update(r, {
                    $merge: {
                        backgroundImage: "url(" + e.url + ")",
                        backgroundSize: a + "px " + i + "px",
                        height: i,
                        width: a
                    },
                    maxWidth: {
                        $set: null
                    },
                    maxHeight: {
                        $set: null
                    }
                })
            },
            render: function() {
                return s.createElement(p, babelHelpers["extends"]({}, this.props, {
                    src: "/img/spacer.gif",
                    style: this._getStyle(),
                    processing: this.props.processing
                }))
            }
        }), e.namespace("SM.Component").ProtectedImage = exports.ProtectedImage;
        var c = SM["import"]("sm-component-icon"),
            p = function(e) {
                var r = e.processing,
                    t = e.src,
                    i = babelHelpers.objectWithoutProperties(e, ["processing", "src"]);
                return r ? s.createElement("div", {
                    className: "sm-image-processing sm-flex sm-flex-column sm-flex-justify-center sm-flex-items-center"
                }, s.createElement(c, {
                    className: "sm-image-processing-icon",
                    icon: "ImageProcessing2"
                }), s.createElement("p", {
                    className: "sm-image-processing-label"
                }, "Processing...")) : s.createElement("img", babelHelpers["extends"]({}, i, {
                    src: t || "/img/spacer.gif"
                }))
            };
        p.propTypes = {
            src: r.string,
            processing: r.bool
        }, exports.ProcessingImage = p
    }(), SM.currentModule = null
}, "", {
    requires: ["classnames", "react", "sm", "sm-imagesrcconfig", "sm-component-icon"]
});
YUI.add("sm-component-inlinenumber", function(e) {
    SM.currentModule = "sm-component-inlinenumber";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        var e = SM["import"]("react"),
            n = SM["import"]("sm-component-textbox"),
            t = e.createClass({
                displayName: "InlineNumber",
                propTypes: {
                    units: e.PropTypes.string
                },
                defaultProps: {
                    units: ""
                },
                _isAllowedKey: function(e) {
                    return e >= 48 && 57 >= e || e >= 96 && 105 >= e || 8 === e || 46 === e || 39 === e || 37 === e || 13 === e
                },
                _onKeyDown: function(e) {
                    var n = e.keyCode;
                    this._isAllowedKey(n) || (e.preventDefault(), e.stopPropagation())
                },
                render: function() {
                    return e.createElement("span", {
                        className: "sm-form-field-inlinetext-container"
                    }, e.createElement("span", {
                        className: "sm-form-field-text-label sm-form-field-text-label-right sm-nochrome"
                    }, e.createElement(n, babelHelpers["extends"]({
                        noChrome: !0,
                        onKeyDown: this._onKeyDown
                    }, this.props)), this.props.units && e.createElement("span", {
                        className: "sm-form-field-label"
                    }, this.props.units)))
                }
            });
        module.exports = exports = t
    }(), SM.currentModule = null
}, "", {
    requires: ["sm", "react", "sm-component-textbox"]
});
YUI.add("sm-component-label", function(e) {
    SM.currentModule = "sm-component-label";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        var s = SM["import"]("react"),
            r = SM["import"]("classnames"),
            a = s.createClass({
                displayName: "Label",
                propTypes: {},
                render: function() {
                    var e = {
                            "sm-label": !0
                        },
                        a = this.props,
                        l = a.className,
                        t = babelHelpers.objectWithoutProperties(a, ["className"]);
                    return l && (e[l] = !0), s.createElement("label", babelHelpers["extends"]({}, t, {
                        className: r(e)
                    }), this.props.children)
                }
            });
        e.namespace("SM.Component").Label = a, module.exports = a
    }(), SM.currentModule = null
}, "", {
    requires: ["classnames", "sm", "react"]
});
YUI.add("sm-component-menu", function(e) {
    SM.currentModule = "sm-component-menu";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        ! function() {
            var e, t = SM["import"]("lodash"),
                n = SM["import"]("sm-dom"),
                i = SM["import"]("react"),
                o = SM["import"]("react-dom"),
                s = ["tl-bl", "tr-br", "bl-tl", "br-tr", "tr-bl", "tl-br", "br-tl", "bl-tr"],
                r = ["tl-tr", "bl-br", "tr-tl", "br-bl", "tl-br", "bl-tr", "tr-bl", "br-tl"],
                a = ["tl-bl", "tr-br", "bl-tl", "br-tr"],
                u = i.PropTypes;
            e = i.createClass({
                displayName: "Menu",
                mixins: [i.addons.PureRenderMixin],
                propTypes: {
                    alignments: u.arrayOf(u.string),
                    anchor: u.oneOfType([u.element, u.instanceOf(n.win.Element), u.arrayOf(u.number), function(e, t) {
                        return e[t].isReactComponent ? void 0 : new Error(t + " isn't a React component.")
                    }]),
                    className: u.string,
                    initiallyVisible: u.bool,
                    orientation: u.oneOf(["vertical", "horizontal"])
                },
                componentDidMount: function() {
                    this.props.isSubmenu || this.props.initiallyVisible || (n.classList(n.doc.documentElement).contains("sm-platform-ios") && (this._oldBodyCursorStyle = n.doc.body.style.cursor, n.doc.body.style.cursor = "pointer"), n.doc.addEventListener("mousedown", this._handleDocMouseDown))
                },
                componentWillUnmount: function() {
                    n.classList(n.doc.documentElement).contains("sm-platform-ios") && (n.doc.body.style.cursor = this._oldBodyCursorStyle), n.doc.removeEventListener("mousedown", this._handleDocMouseDown)
                },
                getDefaultProps: function() {
                    return {
                        orientation: "vertical"
                    }
                },
                getInitialState: function() {
                    return {
                        visible: !!this.props.initiallyVisible
                    }
                },
                render: function() {
                    var e = ["sm-component-menu"],
                        t = this.props;
                    return t.className && e.push(t.className), i.createElement("ol", {
                        "aria-expanded": this.state.visible || null,
                        className: e.join(" "),
                        "data-initially-visible": t.initiallyVisible || null,
                        onBlur: this._handleBlur,
                        onFocus: this._handleFocus,
                        onKeyDown: this._handleKeyDown,
                        role: "horizontal" === t.orientation ? "menubar" : "menu"
                    }, this.renderChildren())
                },
                renderChildren: function() {
                    if (this._itemRefs = [], this._radioGroups = {}, !this.state.visible) return null;
                    var n = 0,
                        o = this.props;
                    return i.Children.map(o.children, function(s) {
                        if (e.Item === s.type) {
                            if (s.props.hidden) return null;
                            var r;
                            if (r = {
                                    index: n,
                                    initiallyFocusable: 0 === n,
                                    onChange: t.bind(this._handleItemChange, this, s.props.onChange),
                                    onChooseSubmenuAlignments: this._handleChooseSubmenuAlignments,
                                    onCloseHierarchy: this._handleCloseHierarchy,
                                    onFocus: this._handleItemFocus,
                                    parentOrientation: o.orientation,
                                    ref: "item" + n
                                }, this._itemRefs[n] = r.ref, "radio" === s.props.type) {
                                var a = s.props.radioGroup;
                                this._radioGroups[a] || (this._radioGroups[a] = []), this._radioGroups[a].push(r.ref)
                            }
                            s = i.cloneElement(s, r), n += 1
                        }
                        return s
                    }, this)
                },
                hide: function(e) {
                    return clearTimeout(this._blurTimeout), this._currentRankedMenuRects = null, this.setState({
                        visible: !1
                    }, function() {
                        var t = o.findDOMNode(this);
                        t.style.left = null, t.style.top = null, e && e.returnFocus && this.props.onReturnFocus && this.props.onReturnFocus(), this._itemRefs.forEach(function(e, t) {
                            this.refs[e].setState({
                                focusable: 0 === t
                            })
                        }, this)
                    }), this
                },
                reposition: function(e) {
                    var i = e && e.anchor || this.props.anchor;
                    if (!i) return this;
                    var r;
                    r = t.isArray(i) ? {
                        bottom: i[1],
                        height: 0,
                        left: i[0],
                        right: i[0],
                        top: i[1],
                        width: 0
                    } : n.getAbsoluteBoundingRect(o.findDOMNode(i) || i);
                    var a, u = this.props;
                    a = u.isSubmenu ? u.onChooseSubmenuAlignments(this) : u.alignments || s;
                    var l = o.findDOMNode(this),
                        c = n.getAbsoluteBoundingRect(l),
                        h = this._getRankedMenuRects(a, c, r);
                    return u.isSubmenu && u.parentOrientation !== u.orientation || (this._currentRankedMenuRects = h), n.setPosition(l, h[0].rect), this
                },
                show: function(e) {
                    return clearTimeout(this._blurTimeout), this.setState({
                        visible: !0
                    }, function() {
                        this.reposition(e), e && e.focus && o.findDOMNode(this._getFocusableItem()).focus()
                    }), this
                },
                toggle: function(e) {
                    return this.state.visible ? this.hide() : this.show(e)
                },
                _getFocusableItem: function() {
                    for (var e, t = this._itemRefs, n = 0, i = t.length; i > n; ++n)
                        if (e = this.refs[t[n]], e.state.focusable) return e
                },
                _getNextItem: function(e) {
                    var t = e.props.index + 1;
                    return t === this._itemRefs.length && (t = 0), this.refs[this._itemRefs[t]]
                },
                _getPredictedMenuRect: function(e, t, n) {
                    var i, o = {};
                    return i = {
                        b: "bottom",
                        l: "left",
                        r: "right",
                        t: "top"
                    }, e.replace(/^([bt])([lr])-([bt])([lr])/i, function(e, t, s, r, a) {
                        o[i[t]] = n[i[r]], o[i[s]] = n[i[a]]
                    }), "bottom" in o || (o.bottom = o.top + t.height), "left" in o || (o.left = o.right - t.width), "right" in o || (o.right = o.left + t.width), "top" in o || (o.top = o.bottom - t.height), o.left < 0 && (o.right += Math.abs(o.left), o.left = 0), o.top < 0 && (o.bottom += Math.abs(o.top), o.top = 0), o
                },
                _getPrevItem: function(e) {
                    var t = 0 === e.props.index ? this._itemRefs.length - 1 : e.props.index - 1;
                    return this.refs[this._itemRefs[t]]
                },
                _getRankedMenuRects: function(e, i, o) {
                    var s, r = n.getViewportRect();
                    return s = t.map(e, function(e) {
                        e.alignment && (e = e.alignment);
                        var t = this._getPredictedMenuRect(e, i, o);
                        return {
                            alignment: e,
                            rect: t,
                            score: this._inRect(t, r)
                        }
                    }, this), s.sort(function(e, t) {
                        return e.score === t.score ? 0 : e.score === !0 ? -1 : t.score === !0 ? 1 : t.score - e.score
                    }), s
                },
                _inRect: function(e, t) {
                    return e.bottom <= t.bottom && e.left >= t.left && e.right <= t.right && e.top >= t.top ? !0 : Math.min(t.bottom - e.bottom, 0) + Math.min(e.left - t.left, 0) + Math.min(t.right - e.right, 0) + Math.min(e.top - t.top, 0)
                },
                _handleBlur: function() {
                    clearTimeout(this._blurTimeout);
                    var e = this;
                    this._blurTimeout = setTimeout(function() {
                        e.state.visible && !e.props.initiallyVisible && e.hide()
                    }, 200)
                },
                _handleChooseSubmenuAlignments: function(e) {
                    return "horizontal" === this.props.orientation ? a : this._currentRankedMenuRects ? this._currentRankedMenuRects : e.props.alignments || r
                },
                _handleCloseHierarchy: function() {
                    var e = this.props;
                    e.initiallyVisible || this.hide({
                        returnFocus: !0
                    }), e.onCloseHierarchy && e.onCloseHierarchy()
                },
                _handleDocMouseDown: function(e) {
                    if (this.state.visible) {
                        var t, i = o.findDOMNode(this);
                        t = n.closest(e.target, function(e) {
                            return e === i
                        }), t || this.hide()
                    }
                },
                _handleFocus: function() {
                    clearTimeout(this._blurTimeout)
                },
                _handleItemChange: function(e, t) {
                    var n = t.item.props;
                    if ("radio" === n.type && t.checked) {
                        var i = this._radioGroups[n.radioGroup];
                        if (!i) throw new Error("<Menu.Item> of type 'radio' has no associated radio group.");
                        i.forEach(function(e) {
                            var n = this.refs[e];
                            n.state.checked && n !== t.item && n.setState({
                                checked: !1
                            })
                        }, this)
                    }
                    e && e(t)
                },
                _handleItemFocus: function(e) {
                    var t = e.item,
                        n = this._itemRefs;
                    n.forEach(function(e) {
                        var n = this.refs[e];
                        n.setState({
                            focusable: n === t
                        })
                    }, this)
                },
                _handleKeyDown: function(e) {
                    var t = " " === e.key ? "Space" : e.key,
                        n = "_key" + t;
                    this[n] && this[n](e)
                },
                _keyArrowDown: function(e) {
                    e.preventDefault(), e.stopPropagation();
                    var t = this._getFocusableItem();
                    "vertical" === this.props.orientation ? o.findDOMNode(this._getNextItem(t)).focus() : t.refs.submenu && !t.props.disabled && t.refs.submenu.show({
                        focus: !0
                    })
                },
                _keyArrowLeft: function(e) {
                    e.preventDefault(), e.stopPropagation();
                    var t = this._getFocusableItem();
                    "vertical" === this.props.orientation ? this.props.initiallyVisible || this.hide({
                        returnFocus: !0
                    }) : o.findDOMNode(this._getPrevItem(t)).focus()
                },
                _keyArrowRight: function(e) {
                    e.preventDefault(), e.stopPropagation();
                    var t = this._getFocusableItem();
                    "vertical" === this.props.orientation ? t.refs.submenu && !t.props.disabled && t.refs.submenu.show({
                        focus: !0
                    }) : o.findDOMNode(this._getNextItem(t)).focus()
                },
                _keyArrowUp: function(e) {
                    e.preventDefault(), e.stopPropagation();
                    var t = this._getFocusableItem();
                    "vertical" === this.props.orientation && o.findDOMNode(this._getPrevItem(t)).focus()
                },
                _keyEnter: function(e) {
                    e.preventDefault(), e.stopPropagation(), this._getFocusableItem()._handleClick({
                        focus: !0
                    })
                },
                _keyEscape: function(e) {
                    e.preventDefault(), e.stopPropagation(), this.props.initiallyVisible || this.hide({
                        returnFocus: !0
                    })
                },
                _keySpace: function(e) {
                    e.preventDefault(), e.stopPropagation();
                    var t = this._getFocusableItem();
                    t.refs.submenu && !t.props.disabled && t.refs.submenu.show({
                        focus: !0
                    })
                }
            }), module.exports = e
        }(),
        function() {
            var e = SM["import"]("react");
            module.exports.Heading = e.createClass({
                displayName: "Menu.Heading",
                mixins: [e.addons.PureRenderMixin],
                propTypes: {
                    className: e.PropTypes.string
                },
                render: function() {
                    var t = ["sm-component-menu-heading"],
                        n = this.props;
                    return n.className && t.push(n.className), e.createElement("li", {
                        className: t.join(" "),
                        onClick: this._handleClick,
                        role: "separator"
                    }, e.createElement("span", {
                        role: "heading"
                    }, n.children))
                },
                _handleClick: function(e) {
                    e.stopPropagation()
                }
            })
        }(),
        function() {
            var e = SM["import"]("react"),
                t = SM["import"]("react-dom"),
                n = module.exports,
                i = e.PropTypes;
            n.Item = e.createClass({
                displayName: "Menu.Item",
                mixins: [e.addons.PureRenderMixin],
                propTypes: {
                    className: i.string,
                    disabled: i.bool,
                    hidden: i.bool,
                    initiallyChecked: i.bool,
                    onChange: i.func,
                    onClick: i.func,
                    radioGroup: i.string,
                    type: i.oneOf(["default", "checkbox", "radio"])
                },
                componentDidUpdate: function(e, t) {
                    var n = this.props,
                        i = this.state;
                    i.checked !== t.checked && n.onChange && n.onChange({
                        checked: i.checked,
                        item: this
                    })
                },
                getDefaultProps: function() {
                    return {
                        radioGroup: "default",
                        type: "default"
                    }
                },
                getInitialState: function() {
                    var e = this.props;
                    return {
                        checked: !!e.initiallyChecked,
                        focusable: !!e.initiallyFocusable
                    }
                },
                render: function() {
                    var t = this.renderChildren(),
                        n = ["sm-component-menu-item"],
                        i = this.props,
                        o = this.state;
                    i.className && n.push(i.className);
                    var s;
                    switch (i.type) {
                        case "checkbox":
                            s = "menuitemcheckbox";
                            break;
                        case "radio":
                            s = "menuitemradio";
                            break;
                        default:
                            s = "menuitem"
                    }
                    return e.createElement("li", {
                        "aria-checked": "default" === i.type ? null : o.checked,
                        "aria-disabled": i.disabled || null,
                        "aria-haspopup": this._hasSubmenu || null,
                        className: n.join(" "),
                        onBlur: this._handleBlur,
                        onClick: this._handleClick,
                        onFocus: this._handleFocus,
                        onMouseEnter: this._handleMouseEnter,
                        onMouseLeave: this._handleMouseLeave,
                        role: s,
                        tabIndex: o.focusable ? "0" : "-1"
                    }, t)
                },
                renderChildren: function() {
                    var t = this.props,
                        i = "default" === t.type;
                    return this._hasSubmenu = !1, e.Children.map(t.children, function(o) {
                        if ("string" == typeof o) return e.createElement(n.Label, null, o);
                        if (n === o.type) {
                            if (!i) throw new Error('A <Menu.Item> of type "' + t.type + '" may not contain a <Menu>.');
                            if (this._hasSubmenu) throw new Error("A <Menu.Item> may not contain more than one <Menu>.");
                            this._hasSubmenu = !0, o = e.cloneElement(o, {
                                anchor: o.props.anchor || this,
                                isSubmenu: !0,
                                onChooseSubmenuAlignments: t.onChooseSubmenuAlignments,
                                onCloseHierarchy: t.onCloseHierarchy,
                                onReturnFocus: this._handleReturnFocus,
                                parentOrientation: t.parentOrientation,
                                ref: "submenu"
                            })
                        }
                        return o
                    }, this)
                },
                _handleClick: function(e) {
                    if (e || (e = {}), "button" in e) {
                        if (0 !== e.button) return;
                        e.stopPropagation()
                    }
                    var t = this.props;
                    if (!t.disabled) {
                        var n = this.state;
                        ("checkbox" === t.type || "radio" === t.type && !n.checked) && this.setState({
                            checked: !n.checked
                        }), this.refs.submenu ? this.refs.submenu.toggle({
                            focus: !!e.focus
                        }) : t.onCloseHierarchy && t.onCloseHierarchy(), t.onClick && t.onClick({
                            item: this
                        })
                    }
                },
                _handleBlur: function(e) {
                    e.item = this, this.props.onBlur && this.props.onBlur(e)
                },
                _handleFocus: function(e) {
                    e.item = this, this.props.onFocus && this.props.onFocus(e)
                },
                _handleMouseEnter: function() {
                    if (this.refs.submenu && !this.props.disabled) {
                        clearTimeout(this._timeout);
                        var e = this;
                        this._timeout = setTimeout(function() {
                            e.refs.submenu && e.refs.submenu.show()
                        }, 200)
                    }
                },
                _handleMouseLeave: function() {
                    if (this.refs.submenu && !this.props.disabled) {
                        clearTimeout(this._timeout);
                        var e = this;
                        this._timeout = setTimeout(function() {
                            e.refs.submenu && e.refs.submenu.hide()
                        }, 200)
                    }
                },
                _handleReturnFocus: function() {
                    t.findDOMNode(this).focus()
                }
            })
        }(),
        function() {
            var e = SM["import"]("react");
            module.exports.Label = e.createClass({
                displayName: "Menu.Label",
                mixins: [e.addons.PureRenderMixin],
                propTypes: {
                    className: e.PropTypes.string
                },
                render: function() {
                    var t = ["sm-component-menu-label"],
                        n = this.props;
                    return n.className && t.push(n.className), e.createElement("span", {
                        className: t.join(" ")
                    }, n.children)
                }
            })
        }()
    }(), SM.currentModule = null
}, "", {
    requires: ["lodash", "react", "react-dom", "sm", "sm-dom"]
});
YUI.add("sm-component-overheadformfield", function(e) {
    SM.currentModule = "sm-component-overheadformfield";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        var r = SM["import"]("react"),
            s = SM["import"]("react-dom"),
            o = r.PropTypes,
            i = SM["import"]("sm-component-label"),
            l = r.createClass({
                displayName: "OverheadFormField",
                propTypes: {
                    children: o.element.isRequired,
                    className: o.string,
                    label: o.node,
                    description: o.node,
                    error: o.string
                },
                getDefaultProps: function() {
                    return {
                        className: ""
                    }
                },
                blur: function() {
                    s.findDOMNode(this.refs.childField).blur && s.findDOMNode(this.refs.childField).blur()
                },
                focus: function() {
                    s.findDOMNode(this.refs.childField).focus && s.findDOMNode(this.refs.childField).focus()
                },
                render: function() {
                    var e = this.props.label ? r.createElement(i, null, this.props.label) : null,
                        s = this.props.error ? r.createElement("div", {
                            className: "sm-form-field-error-msg"
                        }, this.props.error) : null,
                        o = this.props.description && r.createElement("div", {
                            className: "sm-form-field-description-msg"
                        }, this.props.description),
                        l = r.cloneElement(r.Children.only(this.props.children), {
                            error: this.props.error ? !0 : !1,
                            ref: "childField"
                        });
                    return r.createElement("div", {
                        className: this.props.className + " sm-form-field-overhead"
                    }, e, r.createElement("div", {
                        className: "sm-form-field-container"
                    }, l), s || o)
                }
            });
        e.namespace("SM.Component").OverheadFormField = l, module.exports = l
    }(), SM.currentModule = null
}, "", {
    requires: ["sm", "react", "react-dom", "sm-component-label"]
});
YUI.add("sm-component-panel-base", function(e) {
    SM.currentModule = "sm-component-panel-base";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        ! function() {
            var e = SM["import"]("classnames"),
                t = SM["import"]("react"),
                r = "inside",
                s = "outside",
                n = function(r) {
                    function n() {
                        return babelHelpers.classCallCheck(this, n), babelHelpers.possibleConstructorReturn(this, (n.__proto__ || Object.getPrototypeOf(n)).apply(this, arguments))
                    }
                    return babelHelpers.inherits(n, r), babelHelpers.createClass(n, [{
                        key: "render",
                        value: function() {
                            var r = this,
                                n = this.props,
                                o = n.children,
                                a = n.className,
                                l = n.headerPosition,
                                i = n.height,
                                p = n.style,
                                c = n.width,
                                m = babelHelpers.objectWithoutProperties(n, ["children", "className", "headerPosition", "height", "style", "width"]),
                                u = e(a, "sm-panel");
                            p = Object.assign({
                                height: i,
                                width: c
                            }, p);
                            var d = [],
                                h = [];
                            return l === s ? t.Children.forEach(o, function(e) {
                                e && (r._hasHeader(e) ? h.push(e) : d.push(e))
                            }) : d = o, t.createElement("div", babelHelpers["extends"]({
                                className: u,
                                style: p
                            }, m), h, t.Children.count(d) > 0 && t.createElement("div", {
                                className: "sm-panel-container"
                            }, d))
                        }
                    }, {
                        key: "_hasHeader",
                        value: function(e) {
                            var r = this,
                                s = !1;
                            return e ? n.Header === e.type ? !0 : (e.props && t.Children.forEach(e.props.children, function(e) {
                                r._hasHeader(e) && (s = !0)
                            }), s) : !1
                        }
                    }]), n
                }(SM["import"]("sm-component-pure-render"));
            n.displayName = "Panel", n.HEADER_INSIDE = r, n.HEADER_OUTSIDE = s;
            var o = t.PropTypes;
            n.propTypes = {
                className: o.oneOfType([o.arrayOf(o.string), o.string]),
                headerPosition: o.oneOf([r, s]),
                height: o.number,
                width: o.number
            }, n.defaultProps = {
                headerPosition: s
            }, module.exports = exports = n
        }();
        var e = SM["import"]("react"),
            t = e.PropTypes,
            r = module.exports,
            s = SM["import"]("lodash");
        r.Header = e.createClass({
            displayName: "Header",
            propTypes: {
                style: t.object
            },
            render: function() {
                var t = this.props,
                    n = t.children;
                1 === e.Children.count(n) && (n = [n]);
                var o = s.some(n, {
                    type: r.CloseButton
                });
                return e.createElement("header", {
                    "data-close-button": o,
                    style: t.style
                }, t.children)
            }
        });
        var e = SM["import"]("react"),
            t = e.PropTypes,
            r = module.exports,
            n = SM["import"]("classnames");
        r.Body = e.createClass({
            displayName: "Body",
            propTypes: {
                className: t.oneOfType([t.arrayOf(t.string), t.string]),
                style: t.object
            },
            render: function() {
                var t = this.props,
                    r = n(t.className, "sm-panel-body");
                return e.createElement("div", {
                    className: r,
                    style: t.style
                }, t.children)
            }
        });
        var e = SM["import"]("react"),
            t = e.PropTypes,
            o = SM["import"]("sm-component-buttongroup"),
            r = module.exports;
        r.Buttons = e.createClass({
            displayName: "Buttons",
            propTypes: {
                children: t.oneOfType([t.arrayOf(t.element), t.element, , ]),
                size: t.oneOf(["large", "small"])
            },
            getDefaultProps: function() {
                return {
                    size: "large"
                }
            },
            render: function() {
                return e.createElement("div", {
                    className: "sm-panel-buttons"
                }, e.createElement(o, {
                    size: this.props.size
                }, this.props.children))
            }
        });
        var e = SM["import"]("react"),
            a = SM["import"]("sm-component-button"),
            l = SM["import"]("sm-component-icon"),
            r = module.exports;
        r.CloseButton = e.createClass({
            displayName: "CloseButton",
            render: function() {
                return e.createElement("div", {
                    className: "sm-panel-close"
                }, e.createElement(a, babelHelpers["extends"]({}, this.props, {
                    skin: "submit",
                    noChrome: !0
                }), e.createElement(l, {
                    icon: "XCrossSlim",
                    size: this.props.size
                })))
            }
        })
    }(), SM.currentModule = null
}, "", {
    requires: ["classnames", "lodash", "react", "react-dom", "sm", "sm-component-button", "sm-component-buttongroup", "sm-component-icon", "sm-component-pure-render"]
});
YUI.add("sm-component-panel-modal", function(e) {
    SM.currentModule = "sm-component-panel-modal";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        var e = SM["import"]("react"),
            t = SM["import"]("react-dom"),
            r = e.PropTypes,
            n = SM["import"]("classnames"),
            o = SM["import"]("sm-dom"),
            s = SM["import"]("sm-react-helper-render-to-shared-node"),
            a = 0,
            m = 1,
            c = .95,
            l = ".sm-overlay-container",
            d = "content";
        module.exports = e.createClass({
            displayName: "exports",
            propTypes: {
                children: r.element.isRequired,
                maskOpacity: r.number,
                style: r.object
            },
            statics: {
                MASK_CLEAR: a,
                MASK_OPAQUE: m,
                MASK_TRANSPARENT: c,
                mount: function(e, t) {
                    return s.mount(e, o.querySelector(l), t)
                },
                unmount: function(e) {
                    s.unmount(e)
                }
            },
            getDefaultProps: function() {
                return {
                    maskOpacity: c
                }
            },
            render: function() {
                var t = this.props,
                    r = {
                        opacity: t.maskOpacity
                    },
                    o = e.Children.only(t.children),
                    s = e.cloneElement(o, {
                        className: n("sm-modal-content", o.props.className),
                        ref: d,
                        role: "dialog",
                        tabIndex: -1
                    });
                return e.createElement("div", null, e.createElement("div", {
                    className: "sm-modal-mask",
                    style: r
                }), e.createElement("div", {
                    className: "sm-modal",
                    style: t.style
                }, s))
            },
            focusContent: function() {
                var e = this.refs[d],
                    r = e && t.findDOMNode(e);
                r && r.focus()
            }
        })
    }(), SM.currentModule = null
}, "", {
    requires: ["classnames", "react", "react-dom", "sm", "sm-dom", "sm-react-helper-render-to-shared-node"]
});
YUI.add("sm-component-pure-render", function(e) {
    SM.currentModule = "sm-component-pure-render";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";

        function e(e, t) {
            if (e && t) {
                var s = "function";
                return babelHelpers["typeof"](e.equals) === s && babelHelpers["typeof"](e.hashCode) === s || babelHelpers["typeof"](t.equals) === s && babelHelpers["typeof"](t.hashCode) === s ? r.is(e, t) : void 0
            }
        }
        var t = SM["import"]("lodash"),
            r = SM["import"]("immutable"),
            s = SM["import"]("react"),
            o = function(r) {
                function s() {
                    return babelHelpers.classCallCheck(this, s), babelHelpers.possibleConstructorReturn(this, (s.__proto__ || Object.getPrototypeOf(s)).apply(this, arguments))
                }
                return babelHelpers.inherits(s, r), babelHelpers.createClass(s, [{
                    key: "shouldComponentUpdate",
                    value: function(r, s) {
                        return (r === this.props || t.isEqual(r, this.props, e)) && (s === this.state || t.isEqual(s, this.state, e)) ? !1 : !0
                    }
                }]), s
            }(s.Component);
        module.exports = o
    }(), SM.currentModule = null
}, "", {
    requires: ["immutable", "lodash", "react", "react-dom", "sm"]
});
YUI.add("sm-component-radio", function(e) {
    SM.currentModule = "sm-component-radio";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        var t = SM["import"]("react"),
            o = SM["import"]("classnames"),
            r = t.createClass({
                displayName: "Radio",
                propTypes: {
                    onSelect: t.PropTypes.func,
                    selected: t.PropTypes.bool
                },
                getDefaultProps: function() {
                    return {
                        selected: !1
                    }
                },
                render: function() {
                    var e = {
                        "sm-form-field-radio-item": !0,
                        "yui3-button": !0,
                        "yui3-button-selected": this.props.selected
                    };
                    return t.createElement("button", {
                        className: o(e),
                        onClick: this.props.onSelect
                    }, t.createElement("span", {
                        className: "sm-form-field-radio-icon-container"
                    }, t.createElement("span", {
                        className: "sm-form-field-radio-icon"
                    })), t.createElement("span", {
                        className: "yui3-button-label"
                    }, this.props.children))
                }
            });
        e.namespace("SM.Component").Radio = module.exports = r
    }(), SM.currentModule = null
}, "", {
    requires: ["classnames", "react", "sm"]
});
YUI.add("sm-component-select", function(e) {
    SM.currentModule = "sm-component-select";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        "use strict";
        ! function() {
            var r = SM["import"]("classnames"),
                s = SM["import"]("sm-component-icon"),
                t = SM["import"]("react"),
                o = function(e) {
                    function o() {
                        return babelHelpers.classCallCheck(this, o), babelHelpers.possibleConstructorReturn(this, (o.__proto__ || Object.getPrototypeOf(o)).apply(this, arguments))
                    }
                    return babelHelpers.inherits(o, e), babelHelpers.createClass(o, [{
                        key: "render",
                        value: function() {
                            var e = this.props,
                                o = e.error,
                                l = e.children,
                                n = e.className,
                                a = e.noChrome,
                                c = e.size,
                                p = babelHelpers.objectWithoutProperties(e, ["error", "children", "className", "noChrome", "size"]),
                                m = ["sm-form-field", "sm-form-field-select-wrapper", {
                                    "sm-form-field-error": o
                                }, {
                                    "sm-nochrome": a
                                }],
                                i = ["sm-form-field-select", {
                                    "sm-form-field-select-large": "large" === c
                                }].concat(n),
                                u = ["sm-form-field-select-arrow", {
                                    "sm-form-field-select-arrow-large": "large" === c
                                }];
                            return t.createElement("span", {
                                className: r(m)
                            }, t.createElement("select", babelHelpers["extends"]({
                                className: r(i)
                            }, p), l), t.createElement(s, {
                                className: r(u),
                                icon: "AngleBracketDown",
                                size: "small"
                            }))
                        }
                    }]), o
                }(SM["import"]("sm-component-pure-render"));
            o.displayName = "Select";
            var l = t.PropTypes;
            o.propTypes = {
                noChrome: l.bool,
                size: l.oneOf(["small", "large"])
            }, o.defaultProps = {
                size: "small"
            }, e.namespace("SM.Component").Select = exports.Select = o
        }(),
        function() {
            var r = SM["import"]("react"),
                s = SM["import"]("classnames");
            exports.SelectOptionGroup = r.createClass({
                displayName: "SelectOptionGroup",
                propTypes: {},
                render: function() {
                    var e = {
                            "sm-form-field-select-optgroup": !0
                        },
                        t = this.props,
                        o = t.className,
                        l = babelHelpers.objectWithoutProperties(t, ["className"]);
                    return o && (e[o] = !0), r.createElement("optgroup", babelHelpers["extends"]({}, l, {
                        className: s(e)
                    }), this.props.children)
                }
            }), e.namespace("SM.Component").SelectOptionGroup = exports.SelectOptionGroup
        }(),
        function() {
            var r = SM["import"]("react"),
                s = SM["import"]("classnames");
            exports.SelectOption = r.createClass({
                displayName: "SelectOption",
                propTypes: {},
                render: function() {
                    var e = {
                            "sm-form-field-select-option": !0
                        },
                        t = this.props,
                        o = t.className,
                        l = babelHelpers.objectWithoutProperties(t, ["className"]);
                    return o && (e[o] = !0), r.createElement("option", babelHelpers["extends"]({}, l, {
                        className: s(e)
                    }), this.props.children)
                }
            }), e.namespace("SM.Component").SelectOption = exports.SelectOption
        }()
    }(), SM.currentModule = null
}, "", {
    requires: ["classnames", "react", "sm", "sm-component-icon", "sm-component-pure-render"]
});
YUI.add("sm-component-tabview-tab", function(e) {
    SM.currentModule = "sm-component-tabview-tab";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: !0
        });
        var e = SM["import"]("react"),
            r = e.PropTypes,
            t = function(r) {
                var t = (r.tabKey, babelHelpers.objectWithoutProperties(r, ["tabKey"]));
                return e.createElement("div", babelHelpers["extends"]({
                    role: "tabpanel"
                }, t), r.children)
            };
        t.propTypes = {
            label: r.node.isRequired,
            tabKey: r.string.isRequired,
            error: r.bool,
            warning: r.bool
        }, t.displayName = "TabView.Tab", exports["default"] = t, module.exports = exports["default"]
    }(), SM.currentModule = null
}, "", {
    requires: ["classnames", "lodash", "react", "react-dom", "sm"]
});
YUI.add("sm-component-tabview", function(e) {
    SM.currentModule = "sm-component-tabview";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: !0
        });
        var e = SM["import"]("react"),
            t = SM["import"]("react-dom"),
            a = e.PropTypes,
            r = SM["import"]("lodash"),
            n = SM["import"]("classnames"),
            l = "horizontal",
            o = "vertical",
            s = function(a) {
                function l(e) {
                    babelHelpers.classCallCheck(this, l);
                    var t = babelHelpers.possibleConstructorReturn(this, (l.__proto__ || Object.getPrototypeOf(l)).call(this, e));
                    return t._handleTabClick = t._handleTabClick.bind(t), t
                }
                return babelHelpers.inherits(l, a), babelHelpers.createClass(l, [{
                    key: "render",
                    value: function() {
                        var t, a = this,
                            r = this.props,
                            l = r.children,
                            o = r.selectedTabKey,
                            s = r.className,
                            i = r.orientation,
                            c = (r.onTabSelect, babelHelpers.objectWithoutProperties(r, ["children", "selectedTabKey", "className", "orientation", "onTabSelect"])),
                            d = e.Children.map(l, function(r) {
                                var n = r.props.tabKey,
                                    l = n === o;
                                return l && (t = r), e.createElement("li", {
                                    role: "presentation",
                                    "data-tabkey": n
                                }, e.createElement("a", {
                                    "aria-selected": l,
                                    onClick: a._handleTabClick,
                                    ref: n,
                                    role: "tab",
                                    tabIndex: l ? 0 : -1,
                                    "data-error": r.props.error || null,
                                    "data-warning": r.props.warning || null,
                                    "data-key": n
                                }, r.props.label))
                            });
                        return e.createElement("div", babelHelpers["extends"]({
                            className: n(s, "sm-tabview"),
                            "data-orientation": i
                        }, c), e.createElement("ul", {
                            onKeyDown: this._handleKeyDown,
                            role: "tablist"
                        }, d), t)
                    }
                }, {
                    key: "_getSelectedTabIndex",
                    value: function() {
                        var t = this,
                            a = this.props.children;
                        return 1 === e.Children.count(a) && (a = [e.Children.only(a)]), r.findIndex(a, function(e) {
                            return e.props.tabKey === t.props.selectedTabKey
                        })
                    }
                }, {
                    key: "_selectNextTab",
                    value: function() {
                        var t, a = this.props.children,
                            r = e.Children.count(a),
                            n = this._getSelectedTabIndex();
                        "undefined" != typeof n && 1 !== r && (t = n + 1, t >= r && (t = 0), this._selectTab(a[t].props.tabKey))
                    }
                }, {
                    key: "_selectPrevTab",
                    value: function() {
                        var t, a = this.props.children,
                            r = e.Children.count(a),
                            n = this._getSelectedTabIndex();
                        "undefined" != typeof n && 1 !== r && (t = n - 1, 0 > t && (t = r - 1), this._selectTab(a[t].props.tabKey))
                    }
                }, {
                    key: "_selectTab",
                    value: function(e) {
                        this.props.onTabSelect(e)
                    }
                }, {
                    key: "focusSelectedTab",
                    value: function() {
                        if (this.isMounted()) {
                            var e = this.refs[this.props.selectedTabKey],
                                a = e && t.findDOMNode(e);
                            a && a.focus()
                        }
                    }
                }, {
                    key: "_handleKeyDown",
                    value: function(e) {
                        var t;
                        switch (e.key) {
                            case "ArrowDown":
                            case "ArrowRight":
                                t = this._selectNextTab;
                                break;
                            case "ArrowUp":
                            case "ArrowLeft":
                                t = this._selectPrevTab
                        }
                        t && (e.preventDefault(), t())
                    }
                }, {
                    key: "_handleTabClick",
                    value: function(e) {
                        e.preventDefault();
                        var t = e.target.getAttribute("data-key");
                        this._selectTab(t)
                    }
                }]), l
            }(e.Component);
        exports["default"] = s, s.propTypes = {
            children: a.oneOfType([a.arrayOf(a.element), a.element]),
            className: a.string,
            onTabSelect: a.func,
            orientation: a.oneOf([l, o]),
            selectedTabKey: a.string.isRequired
        }, s.defaultProps = {
            onTabSelect: function() {},
            orientation: l
        }, s.ORIENTATION_HORIZONTAL = l, s.ORIENTATION_VERTICAL = o, s.Tab = SM["import"]("sm-component-tabview-tab"), s.displayName = "TabView", module.exports = exports["default"]
    }(), SM.currentModule = null
}, "", {
    requires: ["classnames", "lodash", "react", "react-dom", "sm", "sm-component-tabview-tab"]
});
YUI.add("sm-component-textarea", function(e) {
    SM.currentModule = "sm-component-textarea";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        var r = SM["import"]("react"),
            t = SM["import"]("react-dom"),
            a = r.PropTypes,
            s = SM["import"]("classnames"),
            o = r.createClass({
                displayName: "Textarea",
                propTypes: {
                    className: a.string,
                    error: a.bool
                },
                getDefaultProps: function() {
                    return {
                        className: ""
                    }
                },
                focus: function() {
                    t.findDOMNode(this.refs.textareaField).focus()
                },
                render: function() {
                    var e = {
                            "sm-form-field": !0,
                            "sm-form-field-error": this.props.error,
                            "sm-form-field-textarea": !0
                        },
                        t = this.props,
                        a = t.className,
                        o = babelHelpers.objectWithoutProperties(t, ["className"]);
                    return a && (e[a] = !0), r.createElement("textarea", babelHelpers["extends"]({}, o, {
                        className: s(e),
                        ref: "textareaField"
                    }))
                }
            });
        e.namespace("SM.Component").Textarea = o, module.exports = o
    }(), SM.currentModule = null
}, "", {
    requires: ["classnames", "sm", "react", "react-dom"]
});
YUI.add("sm-component-textbox", function(e) {
    SM.currentModule = "sm-component-textbox";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: !0
        });
        var e = SM["import"]("react"),
            r = SM["import"]("classnames"),
            t = function(t) {
                function s() {
                    return babelHelpers.classCallCheck(this, s), babelHelpers.possibleConstructorReturn(this, (s.__proto__ || Object.getPrototypeOf(s)).apply(this, arguments))
                }
                return babelHelpers.inherits(s, t), babelHelpers.createClass(s, [{
                    key: "render",
                    value: function() {
                        var t = this,
                            s = this.props,
                            o = s.className,
                            l = s.error,
                            n = s.noChrome,
                            a = s.size,
                            i = babelHelpers.objectWithoutProperties(s, ["className", "error", "noChrome", "size"]),
                            u = ["sm-form-field", "sm-form-field-text-input", {
                                "sm-form-field-text-input-size-large": "large" === a
                            }, {
                                "sm-nochrome": n
                            }, {
                                "sm-form-field-error": l
                            }].concat(o);
                        return e.createElement("input", babelHelpers["extends"]({
                            className: r(u),
                            ref: function(e) {
                                t._inputEl = e
                            }
                        }, i))
                    }
                }, {
                    key: "focus",
                    value: function() {
                        this._inputEl && this._inputEl.focus()
                    }
                }]), s
            }(SM["import"]("sm-component-pure-render"));
        exports["default"] = t, t.displayName = "Textbox";
        var s = e.PropTypes;
        t.propTypes = {
            error: e.PropTypes.bool,
            noChrome: s.bool,
            size: s.oneOf(["small", "large"]).isRequired,
            type: s.oneOf(["email", "hidden", "number", "password", "tel", "text", "url"]).isRequired
        }, t.defaultProps = {
            size: "small",
            type: "text"
        }, module.exports = exports["default"]
    }(), SM.currentModule = null
}, "", {
    requires: ["classnames", "react", "sm", "sm-component-pure-render"]
});
YUI.add("sm-component-underlineformfield", function(e) {
    SM.currentModule = "sm-component-underlineformfield";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        var r = SM["import"]("react"),
            s = r.PropTypes,
            l = SM["import"]("classnames"),
            n = SM["import"]("sm-component-label"),
            o = r.createClass({
                displayName: "UnderlineFormField",
                propTypes: {
                    children: s.element.isRequired,
                    className: s.string,
                    label: s.node,
                    error: s.string
                },
                getDefaultProps: function() {
                    return {
                        className: ""
                    }
                },
                render: function() {
                    var e = {
                        "sm-form-field-underline": !0,
                        "sm-form-field-error": this.props.error
                    };
                    this.props.className && (e[this.props.className] = !0);
                    var s = this.props.label ? r.createElement(n, null, this.props.label) : null,
                        o = this.props.error ? r.createElement("div", {
                            className: "sm-form-field-error-msg"
                        }, this.props.error) : null;
                    return r.createElement("div", {
                        className: l(e)
                    }, s, r.createElement("div", {
                        className: "sm-form-field-container"
                    }, this.props.children), o)
                }
            });
        e.namespace("SM.Component").UnderlineFormField = o, module.exports = o
    }(), SM.currentModule = null
}, "", {
    requires: ["classnames", "sm", "react", "sm-component-label"]
});
YUI.add("sm-csrf", function(e) {
    SM.currentModule = "sm-csrf";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        var r = "https://" + SM.env.host.api + "/api/v2!token?APIKey=" + SM.env.apiKey,
            n = 36e5,
            t = {
                TOKEN_PROMISE: null,
                REFRESH_TIMER: null,
                getToken: function() {
                    return t.TOKEN_PROMISE ? t.TOKEN_PROMISE : t.setToken(e.SM.io({
                        url: r,
                        method: "POST",
                        headers: {
                            accept: "application/json",
                            "x-requested-with": null
                        },
                        withCredentials: !0
                    }).then(function() {
                        var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
                            r = e.Response.Token.Token;
                        if (r) return r;
                        throw new Error("API responded with empty token")
                    }))
                },
                refreshToken: function() {
                    return t.setToken(null), t.getToken()
                },
                setToken: function(e) {
                    if (clearTimeout(t.REFRESH_TIMER), !e) return t.TOKEN_PROMISE = null, null;
                    var r = Promise.resolve(e).then(function(e) {
                        if (r !== t.TOKEN_PROMISE) {
                            if (t.TOKEN_PROMISE) return t.TOKEN_PROMISE;
                            throw new Error("CSRF token cleared while waiting for token promise to resolve")
                        }
                        return clearTimeout(t.REFRESH_TIMER), t.REFRESH_TIMER = setTimeout(t.refreshToken, n), e
                    }, function(e) {
                        if (r === t.TOKEN_PROMISE) throw t.TOKEN_PROMISE = null, e;
                        if (t.TOKEN_PROMISE) return t.TOKEN_PROMISE;
                        throw new Error("CSRF Token cleared and pending token promise rejected")
                    });
                    return t.TOKEN_PROMISE = r, t.TOKEN_PROMISE
                }
            };
        e.namespace("SM").CSRF = t, module.exports = t
    }(), SM.currentModule = null
}, "", {
    requires: ["rsvp", "sm", "sm-dom", "sm-uri", "sm-io-xhr"]
});
YUI.add("sm-deep-freeze", function(e) {
    SM.currentModule = "sm-deep-freeze";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: !0
        });
        var e = function r(e) {
            return Object.freeze(e), Object.getOwnPropertyNames(e).forEach(function(t) {
                !e.hasOwnProperty(t) || null === e[t] || "object" !== babelHelpers["typeof"](e[t]) && "function" != typeof e[t] || Object.isFrozen(e[t]) || r(e[t])
            }), e
        };
        exports["default"] = e, module.exports = exports["default"]
    }(), SM.currentModule = null
}, "", {});
YUI.add("sm-dom", function(e) {
    SM.currentModule = "sm-dom";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";

        function t(e) {
            var t = a._alwaysUseShims ? !1 : a._supports.classList;
            return void 0 === t && (t = "classList" in e, a._supports.classList = t), t
        }

        function n() {
            var e = a._alwaysUseShims ? !1 : a._supports.matches;
            return void 0 === e && (e = !1, function() {
                try {
                    var t = a.doc.createElement("div");
                    t.className = "matches-test", e = t.matches("div.matches-test") === !0 && t.matches("div.bogus") === !1
                } catch (n) {}
            }(), a._supports.matches = e), e
        }

        function r() {
            var e = a._alwaysUseShims ? !1 : a._supports.msMatchesSelector;
            return void 0 === e && (e = !1, function() {
                try {
                    var t = a.doc.createElement("div");
                    t.className = "matches-test", e = t.msMatchesSelector("div.matches-test") === !0 && t.msMatchesSelector("div.bogus") === !1
                } catch (n) {}
            }(), a._supports.msMatchesSelector = e), e
        }

        function o() {
            var e = a._alwaysUseShims ? !1 : a._supports.scopedSelectors;
            return void 0 === e && (e = !1, function() {
                try {
                    var t = a.doc.createElement("div");
                    t.innerHTML = "<div><span></span></div>", e = null === t.querySelector(":scope > span") && t.querySelector(":scope > div") === t.children[0]
                } catch (n) {}
            }(), a._supports.scopedSelectors = e), e
        }

        function i() {
            var e = a._alwaysUseShims ? !1 : a._supports.scrollIntoViewIfNeeded;
            if (void 0 === e) {
                var t = a.doc.createElement("div");
                e = !!t.scrollIntoViewIfNeeded, a._supports.supportsScrollIntoViewIfNeeded = e
            }
            return e
        }
        var l, s = SM["import"]("lodash"),
            c = ["altKey", "button", "buttons", "changedTouches", "charCode", "clientX", "clientY", "ctrlKey", "currentPoint", "deltaMode", "deltaX", "deltaY", "deltaZ", "height", "hwTimestamp", "identifier", "intermediatePoints", "isPrimary", "keyCode", "metaKey", "pageX", "pageY", "pointerId", "pointerType", "pressure", "relatedTarget", "shiftKey", "target", "targetTouches", "tiltX", "tiltY", "timestamp", "touches", "type", "which", "width"],
            a = e.namespace("SM").DOM = module.exports = {},
            u = /(^|\W):scope($|\W)/gi;
        a.doc = "undefined" == typeof document ? require("jsdom").jsdom() : document, a.fullscreenEnabled = !!(a.doc.fullscreenEnabled || a.doc.webkitFullscreenEnabled || a.doc.mozFullScreenEnabled || a.doc.msFullscreenEnabled), a.enterFullscreen = function() {
            if (a.fullscreenEnabled) {
                var e = a.doc,
                    t = e.documentElement;
                t.requestFullscreen ? t.requestFullscreen() : t.webkitRequestFullscreen ? t.webkitRequestFullscreen() : t.mozRequestFullScreen ? t.mozRequestFullScreen() : t.msRequestFullscreen && t.msRequestFullscreen()
            }
        }, a.exitFullscreen = function() {
            if (a.fullscreenEnabled) {
                var e = a.doc;
                e.exitFullscreen ? e.exitFullscreen() : e.msExitFullscreen ? e.msExitFullscreen() : e.mozCancelFullScreen ? e.mozCancelFullScreen() : e.webkitExitFullscreen && e.webkitExitFullscreen()
            }
        }, a.isFullscreen = function() {
            var e = a.doc;
            return e.fullscreenElement || e.webkitFullscreenElement || e.mozFullScreenElement || e.msFullscreenElement
        }, a.toggleFullscreen = function() {
            a.isFullscreen() ? a.exitFullscreen() : a.enterFullscreen()
        }, a.isBrowser = "undefined" != typeof document && "undefined" != typeof window, a.win = "undefined" == typeof window ? a.doc.defaultView : window, a.isStandalone = a.win.navigator.standalone || a.win.matchMedia && a.win.matchMedia("(display-mode: standalone)").matches, a.devicePixelRatio = a.win.devicePixelRatio || a.win.screen.deviceXDPI / a.win.screen.logicalXDPI, a._alwaysUseShims = !1, a._supports = {}, a.addEventListener = function(e, t, n, r, o) {
            function i() {
                return n.apply(r || this, arguments)
            }
            return o || (o = !1), i._eventCapture = o, i._eventEl = e, i._eventType = t, e.addEventListener(t, i, o), i
        }, a.classList = function(e) {
            function n(t) {
                return function(n, r) {
                    var o = e.className.split(/\s+/),
                        i = o.indexOf(n),
                        l = t(o, i, n, r);
                    return e.className = o.join(" "), l
                }
            }
            return t(e) ? e.classList : {
                add: n(function(e, t, n) {
                    -1 === t && e.push(n)
                }),
                contains: function(t) {
                    return -1 !== e.className.split(/\s+/).indexOf(t)
                },
                item: function(t) {
                    return e.className.split(/\s+/)[t]
                },
                remove: n(function(e, t) {
                    -1 !== t && e.splice(t, 1)
                }),
                toggle: n(function(e, t, n, r) {
                    if (-1 === t) {
                        if (void 0 === r || r) return e.push(n), !0
                    } else void 0 !== r && r || e.splice(t, 1);
                    return !1
                })
            }
        }, a.closest = function(e, t) {
            var n, r = "undefined" == typeof t ? "undefined" : babelHelpers["typeof"](t),
                o = e.correspondingUseElement || e;
            for (n = "function" === r ? t : "string" === r ? function(e) {
                    return a.matches(e, t)
                } : function(e) {
                    return e === t
                }; o;) {
                if (n(o)) return o;
                o = o.parentNode
            }
            return null
        }, a.delegate = function(e, t, n, r, o) {
            return a.addEventListener(e, t, function(t) {
                var i, l = t.target;
                if ("string" == typeof r) {
                    for (var u = -1, d = Array.prototype.slice.call(a.querySelectorAll(r, e)); 0 > u && l && l !== e;) u = d.indexOf(l), l = l.parentNode;
                    u > -1 && (i = d[u])
                } else if (l === r) i = l;
                else
                    for (; l && l !== e;) {
                        if (l === r) {
                            i = l;
                            break
                        }
                        l = l.parentNode
                    }
                i && n.call(o, s.assign(s.pick(t, c), {
                    container: e,
                    currentTarget: i,
                    preventDefault: s.bind(t.preventDefault, t),
                    stopPropagation: s.bind(t.stopPropagation, t)
                }))
            })
        }, a.escapeMobileWebApp = function(e) {
            var t = a.doc.createElement("a");
            t.setAttribute("href", e), t.setAttribute("target", "_blank");
            var n = a.doc.createEvent("HTMLEvents");
            n.initEvent("click", !0, !0), t.dispatchEvent(n)
        }, a.getAbsoluteBoundingRect = function(e) {
            var t = a.win.pageXOffset,
                n = a.win.pageYOffset,
                r = e.getBoundingClientRect();
            return {
                bottom: r.bottom + n,
                height: r.height,
                left: r.left + t,
                right: r.right + t,
                top: r.top + n,
                width: r.width
            }
        }, a.getElementScrollingWidth = function(e) {
            var t = a.doc.body,
                n = t.style.overflowY;
            t.style.overflowY = "scroll";
            var r = e.offsetWidth;
            return t.style.overflowY = n, r
        }, a.getScrollbarWidth = function() {
            if (!l) {
                var e = a.doc.createElement("div"),
                    t = a.doc.body;
                e.style.cssText = "position:absolute;visibility:hidden;overflow:scroll;width:20px;", e.appendChild(a.doc.createElement("p")).style.height = "1px", t.insertBefore(e, t.firstChild), l = e.offsetWidth - e.clientWidth, t.removeChild(e)
            }
            return l
        }, a.getViewportRect = function() {
            var e = a.win.innerHeight || a.doc.documentElement.clientHeight,
                t = a.win.pageXOffset,
                n = a.win.pageYOffset,
                r = a.win.innerWidth || a.doc.documentElement.clientWidth;
            return {
                bottom: n + e,
                height: e,
                left: t,
                right: t + r,
                top: n,
                width: r
            }
        }, a.matches = function(e, t) {
            if (n()) return e.matches && e.matches(t);
            if (r()) return e.msMatchesSelector(t);
            var o, i = e.parentNode;
            i || a.doc === e || (i = o = a.doc.createDocumentFragment(), o.appendChild(e));
            var l = a.querySelectorAll(t, i);
            o && o.removeChild(e);
            for (var s = 0, c = l.length; c > s; ++s)
                if (e === l[s]) return !0;
            return !1
        }, a.querySelector = function(e, t) {
            return t || (t = a.doc), t !== a.doc && e.match(u) && !o() && (e = e.replace(u, "$1#" + a.stampId(t) + "$2"), t = a.doc), t.querySelector(e)
        }, a.querySelectorAll = function(e, t) {
            return t || (t = a.doc), t !== a.doc && e.match(u) && !o() && (e = e.replace(u, "$1#" + a.stampId(t) + "$2"), t = a.doc), t.querySelectorAll(e)
        }, a.removeEventListener = function(e) {
            var t = e._eventEl,
                n = e._eventType;
            t && n && t.removeEventListener(n, e, e._eventCapture)
        }, a.scrollIntoViewIfNeeded = function(e, t) {
            if (void 0 === t && (t = !0), i()) e.scrollIntoViewIfNeeded(t);
            else {
                var n = function u(e) {
                        var t = e.parentNode;
                        return t === document ? document : t.offsetHeight < t.scrollHeight || t.offsetWidth < t.scrollWidth ? t : u(t)
                    },
                    r = a.win.scrollY,
                    o = a.win.scrollX,
                    l = n(e);
                l === document && (l = l.body, r = -1);
                var s = l.getBoundingClientRect(),
                    c = e.getBoundingClientRect();
                (c.top < s.top || c.bottom > s.bottom || c.right > s.right || c.left < s.left) && (e.scrollIntoView(t), -1 === r || t || a.win.scroll(o, r))
            }
        }, a.setPosition = function(e, t) {
            var n = a.win.getComputedStyle(e).position,
                r = "relative" === n;
            r || "absolute" === n || (e.style.position = "absolute");
            var o = {
                    left: 0,
                    top: 0
                },
                i = e.offsetParent;
            if (r) {
                void 0 !== t.left && (e.style.left = "0px"), void 0 !== t.top && (e.style.top = "0px");
                var l = a.getAbsoluteBoundingRect(e);
                o.left = -1 * l.left, o.top = -1 * l.top
            } else if (i && i !== a.doc.documentElement) {
                var s = a.getAbsoluteBoundingRect(i);
                o.left = -1 * s.left, o.top = -1 * s.top
            }
            return void 0 !== t.left && (e.style.left = o.left + t.left + "px"), void 0 !== t.top && (e.style.top = o.top + t.top + "px"), this
        }, a.stampId = function(e) {
            var t = e.id;
            if (t) return t;
            do t = "sm-dom-" + Math.random().toString().substr(2, 4); while (a.doc.getElementById(t));
            return e.id = t, t
        }
    }(), SM.currentModule = null
}, "", {
    requires: ["lodash", "sm"]
});
YUI.add("sm-draggable", function(t) {
    SM.currentModule = "sm-draggable";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";

        function t(t, i) {
            this._config = e.assign({
                container: n.doc.body,
                minDistance: 5,
                scrollMargin: 30,
                touchDelay: 300
            }, i), this._selector = t, this._state = this._getInitialState(), this._touchId = null, this.enable()
        }
        var e = SM["import"]("lodash"),
            n = SM["import"]("sm-dom"),
            i = SM["import"]("sm-event-emitter");
        e.assign(t, i.prototype), t.prototype = e.create(i.prototype, {
            constructor: t
        });
        var o = t.prototype;
        o.isEnabled = !1, o.cancel = function() {
            var t = this._state;
            return (t.dragging || t.pending) && (t.dragging && (t.canceled = !0), this._endDrag()), this
        }, o.disable = function() {
            return this.isEnabled ? (this.cancel(), e.forEach(this._eventListeners, function(t) {
                n.removeEventListener(t)
            }), this._eventListeners = null, this.removeTarget(t), this.isEnabled = !1, this) : this
        }, o.enable = function() {
            if (this.isEnabled) return this;
            var e = this._config.container,
                i = this._selector;
            return this._eventListeners = [n.delegate(e, "dragstart", this._onContainerNativeDragStart, i, this), n.delegate(e, "touchstart", this._onContainerPointerDown, i, this), n.delegate(e, n.win.PointerEvent && !n.win.TouchEvent ? "pointerdown" : "mousedown", this._onContainerPointerDown, i, this)], this.addTarget(t), this.isEnabled = !0, this
        }, o.setConstrain = function(t) {
            this._config.constrain = t
        }, o._addTemporaryEventListener = function(t, e, i) {
            var o = this._temporaryEventListeners || (this._temporaryEventListeners = []);
            o.push(n.addEventListener(t, e, i, this))
        }, o._autoScroll = function(t) {
            if (!this._autoScrollTimeout) {
                t || (t = 1);
                var e = this._config.autoScroll,
                    i = this._state,
                    o = i.elementUnderPointer;
                if (o && e) {
                    var r = this;
                    if (o = "string" == typeof e ? n.closest(o, function(t) {
                            return n.matches(t, e) && r._isScrollable(t)
                        }) : n.closest(o, function(t) {
                            return r._isScrollable(t)
                        })) {
                        var a, s, l, c = n.doc.documentElement,
                            h = o === n.doc.body,
                            d = !1,
                            u = h ? Math.max(o.scrollLeft, c.scrollLeft) : o.scrollLeft,
                            g = this._config.scrollMargin,
                            _ = h ? Math.max(o.scrollTop, c.scrollTop) : o.scrollTop;
                        h ? (a = c.clientHeight, s = c.clientWidth, l = {
                            bottom: a,
                            left: 0,
                            right: s,
                            top: 0
                        }) : (a = o.clientHeight, s = o.clientWidth, l = o.getBoundingClientRect()), o.scrollHeight > _ + a && i.clientY >= l.bottom - g ? (o.scrollTop += t, h && (c.scrollTop += t), d = !0) : _ > 0 && i.clientY <= l.top + g && (o.scrollTop -= t, h && (c.scrollTop -= t), d = !0), o.scrollWidth > u + s && i.clientX >= l.right - g ? (o.scrollLeft += t, h && (c.scrollLeft += t), d = !0) : u > 0 && i.clientX <= l.left + g && (o.scrollLeft -= t, h && (c.scrollLeft -= t), d = !0), d && (this._updateScrollDelta(), this._updateElementUnderPointer(), this._autoScrollTimeout = setTimeout(function() {
                            r._autoScrollTimeout = null, r._autoScroll(Math.min(t + 1, 10))
                        }, 20), this._drag())
                    }
                }
            }
        }, o._drag = function() {
            this.emit("drag", e.assign({}, this._state))
        }, o._endDrag = function() {
            clearTimeout(this._autoScrollTimeout), clearTimeout(this._touchTimeout), this._touchId = null, this._removeTemporaryEventListeners();
            var t = this._state;
            if ("touch" === t.pointerType && (t.dragTarget.style.webkitUserSelect = ""), t.dragging) {
                var i = n.doc.documentElement.style;
                i.userSelect = i.webkitUserSelect = i.MozUserSelect = i.msUserSelect = "";
                var o = t.dragTarget.style;
                o.pointerEvents = "", o.webkitTapHighlightColor = "", t.dragging = !1;
                var r = t.deltaX - t._scrollDeltaX,
                    a = t.deltaY - t._scrollDeltaY;
                t.endRect = e.assign({}, t.startRect, {
                    bottom: t.startRect.bottom += a,
                    left: t.startRect.left += r,
                    right: t.startRect.right += r,
                    top: t.startRect.top += a
                }), this.emit("dragend", e.assign({}, t))
            }
            this._state = {}
        }, o._getInitialState = function() {
            return {
                altKey: !1,
                canceled: !1,
                clickTarget: null,
                clientX: null,
                clientY: null,
                ctrlKey: !1,
                deltaX: 0,
                deltaY: 0,
                dragging: !1,
                dragTarget: null,
                elementUnderPointer: null,
                endRect: null,
                metaKey: !1,
                pageX: null,
                pageY: null,
                pending: !1,
                pointerOffsetX: null,
                pointerOffsetY: null,
                pointerType: null,
                shiftKey: !1,
                startPageX: null,
                startPageY: null,
                startRect: null,
                _containerIsBody: !1,
                _scrollDeltaX: 0,
                _scrollDeltaY: 0,
                _startScrollX: 0,
                _startScrollY: 0
            }
        }, o._isScrollable = function(t) {
            var e = t === n.doc.body;
            e && (t = n.doc.documentElement);
            var i = t.clientHeight < t.scrollHeight || t.clientWidth < t.scrollWidth;
            if (i && !e) {
                var o = n.win.getComputedStyle(t).overflow;
                ("visible" === o || "hidden" === o) && (i = !1)
            }
            return i
        }, o._removeTemporaryEventListeners = function() {
            this._temporaryEventListeners && (e.forEach(this._temporaryEventListeners, function(t) {
                n.removeEventListener(t)
            }), this._temporaryEventListeners = null)
        }, o._startDrag = function() {
            var t = this._state;
            t.dragging = !0, t.pending = !1;
            var i = n.doc.documentElement.style;
            i.userSelect = i.webkitUserSelect = i.MozUserSelect = i.msUserSelect = "none", t.dragTarget.style.pointerEvents = "none", this._addTemporaryEventListener(n.doc, "selectstart", this._onDocSelectStart), this._addTemporaryEventListener(t.clickTarget, "click", this._onClickTargetClick), this.emit("dragstart", e.assign({}, t)), this._drag()
        }, o._updateElementUnderPointer = function() {
            var t = n.doc,
                e = this._state,
                i = e.dragTarget,
                o = t.elementFromPoint(e.clientX, e.clientY);
            if (o === e.clickTarget || o === i)
                if (t.msElementsFromPoint) o = t.msElementsFromPoint(e.clientX, e.clientY)[1] || null;
                else {
                    var r = i.style.visibility || "";
                    i.style.visibility = "hidden", o = t.elementFromPoint(e.clientX, e.clientY), i.style.visibility = r
                }
            e.elementUnderPointer = o || null
        }, o._updateScrollDelta = function() {
            var t = this._state;
            if (!t._containerIsBody) {
                var e = this._config.container;
                t._scrollDeltaX = e.scrollLeft - t._startScrollX, t._scrollDeltaY = e.scrollTop - t._startScrollY, t.deltaX += t._scrollDeltaX, t.deltaY += t._scrollDeltaY
            }
        }, o._onClickTargetClick = function(t) {
            t.preventDefault(), t.stopImmediatePropagation(), t.stopPropagation()
        }, o._onContainerNativeDragStart = function(t) {
            t.preventDefault()
        }, o._onContainerPointerDown = function(t) {
            var i = "touchstart" === t.type,
                o = this._state;
            if (o.dragging || o.pending) return void t.preventDefault();
            if (i) {
                if (t.touches.length > 1) return
            } else if (0 !== t.button) return;
            var r = this._config.handle;
            if (!r || n.closest(t.target, r)) {
                "mousedown" === t.type && t.preventDefault();
                var a = n.getAbsoluteBoundingRect(t.currentTarget),
                    s = i ? t.changedTouches[0] : t;
                o = this._state = e.assign(this._getInitialState(), {
                    altKey: t.altKey,
                    clickTarget: s.target,
                    clientX: s.clientX,
                    clientY: s.clientY,
                    ctrlKey: t.ctrlKey,
                    dragTarget: t.currentTarget,
                    metaKey: t.metaKey,
                    pageX: s.pageX,
                    pageY: s.pageY,
                    pending: !0,
                    pointerOffsetX: s.pageX - a.left,
                    pointerOffsetY: s.pageY - a.top,
                    pointerType: i ? "touch" : t.pointerType || "mouse",
                    shiftKey: t.shiftKey,
                    startPageX: s.pageX,
                    startPageY: s.pageY,
                    startRect: a
                });
                var l = this._config.container,
                    c = n.doc;
                l === c.body ? o._containerIsBody = !0 : (o._containerIsBody = !1, o._startScrollX = l.scrollLeft, o._startScrollY = l.scrollTop);
                var h = this;
                if (i) {
                    this._touchId = s.identifier;
                    var d = t.currentTarget.style;
                    d.webkitTapHighlightColor = "transparent", d.webkitUserSelect = "none", this._addTemporaryEventListener(c, "contextmenu", this._onDocContextMenu), this._addTemporaryEventListener(c, "scroll", this._onDocScroll), this._addTemporaryEventListener(c, "touchcancel", this._onDocPointerUp), this._addTemporaryEventListener(c, "touchend", this._onDocPointerUp), this._addTemporaryEventListener(c, "touchleave", this._onDocPointerUp), this._touchTimeout = setTimeout(function() {
                        h._addTemporaryEventListener(c, "keydown", h._onDocKeyDown), h._addTemporaryEventListener(c, "touchmove", h._onDocPointerMove), h._addTemporaryEventListener(l, "touchmove", h._onContainerPointerMove), h._startDrag()
                    }, this._config.touchDelay || 0)
                } else this._addTemporaryEventListener(c, "keydown", h._onDocKeyDown), this._addTemporaryEventListener(c, "mouseup", this._onDocPointerUp), this._addTemporaryEventListener(l, "mousemove", this._onContainerPointerMove)
            }
        }, o._onContainerPointerMove = function(t) {
            var e = this._state,
                n = "touchmove" === t.type,
                i = n ? t.changedTouches && t.changedTouches[0] : t;
            if (!n || i.identifier === this._touchId) {
                e.altKey = t.altKey, e.ctrlKey = t.ctrlKey, e.metaKey = t.metaKey, e.shiftKey = t.shiftKey;
                var o = this._config.constrain;
                if (o && "horizontal" !== o || (e.clientX = i.clientX, e.deltaX = i.pageX - e.startPageX, e.pageX = i.pageX), o && "vertical" !== o || (e.clientY = i.clientY, e.deltaY = i.pageY - e.startPageY, e.pageY = i.pageY), this._updateScrollDelta(), e.dragging) this._updateElementUnderPointer(), this._config.autoScroll && this._autoScroll(), this._drag();
                else if (e.pending && !n) {
                    var r = this._config.minDistance;
                    (Math.abs(e.deltaX) > r || Math.abs(e.deltaY) > r) && this._startDrag()
                }
            }
        }, o._onDocContextMenu = function(t) {
            t.preventDefault()
        }, o._onDocKeyDown = function(t) {
            27 === t.keyCode && (this.cancel(), t.preventDefault())
        }, o._onDocPointerMove = function(t) {
            t.preventDefault()
        }, o._onDocPointerUp = function(t) {
            var e = this._state,
                n = "touchend" === t.type || "touchcancel" === t.type || "touchleave" === t.type,
                i = n ? t.changedTouches && t.changedTouches[0] : t;
            if ((!n || i.identifier === this._touchId) && (e.dragging || e.pending)) {
                e.dragging && (e.altKey = t.altKey, e.ctrlKey = t.ctrlKey, e.metaKey = t.metaKey, e.shiftKey = t.shiftKey, t.preventDefault());
                var o = this;
                setTimeout(function() {
                    o._endDrag()
                }, 1)
            }
        }, o._onDocScroll = function() {
            this._state.pending && this._endDrag()
        }, o._onDocSelectStart = function(t) {
            t.preventDefault()
        }, t.cancelMove = function(t) {
            t.style.left = "", t.style.position = "", t.style.top = ""
        }, t.moveElement = function(t, e, i) {
            var o = n.win;
            n.setPosition(t, {
                left: o.pageXOffset + e,
                top: o.pageYOffset + i
            })
        }, module.exports = t
    }(), SM.currentModule = null
}, "", {
    requires: ["lodash", "sm", "sm-dom", "sm-event-emitter"]
});
YUI.add("sm-dropdown-view", function(e) {
    SM.currentModule = "sm-dropdown-view";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        var t = e.Template.Micro,
            n = e.Node,
            o = {
                OPEN: "open",
                OPENING: "opening",
                CLOSED: "closed",
                CLOSING: "closing"
            };
        e.namespace("SM.Views").Dropdown = e.Base.create("sm-dropdown-view", e.View, [], {
            containerTemplate: "<button />",
            _selectContainerTemplate: t.compile('<div class="sm-dropdown-select"><%== data.renderedSelect %></div>'),
            _selectedOptionContainerTemplate: t.compile('<span class="sm-dropdown-option-selected"><%== data.renderedSelectedOption %></span>'),
            _optionsContainerTemplate: '<ul class="sm-dropdown-options" />',
            _availableOptionContainerTemplate: t.compile('<li class="sm-dropdown-option" data-index="<%== data.optionIndex %>" data-value="<%== data.value %>" data-label="<%== data.label %>"><%== data.renderedOption %></li>'),
            _dropdownState: null,
            _selectedOption: null,
            _valueMap: null,
            initializer: function(e) {
                this._width = this.get("width"), this._height = this.get("height"), this._valueMap = {}
            },
            destructor: function() {
                this._detachDropdownEvents()
            },
            render: function() {
                var t, s, i = this.get("container"),
                    a = this.get("items"),
                    l = this.get("availableOptionTemplate"),
                    d = this.get("selectTemplate"),
                    r = this.get("classNames"),
                    p = n.create(this._optionsContainerTemplate),
                    c = this._width,
                    h = this._getOptionsPanel();
                i.addClass("sm-dropdown"), this.get("noChrome") ? i.addClass("sm-nochrome") : i.removeClass("sm-nochrome"), r.optionsContainer && p.addClass(r.optionsContainer.join(" "));
                for (var u = 0; u < a.length; u++) s = a[u], t = n.create(this._availableOptionContainerTemplate({
                    optionIndex: u,
                    label: s.label,
                    value: s.value,
                    renderedOption: l(s)
                })), r.optionContainer && t.addClass(r.optionContainer.join(" ")), p.append(t), this._valueMap[s.value] = u;
                return this._selectNode = n.create(this._selectContainerTemplate({
                    renderedSelect: d()
                })), p.setStyle("height", this.get("height")), i.empty().setHTML(this._selectNode).addClass("sm-dropdown-" + o.CLOSED), h.setStdModContent(e.WidgetStdMod.BODY, p, e.WidgetStdMod.REPLACE), c || p.setStyle("width", this._calculateMinWidth()), this._attachDropdownEvents(), this._dropdownState = o.CLOSED, this
            },
            open: function() {
                return this._getOptionsPanel().show(), this
            },
            close: function() {
                return this._getOptionsPanel().hide(), this
            },
            setSelectedValue: function(e, t) {
                var n = this.get("items"),
                    o = this.get("selectedOptionTemplate"),
                    s = this._valueMap[e],
                    i = n[s];
                this._selectNode;
                this.selectedItem = i, this.set("value", e, t), e ? this._selectNode.setHTML(this._selectedOptionContainerTemplate({
                    selectedValue: e,
                    renderedSelectedOption: o(i)
                })) : this._selectNode.setHTML(this.get("selectTemplate")())
            },
            _getOptionsPanel: function() {
                if (!this._optionsPanel) {
                    var t = this._width,
                        n = {
                            zIndex: 1,
                            render: !0,
                            visible: !1,
                            hideOn: [{
                                eventName: "clickoutside"
                            }]
                        };
                    t && (n.width = t), this._optionsPanel = new e.SM.Panel(n), this._optionsPanel.get("boundingBox").addClass("sm-dropdown-options-panel")
                }
                return this._optionsPanel
            },
            _calculateMinWidth: function() {
                var t, n, o = this.get("container"),
                    s = o.inDoc(),
                    i = this._getOptionsPanel(),
                    a = i.getStdModNode(e.WidgetStdMod.BODY).one(".sm-dropdown-options");
                return s || (o.setStyle("position", "absolute"), o.appendTo(e.one("body"))), t = parseInt(this._selectNode.get("offsetWidth"), 10), n = parseInt(a.get("offsetWidth"), 10), s || (o.setStyle("position", null), o.remove()), (t > n ? t : n) + "px"
            },
            _attachDropdownEvents: function() {
                var t = this.get("container"),
                    n = this._getOptionsPanel();
                this._detachDropdownEvents(), this._eventHandles = [n.after("visibleChange", function(e) {
                    var n = e.newVal;
                    n ? t.removeClass("sm-dropdown-" + o.CLOSED).addClass("sm-dropdown-" + o.OPEN) : t.removeClass("sm-dropdown-" + o.OPEN).addClass("sm-dropdown-" + o.CLOSED), this._dropdownState = n ? o.OPEN : o.CLOSED
                }, this), t.on("click", this._onDropdownClick, this), e.delegate("click", this._onOptionClick, n.get("boundingBox"), ".sm-dropdown-options > .sm-dropdown-option", this)]
            },
            _detachDropdownEvents: function() {
                new e.EventHandle(this._eventHandles).detach(), this._eventHandles = []
            },
            _onDropdownClick: function(t) {
                var n = this._selectNode,
                    o = this._getOptionsPanel();
                o.get("visible") || (o.align(n, [e.WidgetPositionAlign.TL, e.WidgetPositionAlign.BL]), o.get("boundingBox").get("region").right > e.DOM.winWidth() && o.align(n, [e.WidgetPositionAlign.TR, e.WidgetPositionAlign.BR]), o.show(), o.move(o.get("x") - 1, o.get("y")))
            },
            _onOptionClick: function(e) {
                var t = (this.get("container"), e.currentTarget),
                    n = (t.getData("label"), t.getData("value")),
                    o = this._getOptionsPanel();
                this._selectedOption && this._selectedOption.removeClass("sm-dropdown-option-selected"), t.addClass("sm-dropdown-option-selected"), this._selectedOption = t, o.hide(), this.setSelectedValue(n)
            }
        }, {
            STATES: o,
            ATTRS: {
                availableOptionTemplate: {
                    value: null,
                    getter: function(e) {
                        return e && "function" != typeof e && (e = t.compile(e), this._setStateVal("availableOptionTemplate", e)), e
                    }
                },
                classNames: {
                    value: {}
                },
                height: {
                    value: 300,
                    getter: function(e) {
                        return e && "number" == typeof e && (e = parseInt(e, 10) + "px"), e
                    }
                },
                items: {
                    value: null
                },
                noChrome: {
                    value: !1
                },
                optionsContainerTemplate: {
                    valueFn: function(e) {
                        return '<ul class="sm-dropdown-options />'
                    }
                },
                selectTemplate: {
                    valueFn: function(e) {
                        return t.compile('<span class="sm-dropdown-select-default"><span class="sm-dropdown-select-text">' + this.get("selectText") + '</span><span class="sm-form-field-select-arrow sm-fonticon-sml sm-fonticon-AngleBracketDown"></span></span>')
                    },
                    readOnly: !0
                },
                selectText: {
                    value: "Choose..."
                },
                selectedOptionTemplate: {
                    valueFn: function(e) {
                        return t.compile('<span><span class="sm-dropdown-selected-text"><%= data.label %></span><span class="sm-form-field-select-arrow sm-fonticon-sml sm-fonticon-AngleBracketDown"></span></span>')
                    },
                    getter: function(e) {
                        return e && "function" != typeof e && (e = t.compile(e), this._setStateVal("selectedOptionTemplate", e)), e
                    }
                },
                value: {},
                width: {
                    value: null,
                    getter: function(e) {
                        return e && "number" == typeof e && (e = parseInt(e, 10) + "px"), e
                    }
                }
            }
        })
    }(), SM.currentModule = null
}, "", {
    requires: ["view", "node", "template-micro", "sm-panel"]
});
YUI.add("sm-editor-toolbar", function(e) {
    SM.currentModule = "sm-editor-toolbar";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        var t = e.Base.create("editorToolbar", e.Plugin.Base, [], {
            initializer: function() {
                this.editor = this.get("host"), this.container = e.Node.create("<div></div>"), this.textStyleDropdown = new e.SM.Views.Dropdown({
                    availableOptionTemplate: '<div style="padding: 8px 16px;" unselectable="on"><<%=data.value%>><%=data.label%></<%=data.value%>></div>',
                    command: "formatBlock",
                    height: "auto",
                    items: [{
                        label: "Heading - 1",
                        value: "h1"
                    }, {
                        label: "Heading - 2",
                        value: "h2"
                    }, {
                        label: "Heading - 3",
                        value: "h3"
                    }, {
                        label: "Heading - 4",
                        value: "h4"
                    }, {
                        label: "Normal",
                        value: "p"
                    }],
                    selectText: "",
                    width: 200
                }), this.textSizeDropdown = new e.SM.Views.Dropdown({
                    availableOptionTemplate: '<% data.tag || (data.tag = "span") %><div style="padding: 8px 16px;" unselectable="on"><%=data.label%></div>',
                    command: "fontSize",
                    height: "auto",
                    items: [{
                        label: "",
                        value: ""
                    }, {
                        label: "12",
                        value: "12px"
                    }, {
                        label: "14",
                        value: "14px"
                    }, {
                        label: "16",
                        value: "16px"
                    }, {
                        label: "20",
                        value: "20px"
                    }, {
                        label: "24",
                        value: "24px"
                    }, {
                        label: "32",
                        value: "32px"
                    }, {
                        label: "44",
                        value: "44px"
                    }, {
                        label: "56",
                        value: "56px"
                    }],
                    selectText: "",
                    width: 50
                }), this.editor._rendered && this.render(), this._attachEvents()
            },
            destructor: function() {
                this._detachEvents()
            },
            render: function() {
                var t = this.container;
                return this.textStyleDropdown.render().get("container").addClass("sm-editor-cmd-textstyle"), this.textSizeDropdown.render().get("container").addClass("sm-editor-cmd-textsize"), t.addClass("sm-editor-toolbar").append(this.textStyleDropdown.get("container")).append(this.textSizeDropdown.get("container")).append(e.SM.Templates.buttonGroup({
                    buttons: [{
                        className: "sm-editor-toggle-cmd sm-editor-cmd-bold",
                        icon: "Bold",
                        title: "Bold",
                        value: "bold"
                    }, {
                        className: "sm-editor-toggle-cmd sm-editor-cmd-italic",
                        icon: "Italic",
                        title: "Italic",
                        value: "italic"
                    }, {
                        className: "sm-editor-toggle-cmd sm-editor-cmd-underline",
                        icon: "Underline",
                        title: "Underline",
                        value: "underline"
                    }],
                    size: "small"
                })).append(e.SM.Templates.buttonGroup({
                    buttons: [{
                        className: "sm-editor-toggle-cmd sm-editor-cmd-justifyleft",
                        icon: "TextStyleAlignLeft",
                        title: "Align Left",
                        value: "justifyLeft"
                    }, {
                        className: "sm-editor-toggle-cmd sm-editor-cmd-justifycenter",
                        icon: "TextStyleCenter",
                        title: "Center",
                        value: "justifyCenter"
                    }, {
                        className: "sm-editor-toggle-cmd sm-editor-cmd-justifyright",
                        icon: "TextStyleAlignRight",
                        title: "Align Right",
                        value: "justifyRight"
                    }, {
                        className: "sm-editor-toggle-cmd sm-editor-cmd-justifyfull",
                        icon: "TextStyleJustify",
                        title: "Justify",
                        value: "justifyFull"
                    }],
                    size: "small"
                })).append(e.SM.Templates.button({
                    className: "sm-editor-cmd-createlink",
                    icon: "Link",
                    size: "small"
                })), this.editor.get("container").insert(t, this.editor._inputNode), this
            },
            showLinkDialog: function(t) {
                var i = this._createLinkDialog();
                return i.render(), i.form.get("model").setAttrs({
                    text: t.text || "",
                    href: t.href || "",
                    target: "_self" === t.target
                }), e.Promise(function(e, t) {
                    i.on("confirm", function() {
                        var t = [],
                            i = this.form,
                            a = i.get("model").toJSON(),
                            n = /^(mailto:)?([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
                        a.target = a.target ? "_blank" : "_self", "" === a.text && t.push({
                            Field: "text",
                            Message: "Text cannot be blank"
                        }), "" === a.href && t.push({
                            Field: "href",
                            Message: "Links need to go somewhere!"
                        }), a.href.trim().match(n) ? a.href = a.href.replace(/^(mailto:?)?(.*)/, "mailto:$2") : a.href = a.href.replace(/^(http(s)?:\/\/)?(.*)/, "http$2://$3"), t.length ? i.setErrors(t) : (this.hide(), e(a))
                    }), i.on("cancel", function() {
                        this.hide(), t()
                    }), i.show()
                })
            },
            _attachEvents: function() {
                var e = this.container,
                    t = this.editor;
                this._toolbarHandles = [t.after("selectionChange", this._afterHostSelectionChange, this), e.delegate("click", this._onToggleCmdClick, ".sm-button.sm-editor-toggle-cmd", this), e.delegate("click", this._onLinkCmdClick, ".sm-button.sm-editor-cmd-createlink", this), this.textStyleDropdown.after("valueChange", this._afterValueCmdChange, this), this.textSizeDropdown.after("valueChange", this._afterValueCmdChange, this)], t._rendered || t.onceAfter("render", this.render, this)
            },
            _createLinkDialog: function() {
                var t = new e.SM.Panel({
                    centered: !0,
                    modal: !0,
                    smbuttons: [{
                        value: "cancel",
                        label: "Cancel"
                    }, {
                        value: "confirm",
                        label: "Add Link",
                        skin: "submit"
                    }],
                    title: "Add Link",
                    titleLocation: "outside",
                    width: 400,
                    zIndex: 1
                });
                return t.form = new e.SM.Form({
                    fields: [{
                        label: "Text",
                        name: "text",
                        type: "text"
                    }, {
                        label: "URL",
                        name: "href",
                        type: "text"
                    }, {
                        label: "Open in a new window",
                        labelOn: "Yes",
                        labelOff: "No",
                        name: "target",
                        type: "toggle"
                    }]
                }), t.on("render", function() {
                    this.setStdModContent(e.WidgetStdMod.BODY, this.form.render().get("container"))
                }), t.on("visibleChange", function(e) {
                    e.newVal || this.destroy()
                }), t.get("contentBox").delegate("click", function(e) {
                    var t = e.currentTarget,
                        i = t.getData("value");
                    this.fire(i)
                }, ".sm-button", t), t
            },
            _detachEvents: function() {
                new e.EventHandle(this._toolbarHandles).detach()
            },
            _syncSelectionState: function() {
                var t, i = this.editor;
                e.Object.each(i.commands, function(e, a) {
                    var n = i.query(a);
                    switch (a) {
                        case "fontSize":
                            this.textSizeDropdown.setSelectedValue(n, {
                                src: "sync"
                            });
                            break;
                        case "formatBlock":
                            1 === n.size() ? (n = n.item(0).get("tagName").toLowerCase(), "div" === n && (n = "p")) : n = null, this.textStyleDropdown.setSelectedValue(n, {
                                src: "sync"
                            });
                            break;
                        case "bold":
                        case "createLink":
                        case "italic":
                        case "justifyCenter":
                        case "justifyLeft":
                        case "justifyRight":
                        case "justifyFull":
                        case "underline":
                            t = this.container.one(".sm-editor-cmd-" + a.toLowerCase()), n ? t.replaceClass("sm-button-skin-default", "sm-button-skin-submit") : t.replaceClass("sm-button-skin-submit", "sm-button-skin-default")
                    }
                }, this)
            },
            _afterHostSelectionChange: function() {
                this._syncSelectionState()
            },
            _afterTextStyleChange: function(e) {
                if ("sync" !== e.src) {
                    var t = e.currentTarget,
                        i = t.selectedItem;
                    this.editor.command("formatBlock", i.tag)
                }
            },
            _afterValueCmdChange: function(e) {
                if ("sync" !== e.src) {
                    var t = e.currentTarget,
                        i = t.selectedItem;
                    this.editor.command(t.get("command"), i.value)
                }
            },
            _onLinkCmdClick: function(t) {
                if (1 === t.button) {
                    var i = this.editor;
                    i.isLink() ? i.command("unlink") : this.showLinkDialog({
                        text: i.selection.range().toString()
                    }).then(e.bind(i.command, i, "createLink"))
                }
            },
            _onToggleCmdClick: function(e) {
                if (1 === e.button) {
                    var t = e.currentTarget,
                        i = t.getData("value"),
                        a = this.editor.command(i, "toggle");
                    a ? t.replaceClass("sm-button-skin-default", "sm-button-skin-submit") : t.replaceClass("sm-button-skin-submit", "sm-button-skin-default")
                }
            }
        }, {
            NS: "EditorToolbar",
            NAME: "toolbar"
        });
        e.namespace("SM.Editor").Toolbar = t
    }(), SM.currentModule = null
}, "", {
    requires: ["base", "gallery-sm-editor", "plugin", "promise", "sm-dropdown-view"]
});
YUI.add("sm-event-emitter", function(t) {
    SM.currentModule = "sm-event-emitter";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";

        function e() {}
        e.prototype.addTarget = function(t) {
            return this !== t && (this._initEventEmitter(), this._eventEmitter.targets.push(t)), this
        }, e.prototype.emit = function(t) {
            var e = this._eventEmitter;
            if (!e) return this;
            for (var r, n, i, s = [], u = [this], o = {}, h = 0; h < u.length; ++h) r = u[h], n = r._eventEmitter, n && !o[n.id] && (i = n.events[t], i && s.push.apply(s, i), n.targets.length && u.push.apply(u, n.targets), o[n.id] = !0);
            if (!s.length) return this;
            var v = arguments.length,
                a = new Array(v);
            for (h = 1; v > h; ++h) a[h - 1] = arguments[h];
            var p, l = s.length;
            for (h = 0; l > h; ++h) p = s[h], a[v - 1] = {
                currentTarget: p.currentTarget,
                handle: p,
                target: this,
                type: p.type
            }, p.listener.apply(p.thisObj, a);
            return this
        }, e.prototype.on = function(t, e, r) {
            this._initEventEmitter();
            var n, i = this._eventEmitter.events;
            return n = {
                currentTarget: this,
                listener: e,
                thisObj: r || this,
                type: t
            }, i[t] || (i[t] = []), i[t].push(n), n
        }, e.prototype.removeAllListeners = function(t) {
            var e = this._eventEmitter && this._eventEmitter.events;
            return e && (t ? e[t] && delete e[t] : this._eventEmitter.events = {}), this
        }, e.prototype.removeListener = function(t) {
            var e = this._eventEmitter && this._eventEmitter.events,
                r = e && e[t.type];
            if (r) {
                for (var n = r.length; --n > -1;)
                    if (r[n] === t) {
                        r.splice(n, 1);
                        break
                    }
                0 === r.length && delete e[t.type], t.listener = null, t.thisObj = null
            }
            return this
        }, e.prototype.removeTarget = function(t) {
            var e = this._eventEmitter && this._eventEmitter.targets;
            if (e && e.length) {
                var r = e.lastIndexOf(t);
                r > -1 && e.splice(r, 1)
            }
            return this
        }, e.prototype._initEventEmitter = function() {
            this._eventEmitter || (e._guidCount || (e._guidCount = 0), Object.defineProperty(this, "_eventEmitter", {
                value: {
                    events: {},
                    id: "" + (e._guidCount += 1) + Math.random(),
                    targets: []
                }
            }))
        }, t.namespace("SM").EventEmitter = module.exports = e
    }(), SM.currentModule = null
}, "", {
    requires: ["sm"]
});
YUI.add("sm-facebook", function(e) {
    SM.currentModule = "sm-facebook";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        var t = "connect.facebook.net/en_US/sdk.js",
            n = "connect.facebook.net/en_US/sdk/debug.js",
            o = "https://graph.facebook.com",
            SM = window.SM;
        e.namespace("SM").Facebook = module.exports = e.Base.create("sm-facebook", e.Base, [], {
            fbRootTemplate: '<div id="fb-root"></div>',
            loginButtonTemplate: '<fb:login-button<% if (data.scope) { %> scope="<%= data.scope %>"<% } %><% if (data.size) { %> size="<%= data.size %>"<% } %><% if (data.width) { %> width="<%= data.width %>"<% } %><% if (data.showFaces) { %> show-faces="<%= data.showFaces %>"<% } %><% if (data.registrationUrl) { %> registration-url="<%= data.registrationUrl %>"<% } %><% if (data.maxRows) { %> max-rows="<%= data.maxRows %>"<% } %>></fb:login-button>',
            likeButtonTemplate: '<fb:like<% if (data.href) { %> href="<%= data.href %>"<% } %><% if (data.send) { %> send="<%= data.send %>"<% } %><% if (data.layout) { %> layout="<%= data.layout %>"<% } %><% if (data.showFaces) { %> show_faces="<%= data.showFaces %>"<% } %><% if (data.width) { %> width="<%= data.width %>"<% } %><% if (data.action) { %> action="<%= data.action %>"<% } %><% if (data.font) { %> font="<%= data.font %>"<% } %><% if (data.colorScheme) { %> colorscheme="<%= data.colorScheme %>"<% } %><% if (data.ref) { %> ref="<%= data.ref %>"<% } %>></fb:like>',
            initializer: function() {
                this._subscribedFBEvents = []
            },
            destructor: function() {
                window.FB && e.Array.each(this._subscribedFBEvents, function(e) {
                    window.FB.Event.unsubscribe(e.event, e.cb)
                })
            },
            getLoginStatus: function(t) {
                var n = this;
                return new e.Promise(function(e) {
                    n._loadSDK().then(function(n) {
                        n.getLoginStatus(function(n) {
                            e(t ? n : n.status)
                        })
                    })
                })
            },
            api: function(t, n, o) {
                var a = this;
                return new e.Promise(function(e) {
                    a._loadSDK().then(function(a) {
                        a.api(t, n, o, e)
                    })
                })
            },
            exchangeAccessToken: function(t) {
                return new e.Promise(function(n) {
                    var o = "/services/social/api/facebook/exchangetoken/",
                        a = {
                            method: "POST",
                            data: "accessToken=" + t
                        };
                    e.SM.io(o, a).then(n)
                })
            },
            getProfile: function() {
                var t = this;
                return new e.Promise(function(e) {
                    t._loadSDK().then(function(t) {
                        t.api("/me", function(t) {
                            t.picture = o + "/" + t.id + "/picture", e(t)
                        })
                    })
                })
            },
            generateSocialAccountProfile: function(e) {
                var t = "";
                e.email && "object" == typeof e.email && -1 === e.email.indexOf("proxymail") && (t = e.email);
                var n = "";
                return e.link && "object" == typeof e.link && -1 === e.link.indexOf("profile.php") && (n = e.link.replace(/https?:\/\/www\.facebook\.com\//, "").replace(/\./g, "-")), {
                    accountID: e.id,
                    accountPhoto: e.picture,
                    accountName: e.name,
                    accountLink: e.link,
                    accountEmail: t,
                    formEmail: t,
                    formNameSuggestion: n
                }
            },
            login: function(t, n) {
                var o = this,
                    a = {
                        return_scopes: !0
                    };
                return t && (a.scope = t), n && (a.auth_type = "rerequest"), new e.Promise(function(e) {
                    o._loadSDK().then(function(t) {
                        t.login(function(t) {
                            e(t)
                        }, a)
                    })
                })
            },
            renderLoginButton: function(t, n) {
                var o = this,
                    a = e.Template.Micro.compile(this.loginButtonTemplate);
                return new e.Promise(function(i) {
                    o._loadSDK().then(function(c) {
                        t = e.Node.one(t), t.append(a(n)), c.XFBML.parse(t.getDOMNode()), o._subscribeFBEvent(c, "auth.authResponseChange", i)
                    })
                })
            },
            renderSmugLoginButton: function(t, n) {
                n || (n = {});
                var o = this;
                return new e.Promise(function(a) {
                    var i = e.one(t).appendChild(e.SM.Templates.button({
                        className: n.className || "sm-fb-login",
                        icon: n.icon || "Facebook",
                        label: n.label || "",
                        value: n.value || "fblogin",
                        size: n.size || "small"
                    }));
                    o._loadSDK().then(function(e) {
                        var t = i.on("click", function() {
                            e.login(function(e) {
                                "connected" === e.status && (t.detach(), a({
                                    authResponse: e.authResponse,
                                    status: e.status
                                }))
                            })
                        })
                    })
                })
            },
            renderLikeButton: function(t, n) {
                var o = e.Template.Micro.compile(this.likeButtonTemplate);
                return this._loadSDK().then(function(a) {
                    return t = e.Node.one(t), t.append(o(n)), a.XFBML.parse(t.getDOMNode()), t
                })
            },
            _loadSDK: function() {
                var t = this,
                    n = t._getSDKURL();
                return new e.Promise(function(o) {
                    window.FB ? o(window.FB) : (e.Node.one(document.body).prepend(e.Node.create(t.fbRootTemplate)), e.Get.js(n, {
                        onSuccess: function() {
                            window.FB && (window.FB.init({
                                appId: SM.env.facebook.appId,
                                cookie: !0,
                                status: !0,
                                version: SM.env.facebook.version,
                                xfbml: !0
                            }), o(window.FB))
                        },
                        onFailure: function() {},
                        attributes: {
                            id: "facebook-jssdk"
                        }
                    }))
                })
            },
            _getSDKURL: function() {
                return "//" + (this.get("debug") ? n : t)
            },
            _subscribeFBEvent: function(e, t, n) {
                return e.Event.subscribe(t, n), this._subscribedFBEvents.push({
                    event: t,
                    cb: n
                }), this
            }
        }, {
            ATTRS: {
                debug: {}
            },
            LIKE_BUTTON_OPTIONS: {
                LAYOUT: {
                    STANDARD: "standard",
                    BUTTON_COUNT: "button_count",
                    BOX_COUNT: "box_count"
                },
                ACTION: {
                    LIKE: "like",
                    RECOMMEND: "recommend"
                },
                FONT: {
                    ARIAL: "arial",
                    LUCIDA_GRANDE: "lucida grande",
                    SEGEO_UI: "segeo ui",
                    TAHOMA: "tahoma",
                    TREBUCHET_MS: "trebuchet ms",
                    VERDANA: "verdana"
                },
                COLOR_SCHEME: {
                    LIGHT: "light",
                    DARK: "dark"
                }
            }
        })
    }(), SM.currentModule = null
}, "", {
    requires: ["base", "node", "template-micro", "promise"]
});
YUI.add("sm-fields", function(e) {
    SM.currentModule = "sm-fields";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        e.namespace("SM.Fields").FieldError = {
            setError: function(e) {
                this.setNotice(e, "error")
            },
            setWarning: function(e) {
                this.setNotice(e, "warning")
            },
            setNotice: function(e, i) {
                var t = this._notices || (this._notices = {}),
                    s = this.container,
                    r = this.errorNode || (this.errorNode = s.appendChild("<div/>"));
                s.addClass("sm-form-field-" + i), t[i] = e, r.addClass("sm-form-field-" + i + "-msg").set("text", t.error || t.warning || e)
            },
            setMarkupError: function(e) {
                this.setMarkupNotice(e, "error")
            },
            setMarkupWarning: function(e) {
                this.setMarkupNotice(e, "warning")
            },
            setMarkupNotice: function(e, i) {
                var t = this._notices || (this._notices = {}),
                    s = this.container,
                    r = this.errorNode || (this.errorNode = s.appendChild(e));
                t[i] = e, r.addClass("sm-form-field-" + i + "-msg"), s.addClass("sm-form-field-" + i)
            },
            clearError: function() {
                this.clearNotice("error")
            },
            clearWarning: function() {
                this.clearNotice("warning")
            },
            clearNotice: function(e) {
                var i, t = this._notices;
                if (this.container.removeClass("sm-form-field-" + e), t) {
                    if (delete t[e], i = t.error || t.warning, !i)
                        for (e in t) t.hasOwnProperty(e) && (i = t[e]);
                    i ? this.errorNode && this.errorNode.set("text", i) : this.errorNode && (this.errorNode.remove(!0), this.errorNode = null)
                }
            }
        }, e.namespace("SM.Fields").Textbox = function(e) {
            this.fieldCfg = e
        }, e.SM.Fields.Textbox.prototype = {
            render: function(i) {
                if (this.container = i, i.addClass("sm-form-field-overhead"), this.label = e.Node.create(e.SM.Templates.label(this.fieldCfg)), i.append(this.label), this.fieldCfg.suffix || this.fieldCfg.prefix || this.fieldCfg.iconSuffix || this.fieldCfg.iconPrefix) {
                    var t = e.Node.create(e.SM.Templates.textboxLabel(this.fieldCfg));
                    this.field = t.one("input"), this.field.on({
                        focus: function() {
                            t.addClass("sm-focus")
                        },
                        blur: function() {
                            t.removeClass("sm-focus")
                        }
                    }), i.appendChild('<div class="sm-form-field-container">').append(t)
                } else this.field = e.Node.create(e.SM.Templates.textbox(this.fieldCfg)), i.appendChild('<div class="sm-form-field-container">').append(this.field);
                return this.description = e.Node.create(e.SM.Templates.fieldDescription(this.fieldCfg)), i.append(this.description), this
            },
            setValue: function(e) {
                this.field.set("value", e)
            },
            setDescription: function(e) {
                this.description.setHTML(e)
            },
            getValue: function() {
                return this.field.get("value")
            },
            enable: function() {
                this.field.removeAttribute("disabled")
            },
            disable: function() {
                this.field.setAttribute("disabled", "disabled")
            },
            destroy: function() {
                this.label.remove().destroy(!0)
            }
        }, e.mix(e.SM.Fields.Textbox.prototype, e.SM.Fields.FieldError), e.namespace("SM.Fields").Checkbox = function(e) {
            this.fieldCfg = e, this._unselectedValue = void 0 === e.unselectedValue ? "" : String(e.unselectedValue)
        }, e.SM.Fields.Checkbox.prototype = {
            render: function(i) {
                return this.field = e.Node.create(e.SM.Templates.checkbox(this.fieldCfg)), this.field.on("click", this._onCheckboxClick, this), i.append(this.field), this
            },
            _onCheckboxClick: function(e) {
                e.preventDefault(), this.field.toggleClass("yui3-button-selected")
            },
            getValue: function() {
                return this.field.hasClass("yui3-button-selected") ? this.field.get("value") : this._unselectedValue
            },
            setValue: function(e) {
                this.field.set("value", e)
            },
            setSelected: function(e) {
                this.field.toggleClass("yui3-button-selected", e)
            },
            destroy: function() {
                this.field.remove().destroy(!0)
            }
        }
    }(), SM.currentModule = null
}, "", {
    requires: ["sm-templates-form"]
});
YUI.add("sm-flashslideshow", function(e) {
    SM.currentModule = "sm-flashslideshow";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        var s = e.DOM,
            t = e.Node,
            a = e.Lang,
            l = "slideshowLoaded",
            o = new e.CustomEvent(l, {}),
            i = "slideshowOpened",
            n = new e.CustomEvent(i, {}),
            r = "rpc.slideshow.getalbum",
            d = "rpc.slideshow.getkeyword",
            h = "rpc.slideshow.getdate",
            u = "rpc.slideshow.getpopular",
            c = "album",
            g = "keyword",
            w = "popular",
            m = "date",
            p = "/ria/ninjaLoader-" + SM.env.ninjaLoader.version + ".swf",
            f = "/ria/ShizamSlides-" + SM.env.slideshow.version + ".swf",
            S = "boundingBox",
            v = "galleryUrl",
            y = "slideshowPlayerId",
            b = "slideshowPlayer",
            _ = "sildeshowLoaded",
            M = "fullscreen",
            U = "images",
            I = "galleryRequestData",
            k = null,
            D = e.Base.create("sm-flashslideshow", e.Widget, [], {
                CONTENT_TEMPLATE: null,
                initializer: function() {
                    this.set(y, e.guid())
                },
                destructor: function() {},
                renderUI: function() {
                    this.get(M) === !0 ? this._renderFullScreenSlideshow() : this._renderSlideshow()
                },
                bindUI: function() {
                    this.get(M) === !0 && (o.on(this._handleSlideshowLoaded, this), n.on(this._handleSlideshowOpened, this))
                },
                syncUI: function() {},
                _renderFullScreenSlideshow: function() {
                    var a = this.get(S),
                        l = {
                            fileURL: "",
                            photosHost: "",
                            galleryURL: escape(this.get(v)),
                            captions: "true",
                            newWindow: "false",
                            transparent: "true",
                            showLogo: "false",
                            showThumbs: "true",
                            fetchAPIData: "false",
                            showButtons: "true",
                            crossFadeSpeed: "351",
                            showSpeed: "true",
                            waitforClick: "true",
                            type: "fullScreen",
                            eventHandler: "SM.FlashSlideshowEventHandler"
                        },
                        o = {},
                        i = {
                            id: this.get(y),
                            version: "9",
                            bgcolor: "#000000",
                            backgroundColor: "#000000",
                            allowFullSCreen: "true",
                            wmode: "transparent",
                            allowScriptAccess: "always",
                            allowNetworking: "all",
                            play: "true",
                            loop: "false",
                            quality: "best",
                            width: "100%",
                            height: "100%"
                        },
                        n = null,
                        r = this._getSWFDomain(),
                        d = e.guid(),
                        h = t.create('<div id="' + d + '"></div>');
                    swfUrl = this._getNinjaUrl(), playerUrl = this._getPlayerUrl(), l.fileURL = playerUrl, l.photosHost = r, l.mainHost = SM.env.host.main, l.allowedDomain = location.host, a.append(h), swfobject.embedSWF(swfUrl, d, "100%", "100%", "9.0.0", "expressInstall.swf", l, o, i), n = s.byId(this.get(y)), this.set(b, n), a.addClass(this.getClassName("fullscreen"))
                },
                _renderSlideshow: function() {
                    var a = this.get(S),
                        l = null,
                        o = this._getSWFDomain(),
                        i = this._getPlayerUrl(),
                        n = e.guid(),
                        r = t.create('<div id="' + n + '"></div>'),
                        d = this.get("options"),
                        h = d.height ? d.height : "500px",
                        u = {
                            id: this.get(y),
                            version: "9",
                            bgcolor: "#000000",
                            backgroundColor: "#000000",
                            allowFullSCreen: "true",
                            wmode: "transparent",
                            allowScriptAccess: "always",
                            allowNetworking: "all",
                            play: "true",
                            loop: "false",
                            quality: "best",
                            width: "100%"
                        },
                        c = d;
                    h.indexOf("px") < 0 && h.indexOf("%") < 0 && (h += "px"), u.height = h, c.fileURL = i, c.photosHost = o, c.mainHost = SM.env.host.main, c.allowedDomain = location.host, a.append(r), swfobject.embedSWF(i, n, "100%", h, "9.0.0", "expressInstall.swf", c, {}, u), l = s.byId(this.get(y)), this.set(b, l)
                },
                _getSWFDomain: function() {
                    return location.host.match(".smugmug.net") || location.host.match(".smugmug.com") ? SM.env.host.cdn : location.host
                },
                _getNinjaUrl: function() {
                    return SM.env.host.http + this._getSWFDomain() + p
                },
                _getPlayerUrl: function() {
                    return SM.env.host.http + this._getSWFDomain() + f
                },
                _handleSlideshowLoaded: function(e) {
                    this.set(_, !0), this._getImages()
                },
                _handleSlideshowOpened: function(e) {
                    var s = this.get(U),
                        t = this.get(b),
                        l = this.get(_);
                    a.isNull(s) === !1 && l === !0 ? t.extHookHandler({
                        cmd: "loadData",
                        data: {
                            Images: s
                        }
                    }) : t.preCallback({
                        cmd: "beginLoad"
                    })
                },
                _getImages: function() {
                    var t = this.get(I).getData(),
                        l = t.galleryType,
                        o = {},
                        i = this.get(U),
                        n = this.get(b),
                        p = "";
                    if (a.isNull(i)) {
                        switch (k = k || new e.SM.API, o = e.merge(t, {
                            pageNumber: 1,
                            pageSize: 1e3,
                            thumbSize: "Thumb",
                            imageSize: s.winWidth() + "x" + s.winHeight()
                        }), l.toLowerCase()) {
                            case c:
                                p = r;
                                break;
                            case g:
                                p = d;
                                break;
                            case w:
                                p = u;
                                break;
                            case m:
                                p = h
                        }
                        k.sendRequest({
                            method: p,
                            data: o,
                            callback: {
                                success: this._handleGalleryDataResponse,
                                context: this
                            },
                            cfg: {
                                method: "POST"
                            }
                        })
                    } else n.extHookHandler({
                        cmd: "loadData",
                        data: i
                    })
                },
                _handleGalleryDataResponse: function(e) {
                    var s = e.response,
                        t = s.results,
                        l = this.get(b),
                        o = null;
                    a.isUndefined(t.Images) === !1 && (o = t.Images, this.set(U, o), l.extHookHandler({
                        cmd: "loadData",
                        data: {
                            Images: o
                        }
                    }))
                }
            }, {
                CSS_PREFIX: "sm-flashslideshow",
                ATTRS: {
                    images: {
                        value: null
                    },
                    galleryUrl: {
                        value: ""
                    },
                    slideshowPlayerId: {
                        value: ""
                    },
                    slideshowPlayer: {
                        value: null
                    },
                    sildeshowLoaded: {
                        value: !1
                    },
                    fullscreen: {
                        value: !0
                    },
                    galleryRequestData: {
                        value: null
                    },
                    options: {
                        value: {},
                        setter: function(s) {
                            return e.merge({
                                newWindow: "false",
                                transparent: "true",
                                showLogo: "false",
                                clickToImage: "true",
                                clickUrl: "",
                                captions: "false",
                                showThumbs: "false",
                                autoStart: "true",
                                setSpeed: "med",
                                showSpeed: "false",
                                showButtons: "false",
                                randomStart: "false",
                                randomize: "false",
                                splash: "",
                                splashDelay: "1000",
                                crossFadeSpeed: "350"
                            }, s)
                        }
                    }
                }
            });
        SM.FlashSlideshowEventHandler = function(e, s) {
            switch (s.type) {
                case i:
                    n.fire();
                    break;
                case l:
                    o.fire()
            }
        }, e.namespace("SM"), e.SM.FlashSlideshow = D
    }(), SM.currentModule = null
}, "", {
    requires: ["base", "dom", "event-custom", "node", "sm-api", "widget"]
});
YUI.add("sm-fonts-dropdown", function(e) {
    SM.currentModule = "sm-fonts-dropdown";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        var e = SM["import"]("sm-fonts"),
            t = SM["import"]("lodash"),
            o = SM["import"]("react"),
            n = SM["import"]("sm-component-dropdown"),
            r = n.DropdownOption,
            l = SM["import"]("sm-component-pure-render"),
            a = function(t) {
                function l() {
                    return babelHelpers.classCallCheck(this, l), babelHelpers.possibleConstructorReturn(this, (l.__proto__ || Object.getPrototypeOf(l)).apply(this, arguments))
                }
                return babelHelpers.inherits(l, t), babelHelpers.createClass(l, [{
                    key: "render",
                    value: function() {
                        var t = this.props,
                            l = void 0,
                            a = void 0;
                        t.defaultFonts.length > 1 && (l = t.defaultFonts.map(this._buildStyledFontOption), a = o.createElement(r, {
                            disabled: !0,
                            key: "separator"
                        }, ""));
                        var s = e.FONT_FAMILIES.map(this._buildFontOption);
                        return o.createElement(n, {
                            defaultValue: t.defaultValue,
                            width: "200px",
                            onSelectionChange: t.onSelectionChange
                        }, l, a, s)
                    }
                }, {
                    key: "componentWillMount",
                    value: function() {
                        var t = this.props.defaultFonts;
                        t && t.map(function(t) {
                            var o = t.value;
                            o && e.loadFont(o)
                        })
                    }
                }, {
                    key: "_buildFontOption",
                    value: function(e) {
                        var t = e.label,
                            n = e.value;
                        return o.createElement(r, {
                            value: n,
                            key: n
                        }, t)
                    }
                }, {
                    key: "_buildStyledFontOption",
                    value: function(e) {
                        var t = e.label,
                            n = e.value,
                            l = {
                                fontFamily: n
                            };
                        return o.createElement(r, {
                            value: n,
                            key: "default" + n,
                            style: l
                        }, t)
                    }
                }]), l
            }(l),
            s = o.PropTypes;
        a.PropTypes = {
            defaultFonts: s.array,
            onSelectionChange: s.func,
            defaultValue: s.string
        }, a.defaultProps = {
            onSelectionChange: t.noop,
            defaultFonts: []
        }, module.exports = exports = a
    }(), SM.currentModule = null
}, "", {
    requires: ["react", "sm", "sm-dom", "classnames", "lodash", "sm-fonts", "sm-component-dropdown", "sm-component-overheadformfield"]
});
YUI.add("sm-fonts", function(e) {
    SM.currentModule = "sm-fonts";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        var a = SM["import"]("sm-dom"),
            l = SM["import"]("sm-uri"),
            n = {
                HEADER_FONTS: [{
                    value: "",
                    label: "(default)"
                }, {
                    value: "Abril Fatface",
                    label: "Abril Fatface"
                }, {
                    value: "Arvo",
                    label: "Arvo"
                }, {
                    value: "Bitter",
                    label: "Bitter"
                }, {
                    value: "Domine",
                    label: "Domine"
                }, {
                    value: "Gravitas One",
                    label: "Gravitas One"
                }, {
                    value: "Lato",
                    label: "Lato"
                }, {
                    value: "Lora",
                    label: "Lora"
                }, {
                    value: "Open Sans",
                    label: "Open Sans"
                }, {
                    value: "Open Sans Condensed",
                    label: "Open Sans Condensed"
                }, {
                    value: "Oswald",
                    label: "Oswald"
                }, {
                    value: "Overlock",
                    label: "Overlock"
                }, {
                    value: "Oxygen",
                    label: "Oxygen"
                }, {
                    value: "Patua One",
                    label: "Patua One"
                }, {
                    value: "Playfair Display",
                    label: "Playfair Display"
                }, {
                    value: "Playfair Display SC",
                    label: "Playfair Display SC"
                }, {
                    value: "Poiret One",
                    label: "Poiret One"
                }, {
                    value: "Poly",
                    label: "Poly"
                }, {
                    value: "Roboto",
                    label: "Roboto"
                }, {
                    value: "Roboto Condensed",
                    label: "Roboto Condensed"
                }, {
                    value: "Roboto Slab",
                    label: "Roboto Slab"
                }, {
                    value: "Raleway",
                    label: "Raleway"
                }, {
                    value: "Six Caps",
                    label: "Six Caps"
                }, {
                    value: "Vollkorn",
                    label: "Vollkorn"
                }, {
                    value: "Wire One",
                    label: "Wire One"
                }],
                BODY_FONTS: [{
                    value: "",
                    label: "(default)"
                }, {
                    value: "Arvo",
                    label: "Arvo"
                }, {
                    value: "Bitter",
                    label: "Bitter"
                }, {
                    value: "Domine",
                    label: "Domine"
                }, {
                    value: "Lato",
                    label: "Lato"
                }, {
                    value: "Lora",
                    label: "Lora"
                }, {
                    value: "Open Sans",
                    label: "Open Sans"
                }, {
                    value: "Oxygen",
                    label: "Oxygen"
                }, {
                    value: "Poly",
                    label: "Poly"
                }, {
                    value: "Roboto",
                    label: "Roboto"
                }, {
                    value: "Roboto Condensed",
                    label: "Roboto Condensed"
                }, {
                    value: "Roboto Slab",
                    label: "Roboto Slab"
                }, {
                    value: "Raleway",
                    label: "Raleway"
                }, {
                    value: "Vollkorn",
                    label: "Vollkorn"
                }],
                FONT_FAMILIES: [{
                    value: "ABeeZee",
                    label: "ABeeZee"
                }, {
                    value: "Abel",
                    label: "Abel"
                }, {
                    value: "Abril Fatface",
                    label: "Abril Fatface"
                }, {
                    value: "Aclonica",
                    label: "Aclonica"
                }, {
                    value: "Acme",
                    label: "Acme"
                }, {
                    value: "Actor",
                    label: "Actor"
                }, {
                    value: "Adamina",
                    label: "Adamina"
                }, {
                    value: "Advent Pro",
                    label: "Advent Pro"
                }, {
                    value: "Aguafina Script",
                    label: "Aguafina Script"
                }, {
                    value: "Akronim",
                    label: "Akronim"
                }, {
                    value: "Aladin",
                    label: "Aladin"
                }, {
                    value: "Aldrich",
                    label: "Aldrich"
                }, {
                    value: "Alef",
                    label: "Alef"
                }, {
                    value: "Alegreya",
                    label: "Alegreya"
                }, {
                    value: "Alegreya SC",
                    label: "Alegreya SC"
                }, {
                    value: "Alex Brush",
                    label: "Alex Brush"
                }, {
                    value: "Alfa Slab One",
                    label: "Alfa Slab One"
                }, {
                    value: "Alice",
                    label: "Alice"
                }, {
                    value: "Alike",
                    label: "Alike"
                }, {
                    value: "Alike Angular",
                    label: "Alike Angular"
                }, {
                    value: "Allan",
                    label: "Allan"
                }, {
                    value: "Allerta",
                    label: "Allerta"
                }, {
                    value: "Allerta Stencil",
                    label: "Allerta Stencil"
                }, {
                    value: "Allura",
                    label: "Allura"
                }, {
                    value: "Almendra",
                    label: "Almendra"
                }, {
                    value: "Almendra Display",
                    label: "Almendra Display"
                }, {
                    value: "Almendra SC",
                    label: "Almendra SC"
                }, {
                    value: "Amarante",
                    label: "Amarante"
                }, {
                    value: "Amaranth",
                    label: "Amaranth"
                }, {
                    value: "Amatic SC",
                    label: "Amatic SC"
                }, {
                    value: "Amethysta",
                    label: "Amethysta"
                }, {
                    value: "Anaheim",
                    label: "Anaheim"
                }, {
                    value: "Andada",
                    label: "Andada"
                }, {
                    value: "Andika",
                    label: "Andika"
                }, {
                    value: "Angkor",
                    label: "Angkor"
                }, {
                    value: "Annie Use Your Telescope",
                    label: "Annie Use Your Telescope"
                }, {
                    value: "Anonymous Pro",
                    label: "Anonymous Pro"
                }, {
                    value: "Antic",
                    label: "Antic"
                }, {
                    value: "Antic Didone",
                    label: "Antic Didone"
                }, {
                    value: "Antic Slab",
                    label: "Antic Slab"
                }, {
                    value: "Anton",
                    label: "Anton"
                }, {
                    value: "Arapey",
                    label: "Arapey"
                }, {
                    value: "Arbutus",
                    label: "Arbutus"
                }, {
                    value: "Arbutus Slab",
                    label: "Arbutus Slab"
                }, {
                    value: "Architects Daughter",
                    label: "Architects Daughter"
                }, {
                    value: "Archivo Black",
                    label: "Archivo Black"
                }, {
                    value: "Archivo Narrow",
                    label: "Archivo Narrow"
                }, {
                    value: "Arimo",
                    label: "Arimo"
                }, {
                    value: "Arizonia",
                    label: "Arizonia"
                }, {
                    value: "Armata",
                    label: "Armata"
                }, {
                    value: "Artifika",
                    label: "Artifika"
                }, {
                    value: "Arvo",
                    label: "Arvo"
                }, {
                    value: "Asap",
                    label: "Asap"
                }, {
                    value: "Asset",
                    label: "Asset"
                }, {
                    value: "Astloch",
                    label: "Astloch"
                }, {
                    value: "Asul",
                    label: "Asul"
                }, {
                    value: "Atomic Age",
                    label: "Atomic Age"
                }, {
                    value: "Aubrey",
                    label: "Aubrey"
                }, {
                    value: "Audiowide",
                    label: "Audiowide"
                }, {
                    value: "Autour One",
                    label: "Autour One"
                }, {
                    value: "Average",
                    label: "Average"
                }, {
                    value: "Average Sans",
                    label: "Average Sans"
                }, {
                    value: "Averia Gruesa Libre",
                    label: "Averia Gruesa Libre"
                }, {
                    value: "Averia Libre",
                    label: "Averia Libre"
                }, {
                    value: "Averia Sans Libre",
                    label: "Averia Sans Libre"
                }, {
                    value: "Averia Serif Libre",
                    label: "Averia Serif Libre"
                }, {
                    value: "Bad Script",
                    label: "Bad Script"
                }, {
                    value: "Balthazar",
                    label: "Balthazar"
                }, {
                    value: "Bangers",
                    label: "Bangers"
                }, {
                    value: "Basic",
                    label: "Basic"
                }, {
                    value: "Battambang",
                    label: "Battambang"
                }, {
                    value: "Baumans",
                    label: "Baumans"
                }, {
                    value: "Bayon",
                    label: "Bayon"
                }, {
                    value: "Belgrano",
                    label: "Belgrano"
                }, {
                    value: "Belleza",
                    label: "Belleza"
                }, {
                    value: "BenchNine",
                    label: "BenchNine"
                }, {
                    value: "Bentham",
                    label: "Bentham"
                }, {
                    value: "Berkshire Swash",
                    label: "Berkshire Swash"
                }, {
                    value: "Bevan",
                    label: "Bevan"
                }, {
                    value: "Bigelow Rules",
                    label: "Bigelow Rules"
                }, {
                    value: "Bigshot One",
                    label: "Bigshot One"
                }, {
                    value: "Bilbo",
                    label: "Bilbo"
                }, {
                    value: "Bilbo Swash Caps",
                    label: "Bilbo Swash Caps"
                }, {
                    value: "Bitter",
                    label: "Bitter"
                }, {
                    value: "Black Ops One",
                    label: "Black Ops One"
                }, {
                    value: "Bokor",
                    label: "Bokor"
                }, {
                    value: "Bonbon",
                    label: "Bonbon"
                }, {
                    value: "Boogaloo",
                    label: "Boogaloo"
                }, {
                    value: "Bowlby One",
                    label: "Bowlby One"
                }, {
                    value: "Bowlby One SC",
                    label: "Bowlby One SC"
                }, {
                    value: "Brawler",
                    label: "Brawler"
                }, {
                    value: "Bree Serif",
                    label: "Bree Serif"
                }, {
                    value: "Bubblegum Sans",
                    label: "Bubblegum Sans"
                }, {
                    value: "Bubbler One",
                    label: "Bubbler One"
                }, {
                    value: "Buda",
                    label: "Buda"
                }, {
                    value: "Buenard",
                    label: "Buenard"
                }, {
                    value: "Butcherman",
                    label: "Butcherman"
                }, {
                    value: "Butterfly Kids",
                    label: "Butterfly Kids"
                }, {
                    value: "Cabin",
                    label: "Cabin"
                }, {
                    value: "Cabin Condensed",
                    label: "Cabin Condensed"
                }, {
                    value: "Cabin Sketch",
                    label: "Cabin Sketch"
                }, {
                    value: "Caesar Dressing",
                    label: "Caesar Dressing"
                }, {
                    value: "Cagliostro",
                    label: "Cagliostro"
                }, {
                    value: "Calligraffitti",
                    label: "Calligraffitti"
                }, {
                    value: "Cambo",
                    label: "Cambo"
                }, {
                    value: "Candal",
                    label: "Candal"
                }, {
                    value: "Cantarell",
                    label: "Cantarell"
                }, {
                    value: "Cantata One",
                    label: "Cantata One"
                }, {
                    value: "Cantora One",
                    label: "Cantora One"
                }, {
                    value: "Capriola",
                    label: "Capriola"
                }, {
                    value: "Cardo",
                    label: "Cardo"
                }, {
                    value: "Carme",
                    label: "Carme"
                }, {
                    value: "Carrois Gothic",
                    label: "Carrois Gothic"
                }, {
                    value: "Carrois Gothic SC",
                    label: "Carrois Gothic SC"
                }, {
                    value: "Carter One",
                    label: "Carter One"
                }, {
                    value: "Caudex",
                    label: "Caudex"
                }, {
                    value: "Cedarville Cursive",
                    label: "Cedarville Cursive"
                }, {
                    value: "Ceviche One",
                    label: "Ceviche One"
                }, {
                    value: "Changa One",
                    label: "Changa One"
                }, {
                    value: "Chango",
                    label: "Chango"
                }, {
                    value: "Chau Philomene One",
                    label: "Chau Philomene One"
                }, {
                    value: "Chela One",
                    label: "Chela One"
                }, {
                    value: "Chelsea Market",
                    label: "Chelsea Market"
                }, {
                    value: "Chenla",
                    label: "Chenla"
                }, {
                    value: "Cherry Cream Soda",
                    label: "Cherry Cream Soda"
                }, {
                    value: "Cherry Swash",
                    label: "Cherry Swash"
                }, {
                    value: "Chewy",
                    label: "Chewy"
                }, {
                    value: "Chicle",
                    label: "Chicle"
                }, {
                    value: "Chivo",
                    label: "Chivo"
                }, {
                    value: "Cinzel",
                    label: "Cinzel"
                }, {
                    value: "Cinzel Decorative",
                    label: "Cinzel Decorative"
                }, {
                    value: "Clicker Script",
                    label: "Clicker Script"
                }, {
                    value: "Coda",
                    label: "Coda"
                }, {
                    value: "Coda Caption",
                    label: "Coda Caption"
                }, {
                    value: "Codystar",
                    label: "Codystar"
                }, {
                    value: "Combo",
                    label: "Combo"
                }, {
                    value: "Comfortaa",
                    label: "Comfortaa"
                }, {
                    value: "Coming Soon",
                    label: "Coming Soon"
                }, {
                    value: "Concert One",
                    label: "Concert One"
                }, {
                    value: "Condiment",
                    label: "Condiment"
                }, {
                    value: "Content",
                    label: "Content"
                }, {
                    value: "Contrail One",
                    label: "Contrail One"
                }, {
                    value: "Convergence",
                    label: "Convergence"
                }, {
                    value: "Cookie",
                    label: "Cookie"
                }, {
                    value: "Copse",
                    label: "Copse"
                }, {
                    value: "Corben",
                    label: "Corben"
                }, {
                    value: "Courgette",
                    label: "Courgette"
                }, {
                    value: "Cousine",
                    label: "Cousine"
                }, {
                    value: "Coustard",
                    label: "Coustard"
                }, {
                    value: "Covered By Your Grace",
                    label: "Covered By Your Grace"
                }, {
                    value: "Crafty Girls",
                    label: "Crafty Girls"
                }, {
                    value: "Creepster",
                    label: "Creepster"
                }, {
                    value: "Crete Round",
                    label: "Crete Round"
                }, {
                    value: "Crimson Text",
                    label: "Crimson Text"
                }, {
                    value: "Croissant One",
                    label: "Croissant One"
                }, {
                    value: "Crushed",
                    label: "Crushed"
                }, {
                    value: "Cuprum",
                    label: "Cuprum"
                }, {
                    value: "Cutive",
                    label: "Cutive"
                }, {
                    value: "Cutive Mono",
                    label: "Cutive Mono"
                }, {
                    value: "Damion",
                    label: "Damion"
                }, {
                    value: "Dancing Script",
                    label: "Dancing Script"
                }, {
                    value: "Dangrek",
                    label: "Dangrek"
                }, {
                    value: "Dawning of a New Day",
                    label: "Dawning of a New Day"
                }, {
                    value: "Days One",
                    label: "Days One"
                }, {
                    value: "Delius",
                    label: "Delius"
                }, {
                    value: "Delius Swash Caps",
                    label: "Delius Swash Caps"
                }, {
                    value: "Delius Unicase",
                    label: "Delius Unicase"
                }, {
                    value: "Della Respira",
                    label: "Della Respira"
                }, {
                    value: "Denk One",
                    label: "Denk One"
                }, {
                    value: "Devonshire",
                    label: "Devonshire"
                }, {
                    value: "Didact Gothic",
                    label: "Didact Gothic"
                }, {
                    value: "Diplomata",
                    label: "Diplomata"
                }, {
                    value: "Diplomata SC",
                    label: "Diplomata SC"
                }, {
                    value: "Domine",
                    label: "Domine"
                }, {
                    value: "Donegal One",
                    label: "Donegal One"
                }, {
                    value: "Doppio One",
                    label: "Doppio One"
                }, {
                    value: "Dorsa",
                    label: "Dorsa"
                }, {
                    value: "Dosis",
                    label: "Dosis"
                }, {
                    value: "Dr Sugiyama",
                    label: "Dr Sugiyama"
                }, {
                    value: "Droid Sans",
                    label: "Droid Sans"
                }, {
                    value: "Droid Sans Mono",
                    label: "Droid Sans Mono"
                }, {
                    value: "Droid Serif",
                    label: "Droid Serif"
                }, {
                    value: "Duru Sans",
                    label: "Duru Sans"
                }, {
                    value: "Dynalight",
                    label: "Dynalight"
                }, {
                    value: "EB Garamond",
                    label: "EB Garamond"
                }, {
                    value: "Eagle Lake",
                    label: "Eagle Lake"
                }, {
                    value: "Eater",
                    label: "Eater"
                }, {
                    value: "Economica",
                    label: "Economica"
                }, {
                    value: "Electrolize",
                    label: "Electrolize"
                }, {
                    value: "Elsie",
                    label: "Elsie"
                }, {
                    value: "Elsie Swash Caps",
                    label: "Elsie Swash Caps"
                }, {
                    value: "Emblema One",
                    label: "Emblema One"
                }, {
                    value: "Emilys Candy",
                    label: "Emilys Candy"
                }, {
                    value: "Engagement",
                    label: "Engagement"
                }, {
                    value: "Englebert",
                    label: "Englebert"
                }, {
                    value: "Enriqueta",
                    label: "Enriqueta"
                }, {
                    value: "Erica One",
                    label: "Erica One"
                }, {
                    value: "Esteban",
                    label: "Esteban"
                }, {
                    value: "Euphoria Script",
                    label: "Euphoria Script"
                }, {
                    value: "Ewert",
                    label: "Ewert"
                }, {
                    value: "Exo",
                    label: "Exo"
                }, {
                    value: "Expletus Sans",
                    label: "Expletus Sans"
                }, {
                    value: "Fanwood Text",
                    label: "Fanwood Text"
                }, {
                    value: "Fascinate",
                    label: "Fascinate"
                }, {
                    value: "Fascinate Inline",
                    label: "Fascinate Inline"
                }, {
                    value: "Faster One",
                    label: "Faster One"
                }, {
                    value: "Fasthand",
                    label: "Fasthand"
                }, {
                    value: "Fauna One",
                    label: "Fauna One"
                }, {
                    value: "Federant",
                    label: "Federant"
                }, {
                    value: "Federo",
                    label: "Federo"
                }, {
                    value: "Felipa",
                    label: "Felipa"
                }, {
                    value: "Fenix",
                    label: "Fenix"
                }, {
                    value: "Finger Paint",
                    label: "Finger Paint"
                }, {
                    value: "Fjalla One",
                    label: "Fjalla One"
                }, {
                    value: "Fjord One",
                    label: "Fjord One"
                }, {
                    value: "Flamenco",
                    label: "Flamenco"
                }, {
                    value: "Flavors",
                    label: "Flavors"
                }, {
                    value: "Fondamento",
                    label: "Fondamento"
                }, {
                    value: "Fontdiner Swanky",
                    label: "Fontdiner Swanky"
                }, {
                    value: "Forum",
                    label: "Forum"
                }, {
                    value: "Francois One",
                    label: "Francois One"
                }, {
                    value: "Freckle Face",
                    label: "Freckle Face"
                }, {
                    value: "Fredericka the Great",
                    label: "Fredericka the Great"
                }, {
                    value: "Fredoka One",
                    label: "Fredoka One"
                }, {
                    value: "Freehand",
                    label: "Freehand"
                }, {
                    value: "Fresca",
                    label: "Fresca"
                }, {
                    value: "Frijole",
                    label: "Frijole"
                }, {
                    value: "Fruktur",
                    label: "Fruktur"
                }, {
                    value: "Fugaz One",
                    label: "Fugaz One"
                }, {
                    value: "GFS Didot",
                    label: "GFS Didot"
                }, {
                    value: "GFS Neohellenic",
                    label: "GFS Neohellenic"
                }, {
                    value: "Gabriela",
                    label: "Gabriela"
                }, {
                    value: "Gafata",
                    label: "Gafata"
                }, {
                    value: "Galdeano",
                    label: "Galdeano"
                }, {
                    value: "Galindo",
                    label: "Galindo"
                }, {
                    value: "Gentium Basic",
                    label: "Gentium Basic"
                }, {
                    value: "Gentium Book Basic",
                    label: "Gentium Book Basic"
                }, {
                    value: "Geo",
                    label: "Geo"
                }, {
                    value: "Geostar",
                    label: "Geostar"
                }, {
                    value: "Geostar Fill",
                    label: "Geostar Fill"
                }, {
                    value: "Germania One",
                    label: "Germania One"
                }, {
                    value: "Gilda Display",
                    label: "Gilda Display"
                }, {
                    value: "Give You Glory",
                    label: "Give You Glory"
                }, {
                    value: "Glass Antiqua",
                    label: "Glass Antiqua"
                }, {
                    value: "Glegoo",
                    label: "Glegoo"
                }, {
                    value: "Gloria Hallelujah",
                    label: "Gloria Hallelujah"
                }, {
                    value: "Goblin One",
                    label: "Goblin One"
                }, {
                    value: "Gochi Hand",
                    label: "Gochi Hand"
                }, {
                    value: "Gorditas",
                    label: "Gorditas"
                }, {
                    value: "Goudy Bookletter 1911",
                    label: "Goudy Bookletter 1911"
                }, {
                    value: "Graduate",
                    label: "Graduate"
                }, {
                    value: "Grand Hotel",
                    label: "Grand Hotel"
                }, {
                    value: "Gravitas One",
                    label: "Gravitas One"
                }, {
                    value: "Great Vibes",
                    label: "Great Vibes"
                }, {
                    value: "Griffy",
                    label: "Griffy"
                }, {
                    value: "Gruppo",
                    label: "Gruppo"
                }, {
                    value: "Gudea",
                    label: "Gudea"
                }, {
                    value: "Habibi",
                    label: "Habibi"
                }, {
                    value: "Hammersmith One",
                    label: "Hammersmith One"
                }, {
                    value: "Hanalei",
                    label: "Hanalei"
                }, {
                    value: "Hanalei Fill",
                    label: "Hanalei Fill"
                }, {
                    value: "Handlee",
                    label: "Handlee"
                }, {
                    value: "Hanuman",
                    label: "Hanuman"
                }, {
                    value: "Happy Monkey",
                    label: "Happy Monkey"
                }, {
                    value: "Headland One",
                    label: "Headland One"
                }, {
                    value: "Henny Penny",
                    label: "Henny Penny"
                }, {
                    value: "Herr Von Muellerhoff",
                    label: "Herr Von Muellerhoff"
                }, {
                    value: "Holtwood One SC",
                    label: "Holtwood One SC"
                }, {
                    value: "Homemade Apple",
                    label: "Homemade Apple"
                }, {
                    value: "Homenaje",
                    label: "Homenaje"
                }, {
                    value: "IM Fell DW Pica",
                    label: "IM Fell DW Pica"
                }, {
                    value: "IM Fell DW Pica SC",
                    label: "IM Fell DW Pica SC"
                }, {
                    value: "IM Fell Double Pica",
                    label: "IM Fell Double Pica"
                }, {
                    value: "IM Fell Double Pica SC",
                    label: "IM Fell Double Pica SC"
                }, {
                    value: "IM Fell English",
                    label: "IM Fell English"
                }, {
                    value: "IM Fell English SC",
                    label: "IM Fell English SC"
                }, {
                    value: "IM Fell French Canon",
                    label: "IM Fell French Canon"
                }, {
                    value: "IM Fell French Canon SC",
                    label: "IM Fell French Canon SC"
                }, {
                    value: "IM Fell Great Primer",
                    label: "IM Fell Great Primer"
                }, {
                    value: "IM Fell Great Primer SC",
                    label: "IM Fell Great Primer SC"
                }, {
                    value: "Iceberg",
                    label: "Iceberg"
                }, {
                    value: "Iceland",
                    label: "Iceland"
                }, {
                    value: "Imprima",
                    label: "Imprima"
                }, {
                    value: "Inconsolata",
                    label: "Inconsolata"
                }, {
                    value: "Inder",
                    label: "Inder"
                }, {
                    value: "Indie Flower",
                    label: "Indie Flower"
                }, {
                    value: "Inika",
                    label: "Inika"
                }, {
                    value: "Irish Grover",
                    label: "Irish Grover"
                }, {
                    value: "Istok Web",
                    label: "Istok Web"
                }, {
                    value: "Italiana",
                    label: "Italiana"
                }, {
                    value: "Italianno",
                    label: "Italianno"
                }, {
                    value: "Jacques Francois",
                    label: "Jacques Francois"
                }, {
                    value: "Jacques Francois Shadow",
                    label: "Jacques Francois Shadow"
                }, {
                    value: "Jim Nightshade",
                    label: "Jim Nightshade"
                }, {
                    value: "Jockey One",
                    label: "Jockey One"
                }, {
                    value: "Jolly Lodger",
                    label: "Jolly Lodger"
                }, {
                    value: "Josefin Sans",
                    label: "Josefin Sans"
                }, {
                    value: "Josefin Slab",
                    label: "Josefin Slab"
                }, {
                    value: "Joti One",
                    label: "Joti One"
                }, {
                    value: "Judson",
                    label: "Judson"
                }, {
                    value: "Julee",
                    label: "Julee"
                }, {
                    value: "Julius Sans One",
                    label: "Julius Sans One"
                }, {
                    value: "Junge",
                    label: "Junge"
                }, {
                    value: "Jura",
                    label: "Jura"
                }, {
                    value: "Just Another Hand",
                    label: "Just Another Hand"
                }, {
                    value: "Just Me Again Down Here",
                    label: "Just Me Again Down Here"
                }, {
                    value: "Kameron",
                    label: "Kameron"
                }, {
                    value: "Karla",
                    label: "Karla"
                }, {
                    value: "Kaushan Script",
                    label: "Kaushan Script"
                }, {
                    value: "Kavoon",
                    label: "Kavoon"
                }, {
                    value: "Keania One",
                    label: "Keania One"
                }, {
                    value: "Kelly Slab",
                    label: "Kelly Slab"
                }, {
                    value: "Kenia",
                    label: "Kenia"
                }, {
                    value: "Khmer",
                    label: "Khmer"
                }, {
                    value: "Kite One",
                    label: "Kite One"
                }, {
                    value: "Knewave",
                    label: "Knewave"
                }, {
                    value: "Kotta One",
                    label: "Kotta One"
                }, {
                    value: "Koulen",
                    label: "Koulen"
                }, {
                    value: "Kranky",
                    label: "Kranky"
                }, {
                    value: "Kreon",
                    label: "Kreon"
                }, {
                    value: "Kristi",
                    label: "Kristi"
                }, {
                    value: "Krona One",
                    label: "Krona One"
                }, {
                    value: "La Belle Aurore",
                    label: "La Belle Aurore"
                }, {
                    value: "Lancelot",
                    label: "Lancelot"
                }, {
                    value: "Lato",
                    label: "Lato"
                }, {
                    value: "League Script",
                    label: "League Script"
                }, {
                    value: "Leckerli One",
                    label: "Leckerli One"
                }, {
                    value: "Ledger",
                    label: "Ledger"
                }, {
                    value: "Lekton",
                    label: "Lekton"
                }, {
                    value: "Lemon",
                    label: "Lemon"
                }, {
                    value: "Libre Baskerville",
                    label: "Libre Baskerville"
                }, {
                    value: "Life Savers",
                    label: "Life Savers"
                }, {
                    value: "Lilita One",
                    label: "Lilita One"
                }, {
                    value: "Lily Script One",
                    label: "Lily Script One"
                }, {
                    value: "Limelight",
                    label: "Limelight"
                }, {
                    value: "Linden Hill",
                    label: "Linden Hill"
                }, {
                    value: "Lobster",
                    label: "Lobster"
                }, {
                    value: "Lobster Two",
                    label: "Lobster Two"
                }, {
                    value: "Londrina Outline",
                    label: "Londrina Outline"
                }, {
                    value: "Londrina Shadow",
                    label: "Londrina Shadow"
                }, {
                    value: "Londrina Sketch",
                    label: "Londrina Sketch"
                }, {
                    value: "Londrina Solid",
                    label: "Londrina Solid"
                }, {
                    value: "Lora",
                    label: "Lora"
                }, {
                    value: "Love Ya Like A Sister",
                    label: "Love Ya Like A Sister"
                }, {
                    value: "Loved by the King",
                    label: "Loved by the King"
                }, {
                    value: "Lovers Quarrel",
                    label: "Lovers Quarrel"
                }, {
                    value: "Luckiest Guy",
                    label: "Luckiest Guy"
                }, {
                    value: "Lusitana",
                    label: "Lusitana"
                }, {
                    value: "Lustria",
                    label: "Lustria"
                }, {
                    value: "Macondo",
                    label: "Macondo"
                }, {
                    value: "Macondo Swash Caps",
                    label: "Macondo Swash Caps"
                }, {
                    value: "Magra",
                    label: "Magra"
                }, {
                    value: "Maiden Orange",
                    label: "Maiden Orange"
                }, {
                    value: "Mako",
                    label: "Mako"
                }, {
                    value: "Marcellus",
                    label: "Marcellus"
                }, {
                    value: "Marcellus SC",
                    label: "Marcellus SC"
                }, {
                    value: "Marck Script",
                    label: "Marck Script"
                }, {
                    value: "Margarine",
                    label: "Margarine"
                }, {
                    value: "Marko One",
                    label: "Marko One"
                }, {
                    value: "Marmelad",
                    label: "Marmelad"
                }, {
                    value: "Marvel",
                    label: "Marvel"
                }, {
                    value: "Mate",
                    label: "Mate"
                }, {
                    value: "Mate SC",
                    label: "Mate SC"
                }, {
                    value: "Maven Pro",
                    label: "Maven Pro"
                }, {
                    value: "McLaren",
                    label: "McLaren"
                }, {
                    value: "Meddon",
                    label: "Meddon"
                }, {
                    value: "MedievalSharp",
                    label: "MedievalSharp"
                }, {
                    value: "Medula One",
                    label: "Medula One"
                }, {
                    value: "Megrim",
                    label: "Megrim"
                }, {
                    value: "Meie Script",
                    label: "Meie Script"
                }, {
                    value: "Merienda",
                    label: "Merienda"
                }, {
                    value: "Merienda One",
                    label: "Merienda One"
                }, {
                    value: "Merriweather",
                    label: "Merriweather"
                }, {
                    value: "Merriweather Sans",
                    label: "Merriweather Sans"
                }, {
                    value: "Metal",
                    label: "Metal"
                }, {
                    value: "Metal Mania",
                    label: "Metal Mania"
                }, {
                    value: "Metamorphous",
                    label: "Metamorphous"
                }, {
                    value: "Metrophobic",
                    label: "Metrophobic"
                }, {
                    value: "Michroma",
                    label: "Michroma"
                }, {
                    value: "Milonga",
                    label: "Milonga"
                }, {
                    value: "Miltonian",
                    label: "Miltonian"
                }, {
                    value: "Miltonian Tattoo",
                    label: "Miltonian Tattoo"
                }, {
                    value: "Miniver",
                    label: "Miniver"
                }, {
                    value: "Miss Fajardose",
                    label: "Miss Fajardose"
                }, {
                    value: "Modern Antiqua",
                    label: "Modern Antiqua"
                }, {
                    value: "Molengo",
                    label: "Molengo"
                }, {
                    value: "Monda",
                    label: "Monda"
                }, {
                    value: "Monofett",
                    label: "Monofett"
                }, {
                    value: "Monoton",
                    label: "Monoton"
                }, {
                    value: "Monsieur La Doulaise",
                    label: "Monsieur La Doulaise"
                }, {
                    value: "Montaga",
                    label: "Montaga"
                }, {
                    value: "Montez",
                    label: "Montez"
                }, {
                    value: "Montserrat",
                    label: "Montserrat"
                }, {
                    value: "Montserrat Alternates",
                    label: "Montserrat Alternates"
                }, {
                    value: "Montserrat Subrayada",
                    label: "Montserrat Subrayada"
                }, {
                    value: "Moul",
                    label: "Moul"
                }, {
                    value: "Moulpali",
                    label: "Moulpali"
                }, {
                    value: "Mountains of Christmas",
                    label: "Mountains of Christmas"
                }, {
                    value: "Mouse Memoirs",
                    label: "Mouse Memoirs"
                }, {
                    value: "Mr Bedfort",
                    label: "Mr Bedfort"
                }, {
                    value: "Mr Dafoe",
                    label: "Mr Dafoe"
                }, {
                    value: "Mr De Haviland",
                    label: "Mr De Haviland"
                }, {
                    value: "Mrs Saint Delafield",
                    label: "Mrs Saint Delafield"
                }, {
                    value: "Mrs Sheppards",
                    label: "Mrs Sheppards"
                }, {
                    value: "Muli",
                    label: "Muli"
                }, {
                    value: "Mystery Quest",
                    label: "Mystery Quest"
                }, {
                    value: "Neucha",
                    label: "Neucha"
                }, {
                    value: "Neuton",
                    label: "Neuton"
                }, {
                    value: "New Rocker",
                    label: "New Rocker"
                }, {
                    value: "News Cycle",
                    label: "News Cycle"
                }, {
                    value: "Niconne",
                    label: "Niconne"
                }, {
                    value: "Nixie One",
                    label: "Nixie One"
                }, {
                    value: "Nobile",
                    label: "Nobile"
                }, {
                    value: "Nokora",
                    label: "Nokora"
                }, {
                    value: "Norican",
                    label: "Norican"
                }, {
                    value: "Nosifer",
                    label: "Nosifer"
                }, {
                    value: "Nothing You Could Do",
                    label: "Nothing You Could Do"
                }, {
                    value: "Noticia Text",
                    label: "Noticia Text"
                }, {
                    value: "Noto Sans",
                    label: "Noto Sans"
                }, {
                    value: "Noto Serif",
                    label: "Noto Serif"
                }, {
                    value: "Nova Cut",
                    label: "Nova Cut"
                }, {
                    value: "Nova Flat",
                    label: "Nova Flat"
                }, {
                    value: "Nova Mono",
                    label: "Nova Mono"
                }, {
                    value: "Nova Oval",
                    label: "Nova Oval"
                }, {
                    value: "Nova Round",
                    label: "Nova Round"
                }, {
                    value: "Nova Script",
                    label: "Nova Script"
                }, {
                    value: "Nova Slim",
                    label: "Nova Slim"
                }, {
                    value: "Nova Square",
                    label: "Nova Square"
                }, {
                    value: "Numans",
                    label: "Numans"
                }, {
                    value: "Nunito",
                    label: "Nunito"
                }, {
                    value: "Odor Mean Chey",
                    label: "Odor Mean Chey"
                }, {
                    value: "Offside",
                    label: "Offside"
                }, {
                    value: "Old Standard TT",
                    label: "Old Standard TT"
                }, {
                    value: "Oldenburg",
                    label: "Oldenburg"
                }, {
                    value: "Oleo Script",
                    label: "Oleo Script"
                }, {
                    value: "Oleo Script Swash Caps",
                    label: "Oleo Script Swash Caps"
                }, {
                    value: "Open Sans",
                    label: "Open Sans"
                }, {
                    value: "Open Sans Condensed",
                    label: "Open Sans Condensed"
                }, {
                    value: "Oranienbaum",
                    label: "Oranienbaum"
                }, {
                    value: "Orbitron",
                    label: "Orbitron"
                }, {
                    value: "Oregano",
                    label: "Oregano"
                }, {
                    value: "Orienta",
                    label: "Orienta"
                }, {
                    value: "Original Surfer",
                    label: "Original Surfer"
                }, {
                    value: "Oswald",
                    label: "Oswald"
                }, {
                    value: "Over the Rainbow",
                    label: "Over the Rainbow"
                }, {
                    value: "Overlock",
                    label: "Overlock"
                }, {
                    value: "Overlock SC",
                    label: "Overlock SC"
                }, {
                    value: "Ovo",
                    label: "Ovo"
                }, {
                    value: "Oxygen",
                    label: "Oxygen"
                }, {
                    value: "Oxygen Mono",
                    label: "Oxygen Mono"
                }, {
                    value: "PT Mono",
                    label: "PT Mono"
                }, {
                    value: "PT Sans",
                    label: "PT Sans"
                }, {
                    value: "PT Sans Caption",
                    label: "PT Sans Caption"
                }, {
                    value: "PT Sans Narrow",
                    label: "PT Sans Narrow"
                }, {
                    value: "PT Serif",
                    label: "PT Serif"
                }, {
                    value: "PT Serif Caption",
                    label: "PT Serif Caption"
                }, {
                    value: "Pacifico",
                    label: "Pacifico"
                }, {
                    value: "Paprika",
                    label: "Paprika"
                }, {
                    value: "Parisienne",
                    label: "Parisienne"
                }, {
                    value: "Passero One",
                    label: "Passero One"
                }, {
                    value: "Passion One",
                    label: "Passion One"
                }, {
                    value: "Pathway Gothic One",
                    label: "Pathway Gothic One"
                }, {
                    value: "Patrick Hand",
                    label: "Patrick Hand"
                }, {
                    value: "Patrick Hand SC",
                    label: "Patrick Hand SC"
                }, {
                    value: "Patua One",
                    label: "Patua One"
                }, {
                    value: "Paytone One",
                    label: "Paytone One"
                }, {
                    value: "Peralta",
                    label: "Peralta"
                }, {
                    value: "Permanent Marker",
                    label: "Permanent Marker"
                }, {
                    value: "Petit Formal Script",
                    label: "Petit Formal Script"
                }, {
                    value: "Petrona",
                    label: "Petrona"
                }, {
                    value: "Philosopher",
                    label: "Philosopher"
                }, {
                    value: "Piedra",
                    label: "Piedra"
                }, {
                    value: "Pinyon Script",
                    label: "Pinyon Script"
                }, {
                    value: "Pirata One",
                    label: "Pirata One"
                }, {
                    value: "Plaster",
                    label: "Plaster"
                }, {
                    value: "Play",
                    label: "Play"
                }, {
                    value: "Playball",
                    label: "Playball"
                }, {
                    value: "Playfair Display",
                    label: "Playfair Display"
                }, {
                    value: "Playfair Display SC",
                    label: "Playfair Display SC"
                }, {
                    value: "Podkova",
                    label: "Podkova"
                }, {
                    value: "Poiret One",
                    label: "Poiret One"
                }, {
                    value: "Poller One",
                    label: "Poller One"
                }, {
                    value: "Poly",
                    label: "Poly"
                }, {
                    value: "Pompiere",
                    label: "Pompiere"
                }, {
                    value: "Pontano Sans",
                    label: "Pontano Sans"
                }, {
                    value: "Port Lligat Sans",
                    label: "Port Lligat Sans"
                }, {
                    value: "Port Lligat Slab",
                    label: "Port Lligat Slab"
                }, {
                    value: "Prata",
                    label: "Prata"
                }, {
                    value: "Preahvihear",
                    label: "Preahvihear"
                }, {
                    value: "Press Start 2P",
                    label: "Press Start 2P"
                }, {
                    value: "Princess Sofia",
                    label: "Princess Sofia"
                }, {
                    value: "Prociono",
                    label: "Prociono"
                }, {
                    value: "Prosto One",
                    label: "Prosto One"
                }, {
                    value: "Puritan",
                    label: "Puritan"
                }, {
                    value: "Purple Purse",
                    label: "Purple Purse"
                }, {
                    value: "Quando",
                    label: "Quando"
                }, {
                    value: "Quantico",
                    label: "Quantico"
                }, {
                    value: "Quattrocento",
                    label: "Quattrocento"
                }, {
                    value: "Quattrocento Sans",
                    label: "Quattrocento Sans"
                }, {
                    value: "Questrial",
                    label: "Questrial"
                }, {
                    value: "Quicksand",
                    label: "Quicksand"
                }, {
                    value: "Quintessential",
                    label: "Quintessential"
                }, {
                    value: "Qwigley",
                    label: "Qwigley"
                }, {
                    value: "Racing Sans One",
                    label: "Racing Sans One"
                }, {
                    value: "Radley",
                    label: "Radley"
                }, {
                    value: "Raleway",
                    label: "Raleway"
                }, {
                    value: "Raleway Dots",
                    label: "Raleway Dots"
                }, {
                    value: "Rambla",
                    label: "Rambla"
                }, {
                    value: "Rammetto One",
                    label: "Rammetto One"
                }, {
                    value: "Ranchers",
                    label: "Ranchers"
                }, {
                    value: "Rancho",
                    label: "Rancho"
                }, {
                    value: "Rationale",
                    label: "Rationale"
                }, {
                    value: "Redressed",
                    label: "Redressed"
                }, {
                    value: "Reenie Beanie",
                    label: "Reenie Beanie"
                }, {
                    value: "Revalia",
                    label: "Revalia"
                }, {
                    value: "Ribeye",
                    label: "Ribeye"
                }, {
                    value: "Ribeye Marrow",
                    label: "Ribeye Marrow"
                }, {
                    value: "Righteous",
                    label: "Righteous"
                }, {
                    value: "Risque",
                    label: "Risque"
                }, {
                    value: "Roboto",
                    label: "Roboto"
                }, {
                    value: "Roboto Condensed",
                    label: "Roboto Condensed"
                }, {
                    value: "Roboto Slab",
                    label: "Roboto Slab"
                }, {
                    value: "Rochester",
                    label: "Rochester"
                }, {
                    value: "Rock Salt",
                    label: "Rock Salt"
                }, {
                    value: "Rokkitt",
                    label: "Rokkitt"
                }, {
                    value: "Romanesco",
                    label: "Romanesco"
                }, {
                    value: "Ropa Sans",
                    label: "Ropa Sans"
                }, {
                    value: "Rosario",
                    label: "Rosario"
                }, {
                    value: "Rosarivo",
                    label: "Rosarivo"
                }, {
                    value: "Rouge Script",
                    label: "Rouge Script"
                }, {
                    value: "Ruda",
                    label: "Ruda"
                }, {
                    value: "Rufina",
                    label: "Rufina"
                }, {
                    value: "Ruge Boogie",
                    label: "Ruge Boogie"
                }, {
                    value: "Ruluko",
                    label: "Ruluko"
                }, {
                    value: "Rum Raisin",
                    label: "Rum Raisin"
                }, {
                    value: "Ruslan Display",
                    label: "Ruslan Display"
                }, {
                    value: "Russo One",
                    label: "Russo One"
                }, {
                    value: "Ruthie",
                    label: "Ruthie"
                }, {
                    value: "Rye",
                    label: "Rye"
                }, {
                    value: "Sacramento",
                    label: "Sacramento"
                }, {
                    value: "Sail",
                    label: "Sail"
                }, {
                    value: "Salsa",
                    label: "Salsa"
                }, {
                    value: "Sanchez",
                    label: "Sanchez"
                }, {
                    value: "Sancreek",
                    label: "Sancreek"
                }, {
                    value: "Sansita One",
                    label: "Sansita One"
                }, {
                    value: "Sarina",
                    label: "Sarina"
                }, {
                    value: "Satisfy",
                    label: "Satisfy"
                }, {
                    value: "Scada",
                    label: "Scada"
                }, {
                    value: "Schoolbell",
                    label: "Schoolbell"
                }, {
                    value: "Seaweed Script",
                    label: "Seaweed Script"
                }, {
                    value: "Sevillana",
                    label: "Sevillana"
                }, {
                    value: "Seymour One",
                    label: "Seymour One"
                }, {
                    value: "Shadows Into Light",
                    label: "Shadows Into Light"
                }, {
                    value: "Shadows Into Light Two",
                    label: "Shadows Into Light Two"
                }, {
                    value: "Shanti",
                    label: "Shanti"
                }, {
                    value: "Share",
                    label: "Share"
                }, {
                    value: "Share Tech",
                    label: "Share Tech"
                }, {
                    value: "Share Tech Mono",
                    label: "Share Tech Mono"
                }, {
                    value: "Shojumaru",
                    label: "Shojumaru"
                }, {
                    value: "Short Stack",
                    label: "Short Stack"
                }, {
                    value: "Siemreap",
                    label: "Siemreap"
                }, {
                    value: "Sigmar One",
                    label: "Sigmar One"
                }, {
                    value: "Signika",
                    label: "Signika"
                }, {
                    value: "Signika Negative",
                    label: "Signika Negative"
                }, {
                    value: "Simonetta",
                    label: "Simonetta"
                }, {
                    value: "Sintony",
                    label: "Sintony"
                }, {
                    value: "Sirin Stencil",
                    label: "Sirin Stencil"
                }, {
                    value: "Six Caps",
                    label: "Six Caps"
                }, {
                    value: "Skranji",
                    label: "Skranji"
                }, {
                    value: "Slackey",
                    label: "Slackey"
                }, {
                    value: "Smokum",
                    label: "Smokum"
                }, {
                    value: "Smythe",
                    label: "Smythe"
                }, {
                    value: "Sniglet",
                    label: "Sniglet"
                }, {
                    value: "Snippet",
                    label: "Snippet"
                }, {
                    value: "Snowburst One",
                    label: "Snowburst One"
                }, {
                    value: "Sofadi One",
                    label: "Sofadi One"
                }, {
                    value: "Sofia",
                    label: "Sofia"
                }, {
                    value: "Sonsie One",
                    label: "Sonsie One"
                }, {
                    value: "Sorts Mill Goudy",
                    label: "Sorts Mill Goudy"
                }, {
                    value: "Source Code Pro",
                    label: "Source Code Pro"
                }, {
                    value: "Source Sans Pro",
                    label: "Source Sans Pro"
                }, {
                    value: "Special Elite",
                    label: "Special Elite"
                }, {
                    value: "Spicy Rice",
                    label: "Spicy Rice"
                }, {
                    value: "Spinnaker",
                    label: "Spinnaker"
                }, {
                    value: "Spirax",
                    label: "Spirax"
                }, {
                    value: "Squada One",
                    label: "Squada One"
                }, {
                    value: "Stalemate",
                    label: "Stalemate"
                }, {
                    value: "Stalinist One",
                    label: "Stalinist One"
                }, {
                    value: "Stardos Stencil",
                    label: "Stardos Stencil"
                }, {
                    value: "Stint Ultra Condensed",
                    label: "Stint Ultra Condensed"
                }, {
                    value: "Stint Ultra Expanded",
                    label: "Stint Ultra Expanded"
                }, {
                    value: "Stoke",
                    label: "Stoke"
                }, {
                    value: "Strait",
                    label: "Strait"
                }, {
                    value: "Sue Ellen Francisco",
                    label: "Sue Ellen Francisco"
                }, {
                    value: "Sunshiney",
                    label: "Sunshiney"
                }, {
                    value: "Supermercado One",
                    label: "Supermercado One"
                }, {
                    value: "Suwannaphum",
                    label: "Suwannaphum"
                }, {
                    value: "Swanky and Moo Moo",
                    label: "Swanky and Moo Moo"
                }, {
                    value: "Syncopate",
                    label: "Syncopate"
                }, {
                    value: "Tangerine",
                    label: "Tangerine"
                }, {
                    value: "Taprom",
                    label: "Taprom"
                }, {
                    value: "Tauri",
                    label: "Tauri"
                }, {
                    value: "Telex",
                    label: "Telex"
                }, {
                    value: "Tenor Sans",
                    label: "Tenor Sans"
                }, {
                    value: "Text Me One",
                    label: "Text Me One"
                }, {
                    value: "The Girl Next Door",
                    label: "The Girl Next Door"
                }, {
                    value: "Tienne",
                    label: "Tienne"
                }, {
                    value: "Tinos",
                    label: "Tinos"
                }, {
                    value: "Titan One",
                    label: "Titan One"
                }, {
                    value: "Titillium Web",
                    label: "Titillium Web"
                }, {
                    value: "Trade Winds",
                    label: "Trade Winds"
                }, {
                    value: "Trocchi",
                    label: "Trocchi"
                }, {
                    value: "Trochut",
                    label: "Trochut"
                }, {
                    value: "Trykker",
                    label: "Trykker"
                }, {
                    value: "Tulpen One",
                    label: "Tulpen One"
                }, {
                    value: "Ubuntu",
                    label: "Ubuntu"
                }, {
                    value: "Ubuntu Condensed",
                    label: "Ubuntu Condensed"
                }, {
                    value: "Ubuntu Mono",
                    label: "Ubuntu Mono"
                }, {
                    value: "Ultra",
                    label: "Ultra"
                }, {
                    value: "Uncial Antiqua",
                    label: "Uncial Antiqua"
                }, {
                    value: "Underdog",
                    label: "Underdog"
                }, {
                    value: "Unica One",
                    label: "Unica One"
                }, {
                    value: "UnifrakturCook",
                    label: "UnifrakturCook"
                }, {
                    value: "UnifrakturMaguntia",
                    label: "UnifrakturMaguntia"
                }, {
                    value: "Unkempt",
                    label: "Unkempt"
                }, {
                    value: "Unlock",
                    label: "Unlock"
                }, {
                    value: "Unna",
                    label: "Unna"
                }, {
                    value: "VT323",
                    label: "VT323"
                }, {
                    value: "Vampiro One",
                    label: "Vampiro One"
                }, {
                    value: "Varela",
                    label: "Varela"
                }, {
                    value: "Varela Round",
                    label: "Varela Round"
                }, {
                    value: "Vast Shadow",
                    label: "Vast Shadow"
                }, {
                    value: "Vibur",
                    label: "Vibur"
                }, {
                    value: "Vidaloka",
                    label: "Vidaloka"
                }, {
                    value: "Viga",
                    label: "Viga"
                }, {
                    value: "Voces",
                    label: "Voces"
                }, {
                    value: "Volkhov",
                    label: "Volkhov"
                }, {
                    value: "Vollkorn",
                    label: "Vollkorn"
                }, {
                    value: "Voltaire",
                    label: "Voltaire"
                }, {
                    value: "Waiting for the Sunrise",
                    label: "Waiting for the Sunrise"
                }, {
                    value: "Wallpoet",
                    label: "Wallpoet"
                }, {
                    value: "Walter Turncoat",
                    label: "Walter Turncoat"
                }, {
                    value: "Warnes",
                    label: "Warnes"
                }, {
                    value: "Wellfleet",
                    label: "Wellfleet"
                }, {
                    value: "Wendy One",
                    label: "Wendy One"
                }, {
                    value: "Wire One",
                    label: "Wire One"
                }, {
                    value: "Yanone Kaffeesatz",
                    label: "Yanone Kaffeesatz"
                }, {
                    value: "Yellowtail",
                    label: "Yellowtail"
                }, {
                    value: "Yeseva One",
                    label: "Yeseva One"
                }, {
                    value: "Yesteryear",
                    label: "Yesteryear"
                }, {
                    value: "Zeyada",
                    label: "Zeyada"
                }],
                FONT_WEIGHTS: {
                    ABeeZee: ["400"],
                    Abel: ["400"],
                    "Abril Fatface": ["400"],
                    Aclonica: ["400"],
                    Acme: ["400"],
                    Actor: ["400"],
                    Adamina: ["400"],
                    "Advent Pro": ["400", "100", "200", "300", "500", "600", "700"],
                    "Aguafina Script": ["400"],
                    Akronim: ["400"],
                    Aladin: ["400"],
                    Aldrich: ["400"],
                    Alef: ["400", "700"],
                    Alegreya: ["400", "700", "900"],
                    "Alegreya SC": ["400", "700", "900"],
                    "Alex Brush": ["400"],
                    "Alfa Slab One": ["400"],
                    Alice: ["400"],
                    Alike: ["400"],
                    "Alike Angular": ["400"],
                    Allan: ["400", "700"],
                    Allerta: ["400"],
                    "Allerta Stencil": ["400"],
                    Allura: ["400"],
                    Almendra: ["400", "700"],
                    "Almendra Display": ["400"],
                    "Almendra SC": ["400"],
                    Amarante: ["400"],
                    Amaranth: ["400", "700"],
                    "Amatic SC": ["400", "700"],
                    Amethysta: ["400"],
                    Anaheim: ["400"],
                    Andada: ["400"],
                    Andika: ["400"],
                    Angkor: ["400"],
                    "Annie Use Your Telescope": ["400"],
                    "Anonymous Pro": ["400", "700"],
                    Antic: ["400"],
                    "Antic Didone": ["400"],
                    "Antic Slab": ["400"],
                    Anton: ["400"],
                    Arapey: ["400"],
                    Arbutus: ["400"],
                    "Arbutus Slab": ["400"],
                    "Architects Daughter": ["400"],
                    "Archivo Black": ["400"],
                    "Archivo Narrow": ["400", "700"],
                    Arimo: ["400", "700"],
                    Arizonia: ["400"],
                    Armata: ["400"],
                    Artifika: ["400"],
                    Arvo: ["400", "700"],
                    Asap: ["400", "700"],
                    Asset: ["400"],
                    Astloch: ["400", "700"],
                    Asul: ["400", "700"],
                    "Atomic Age": ["400"],
                    Aubrey: ["400"],
                    Audiowide: ["400"],
                    "Autour One": ["400"],
                    Average: ["400"],
                    "Average Sans": ["400"],
                    "Averia Gruesa Libre": ["400"],
                    "Averia Libre": ["400", "300", "700"],
                    "Averia Sans Libre": ["400", "300", "700"],
                    "Averia Serif Libre": ["400", "300", "700"],
                    "Bad Script": ["400"],
                    Balthazar: ["400"],
                    Bangers: ["400"],
                    Basic: ["400"],
                    Battambang: ["400", "700"],
                    Baumans: ["400"],
                    Bayon: ["400"],
                    Belgrano: ["400"],
                    Belleza: ["400"],
                    BenchNine: ["400", "300", "700"],
                    Bentham: ["400"],
                    "Berkshire Swash": ["400"],
                    Bevan: ["400"],
                    "Bigelow Rules": ["400"],
                    "Bigshot One": ["400"],
                    Bilbo: ["400"],
                    "Bilbo Swash Caps": ["400"],
                    Bitter: ["400", "700"],
                    "Black Ops One": ["400"],
                    Bokor: ["400"],
                    Bonbon: ["400"],
                    Boogaloo: ["400"],
                    "Bowlby One": ["400"],
                    "Bowlby One SC": ["400"],
                    Brawler: ["400"],
                    "Bree Serif": ["400"],
                    "Bubblegum Sans": ["400"],
                    "Bubbler One": ["400"],
                    Buda: ["300"],
                    Buenard: ["400", "700"],
                    Butcherman: ["400"],
                    "Butterfly Kids": ["400"],
                    Cabin: ["400", "500", "600", "700"],
                    "Cabin Condensed": ["400", "500", "600", "700"],
                    "Cabin Sketch": ["400", "700"],
                    "Caesar Dressing": ["400"],
                    Cagliostro: ["400"],
                    Calligraffitti: ["400"],
                    Cambo: ["400"],
                    Candal: ["400"],
                    Cantarell: ["400", "700"],
                    "Cantata One": ["400"],
                    "Cantora One": ["400"],
                    Capriola: ["400"],
                    Cardo: ["400", "700"],
                    Carme: ["400"],
                    "Carrois Gothic": ["400"],
                    "Carrois Gothic SC": ["400"],
                    "Carter One": ["400"],
                    Caudex: ["400", "700"],
                    "Cedarville Cursive": ["400"],
                    "Ceviche One": ["400"],
                    "Changa One": ["400"],
                    Chango: ["400"],
                    "Chau Philomene One": ["400"],
                    "Chela One": ["400"],
                    "Chelsea Market": ["400"],
                    Chenla: ["400"],
                    "Cherry Cream Soda": ["400"],
                    "Cherry Swash": ["400", "700"],
                    Chewy: ["400"],
                    Chicle: ["400"],
                    Chivo: ["400", "900"],
                    Cinzel: ["400", "700", "900"],
                    "Cinzel Decorative": ["400", "700", "900"],
                    "Clicker Script": ["400"],
                    Coda: ["400", "800"],
                    "Coda Caption": ["800"],
                    Codystar: ["400", "300"],
                    Combo: ["400"],
                    Comfortaa: ["400", "300", "700"],
                    "Coming Soon": ["400"],
                    "Concert One": ["400"],
                    Condiment: ["400"],
                    Content: ["400", "700"],
                    "Contrail One": ["400"],
                    Convergence: ["400"],
                    Cookie: ["400"],
                    Copse: ["400"],
                    Corben: ["400", "700"],
                    Courgette: ["400"],
                    Cousine: ["400", "700"],
                    Coustard: ["400", "900"],
                    "Covered By Your Grace": ["400"],
                    "Crafty Girls": ["400"],
                    Creepster: ["400"],
                    "Crete Round": ["400"],
                    "Crimson Text": ["400", "600", "700"],
                    "Croissant One": ["400"],
                    Crushed: ["400"],
                    Cuprum: ["400", "700"],
                    Cutive: ["400"],
                    "Cutive Mono": ["400"],
                    Damion: ["400"],
                    "Dancing Script": ["400", "700"],
                    Dangrek: ["400"],
                    "Dawning of a New Day": ["400"],
                    "Days One": ["400"],
                    Delius: ["400"],
                    "Delius Swash Caps": ["400"],
                    "Delius Unicase": ["400", "700"],
                    "Della Respira": ["400"],
                    "Denk One": ["400"],
                    Devonshire: ["400"],
                    "Didact Gothic": ["400"],
                    Diplomata: ["400"],
                    "Diplomata SC": ["400"],
                    Domine: ["400", "700"],
                    "Donegal One": ["400"],
                    "Doppio One": ["400"],
                    Dorsa: ["400"],
                    Dosis: ["400", "200", "300", "500", "600", "700", "800"],
                    "Dr Sugiyama": ["400"],
                    "Droid Sans": ["400", "700"],
                    "Droid Sans Mono": ["400"],
                    "Droid Serif": ["400", "700"],
                    "Duru Sans": ["400"],
                    Dynalight: ["400"],
                    "EB Garamond": ["400"],
                    "Eagle Lake": ["400"],
                    Eater: ["400"],
                    Economica: ["400", "700"],
                    Electrolize: ["400"],
                    Elsie: ["400", "900"],
                    "Elsie Swash Caps": ["400", "900"],
                    "Emblema One": ["400"],
                    "Emilys Candy": ["400"],
                    Engagement: ["400"],
                    Englebert: ["400"],
                    Enriqueta: ["400", "700"],
                    "Erica One": ["400"],
                    Esteban: ["400"],
                    "Euphoria Script": ["400"],
                    Ewert: ["400"],
                    Exo: ["400", "100", "200", "300", "500", "600", "700", "800", "900"],
                    "Expletus Sans": ["400", "500", "600", "700"],
                    "Fanwood Text": ["400"],
                    Fascinate: ["400"],
                    "Fascinate Inline": ["400"],
                    "Faster One": ["400"],
                    Fasthand: ["400"],
                    "Fauna One": ["400"],
                    Federant: ["400"],
                    Federo: ["400"],
                    Felipa: ["400"],
                    Fenix: ["400"],
                    "Finger Paint": ["400"],
                    "Fjalla One": ["400"],
                    "Fjord One": ["400"],
                    Flamenco: ["400", "300"],
                    Flavors: ["400"],
                    Fondamento: ["400"],
                    "Fontdiner Swanky": ["400"],
                    Forum: ["400"],
                    "Francois One": ["400"],
                    "Freckle Face": ["400"],
                    "Fredericka the Great": ["400"],
                    "Fredoka One": ["400"],
                    Freehand: ["400"],
                    Fresca: ["400"],
                    Frijole: ["400"],
                    Fruktur: ["400"],
                    "Fugaz One": ["400"],
                    "GFS Didot": ["400"],
                    "GFS Neohellenic": ["400", "700"],
                    Gabriela: ["400"],
                    Gafata: ["400"],
                    Galdeano: ["400"],
                    Galindo: ["400"],
                    "Gentium Basic": ["400", "700"],
                    "Gentium Book Basic": ["400", "700"],
                    Geo: ["400"],
                    Geostar: ["400"],
                    "Geostar Fill": ["400"],
                    "Germania One": ["400"],
                    "Gilda Display": ["400"],
                    "Give You Glory": ["400"],
                    "Glass Antiqua": ["400"],
                    Glegoo: ["400"],
                    "Gloria Hallelujah": ["400"],
                    "Goblin One": ["400"],
                    "Gochi Hand": ["400"],
                    Gorditas: ["400", "700"],
                    "Goudy Bookletter 1911": ["400"],
                    Graduate: ["400"],
                    "Grand Hotel": ["400"],
                    "Gravitas One": ["400"],
                    "Great Vibes": ["400"],
                    Griffy: ["400"],
                    Gruppo: ["400"],
                    Gudea: ["400", "700"],
                    Habibi: ["400"],
                    "Hammersmith One": ["400"],
                    Hanalei: ["400"],
                    "Hanalei Fill": ["400"],
                    Handlee: ["400"],
                    Hanuman: ["400", "700"],
                    "Happy Monkey": ["400"],
                    "Headland One": ["400"],
                    "Henny Penny": ["400"],
                    "Herr Von Muellerhoff": ["400"],
                    "Holtwood One SC": ["400"],
                    "Homemade Apple": ["400"],
                    Homenaje: ["400"],
                    "IM Fell DW Pica": ["400"],
                    "IM Fell DW Pica SC": ["400"],
                    "IM Fell Double Pica": ["400"],
                    "IM Fell Double Pica SC": ["400"],
                    "IM Fell English": ["400"],
                    "IM Fell English SC": ["400"],
                    "IM Fell French Canon": ["400"],
                    "IM Fell French Canon SC": ["400"],
                    "IM Fell Great Primer": ["400"],
                    "IM Fell Great Primer SC": ["400"],
                    Iceberg: ["400"],
                    Iceland: ["400"],
                    Imprima: ["400"],
                    Inconsolata: ["400", "700"],
                    Inder: ["400"],
                    "Indie Flower": ["400"],
                    Inika: ["400", "700"],
                    "Irish Grover": ["400"],
                    "Istok Web": ["400", "700"],
                    Italiana: ["400"],
                    Italianno: ["400"],
                    "Jacques Francois": ["400"],
                    "Jacques Francois Shadow": ["400"],
                    "Jim Nightshade": ["400"],
                    "Jockey One": ["400"],
                    "Jolly Lodger": ["400"],
                    "Josefin Sans": ["400", "100", "300", "600", "700"],
                    "Josefin Slab": ["400", "100", "300", "600", "700"],
                    "Joti One": ["400"],
                    Judson: ["400", "700"],
                    Julee: ["400"],
                    "Julius Sans One": ["400"],
                    Junge: ["400"],
                    Jura: ["400", "300", "500", "600"],
                    "Just Another Hand": ["400"],
                    "Just Me Again Down Here": ["400"],
                    Kameron: ["400", "700"],
                    Karla: ["400", "700"],
                    "Kaushan Script": ["400"],
                    Kavoon: ["400"],
                    "Keania One": ["400"],
                    "Kelly Slab": ["400"],
                    Kenia: ["400"],
                    Khmer: ["400"],
                    "Kite One": ["400"],
                    Knewave: ["400"],
                    "Kotta One": ["400"],
                    Koulen: ["400"],
                    Kranky: ["400"],
                    Kreon: ["400", "300", "700"],
                    Kristi: ["400"],
                    "Krona One": ["400"],
                    "La Belle Aurore": ["400"],
                    Lancelot: ["400"],
                    Lato: ["400", "100", "300", "700", "900"],
                    "League Script": ["400"],
                    "Leckerli One": ["400"],
                    Ledger: ["400"],
                    Lekton: ["400", "700"],
                    Lemon: ["400"],
                    "Libre Baskerville": ["400", "700"],
                    "Life Savers": ["400", "700"],
                    "Lilita One": ["400"],
                    "Lily Script One": ["400"],
                    Limelight: ["400"],
                    "Linden Hill": ["400"],
                    Lobster: ["400"],
                    "Lobster Two": ["400", "700"],
                    "Londrina Outline": ["400"],
                    "Londrina Shadow": ["400"],
                    "Londrina Sketch": ["400"],
                    "Londrina Solid": ["400"],
                    Lora: ["400", "700"],
                    "Love Ya Like A Sister": ["400"],
                    "Loved by the King": ["400"],
                    "Lovers Quarrel": ["400"],
                    "Luckiest Guy": ["400"],
                    Lusitana: ["400", "700"],
                    Lustria: ["400"],
                    Macondo: ["400"],
                    "Macondo Swash Caps": ["400"],
                    Magra: ["400", "700"],
                    "Maiden Orange": ["400"],
                    Mako: ["400"],
                    Marcellus: ["400"],
                    "Marcellus SC": ["400"],
                    "Marck Script": ["400"],
                    Margarine: ["400"],
                    "Marko One": ["400"],
                    Marmelad: ["400"],
                    Marvel: ["400", "700"],
                    Mate: ["400"],
                    "Mate SC": ["400"],
                    "Maven Pro": ["400", "500", "700", "900"],
                    McLaren: ["400"],
                    Meddon: ["400"],
                    MedievalSharp: ["400"],
                    "Medula One": ["400"],
                    Megrim: ["400"],
                    "Meie Script": ["400"],
                    Merienda: ["400", "700"],
                    "Merienda One": ["400"],
                    Merriweather: ["400", "300", "700", "900"],
                    "Merriweather Sans": ["400", "300", "700", "800"],
                    Metal: ["400"],
                    "Metal Mania": ["400"],
                    Metamorphous: ["400"],
                    Metrophobic: ["400"],
                    Michroma: ["400"],
                    Milonga: ["400"],
                    Miltonian: ["400"],
                    "Miltonian Tattoo": ["400"],
                    Miniver: ["400"],
                    "Miss Fajardose": ["400"],
                    "Modern Antiqua": ["400"],
                    Molengo: ["400"],
                    Molle: [],
                    Monda: ["400", "700"],
                    Monofett: ["400"],
                    Monoton: ["400"],
                    "Monsieur La Doulaise": ["400"],
                    Montaga: ["400"],
                    Montez: ["400"],
                    Montserrat: ["400", "700"],
                    "Montserrat Alternates": ["400", "700"],
                    "Montserrat Subrayada": ["400", "700"],
                    Moul: ["400"],
                    Moulpali: ["400"],
                    "Mountains of Christmas": ["400", "700"],
                    "Mouse Memoirs": ["400"],
                    "Mr Bedfort": ["400"],
                    "Mr Dafoe": ["400"],
                    "Mr De Haviland": ["400"],
                    "Mrs Saint Delafield": ["400"],
                    "Mrs Sheppards": ["400"],
                    Muli: ["400", "300"],
                    "Mystery Quest": ["400"],
                    Neucha: ["400"],
                    Neuton: ["400", "200", "300", "700", "800"],
                    "New Rocker": ["400"],
                    "News Cycle": ["400", "700"],
                    Niconne: ["400"],
                    "Nixie One": ["400"],
                    Nobile: ["400", "700"],
                    Nokora: ["400", "700"],
                    Norican: ["400"],
                    Nosifer: ["400"],
                    "Nothing You Could Do": ["400"],
                    "Noticia Text": ["400", "700"],
                    "Noto Sans": ["400", "700"],
                    "Noto Serif": ["400", "700"],
                    "Nova Cut": ["400"],
                    "Nova Flat": ["400"],
                    "Nova Mono": ["400"],
                    "Nova Oval": ["400"],
                    "Nova Round": ["400"],
                    "Nova Script": ["400"],
                    "Nova Slim": ["400"],
                    "Nova Square": ["400"],
                    Numans: ["400"],
                    Nunito: ["400", "300", "700"],
                    "Odor Mean Chey": ["400"],
                    Offside: ["400"],
                    "Old Standard TT": ["400", "700"],
                    Oldenburg: ["400"],
                    "Oleo Script": ["400", "700"],
                    "Oleo Script Swash Caps": ["400", "700"],
                    "Open Sans": ["400", "300", "600", "700", "800"],
                    "Open Sans Condensed": ["300", "700"],
                    Oranienbaum: ["400"],
                    Orbitron: ["400", "500", "700", "900"],
                    Oregano: ["400"],
                    Orienta: ["400"],
                    "Original Surfer": ["400"],
                    Oswald: ["400", "300", "700"],
                    "Over the Rainbow": ["400"],
                    Overlock: ["400", "700", "900"],
                    "Overlock SC": ["400"],
                    Ovo: ["400"],
                    Oxygen: ["400", "300", "700"],
                    "Oxygen Mono": ["400"],
                    "PT Mono": ["400"],
                    "PT Sans": ["400", "700"],
                    "PT Sans Caption": ["400", "700"],
                    "PT Sans Narrow": ["400", "700"],
                    "PT Serif": ["400", "700"],
                    "PT Serif Caption": ["400"],
                    Pacifico: ["400"],
                    Paprika: ["400"],
                    Parisienne: ["400"],
                    "Passero One": ["400"],
                    "Passion One": ["400", "700", "900"],
                    "Pathway Gothic One": ["400"],
                    "Patrick Hand": ["400"],
                    "Patrick Hand SC": ["400"],
                    "Patua One": ["400"],
                    "Paytone One": ["400"],
                    Peralta: ["400"],
                    "Permanent Marker": ["400"],
                    "Petit Formal Script": ["400"],
                    Petrona: ["400"],
                    Philosopher: ["400", "700"],
                    Piedra: ["400"],
                    "Pinyon Script": ["400"],
                    "Pirata One": ["400"],
                    Plaster: ["400"],
                    Play: ["400", "700"],
                    Playball: ["400"],
                    "Playfair Display": ["400", "700", "900"],
                    "Playfair Display SC": ["400", "700", "900"],
                    Podkova: ["400", "700"],
                    "Poiret One": ["400"],
                    "Poller One": ["400"],
                    Poly: ["400"],
                    Pompiere: ["400"],
                    "Pontano Sans": ["400"],
                    "Port Lligat Sans": ["400"],
                    "Port Lligat Slab": ["400"],
                    Prata: ["400"],
                    Preahvihear: ["400"],
                    "Press Start 2P": ["400"],
                    "Princess Sofia": ["400"],
                    Prociono: ["400"],
                    "Prosto One": ["400"],
                    Puritan: ["400", "700"],
                    "Purple Purse": ["400"],
                    Quando: ["400"],
                    Quantico: ["400", "700"],
                    Quattrocento: ["400", "700"],
                    "Quattrocento Sans": ["400", "700"],
                    Questrial: ["400"],
                    Quicksand: ["400", "300", "700"],
                    Quintessential: ["400"],
                    Qwigley: ["400"],
                    "Racing Sans One": ["400"],
                    Radley: ["400"],
                    Raleway: ["400", "100", "200", "300", "500", "600", "700", "800", "900"],
                    "Raleway Dots": ["400"],
                    Rambla: ["400", "700"],
                    "Rammetto One": ["400"],
                    Ranchers: ["400"],
                    Rancho: ["400"],
                    Rationale: ["400"],
                    Redressed: ["400"],
                    "Reenie Beanie": ["400"],
                    Revalia: ["400"],
                    Ribeye: ["400"],
                    "Ribeye Marrow": ["400"],
                    Righteous: ["400"],
                    Risque: ["400"],
                    Roboto: ["400", "100", "300", "500", "700", "900"],
                    "Roboto Condensed": ["400", "300", "700"],
                    "Roboto Slab": ["400", "100", "300", "700"],
                    Rochester: ["400"],
                    "Rock Salt": ["400"],
                    Rokkitt: ["400", "700"],
                    Romanesco: ["400"],
                    "Ropa Sans": ["400"],
                    Rosario: ["400", "700"],
                    Rosarivo: ["400"],
                    "Rouge Script": ["400"],
                    Ruda: ["400", "700", "900"],
                    Rufina: ["400", "700"],
                    "Ruge Boogie": ["400"],
                    Ruluko: ["400"],
                    "Rum Raisin": ["400"],
                    "Ruslan Display": ["400"],
                    "Russo One": ["400"],
                    Ruthie: ["400"],
                    Rye: ["400"],
                    Sacramento: ["400"],
                    Sail: ["400"],
                    Salsa: ["400"],
                    Sanchez: ["400"],
                    Sancreek: ["400"],
                    "Sansita One": ["400"],
                    Sarina: ["400"],
                    Satisfy: ["400"],
                    Scada: ["400", "700"],
                    Schoolbell: ["400"],
                    "Seaweed Script": ["400"],
                    Sevillana: ["400"],
                    "Seymour One": ["400"],
                    "Shadows Into Light": ["400"],
                    "Shadows Into Light Two": ["400"],
                    Shanti: ["400"],
                    Share: ["400", "700"],
                    "Share Tech": ["400"],
                    "Share Tech Mono": ["400"],
                    Shojumaru: ["400"],
                    "Short Stack": ["400"],
                    Siemreap: ["400"],
                    "Sigmar One": ["400"],
                    Signika: ["400", "300", "600", "700"],
                    "Signika Negative": ["400", "300", "600", "700"],
                    Simonetta: ["400", "900"],
                    Sintony: ["400", "700"],
                    "Sirin Stencil": ["400"],
                    "Six Caps": ["400"],
                    Skranji: ["400", "700"],
                    Slackey: ["400"],
                    Smokum: ["400"],
                    Smythe: ["400"],
                    Sniglet: ["800"],
                    Snippet: ["400"],
                    "Snowburst One": ["400"],
                    "Sofadi One": ["400"],
                    Sofia: ["400"],
                    "Sonsie One": ["400"],
                    "Sorts Mill Goudy": ["400"],
                    "Source Code Pro": ["400", "200", "300", "500", "600", "700", "900"],
                    "Source Sans Pro": ["400", "200", "300", "600", "700", "900"],
                    "Special Elite": ["400"],
                    "Spicy Rice": ["400"],
                    Spinnaker: ["400"],
                    Spirax: ["400"],
                    "Squada One": ["400"],
                    Stalemate: ["400"],
                    "Stalinist One": ["400"],
                    "Stardos Stencil": ["400", "700"],
                    "Stint Ultra Condensed": ["400"],
                    "Stint Ultra Expanded": ["400"],
                    Stoke: ["400", "300"],
                    Strait: ["400"],
                    "Sue Ellen Francisco": ["400"],
                    Sunshiney: ["400"],
                    "Supermercado One": ["400"],
                    Suwannaphum: ["400"],
                    "Swanky and Moo Moo": ["400"],
                    Syncopate: ["400", "700"],
                    Tangerine: ["400", "700"],
                    Taprom: ["400"],
                    Tauri: ["400"],
                    Telex: ["400"],
                    "Tenor Sans": ["400"],
                    "Text Me One": ["400"],
                    "The Girl Next Door": ["400"],
                    Tienne: ["400", "700", "900"],
                    Tinos: ["400", "700"],
                    "Titan One": ["400"],
                    "Titillium Web": ["400", "200", "300", "600", "700", "900"],
                    "Trade Winds": ["400"],
                    Trocchi: ["400"],
                    Trochut: ["400", "700"],
                    Trykker: ["400"],
                    "Tulpen One": ["400"],
                    Ubuntu: ["400", "300", "500", "700"],
                    "Ubuntu Condensed": ["400"],
                    "Ubuntu Mono": ["400", "700"],
                    Ultra: ["400"],
                    "Uncial Antiqua": ["400"],
                    Underdog: ["400"],
                    "Unica One": ["400"],
                    UnifrakturCook: ["700"],
                    UnifrakturMaguntia: ["400"],
                    Unkempt: ["400", "700"],
                    Unlock: ["400"],
                    Unna: ["400"],
                    VT323: ["400"],
                    "Vampiro One": ["400"],
                    Varela: ["400"],
                    "Varela Round": ["400"],
                    "Vast Shadow": ["400"],
                    Vibur: ["400"],
                    Vidaloka: ["400"],
                    Viga: ["400"],
                    Voces: ["400"],
                    Volkhov: ["400", "700"],
                    Vollkorn: ["400", "700"],
                    Voltaire: ["400"],
                    "Waiting for the Sunrise": ["400"],
                    Wallpoet: ["400"],
                    "Walter Turncoat": ["400"],
                    Warnes: ["400"],
                    Wellfleet: ["400"],
                    "Wendy One": ["400"],
                    "Wire One": ["400"],
                    "Yanone Kaffeesatz": ["400", "200", "300", "700"],
                    Yellowtail: ["400"],
                    "Yeseva One": ["400"],
                    Yesteryear: ["400"],
                    Zeyada: ["400"]
                },
                WEIGHT_OPTIONS: [{
                    value: "100",
                    label: "Ultra-Light 100"
                }, {
                    value: "200",
                    label: "Light 200"
                }, {
                    value: "300",
                    label: "Book 300"
                }, {
                    value: "400",
                    label: "Normal 400"
                }, {
                    value: "500",
                    label: "Medium 500"
                }, {
                    value: "600",
                    label: "Semi-Bold 600"
                }, {
                    value: "700",
                    label: "Bold 700"
                }, {
                    value: "800",
                    label: "Extra-Bold 800"
                }, {
                    value: "900",
                    label: "Ultra-Bold 900"
                }]
            },
            o = function(e) {
                var l = a.querySelectorAll('link[href*="//fonts.googleapis.com/"]'),
                    n = [];
                if (l)
                    for (var o = 0; o < l.length; o++) {
                        var r = l[o].href,
                            i = r.match(/family=(.*)%3A/);
                        i && n.push(i[1])
                    }
                for (var u = 0; u < n.length; u++)
                    if (e === n[u]) return !0;
                return !1
            };
        n.isFontLoaded = o;
        var r = function(e, o) {
            var r = o;
            r || (r = n.FONT_WEIGHTS[e]), r instanceof Array && (r = r.join(","));
            var i = l.stringifyQuery({
                    family: e + ":" + r,
                    subset: "latin-ext"
                }),
                u = a.doc.createElement("link");
            u.href = "//fonts.googleapis.com/css?" + i, u.type = "text/css", u.rel = "stylesheet", a.doc.getElementsByTagName("head")[0].appendChild(u)
        };
        n.loadFont = r, module.exports = exports = n, e.SM.Fonts = n
    }(), SM.currentModule = null
}, "", {
    requires: ["sm", "sm-dom", "lodash"]
});
YUI.add("sm-form-field-font-dropdown-field", function(e) {
    SM.currentModule = "sm-form-field-font-dropdown-field";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        var e = SM["import"]("sm-fonts-dropdown"),
            r = SM["import"]("react"),
            t = SM["import"]("sm-component-pure-render"),
            o = SM["import"]("sm-component-overheadformfield"),
            n = function(t) {
                function n(e) {
                    babelHelpers.classCallCheck(this, n);
                    var r = babelHelpers.possibleConstructorReturn(this, (n.__proto__ || Object.getPrototypeOf(n)).call(this, e));
                    return r.state = {
                        error: null,
                        value: e.defaultValue
                    }, r
                }
                return babelHelpers.inherits(n, t), babelHelpers.createClass(n, [{
                    key: "render",
                    value: function() {
                        var t = this.props,
                            n = this.state;
                        return r.createElement(o, {
                            label: t.label,
                            error: n.error
                        }, r.createElement(e, {
                            defaultValue: n.value,
                            defaultFonts: t.defaultFonts,
                            onSelectionChange: t.onSelectionChange
                        }))
                    }
                }]), n
            }(t),
            l = r.PropTypes;
        n.PropTypes = {
            label: l.string,
            defaultFonts: l.array,
            defaultValue: l.string,
            onSelectionChange: l.func
        }, n.defaultProps = {
            label: "Fonts"
        }, module.exports = exports = n
    }(), SM.currentModule = null
}, "", {
    requires: ["classnames", "react", "sm-dom", "sm-fonts-dropdown", "sm-component-overheadformfield"]
});
YUI.add("sm-form-field-single-file-ui", function(e) {
    SM.currentModule = "sm-form-field-single-file-ui";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        var e;
        ! function() {
            var t = SM["import"]("sm-dom"),
                i = SM["import"]("react").PropTypes,
                r = "getStatus",
                a = "getPreviewImage",
                s = "startUpload",
                n = "clearUpload",
                o = "getResult",
                l = "getFileName",
                m = "getFileSize",
                c = "getProgress",
                p = "getError",
                d = [r, a, s, n, o, l, m, c, p];
            e = {
                propTypes: {
                    flashConfig: i.object,
                    uploaderVersion: i.string,
                    flashFrame: i.bool
                },
                componentDidMount: function() {
                    this.props.flashFrame && this._embedSWF()
                },
                componentDidUpdate: function(e, t) {
                    if (this.props.flashFrame) {
                        var i = this.state.imageData;
                        i && i !== t.imageData && this.props.selectImage(i)
                    }
                },
                getBase64Image: function() {
                    return "data:image/jpeg;base64," + this._sendSWFCommand(a)
                },
                getError: function() {
                    return this._sendSWFCommand(p)
                },
                getUploadResult: function() {
                    return this._sendSWFCommand(o)
                },
                startUpload: function() {
                    this._sendSWFCommand(s)
                },
                _sendSWFCommand: function(e) {
                    if (-1 !== d.indexOf(e)) {
                        var i = t.doc.getElementById(this._getFlashAttrs().name);
                        return i[e]()
                    }
                },
                _embedSWF: function() {
                    var e = this._getFlashAttrs(),
                        i = SM.env.host,
                        r = i.http + i.cdn + "/img/ria/FlashMiniUploader/" + this.props.uploaderVersion + ".swf",
                        a = t.doc.getElementById(e.name);
                    swfobject.embedSWF(r, a, "34", "34", "9.0.0", "expressInstall.swf", this.props.flashConfig, e, e)
                },
                _getFlashAttrs: function() {
                    return {
                        allowNetworking: "all",
                        allowScriptAccess: "always",
                        name: "sm-miniuploader-swf-" + this.props.name.toLowerCase(),
                        wmode: "transparent"
                    }
                }
            }
        }();
        var t = SM["import"]("sm-component-button"),
            i = SM["import"]("sm-dom"),
            r = SM["import"]("sm-component-icon"),
            a = SM["import"]("sm-component-image"),
            s = SM["import"]("sm-uploader-queue"),
            n = SM["import"]("react"),
            o = SM["import"]("react-dom"),
            l = SM["import"]("sm-component-underlineformfield"),
            m = n.PropTypes,
            c = SM["import"]("classnames"),
            p = {
                "image/*": ["image/gif", "image/jpeg", "image/png"]
            },
            d = n.createClass({
                displayName: "SingleFilePickerUI",
                mixins: [e],
                propTypes: {
                    acceptTypes: m.string,
                    clearImage: m.func,
                    initialImageData: m.string,
                    label: m.string.isRequired,
                    name: m.string.isRequired,
                    selectImage: m.func.isRequired
                },
                getDefaultProps: function() {
                    return {
                        acceptTypes: "image/*"
                    }
                },
                getInitialState: function() {
                    return {
                        imageData: this.props.initialImageData
                    }
                },
                render: function() {
                    var e;
                    if (!this.props.flashFrame) var i = n.createElement("input", {
                        accept: this.props.acceptTypes,
                        onChange: this._onInputChange,
                        ref: "filePicker",
                        type: "file"
                    });
                    var s = {
                        "sm-form-field-file-picker-has-image": !!this.state.imageData
                    };
                    return e = this.state.imageData ? n.createElement("div", null, n.createElement("div", {
                        className: "sm-form-field-container sm-form-field-upload-image-container",
                        onClick: this.passClick,
                        title: "Change image"
                    }, n.createElement(a.CroppedImage, {
                        aspectRatio: "1x1",
                        className: "sm-form-field-upload-cropped-image",
                        src: {
                            url: this.state.imageData,
                            height: 1,
                            width: 1
                        }
                    })), n.createElement("div", {
                        className: "sm-form-field-container sm-form-field-upload-image-clear"
                    }, n.createElement(t, {
                        onClick: this._onClear,
                        size: "small",
                        noChrome: !0
                    }, n.createElement(r, {
                        icon: "XCross",
                        size: "small"
                    })))) : n.createElement("div", {
                        className: "sm-form-field-container"
                    }, n.createElement(t, {
                        className: "sm-form-field-small-button sm-form-field-upload-image-empty",
                        onClick: this.passClick,
                        ref: "emptyButton",
                        size: "small",
                        title: "Select image"
                    }, n.createElement(r, {
                        icon: "Image",
                        size: "small"
                    }))), n.createElement(l, {
                        className: c(s),
                        label: this.props.label,
                        error: this.state.errorMessage
                    }, n.createElement("div", null, i, e))
                },
                clear: function() {
                    this._onClear(null)
                },
                passClick: function() {
                    return this.props.handleImageClick ? void this.props.handleImageClick() : void(this.refs.filePicker && o.findDOMNode(this.refs.filePicker).click())
                },
                setError: function(e) {
                    this.setState({
                        errorMessage: e
                    })
                },
                _getOrigin: function() {
                    var e = i.win.location;
                    return e.origin || e.protocol + "//" + e.hostname + (e.port ? ":" + e.port : "")
                },
                _isValidFile: function(e) {
                    if (!e.length) return !1;
                    if (1 !== e.length) return this.setError("Error: Please select only one file."), !1;
                    var t = e[0];
                    if (t.size > s.IMAGE_SIZE) return this.setError("Exceeds maximum size of " + s.IMAGE_SIZE_STRING), !1;
                    var i = p[this.props.acceptTypes];
                    return i && -1 === i.indexOf(t.type) ? (this.setError("Error: Please select a valid image file (JPEG, GIF, or PNG)"), !1) : !0
                },
                _onClear: function(e) {
                    this.setState({
                        errorMessage: null,
                        imageData: null
                    }), this.refs.filePicker && (o.findDOMNode(this.refs.filePicker).value = ""), this.props.clearImage(e)
                },
                _onInputChange: function(e) {
                    var t = e.target.files;
                    if (!this._isValidFile(t)) return void(e.target.value = "");
                    this.setError(null);
                    var i = t[0],
                        r = new FileReader;
                    r.onload = function(i) {
                        this.setState({
                            imageData: i.target.result
                        }), this.props.selectImage(t, e)
                    }.bind(this), r.readAsDataURL(i)
                }
            });
        module.exports = d
    }(), SM.currentModule = null
}, "", {
    requires: ["classnames", "react", "react-dom", "sm-dom", "sm-component-image", "sm-component-button", "sm-component-icon", "sm-component-underlineformfield", "sm-uploader-queue"]
});
YUI.add("sm-form-fields", function(e) {
    SM.currentModule = "sm-form-fields";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        "use strict";

        function t(e, t) {
            this.form = e, this.fieldCfg = t
        }

        function i(e, t) {
            this.form = e, this.fieldCfg = t
        }

        function s(e, t) {
            this.form = e, this.fieldCfg = t, this._cmCfg = t.editorConfig, this._jsHintCfg = t.jsHintConfig
        }

        function n(e, t) {
            this.form = e, this.fieldCfg = t
        }

        function o(t, i) {
            this._form = t, this._fieldCfg = i;
            var s = {
                items: i.items,
                noChrome: void 0 !== i.noChrome ? i.noChrome : !0,
                availableOptionTemplate: i.availableOptionTemplate
            };
            i.width && (s.width = i.width), i.selectedOptionTemplate && (s.selectedOptionTemplate = i.selectedOptionTemplate), i.selectText && (s.selectText = i.selectText), i.classNames && (s.classNames = i.classNames), this._dropdown = new e.SM.Views.Dropdown(s)
        }

        function a(e, t) {
            this.form = e, this.fieldCfg = t, this.label = t.label, this.defaultFonts = t.defaultFonts
        }

        function r(e, t) {
            this.form = e, this.fieldCfg = t
        }

        function l() {
            l.superclass.constructor.apply(this, arguments)
        }

        function d() {
            d.superclass.constructor.apply(this, arguments)
        }

        function c(e, t) {
            this.form = e, this.fieldCfg = t
        }

        function h(e, t) {
            this.form = e, this.fieldCfg = t
        }

        function m(e, t) {
            this.form = e, this.fieldCfg = t
        }

        function f(e, t) {
            this.form = e, this.fieldCfg = t
        }

        function u(e, t) {
            this.form = e, this.fieldCfg = t
        }

        function p() {
            p.superclass.constructor.apply(this, arguments), this._model = new e.SM.Models.Image
        }

        function g() {
            g.superclass.constructor.apply(this, arguments), this._model = new e.SM.Models.Album
        }

        function v() {
            v.superclass.constructor.apply(this, arguments), this._model = new e.SM.Models.UserNode
        }

        function C() {
            C.superclass.constructor.apply(this, arguments), this._model = new e.SM.Models.UserNode
        }

        function b() {
            b.superclass.constructor.apply(this, arguments), this._model = new e.SM.Models.UserNode
        }

        function S() {
            S.superclass.constructor.apply(this, arguments), this._model = new e.SM.Models.Image
        }

        function _(e, t) {
            this.form = e, this.fieldCfg = t
        }

        function T(e, t) {
            this.form = e, this.fieldCfg = t
        }

        function M(e, t) {
            this.form = e, this.fieldCfg = t
        }

        function k(t, i) {
            this.form = t, this.fieldCfg = i, this._editor = new e.Editor({
                html: i.value
            }), this._editor.plug(e.SM.Editor.Toolbar)
        }

        function F(e, t) {
            this.form = e, F.superclass.constructor.call(this, t)
        }

        function N(e, t) {
            this.form = e, this.fieldCfg = t
        }

        function I(e, t) {
            this.form = e, this.fieldCfg = t
        }

        function y(e, t) {
            this.form = e, this.fieldCfg = t, this.albumId = t.albumId, this._useFlash = !(window.File && window.FileReader && window.FileList)
        }

        function E(e, t) {
            this.form = e, this.fieldCfg = t, this.albumId = t.albumId
        }
        t.prototype = {
            render: function(t) {
                var i, s = this.fieldCfg;
                this.field = e.Node.create(e.SM.Templates.action(s)), i = e.Node.create(e.SM.Templates.label(s)), t.addClass("sm-form-field-underline"), t.append(i), t.appendChild('<div class="sm-form-field-container">').append(this.field)
            },
            bind: function() {
                "function" == typeof this.fieldCfg.onclick && (this.eventHandle = this.field.on("click", this.fieldCfg.onclick, this.fieldCfg.thisObj || this))
            },
            destroy: function() {
                this.eventHandle && this.eventHandle.destroy()
            }
        }, e.namespace("SM.FormFields").ActionFormField = t, i.prototype = {
            render: function(t) {
                var i, s, n, o = this.fieldCfg;
                this.container = t, this.field = i = new e.SM.Slider({
                    min: 0,
                    max: 100,
                    length: 100,
                    valuePanelFormatter: function(t) {
                        return e.Escape.html(t + "%")
                    }
                }), this.description = n = e.Node.create(e.SM.Templates.fieldDescription(o)), this.label = s = e.Node.create(e.SM.Templates.label(o)), t.addClass("sm-form-field-underline"), t.append(s), i.render(t.appendChild('<div class="sm-form-field-container">')), t.append(n)
            },
            bind: function() {
                this.field.on("valueChange", function(e) {
                    this.form.get("model").set(this.fieldCfg.name, e.newVal, {
                        src: "ff",
                        originEvent: e
                    })
                }, this)
            },
            setValue: function(e) {
                this.field.set("value", e)
            },
            destroy: function() {
                this.field.destroy()
            }
        }, e.namespace("SM.FormFields").AlphaFormField = i, s.prototype = {
            render: function(t) {
                var i, s, n = this,
                    o = this.fieldCfg,
                    a = this._cmCfg,
                    r = this._jsHintCfg;
                n.container = t, n.field = i = e.Node.create(e.SM.Templates.textarea(o)), this.label = s = e.Node.create(e.SM.Templates.label(o)), t.addClass("sm-form-field-overhead"), t.append(s), t.appendChild('<div class="sm-form-field-container">').append(i), o.placeholder && i.setAttribute("placeholder", o.placeholder), i.plug(e.SM.Plugin.CodeMirror, {
                    editorMode: o.editorMode,
                    editorHeight: o.editorHeight,
                    cmConfig: a,
                    jsHintConfig: r
                })
            },
            bind: function() {
                this.eventHandle = this.field.CodeMirror.on("codemirror:change", function(e) {
                    this.form.get("model").set(this.fieldCfg.name, this.field.CodeMirror.getEditorContents(), {
                        src: "ff",
                        originEvent: e
                    })
                }, this)
            },
            setValue: function(e) {
                this.field.CodeMirror.setEditorContents(e)
            },
            setError: function(t) {
                this.errorNode || (this.errorNode = e.Node.create('<div class="sm-form-field-error-msg"></div>'), this.container.appendChild(this.errorNode), this.field.CodeMirror.get("wrapperNode").addClass("sm-form-field-error")), this.errorNode.set("text", t)
            },
            clearError: function() {
                this.errorNode && (this.errorNode.remove(!0), this.errorNode = null, this.field.CodeMirror.get("wrapperNode").removeClass("sm-form-field-error"))
            },
            destroy: function() {
                this.eventHandle.detach(), this.field.unplug(e.SM.Plugin.CodeMirror)
            }
        }, e.namespace("SM.FormFields").CodeFormField = s;
        var P = e.Base.create("sm-colorpicker-panel", e.SM.Panel, [], {
            initializer: function(t) {
                this.setAttrs({
                    width: 254,
                    zIndex: 1,
                    constrain: !0,
                    hideOn: [{
                        eventName: "clickoutside"
                    }],
                    smbuttons: [{
                        icon: "XCross",
                        value: "cancel",
                        size: "small"
                    }, {
                        icon: "CheckMark",
                        value: "ok",
                        size: "small",
                        skin: "submit"
                    }]
                }), this.colorPicker = new e.SM.ColorPicker({
                    paletteMode: t && t.paletteMode
                })
            },
            destructor: function() {
                new e.EventHandle(this._eventHandles).detach(), this.colorPicker && this.colorPicker.destroy()
            },
            renderUI: function() {
                P.superclass.renderUI.apply(this, arguments), this.get("boundingBox").addClass("sm-colorpicker-panel"), this.colorPicker.render(), this.colorPicker.addTarget(this), this.setStdModContent("body", this.colorPicker.get("container"))
            },
            bindUI: function() {
                P.superclass.bindUI.apply(this, arguments), this.getStdModNode("footer").delegate("click", this._onButtonClick, ".sm-button", this)
            },
            _onButtonClick: function(e) {
                var t = e.currentTarget,
                    i = t.getData("value");
                "cancel" === i && this.fire("cancel"), this.hide()
            }
        }, {
            CSS_PREFIX: "sm-panel"
        });
        n.prototype = {
            render: function(t) {
                var i, s = this.fieldCfg,
                    n = this.form.get("model").get(this.fieldCfg.name);
                this.container = t, t.addClass("sm-form-field-underline"), this.clearButton = e.Node.create(e.SM.Templates.button({
                    icon: "XCrossSlim",
                    size: "small",
                    skin: "submit",
                    className: "sm-colorpicker-reset"
                })), this.field = e.Node.create(e.SM.Templates.button({
                    size: "small",
                    icon: "EyeDropper",
                    className: "sm-colorpicker-button"
                })), this.swatch = e.Node.create('<div class="sm-colorpicker-swatch"></div>'), this.swatch.hide(), this.label = i = e.Node.create(e.SM.Templates.label(s)), this.colorPanel = new P({
                    paletteMode: s.paletteMode,
                    render: !0,
                    visible: !1
                }), t.append(i), t.appendChild('<div class="sm-form-field-container">').append(this.clearButton).append(this.swatch).append(this.field), this._syncSwatch(n)
            },
            bind: function() {
                var t = this,
                    i = function(i) {
                        var s = this.form.get("model").get(t.fieldCfg.name);
                        this._initialHex = s, this.colorPanel.colorPicker.set("hex", s).render(), this.colorPanel.show().align(i.currentTarget, [e.WidgetPositionAlign.TL, e.WidgetPositionAlign.TR])
                    };
                this.field.on("click", i, this), this.swatch.on("click", i, this), this.colorPanel.colorPicker.after("hexChange", function(e) {
                    t.form.get("model").set(t.fieldCfg.name, e.newVal), this._syncSwatch(e.newVal)
                }, this), this.colorPanel.after("cancel", function() {
                    t.form.get("model").set(t.fieldCfg.name, this._initialHex)
                }, this), this.clearButton.on("click", function() {
                    this.form.get("model").set(this.fieldCfg.name, ""), this.clearButton.hide()
                }, this)
            },
            _syncSwatch: function(e) {
                e ? (this.field.hide(), this.swatch.setStyle("backgroundColor", "#" + e), this.swatch.show(), this.clearButton.show()) : (this.swatch.hide(), this.swatch.setStyle("backgroundColor", "transparent"), this.field.show(), this.clearButton.hide())
            },
            setValue: function(e) {
                this._syncSwatch(e)
            },
            destroy: function() {
                this.field.destroy(), this.colorPanel && this.colorPanel.destroy()
            },
            hideColorPicker: function() {
                this.colorPanel && this.colorPanel.hide()
            }
        }, e.mix(n.prototype, e.SM.Fields.FieldError), e.namespace("SM.FormFields").ColorFormField = n, o.prototype = {
            render: function(t) {
                var i, s = this._fieldCfg,
                    n = this._dropdown.render().get("container");
                this.container = t, this.label = i = e.Node.create(e.SM.Templates.label({
                    label: s.label
                })), t.addClass("sm-form-field-underline"), t.append(i), t.appendChild('<div class="sm-form-field-container">').append(n)
            },
            bind: function() {
                this.eventHandle = this._dropdown.after("valueChange", function(e) {
                    this._form.get("model").set(this._fieldCfg.name, e.newVal, {
                        src: "ff",
                        originEvent: e
                    })
                }, this)
            },
            setValue: function(e) {
                this._dropdown.setSelectedValue(e)
            },
            destroy: function() {
                this.eventHandle.detach()
            }
        }, e.mix(o.prototype, e.SM.Fields.FieldError), e.namespace("SM.FormFields").DropdownFormField = o;
        var w = SM["import"]("react"),
            x = SM["import"]("react-dom"),
            D = SM["import"]("sm-form-field-font-dropdown-field");
        a.prototype = {
            destroy: function() {
                x.unmountComponentAtNode(this.container.getDOMNode()), this._boundHandler && window.removeEventListener("message", this._boundHandler)
            },
            render: function(e) {
                var t = this.fieldCfg;
                this.formField = x.render(w.createElement(D, {
                    label: this.label,
                    defaultValue: this.form.get("model").get(this.fieldCfg.name),
                    defaultFonts: t.defaultFonts,
                    onSelectionChange: this._onSelectionChange.bind(this)
                }), e.getDOMNode()), this.container = e
            },
            _onSelectionChange: function(e) {
                this.form.get("model").set(this.fieldCfg.name, e, {
                    source: "ff"
                })
            },
            setError: function(e) {
                this.formField.setState({
                    errorMessage: e
                })
            },
            setValue: function(e) {
                this.formField.setState({
                    value: e
                })
            }
        }, e.namespace("SM.FormFields").FontFormField = a, r.prototype = {
            render: function(t) {
                this.view = new l({
                    modelList: new e.ModelList({
                        items: this.fieldCfg.value
                    })
                }), this.view.render(), t.append(this.view.get("container"))
            },
            bind: function() {
                this.eventHandle = this.view.get("modelList").after(["*:change", "*:destroy", "add"], this.afterChange, this)
            },
            afterChange: function(t) {
                this.form.get("model").set(this.fieldCfg.name, e.Array.map(this.view.get("modelList").toJSON(), function(e) {
                    return delete e.id, e
                }), {
                    src: "ff",
                    originEvent: t
                })
            },
            setValue: function(e) {
                this.view.get("modelList").reset(e)
            },
            destroy: function() {
                this.eventHandle.detach(), this.view.destroy()
            }
        }, e.namespace("SM.FormFields").FormBuilderFormField = r, e.extend(l, e.View, {
            render: function() {
                var t = this.get("modelList"),
                    i = this.get("container");
                i.empty(), t.each(function(e) {
                    var t = new d({
                        model: e
                    });
                    t.render(), i.append(t.get("container"))
                }, this), this.addButtonNode = i.appendChild(e.SM.Templates.button({
                    label: "add new form item!"
                })), this.eventHandle = this.addButtonNode.on("click", this.addItem, this)
            },
            destructor: function() {
                this.eventHandle.detach()
            },
            addItem: function() {
                var t = new e.Model,
                    i = new d({
                        model: t
                    });
                this.get("modelList").add(t), i.render(), this.get("container").insert(i.get("container"), this.addButtonNode)
            }
        }), e.extend(d, e.View, {
            render: function() {
                var t = this,
                    i = t.get("model").toJSON(),
                    s = t.get("container");
                s.addClass("sm-panel-content").setHTML(e.SM.Templates.textbox({
                    name: "Label",
                    value: i.Label,
                    placeholder: "Label"
                }) + e.SM.Templates.select({
                    name: "Type",
                    value: i.Type,
                    options: d.SELECT_OPTIONS
                }) + e.SM.Templates.textbox({
                    name: "Options",
                    value: i.Options,
                    placeholder: "Comma-separated options"
                }) + e.SM.Templates.textbox({
                    name: "DefaultValue",
                    value: i.DefaultValue,
                    placeholder: "Default value"
                })), this.bg = new e.ButtonGroup({
                    srcNode: e.Node.create(e.SM.Templates.toggle())
                }), this.bg.render(e.Node.create("<div>Required: </div>").appendTo(s)), s.append(e.SM.Templates.button({
                    icon: "Trash"
                })), t.eventHandles = [].concat(s.all(".sm-form-field-text-input").on("change", function(e) {
                    t.get("model").set(e.currentTarget.get("name"), e.currentTarget.get("value"))
                }), s.all(".sm-form-field-select").on("change", function(e) {
                    t.get("model").set(e.currentTarget.get("name"), e.currentTarget.get("value"))
                }), this.bg.on("selectionChange", function(e) {
                    t.get("model").set("Required", "on" === e.target.getSelectedButtons()[0].get("value"))
                }))
            },
            events: {
                ".sm-button": {
                    click: "selfDestruct"
                }
            },
            selfDestruct: function() {
                this.get("model").destroy(), this.bg.destroy(), new e.EventHandle(this.eventHandles).detach(), this.destroy({
                    remove: !0
                })
            }
        }), d.TYPES = {
            DROPDOWN: "dropdown",
            SMSWITCH: "switch",
            CHECKBOX: "checkbox",
            CHECKBOXES: "checkboxes",
            RADIOS: "radios",
            TEXT: "text",
            TEXTAREA: "textarea",
            IMAGE: "image",
            ALBUM: "album",
            NODE: "node",
            VIDEO: "video",
            PASSWORD: "password",
            EMAIL: "email",
            HIDDEN: "hidden",
            HTML: "html",
            JS: "js",
            CSS: "css",
            CUSTOM: "custom",
            SINGLEFILEPICKER: "singlefilepicker",
            UPLOADFILEPICKER: "uploadfilepicker"
        }, d.SELECT_OPTIONS = [
            [d.TYPES.DROPDOWN, "Drop Down Menu"],
            [d.TYPES.SMSWITCH, "Switch"],
            [d.TYPES.CHECKBOX, "Checkbox"],
            [d.TYPES.CHECKBOXES, "Checkboxes"],
            [d.TYPES.RADIOS, "Radio Buttons"],
            [d.TYPES.TEXT, "Text Box"],
            [d.TYPES.TEXTAREA, "Multi-Line Text Box"],
            [d.TYPES.IMAGE, "Image"],
            [d.TYPES.ALBUM, "Album"],
            [d.TYPES.NODE, "Node"],
            [d.TYPES.VIDEO, "Video"],
            [d.TYPES.PASSWORD, "Password Box"],
            [d.TYPES.EMAIL, "Email"],
            [d.TYPES.HIDDEN, "Hidden"],
            [d.TYPES.HTML, "HTML"],
            [d.TYPES.JS, "JavaScript"],
            [d.TYPES.CSS, "CSS"],
            [d.TYPES.CUSTOM, "Custom"],
            [d.TYPES.SINGLEFILEPICKER, "SingleFilePicker"],
            [d.TYPES.UPLOADFILEPICKER, "UploadFilePicker"]
        ], c.prototype = {
            render: function(t) {
                var i = this.fieldCfg;
                this.field = e.Node.create("<h5>" + i.label + "</h5>"), t.addClass("sm-form-field-header"), t.append(this.field)
            },
            destroy: function() {
                this.field.destroy()
            }
        }, e.namespace("SM.FormFields").HeaderFormField = c, h.prototype = {
            render: function(t) {
                this.field = e.Node.create(e.SM.Templates.textbox(this.fieldCfg)), t.append(this.field)
            },
            destroy: function() {
                this.field.destroy()
            },
            setValue: function(e) {
                this.field.set("value", e)
            }
        }, e.namespace("SM.FormFields").HiddenFormField = h, m.prototype = {
            render: function(t) {
                var i, s, n = this.fieldCfg;
                this.container = t, this.field = i = e.Node.create(e.SM.Templates.textbox(e.merge(n, {
                    noChrome: !0
                }))), this.editIcon = e.Node.create('<span class="sm-fonticon sm-fonticon-small sm-fonticon-Pencil sm-form-field-editable-indicator"></span>'), this.label = s = e.Node.create(e.SM.Templates.label(n)), t.addClass("sm-form-field-underline"), t.append(s), t.appendChild('<div class="sm-form-field-container">').appendChild('<div class="sm-form-field-inlinetext-container">').append(i).append(this.editIcon)
            },
            bind: function() {
                this.eventHandle = this.field.on("valuechange", function(e) {
                    this.form.get("model").set(this.fieldCfg.name, e.target.get("value"), {
                        src: "ff",
                        originEvent: e
                    })
                }, this), this.editIcon.on("click", function() {
                    this.field.focus()
                }, this)
            },
            setValue: function(e) {
                this.field.set("value", e)
            },
            destroy: function() {
                this.eventHandle.detach()
            }
        }, e.mix(m.prototype, e.SM.Fields.FieldError), e.namespace("SM.FormFields").InlinetextFormField = m, f.prototype = {
            render: function(t) {
                var i, s, n = this.fieldCfg;
                this.container = t, n.units ? (i = e.Node.create(e.SM.Templates.textboxLabel(e.merge(n, {
                    noChrome: !0,
                    suffix: n.units
                }))), this.field = i.one(".sm-form-field-text-input"), this.units = i.one(".sm-form-field-label")) : this.field = i = e.Node.create(e.SM.Templates.textbox(e.merge(n, {
                    noChrome: !0
                }))), this.label = s = e.Node.create(e.SM.Templates.label(n)), t.addClass("sm-form-field-underline"), t.append(s), t.appendChild('<div class="sm-form-field-container">').append(i)
            },
            bind: function() {
                this.eventHandles = [], this.eventHandles.push(this.field.on("valuechange", function(e) {
                    var t = e.target.get("value"),
                        i = this._sanitizeInput(e.target.get("value"));
                    t !== i && this.field.set("value", i), this.form.get("model").set(this.fieldCfg.name, i, {
                        src: "ff",
                        originEvent: e
                    })
                }, this), this.field.on("keydown", function(e) {
                    var t = e.charCode,
                        i = this.field.get("value"),
                        s = this.fieldCfg.step || 1;
                    if (38 === t) i = parseFloat(i) + s;
                    else {
                        if (40 !== t) return;
                        i = parseFloat(i) - s
                    }
                    e.preventDefault(), this.field.set("value", i)
                }, this), this.field.on("click", function() {
                    this.field.select()
                }, this))
            },
            _sanitizeInput: function(e) {
                var t = e.replace(/[^\d.-]/g, ""),
                    i = this.fieldCfg,
                    s = i.min,
                    n = i.max,
                    o = i.round;
                return o && (t = Math.round(t)), "undefined" != typeof s && s > t && (t = s), "undefined" != typeof n && t > n && (t = n), t
            },
            setUnits: function(e) {
                this.units && ("" === e ? this.units.hide() : this.units.show(), this.units.set("text", e))
            },
            setValue: function(e) {
                this.field.set("value", e)
            },
            destroy: function() {
                e.Array.each(this.eventHandles, function(e) {
                    e.detach()
                })
            }
        }, e.mix(f.prototype, e.SM.Fields.FieldError), e.namespace("SM.FormFields").NumberFormField = f, u.prototype = {
            _pluralText: "Items",
            _singularText: "Item",
            classNames: {
                hasSelection: "sm-picker-plugin-has-selection",
                hasThumb: "sm-picker-plugin-has-thumb",
                launchPicker: "sm-picker-plugin-launch",
                selectionText: "sm-picker-plugin-selection-text",
                thumbContainer: "sm-picker-plugin-thumb"
            },
            render: function(t) {
                var i, s, n, o = this,
                    a = o.fieldCfg;
                this.container = t, t.addClass("sm-form-field-underline sm-form-field-picker"), this.field = i = e.Node.create('<input type="hidden" name="' + e.Escape.html(a.name) + '" value="' + e.Escape.html(a.value || "") + '"/>'), this.label = s = e.Node.create(e.SM.Templates.label(a)), t.append(s), t.appendChild('<div class="sm-form-field-container">').append(i).append(this._getActionContainer()), n = e.merge(o.pickerPluginConfig), n.pickerConfig = e.merge(o.pickerPluginConfig.pickerConfig, a.pickerConfig), a.pickerStartNode && (n.pickerStartNode = a.pickerStartNode), i.plug(e.SM.Plugin.Picker, n)
            },
            bind: function() {
                this.eventHandles = [this.field.pickerplugin.on("valueChanged", function(e) {
                    this.form.get("model").set(this.fieldCfg.name, this.field.get("value"), {
                        src: "ff",
                        originEvent: e
                    })
                }, this), this.field.pickerplugin.after("hidingPicker", function(e) {
                    "sm-picker:pickerCancel" !== e.pickType && (this._actionContainer.addClass(this.classNames.hasSelection), this._afterSelection(e))
                }, this), this.container.one(".sm-picker-plugin-clear").on("click", function(e) {
                    e.preventDefault(), this.form.get("model").set(this.fieldCfg.name, "", {
                        src: "ff",
                        originEvent: "clear"
                    }), this.form.clearError(this.fieldCfg.name), this.setValue("")
                }, this), this.container.delegate("click", function(e) {
                    e.preventDefault(), this.field.pickerplugin.showPicker()
                }, "." + this.classNames.launchPicker, this)]
            },
            getModel: function() {
                return this._model
            },
            setValue: function(t) {
                var i = this;
                this.field.pickerplugin.changePreselected(t, {
                    silent: !0
                }), t ? (this._actionContainer.addClass(this.classNames.hasSelection), e.when(this._getSelectionText(t)).then(function(e) {
                    i._setSelectionText(e)
                })) : this._clearSelection()
            },
            destroy: function() {
                new e.EventHandle(this.eventHandles).detach(), this.field.unplug(e.SM.Plugin.Picker), this._model && this._model.destroy(), this._view && this._view.destroy(!0)
            },
            _getActionContainer: function() {
                var t, i = this.fieldCfg,
                    s = this,
                    n = this._limit = i.pickerConfig ? i.pickerConfig.limit || 1 : 1;
                return this._makeSelectionText = i.makeSelectionText || "Choose " + (n > 1 ? this._pluralText : this._singularText), t = e.Node.create('<div class="sm-picker-plugin-container"><div class="' + this.classNames.launchPicker + " " + this.classNames.thumbContainer + '"></div><div class="' + this.classNames.launchPicker + ' sm-picker-plugin-image-button"></div><div class="sm-form-field-action"><a href="#" title="Change selection"><span class="' + this.classNames.launchPicker + " " + this.classNames.selectionText + '">' + this._makeSelectionText + '</span><span class="' + this.classNames.launchPicker + ' sm-fonticon sm-fonticon-small sm-fonticon-AngleBracketRight"></span><span class="sm-picker-plugin-clear sm-fonticon sm-fonticon-small sm-fonticon-XCross" title="Clear Selection"></span></a></div></div>'), i.value && (t.addClass(this.classNames.hasSelection), e.when(this._getSelectionText(i.value)).then(function(e) {
                    s._setSelectionText(e)
                })), this._actionContainer = t, this._actionContainer
            },
            _afterSelection: function(e) {
                var t, i = e.selectedData;
                i && i.length > 0 && (1 === i.length ? t = i[0].typeInfo.Name : i.length > 1 && (t = i.length + " " + this._pluralText), this._setSelectionText(t))
            },
            _clearSelection: function() {
                var t = this._actionContainer;
                t.removeClass(this.classNames.hasSelection).removeClass(this.classNames.hasThumb), t.one("." + this.classNames.selectionText).setHTML(e.Escape.html(this._makeSelectionText))
            },
            _getSelectionText: function(t) {
                var i = t.split(/,\s*/g),
                    s = this;
                return i.length > 1 ? i.length + " " + this._pluralText : new e.Promise(function(t) {
                    var n, o, a, r = s._model,
                        l = {};
                    n = i[0].split(/\-/), o = n[0], a = n[1], l[s._modelId] = o, s._modelKey && (l[s._modelKey] = a), r.load({
                        data: l
                    }, function(i, n) {
                        if (!i) switch (s.fieldCfg.type) {
                            case "album":
                                t(n.Album.Title);
                                break;
                            case "folder":
                            case "node":
                            case "page":
                                var o = n.Node.Name;
                                n.Node.Type === e.SM.Models.UserNode.TYPES.ROOT && (o = "Homepage"), t(o);
                                break;
                            case "image":
                            case "video":
                                t(n)
                        }
                    })
                })
            },
            _setSelectionText: function(t) {
                this._actionContainer.one("." + this.classNames.selectionText).setHTML(e.Escape.html(t))
            }
        }, e.mix(u.prototype, e.SM.Fields.FieldError), e.extend(p, u, {
            _modelId: "ImageID",
            _modelKey: "ImageKey",
            _pluralText: "Photos",
            _singularText: "Photo",
            pickerPluginConfig: {},
            _afterSelection: function(e) {
                var t = e.selectedData;
                return t.length > 1 ? (this._actionContainer.removeClass(this.classNames.hasThumb), p.superclass._afterSelection.call(this, e)) : (this._model.setAttrs(t[0].typeInfo), void this._displayThumbnail())
            },
            _displayThumbnail: function() {
                var e = this._actionContainer;
                e.addClass(this.classNames.hasThumb), this._getSelectedImageTileView(e.one("." + this.classNames.thumbContainer)).render({
                    clear: !0
                })
            },
            _getActionContainer: function() {
                var t, i = p.superclass._getActionContainer.call(this);
                return 1 === this._limit && (t = e.SM.Templates.button({
                    icon: "Image",
                    size: "small",
                    title: "Choose an image"
                }), i.addClass("sm-picker-plugin-mode-image").one(".sm-picker-plugin-image-button").setHTML(t)), i
            },
            _getSelectedImageTileView: function(t) {
                return this._view || (this._view = new e.SM.Views.Tile({
                    center: !1,
                    clickable: !1,
                    containerWidth: 32,
                    imageCrop: "1x1",
                    imageSize: "fit",
                    maxHeight: 32,
                    maxWidth: 32,
                    resource: this._model
                })), this._view.set("parentNode", t), this._view
            },
            _setSelectionText: function(e) {
                var t = this._actionContainer;
                if (this.field.get("value")) {
                    if ("string" == typeof e) return t.removeClass(this.classNames.hasThumb), p.superclass._setSelectionText.call(this, e);
                    t.addClass(this.classNames.hasThumb), this._model.setAttrs(e), this._displayThumbnail()
                }
            }
        }), e.namespace("SM.FormFields").ImageFormField = p, e.extend(g, u, {
            _modelId: "AlbumID",
            _modelKey: "AlbumKey",
            _pluralText: "Galleries",
            _singularText: "Gallery",
            pickerPluginConfig: {
                pickerMode: e.SM.Picker.MODE_ALBUM
            }
        }), e.namespace("SM.FormFields").AlbumFormField = g, e.extend(v, u, {
            _modelId: "NodeID",
            _pluralText: "Folders",
            _singularText: "Folder",
            pickerPluginConfig: {
                pickerMode: e.SM.Picker.MODE_FOLDER
            }
        }), e.namespace("SM.FormFields").FolderFormField = v, e.extend(C, u, {
            _modelId: "NodeID",
            pickerPluginConfig: {
                pickerMode: e.SM.Picker.MODE_NODE
            }
        }), e.namespace("SM.FormFields").NodeFormField = C, e.extend(b, u, {
            _modelId: "NodeID",
            _pluralText: "Pages",
            _singularText: "Page",
            pickerPluginConfig: {
                pickerMode: e.SM.Picker.MODE_PAGE
            }
        }), e.namespace("SM.FormFields").PageFormField = b, e.extend(S, p, {
            _pluralText: "Videos",
            _singularText: "Video",
            pickerPluginConfig: {
                pickerConfig: {
                    disablePhoto: 1,
                    title: "Single Video Picker",
                    message: "Please select a single video from one of your galleries.",
                    limit: 1
                },
                pickerMode: "video"
            },
            _getActionContainer: function() {
                var t, i = S.superclass._getActionContainer.call(this);
                return 1 === this._limit && (t = e.SM.Templates.button({
                    icon: "VideoCamera",
                    size: "small",
                    title: "Choose a video"
                }), i.addClass("sm-picker-plugin-mode-image").one(".sm-picker-plugin-image-button").setHTML(t)), i
            }
        }), e.namespace("SM.FormFields").VideoFormField = S, _.prototype = {
            render: function(t) {
                var i, s, n, o = this.fieldCfg;
                this.container = t, o.options && "undefined" == typeof o.value && (e.Lang.isArray(o.options[0]) ? o.value = o.options[0][0] : o.value = o.options[0].value, this.form.get("model").set(o.name, o.value, {
                    silent: !0
                })), o.noChrome === !1 ? t.addClass("sm-form-field-overhead") : t.addClass("sm-form-field-underline"), this.field = i = e.Node.create(e.SM.Templates.select(e.merge({
                    noChrome: !0
                }, o))), this.description = n = e.Node.create(e.SM.Templates.fieldDescription(o)), this.label = s = e.Node.create(e.SM.Templates.label(o)), t.append(s), t.appendChild('<div class="sm-form-field-container">').append(i), t.append(n)
            },
            bind: function() {
                this.eventHandle = this.field.one(".sm-form-field-select").on("change", function(e) {
                    this.form.get("model").set(this.fieldCfg.name, e.target.get("value"), {
                        src: "ff",
                        originEvent: e
                    })
                }, this)
            },
            setValue: function(t) {
                e.Lang.isValue(t) || (t = ""), this.field.one(".sm-form-field-select").set("value", t.toString())
            },
            setDescription: function(e) {
                this.description.setHTML(e)
            },
            setTooltip: function(e) {
                this.label.one("span").setAttribute("data-tooltip", e)
            },
            getDescription: function() {
                return this.description
            },
            enable: function() {
                this.field.one(".sm-form-field-select").removeAttribute("disabled")
            },
            disable: function() {
                this.field.one(".sm-form-field-select").setAttribute("disabled", "disabled")
            },
            isDisabled: function() {
                return "disabled" === this.field.one(".sm-form-field-select").getAttribute("disabled")
            },
            addOption: function(t, i) {
                this.field.one('.sm-form-field-select-option[data-value="' + t + '"]') || this.field.one(".sm-form-field-select").append(e.SM.Templates.option({
                    value: t,
                    label: i
                }))
            },
            prependOption: function(t, i) {
                this.field.one('.sm-form-field-select-option[data-value="' + t + '"]') || this.field.one(".sm-form-field-select").prepend(e.SM.Templates.option({
                    value: t,
                    label: i
                }))
            },
            removeOption: function(e) {
                this.field.all('.sm-form-field-select-option[data-value="' + e + '"]').remove()
            },
            enableOption: function(e) {
                this.field.all('.sm-form-field-select-option[data-value="' + e + '"]').removeAttribute("disabled")
            },
            disableOption: function(e) {
                this.field.all('.sm-form-field-select-option[data-value="' + e + '"]').setAttribute("disabled", "disabled")
            },
            enableAllOptions: function() {
                this.field.all(".sm-form-field-select-option").removeAttribute("disabled")
            },
            disableAllOptions: function() {
                this.field.all(".sm-form-field-select-option").setAttribute("disabled", "disabled")
            },
            replaceOptions: function(t) {
                var i = this.field.one(".sm-form-field-select").get("value");
                this.field.one(".sm-form-field-select").setHTML(e.Array.reduce(t, "", function(t, i) {
                    return t + e.SM.Templates.option(e.merge(i, {
                        noChrome: this.fieldCfg.noChrome !== !1
                    }))
                }, this));
                for (var s = !1, n = 0; n < t.length; n++) t[n].value === i && (s = !0);
                !s && t.length > 0 && (i = t[0].value), this.setValue(i)
            },
            destroy: function() {
                this.eventHandle.detach()
            }
        }, e.mix(_.prototype, e.SM.Fields.FieldError), e.namespace("SM.FormFields").SelectFormField = _, T.prototype = {
            render: function(t) {
                var i = this.fieldCfg;
                this.field = e.Node.create("<span>" + i.label + "</span>"), t.addClass("sm-form-field-span"), t.append(this.field)
            },
            destroy: function() {
                this.field.destroy()
            }
        }, e.namespace("SM.FormFields").SpanFormField = T, M.prototype = {
            render: function(t) {
                var i = this.form,
                    s = this.fieldCfg,
                    n = this.contentDivs = e.Node.create('<div class="sm-tabs-content"></div>');
                e.Array.each(s.tabs, function(t) {
                    var s = e.guid(),
                        o = n.appendChild("<div></div>").setAttribute("id", s);
                    e.Array.each(t.subFields, function(e) {
                        var t = i._fieldContainers[e];
                        t.appendTo(o)
                    }), t.anchor = s
                });
                var o = this.field = e.Node.create(e.SM.Templates.tabs(s));
                t.append(o).append(n).removeClass("sm-form-field-wrapper");
                var a = s.orientation;
                a && "vertical" === a && t.addClass("sm-form-tabs-clearfix"), this.setValue(o.one(".yui3-tab-selected").getData("value"))
            },
            bind: function() {
                var e = this.form.get("model");
                this.eventHandle = this.field.delegate("click", function(t) {
                    var i = t.currentTarget.getData("value");
                    t.currentTarget.hasClass("yui3-tab-selected") || (e.set(this.fieldCfg.name, i, {
                        src: "ff",
                        originEvent: t
                    }), this.setValue(i)), t.halt()
                }, ".sm-tab", this)
            },
            setValue: function(e) {
                var t = this.field.one('> [data-value="' + e + '"]'),
                    i = t.one("a").getAttribute("href"),
                    s = this.contentDivs;
                t.addClass("yui3-tab-selected").siblings().removeClass("yui3-tab-selected"), s.all("> div").hide(), s.one(i).show()
            },
            setErrorTabs: function(e) {
                this.setTabNotices(e, "error")
            },
            setWarningTabs: function(e) {
                this.setTabNotices(e, "warning")
            },
            setTabNotices: function(t, i) {
                e.Array.each(this.fieldCfg.tabs, function(e) {
                    var s, n = e.label,
                        o = this.field.one(' > [data-value="' + n + '"]');
                    s = e.subFields.filter(function(e) {
                        return -1 !== t.indexOf(e)
                    }), s.length && !o.hasClass("yui3-tab-selected") && this.setTabNotice(n, i)
                }, this)
            },
            clearErrorTabs: function() {
                this.clearTabNotices("error")
            },
            clearWarningTabs: function() {
                this.clearTabNotices("warning")
            },
            clearTabNotices: function(e) {
                this.field.all("> [data-value].sm-tab-" + e).removeClass("sm-tab-" + e)
            },
            setErrorTab: function(e) {
                this.setTabNotice(e, "error")
            },
            setWarningTab: function(e) {
                this.setTabNotice(e, "error")
            },
            setTabNotice: function(e, t) {
                this.field.one('> [data-value="' + e + '"]').addClass("sm-tab-" + t)
            },
            clearErrorTab: function(e) {
                this.clearTabNotice(e, "error")
            },
            clearWarningTab: function(e) {
                this.clearTabNotice(e, "warning")
            },
            clearTabNotice: function(e, t) {
                this.field.one('> [data-value="' + e + '"]').removeClass("sm-tab-" + t)
            },
            getErrorTab: function(t) {
                var i = "";
                return e.Array.some(this.fieldCfg.tabs, function(e) {
                    var s, n = e.label;
                    return s = e.contents.filter(function(e) {
                        return e.name === t
                    }), s.length ? (i = n, !0) : void 0
                }, this), i
            },
            destroy: function() {
                this.eventHandle.detach()
            }
        }, e.namespace("SM.FormFields").TabsFormField = M, k.prototype = {
            render: function(e) {
                e.addClass("sm-form-field-overhead").setStyle("marginTop", 0), this._editor.render(), this._editor._inputNode.setStyle("height", this.fieldCfg.editorHeight), this._editor.get("container").appendTo(e), this._editor.focus()
            },
            bind: function() {
                var e = this._editor;
                this._eventHandles = [e.on("selectionChange", function(t) {
                    this.form.get("model").set(this.fieldCfg.name, e.get("html"), {
                        src: "ff",
                        originEvent: t
                    })
                }, this)]
            },
            setValue: function(e) {
                this._editor.set("html", e)
            },
            setError: function(t) {
                this.errorNode || (this.errorNode = e.Node.create('<div class="sm-form-field-error-msg"></div>'), this.container.appendChild(this.errorNode)), this.errorNode.set("text", t)
            },
            clearError: function() {
                this.errorNode && (this.errorNode.remove(!0), this.errorNode = null)
            },
            destroy: function() {
                new e.EventHandle(this._eventHandles).detach(), this._editor.destroy()
            }
        }, e.namespace("SM.FormFields").TextEditorFormField = k, e.extend(F, e.SM.Fields.Textbox, {
            bind: function() {
                this.field.on(["valuechange", "blur"], function(e) {
                    this.form.get("model").set(this.fieldCfg.name, e.target.get("value"), {
                        src: "ff",
                        originEvent: e
                    })
                }, this)
            }
        }), e.namespace("SM.FormFields").TextFormField = F, N.prototype = {
            render: function(t) {
                var i, s, n, o = this.fieldCfg;
                this.container = t, this.field = i = e.Node.create(e.SM.Templates.textarea(o)), this.description = n = e.Node.create(e.SM.Templates.fieldDescription(o)), this.label = s = e.Node.create(e.SM.Templates.label(o)), t.addClass("sm-form-field-overhead"), t.append(s), t.appendChild('<div class="sm-form-field-container">').append(i), t.append(n)
            },
            setDescription: function(e) {
                this.description.setHTML(e)
            },
            bind: function() {
                this.field.on("valuechange", function(e) {
                    this.form.get("model").set(this.fieldCfg.name, e.target.get("value"), {
                        src: "ff",
                        originEvent: e
                    })
                }, this)
            },
            enable: function() {
                this.field.removeAttribute("disabled")
            },
            disable: function() {
                this.field.setAttribute("disabled", "disabled")
            },
            setValue: function(e) {
                this.field.set("value", e)
            },
            setError: function(t) {
                this.errorNode || (this.errorNode = e.Node.create('<div class="sm-form-field-error-msg"></div>'), this.container.appendChild(this.errorNode), this.field.addClass("sm-form-field-error")), this.errorNode.set("text", t)
            },
            clearError: function() {
                this.errorNode && (this.errorNode.remove(!0), this.errorNode = null, this.field.removeClass("sm-form-field-error"))
            },
            destroy: function() {
                this.field.destroy()
            }
        }, e.namespace("SM.FormFields").TextareaFormField = N, I.prototype = {
            render: function(t) {
                var i, s, n, o = this.fieldCfg;
                this.container = t, t.addClass("sm-form-field-toggle"), t.addClass("sm-form-field-underline"), this.label = i = e.Node.create(e.SM.Templates.label(o)), this.description = s = e.Node.create(e.SM.Templates.fieldDescription(o)), t.append(i), this.buttonGroup = n = new e.ButtonGroup({
                    srcNode: e.Node.create(e.SM.Templates.toggle(o))
                }), n.render(t.appendChild('<div class="sm-form-field-container">')), t.append(s), o.description && this.showDescription()
            },
            setValue: function(e) {
                var t = e === !0 || "on" === e,
                    i = this.buttonGroup.getButtons();
                i.removeClass("yui3-button-selected"), t ? i.filter(".sm-form-field-toggle-item-on").addClass("yui3-button-selected") : i.filter(".sm-form-field-toggle-item-off").addClass("yui3-button-selected")
            },
            setDescription: function(e) {
                this.description.setHTML(e)
            },
            showDescription: function() {
                this.container.setAttribute("data-show-description", !0)
            },
            hideDescription: function() {
                this.container.setAttribute("data-show-description", !1)
            },
            bind: function() {
                this.eventHandle = this.buttonGroup.on("selectionChange", function(e) {
                    var t = e.target.getSelectedButtons()[0].get("value"),
                        i = "on" === t;
                    this.form.get("model").set(this.fieldCfg.name, i, {
                        src: "ff",
                        originEvent: e
                    })
                }, this)
            },
            disable: function() {
                var e = this.buttonGroup.getButtons();
                e.setAttribute("disabled", "disabled")
            },
            enable: function() {
                var e = this.buttonGroup.getButtons();
                e.removeAttribute("disabled")
            },
            destroy: function() {
                this.eventHandle.detach()
            }
        }, e.mix(I.prototype, e.SM.Fields.FieldError), e.namespace("SM.FormFields").ToggleFormField = I;
        var A = SM["import"]("lodash"),
            H = SM["import"]("sm-dom"),
            O = SM["import"]("sm-uploader-queue"),
            L = SM["import"]("rsvp"),
            w = SM["import"]("react"),
            x = SM["import"]("react-dom"),
            U = w.createFactory(SM["import"]("sm-form-field-single-file-ui"));
        y.prototype = {
            destroy: function() {
                this._useFlash || x.unmountComponentAtNode(this.container.getDOMNode()), this._boundHandler && window.removeEventListener("message", this._boundHandler)
            },
            render: function(e) {
                this._container = e, e.addClass("sm-form-field-file-picker"), this._useFlash ? this._renderFlash(e) : this._renderPicker(), this.container = e
            },
            setError: function(e) {
                this.picker.setState({
                    errorMessage: e
                })
            },
            setValue: function(t) {
                try {
                    t = JSON.parse(t)
                } catch (i) {
                    return
                }
                if (this.albumId = t.albumId, this._useFlash || this._renderPicker(t.albumId), t.imageId && t.imageKey) {
                    var s = new e.SM.Models.Image;
                    s.load({
                        data: {
                            ImageID: t.imageId,
                            ImageKey: t.imageKey
                        }
                    }), s.on("load", function() {
                        var e = s.fakeImageSizeDetails().ImageSizeThumb.Url;
                        this._useFlash ? this._setFrameSource({
                            image: e
                        }) : this.picker.setState({
                            imageData: e
                        })
                    }.bind(this))
                } else this._useFlash ? this._setFrameSource() : this.picker.clear()
            },
            upload: function() {
                return this.pendingUpload ? this._useFlash ? this._uploadFlash() : this._uploadHTML() : A.isEmpty(this._uploadedImageData) ? null : this._uploadedImageData
            },
            _encodeQueryData: function(e) {
                var t = [];
                return A.forOwn(e, function(e, i) {
                    t.push(encodeURIComponent(i) + "=" + encodeURIComponent(e))
                }), t.join("&")
            },
            _getOrigin: function() {
                var e = H.win.location;
                return e.origin || e.protocol + "//" + e.hostname + (e.port ? ":" + e.port : "")
            },
            _renderFlash: function(e) {
                this._boundHandler = this._onUploadMessage.bind(this), window.addEventListener("message", this._boundHandler), this._flashFrame = e.appendChild('<iframe height="48" scrolling="no" width="100%"/>'), this._setFrameSource()
            },
            _renderPicker: function(e) {
                var t = this.fieldCfg;
                this.picker = x.render(U({
                    albumId: e || this.albumId,
                    clearImage: this._onClearImage.bind(this),
                    flashFrame: !1,
                    initialImageData: t.fileData,
                    label: t.label,
                    name: t.name,
                    selectImage: this._onImageChange.bind(this)
                }), this._container.getDOMNode())
            },
            _setFrameSource: function(t) {
                if (this.albumId) {
                    t || (t = {});
                    var i = this.fieldCfg,
                        s = e.merge({
                            albumId: this.albumId,
                            label: i.label,
                            name: i.name
                        }, t);
                    this._flashFrame.setAttribute("src", "/frame/miniuploader?" + this._encodeQueryData(s))
                }
            },
            _onClearImage: function(e) {
                this.form.get("model").set(this.fieldCfg.name, null, {
                    src: "ff",
                    originEvent: e
                }), this.pendingUpload = !1, this._uploadedImageData = {}
            },
            _onImageChange: function(e, t) {
                this.form.get("model").set(this.fieldCfg.name, e, {
                    src: "ff",
                    originEvent: t
                }), this.pendingUpload = !0
            },
            _onUploadMessage: function(e) {
                if (this._useFlash && e.origin === this._getOrigin()) {
                    var t;
                    try {
                        t = JSON.parse(e.data)
                    } catch (i) {
                        return
                    }
                    if (t.src === this.fieldCfg.name) {
                        var s = t.data;
                        switch (t.type) {
                            case "clearImage":
                                this._flashFrame.setAttribute("height", "48"), this._onClearImage(e);
                                break;
                            case "file_error":
                                this._flashFrame.setAttribute("height", "54");
                                break;
                            case "selectImage":
                                this._flashFrame.setAttribute("height", "48"), this._onImageChange(s, e);
                                break;
                            case "upload_complete_data":
                                var n = s.Image,
                                    o = {
                                        imageId: n.id,
                                        imageKey: n.Key,
                                        name: this.fieldCfg.name
                                    };
                                this.pendingUpload = !1, this._uploadedImageData = o, this._deferred.resolve(o);
                                break;
                            case "upload_error":
                                this._uploadedImageData = {}, this._deferred.reject();
                                break;
                            default:
                                return
                        }
                    }
                }
            },
            _uploadFlash: function() {
                var e = this._deferred = L.defer(),
                    t = this._flashFrame.getDOMNode();
                return t.contentWindow.postMessage("startUpload", this._getOrigin()), e.promise
            },
            _uploadHTML: function() {
                var e = this.albumId,
                    t = this.form.get("model"),
                    i = this.fieldCfg.name,
                    s = this;
                return new L.Promise(function(n, o) {
                    var a = new O({
                        albumId: e,
                        checkDuplicates: !1
                    });
                    a.add(t.get(i)[0]), a.on(O.EVENT_UPLOAD_COMPLETE, function(e) {
                        var t = e.upload.imageData,
                            i = {
                                imageId: t.id,
                                imageKey: t.Key,
                                name: s.fieldCfg.name
                            };
                        s.pendingUpload = !1, s._uploadedImageData = i, n(i)
                    }), a.on(O.EVENT_UPLOAD_ERROR, function(e) {
                        e.upload && (s._uploadedImageData = {}, s.setError(e.upload.message), o(e.upload.message))
                    }), a.run()
                })
            }
        }, e.namespace("SM.FormFields").SinglefilepickerFormField = y;
        var O = SM["import"]("sm-uploader-queue"),
            V = SM["import"]("sm-form-picker-action-panel");
        E.prototype = {
            destroy: function() {
                x.unmountComponentAtNode(this._actionPanelContainer), x.unmountComponentAtNode(this._container.getDOMNode()), new e.EventHandle(this.eventHandles).detach(), this._pickerNode.unplug(e.SM.Plugin.Picker)
            },
            render: function(t) {
                var i = this.fieldCfg,
                    s = (this.form.get("model"), e.one("#sm-picker-container")),
                    n = {
                        pickerMode: e.SM.Picker.MODE_IMAGE,
                        triggerMode: !0
                    };
                n.pickerConfig = i.pickerConfig, this._container = t, t.addClass("sm-form-field-file-picker"), s || (s = e.one(H.doc.body).appendChild('<div id="sm-picker-container"></div>')), this._pickerNode = s.appendChild('<div id="' + e.guid() + '"></div>'), this._pickerNode.pickerplugin || this._pickerNode.plug(e.SM.Plugin.Picker, n), this.pickerUI = x.render(U({
                    clearImage: this._onClearImage.bind(this),
                    flashFrame: !1,
                    initialImageData: i.fileData,
                    label: i.label,
                    name: i.name,
                    selectImage: this._onUploadImageChange.bind(this),
                    handleImageClick: this._onImageClick.bind(this)
                }), this._container.getDOMNode())
            },
            bind: function() {
                this.eventHandles = [this._pickerNode.pickerplugin.after("hidingPicker", function(e) {
                    "sm-picker:pickerCancel" !== e.pickType && this._onPickerImageChange(e)
                }, this)]
            },
            setError: function(e) {
                this.pickerUI.setState({
                    errorMessage: e
                })
            },
            clear: function() {
                this.pickerUI.clear(), this.pendingUpload = !1, this._uploadedImageData = {}
            },
            setValue: function(e) {
                var t = "string" == typeof e ? this._handlePickerData(e) : e;
                this._setThumbnailImage(t)
            },
            _setThumbnailImage: function(t) {
                if (t && t.imageId && t.imageKey) {
                    var i = new e.SM.Models.Image;
                    i.load({
                        data: {
                            ImageID: t.imageId,
                            ImageKey: t.imageKey
                        }
                    }), i.on("load", function() {
                        var e = i.fakeImageSizeDetails().ImageSizeThumb.Url;
                        this.pickerUI.setState({
                            imageData: e
                        })
                    }.bind(this))
                } else this.pickerUI.clear()
            },
            _handlePickerData: function(e) {
                this._pickerNode.pickerplugin.changePreselected(e, {
                    silent: !0
                });
                var t = {};
                if (e) {
                    var i = e.split("-");
                    t.imageId = i[0], t.imageKey = i[1]
                }
                return t
            },
            _onImageClick: function() {
                this._actionPanelContainer = H.querySelector("#sm-picker-action-panel"), this._actionPanelContainer || (this._actionPanelContainer = H.doc.body.appendChild(H.doc.createElement("div")), this._actionPanelContainer.id = "sm-picker-action-panel"), x.render(w.createElement(V, {
                    handleCloseClick: this._closeActionPanel,
                    handleInputChange: this._onUploadClick.bind(this),
                    handleChooseClick: this._onChooseClick.bind(this)
                }), this._actionPanelContainer)
            },
            _onClearImage: function(e) {
                var t = this.form.get("model");
                t.set(this.fieldCfg.uploadFieldName, null, {
                    src: "ff",
                    originEvent: e
                }), t.set(this.fieldCfg.name, "", {
                    src: "ff",
                    originEvent: e
                }), this._pickerNode.pickerplugin.changePreselected(null, {
                    silent: !0
                }), this.pendingUpload = !1, this._uploadedImageData = {}
            },
            _onPickerImageChange: function(e) {
                var t = e.selectedData[0].typeInfo,
                    i = this.form.get("model"),
                    s = t.ImageID + "-" + t.ImageKey;
                i.set(this.fieldCfg.name, s, {
                    src: "ff",
                    originEvent: e
                }), i.set(this.fieldCfg.uploadFieldName, null, {
                    src: "ff",
                    originEvent: e
                }), this._pickerNode.pickerplugin.changePreselected(s, {
                    silent: !0
                });
                var n = {
                    imageId: t.ImageID,
                    imageKey: t.ImageKey
                };
                this.pendingUpload = !1, this._uploadedImageData = {}, this._setThumbnailImage(n)
            },
            _onUploadImageChange: function(e, t) {
                var i = this.form.get("model");
                i.set(this.fieldCfg.uploadFieldName, e, {
                    src: "ff",
                    originEvent: t
                }), i.set(this.fieldCfg.name, "", {
                    src: "ff",
                    originEvent: t
                }), this.pendingUpload = !0
            },
            _onUploadClick: function(e) {
                this.pickerUI._onInputChange(e), this._closeActionPanel()
            },
            _onChooseClick: function() {
                this._pickerNode.pickerplugin.showPicker()
            },
            _closeActionPanel: function() {
                x.unmountComponentAtNode(H.querySelector("#sm-picker-action-panel"))
            },
            upload: function() {
                if (!this.pendingUpload) {
                    var e = A.isEmpty(this._uploadedImageData) ? null : this._uploadedImageData;
                    return L.Promise.resolve(e)
                }
                var t = this.form.get("model"),
                    i = this.albumId || t.get("AssetsAlbumID"),
                    s = this.fieldCfg.uploadFieldName,
                    n = this;
                return new L.Promise(function(e, o) {
                    var a = new O({
                        albumId: i,
                        checkDuplicates: !1
                    });
                    a.add(t.get(s)[0]), a.on("uploadcomplete", function(t) {
                        var i = t.upload.imageData,
                            o = {
                                imageId: i.id,
                                imageKey: i.Key,
                                name: s
                            };
                        n.pendingUpload = !1, n._uploadedImageData = o, e(o)
                    }), a.on("uploaderror", function(e) {
                        n._uploadedImageData = {}, n.setError(e.upload.message), o(e.upload.message)
                    }), a.run()
                })
            }
        }, e.namespace("SM.FormFields").UploadpickerFormField = E
    }(), SM.currentModule = null
}, "", {
    requires: ["sm", "button-group", "event-custom-base", "event-valuechange", "gallery-sm-editor", "json-parse", "json-stringify", "oop", "react", "tabview", "lodash", "promise", "rsvp", "sm-codemirror-plugin", "template-micro", "sm-dom", "sm-editor-toolbar", "sm-picker-plugin", "sm-slider", "sm-templates-button", "sm-templates-form", "sm-dropdown-view", "sm-colorpicker", "sm-panel", "sm-fields", "sm-album-model", "sm-image-model", "sm-models-usernode", "sm-page", "sm-uploader-queue", "sm-component-image", "sm-component-button", "sm-component-icon", "sm-component-underlineformfield", "sm-fonts-dropdown", "sm-form-field-single-file-ui", "sm-form-field-font-dropdown-field", "sm-form-picker-action-panel"]
});
YUI.add("sm-form-picker-action-panel", function(e) {
    SM.currentModule = "sm-form-picker-action-panel";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        var e = SM["import"]("react"),
            n = SM["import"]("react-dom"),
            o = SM["import"]("sm-action-panel"),
            t = SM["import"]("sm-component-button"),
            i = e.createClass({
                displayName: "PickerActionPanel",
                render: function() {
                    return e.createElement("div", null, e.createElement("input", {
                        ref: "filePicker",
                        type: "file",
                        accept: "image/*",
                        onChange: this._onInputChange
                    }), e.createElement(o, {
                        onClose: this._closePanel,
                        title: "Select Photo",
                        className: "sm-picker-action-panel"
                    }, e.createElement(t, {
                        onClick: this._onUploadClick
                    }, "Upload New Photo"), e.createElement(t, {
                        onClick: this._onChooseClick
                    }, "Choose from Smugmug")))
                },
                _closePanel: function() {
                    this.props.handleCloseClick()
                },
                _onUploadClick: function() {
                    this.refs.filePicker && n.findDOMNode(this.refs.filePicker).click()
                },
                _onChooseClick: function() {
                    this.props.handleChooseClick(), this._closePanel()
                },
                _onInputChange: function(e) {
                    this.props.handleInputChange(e)
                }
            });
        module.exports = i
    }(), SM.currentModule = null
}, "", {
    requires: ["react", "react-dom", "sm-dom", "sm-component-button", "sm-action-panel"]
});
YUI.add("sm-form", function(e) {
    SM.currentModule = "sm-form";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        var t = e.Object.isEmpty,
            i = e.Base.create("sm-form", e.View, [], {
                initializer: function(t) {
                    var i = this,
                        r = [],
                        n = {},
                        s = e.merge(t.values),
                        a = this.get("model"),
                        o = this.get("container");
                    this._fields = {}, this._fieldOrder = [], this._fieldContainers = {}, this._fieldTabs = {}, this._tabNotices = {}, e.Object.each(t.values && t.values.Config, function(e, t) {
                        s["Config." + t] = e
                    }), e.Array.each(t.fields, function(t) {
                        t = e.clone(t), "undefined" == typeof t.name && (t.name = e.guid()), null != s[t.name] && (t.value = s[t.name]), r.push(t), "tabs" === t.type && e.Array.each(t.tabs, function(t) {
                            t.subFields = [], e.Array.each(t.fields || t.contents, function(n) {
                                "undefined" == typeof n.name && (n.name = e.guid()), null != s[n.name] && (n.value = s[n.name]), t.subFields.push(n.name), r.push(n), t.label && (i._fieldTabs[n.name] = t.label, i._tabNotices[t.label] = {})
                            })
                        })
                    }), e.Array.each(r, function(t) {
                        this._fieldOrder.push(t.name);
                        var i = this._getFormFieldClass(t.type);
                        if (!i) throw new Error("no FormField class found for type " + t.type);
                        this._fields[t.name] = new i(this, t), this._fieldContainers[t.name] = e.Node.create("<div>").appendTo(o), (t.hidden || "undefined" != typeof t.visible && !t.visible) && this._fieldContainers[t.name].hide(), e.namespace.call(n, t.name), e.Object.setValue(n, t.name.split("."), t.value)
                    }, this), e.Object.each(n, function(e, t) {
                        a.addAttr(t, {
                            value: e
                        })
                    }), a.after("change", this._afterModelAttrChange, this)
                },
                destructor: function() {
                    e.Object.each(this._fields, function(e) {
                        e.destroy && e.destroy()
                    }), this.get("model").detach("change")
                },
                getField: function(e) {
                    return this._fields[e]
                },
                render: function() {
                    var t = this,
                        i = t.get("container");
                    return e.Array.each(t._fieldOrder, function(e) {
                        var r = t._fieldContainers[e],
                            n = t._fields[e];
                        n.render(r), n.bind && n.bind(), i.addClass("sm-form-contents")
                    }), this
                },
                reset: function(e) {
                    this.get("model").reset(e)
                },
                showItem: function(e) {
                    var t = this._fieldContainers[e];
                    return t.show(), this
                },
                hideItem: function(e) {
                    var t = this._fieldContainers[e];
                    return t.hide(), this
                },
                showItems: function(e) {
                    for (var t = 0; t < e.length; t++) this.showItem(e[t])
                },
                hideItems: function(e) {
                    for (var t = 0; t < e.length; t++) this.hideItem(e[t])
                },
                toggleItems: function(e) {
                    var t;
                    for (t in e) e.hasOwnProperty(t) && (e[t] ? this.showItem(t) : this.hideItem(t))
                },
                setErrors: function(e, t) {
                    this.setNotices(e, "error", t)
                },
                setWarnings: function(e, t) {
                    this.setNotices(e, "warning", t)
                },
                setNotices: function(t, i, r) {
                    var n = this.getField("tabs"),
                        s = this._fields,
                        a = this._tabNotices,
                        o = "error" === i ? "setError" : "warning" === i && "setWarning";
                    r || (this.clearNotices(i), n && n.clearTabNotices(i)), e.Array.each(t, function(e) {
                        var t, r, c = e.Field;
                        s[c] || (c = "Config." + c), s[c] && (s[c].setNotice ? s[c].setNotice(e.Message, i) : s[c][o] && s[c][o](e.Message), n && (t = this._fieldTabs[c], t && (r = a[t][c] || (a[t][c] = {}), n.setTabNotice(t, i), r[i] = !0)))
                    }, this)
                },
                clearWarning: function(e) {
                    this.clearNotice(e, "warning")
                },
                clearError: function(e) {
                    this.clearNotice(e, "error")
                },
                clearNotice: function(e, i) {
                    var r, n, s = this._fieldTabs[e],
                        a = s && this._tabNotices[s],
                        o = a && a[e],
                        c = "error" === i ? "clearError" : "warning" === i && "clearWarning";
                    if (this._fields[e].clearNotice ? this._fields[e].clearNotice(i) : this._fields[e][c] && this._fields[e][c](), o) {
                        delete o[i], t(o) && delete a[e];
                        for (r in a)
                            if (a.hasOwnProperty(r) && a[r][i]) {
                                n = !0;
                                break
                            }
                        n || this.getField("tabs").clearTabNotice(s, i)
                    }
                },
                clearErrors: function(e) {
                    this.clearNotices("error", e)
                },
                clearAllErrors: function() {
                    this.clearErrors()
                },
                clearWarnings: function(e) {
                    this.clearNotices("warning", e)
                },
                clearNotices: function(t, i) {
                    e.Array.each(i || e.Object.keys(this._fields), function(e) {
                        this.clearNotice(e, t)
                    }, this)
                },
                _afterModelAttrChange: function(t) {
                    function i(t) {
                        var r, n = [],
                            s = e.Array(arguments[1] || []);
                        if ("object" !== e.Lang.type(t)) return t;
                        for (var a in t) t.hasOwnProperty(a) && (s.push(a), r = t[a], "object" === e.Lang.type(r) ? n = n.concat(i(r, s)) : n.push([s.join("."), r]), s.pop());
                        return n
                    }
                    if ("ff" !== t.src) {
                        var r = this;
                        e.Object.each(t.changed, function(t, n) {
                            var s = {};
                            s[n] = t.newVal, e.Array.each(i(s), function(e) {
                                var t = e[0],
                                    i = e[1];
                                r._fields[t] && r._fields[t].setValue(i)
                            })
                        })
                    }
                },
                _getFormFieldClass: function(t) {
                    return i.FORM_FIELDS[t] ? i.FORM_FIELDS[t] : e.SM.FormFields[t.charAt(0).toUpperCase() + t.slice(1) + "FormField"]
                }
            }, {
                registerFormField: function(e, t) {
                    i.FORM_FIELDS[e] = t
                },
                FORM_FIELDS: {},
                ATTRS: {
                    model: {
                        readOnly: !0,
                        valueFn: function() {
                            var t = new e.Model;
                            return t.toJSON = function() {
                                var t = e.merge(e.Model.prototype.toJSON.call(this));
                                return delete t.id, t
                            }, t
                        }
                    }
                }
            });
        e.namespace("SM").Form = module.exports = i
    }(), SM.currentModule = null
}, "", {
    requires: ["model", "node", "view", "sm-form-fields"]
});
YUI.add("sm-gallery-cover", function(e) {
    SM.currentModule = "sm-gallery-cover";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        var e = "bottom",
            o = "top";
        ! function() {
            var e = SM["import"]("sm-component-breadcrumbs").Breadcrumb,
                o = SM["import"]("sm-component-breadcrumbs").Breadcrumbs,
                t = SM["import"]("sm-component-button"),
                n = SM["import"]("sm-component-icon"),
                i = SM["import"]("sm-component-menu"),
                s = SM["import"]("sm-component-pure-render"),
                r = SM["import"]("react"),
                a = r.PropTypes,
                l = 3,
                c = function(s) {
                    function a() {
                        return babelHelpers.classCallCheck(this, a), babelHelpers.possibleConstructorReturn(this, (a.__proto__ || Object.getPrototypeOf(a)).apply(this, arguments))
                    }
                    return babelHelpers.inherits(a, s), babelHelpers.createClass(a, [{
                        key: "render",
                        value: function() {
                            for (var s = this, a = this.props, c = a.breadcrumbs, u = a.showCurrent, m = [], p = [], h = 0; h < c.length; h++) {
                                var d = c[h].name,
                                    b = c[h].url;
                                if (0 === h) d = r.createElement(n, {
                                    icon: "Home",
                                    size: "small"
                                });
                                else if (h > 0 && h < c.length - l) {
                                    if (p.push(r.createElement(i.Item, {
                                            key: "breadcrumb" + h
                                        }, r.createElement("a", {
                                            href: b
                                        }, d))), 1 !== p.length) continue;
                                    d = r.createElement(t, {
                                        noChrome: !0,
                                        onClick: function(e) {
                                            return s.refs.menuRef.toggle({
                                                anchor: e.currentTarget
                                            })
                                        }
                                    }, r.createElement(n, {
                                        icon: "FolderExpand",
                                        size: "small"
                                    })), b = void 0
                                } else if (h === c.length - 1) {
                                    if (!u) continue;
                                    b = void 0
                                }
                                m.push(r.createElement(e, {
                                    key: "breadcrumb" + h,
                                    url: b
                                }, d))
                            }
                            return m.length > 0 ? r.createElement("div", {
                                className: "sm-gallery-cover-breadcrumbs"
                            }, r.createElement(o, null, m), p.length > 0 && r.createElement(i, {
                                ref: "menuRef"
                            }, p)) : null
                        }
                    }]), a
                }(s);
            c.propTypes = {
                breadcrumbs: a.arrayOf(a.shape({
                    name: a.string.isRequired,
                    url: a.string.isRequired
                })),
                showCurrent: a.bool
            }, c.defaultProps = {
                breadcrumbs: [],
                showCurrent: !1
            }, exports.CoverBreadcrumbs = c
        }(), ! function() {
            var t = SM["import"]("sm-component-button"),
                n = SM["import"]("sm-icon"),
                i = SM["import"]("react"),
                s = i.PropTypes,
                r = function(e) {
                    var o = e.disableRepositionCancelButton,
                        s = e.disableRepositionSaveButton,
                        r = e.onBuyButtonClick,
                        a = e.onDownloadButtonClick,
                        l = e.onRepositionCancelClick,
                        c = e.onRepositionSaveClick,
                        u = e.onRepositionStartClick,
                        m = e.onSlideshowButtonClick,
                        p = e.position,
                        h = e.showBuyButton,
                        d = e.showDownloadButton,
                        b = e.showRepositionCancelButton,
                        g = e.showRepositionSaveButton,
                        w = e.showRepositionStartButton,
                        f = e.showSlideshowButton;
                    return i.createElement("div", {
                        className: "sm-gallery-cover-buttons",
                        "data-alignment": p
                    }, w && i.createElement(t, {
                        className: "sm-gallery-cover-reposition-start-button",
                        key: "reposition-start-button",
                        onClick: u,
                        title: "Reposition Cover Photo"
                    }, i.createElement(n, {
                        name: "CursorMove"
                    })), b && i.createElement(t, {
                        className: "sm-gallery-cover-reposition-cancel-button",
                        disabled: o,
                        key: "reposition-cancel-button",
                        onClick: l,
                        title: "Cancel Changes"
                    }, i.createElement("span", {
                        className: "sm-button-label"
                    }, "Cancel")), g && i.createElement(t, {
                        className: "sm-gallery-cover-reposition-save-button",
                        disabled: s,
                        key: "reposition-save-button",
                        onClick: c,
                        skin: "submit",
                        title: "Save Changes"
                    }, i.createElement("span", {
                        className: "sm-button-label"
                    }, "Save")), f && i.createElement(t, {
                        className: "sm-gallery-cover-slideshow-button",
                        key: "slideshow-button",
                        onClick: m,
                        title: "Slideshow"
                    }, i.createElement(n, {
                        name: "Play"
                    })), d && i.createElement(t, {
                        className: "sm-gallery-cover-download-button",
                        key: "download-button",
                        onClick: a,
                        title: "Download All"
                    }, i.createElement(n, {
                        name: "Download"
                    })), h && i.createElement(t, {
                        className: "sm-gallery-cover-buy-button",
                        key: "buy-button",
                        onClick: r,
                        skin: "accent",
                        title: "Buy Photos"
                    }, i.createElement(n, {
                        name: "CartAdd"
                    }), i.createElement("span", {
                        className: "sm-button-label"
                    }, "Buy Photos")))
                };
            r.propTypes = {
                disableRepositionCancelButton: s.bool,
                disableRepositionSaveButton: s.bool,
                onBuyButtonClick: s.func,
                onDownloadButtonClick: s.func,
                onRepositionCancelClick: s.func,
                onRepositionSaveClick: s.func,
                onRepositionStartClick: s.func,
                onSlideshowButtonClick: s.func,
                position: s.oneOf([e, o]),
                showBuyButton: s.bool,
                showDownloadButton: s.bool,
                showRepositionCancelButton: s.bool,
                showRepositionSaveButton: s.bool,
                showRepositionStartButton: s.bool,
                showSlideshowButton: s.bool
            }, r.defaultProps = {
                disableRepositionCancelButton: !1,
                disableRepositionSaveButton: !1,
                onBuyButtonClick: function() {},
                onDownloadButtonClick: function() {},
                onRepositionCancelClick: function() {},
                onRepositionSaveClick: function() {},
                onRepositionStartClick: function() {},
                onSlideshowButtonClick: function() {},
                position: e,
                showBuyButton: !1,
                showDownloadButton: !1,
                showRepositionCancelButton: !1,
                showRepositionSaveButton: !1,
                showRepositionStartButton: !1,
                showSlideshowButton: !1
            }, exports.CoverButtons = r
        }(), ! function() {
            var e = SM["import"]("sm-dom"),
                o = SM["import"]("sm-draggable"),
                t = function(t) {
                    function n() {
                        return babelHelpers.classCallCheck(this, n), babelHelpers.possibleConstructorReturn(this, (n.__proto__ || Object.getPrototypeOf(n)).apply(this, arguments))
                    }
                    return babelHelpers.inherits(n, t), babelHelpers.createClass(n, [{
                        key: "_moveElement",
                        value: function(t) {
                            var n = t.clientX,
                                i = t.clientY,
                                s = t.dragTarget,
                                r = t.pointerOffsetX,
                                a = t.pointerOffsetY,
                                l = n - r,
                                c = i - a,
                                u = this.props.draggableConfig.container;
                            if (u instanceof HTMLElement) {
                                var m = e.getAbsoluteBoundingRect(u),
                                    p = e.getAbsoluteBoundingRect(s),
                                    h = e.win.pageXOffset,
                                    d = e.win.pageYOffset,
                                    b = m.left - h,
                                    g = m.top - d,
                                    w = m.right - p.width - h,
                                    f = m.bottom - p.height - d;
                                l = Math.min(l, b), c = Math.min(c, g), l = Math.max(l, w), c = Math.max(c, f)
                            }
                            o.moveElement(s, l, c)
                        }
                    }]), n
                }(SM["import"]("sm-component-draggable"));
            exports.CoverDraggable = t
        }(), ! function() {
            var e = SM["import"]("sm-component-image").BackgroundImage,
                o = SM["import"]("sm-component-pure-render"),
                t = SM["import"]("react"),
                n = t.PropTypes,
                i = function(o) {
                    function n() {
                        return babelHelpers.classCallCheck(this, n), babelHelpers.possibleConstructorReturn(this, (n.__proto__ || Object.getPrototypeOf(n)).apply(this, arguments))
                    }
                    return babelHelpers.inherits(n, o), babelHelpers.createClass(n, [{
                        key: "render",
                        value: function() {
                            var o = this.props,
                                n = o.height,
                                i = o.image,
                                s = o.imageOffset,
                                r = o.onImageRightClick,
                                a = o.width,
                                l = a / n,
                                c = i.DisplayWidth / i.DisplayHeight,
                                u = l > c ? a / i.DisplayWidth : n / i.DisplayHeight,
                                m = {
                                    height: i.DisplayHeight * u,
                                    width: i.DisplayWidth * u
                                };
                            return s && (s.left && (m.left = s.left), s.top && (m.top = s.top)), t.createElement(e, {
                                className: "sm-gallery-cover-image",
                                onContextMenu: r,
                                src: {
                                    height: i.DisplayHeight,
                                    url: i.Url,
                                    width: i.DisplayWidth
                                },
                                style: m
                            })
                        }
                    }]), n
                }(o);
            i.propTypes = {
                height: n.number.isRequired,
                image: n.shape({
                    DisplayHeight: n.number.isRequired,
                    DisplayWidth: n.number.isRequired,
                    Url: n.string.isRequired
                }),
                imageOffset: n.shape({
                    left: n.number.isRequired,
                    top: n.number.isRequired
                }),
                onImageRightClick: n.func,
                width: n.number.isRequired
            }, i.defaultProps = {
                onImageRightClick: function() {}
            }, exports.CoverImage = i
        }(), ! function() {
            var e = exports.CoverImage,
                o = exports.CoverDraggable,
                t = SM["import"]("react"),
                n = function(n) {
                    return t.createElement(o, n, t.createElement(e, n))
                };
            exports.CoverImageDraggable = n
        }();
        var t = SM["import"]("sm-component-pure-render"),
            n = SM["import"]("react"),
            i = n.PropTypes,
            s = function(e) {
                function o(e) {
                    babelHelpers.classCallCheck(this, o);
                    var t = babelHelpers.possibleConstructorReturn(this, (o.__proto__ || Object.getPrototypeOf(o)).call(this, e));
                    return t.state = {
                        readMoreWidth: 0,
                        showReadMore: !1
                    }, t
                }
                return babelHelpers.inherits(o, e), babelHelpers.createClass(o, [{
                    key: "componentDidMount",
                    value: function() {
                        this._updateReadMoreDisplay()
                    }
                }, {
                    key: "componentDidUpdate",
                    value: function(e) {
                        this._shouldUpdateReadMoreDisplay(e) && this._updateReadMoreDisplay()
                    }
                }, {
                    key: "componentWillReceiveProps",
                    value: function(e) {
                        this._shouldUpdateReadMoreDisplay(e) && this._resetReadMoreDisplay()
                    }
                }, {
                    key: "render",
                    value: function() {
                        var e = this.props,
                            o = e.description,
                            t = e.onReadMoreClick,
                            i = e.showReadMoreOnNewLine,
                            s = e.showTitle,
                            r = e.title,
                            a = this.state,
                            l = a.readMoreWidth,
                            c = a.showReadMore,
                            u = i ? "100%" : "calc(100% - " + l + "px)";
                        return n.createElement("div", {
                            className: "sm-gallery-cover-info",
                            "data-show-readmore": c,
                            "data-show-readmore-newline": i
                        }, r && s && n.createElement("h1", {
                            className: "sm-gallery-cover-title"
                        }, r), o && n.createElement("div", {
                            className: "sm-gallery-cover-description",
                            dangerouslySetInnerHTML: {
                                __html: o
                            },
                            ref: "description",
                            style: {
                                width: u
                            }
                        }), n.createElement("a", {
                            className: "sm-gallery-cover-readmore sm-accent",
                            onClick: t,
                            ref: "readmore"
                        }, "Read More"))
                    }
                }, {
                    key: "_resetReadMoreDisplay",
                    value: function() {
                        this.setState({
                            readMoreWidth: 0,
                            showReadMore: !1
                        })
                    }
                }, {
                    key: "_shouldUpdateReadMoreDisplay",
                    value: function(e) {
                        return e.description !== this.props.description || e.showBuy !== this.props.showBuy || e.showDownload !== this.props.showDownload || e.showSlideshow !== this.props.showSlideshow || e.width !== this.props.width
                    }
                }, {
                    key: "_updateReadMoreDisplay",
                    value: function() {
                        var e = this.refs,
                            o = e.description,
                            t = e.readmore;
                        if (o) {
                            var n = Math.ceil(o.getBoundingClientRect().height);
                            o.scrollHeight > n && this.setState({
                                readMoreWidth: t.offsetWidth + 1,
                                showReadMore: !0
                            })
                        }
                    }
                }]), o
            }(t);
        s.propTypes = {
            description: i.string,
            onReadMoreClick: i.func,
            showBuy: i.bool.isRequired,
            showDownload: i.bool.isRequired,
            showReadMoreOnNewLine: i.bool,
            showSlideshow: i.bool.isRequired,
            showTitle: i.bool,
            title: i.string,
            width: i.number.isRequired
        }, s.defaultProps = {
            description: "",
            onReadMoreClick: function() {},
            showReadMoreOnNewLine: !1,
            showTitle: !0,
            title: ""
        }, exports.CoverInfo = s, ! function() {
            var e = SM["import"]("sm-dom"),
                o = SM["import"]("sm-modal"),
                t = SM["import"]("sm-component-panel-base"),
                n = SM["import"]("sm-component-pure-render"),
                i = SM["import"]("react"),
                s = i.PropTypes,
                r = function(n) {
                    function s(o) {
                        babelHelpers.classCallCheck(this, s);
                        var t = babelHelpers.possibleConstructorReturn(this, (s.__proto__ || Object.getPrototypeOf(s)).call(this, o));
                        return t.state = {
                            hasNoScroll: e.classList(e.doc.body).contains("sm-noscroll")
                        }, t
                    }
                    return babelHelpers.inherits(s, n), babelHelpers.createClass(s, [{
                        key: "componentDidMount",
                        value: function() {
                            var o = this.state.hasNoScroll;
                            o || e.classList(e.doc.body).add("sm-noscroll")
                        }
                    }, {
                        key: "componentWillUnmount",
                        value: function() {
                            var o = this.state.hasNoScroll;
                            o || e.classList(e.doc.body).remove("sm-noscroll")
                        }
                    }, {
                        key: "render",
                        value: function() {
                            var e = this.props,
                                n = e.description,
                                s = e.onCloseClick,
                                r = e.showTitle,
                                a = e.title;
                            return i.createElement(o, {
                                className: "sm-gallery-cover-info-modal",
                                applyUserSkin: !0
                            }, i.createElement(t, null, i.createElement(t.Header, null, i.createElement(t.CloseButton, {
                                onClick: s
                            })), i.createElement(t.Body, null, a && r && i.createElement("h1", {
                                className: "sm-gallery-cover-title sm-title-xl"
                            }, a), n && i.createElement("div", {
                                className: "sm-gallery-cover-description",
                                dangerouslySetInnerHTML: {
                                    __html: n
                                }
                            }))))
                        }
                    }]), s
                }(n);
            r.propTypes = {
                description: s.string,
                onCloseClick: s.func,
                showTitle: s.bool,
                title: s.string
            }, r.defaultProps = {
                description: "",
                onCloseClick: function() {},
                showTitle: !0,
                title: ""
            }, exports.CoverInfoModal = r
        }(), ! function() {
            var e = SM["import"]("sm-progressbar"),
                t = SM["import"]("sm-component-pure-render"),
                n = SM["import"]("react"),
                i = n.PropTypes,
                s = exports.CoverBreadcrumbs,
                r = exports.CoverButtons,
                a = exports.CoverImage,
                l = exports.CoverImageDraggable,
                c = exports.CoverInfo,
                u = exports.CoverInfoModal,
                m = "small",
                p = "medium",
                h = "large",
                d = "horizontal",
                b = "vertical",
                g = 2,
                w = function(t) {
                    function i(e) {
                        babelHelpers.classCallCheck(this, i);
                        var o = babelHelpers.possibleConstructorReturn(this, (i.__proto__ || Object.getPrototypeOf(i)).call(this, e));
                        return o.state = {
                            showInfoModal: !1,
                            size: h
                        }, o
                    }
                    return babelHelpers.inherits(i, t), babelHelpers.createClass(i, [{
                        key: "componentWillMount",
                        value: function() {
                            this.setState({
                                size: this._getCoverSize(this.props)
                            })
                        }
                    }, {
                        key: "componentWillReceiveProps",
                        value: function(e) {
                            var o = this.props;
                            e.width !== o.width && this.setState({
                                size: this._getCoverSize(e)
                            })
                        }
                    }, {
                        key: "render",
                        value: function() {
                            var t = this,
                                i = this.props,
                                p = i.breadcrumbs,
                                h = i.description,
                                w = i.disableRepositionCancelButton,
                                f = i.disableRepositionSaveButton,
                                C = i.height,
                                v = i.image,
                                y = i.imageDraggable,
                                R = i.imageOffset,
                                B = i.onBuyButtonClick,
                                k = i.onDownloadButtonClick,
                                S = i.onImageDragEnd,
                                M = i.onImageRightClick,
                                E = i.onRepositionCancelClick,
                                D = i.onRepositionSaveClick,
                                _ = i.onRepositionStartClick,
                                H = i.onSlideshowButtonClick,
                                I = i.showBreadcrumb,
                                N = i.showCoverButtons,
                                O = i.showRepositionButtons,
                                P = i.showBuyButton,
                                T = i.showDownloadButton,
                                q = i.showImage,
                                W = i.showInfo,
                                x = i.showMask,
                                z = i.showRepositionCancelButton,
                                L = i.showRepositionSaveButton,
                                U = i.showRepositionStartButton,
                                j = i.showProgressBar,
                                A = i.showSlideshowButton,
                                Y = i.showTitle,
                                X = i.tileSpacing,
                                F = i.title,
                                G = i.width,
                                J = this.state,
                                K = J.showInfoModal,
                                Q = J.size,
                                V = void 0;
                            if (q = q && void 0 !== v) {
                                var Z = G / C,
                                    $ = v.DisplayWidth / v.DisplayHeight;
                                V = Z > $ ? b : d
                            }
                            return n.createElement("div", null, x && n.createElement("div", {
                                className: "sm-modal-mask",
                                style: {
                                    opacity: .95,
                                    zIndex: g
                                }
                            }), n.createElement("div", {
                                className: "sm-gallery-cover",
                                "data-show-buy": N && P,
                                "data-show-download": N && T,
                                "data-show-image": q,
                                "data-show-reposition-cancel": O && z,
                                "data-show-reposition-save": O && L,
                                "data-show-reposition-start": N && U,
                                "data-show-slideshow": N && A,
                                "data-size": Q,
                                "data-tile-spacing": X,
                                ref: "cover",
                                style: {
                                    height: q && C ? C : "auto",
                                    width: G ? G : "auto",
                                    zIndex: x ? g : "auto"
                                }
                            }, q && !y && n.createElement(a, {
                                height: C,
                                image: v,
                                imageOffset: R,
                                onImageRightClick: M,
                                width: G
                            }), q && y && n.createElement("div", null, n.createElement(l, {
                                draggableConfig: {
                                    constrain: V,
                                    container: this.refs.cover
                                },
                                height: C,
                                image: v,
                                imageOffset: R,
                                onDragEnd: S,
                                onImageRightClick: M,
                                width: G
                            }), j ? n.createElement(e, {
                                className: "sm-gallery-cover-reposition-progress sm-text-mini",
                                message: "Saving Cover Position"
                            }) : n.createElement("div", {
                                className: "sm-gallery-cover-reposition-label sm-text-mini"
                            }, "Drag to reposition cover")), I && n.createElement(s, {
                                breadcrumbs: p
                            }), N && n.createElement(r, {
                                onRepositionStartClick: _,
                                position: o,
                                showRepositionStartButton: U
                            }), K && n.createElement(u, {
                                description: h,
                                onCloseClick: function() {
                                    t.setState({
                                        showInfoModal: !1
                                    })
                                },
                                showTitle: Y,
                                title: F
                            }), W && n.createElement(c, {
                                description: h,
                                onReadMoreClick: function() {
                                    t.setState({
                                        showInfoModal: !0
                                    })
                                },
                                showBuy: P,
                                showDownload: T,
                                showReadMoreOnNewLine: m === Q,
                                showSlideshow: A,
                                showTitle: Y,
                                title: F,
                                width: G
                            }), N && n.createElement(r, {
                                onBuyButtonClick: B,
                                onDownloadButtonClick: k,
                                onSlideshowButtonClick: H,
                                showBuyButton: P,
                                showDownloadButton: T,
                                showSlideshowButton: A
                            }), O && n.createElement(r, {
                                disableRepositionCancelButton: w,
                                disableRepositionSaveButton: f,
                                onRepositionCancelClick: E,
                                onRepositionSaveClick: D,
                                showRepositionCancelButton: z,
                                showRepositionSaveButton: L
                            })))
                        }
                    }, {
                        key: "_getCoverSize",
                        value: function(e) {
                            var o = e.mobileMaxWidth,
                                t = e.tabletMaxWidth,
                                n = e.width;
                            return o > n ? m : t > n ? p : h
                        }
                    }]), i
                }(t);
            w.propTypes = {
                breadcrumbs: i.arrayOf(i.shape({
                    name: i.string.isRequired,
                    url: i.string.isRequired
                })),
                description: i.string,
                disableRepositionCancelButton: i.bool,
                disableRepositionSaveButton: i.bool,
                height: i.number.isRequired,
                image: i.shape({
                    DisplayHeight: i.number.isRequired,
                    DisplayWidth: i.number.isRequired,
                    Url: i.string.isRequired
                }),
                imageDraggable: i.bool,
                imageOffset: i.shape({
                    left: i.number.isRequired,
                    top: i.number.isRequired
                }),
                mobileMaxWidth: i.number,
                onBreadcrumbClick: i.func,
                onBuyButtonClick: i.func,
                onDownloadButtonClick: i.func,
                onImageDragEnd: i.func,
                onImageRightClick: i.func,
                onRepositionCancelClick: i.func,
                onRepositionSaveClick: i.func,
                onRepositionStartClick: i.func,
                onSlideshowButtonClick: i.func,
                showBreadcrumb: i.bool,
                showCoverButtons: i.bool,
                showRepositionButtons: i.bool,
                showBuyButton: i.bool,
                showDownloadButton: i.bool,
                showImage: i.bool,
                showInfo: i.bool,
                showMask: i.bool,
                showProgressBar: i.bool,
                showRepositionCancelButton: i.bool,
                showRepositionSaveButton: i.bool,
                showRepositionStartButton: i.bool,
                showSlideshowButton: i.bool,
                showTitle: i.bool,
                tabletMaxWidth: i.number,
                tileSpacing: i.number,
                title: i.string,
                width: i.number.isRequired
            }, w.defaultProps = {
                breadcrumbs: [],
                disableRepositionCancelButton: !1,
                disableRepositionSaveButton: !1,
                imageDraggable: !1,
                onBuyButtonClick: function() {},
                onImageDragEnd: function() {},
                onImageRightClick: function() {},
                onDownloadButtonClick: function() {},
                onRepositionCancelClick: function() {},
                onRepositionSaveClick: function() {},
                onRepositionStartClick: function() {},
                onSlideshowButtonClick: function() {},
                mobileMaxWidth: 670,
                showBreadcrumb: !0,
                showBuyButton: !1,
                showCoverButtons: !0,
                showDownloadButton: !1,
                showImage: !0,
                showInfo: !0,
                showMask: !1,
                showProgressBar: !1,
                showRepositionButtons: !1,
                showRepositionCancelButton: !0,
                showRepositionSaveButton: !0,
                showRepositionStartButton: !1,
                showSlideshowButton: !1,
                showTitle: !0,
                tabletMaxWidth: 800,
                tileSpacing: 0
            }, module.exports = exports = w
        }()
    }(), SM.currentModule = null
}, "", {
    requires: ["classnames", "react", "sm-component-breadcrumbs", "sm-component-button", "sm-component-draggable", "sm-component-icon", "sm-component-image", "sm-component-menu", "sm-component-panel-base", "sm-component-pure-render", "sm-dom", "sm-icon", "sm-image-sizes", "sm-modal", "sm-progressbar", "sm-resource-core"]
});
YUI.add("sm-gallerydownload-panel", function(e) {
    SM.currentModule = "sm-gallerydownload-panel";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        var e = SM["import"]("lodash"),
            t = SM["import"]("sm-analytics"),
            a = SM["import"]("sm-component-busy"),
            o = SM["import"]("sm-component-button"),
            n = SM["import"]("sm-dom"),
            l = SM["import"]("sm-component-icon"),
            s = SM["import"]("sm-component-overheadformfield"),
            r = SM["import"]("sm-component-panel-modal"),
            i = SM["import"]("sm-component-panel-base"),
            d = SM["import"]("react"),
            c = SM["import"]("sm-react-helper-render-to-shared-node"),
            m = SM["import"]("sm-resource-album"),
            u = SM["import"]("sm-component-textbox"),
            h = d.PropTypes,
            p = "Download Ready",
            w = "Email Sent",
            E = "Address Confirmed",
            g = "Error",
            y = "Email and Password Verification",
            k = "Download Being Created",
            f = "Loading",
            v = "Not Available",
            b = "Success",
            S = "Bulk Download",
            _ = d.createClass({
                displayName: "DownloadGalleryPanel",
                mixins: [d.addons.PureRenderMixin, d.addons.LinkedStateMixin],
                statics: {
                    mount: function(e) {
                        var t = d.createElement(_, e),
                            a = n.classList(n.querySelector("html")).contains("sm-user-ui") ? n.querySelector(".sm-user-overlay-container") : n.querySelector(".sm-overlay-container");
                        return c.mount(t, a)
                    }
                },
                propTypes: {
                    albumKey: h.string.isRequired,
                    downloadEnabled: h.bool.isRequired,
                    downloadPassword: h.bool.isRequired,
                    downloadPollingDelay: h.number,
                    imageUrl: h.string,
                    isOwner: h.bool.isRequired,
                    isLoggedInUser: h.bool.isRequired,
                    toastDelay: h.number,
                    unlockStateCallback: h.func,
                    verifiedAction: h.bool
                },
                getDefaultProps: function() {
                    return {
                        downloadPollingDelay: 2500,
                        imageUrl: "",
                        toastDelay: 8e3,
                        verifiedAction: !1
                    }
                },
                getInitialState: function() {
                    var e = y;
                    return this.props.verifiedAction ? e = E : this.props.isOwner ? (this.props.unlockStateCallback && this.props.unlockStateCallback(!0), e = f) : this.props.downloadEnabled ? !this.props.downloadPassword && this.props.isLoggedInUser && (e = f) : e = v, {
                        closeTimeout: null,
                        downloadTimeout: null,
                        emailError: null,
                        emailValue: null,
                        files: null,
                        message: null,
                        mode: e,
                        passwordError: null,
                        passwordValue: null
                    }
                },
                componentDidMount: function() {
                    var e = this;
                    return this.trackEvent("Start", null, {}), this.state.mode !== f && this.trackEvent("Screen View", this.state.mode, {}), this.props.isOwner && this.props.imageUrl ? void this._handleSingleImageDownload() : void(!this.props.verifiedAction && (this.props.isOwner || this.props.isLoggedInUser && !this.props.downloadPassword) && this._doDownloadRequest(function(t) {
                        e.setState({
                            files: t,
                            mode: p
                        })
                    }, function() {
                        e._handleGenerate()
                    }))
                },
                componentWillUpdate: function(e, t) {
                    t.mode !== f && t.mode !== this.state.mode && this.trackEvent("Screen View", t.mode, {})
                },
                componentWillUnmount: function() {
                    this.state.downloadTimeout && clearTimeout(this.state.downloadTimeout), this.state.closeTimeout && clearTimeout(this.state.closeTimeout)
                },
                trackEvent: function(a, o, n) {
                    var l = e.assign({
                        isOwner: this.props.isOwner,
                        label: o
                    }, n);
                    t.Tracker.createEvent(S, a, l).log()
                },
                _handleCloseClick: function(e, t) {
                    t || this.trackEvent("Close", "Done Button", {}), this.state.closeTimeout && clearTimeout(this.state.closeTimeout), c.unmount(this)
                },
                _handleXCloseClick: function(e) {
                    this.trackEvent("Close", "X Button", {}), this._handleCloseClick(e, !0)
                },
                _doDownloadRequest: function(e, t) {
                    var a = this;
                    m.downloadByKey(this.props.albumKey).then(function(o) {
                        a._filesReady(o) ? e(o) : t(o)
                    }, this._handleGenericError)
                },
                _handleGenericError: function() {
                    var e = this.state.message || "Something went wrong, please try again";
                    this.trackEvent("Generic error", e, {}), this.setState({
                        mode: g,
                        message: e
                    })
                },
                _handleSingleImageDownload: function() {
                    var e = this.props.toastDelay,
                        t = {
                            mode: b,
                            message: "The gallery is now unlocked. Your image is now being downloaded!"
                        };
                    n.isStandalone && (t.message = "The gallery is now unlocked. Press the download button to open the image outside of the app to save."), this.props.isOwner && (e = 0), this.state.closeTimeout || (t.closeTimeout = setTimeout(this._handleCloseClick, e)), this.props.isOwner || this.setState(t), n.isStandalone || (n.doc.location.href = this.props.imageUrl)
                },
                _handlePasswordSubmit: function(e, t) {
                    var a = this,
                        o = {
                            data: {}
                        };
                    this.setState({
                        emailError: null,
                        message: "Validating",
                        mode: f,
                        passwordError: null
                    }), this.state.passwordValue && (o.data = {
                        Password: this.state.passwordValue
                    }), m.unlockdownloadByKey(this.props.albumKey, o).then(function() {
                        a.trackEvent("Verify Password", null, {}), a.props.unlockStateCallback && a.props.unlockStateCallback(!0), a.props.imageUrl ? a._handleSingleImageDownload() : a.props.isLoggedInUser || a.props.isOwner ? a._handleGenerate() : a._handleEmailSubmit(e, t)
                    }, function() {
                        a.state.passwordValue ? a.trackEvent("Verification Error", "Incorrect Password", {}) : a.trackEvent("Verification Error", "Missing Password", {}), a.props.unlockStateCallback && a.props.unlockStateCallback(!1), a.setState({
                            mode: y,
                            passwordError: "That password doesnt match what the owner told us."
                        })
                    })
                },
                _handleEmailSubmit: function() {
                    var e = this,
                        t = {
                            data: {}
                        };
                    this.setState({
                        emailError: null,
                        message: "Validating",
                        mode: f,
                        passwordError: null
                    }), this.state.emailValue && (t.data = {
                        Email: this.state.emailValue
                    }), m.downloadByKey(this.props.albumKey, t).then(function() {
                        e.trackEvent("Verify Email", null, {});
                        var t = w;
                        (e.props.isOwner || e.props.isLoggedInUser) && (t = E);
                        var a = {
                            emailError: null,
                            mode: t
                        };
                        e.state.closeTimeout || (a.closeTimeout = setTimeout(e._handleCloseClick, e.props.toastDelay)), e.setState(a)
                    }, function() {
                        e.state.emailValue ? e.trackEvent("Verification Error", "Missing Email", {}) : e.trackEvent("Verification Error", "Invalid Email", {}), e.setState({
                            emailError: "Invalid email, please try again",
                            mode: y
                        })
                    })
                },
                _filesReady: function(t) {
                    var a = !1;
                    return t.length > 0 && e.forEach(t, function(e) {
                        return "Complete" !== e.get("Status") ? !1 : void(a = !0)
                    }), a
                },
                _handleDownloadPolling: function() {
                    var e = this;
                    this.state.downloadTimeout = setTimeout(function() {
                        e._doDownloadRequest(function(t) {
                            e._filesReady(t) ? (e.state.downloadTimeout && clearTimeout(e.state.downloadTimeout), e.setState({
                                downloadTimeout: e.state.downloadTimeout,
                                files: t,
                                mode: p
                            })) : e._handleDownloadPolling(t)
                        }, e._handleDownloadPolling)
                    }, e.props.downloadPollingDelay)
                },
                _handleGenerate: function() {
                    var e = this;
                    this.trackEvent("Generate Files", null, {}), this.setState({
                        files: null,
                        mode: k
                    }), m.downloadByKey(this.props.albumKey, !0).then(function(t) {
                        e._filesReady(t) ? e.setState({
                            files: t,
                            mode: p
                        }) : e._handleDownloadPolling(t)
                    }, this._handleGenericError)
                },
                _renderLoadingPanel: function() {
                    var e = this.state.message;
                    return e || (e = "Loading..."), this._renderBasicPanel(null, e)
                },
                _renderBasicPanel: function(e, t) {
                    var o = "";
                    switch (this.state.mode) {
                        case f:
                            o = d.createElement("div", {
                                className: "sm-center-indicator"
                            }, d.createElement(a, null));
                            break;
                        case g:
                            o = d.createElement(l, {
                                icon: "Warning"
                            });
                            break;
                        case p:
                        case b:
                            o = d.createElement(l, {
                                icon: "CheckmarkEncircled2"
                            })
                    }
                    return t || (t = d.createElement("div", {
                        className: "sm-panel-message"
                    }, this.state.message)), d.createElement("div", {
                        className: "icon-pane"
                    }, o, d.createElement("h2", {
                        className: "title"
                    }, e), d.createElement("div", {
                        className: "content"
                    }, t))
                },
                _renderDownload: function() {
                    var t, a = {},
                        o = this;
                    return e.forEach(this.state.files, function(e, t) {
                        a["item-" + t] = d.createElement("tr", null, d.createElement("td", null, d.createElement("a", {
                            href: e.get("WebUri"),
                            onClick: o.trackEvent("Download File Click", e.get("FileName"), {})
                        }, e.get("FileName"))))
                    }), t = "Click the link below to download your photos.", e.size(a) > 1 && (t = "We split your photos into bite-size archives to avoid breaking your Internet. Click the links below to download all your photos."), a = d.addons.createFragment(a), this._renderBasicPanel("Your Photos Are Ready", d.createElement("div", null, d.createElement("p", null, t), d.createElement("table", null, d.createElement("tbody", null, a))))
                },
                render: function() {
                    var e = this.state,
                        t = "",
                        a = d.createElement(i.Buttons, null, d.createElement(o, {
                            skin: "submit",
                            onClick: this._handleCloseClick
                        }, "Done")),
                        n = 400;
                    switch (e.mode) {
                        case y:
                            var l = this._handleEmailSubmit,
                                c = "Send Email",
                                m = "",
                                h = "Well send an email to let you know when your download is ready, so make sure you enter an address that works. Well send a quick verification so you can double-check.",
                                S = "";
                            this.props.isLoggedInUser || this.props.isOwner || this.props.imageUrl || (m = d.createElement(s, {
                                error: this.state.emailError
                            }, d.createElement(u, {
                                placeholder: "Email Address",
                                size: "small",
                                type: "email",
                                valueLink: this.linkState("emailValue")
                            }))), this.props.downloadPassword && (h = m ? "These photos are protected by the owner. Enter the correct password and a valid email address to begin your download. We send an email to let you know when your download is ready, so make sure you enter an address that works." : "These photos are protected by the owner. Enter the correct password to begin your download.", S = d.createElement(s, {
                                error: this.state.passwordError
                            }, d.createElement(u, {
                                placeholder: "Password",
                                size: "small",
                                type: "password",
                                valueLink: this.linkState("passwordValue")
                            })), l = this._handlePasswordSubmit), t = d.createElement("div", {
                                className: "sm-form-contents"
                            }, d.createElement("p", null, h), d.createElement("div", null, S, m)), m || (c = "Unlock Gallery"), a = d.createElement(i.Buttons, null, d.createElement(o, {
                                skin: "accent",
                                onClick: l
                            }, c));
                            break;
                        case E:
                            t = this._renderBasicPanel("Thanks for Verifying", d.createElement("div", null, d.createElement("p", null, "Your download is being created and will keep being prepared even if you navigate away from this page. Well email you once your files are ready."))), a = "";
                            break;
                        case w:
                            n = 500, t = this._renderBasicPanel("Check your Email", d.createElement("div", null, d.createElement("p", null, "We sent a verification email to", d.createElement("span", {
                                className: "sm-accent"
                            }, this.state.emailValue)), d.createElement("p", null, "It contains a link to start your download, so be sure to open it and click the link!"))), a = "";
                            break;
                        case b:
                            t = this._renderBasicPanel("Success", d.createElement("p", null, this.state.message));
                            break;
                        case g:
                            t = this._renderBasicPanel("Error", d.createElement("p", null, this.state.message));
                            break;
                        case v:
                            t = d.createElement("p", null, "Sorry, you can't do that.");
                            break;
                        case p:
                            n = 500, t = this._renderDownload(), a = "";
                            break;
                        case k:
                            n = 500, t = d.createElement("div", null, d.createElement("p", null, "Your photos are being packaged up especially for you!"), d.createElement("p", null, "Your download is being created and will keep being prepared even if you navigate away from this page. Well email you once your files are ready."));
                            break;
                        case f:
                        default:
                            t = this._renderLoadingPanel(), a = d.createElement(i.Buttons, null, d.createElement(o, {
                                onClick: this._handleCloseClick
                            }, "Cancel"))
                    }
                    var _ = "sm-gallerydownload-body";
                    return 500 === n && (_ = "sm-gallerydownload-wide-body"), d.createElement(r, null, d.createElement(i, {
                        className: "sm-gallerydownload-panel"
                    }, d.createElement(i.Header, null, d.createElement(i.CloseButton, {
                        onClick: this._handleXCloseClick
                    })), d.createElement(i.Body, {
                        className: _
                    }, t), a))
                }
            });
        module.exports = _
    }(), SM.currentModule = null
}, "", {
    requires: ["sm", "lodash", "react", "sm-analytics", "sm-component-busy", "sm-component-button", "sm-component-overheadformfield", "sm-component-panel-base", "sm-component-panel-modal", "sm-component-textbox", "sm-react-helper-render-to-shared-node", "sm-resource-album"]
});
YUI.add("sm-google-plus", function(e) {
    SM.currentModule = "sm-google-plus";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";

        function t() {
            r ? (clearTimeout(l), a.resolve(c.gapi)) : l = setTimeout(t, 200)
        }

        function n() {
            var e = c.gapi;
            e.client.init({
                apiKey: SM.env.google.apiKey,
                clientId: f,
                scope: "profile"
            }).then(function() {
                e.auth2.getAuthInstance().isSignedIn.get() && e.auth.setToken(e.auth2.getAuthInstance().currentUser.get().getAuthResponse()), r = !0
            })
        }

        function i() {
            return new u.Promise(function(e, t) {
                T.loadGooglePlusJavascript({
                    checkInitialAuth: !0
                }).then(function(n) {
                    n.client ? n.client.load("plus", "v1", function() {
                        e(n.client.plus)
                    }) : t("Client object not created.")
                })
            })
        }
        var o, a, r, l, s = SM["import"]("lodash"),
            d = SM["import"]("sm-dom"),
            u = SM["import"]("rsvp"),
            c = d.win,
            f = SM.env.google.clientId,
            p = s.template('<div class="g-plusone"<% if (typeof href !== "undefined") { %> data-href="<%- href %>" <% }; %><% if (typeof size !== "undefined") { %> data-size="<%- size %>" <% }; %><% if (typeof annotation !== "undefined") { %> data-annotation="<%- annotation %>" <% }; %><% if (typeof width !== "undefined") { %> data-width="<%- width %>" <% }; %><% if (typeof align !== "undefined") { %> data-align="<%- align %>" <% }; %><% if (typeof expandTo !== "undefined") { %> expandTo="<%- expandTo %>" <% }; %><% if (typeof callback !== "undefined") { %> data-callback="<%- callback %>" <% }; %><% if (typeof onstartinteraction !== "undefined") { %> data-onstartinteraction="<%- onstartinteraction %>" <% }; %><% if (typeof onendinteraction !== "undefined") { %> data-onendinteraction="<%- onendinteraction %>" <% }; %><% if (typeof recommendations !== "undefined") { %> data-recommendations="<%- recommendations %>" <% }; %>></div>'),
            g = s.template('<div class="g-<%- type %>"></div>'),
            m = {
                layout: "portrait",
                showcoverphoto: !0,
                showtagline: !0,
                theme: "light",
                width: 300
            },
            h = {
                layout: "portrait",
                showphoto: !0,
                showowners: !1,
                showtagline: !0,
                theme: "light",
                width: 300
            },
            T = e.namespace("SM").GooglePlus = module.exports = {
                loadGooglePlusJavascript: function(e) {
                    if (e || (e = {}), o = e.checkInitialAuth, !a) {
                        a = u.defer();
                        var t = d.doc.createElement("script");
                        t.async = !0, t.defer = !0, t.src = "https://apis.google.com/js/client:platform.js?onload=clientLoaded", d.doc.getElementsByTagName("head")[0].appendChild(t)
                    }
                    return a.promise
                },
                getProfile: function(e, t) {
                    return e || (e = "me"), new u.Promise(function(n, o) {
                        i().then(function(i) {
                            var a, r = {
                                userId: e
                            };
                            t && (r.fields = t.join(",")), a = i.people.get(r), a.execute(function(e) {
                                e.error ? o(e.error.message || "Error loading profile data.") : n(e.result)
                            })
                        })
                    })
                },
                getProfileImageUrl: function(e) {
                    return this.getProfile(e, ["image"])
                },
                renderBadge: function(e, t, n) {
                    return t || (t = "person"), this.loadGooglePlusJavascript().then(function(i) {
                        var o = d.doc.createElement("div");
                        o.innerHTML = g({
                            type: t
                        });
                        var a = "community" === t ? h : m;
                        return i[t].render(e.appendChild(o.childNodes[0]), s.assign(a, n)), e
                    })
                },
                renderPlusOneButton: function(e, t) {
                    return this.loadGooglePlusJavascript().then(function(n) {
                        var i = d.doc.createElement("div");
                        return i.innerHTML = p(t), n.plusone.render(e.appendChild(i.childNodes[0]), t), e
                    })
                },
                renderSmugSigninButton: function(t, n) {
                    n || (n = {});
                    var i = this;
                    return new u.Promise(function(o) {
                        i.loadGooglePlusJavascript().then(function(i) {
                            t.innerHTML = e.SM.Templates.button({
                                className: n.className || "sm-gplus-login",
                                icon: n.icon || "GooglePlus",
                                label: n.label || "",
                                value: n.value || "gpluslogin",
                                size: n.size || "small"
                            });
                            var a = t.firstChild,
                                r = i.auth2.getAuthInstance();
                            r.attachClickHandler(a, {}, function(e) {
                                var t = e.getBasicProfile();
                                i.auth.setToken(e.getAuthResponse()), o({
                                    id: t.getId(),
                                    name: t.getName(),
                                    profileImageURL: t.getImageUrl()
                                })
                            }, function() {})
                        })
                    })
                },
                PLUSONE_BUTTON_OPTIONS: {
                    ANNOTATION: {
                        NONE: "none",
                        BUBBLE: "bubble",
                        INLINE: "inline"
                    },
                    ALIGN: {
                        LEFT: "left",
                        RIGHT: "right"
                    },
                    EXPANDTO: {
                        TOP: "top",
                        RIGHT: "right",
                        BOTTOM: "bottom",
                        LEFT: "left"
                    },
                    SIZE: {
                        SMALL: "small",
                        MEDIUM: "medium",
                        STANDARD: "standard",
                        TALL: "tall"
                    }
                },
                BADGE_SIZES: {
                    LANDSCAPE: {
                        MIN_WIDTH: 273,
                        MAX_WIDTH: 450
                    },
                    PORTRAIT: {
                        MIN_WIDTH: 180,
                        MAX_WIDTH: 450
                    }
                }
            };
        c.___gcfg = {
            lang: "en-US",
            parsetags: "explicit"
        }, c.clientLoaded = function() {
            c.gapi.client.setApiKey(SM.env.google.apiKey), o ? (setTimeout(n, 1), l = setTimeout(t, 200)) : a.resolve(c.gapi)
        }
    }(), SM.currentModule = null
}, "", {
    requires: ["lodash", "rsvp", "sm", "sm-dom"]
});
YUI.add("sm-guide-bootstrap", function(e) {
    SM.currentModule = "sm-guide-bootstrap";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        "use strict";
        var i = e.namespace("SM.Guide"),
            u = e.namespace("SM.Guide.Bootstrap");
        e.SM.Page.on("page:init", function(i) {
            if (i.loadNuxGuides) {
                var t = e.SM.Resource.loadLocal("userProductNotifications"),
                    d = t ? 700 : 0;
                setTimeout(function() {
                    u.runGuides().then(function() {
                        e.SM.Page.after("page:modeChange", function(e) {
                            n && !n.getGuide().validCheck() && (n.end(), n = null), u.runGuides()
                        })
                    })
                }, d)
            }
        });
        var i = e.namespace("SM.Guide"),
            u = e.namespace("SM.Guide.Bootstrap"),
            n = null;
        u.SM_GUIDE_MODULE_NAME = "sm-guide", u.loadGuides = function(i, n) {
            return new e.Promise(function(t) {
                e.SM.API2.getUser(e.SM.Page.user.nickName, {
                    fields: [],
                    expand: {
                        UserGuideStates: {
                            data: {
                                OnlyAutorun: i ? 1 : 0,
                                IncludeInvisible: n ? 1 : 0
                            }
                        },
                        "UserGuideStates.Guide": !0,
                        UserHideGuides: !0
                    }
                }).then(function(i) {
                    var n = {
                        hide: !1,
                        incompleteGuides: [],
                        nextGuide: null,
                        nextGuideStep: null,
                        guides: []
                    };
                    i.response.UserHideGuides.Hide && (n.hide = !0), i.response.UserGuideStates && i.response.UserGuideStates.length > 0 ? e.use(u.SM_GUIDE_MODULE_NAME, function(e) {
                        var u = e.SM.Guide;
                        u.skipGuidesUri = i.response.UserHideGuides.Uri, e.Array.each(i.response.UserGuideStates, function(i) {
                            var t = u.guides[i.Guide.GuideID];
                            if (!t) return void e.SM.SmugLog.add("nux", "Missing NUX guide: " + i.Guide.GuideID, e.SM.SmugLog.LEVEL_WARNING);
                            if (t.set("statusUri", i.Uri), t.set("isComplete", i.Complete), n.guides.push(i.Guide.GuideID), i.Autorun && n.incompleteGuides.push(i.Guide.GuideID), i.Progress) {
                                var d = i.Progress - 1;
                                t && t.validCheck(d) && (n.nextGuide = t, n.nextGuideStep = d)
                            }
                        }), n.nextGuide || n.hide || e.Array.each(n.incompleteGuides, function(e) {
                            var i = u.guides[e];
                            i.validCheck() && (n.nextGuide ? i.get("priority") < n.nextGuide.get("priority") && (n.nextGuide = i) : n.nextGuide = i)
                        }), t(n)
                    }) : t(n)
                })
            })
        }, u.runGuides = function() {
            return new e.Promise(function(t, d) {
                u.loadGuides(!0, !0).then(function(u) {
                    u.nextGuide && e.use("sm-guide", function(e) {
                        n && n.end(), n = i.run(u.nextGuide, u.nextGuideStep)
                    }), e.Array.each(u.incompleteGuides, function(e) {
                        var n = i.guides[e];
                        u.nextGuide && n.name === u.nextGuide.name || n.passiveCompletionHandler()
                    }), t()
                })
            })
        }
    }(), SM.currentModule = null
}, "", {
    requires: ["sm-page", "sm-api2"]
});
YUI.add("sm-icon", function(e) {
    SM.currentModule = "sm-icon";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";

        function e(e, r, o) {
            var t = e.size,
                n = e[r];
            return -1 === l.ICON_NAMES[t].indexOf(n) ? a.error(o, '"' + n + '" isn\'t a valid "' + t + '" icon.') : void 0
        }
        Object.defineProperty(exports, "__esModule", {
            value: !0
        });
        var r = SM["import"]("classnames"),
            o = SM["import"]("react"),
            a = SM["import"]("sm-smuglog"),
            t = {
                large: ["Action", "ActionAlt", "Add", "Adjust", "Alert", "Alert2", "Amazon", "Android", "Apple", "ArrowBack", "ArrowNext", "Browser", "CameraPhoto", "CameraPhoto2", "Cart", "Cart2", "CartAdd", "Check", "Close", "Comment", "Comment2", "Crop", "CursorMove", "Desktop", "Download", "Dropbox", "Facebook", "Flickr", "Folder", "Folder2", "FullScreen", "Gallery", "Gallery2", "GoogleDrive", "GooglePhotos", "HelpEncircled", "HelpEncircled2", "History", "History2", "Home", "Home2", "InfoEncircled", "InfoEncircled2", "Laptop", "Layout", "Lightroom", "Link", "Lock", "Lock2", "Menu", "Mobile", "MoreHoriz", "MoreVert", "NavigateBack", "NavigateNext", "Paint", "Pause", "People", "People2", "Person", "Person2", "PhoneSave", "Play", "Printer", "Remove", "Search", "Settings", "Settings2", "Share", "SharePrivate", "Sizes", "SmugMug", "Star", "Star2", "Tablet", "Trash", "Trash2", "Twitter", "Upload", "Upload2", "Wrench"],
                small: ["Action", "ActionAlt", "Adjust", "Alert", "Alert2", "AngleBracketDown", "AngleBracketLeft", "AngleBracketLeftSlim", "AngleBracketRight", "AngleBracketRightSlim", "AngleBracketUp", "AspectOrient", "AspectSquare", "Browser", "Calendar", "CameraPhoto", "CameraPhoto2", "CameraVideo2", "Cart", "Cart2", "CartAdd", "CartAdd2", "Checkmark", "Comment", "Comment2", "CreditCard", "Crop", "Desktop", "Download", "Download2", "Edit", "Edit2", "Email", "Email2", "Flag", "Flag2", "Folder", "Folder2", "FolderOpen", "FullScreen", "Gallery", "Gallery2", "Gear", "Heart", "HeartOutlined", "Help", "HelpEncircled", "Hide", "History", "History2", "Home", "Home2", "Image", "Image2", "Info", "InfoEncircled", "InfoEncircled2", "Laptop", "Layout", "Link", "Lock", "Lock2", "Menu", "Menu2", "Minus", "MinusSlim", "Mobile", "MoreHoriz", "MoreVert", "Page", "Page2", "Pause", "Play", "Plus", "PlusSlim", "Printer", "Search", "Search2", "Share", "Sizes", "Star", "StarOutlined", "Sync", "Tablet", "Tag", "Trash", "Trash2", "Upload", "Upload2", "User", "Users", "VideoCamera", "View", "Warning", "Wrench", "XCross"]
            },
            l = function i(e) {
                var a = e.className,
                    t = e.name,
                    l = e.size,
                    n = babelHelpers.objectWithoutProperties(e, ["className", "name", "size"]),
                    s = r("sm-icon", "sm-icon-" + t, "sm-icon-" + l, a),
                    c = l === i.SIZE_LARGE ? "30px" : "18px";
                return o.createElement("svg", babelHelpers["extends"]({
                    className: s,
                    height: c,
                    role: "presentation",
                    title: t,
                    width: c
                }, n), o.createElement("use", {
                    xlinkHref: "#sm-icon-def-" + l + "-" + t
                }))
            };
        l.ICON_NAMES = t, l.SIZE_LARGE = "large", l.SIZE_SMALL = "small";
        var n = o.PropTypes;
        l.propTypes = {
            className: n.oneOfType([n.arrayOf(n.string), n.string]),
            name: e,
            size: n.oneOf([l.SIZE_LARGE, l.SIZE_SMALL])
        }, l.defaultProps = {
            size: l.SIZE_LARGE
        }, exports["default"] = l, module.exports = exports["default"]
    }(), SM.currentModule = null
}, "", {
    requires: ["classnames", "react", "sm-smuglog"]
});
YUI.add("sm-image-buttons-comment", function(e) {
    SM.currentModule = "sm-image-buttons-comment";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: !0
        });
        var e = SM["import"]("react"),
            t = SM["import"]("sm-component-button"),
            n = SM["import"]("sm-icon"),
            o = function(o) {
                var m = o.onClick;
                return e.createElement(t, {
                    onClick: m,
                    noChrome: !0,
                    size: "small",
                    title: "Comment",
                    value: "comment"
                }, e.createElement(n, {
                    name: "Comment",
                    size: "small"
                }))
            },
            m = e.PropTypes;
        o.propTypes = {
            onClick: m.func
        }, o.defaultProps = {
            onClick: function() {}
        }, exports["default"] = o, module.exports = exports["default"]
    }(), SM.currentModule = null
}, "", {
    requires: ["sm", "sm-component-button", "sm-icon", "react"]
});
YUI.add("sm-image-buttons-component-image-buttons", function(e) {
    SM.currentModule = "sm-image-buttons-component-image-buttons";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: !0
        });
        var e = SM["import"]("react"),
            t = SM["import"]("sm-image-buttons-share"),
            n = SM["import"]("sm-image-buttons-comment"),
            o = SM["import"]("sm-image-buttons-tools"),
            m = SM["import"]("sm-image-buttons-info"),
            s = SM["import"]("sm-image-buttons-download"),
            u = SM["import"]("sm-image-buttons-sizes"),
            r = function(r) {
                return babelHelpers.objectDestructuringEmpty(r), e.createElement("div", {
                    className: "sm-image-buttons-container"
                }, e.createElement(t, null), e.createElement(n, null), e.createElement(o, null), e.createElement(m, null), e.createElement(s, null), e.createElement(u, null))
            };
        e.PropTypes;
        r.propTypes = {}, r.defaultProps = {}, exports["default"] = r, module.exports = exports["default"]
    }(), SM.currentModule = null
}, "", {
    requires: ["sm-image-buttons-share", "sm-image-buttons-comment", "sm-image-buttons-tools", "sm-image-buttons-info", "sm-image-buttons-download", "sm-image-buttons-sizes"]
});
YUI.add("sm-image-buttons-constants", function(e) {
    SM.currentModule = "sm-image-buttons-constants";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: !0
        });
        exports.BUY_BUTTON_COLOR_ACCENT = "accent", exports.BUY_BUTTON_COLOR_SUBMIT = "submit", exports.BUY_BUTTON_COLOR_DEFAULT = "default"
    }(), SM.currentModule = null
}, "", {
    requires: ["sm"]
});
YUI.add("sm-image-buttons-deprecated-base", function(t) {
    SM.currentModule = "sm-image-buttons-deprecated-base";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";

        function e(t) {
            this.initialize(t)
        }
        Object.defineProperty(exports, "__esModule", {
            value: !0
        });
        var n = SM["import"]("sm-dom"),
            o = 27,
            i = 73;
        e.CONFIGS = {}, e.getHTML = function(n, o) {
            var i = e.CONFIGS[n],
                s = "";
            return i && (o && (i = t.merge(i, o)), s = t.SM.Templates.button(i)), s
        }, e.prototype = {
            initialize: function(e) {
                this._galleryUnlocked = [], e.container && (this.container = t.one(e.container), this.container.delegate("click", this._onClick, ".sm-button", this)), "function" == typeof e.getContextFn && (this._getContextFn = e.getContextFn), n.doc.body.addEventListener("keydown", this._onKeyDown.bind(this))
            },
            destructor: function() {
                n.doc.body.removeEventListener("keydown", this._onKeyDown.bind(this))
            },
            _onKeyDown: function(t) {
                t.keyCode === o ? this.closeAll() : t.keyCode === i
            },
            setContext: function(t) {
                this._context = t
            },
            hideAll: function() {
                var e = this._getButtons();
                t.Object.each(e, function(t) {
                    t.hide()
                })
            },
            updateAll: function() {
                var e = this._getButtons();
                t.Object.each(e, function(t, e) {
                    this[e].update.call(this)
                }, this)
            },
            closeAll: function() {
                var e = this._getButtons();
                t.Object.each(e, function(t, e) {
                    this[e].close && this[e].close()
                }, this)
            },
            _getButtons: function() {
                if (!this._buttons) {
                    var n = this.container,
                        o = this;
                    this._buttons = {}, t.Object.each(e.CONFIGS, function(t, e) {
                        var i = n.one("." + t.className);
                        i && (o._buttons[e] = i)
                    })
                }
                return this._buttons
            },
            _getButtonNode: function(t) {
                var e = this._getButtons();
                return e[t]
            },
            _onClick: function(e) {
                var n = e.currentTarget,
                    o = n.getData("value");
                t.SM.Page.uxdisabled || this[o] && (e.preventDefault(), this[o].action.call(this, n))
            },
            _getContext: function(t) {
                return this._context ? this._context : this._getContextFn ? this._getContextFn(t) : void 0
            }
        }, t.namespace("SM").ImageButtons = e, exports["default"] = e, module.exports = exports["default"]
    }(), SM.currentModule = null
}, "", {
    requires: ["node", "sm-templates-button", "sm-resource-image", "sm-image-info-panel", "react", "react-dom", "sm-react-helper-render-to-shared-node", "sm-component-panel-modal", "sm-resource-album-image", "sm-share-panel", "sm-templates-button"]
});
YUI.add("sm-image-buttons-deprecated-comment", function(e) {
    SM.currentModule = "sm-image-buttons-deprecated-comment";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        "use strict";
        var e = SM["import"]("sm-image-buttons-deprecated-base"),
            t = SM["import"]("sm-modal"),
            m = SM["import"]("sm-resource-image"),
            n = SM["import"]("react");
        e.CONFIGS.comment = {
            className: "sm-button-image-comment",
            icon: "Comment",
            size: "small",
            noChrome: !0,
            value: "comment",
            title: "Comment"
        }, e.prototype.comment = {
            update: function() {
                var e = this._getButtonNode("comment"),
                    t = this._getContext(e);
                e && t.image && (t.image.get("CanComment") ? (e.show(), this.comment.commentsPanel && this.comment.commentsPanel.get("visible") && this.comment.commentsPanel.update(t.image)) : e.hide())
            },
            close: function() {
                this.commentsPanel && t.unmount(this.commentsPanel), this.commentsPanel = void 0
            },
            action: function(e) {
                var o = this,
                    s = this._getContext(e);
                this.closeAll(), s.image && SM.load("sm-comments-panel").then(function(e) {
                    m.loadByKey(s.image.get("ImageKey"), {
                        io: {
                            cache: !0
                        }
                    }).then(function(m) {
                        o.comment.commentsPanel = t.mount(n.createElement(e, {
                            resource: m,
                            closeHandler: function() {
                                t.unmount(o.comment.commentsPanel)
                            }
                        }))
                    })
                })
            }
        }
    }(), SM.currentModule = null
}, "", {
    requires: ["sm-image-buttons-deprecated-base", "sm-modal"]
});
YUI.add("sm-image-buttons-deprecated-download", function(e) {
    SM.currentModule = "sm-image-buttons-deprecated-download";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        var o = SM["import"]("sm-analytics"),
            a = SM["import"]("sm-dom"),
            l = SM["import"]("sm-gallerydownload-panel"),
            t = SM["import"]("sm-image-buttons-deprecated-base");
        t.CONFIGS.download = {
            className: "sm-button-image-download",
            icon: "Download",
            size: "small",
            noChrome: !0,
            value: "download",
            title: "Download"
        }, t.prototype.download = {
            update: function() {
                var e = this._getButtonNode("download"),
                    o = this._getContext(e);
                e && o.image && (o.image.get("CanDownload") ? e.show() : e.hide())
            },
            action: function(t) {
                var n, d = this._getContext(t),
                    s = d.album,
                    r = d.image,
                    i = r.getUrlForSize("D"),
                    m = this,
                    g = e.SM.Page.user;
                r && s && (s.get("AllowDownloads") || s.get("IsOwner")) && (this._galleryUnlocked[s.get("AlbumKey")] || !s.get("HasDownloadPassword") || s.get("IsOwner") ? a.isStandalone ? a.escapeMobileWebApp(i) : a.doc.location.href = i : d.lightbox && (n = {
                    albumKey: s.get("AlbumKey"),
                    imageUrl: i ? i : "",
                    downloadEnabled: !!s.get("AllowDownloads"),
                    downloadPassword: !!s.get("HasDownloadPassword"),
                    isLoggedInUser: !!g,
                    isOwner: !(!g || !g.isAdmin && !g.isOwner),
                    unlockStateCallback: function(e) {
                        m._galleryUnlocked[s.get("AlbumKey")] = e
                    }
                }, this._galleryUnlocked[s.get("AlbumKey")] && (n.downloadPassword = !1), l.mount(n)), d.lightbox && o.Tracker.createEvent(o.CATEGORY.LIGHTBOX, "Download File Click").log())
            }
        }
    }(), SM.currentModule = null
}, "", {
    requires: ["sm-image-buttons-deprecated-base", "sm-gallerydownload-panel", "sm-dom"]
});
YUI.add("sm-image-buttons-deprecated-favorite", function(e) {
    SM.currentModule = "sm-image-buttons-deprecated-favorite";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        var t = SM["import"]("sm-analytics"),
            a = SM["import"]("sm-image-buttons-deprecated-base");
        a.CONFIGS.favorite = {
            className: "sm-button-image-favorite",
            icon: "Heart",
            size: "small",
            noChrome: !0,
            value: "favorite",
            title: "Favorite"
        }, a.prototype.favorite = {
            update: function() {
                var e = this._getButtonNode("favorite"),
                    t = e.one(".sm-button-label"),
                    a = this._getContext(e);
                e && a.image && a.galleryAlbum && a.galleryAlbum.get("CanFavorite") && window.SM.env.readOnly === !1 ? (e.show(), a.image.get("IsFavorite") ? (e.addClass("sm-button-image-favorited"), t ? (t.setHTML("Unfavorite"), e.set("title", "")) : e.set("title", "Unfavorite")) : (e.removeClass("sm-button-image-favorited"), t ? (t.setHTML("Favorite"), e.set("title", "")) : e.set("title", "Favorite"))) : e.hide()
            },
            action: function(a) {
                var o = this._getContext(a),
                    i = a.one(".sm-button-label"),
                    r = !1,
                    l = "";
                o.image && o.album && (r = !o.image.get("IsFavorite"), o.image.toggleFavorite(o.galleryAlbum.get("AlbumID"), o.galleryAlbum.get("AlbumKey"), o.galleryAlbum.get("FavoriteAlbumId"), o.galleryAlbum.get("FavoriteAlbumKey")), a.toggleClass("sm-button-image-favorited"), i && (a.hasClass("sm-button-image-favorited") ? i.setHTML("Unfavorite") : i.setHTML("Favorite")), l = r ? "Add Favorite" : "Remove Favorite", t.Tracker.createEvent(t.CATEGORY.FAVORITE, l, {
                    value: r ? 1 : -1
                }).log(), e.fire("image:updated", {
                    image: o.image,
                    updates: {
                        IsFavorite: r
                    }
                }))
            }
        }
    }(), SM.currentModule = null
}, "", {
    requires: ["sm-image-buttons-deprecated-base"]
});
YUI.add("sm-image-buttons-deprecated-favorites", function(e) {
    SM.currentModule = "sm-image-buttons-deprecated-favorites";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        var e = SM["import"]("sm-analytics"),
            t = SM["import"]("sm-image-buttons-deprecated-base");
        t.CONFIGS.favorites = {
            className: "sm-button-image-favorites",
            icon: "Gallery",
            label: "View Favorites",
            size: "small",
            noChrome: !0,
            value: "favorites",
            title: "View Favorites"
        }, t.prototype.favorites = {
            update: function() {
                var e = this._getButtonNode("favorites"),
                    t = this._getContext(e);
                e && t.image && t.galleryAlbum && t.galleryAlbum.get("CanFavorite") && t.galleryAlbum.get("FavoriteAlbumUrl") ? e.show() : e.hide()
            },
            action: function(t) {
                var a, r = this._getContext(t);
                r.image && r.galleryAlbum && (a = r.galleryAlbum.get("FavoriteAlbumUrl"), a && (document.location.href = a)), e.Tracker.createEvent(e.CATEGORY.FAVORITE, "See All").log()
            }
        }
    }(), SM.currentModule = null
}, "", {
    requires: ["sm-image-buttons-deprecated-base"]
});
YUI.add("sm-image-buttons-deprecated-info", function(e) {
    SM.currentModule = "sm-image-buttons-deprecated-info";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        var e = SM["import"]("sm-image-info-panel"),
            t = SM["import"]("react"),
            a = SM["import"]("sm-resource-image"),
            i = SM["import"]("sm-dom"),
            n = SM["import"]("sm-react-helper-render-to-shared-node"),
            o = SM["import"]("sm-image-buttons-deprecated-base"),
            m = SM["import"]("sm-analytics");
        o.CONFIGS.info = {
            className: "sm-button-image-info",
            icon: "InfoEncircled",
            size: "small",
            noChrome: !0,
            value: "info",
            title: "Info"
        }, o.prototype.info = {
            update: function() {
                var e = this._getButtonNode("info"),
                    t = this._getContext(e);
                e && (t.image.get("ShowEXIF") ? e.show() : e.hide()), this.info.panel && this.info._updateImageInfo(t.image.get("ImageKey"), !t.image.get("CanMap"))
            },
            close: function() {
                this.panel && (n.unmount(this.panel), this.panel = null)
            },
            action: function(a) {
                if (!this.info.panel) {
                    this.closeAll();
                    var o = {};
                    if (this.info.image && (o = this.info.image.getExpansion("ImageMetadata")), !i.doc.getElementById("imageinfo-mount")) {
                        var s = i.doc.createElement("div");
                        s.className = "sm-user-ui sm-user-overlay-container", s.id = "imageinfo-mount", i.doc.body.appendChild(s)
                    }
                    var l = n.mount(t.createElement(e, {
                        initialImage: this.info.image,
                        initialImageMetadata: o,
                        closeHandler: function() {
                            n.unmount(l), this.info.panel = null
                        }.bind(this)
                    }), i.doc.getElementById("imageinfo-mount"));
                    this.info.panel = l
                }
                var r = this._getContext(a);
                this.info._updateImageInfo(r.image.get("ImageKey"), !r.image.get("CanMap")), r.lightbox && m.Tracker.createEvent(m.CATEGORY.LIGHTBOX, "Open Info Panel", {
                    label: name
                }).log()
            },
            _updateImageInfo: function(e, t) {
                this.image = null, a.loadByKey(e, {
                    expand: ["ImageMetadata", "ImageSizeDetails"],
                    io: {
                        cache: !0
                    }
                }).then(function(e) {
                    this.image = e, this.panel.setState({
                        image: this.image,
                        metadata: this.image.getExpansion("ImageMetadata"),
                        disableMap: !!t
                    })
                }.bind(this))
            }
        }
    }(), SM.currentModule = null
}, "", {
    requires: ["sm-image-buttons-deprecated-base", "sm-dom"]
});
YUI.add("sm-image-buttons-deprecated-share", function(e) {
    SM.currentModule = "sm-image-buttons-deprecated-share";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        var e = SM["import"]("sm-resource-album-image"),
            a = SM["import"]("react"),
            r = SM["import"]("sm-component-panel-modal"),
            t = SM["import"]("sm-share-panel"),
            n = SM["import"]("sm-analytics"),
            s = SM["import"]("sm-image-buttons-deprecated-base");
        s.CONFIGS.share = {
            className: "sm-button-image-share",
            icon: "Action",
            size: "small",
            noChrome: !0,
            value: "share",
            title: "Share"
        }, s.prototype.share = {
            update: function() {
                var a = this.share,
                    r = this._getButtonNode("share"),
                    t = this._getContext(r),
                    n = t.image,
                    s = t.galleryAlbum,
                    m = t.album,
                    o = !0;
                r && n && "Open" === n.get("Status") ? (s && (s.get("CanShare") || (o = !1)), m && (m.get("CanShare") || (o = !1)), n.get("CanShare") || n.get("IsOwner") || (o = !1)) : o = !1, o ? r.show() : r.hide(), a.sharePanelOpen && (a.sharePanelImageKey = n.get("ImageKey"), e.loadByKey(m.get("AlbumKey"), n.get("ImageKey"), {
                    expand: ["AlbumImageShareUris", "EmbedVideo"],
                    io: {
                        cache: !0
                    }
                }).then(function(e) {
                    e.get("ImageKey") === a.sharePanelImageKey && a.sharePanelOpen && a.sharePanel && a.sharePanel.setState({
                        albumImageResource: e,
                        albumImageShareUrisResource: e.getExpansion("AlbumImageShareUris"),
                        embedVideo: e.getExpansion("EmbedVideo")
                    })
                }.bind(a)))
            },
            close: function() {
                var e = this.sharePanel;
                e && this.sharePanelOpen && (r.unmount(this.sharePanel), this.sharePanelOpen = !1)
            },
            action: function(s) {
                var m = this.share,
                    o = this._getContext(s),
                    l = o.image,
                    u = o.galleryAlbum || o.album;
                this.closeAll(), l && !m.sharePanelOpen && (m.sharePanelOpen = !0, e.loadByKey(u.get("AlbumKey"), l.get("ImageKey"), {
                    expand: ["Album", "Album.User", "Album.AlbumShareUris", "AlbumImageShareUris"],
                    io: {
                        cache: !0
                    }
                }).then(function(e) {
                    var s = a.createFactory(t),
                        o = r.mount(s({
                            albumImageResource: e,
                            albumResource: e.getExpansion("Album"),
                            userResource: e.getExpansion("Album.User"),
                            albumShareUrisResource: e.getExpansion("Album.AlbumShareUris"),
                            albumImageShareUrisResource: e.getExpansion("AlbumImageShareUris"),
                            onDone: function() {
                                r.unmount(m.sharePanel), m.sharePanelOpen = !1
                            }
                        }));
                    m.sharePanel = o, n.Tracker.createEvent(n.CATEGORY.SHARE_PANEL, "Start").log()
                }))
            }
        }
    }(), SM.currentModule = null
}, "", {
    requires: ["sm-image-buttons-deprecated-base"]
});
YUI.add("sm-image-buttons-deprecated-sizes", function(e) {
    SM.currentModule = "sm-image-buttons-deprecated-sizes";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        var s = SM["import"]("sm-image-buttons-deprecated-base");
        s.CONFIGS.sizes = {
            className: "sm-button-image-sizes",
            icon: "Sizes",
            size: "small",
            noChrome: !0,
            value: "sizes",
            title: "Sizes"
        }, s.prototype.sizes = {
            update: function() {
                var e = this._getButtonNode("sizes"),
                    s = this._getContext(e);
                e && s.image && (e.show(), this._sizesMenu && this._sizesMenu.update(s.image))
            },
            action: function(s) {
                var t = this,
                    i = this._getContext(s);
                i.image && e.use("sm-imagesize-menu", function() {
                    t._sizesMenu || (t._sizesMenu = new e.SM.Menus.ImageSize, t._sizesMenu.menu.render()), t._sizesMenu.update(i.image), t._sizesMenu.menu.show({
                        anchorPoint: s
                    })
                })
            }
        }
    }(), SM.currentModule = null
}, "", {
    requires: ["sm-image-buttons-deprecated-base"]
});
YUI.add("sm-image-buttons-deprecated-tools", function(e) {
    SM.currentModule = "sm-image-buttons-deprecated-tools";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        var t = SM["import"]("sm-image-buttons-deprecated-base");
        t.CONFIGS.tools = {
            className: "sm-button-image-tools",
            icon: "Wrench",
            size: "small",
            noChrome: !0,
            value: "tools",
            title: "Tools"
        }, t.prototype.tools = {
            close: function() {
                this._editMenu && this._editMenu.closePanels()
            },
            update: function() {
                var e = this._getButtonNode("tools"),
                    t = this._getContext(e);
                e && t.image && (t.image.get("CanEdit") || t.image.get("CanRemove") ? e.show() : e.hide())
            },
            action: function(t) {
                var o = this,
                    n = this._getContext(t);
                n.image && n.album && e.use("sm-imageedit-menu", function() {
                    if (!o.tools._editMenu) {
                        var s = SM.env.loggedInUser,
                            i = !(!s || s.isParticipant);
                        o.tools._editMenu = new e.SM.Menus.ImageEdit({
                            canCollect: i
                        }), o.tools._editMenu.menu.render()
                    }
                    o.tools._editMenu.update(n.image, n.album, n.galleryAlbum, n.lightbox || !1), o.tools._editMenu.menu.show({
                        anchorPoint: t
                    })
                })
            }
        }
    }(), SM.currentModule = null
}, "", {
    requires: ["sm-image-buttons-deprecated-base"]
});
YUI.add("sm-image-buttons-deprecated", function(e) {
    SM.currentModule = "sm-image-buttons-deprecated";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: !0
        }), exports["default"] = SM["import"]("sm-image-buttons-deprecated-base"), module.exports = exports["default"]
    }(), SM.currentModule = null
}, "", {
    requires: ["sm", "sm-image-buttons-deprecated-base", "sm-image-buttons-deprecated-comment", "sm-image-buttons-deprecated-download", "sm-image-buttons-deprecated-favorite", "sm-image-buttons-deprecated-favorites", "sm-image-buttons-deprecated-info", "sm-image-buttons-deprecated-share", "sm-image-buttons-deprecated-sizes", "sm-image-buttons-deprecated-tools"]
});
YUI.add("sm-image-buttons-download", function(e) {
    SM.currentModule = "sm-image-buttons-download";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: !0
        });
        var e = SM["import"]("react"),
            o = SM["import"]("sm-component-button"),
            n = SM["import"]("sm-icon"),
            t = function(t) {
                var r = t.onClick;
                return e.createElement(o, {
                    onClick: r,
                    noChrome: !0,
                    size: "small",
                    title: "Download",
                    value: "download"
                }, e.createElement(n, {
                    name: "Download",
                    size: "small"
                }))
            },
            r = e.PropTypes;
        t.propTypes = {
            onClick: r.func
        }, t.defaultProps = {
            onClick: function() {}
        }, exports["default"] = t, module.exports = exports["default"]
    }(), SM.currentModule = null
}, "", {
    requires: ["sm", "sm-component-button", "sm-icon", "react"]
});
YUI.add("sm-image-buttons-info", function(e) {
    SM.currentModule = "sm-image-buttons-info";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: !0
        });
        var e = SM["import"]("react"),
            n = SM["import"]("sm-component-button"),
            o = SM["import"]("sm-icon"),
            t = function(t) {
                var r = t.onClick;
                return e.createElement(n, {
                    onClick: r,
                    noChrome: !0,
                    size: "small",
                    title: "Info",
                    value: "info"
                }, e.createElement(o, {
                    name: "InfoEncircled",
                    size: "small"
                }))
            },
            r = e.PropTypes;
        t.propTypes = {
            onClick: r.func
        }, t.defaultProps = {
            onClick: function() {}
        }, exports["default"] = t, module.exports = exports["default"]
    }(), SM.currentModule = null
}, "", {
    requires: ["sm", "sm-component-button", "sm-icon", "react"]
});
YUI.add("sm-image-buttons-share", function(e) {
    SM.currentModule = "sm-image-buttons-share";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: !0
        });
        var e = SM["import"]("react"),
            t = SM["import"]("sm-component-button"),
            n = SM["import"]("sm-icon"),
            o = function(o) {
                var r = o.onClick;
                return e.createElement(t, {
                    noChrome: !0,
                    size: "small",
                    onClick: r,
                    title: "Share",
                    value: "share"
                }, e.createElement(n, {
                    name: "Action",
                    size: "small"
                }))
            },
            r = e.PropTypes;
        o.propTypes = {
            onClick: r.func
        }, o.defaultProps = {
            onClick: function() {}
        }, exports["default"] = o, module.exports = exports["default"]
    }(), SM.currentModule = null
}, "", {
    requires: ["sm", "sm-component-button", "sm-component-icon", "react"]
});
YUI.add("sm-image-buttons-sizes", function(e) {
    SM.currentModule = "sm-image-buttons-sizes";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: !0
        });
        var e = SM["import"]("react"),
            m = (SM["import"]("sm-image-sizes"), SM["import"]("sm-component-button")),
            a = SM["import"]("sm-icon"),
            i = SM["import"]("sm-component-menu"),
            t = {
                ImageSizeTiny: {
                    niceName: "Tiny",
                    shortName: "Ti"
                },
                ImageSizeThumb: {
                    niceName: "Thumb",
                    shortName: "Th"
                },
                ImageSizeSmall: {
                    niceName: "Small",
                    shortName: "S"
                },
                ImageSizeMedium: {
                    niceName: "Medium",
                    shortName: "M"
                },
                ImageSizeLarge: {
                    niceName: "Large",
                    shortName: "L"
                },
                ImageSizeXLarge: {
                    niceName: "X-Large",
                    shortName: "XL"
                },
                ImageSizeX2Large: {
                    niceName: "X2-Large",
                    shortName: "X2"
                },
                ImageSizeX3Large: {
                    niceName: "X3-Large",
                    shortName: "X3"
                },
                ImageSizeOriginal: {
                    niceName: "Original",
                    shortName: "O"
                },
                ImageSizeA: {
                    niceName: "Fill",
                    shortName: "A"
                },
                VideoSize320: {
                    niceName: "320",
                    shortName: "320"
                },
                VideoSize640: {
                    niceName: "640",
                    shortName: "640"
                },
                VideoSize960: {
                    niceName: "960",
                    shortName: "960"
                },
                VideoSize1280: {
                    niceName: "1280",
                    shortName: "1280"
                },
                VideoSize1920: {
                    niceName: "1920",
                    shortName: "1920"
                }
            },
            n = function(n) {
                for (var s = n.sizes, o = n.onSizeSelect, r = [], c = 0; c < s.length; ++c) {
                    var l = s[c],
                        u = l.Name,
                        S = t[u];
                    S && "ImageSize110" !== u && "ImageSize200" !== u && r.push(e.createElement(i.Item, {
                        onClick: o,
                        key: "image-size-" + u,
                        "data-size": u
                    }, S.niceName))
                }
                return e.createElement("span", {
                    className: "sm-button-image-sizes-container"
                }, e.createElement(m, {
                    noChrome: !0,
                    size: "small",
                    onClick: function() {},
                    title: "Sizes",
                    value: "sizes",
                    className: "sm-button-image-sizes"
                }, e.createElement(a, {
                    name: "Sizes",
                    size: "small"
                })), e.createElement(i, null, r))
            },
            s = e.PropTypes;
        n.propTypes = {
            sizes: s.array,
            onSizeSelect: s.func
        }, n.defaultProps = {
            sizes: [],
            onSizeSelect: function() {}
        }, exports["default"] = n, module.exports = exports["default"]
    }(), SM.currentModule = null
}, "", {
    requires: ["sm", "sm-component-button", "sm-component-icon", "sm-component-menu", "sm-image-sizes", "react"]
});
YUI.add("sm-image-buttons-tools", function(e) {
    SM.currentModule = "sm-image-buttons-tools";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: !0
        });
        var e = SM["import"]("react"),
            o = SM["import"]("sm-component-button"),
            t = SM["import"]("sm-icon"),
            n = function(n) {
                var r = n.onClick;
                return e.createElement(o, {
                    onClick: r,
                    noChrome: !0,
                    size: "small",
                    title: "Tools",
                    value: "tools"
                }, e.createElement(t, {
                    name: "Wrench",
                    size: "small"
                }))
            },
            r = e.PropTypes;
        n.propTypes = {
            onClick: r.func
        }, n.defaultProps = {
            onClick: function() {}
        }, exports["default"] = n, module.exports = exports["default"]
    }(), SM.currentModule = null
}, "", {
    requires: ["sm", "sm-component-button", "sm-icon", "react"]
});
YUI.add("sm-image-buttons", function(e) {
    SM.currentModule = "sm-image-buttons";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: !0
        });
        var e = SM["import"]("react-redux"),
            t = e.connect,
            u = SM["import"]("sm-image-buttons-component-image-buttons");
        exports["default"] = t()(u), module.exports = exports["default"]
    }(), SM.currentModule = null
}, "", {
    requires: ["react", "sm", "sm-image-buttons-component-image-buttons"]
});
YUI.add("sm-image-model", function(e) {
    SM.currentModule = "sm-image-model";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        ! function() {
            "use strict";
            var t = {
                    O: {},
                    "5K": {
                        width: 5120,
                        height: 5120
                    },
                    "4K": {
                        width: 3840,
                        height: 3840
                    },
                    X5: {
                        width: 2560,
                        height: 2560
                    },
                    X4: {
                        width: 2048,
                        height: 2048
                    },
                    X3: {
                        width: 1600,
                        height: 1200
                    },
                    X2: {
                        width: 1280,
                        height: 960
                    },
                    XL: {
                        width: 1024,
                        height: 768
                    },
                    L: {
                        width: 800,
                        height: 600
                    },
                    M: {
                        width: 600,
                        height: 450
                    },
                    S: {
                        width: 400,
                        height: 300
                    },
                    Th: {
                        width: 150,
                        height: 150
                    },
                    Ti: {
                        width: 100,
                        height: 100
                    },
                    1920: {
                        width: 1920,
                        height: 1080
                    },
                    1280: {
                        width: 1280,
                        height: 720
                    },
                    960: {
                        width: 960,
                        height: 540
                    },
                    640: {
                        width: 640,
                        height: 480
                    },
                    320: {
                        width: 320,
                        height: 240
                    }
                },
                i = ["S", "320", "Th", "Ti"],
                a = ["O", "5K", "4K", "X5", "X4", "1920", "X3", "X2", "1280", "XL", "960", "L", "640", "M", "S", "320", "Th", "Ti"],
                l = ["O", "5K", "4K", "X5", "X4", "X3", "X2", "XL", "L", "M", "S", "Th", "Ti"],
                s = ["O", "1920", "1280", "960", "640", "320"],
                r = "#size#",
                n = {
                    Ti: "ImageSizeTiny",
                    Th: "ImageSizeThumb",
                    S: "ImageSizeSmall",
                    M: "ImageSizeMedium",
                    L: "ImageSizeLarge",
                    XL: "ImageSizeXLarge",
                    X2: "ImageSizeX2Large",
                    X3: "ImageSizeX3Large",
                    X4: "ImageSizeX4Large",
                    X5: "ImageSizeX5Large",
                    "4K": "ImageSize4K",
                    "5K": "ImageSize5K",
                    O: "ImageSizeOriginal"
                },
                o = e.Base.create("sm-image-model", e.Model, [e.SM.ModelSyncAPI, e.ModelRelate], {
                    idAttribute: "ImageID",
                    apiEndpoint: "image",
                    getUrlForSize: function(e) {
                        return o.getUrl(this, e)
                    },
                    getImageSize: function(e) {
                        return o.getUsableSize(this, e)
                    },
                    getLargestImageSize: function(e) {
                        return e = "undefined" != typeof e ? e : null, this._getLargestSize(e, !1)
                    },
                    getLargestVideoSize: function(e) {
                        return e = "undefined" != typeof e ? e : null, this._getLargestSize(e, !0)
                    },
                    getLargestImageSizeForContainer: function(e, t, i) {
                        return t = "undefined" != typeof t ? t : null, this._getLargestSizeForContainer(e, t, i, !1)
                    },
                    getLargestVideoSizeForContainer: function(e, t) {
                        return this.get("IsVideo") ? (t = "undefined" != typeof t ? t : null, this._getLargestSizeForContainer(e, t, "auto", !0)) : null
                    },
                    getTemplateConfigForSize: function(t) {
                        var i = ["sm-image"],
                            a = this.getImageSize(t);
                        return this.get("Status") === e.SM.Models.Image.STATUSES.PROCESS && i.push("sm-image-processing"), this.get("IsArchive") && i.push("sm-image-archive"), {
                            dataAttrs: {},
                            classNames: i,
                            url: this.getUrlForSize(t),
                            width: a.width,
                            height: a.height
                        }
                    },
                    _getLargestSize: function(e, t) {
                        var i;
                        return i = this.get("Status") === o.STATUSES.PROCESS ? o.PROCESSING_IMAGE_SIZES : this.get("Sizes"), o.getLargestSize(e, i, t)
                    },
                    _getLargestSizeForContainer: function(e, t, i, a) {
                        var r = this.get("Status") === o.STATUSES.PROCESS ? o.PROCESSING_IMAGE_SIZES : this.get("Sizes"),
                            n = null,
                            g = a ? s : l,
                            u = g.length - 1,
                            m = !1,
                            S = !1,
                            d = null,
                            h = 1;
                        if (i || (i = "auto"), ("number" != typeof t || 0 >= t) && (m = !0), !a && window.devicePixelRatio && window.devicePixelRatio > 1 && (h = window.devicePixelRatio, e *= h, t *= h), "auto" === i && (100 > e || 100 > t && !m)) return h > 1 ? "Th" : "Ti";
                        for (u; u >= 1; u--)
                            if (n = r[g[u]], n && n.usable && ("fit" === i ? (n.width >= e || !m && n.height >= t) && (d = g[u], S = !0) : "fill" === i ? (m && n.width >= e || n.width >= e && n.height >= t) && (d = g[u], S = !0) : (n.width > e || n.height > t && !m) && (d = g[u + 1], d && (S = !0)), S)) return this._getLargestSize(d, a);
                        return this._getLargestSize(d, a)
                    },
                    loadExif: function() {
                        var t = this,
                            i = this.get("exif");
                        return new e.Promise(function(a) {
                            if (i) a(i);
                            else {
                                var l = l || new e.SM.API;
                                l.sendRequest({
                                    method: "rpc.image.getinfo",
                                    data: {
                                        imageId: t.get("ImageID"),
                                        imageKey: t.get("ImageKey")
                                    },
                                    callback: {
                                        success: function(i) {
                                            var l = i.response,
                                                s = l.results,
                                                r = e.Lang.isUndefined(s.Exif) ? null : s.Exif;
                                            r && (t.set("exif", r), a(r))
                                        }
                                    },
                                    cfg: {
                                        method: "POST"
                                    }
                                })
                            }
                        })
                    },
                    toggleFavorite: function(t, i, a, l) {
                        var s = s || new e.SM.API,
                            r = this.get("IsFavorite");
                        this.set("IsFavorite", !r), s.sendRequest({
                            method: "rpc.image.update",
                            data: {
                                imageId: this.get("ImageID"),
                                imageKey: this.get("ImageKey"),
                                collectFromAlbumId: t,
                                collectFromAlbumKey: i,
                                collectToAlbumId: a,
                                collectToAlbumKey: l,
                                favorite: r,
                                action: "favorite"
                            },
                            freshRequest: !0,
                            callback: {
                                success: function(e) {},
                                context: this
                            },
                            cfg: {
                                method: "POST"
                            }
                        })
                    },
                    collect: function(t) {
                        if (t > 0) {
                            var i = i || new e.SM.API;
                            return i.sendRequest({
                                method: "rpc.image.update",
                                data: {
                                    imageId: this.get("ImageID"),
                                    imageKey: this.get("ImageKey"),
                                    collectToAlbumId: t,
                                    action: "collect"
                                },
                                freshRequest: !0,
                                callback: {
                                    success: function(e) {},
                                    context: this
                                },
                                cfg: {
                                    method: "POST"
                                }
                            })
                        }
                    },
                    preLoadForContainerSize: function(e, t) {
                        var i = this.getLargestImageSizeForContainer(e, t);
                        this.preLoadSize(i)
                    },
                    preLoadSize: function(e) {
                        var t = this.getUrlForSize(e),
                            i = new o;
                        i.src = t
                    },
                    like: function() {
                        var t = this;
                        return new e.Promise(function(i) {
                            t.get("Liked") ? i() : e.SM.Page.api.sendRequest({
                                method: "rpc.image.like",
                                data: {
                                    ImageID: t.get("ImageID"),
                                    ImageKey: t.get("ImageKey")
                                },
                                cfg: {
                                    method: "POST"
                                },
                                callback: {
                                    success: function(e) {
                                        t.set("Liked", !0), i()
                                    }
                                }
                            })
                        })
                    },
                    fakeImageSizeDetails: function() {
                        var e, t = this.get("Sizes"),
                            i = {
                                ImageUrlTemplate: this.getUrlForSize(r)
                            };
                        for (var a in t) e = n[a], e && t.hasOwnProperty(a) && t[a].usable && (i[e] = {
                            Width: t[a].width,
                            Height: t[a].height,
                            Url: this.getUrlForSize(a)
                        });
                        return i
                    }
                }, {
                    ATTRS: {
                        ImageID: {
                            value: null
                        },
                        ImageKey: {
                            value: null
                        },
                        Title: {
                            value: null
                        },
                        AlbumID: {
                            value: null
                        },
                        FileName: {
                            value: null
                        },
                        Keywords: {
                            value: null
                        },
                        Status: {
                            value: null
                        },
                        Format: {
                            value: null
                        },
                        IsProtected: {
                            value: !1
                        },
                        Serial: {
                            value: null
                        },
                        ShowFilename: {
                            value: null
                        },
                        SEOFilename: {
                            value: null
                        },
                        URLFilename: {
                            value: null
                        },
                        Origin: {
                            value: null
                        },
                        Latitude: {
                            value: null
                        },
                        Longitude: {
                            value: null
                        },
                        Sizes: {
                            getter: function(e) {
                                return this.get("Status") === o.STATUSES.PROCESS ? o.PROCESSING_IMAGE_SIZES : e
                            },
                            value: null
                        },
                        BaseUrl: {
                            value: null
                        },
                        IsFavorite: {
                            value: null
                        },
                        Archived: {
                            value: null
                        },
                        ArchiveUrl: {
                            value: null
                        },
                        IsVideo: {
                            value: null
                        },
                        IsVault: {
                            value: null
                        },
                        IsEZProject: {
                            value: null
                        },
                        Caption: {
                            value: null
                        },
                        CaptionRaw: {
                            value: null
                        },
                        CaptionText: {
                            value: null
                        },
                        CanBuy: {
                            value: null
                        },
                        CanDownload: {
                            value: null
                        },
                        NewKey: {
                            value: null
                        },
                        GalleryUrl: {
                            value: null
                        },
                        LightboxUrl: {
                            value: null
                        }
                    },
                    FORMATS: {
                        ARC: "arc",
                        GIF: "gif",
                        JPEG: "jpeg",
                        JPG: "jpg",
                        MP4: "mp4",
                        PNG: "png"
                    },
                    IMAGE_SIZES_SORTED: l,
                    PROCESSING_IMAGE_SIZES: {
                        Ti: {
                            width: 100,
                            height: 100,
                            usable: !0
                        },
                        Th: {
                            width: 150,
                            height: 150,
                            usable: !0
                        },
                        S: {
                            width: 300,
                            height: 300,
                            usable: !0
                        },
                        M: {
                            width: 450,
                            height: 450,
                            usable: !0
                        },
                        L: {
                            width: 600,
                            height: 600,
                            usable: !0
                        },
                        XL: {
                            width: 768,
                            height: 768,
                            usable: !0
                        },
                        X2: {
                            width: 960,
                            height: 960,
                            usable: !0
                        },
                        X3: {
                            width: 1200,
                            height: 1200,
                            usable: !0
                        }
                    },
                    PROCESSING_IMAGE_URL: "//cdn.smugmug.com/img/processing-NeXT-{size}.png",
                    RELATIONSHIPS: {
                        Album: {
                            key: "AlbumID",
                            relatedKey: "AlbumID",
                            relatedModel: "SM.Models.Album",
                            type: "toOne"
                        }
                    },
                    SIZES: t,
                    SIZES_SORTED: a,
                    STATUSES: {
                        OPEN: "Open",
                        PROCESS: "Preprocess",
                        HIDDEN: "Hidden"
                    },
                    newImageUrlFormat: "{base}i-{imageKey}/{serial}/{size}/{name}{fileNameSize}.{ext}",
                    oldImageUrlFormat: "{base}{name}/{imageId}_{imageKey}-{size}{serial}.{ext}",
                    getHighlightUrl: function(t, i) {
                        if (t._isYUIModel && (t = t.toJSON()), t.HLImageUrl && t.HLImageSize === i) return t.HLImageUrl;
                        if (!t.HLImageID || !t.HLImageKey) return null;
                        i || (i = "Th");
                        var a = t.Url;
                        return /\/$/.test(a) || (a += "/"), e.Lang.sub(o.newImageUrlFormat, {
                            base: a,
                            ext: "jpg",
                            fileNameSize: "O" === i ? "" : "-" + i,
                            imageId: t.HLImageID,
                            imageKey: t.HLImageKey,
                            name: "hl",
                            serial: "0",
                            size: i
                        })
                    },
                    getLargestStandardSize: function(e, i, a, r) {
                        var n, o;
                        if (i || 0 === i || (n = !0), window.devicePixelRatio && window.devicePixelRatio > 1 && (o = window.devicePixelRatio, e *= o, i *= o), 100 > e || 100 > i && !n) return o > 1 ? "Th" : "Ti";
                        for (var g, u, m = a ? s : l, S = m.length - 1; S > 0; S--)
                            if (u = t[m[S]], u.width > e || u.height > i && !n) {
                                g = r ? m[S] : m[S + 1];
                                break
                            }
                        return g || m[1]
                    },
                    getUrl: function(t, i) {
                        if (t._isYUIModel && (t = t.toJSON()), t.Status === o.STATUSES.PROCESS) return e.Lang.sub(o.PROCESSING_IMAGE_URL, {
                            size: o.PROCESSING_IMAGE_SIZES[i] ? i : "S"
                        });
                        i || (i = "S");
                        var a, l, s;
                        if (a = {
                                base: t.BaseUrl,
                                fileNameSize: "O" === i ? "" : "-" + i,
                                imageId: t.ImageId,
                                imageKey: t.ImageKey,
                                name: t.URLFilename,
                                size: i
                            }, !/^[0-9]+x[0-9]+$/.test(i) && i !== r && ("D" === i.charAt(i.length - 1) ? t.Format === o.FORMATS.MP4 ? (l = "320", a.fileNameSize = "D", a.size = o.getLargestSize(null, t.Sizes, !0) + "D") : l = "O" : l = i, s = o.getUsableSize(t, l), s.url && "D" !== a.fileNameSize)) return s.url;
                        var n = !!t.NewKey,
                            g = t.Serial,
                            u = o[n ? "newImageUrlFormat" : "oldImageUrlFormat"];
                        return n || (g = g > 0 ? "-" + g : ""), e.Lang.sub(u, e.merge(a, {
                            ext: s && s.ext || "jpg",
                            serial: g
                        }))
                    },
                    getUsableSize: function(e, t) {
                        var i, a = e._isYUIModel ? e.get("Status") : e.Status;
                        i = a === o.STATUSES.PROCESS ? o.PROCESSING_IMAGE_SIZES : e._isYUIModel ? e.get("Sizes") : e.Sizes;
                        var l = i[t];
                        return l && l.usable ? l : i.S
                    },
                    getLargestSize: function(t, a, r) {
                        var n = r === !0 ? "320" : "S",
                            o = 0,
                            g = r === !0 ? s : l,
                            u = g.length;
                        if (t = t || (r === !0 ? "1920" : "X3"), -1 !== e.Array.indexOf(i, t)) return t;
                        for (o = e.Array.indexOf(g, t), 0 > o && (o = 1), o; u > o; o++)
                            if (a[g[o]] && a[g[o]].usable) {
                                n = g[o];
                                break
                            }
                        return n
                    }
                });
            e.namespace("SM.Models").Image = o
        }(),
        function() {
            var t = e.Base.create("sm-galleryimage-model", e.SM.Models.Image, [], {
                idAttribute: "ImageKey",
                tileOffsets: {
                    value: null
                }
            }, {});
            e.namespace("SM.Models").GalleryImage = t
        }(),
        function() {
            var t = e.Base.create("sm-models-imagelist", e.ModelList, [e.SM.ModelListSyncAPI], {
                model: e.SM.Models.Image,
                initializer: function(e) {
                    this.publish("getPopularPhotos")
                },
                apiEndpoint: "images",
                apiCategories: {
                    popular: {
                        method: "popular"
                    },
                    recent: {
                        method: "recent"
                    }
                },
                preLoadSizeForContainerSize: function(e, t) {
                    this.each(function(i) {
                        i.preLoadForContainerSize(e, t)
                    })
                }
            }, {
                ATTRS: {}
            });
            e.namespace("SM.Models").ImageList = t
        }(),
        function() {
            var t = e.Base.create("sm-models-galleryimagelist", e.ModelList, [e.SM.ModelListSyncAPI], {
                model: e.SM.Models.GalleryImage,
                initializer: function(e) {
                    this.publish("getImages")
                },
                apiEndpoint: "gallery",
                resultLocator: "Images",
                apiCategories: {
                    album: {
                        method: "album",
                        expanded: {
                            Albums: "SM.Models.AlbumList",
                            Users: "SM.Models.UserList",
                            UserSettings: "SM.Models.UserSettingList"
                        }
                    },
                    buyitems: {
                        method: "buyitems"
                    },
                    date: {
                        method: "date",
                        expanded: {
                            Albums: "SM.Models.AlbumList",
                            Users: "SM.Models.UserList",
                            UserSettings: "SM.Models.UserSettingList"
                        }
                    },
                    keyword: {
                        method: "keyword",
                        expanded: {
                            Albums: "SM.Models.AlbumList",
                            Users: "SM.Models.UserList",
                            UserSettings: "SM.Models.UserSettingList"
                        }
                    },
                    popular: {
                        method: "popular",
                        expanded: {
                            Albums: "SM.Models.AlbumList",
                            Users: "SM.Models.UserList",
                            UserSettings: "SM.Models.UserSettingList"
                        }
                    },
                    timestampitems: {
                        method: "timestampitems"
                    }
                },
                preLoadSizeForContainerSize: function(e, t) {
                    this.each(function(i) {
                        i.preLoadForContainerSize(e, t)
                    })
                }
            }, {
                ATTRS: {}
            });
            e.namespace("SM.Models").GalleryImageList = t
        }(),
        function() {
            var t = e.Base.create("sm-models-lazygalleryimagelist", e.LazyModelList, [e.SM.ModelListSyncAPI], {
                model: e.SM.Models.Image,
                initializer: function(e) {
                    this.publish("getImages")
                },
                apiEndpoint: "gallery",
                resultLocator: "Images",
                apiCategories: {
                    album: {
                        method: "album"
                    },
                    buyitems: {
                        method: "buyitems"
                    },
                    date: {
                        method: "date"
                    },
                    keyword: {
                        method: "keyword"
                    },
                    popular: {
                        method: "popular"
                    },
                    timestampitems: {
                        method: "timestampitems"
                    }
                },
                preLoadSizeForContainerSize: function(e, t) {
                    this.each(function(i) {
                        i.preLoadForContainerSize(e, t)
                    })
                }
            }, {
                ATTRS: {}
            });
            e.namespace("SM.Models").LazyGalleryImageList = t
        }()
    }(), SM.currentModule = null
}, "", {
    requires: ["base", "lazy-model-list", "model", "model-list", "model-relate", "promise", "sm-api", "sm-model-list-sync-api", "sm-model-sync-api", "sm-user-model", "sm-usersetting-model"]
});
YUI.add("sm-image-performance-logger", function(e) {
    SM.currentModule = "sm-image-performance-logger";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        ! function() {
            function e(e) {
                var r = {};
                for (var a in e) {
                    var n = e[a],
                        o = n.reduce(function(e, r) {
                            return e + r
                        }),
                        t = o / n.length,
                        s = Math.max.apply(Math, babelHelpers.toConsumableArray(n)),
                        m = Math.min.apply(Math, babelHelpers.toConsumableArray(n));
                    t > 0 && (r[a + "-avg"] = t), m > 0 && (r[a + "-min"] = m), s > 0 && (r[a + "-max"] = s)
                }
                return r
            }

            function r(e) {
                var r = e.match(s);
                if (r) {
                    var a = babelHelpers.slicedToArray(r, 2),
                        n = a[1];
                    l[n] ? l[n] += 1 : l[n] = 1;
                    var t = o.win.performance.getEntriesByName(e)[0];
                    if (t) {
                        var c = t.duration;
                        m[n] ? m[n].push(c) : m[n] = [c];
                        var u = t.responseStart - t.requestStart;
                        i[n] ? i[n].push(u) : i[n] = [u]
                    }
                }
            }

            function a() {
                var r = e(m),
                    a = e(i);
                n.add("sm-image-performance-logger", babelHelpers["extends"]({
                    method: "loadData",
                    location: location.href
                }, r), n.LEVEL_NOTICE), n.add("sm-image-performance-logger", babelHelpers["extends"]({
                    method: "reqData",
                    location: location.href
                }, a), n.LEVEL_NOTICE)
            }
            var n = SM["import"]("sm-smuglog"),
                o = SM["import"]("sm-dom"),
                t = o.doc.getElementsByClassName("sm-image"),
                s = /\/i-[a-zA-Z0-9]{7}\/.+\/(.+)\//,
                m = {},
                i = {},
                l = {},
                c = !1,
                u = function() {
                    var e = {},
                        n = [];
                    if (!c && (c = !0, o.win.performance && o.win.performance.getEntriesByName)) {
                        for (var s = function(a) {
                                var o = a.src;
                                return e[o] ? "continue" : (e[o] = !0, void(a.complete ? r(a.src) : n.push(new Promise(function(e) {
                                    a.addEventListener("load", function() {
                                        r(a.src), e()
                                    }), a.addEventListener("error", e)
                                }))))
                            }, m = [].concat(babelHelpers.toConsumableArray(t)), i = 0; i < m.length; i++) {
                            var l = m[i];
                            s(l)
                        }
                        Promise.all(n).then(a)
                    }
                };
            module.exports = exports = u
        }()
    }(), SM.currentModule = null
}, "", {
    requires: ["sm", "sm-dom", "sm-smuglog"]
});
YUI.add("sm-image-preloader", function(e) {
    SM.currentModule = "sm-image-preloader";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";

        function e(r) {
            var o = r.target;
            "error" === r.type && (s.error(a, {
                message: "Error preloading image.",
                imageUrl: o.src
            }), u[o.src] = !1), o.removeEventListener("error", e), o.removeEventListener("load", e), t()
        }

        function r() {
            d = clearTimeout(d);
            var t = c.shift();
            t && t().then(function(t) {
                if (u[t]) return void r();
                u[t] = !0;
                var n = o.doc.createElement("img");
                n.addEventListener("error", e), n.addEventListener("load", e), n.src = t
            })["catch"](function(e) {
                s.error(a, {
                    message: "Image preload function resulted in an error.",
                    error: e
                })
            })
        }

        function t() {
            d || (d = setTimeout(r, i))
        }
        var o = SM["import"]("sm-dom"),
            n = SM["import"]("sm-resource-core"),
            s = SM["import"]("sm-smuglog"),
            a = "sm-image-preloader",
            i = 20,
            u = Object.create(null),
            m = Object.create(null),
            c = [],
            l = module.exports = {
                add: function() {
                    if (!l._disabled) {
                        for (var e = arguments.length, r = Array(e), o = 0; e > o; o++) r[o] = arguments[o];
                        var n = r.filter(function(e) {
                            return e && !("string" == typeof e && u[e])
                        }).map(function(e) {
                            return "string" == typeof e ? function() {
                                return Promise.resolve(e)
                            } : e
                        });
                        n.length && (c.unshift.apply(c, babelHelpers.toConsumableArray(n)), t())
                    }
                },
                prefetch: function(e) {
                    var r = [];
                    return e.forEach(function(e) {
                        m[e] || (r.push(e), m[e] = !0)
                    }), r.length ? n.postUri("/api/v2!prefetch", {
                        data: {
                            ImageUrls: r
                        },
                        io: {
                            query: ["_prefetchImages=only", "_verbosity=1"],
                            verbose: !1
                        }
                    }) : Promise.resolve()
                }
            },
            d = void 0
    }(), SM.currentModule = null
}, "", {
    requires: ["sm", "sm-dom", "sm-resource-core", "sm-smuglog"]
});
YUI.add("sm-image-sizes", function(e) {
    SM.currentModule = "sm-image-sizes";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        var e = SM["import"]("sm-dom"),
            t = SM["import"]("sm-deep-freeze"),
            i = function() {
                function e(t) {
                    var i = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
                    babelHelpers.classCallCheck(this, e), t.isSmugMugResource ? this._imageSizeDetails = t.get() : this._imageSizeDetails = t, this._cache = {}, this._pixelRatio = i.pixelRatio || e.DEVICE_PIXEL_RATIO
                }
                return babelHelpers.createClass(e, [{
                    key: "canGenerateCustomSize",
                    value: function() {
                        var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
                        if (t.type && t.type !== e.TYPE_PHOTO) return !1;
                        var i = this._cache.canGenerateCustomSize;
                        if (void 0 === i) {
                            var a = this._imageSizeDetails.ImageUrlTemplate;
                            this._cache.canGenerateCustomSize = i = !(!a || a.toLowerCase().endsWith(".gif"))
                        }
                        return i
                    }
                }, {
                    key: "containWithin",
                    value: function(t, i) {
                        var a = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {};
                        a = Object.assign({
                            allowCustomSize: !0,
                            allowPixelRatioOverride: !1,
                            type: e.TYPE_PHOTO
                        }, a);
                        var s = this.getSortedSizes(a);
                        if (!s.length) return null;
                        var r = s[s.length - 1],
                            n = a.allowCustomSize && this.canGenerateCustomSize(a),
                            h = a.allowSquareSize || i === t || r.Height === r.Width;
                        i = Math.min(e.MAX_SIZE, i), t = Math.min(e.MAX_SIZE, t), i *= this._pixelRatio, t *= this._pixelRatio;
                        var l = s.find(function(e) {
                            return "ImageSizeOriginal" === e.Name && n ? !1 : e.Height !== e.Width || h ? e.Height >= i || e.Width >= t : !1
                        });
                        if (n && (!l || l.Width < t && l.Height < i) && (r.Height >= i || r.Width >= t)) {
                            var g = e.scaleDown(r.Width, r.Height, t, i);
                            return this.getCustomSize(g.width, g.height)
                        }
                        var u = this._pixelRatio;
                        l || (l = s[s.length - 1], u > 1 && a.allowPixelRatioOverride && l.Width <= t && l.Height <= i && (t /= this._pixelRatio, i /= this._pixelRatio, u = 1));
                        var o = e.scaleDown(l.Width, l.Height, t, i);
                        return e.applyPixelRatio(Object.assign({}, l, {
                            DisplayHeight: o.height,
                            DisplayWidth: o.width,
                            PixelRatio: 1
                        }), u)
                    }
                }, {
                    key: "cover",
                    value: function(t, i) {
                        var a = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {};
                        a = Object.assign({
                            allowCustomSize: !0,
                            allowPixelRatioOverride: !1,
                            type: e.TYPE_PHOTO
                        }, a);
                        var s = this.getSortedSizes(a);
                        if (!s.length) return null;
                        var r = s[s.length - 1],
                            n = a.allowCustomSize && this.canGenerateCustomSize(a),
                            h = a.allowSquareSize || i === t || r.Height === r.Width;
                        i = Math.min(e.MAX_SIZE, i), t = Math.min(e.MAX_SIZE, t), i *= this._pixelRatio, t *= this._pixelRatio;
                        var l = s.find(function(e) {
                            return "ImageSizeOriginal" === e.Name && n ? !1 : e.Height !== e.Width || h ? e.Height >= i && e.Width >= t : !1
                        });
                        if (!l && n && r.Height >= i && r.Width >= t) {
                            var g = e.scaleDown(r.Width, r.Height, t, i, {
                                cover: !0
                            });
                            return this.getCustomSize(g.width, g.height)
                        }
                        var u = this._pixelRatio;
                        l || (l = r, u > 1 && a.allowPixelRatioOverride && l.Width <= t && l.Height <= i && (t /= this._pixelRatio, i /= this._pixelRatio, u = 1));
                        var o = e.scaleDown(l.Width, l.Height, t, i, {
                            cover: !0
                        });
                        return e.applyPixelRatio(Object.assign({}, l, {
                            DisplayHeight: o.height,
                            DisplayWidth: o.width,
                            PixelRatio: 1
                        }), u)
                    }
                }, {
                    key: "getAspectRatio",
                    value: function() {
                        var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
                            t = this.getLargestSize(e);
                        return t ? t.Width / t.Height : null
                    }
                }, {
                    key: "getCustomSize",
                    value: function(t, i) {
                        return this.canGenerateCustomSize() && isFinite(t) && isFinite(i) ? e.applyPixelRatio(Object.assign({}, this.getLargestSize(), {
                            DisplayHeight: i,
                            DisplayWidth: t,
                            Height: i,
                            Name: "ImageSizeCustom",
                            PixelRatio: 1,
                            Size: 0,
                            Width: t,
                            Url: this._imageSizeDetails.ImageUrlTemplate.replace(/#size#/g, t + "x" + i)
                        }), this._pixelRatio) : null
                    }
                }, {
                    key: "getLargestSize",
                    value: function() {
                        var i = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
                            a = this._cache.getLargestSize || (this._cache.getLargestSize = {}),
                            s = i.type || e.TYPE_PHOTO;
                        if (void 0 === a[s]) {
                            var r = this._getLargestSize(i);
                            a[s] = r && t(r)
                        }
                        return a[s]
                    }
                }, {
                    key: "getSizes",
                    value: function() {
                        var i = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
                            a = this._cache.getSizes || (this._cache.getSizes = {}),
                            s = i.type || e.TYPE_PHOTO;
                        return a[s] || (a[s] = t(this._getSizes(i))), a[s]
                    }
                }, {
                    key: "getSortedSizes",
                    value: function() {
                        var i = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
                            a = this._cache.getSortedSizes || (this._cache.getSortedSizes = {}),
                            s = i.type || e.TYPE_PHOTO;
                        return a[s] || (a[s] = t(this._getSortedSizes(i))), a[s]
                    }
                }, {
                    key: "_getLargestSize",
                    value: function() {
                        var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
                            i = this.getSizes(t);
                        if (!i.length) return null;
                        var a = i.reduce(function(e, t) {
                            return e ? t.Width * t.Height > e.Width * e.Height ? t : e : t
                        });
                        return a ? e.applyPixelRatio(a, this._pixelRatio) : null
                    }
                }, {
                    key: "_getSizes",
                    value: function() {
                        var t = this,
                            i = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
                            a = this._imageSizeDetails,
                            s = [],
                            r = i.type || e.TYPE_PHOTO;
                        return a.UsableSizes.forEach(function(i) {
                            i.startsWith(r) && s.push(e.applyPixelRatio(Object.assign({
                                Name: i
                            }, a[i]), t._pixelRatio))
                        }), s
                    }
                }, {
                    key: "_getSortedSizes",
                    value: function() {
                        var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
                            t = this.getSizes(e).concat();
                        return t.sort(function(e, t) {
                            return e.Width * e.Height - t.Width * t.Height
                        }), t
                    }
                }], [{
                    key: "applyPixelRatio",
                    value: function(t) {
                        var i = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : e.DEVICE_PIXEL_RATIO,
                            a = 1,
                            s = t.Height,
                            r = t.Width;
                        return t.DisplayHeight && t.DisplayWidth && (a = t.PixelRatio || 1, s = t.DisplayHeight, r = t.DisplayWidth), Object.assign({}, t, {
                            DisplayHeight: Math.floor(s * a / i),
                            DisplayWidth: Math.floor(r * a / i),
                            PixelRatio: i
                        })
                    }
                }, {
                    key: "scaleDown",
                    value: function(t, i, a, s) {
                        var r = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : {};
                        i = Math.min(e.MAX_SIZE, i), t = Math.min(e.MAX_SIZE, t), s = Math.min(s, i), a = Math.min(a, t);
                        var n = Math[r && r.cover ? "max" : "min"](a / t, s / i);
                        return {
                            height: Math.floor(i * n),
                            width: Math.floor(t * n)
                        }
                    }
                }]), e
            }();
        i.DEVICE_PIXEL_RATIO = e.win.devicePixelRatio || 1, i.MAX_SIZE = 99999, i.TYPE_PHOTO = "ImageSize", i.TYPE_VIDEO = "VideoSize", module.exports = i
    }(), SM.currentModule = null
}, "", {
    requires: ["sm-deep-freeze", "sm-dom", "sm"]
});
YUI.add("sm-image-template", function(a) {
    SM.currentModule = "sm-image-template";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        var t = a.Template.Micro,
            e = /[^a-zA-Z0-9\-]/g,
            i = t.compile('data-<%= data.name %>="<%= data.value %>"'),
            l = t.compile('<div role="img" <%== data._attrs %> style="background-image:url(<%= data.url %>);"></div>'),
            d = t.compile('<img itemprop="image" src="<%= data.url %>" <%== data._attrs %> alt="<%= data.alt %>" title="<%= data.title %>">'),
            s = t.compile('<% if (data.id) { %>id="<%= data.id %>" <% } %><% if (data.classNames) { %>class="<%= data.classNames %>" <% } %><% if (!isNaN(+data.width)) { %>width="<%= data.width %>" <% } %><% if (!isNaN(+data.height)) { %>height="<%= data.height %>" <% } %><% if (data.style) { %>style="<%= data.style %>" <% } %>');
        a.namespace("SM.Templates").image = function(t) {
            var r, m, u = t.classNames || [],
                c = [],
                n = t.dataAttrs || {};
            return m = s({
                classNames: u.join(" "),
                id: t.id,
                width: t.width,
                height: t.height,
                style: t.style
            }), a.Object.each(n, function(a, t) {
                c.push(i({
                    name: t.replace(e, ""),
                    value: a
                }))
            }), (r = t.useBackground ? l : d)({
                _attrs: m + c.join(" "),
                alt: t.alt,
                title: t.title,
                url: t.url
            })
        }
    }(), SM.currentModule = null
}, "", {
    requires: ["template", "template-micro"]
});
YUI.add("sm-imageinfo-view", function(e) {
    SM.currentModule = "sm-imageinfo-view";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        e.Lang;
        e.namespace("SM.Views.ImageInfo").Exif = e.Base.create("sm-imageinfo-exif", e.View, [], {
            panelTemplate: '<table cellspacing="4" cellpadding="4" border="0"><% for (var i=0; i < data.basic.length; i++) { %><% if (data.basic[i].value) { %><tr><td class="sm-text-mini sm-imageinfo-label"><%= data.basic[i].label %></td> <td class="sm-text-mini sm-imageinfo-value sm-emphasized"> <%= data.basic[i].value %></td></tr><% } %><% } %><tr class="sm-imageinfo-spacer"><td>&nbsp;</td><td></td></tr><% for (var i=0; i < data.detailed.length; i++) { %><% if (data.detailed[i].value) { %><tr><td class="sm-text-mini sm-imageinfo-label"><%= data.detailed[i].label %></td> <td class="sm-text-mini sm-imageinfo-value"> <%= data.detailed[i].value %></td></tr><% } %><% } %></table>',
            initializer: function() {
                this.compiledPanelTemplate = e.Template.Micro.compile(this.panelTemplate)
            },
            render: function() {
                var e = this,
                    a = this.get("image"),
                    i = a.loadExif();
                i.then(function(a) {
                    e._renderExif(a)
                })
            },
            _renderExif: function(a) {
                var i = this.get("container"),
                    t = a.basic,
                    l = a.detailed,
                    n = {
                        camera: "",
                        basic: [],
                        detailed: []
                    };
                n.basic = [{
                    label: "Camera",
                    value: t.Camera ? t.Camera.friendlyValue : ""
                }, {
                    label: "ISO",
                    value: t.ISO ? t.ISO.friendlyValue : ""
                }, {
                    label: "Focal Length",
                    value: t.FocalLength ? t.FocalLength.friendlyValue : ""
                }, {
                    label: "Aperture",
                    value: t.Aperture ? t.Aperture.friendlyValue : ""
                }, {
                    label: "Exposure Time",
                    value: t.ExposureTime ? t.ExposureTime.friendlyValue : ""
                }, {
                    label: "Name",
                    value: t.fileName.friendlyValue
                }, {
                    label: "Size",
                    value: t.originalSize.friendlyValue
                }, {
                    label: "Date Taken",
                    value: t.DateTimeOriginal ? t.DateTimeOriginal.friendlyValue : ""
                }, {
                    label: "Date Modified",
                    value: t.DateTime ? t.DateTime.friendlyValue : ""
                }], e.Object.each(t, function(e, a) {
                    "Camera" !== a && "ISO" !== a && "FocalLength" !== a && "Aperture" !== a && "ExposureTime" !== a && "fileName" !== a && "originalSize" !== a && "DateTimeOriginal" !== a && "DateTime" !== a && n.detailed.push({
                        label: e.friendlyName,
                        value: e.friendlyValue
                    })
                }), e.Object.each(l, function(e) {
                    n.detailed.push({
                        label: e.friendlyName,
                        value: e.friendlyValue
                    })
                }), i.setHTML(this.compiledPanelTemplate(n))
            }
        }, {
            ATTRS: {
                image: {
                    value: null
                }
            }
        });
        var a = e.Base.create("sm-imageinfo-map", e.View, [], {
            destructor: function() {
                this.marker = null, this.mapInstance.destroy(), this.mapInstance = null
            },
            createMap: function() {
                var a = this;
                e.use(["sm-map"], function() {
                    a.mapInstance = new e.SM.Map({
                        container: a.get("container"),
                        minZoom: 1,
                        satellite: !1,
                        clusters: !1
                    }).render(), a.setImage(a.get("image"))
                })
            },
            setImage: function(e) {
                var a = this.get("container");
                this.marker && this.mapInstance.map.removeLayer(this.marker), !e.get("CanMap") || 0 == e.get("Latitude") && 0 == e.get("Longitude") ? a.hide() : (this.marker = this.mapInstance.addImageMarker(e), this.mapInstance.map.setView(this.marker.getLatLng(), 15), a.show())
            },
            render: function() {
                this.mapInstance ? this.setImage(this.get("image")) : this.createMap()
            }
        }, {
            ATTRS: {
                image: {}
            }
        });
        e.namespace("SM.Views.ImageInfo").Map = a
    }(), SM.currentModule = null
}, "", {
    requires: ["base", "template", "template-micro"]
});
YUI.add("sm-imagesize-menu", function(e) {
    SM.currentModule = "sm-imagesize-menu";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        "use strict";

        function i(i) {
            this.menu = new e.SM.Menu({
                items: [{
                    label: "Small",
                    data: "S",
                    id: "ImageSizeS"
                }, {
                    label: "0.3Mpix (M)",
                    data: "M",
                    id: "ImageSizeM"
                }, {
                    label: "0.5Mpix (L)",
                    data: "L",
                    id: "ImageSizeL"
                }, {
                    label: "0.7Mpix (XL)",
                    data: "XL",
                    id: "ImageSizeXL"
                }, {
                    label: "1.2Mpix (X2)",
                    data: "X2",
                    id: "ImageSizeX2"
                }, {
                    label: "LowRes 2Mpix (X3)",
                    data: "X3",
                    id: "ImageSizeX3"
                }, {
                    label: "iPad Retina (X4)",
                    data: "X4",
                    id: "ImageSizeX4"
                }, {
                    label: "iPhone 6+ (X5)",
                    data: "X5",
                    id: "ImageSizeX5"
                }, {
                    label: "TV & Computer (4K)",
                    data: "4K",
                    id: "ImageSize4K"
                }, {
                    label: "Super High Res (5K)",
                    data: "5K",
                    id: "ImageSize5K"
                }, {
                    label: "Original",
                    data: "O",
                    id: "ImageSizeO"
                }, {
                    label: "320",
                    data: "320",
                    id: "ImageSize320"
                }, {
                    label: "640",
                    data: "640",
                    id: "ImageSize640"
                }, {
                    label: "960",
                    data: "960",
                    id: "ImageSize960"
                }, {
                    label: "1280",
                    data: "1280",
                    id: "ImageSize1280"
                }, {
                    label: "1920",
                    data: "1920",
                    id: "ImageSize1920"
                }, {
                    label: "Fill",
                    data: "A",
                    id: "ImageSizeA"
                }]
            }), this.menu.on("itemClick", this._handleMenuClick, this)
        }
        var a = SM["import"]("sm-redux-store"),
            d = SM["import"]("sm-lightbox-actions"),
            t = d.setOverrideDimensions,
            g = {
                O: {},
                "5K": 5120,
                "4K": 3840,
                X5: 2560,
                X4: 2048,
                X3: 1600,
                X2: 1280,
                XL: 1024,
                L: 800,
                M: 600,
                S: 400,
                Th: 150,
                Ti: 100,
                1920: 1920,
                1280: 1280,
                960: 960,
                640: 640,
                320: 320
            };
        i.prototype = {
            destroy: function() {
                this.menu.destroy({
                    remove: !0
                })
            },
            update: function(i, a) {
                var d, t = this.menu,
                    g = null,
                    s = this.image,
                    m = !s || s.get("ImageID") !== i.get("ImageID");
                if (m) {
                    i.get("Format") === e.SM.Models.Image.FORMATS.MP4 ? (t.getNodeById("ImageSizeS").hide(), t.getNodeById("ImageSizeM").hide(), t.getNodeById("ImageSizeL").hide(), t.getNodeById("ImageSizeXL").hide(), t.getNodeById("ImageSizeX2").hide(), t.getNodeById("ImageSizeX3").hide(), t.getNodeById("ImageSizeX4").hide(), t.getNodeById("ImageSizeX5").hide(), t.getNodeById("ImageSize4K").hide(), t.getNodeById("ImageSize5K").hide(), t.getNodeById("ImageSizeO").hide(), t.getNodeById("ImageSize320").show(), t.getNodeById("ImageSize640").show(), t.getNodeById("ImageSize960").show(), t.getNodeById("ImageSize1280").show(), t.getNodeById("ImageSize1920").show()) : (t.getNodeById("ImageSizeS").show(), t.getNodeById("ImageSizeM").show(), t.getNodeById("ImageSizeL").show(), t.getNodeById("ImageSizeXL").show(), t.getNodeById("ImageSizeX2").show(), t.getNodeById("ImageSizeX3").show(), t.getNodeById("ImageSizeX4").show(), t.getNodeById("ImageSizeX5").show(), t.getNodeById("ImageSize4K").show(), t.getNodeById("ImageSize5K").show(), t.getNodeById("ImageSizeO").show(), t.getNodeById("ImageSize320").hide(), t.getNodeById("ImageSize640").hide(), t.getNodeById("ImageSize960").hide(), t.getNodeById("ImageSize1280").hide(), t.getNodeById("ImageSize1920").hide());
                    for (d in i.get("Sizes"))
                        if (d && (g = i.get("Sizes")[d], g.usable !== !0)) {
                            var o = t.getNodeById("ImageSize" + d);
                            o && o.hide()
                        }
                    this.image = i
                }
            },
            setLabel: function(e) {
                this.node.setContent('<span class="sm-fonticon sm-fonticon-small sm-fonticon-ScreenExpand3"></span>&nbsp;&nbsp;' + e)
            },
            setSize: function(i) {
                switch (i) {
                    case "110":
                    case "200":
                        break;
                    case "S":
                    case "M":
                    case "L":
                    case "XL":
                    case "X2":
                    case "X3":
                    case "X4":
                    case "X5":
                    case "4K":
                    case "5K":
                    case "O":
                    case "320":
                    case "640":
                    case "960":
                    case "1280":
                    case "1920":
                        this.menu.getNodeById("ImageSize" + i).isHidden() || (this.imageSize = i);
                        break;
                    case "A":
                        this.imageSize = i
                }
                if (e.fire("imageSizeMenu:imageSizeChange", {
                        size: this.imageSize
                    }), this.image)
                    if ("A" !== this.imageSize && g[this.imageSize]) {
                        var d = g[this.imageSize];
                        a.dispatch(t(d, d))
                    } else a.dispatch(t(!1, !1))
            },
            _handleMenuClick: function(i) {
                var a = i.item.data;
                e.Lang.isNull(a) === !1 && a.length > 0 && this.setSize(a)
            }
        }, e.namespace("SM.Menus").ImageSize = i
    }(), SM.currentModule = null
}, "", {
    requires: ["sm-menu", "sm-lightbox-actions", "sm-redux-store"]
});
YUI.add("sm-imagesrcconfig", function(e) {
    SM.currentModule = "sm-imagesrcconfig";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        var i = SM["import"]("sm-dom"),
            t = SM["import"]("sm-smuglog"),
            r = /^[1-9]\d*x[1-9]\d*$/,
            a = ["ImageSizeTiny", "ImageSizeThumb", "ImageSizeSmall", "ImageSizeMedium", "ImageSizeLarge", "ImageSizeXLarge", "ImageSizeX2Large", "ImageSizeX3Large", "ImageSizeX4Large", "ImageSizeX5Large", "ImageSize4K", "ImageSize5K"],
            n = {
                Ti: "ImageSizeTiny",
                Th: "ImageSizeThumb",
                S: "ImageSizeSmall",
                M: "ImageSizeMedium",
                L: "ImageSizeLarge",
                XL: "ImageSizeXLarge",
                X2: "ImageSizeX2Large",
                X3: "ImageSizeX3Large",
                X4: "ImageSizeX4Large",
                X5: "ImageSizeX5Large",
                "4K": "ImageSize4K",
                "5K": "ImageSize5K"
            },
            g = /#size#/g,
            o = {
                aspectRatio: {
                    "1x1": 1,
                    "4x3": 4 / 3,
                    "3x4": .75,
                    "3x2": 1.5,
                    "2x3": 2 / 3,
                    "3x1": 3,
                    "1x3": 1 / 3,
                    "5x1": 5
                },
                coverDimensions: function(e, i, r) {
                    e || (e = {});
                    var a = e.width,
                        n = e.height;
                    if (!a || !n) return t.console("ImageSrcConfig", "The first parameter of the `coverDimensions` method must be an object containing `width` and `height` properties.", t.LEVEL_WARNING), null;
                    i && isFinite(i) || (i = 0), r && isFinite(r) || (r = 0);
                    var g = Math.max(i / a, r / n);
                    return {
                        height: Math.round(n * g),
                        width: Math.round(a * g)
                    }
                },
                fitInDimensions: function(e, i, r) {
                    e || (e = {});
                    var a = e.width,
                        n = e.height;
                    if (!a || !n) return t.console("ImageSrcConfig", "The first parameter of the `fitInDimensions` method must be an object containing `width` and `height` properties.", t.LEVEL_WARNING), null;
                    (!i || i > a) && (i = a), (!r || r > n) && (r = n);
                    var g = Math.min(i / a, r / n);
                    return {
                        height: Math.round(n * g),
                        width: Math.round(a * g)
                    }
                },
                get: function(e) {
                    e || (e = {});
                    var i, a = e.sources;
                    if (!(a || e.size && e.shortSize && e.minWidth)) return t.console("ImageSrcConfig", "The `get` method requires an object containing `sources` and one of `size`, `shortSize` or `minWidth`.", t.LEVEL_WARNING), null;
                    if (e.size ? i = o._getAvailableSize(e) : e.shortSize ? (e.size = n[e.shortSize], i = o._getAvailableSize(e)) : e.minWidth && (i = e.coverAspectRatio ? o._getAspectRatioSize(e) : o._getClosestSize(e)), a[i]) {
                        var m = a[i];
                        if (m) return {
                            width: m.Width,
                            height: m.Height,
                            url: m.Url,
                            size: i,
                            sizeDetails: m
                        }
                    } else if (a.ImageUrlTemplate && r.test(i)) {
                        var s = i.split("x");
                        return {
                            width: parseInt(s[0], 10),
                            height: parseInt(s[1], 10),
                            url: a.ImageUrlTemplate.replace(g, i),
                            size: "ImageSizeCustom"
                        }
                    }
                    return null
                },
                _getAspectRatioSize: function(i) {
                    var r = i.coverAspectRatio;
                    return "string" == typeof r && (r = o.aspectRatio[r]), r ? o._getClosestSize(e.merge(i, {
                        largerThanBoth: !0,
                        minHeight: i.minWidth / r
                    })) : (t.console("ImageSrcConfig", "The `coverAspectRatio` property must be a number or one of: '" + Object.keys(o.aspectRatio).join("', '") + "'.", t.LEVEL_WARNING), null)
                },
                _getAvailableSize: function(e) {
                    var i = e.size,
                        t = e.sources;
                    if (i && t) {
                        if (t[i]) return i;
                        for (var r = a.indexOf(i), n = r; n > -1; --n)
                            if (i = a[n], t[i]) return i
                    }
                    return null
                },
                _getClosestSize: function(e) {
                    var t, r, n = e.sources,
                        g = e.minWidth,
                        m = e.minHeight || 1 / 0,
                        s = isFinite(m) && e.largerThanBoth,
                        h = e.pixelRatio || i.win.devicePixelRatio || 1;
                    h > 1 && (g *= h, m *= h);
                    for (var u, l = 0; u = a[l]; l++)
                        if (r = n[u], r && (t = u, s && r.Height >= m && r.Width >= g || !s && (r.Height >= m || r.Width >= g))) return u;
                    if (n.ImageSizeOriginal) {
                        r = n.ImageSizeOriginal;
                        var S = o.coverDimensions({
                            width: r.Width,
                            height: r.Height
                        }, g, m);
                        if (s && (r.Height <= S.height || r.Width <= S.width) || !s && r.Height <= S.height && r.Width <= S.width) return "ImageSizeOriginal";
                        if (n.ImageUrlTemplate) return S.width + "x" + S.height
                    }
                    return t || null
                }
            };
        e.namespace("SM").ImageSrcConfig = o, module.exports = o
    }(), SM.currentModule = null
}, "", {
    requires: ["sm", "sm-dom", "sm-smuglog"]
});
YUI.add("sm-io-core", function(n) {
    SM.currentModule = "sm-io-core";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";

        function e(r, t) {
            function o(e, r, t) {
                return function() {
                    e.apply(r, t ? n.Array(arguments, 0, !0).concat(t) : arguments)
                }
            }
            var s, i, u, a, c, f, d;
            if ("string" == typeof r && (t && "object" === ("undefined" == typeof t ? "undefined" : babelHelpers["typeof"](t)) ? (t = n.merge(t), t.url = r, r = t) : r = {
                    url: r
                }), s = e.Transaction[r.type || e._defaultType] || e.Transaction._missing, i = new s(r), r.on && i.on) {
                u = r.on, f = u.context || u.thisObj, d = u.args || u.arguments;
                for (a in u)
                    if (u.hasOwnProperty(a)) {
                        if (c = u[a], f || d) switch (a) {
                            case "context":
                            case "thisObj":
                            case "args":
                            case "arguments":
                                continue;
                            default:
                                c = o(c, f, d)
                        }
                        i.on(a, c)
                    }
            }
            return i
        }
        e._defaultType = "xhr", e.Transaction = {
            _missing: function(r) {
                return new n.Promise(function(n, t) {
                    var o = r.transport && e[r.transport];
                    o ? o.send(r, function(e, r) {
                        e ? t(e) : n(r)
                    }) : t(new Error("Cound not find transport"))
                })
            }
        }, n.namespace("SM").io = n.mix(e, n.SM.io, !0), module.exports = e
    }(), SM.currentModule = null
}, "", {
    requires: ["sm", "promise"]
});
YUI.add("sm-io-xhr-transaction", function(e) {
    SM.currentModule = "sm-io-xhr-transaction";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        function t(e) {
            this.request = e, this._init(), e.lazy || this.send()
        }
        var s = e.SM.io,
            n = new e.Promise(function() {});
        n.then = function() {
            return n
        }, n.on = function(t, s) {
            return "abort" === t && e.soon(s), n
        }, e.mix(t.prototype, {
            _defaultTransport: "xhr",
            _init: function() {
                var t = this.request = e.merge(this.request),
                    s = t.url || (t.url = ""),
                    n = t.data;
                t.method = (t.method || "GET").toUpperCase(), n && ("object" == typeof n && (n = e.QueryString.stringify(n)), "PUT" !== t.method && "POST" !== t.method ? (t.url += (s.indexOf("?") > -1 ? "&" : "?") + n, t.data = null) : t.data = n)
            },
            abort: function() {
                this._complete || (this._complete = !0, this._aborted = !0, this._connection && this._connection.abort(), this.response = n, this._notifier ? this._notifier.fire("abort") : this._addQueuedSubs())
            },
            then: function(e, t) {
                var s = this.response || this.send();
                return s.then(e, t)
            },
            on: function(e, t) {
                if (this.response) switch (e) {
                    case "success":
                        this.response.then(t);
                        break;
                    case "failure":
                        this.response.then(null, t);
                        break;
                    case "complete":
                        this.response.then(t, t);
                        break;
                    default:
                        this.response.on && this.response.on(e, t)
                } else this._queuedSubs || (this._queuedSubs = {}), this._queuedSubs[e] || (this._queuedSubs[e] = []), this._queuedSubs[e].push(t)
            },
            send: function() {
                var t, n, i = this;
                return this.response || (t = this.request.transport, n = t && s[t] || s[this._defaultTransport], this.response = new e.Promise(function(e, t) {
                    i._connection = n.send(i.request, function(s, n) {
                        i._complete || (i._complete = !0, s ? t(s) : e(n))
                    })
                }), this._notifier = new e.Promise.EventNotifier, this._notifier.addEvents(this.response), this._addQueuedSubs()), this.response
            },
            _addQueuedSubs: function() {
                var e, t, s, n, i = this._queuedSubs;
                if (i) {
                    this._queuedSubs = null;
                    for (e in i)
                        if (i.hasOwnProperty(e))
                            for (t = i[e], s = 0, n = t.length; n > s; ++s) this.on(e, t[s])
                }
            }
        }, !0), e.SM.io.Transaction.xhr = t, module.exports = exports = t
    }(), SM.currentModule = null
}, "", {
    requires: ["sm-io-core", "querystring-stringify-simple", "sm-io-xhr-transport", "gallery-sm-promise-events"]
});
YUI.add("sm-io-xhr-transport", function(e) {
    SM.currentModule = "sm-io-xhr-transport";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        var n = e.config.win,
            t = n && n.XMLHttpRequest,
            r = "XMLHttpRequest",
            o = "application/x-www-form-urlencoded; charset=UTF-8",
            s = "POST",
            a = "PUT",
            d = "PATCH",
            i = "X-Requested-With",
            u = "x-requested-with",
            p = "Content-Type",
            l = "content-type",
            c = {
                send: function(e, n) {
                    var t;
                    try {
                        t = this.connect(e, n), t ? (e.data ? t.send(e.data) : t.send(), e.sync && this._handleResponse(t, n, e)) : n && n(new Error("Could not create XHR connection"))
                    } catch (r) {
                        n && n(r)
                    }
                    return t
                },
                connect: function(e, n) {
                    if (!e.url) return null;
                    var r = new t;
                    return r && (e.sync || (r.onreadystatechange = this._bindNotifier(n, e)), e.on && e.on.upload && e.on.upload.load && (r.upload.onload = e.on.upload.load), e.on && e.on.upload && e.on.upload.progress && (r.upload.onprogress = e.on.upload.progress), r.open(e.method, e.url, !e.sync), e.withCredentials && (r.withCredentials = !0), e.responseType && (r.responseType = e.responseType), this.setHeaders(r, e)), r
                },
                setHeaders: function(e, n) {
                    var t, r = n.headers;
                    if (r = this.addDefaultHeaders(e, n))
                        for (t in r) r.hasOwnProperty(t) && (r[t] || "string" == typeof r[t]) && e.setRequestHeader(t, r[t])
                },
                addDefaultHeaders: function(e, n) {
                    var t, c, h, f = n.headers,
                        y = "xdr" === n.transport || n.withCredentials,
                        w = !y || n.allowXDRPreflight,
                        M = n.method === s || n.method === a || n.method === d;
                    if (f) {
                        h = {};
                        for (t in f) c = f[t], t.toLowerCase() === u ? (h[i] = c, w = !1) : t.toLowerCase() === l ? (h[p] = c, M = !1) : h[t] = c
                    }
                    return w && (h || (h = {}), h[i] = r), M && (h || (h = {}), h[p] = o), h
                },
                _bindNotifier: function(e, n) {
                    var t = this;
                    return function() {
                        4 === this.readyState && t._handleResponse(this, e, n)
                    }
                },
                _handleResponse: function(e, n, t) {
                    var r, o, s;
                    try {
                        r = e.status
                    } catch (a) {
                        r = 0
                    }
                    if (o = "document" === e.responseType ? e.responseXML : e.response || e.responseText, s = e.getResponseHeader("Content-Type") || "", 0 === s.indexOf("application/json")) try {
                        o = JSON.parse(o, t.jsonReviver)
                    } catch (a) {
                        a.responseText = o, n.call(e, a)
                    }
                    if (r >= 200 && (300 > r || 304 === r || 1223 === r)) n.call(e, null, o);
                    else {
                        var d = new Error(r + " " + e.statusText);
                        d.response = o, n.call(e, d)
                    }
                },
                XHRClass: t
            };
        e.namespace("SM.io"), e.SM.io.xhr = c, module.exports = exports = c
    }(), SM.currentModule = null
}, "", {
    requires: ["json-parse"]
});
YUI.add("sm-lightbox-action-types", function(_) {
    SM.currentModule = "sm-lightbox-action-types";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: !0
        });
        exports.OPEN = "LIGHTBOX_OPEN", exports.CLOSE = "LIGHTBOX_CLOSE", exports.NAVIGATE_NEXT = "LIGHTBOX_NAVIGATE_NEXT", exports.NAVIGATE_PREV = "LIGHTBOX_NAVIGATE_PREV", exports.TOGGLE_FULLSCREEN = "LIGHTBOX_TOGGLE_FULLSCREEN", exports.TOGGLE_EXPAND_INFO = "LIGHTBOX_TOGGLE_EXPAND_INFO", exports.SET_CUSTOMIZATION_PARAMS = "LIGHTBOX_SET_CUSTOMIZATION_PARAMS", exports.SET_IMAGE_URIS = "LIGHTBOX_SET_IMAGE_URIS", exports.LOAD_IMAGE_STARTED = "LIGHTBOX_LOAD_IMAGE_STARTED", exports.LOAD_IMAGE_SUCCESS = "LIGHTBOX_LOAD_IMAGE_SUCCESS", exports.SHOW_IMAGE_STARTED = "LIGHTBOX_SHOW_IMAGE_STARTED", exports.SHOW_IMAGE_SUCCESS = "LIGHTBOX_SHOW_IMAGE_SUCCESS", exports.SHOW_KEYBOARD_SHORTCUT_PANEL = "LIGHTBOX_SHOW_KEYBOARD_SHORTCUT_PANEL", exports.HIDE_KEYBOARD_SHORTCUT_PANEL = "LIGHTBOX_HIDE_KEYBOARD_SHORTCUT_PANEL", exports.SET_CONTAINER_DIMENSIONS = "LIGHTBOX_SET_CONTAINER_DIMENSIONS", exports.SET_OVERRIDE_DIMENSIONS = "LIGHTBOX_SET_OVERRIDE_DIMENSIONS"
    }(), SM.currentModule = null
}, "", {});
YUI.add("sm-lightbox-actions", function(e) {
    SM.currentModule = "sm-lightbox-actions";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        "use strict";

        function e(e) {
            return {
                type: x.OPEN,
                initialState: e
            }
        }

        function t(t) {
            return function(n) {
                return n(e(t)), n(m(t.imageIndex || 0))
            }
        }

        function n() {
            return {
                type: x.CLOSE
            }
        }

        function r(e) {
            return {
                type: x.SET_IMAGE_URIS,
                imageUris: e
            }
        }

        function i() {
            return function(e, t) {
                var n = t(),
                    r = n.ui.lightbox.imageIndex;
                return e(m(r + 1))
            }
        }

        function o() {
            return function(e, t) {
                var n = t(),
                    r = n.ui.lightbox.imageIndex;
                return e(m(r - 1))
            }
        }

        function u() {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0;
            return function(t, n) {
                var r = n(),
                    i = D(r),
                    o = i.imageUris;
                if (!U(r, e)) return Promise.resolve();
                var u = o[e];
                return N(r, u) && P(r, u, ["ImageSizeDetails", "ImagePrices", "Album", "ImageAlbum"]) ? Promise.resolve() : (t(a(e)), t(y({
                    uri: o[e],
                    expand: {
                        ImageSizeDetails: !0,
                        ImagePrices: {
                            count: 1
                        },
                        Album: !0,
                        ImageAlbum: !0
                    }
                })).then(function() {
                    t(s(e))
                }))
            }
        }

        function a(e) {
            return {
                type: x.LOAD_IMAGE_STARTED,
                index: e
            }
        }

        function s(e) {
            return {
                type: x.LOAD_IMAGE_SUCCESS,
                index: e
            }
        }

        function m(e) {
            return function(t, n) {
                var r = n();
                return U(r, e) ? (t(l(e)), t(u(e)).then(function() {
                    t(f(e)), t(c(e))
                })["catch"](function(t) {
                    _.add(v, {
                        message: "Failed loading image at index " + e,
                        error: t
                    }, _.LEVEL_WARNING)
                })) : Promise.resolve()
            }
        }

        function c(e) {
            return function(t, n) {
                for (var r = [], i = function(i) {
                        var o = e + i;
                        r.push(function() {
                            return t(u(o)).then(function() {
                                return R(n(), o)
                            })
                        })
                    }, o = 1; O >= o; o++) i(o);
                for (var a = function(r) {
                        var i = e - r;
                        t(u(i)).then(function() {
                            return t(u(i)).then(function() {
                                return R(n(), i)
                            })
                        })
                    }, o = 1; A >= o; o++) a(o);
                h.add.apply(h, r)
            }
        }

        function g() {
            return function(e, t) {
                var n = D(t()),
                    r = n.imageUris;
                return e(m(r.length - 1))
            }
        }

        function l(e) {
            return {
                type: x.SHOW_IMAGE_STARTED,
                index: e
            }
        }

        function f(e) {
            return {
                type: x.SHOW_IMAGE_SUCCESS,
                index: e
            }
        }

        function S() {
            return {
                type: x.TOGGLE_FULLSCREEN
            }
        }

        function d() {
            return {
                type: x.TOGGLE_EXPAND_INFO
            }
        }

        function I(e) {
            return {
                type: x.SET_CUSTOMIZATION_PARAMS,
                customizationParams: e
            }
        }

        function p(e, t) {
            return {
                type: x.SET_OVERRIDE_DIMENSIONS,
                width: e,
                height: t
            }
        }

        function E(e, t) {
            return {
                type: x.SET_CONTAINER_DIMENSIONS,
                width: e,
                height: t
            }
        }
        Object.defineProperty(exports, "__esModule", {
            value: !0
        }), exports._open = e, exports.openLightbox = t, exports.closeLightbox = n, exports.setImageUris = r, exports.navigateNext = i, exports.navigatePrev = o, exports.loadImage = u, exports._loadImageStarted = a, exports._loadImageSuccess = s, exports.showImage = m, exports._preloadImages = c, exports.showLastImage = g, exports._showImageStarted = l, exports._showImageSuccess = f, exports.toggleFullscreen = S, exports.toggleExpandInfo = d, exports.setCustomizationParams = I, exports.setOverrideDimensions = p, exports.setContainerDimensions = E;
        var h = SM["import"]("sm-image-preloader"),
            _ = SM["import"]("sm-smuglog"),
            x = SM["import"]("sm-lightbox-action-types"),
            M = SM["import"]("sm-lightbox-constants"),
            A = M.PRELOAD_COUNT_BEFORE,
            O = M.PRELOAD_COUNT_AFTER,
            v = M.LOG_CATEGORY,
            b = SM["import"]("sm-api-redux-actions"),
            y = b.fetchFromAPI,
            T = SM["import"]("sm-api-redux-selectors"),
            N = T.getEntity,
            P = T.hasExpansions,
            L = SM["import"]("sm-lightbox-selectors"),
            D = L.getUIState,
            R = L.getImagePrefetchUrl,
            U = L.isValidIndex
    }(), SM.currentModule = null
}, "", {
    requires: ["sm", "sm-api-redux-actions", "sm-image-preloader", "sm-lightbox-action-types", "sm-lightbox-constants", "sm-lightbox-selectors", "sm-smuglog"]
});
YUI.add("sm-lightbox-constants", function(e) {
    SM.currentModule = "sm-lightbox-constants";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: !0
        });
        exports.AUTO_HIDE_DELAY = 3e3, exports.PRELOAD_COUNT_AFTER = 3, exports.PRELOAD_COUNT_BEFORE = 2, exports.LOG_CATEGORY = "Lightbox", exports.NAV_TYPE_PREV = "prev", exports.NAV_TYPE_NEXT = "next", exports.FOOTER_WIDTH_FULL = "full", exports.FOOTER_WIDTH_IMAGE = "image", exports.SHOW_ALBUM_COLLECTED = "collected"
    }(), SM.currentModule = null
}, "", {
    requires: []
});
YUI.add("sm-lightbox-reducers", function(e) {
    SM.currentModule = "sm-lightbox-reducers";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: !0
        });
        var e = SM["import"]("sm-lightbox-action-types"),
            t = SM["import"]("sm-image-buttons-constants"),
            n = t.BUY_BUTTON_COLOR_ACCENT,
            s = SM["import"]("sm-lightbox-constants"),
            r = s.FOOTER_WIDTH_FULL,
            o = s.SHOW_ALBUM_COLLECTED,
            a = exports.customization = function() {
                var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {
                        autoHideUI: !0,
                        buyButtonColor: n,
                        buyButtonStyle: {
                            showChrome: !0,
                            showIcon: !1,
                            showLabel: !0
                        },
                        footerWidth: r,
                        showAlbum: o,
                        showCaption: !0,
                        showKeywords: !0,
                        showSlideshowButton: !0,
                        showTitle: !0,
                        transparentBackground: !1
                    },
                    s = arguments[1];
                switch (s.type) {
                    case e.OPEN:
                        return babelHelpers["extends"]({}, t, s.initialState.customization);
                    case e.SET_CUSTOMIZATION_PARAMS:
                        return babelHelpers["extends"]({}, t, s.customizationParams);
                    default:
                        return t
                }
            },
            i = exports.lightbox = function() {
                var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {
                        busy: !1,
                        fullscreen: !1,
                        imageIndex: 0,
                        imageUris: [],
                        infoExpanded: !1,
                        open: !1,
                        containerWidth: 0,
                        containerHeight: 0
                    },
                    n = arguments[1];
                switch (n.type) {
                    case e.OPEN:
                        return babelHelpers["extends"]({}, t, n.initialState, {
                            open: !0
                        });
                    case e.CLOSE:
                        return babelHelpers["extends"]({}, t, {
                            open: !1,
                            fullscreen: !1
                        });
                    case e.SHOW_IMAGE_STARTED:
                        return babelHelpers["extends"]({}, t, {
                            busy: !0,
                            imageIndex: n.index
                        });
                    case e.SHOW_IMAGE_SUCCESS:
                        return babelHelpers["extends"]({}, t, {
                            busy: !1
                        });
                    case e.TOGGLE_FULLSCREEN:
                        return babelHelpers["extends"]({}, t, {
                            fullscreen: !t.fullscreen
                        });
                    case e.TOGGLE_EXPAND_INFO:
                        return babelHelpers["extends"]({}, t, {
                            infoExpanded: !t.infoExpanded
                        });
                    case e.SET_OVERRIDE_DIMENSIONS:
                        return babelHelpers["extends"]({}, t, {
                            overrideWidth: n.width,
                            overrideHeight: n.height
                        });
                    case e.SET_CONTAINER_DIMENSIONS:
                        return babelHelpers["extends"]({}, t, {
                            containerWidth: n.width,
                            containerHeight: n.height
                        });
                    default:
                        return t
                }
            };
        exports.UI = function() {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
                t = arguments[1];
            return babelHelpers["extends"]({}, e, {
                lightbox: babelHelpers["extends"]({}, i(e.lightbox, t), {
                    customization: a(e.lightbox ? e.lightbox.customization : void 0, t)
                })
            })
        }
    }(), SM.currentModule = null
}, "", {
    requires: ["sm", "sm-image-buttons-constants", "sm-lightbox-action-types", "sm-lightbox-constants"]
});
YUI.add("sm-lightbox-selectors", function(e) {
    SM.currentModule = "sm-lightbox-selectors";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: !0
        });
        var e = SM["import"]("sm-api-redux-selectors"),
            i = e.getEntity,
            t = e.getExpansion,
            r = SM["import"]("sm-image-sizes"),
            n = exports.getUIState = function(e) {
                var i = e.ui;
                i = void 0 === i ? {} : i;
                var t = i.lightbox,
                    r = void 0 === t ? {} : t;
                return r
            },
            o = (exports.getCustomizationState = function(e) {
                var i = e.ui;
                i = void 0 === i ? {} : i;
                var t = i.lightbox;
                t = void 0 === t ? {} : t;
                var r = t.customization,
                    n = void 0 === r ? {} : r;
                return n
            }, exports.getImageUri = function(e, i) {
                var t = e.ui;
                t = void 0 === t ? {} : t;
                var r = t.lightbox;
                r = void 0 === r ? {} : r;
                var n = r.imageUris,
                    o = void 0 === n ? [] : n;
                return o[i]
            }),
            a = exports.getCurrentImageIndex = function(e) {
                var i = e.ui;
                i = void 0 === i ? {} : i;
                var t = i.lightbox;
                t = void 0 === t ? {} : t;
                var r = t.imageIndex;
                return r
            },
            u = exports.getCurrentImageUri = function(e) {
                return o(e, a(e))
            },
            g = exports.getImage = function(e, t) {
                var r = o(e, t);
                return i(e, r)
            },
            l = (exports.getCurrentImage = function(e) {
                return g(e, a(e))
            }, exports.getImageSizeDetails = function(e, i) {
                var r = o(e, i);
                return t(e, r, "ImageSizeDetails")
            }),
            m = (exports.getCurrentImageSizeDetails = function(e) {
                return l(e, a(e))
            }, exports.getCurrentImageSourceAlbum = function(e) {
                var i = u(e);
                return t(e, i, "ImageAlbum")
            }, exports.getCurrentImageContextAlbum = function(e) {
                var i = u(e);
                return t(e, i, "Album")
            }, exports.getImageSize = function(e, i) {
                var t = n(e),
                    o = t.overrideWidth,
                    a = t.overrideHeight,
                    u = t.containerWidth,
                    m = t.containerHeight;
                u = o || u, m = a || m;
                var s = g(e, i),
                    v = l(e, i);
                if (s && v) {
                    var d = new r(v);
                    if (d) {
                        if (s.IsVideo) {
                            var c = d.containWithin(u, m, {
                                    allowCustomSizes: !1,
                                    allowPixelRatioOverride: !0,
                                    type: r.TYPE_VIDEO
                                }),
                                f = d.containWithin(c.DisplayWidth, c.DisplayHeight, {
                                    allowCustomSizes: !1,
                                    allowPixelRatioOverride: !0
                                });
                            return {
                                imageSize: f,
                                videoSize: c
                            }
                        }
                        return d.containWithin(u, m, {
                            allowCustomSizes: !1,
                            allowPixelRatioOverride: !0,
                            type: r.TYPE_PHOTO
                        })
                    }
                }
            });
        exports.getCurrentImageSize = function(e) {
            return m(e, a(e))
        }, exports.getImagePrefetchUrl = function(e, i) {
            var t = m(e, i);
            if (t) return t.imageSize ? t.imageSize.Url : t.Url
        }, exports.isValidIndex = function(e, i) {
            var t = n(e),
                r = t.imageUris;
            return r ? i >= 0 && i < r.length : !1
        }
    }(), SM.currentModule = null
}, "", {
    requires: ["sm", "sm-api-redux-selectors", "sm-dom", "sm-image-sizes"]
});
YUI.add("sm-lightbox-view", function(e) {
    SM.currentModule = "sm-lightbox-view";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        "use strict";
        var t = SM["import"]("sm-imagesrcconfig"),
            i = SM["import"]("sm-analytics"),
            s = e.config.doc,
            o = "exitfullscreen",
            a = "fullscreen",
            n = 1.5,
            l = "renderFooter";
        e.namespace("SM.Views").Lightbox = e.Base.create("sm-lightbox", e.Panel, [], {
            DEF_PARENT_NODE: ".sm-overlay-container",
            PROCESSING_IMAGE_URL: "//cdn.smugmug.com/img/processing-NeXT-{size}.png",
            PROCESSING_SIZES: {
                S: {
                    width: 300,
                    height: 300
                },
                M: {
                    width: 450,
                    height: 450
                },
                L: {
                    width: 600,
                    height: 600
                },
                XL: {
                    width: 768,
                    height: 768
                },
                X2: {
                    width: 960,
                    height: 960
                },
                X3: {
                    width: 1200,
                    height: 1200
                }
            },
            PROCESSING_STATUS: "Preprocess",
            hideControlsDelay: 3e3,
            hideControlsInitialDelay: 5e3,
            initializer: function() {
                this._autoHideControls = this.get("autoHideControls"), this._syncViewport(), this._attachEvents(), window.LC_API && e.SM.LiveChat.hasMenu && this.plug(e.SM.Views.Lightbox.Plugins.LiveChat)
            },
            destructor: function() {
                e.one("body").removeClass("sm-noscroll").removeClass("sm-full-screen-modal"), this._destroyVideoView(), this._detachEvents(), this._detachUIEvents(), this._stopAutoHideControls(), this.removeOpaqueMask()
            },
            _attachEvents: function() {
                this._detachEvents(), this._events = [this.after("imageChange", this._afterImageChange), this.after("imageSizeChange", this._afterImageSizeChange), this.after("render", this._afterRender), this.after("visibleChange", this._afterVisibleChange)], e.SM.Page.uxdisabled && this._events.push(this.get("boundingBox").delegate("click", this._onLinkClick, "a", this))
            },
            _attachUIEvents: function() {
                var t = e.one("body"),
                    i = this.get("boundingBox");
                this._detachUIEvents(), this._uiEvents = [e.on("closeLightbox", this.hide, this), e.on("windowresize", this._onWindowResize, null, this), t.on("keyup", this._onKeyUp, this), i.delegate("contextmenu", this._onContextMenu, "*", this), i.delegate("click", this._onNodeHideClick, ".sm-lightbox-close", this), i.delegate("click", this._onFullscreenClick, ".sm-lightbox-expand", this), i.delegate("dragstart", this._onDragStart, ".sm-lightbox-image", this)]
            },
            _detachEvents: function() {
                this._events && (new e.EventHandle(this._events).detach(), this._events = null)
            },
            _detachUIEvents: function() {
                this._uiEvents && (new e.EventHandle(this._uiEvents).detach(), this._uiEvents = null)
            },
            exitFullscreen: function() {
                document.exitFullscreen ? document.exitFullscreen() : document.mozCancelFullScreen ? document.mozCancelFullScreen() : document.webkitCancelFullScreen && document.webkitCancelFullScreen()
            },
            supportsFullscreen: function(t) {
                var i = document.createElement("div");
                return !!(i.requestFullScreen || i.mozRequestFullScreen || i.webkitRequestFullScreen) && (t && t.allowChrome || !e.UA.chrome)
            },
            toggleFullScreen: function() {
                this._isFullscreen ? this.exitFullscreen() : this._requestFullscreenForNode(e.one("body").getDOMNode())
            },
            _allowScroll: function(e) {
                this._boundingBox.toggleClass("sm-lightbox-scrollable", e)
            },
            _destroyVideoView: function() {
                this._videoView && (this._videoView.destroy(), this._videoView = null), this._videoTile && (this._videoTile.destroy(), this._videoTile = null), this._playClickHandle && (this._playClickHandle.detach(), this._playClickHandle = null)
            },
            _hide: function() {
                this._destroyVideoView(), this._detachUIEvents(), this._stopAutoHideControls(), this.removeOpaqueMask(), e.one("body").removeClass("sm-noscroll").removeClass("sm-full-screen-modal")
            },
            _hideControls: function(t) {
                t ? (this._autoHideTimer && (this._autoHideTimer.cancel(), this._autoHideTimer = null), this._autoHideTimer = e.later(t, this, function() {
                    this._boundingBox.addClass("sm-lightbox-clean"), this._boundingBox.removeClass("sm-lightbox-info-expanded")
                })) : (this._boundingBox.addClass("sm-lightbox-clean"), this._boundingBox.removeClass("sm-lightbox-info-expanded"))
            },
            _renderBody: function() {
                var i = this.get("image"),
                    o = this.get("imageSize");
                if (this._destroyVideoView(), !i) return void this.setStdModContent(e.WidgetStdMod.BODY, "");
                if (i.get("IsVideo")) return this._renderVideo(), void this._syncFooter();
                if (i.get("IsArchive")) return void this._renderIcon("Vault");
                var a, l = i.toJSON(),
                    h = l.Status === this.PROCESSING_STATUS,
                    d = o,
                    r = this._viewportHeight,
                    c = this._viewportWidth;
                if ("A" !== o && l.Sizes[d]) a = l.Sizes[d];
                else {
                    o = "A";
                    var u = c,
                        g = r;
                    this.pinchToZoomSupport() && (u = c * n, g = r * n), a = t.get({
                        sources: i.fakeImageSizeDetails(),
                        minWidth: u,
                        minHeight: g
                    })
                }
                var m, _, f = {
                    width: a.width,
                    height: a.height
                };
                if (h && (_ = this.PROCESSING_SIZES[d] ? d : "S", m = this.PROCESSING_SIZES[_], f.height = m.height, f.width = m.width), "A" === o && f.width && f.height) {
                    var p = f.width / f.height;
                    f.height > r && (f.width = Math.round(r * p), f.height = r), f.width > c && (f.height = Math.round(c / p), f.width = c)
                }
                var b, v = s.createElement("img");
                v.className = "sm-lightbox-image", b = h ? e.Lang.sub(this.PROCESSING_IMAGE_URL, {
                    size: _
                }) : a.url || e.SM.Models.Image.getUrl(l, d), this._boundingBox.toggleClass("sm-lightbox-protected", l.IsProtected), l.IsProtected ? (v.src = "/img/spacer.gif", v.style.backgroundImage = 'url("' + b + '")', v.style.backgroundSize = f.width + "px " + f.height + "px", v.alt = "") : (v.src = b, v.alt = l.Title || l.CaptionText || l.FileName || ""), f.width && f.height && (v.style.height = f.height + "px", v.style.width = f.width + "px", (f.width <= c || f.height <= r) && (v.style.position = "absolute", this.pinchToZoomSupport() && (v.style.margin = (r - f.height) / 2 + "px " + (c - f.width) / 2 + "px"))), this.imageSize = f, this.setStdModContent(e.WidgetStdMod.BODY, v), this._allowScroll("A" !== o && (f.width > c || f.height > r)), this._syncFooter()
            },
            _renderFooter: function() {
                this.setStdModContent(e.WidgetStdMod.FOOTER, '<div class="sm-lightbox-panel-grid"><div class="sm-lightbox-ft-left sm-lightbox-panel"></div><div class="sm-lightbox-ft-center sm-lightbox-panel"></div><div class="sm-lightbox-ft-right sm-lightbox-panel"></div></div>'), this._footerNode = this.getStdModNode(e.WidgetStdMod.FOOTER), this._footerPanels = {
                    center: this._footerNode.one(".sm-lightbox-ft-center"),
                    left: this._footerNode.one(".sm-lightbox-ft-left"),
                    right: this._footerNode.one(".sm-lightbox-ft-right")
                }, this.fire(l, {
                    centerPanelNode: this._footerPanels.center,
                    footerNode: this._footerNode,
                    leftPanelNode: this._footerPanels.left,
                    rightPanelNode: this._footerPanels.right
                }), this._syncFooter()
            },
            _renderHeader: function() {
                var t = '<div class="sm-lightbox-tools" ',
                    i = document.getElementById("google_translate_element");
                t += i ? 'style="padding: 45px 10px 0 0;">' : ">", this.get("allowFullscreen") && this.supportsFullscreen() && (t += e.SM.Templates.button({
                    className: "sm-lightbox-expand",
                    icon: "FullScreenSlim",
                    size: "large",
                    noChrome: !0,
                    value: "fullscreen"
                })), t += e.SM.Templates.button({
                    icon: "XCross2",
                    value: "close",
                    noChrome: !0,
                    className: "sm-lightbox-close"
                }), t += "</div>", this.setStdModContent(e.WidgetStdMod.HEADER, t)
            },
            _renderIcon: function(t) {
                this.setStdModContent(e.WidgetStdMod.BODY, '<div class="sm-lightbox-image-icon" role="presentation"><span class="sm-fonticon sm-fonticon-' + t + '"></span></div>')
            },
            _renderLightbox: function() {
                this._boundingBox = this.get("boundingBox"), this._boundingBox._node.style.top = 0, this.pinchToZoomSupport() && this._boundingBox.addClass("sm-lightbox-pinchzoom"), this._renderBody(), this._renderHeader(), this._renderFooter(), this.rendered = !0, this.get("visible") && this._show({
                    suppressRender: !0
                })
            },
            _renderVideo: function() {
                var t, i, s = this.get("imageSize"),
                    o = this.get("image"),
                    a = this._viewportHeight,
                    n = this._viewportWidth;
                if (e.UA.ios) return this.getStdModNode(e.WidgetStdMod.BODY).empty(), this._videoTile = new e.SM.Views.Tile({
                    autoResize: !1,
                    center: !0,
                    clickable: !1,
                    maxHeight: a,
                    imageCrop: "none",
                    imageSize: "fit",
                    resource: o,
                    parentNode: this.getStdModNode(e.WidgetStdMod.BODY),
                    showInfo: "never"
                }), this._videoTile.render(), void(this._playClickHandle = this._videoTile.get("container").delegate("click", function(e) {
                    var t, i = o.get("Sizes");
                    e.preventDefault(), i.QTStream && (t = i.QTStream.url), document.location.href = t
                }, ".sm-button", this));
                i = "A" === s ? o.getLargestVideoSizeForContainer(n, a) : s, t = e.merge(o.get("Sizes")[i]), t.height = Math.min(t.height, a - 80), t.width = Math.min(t.width, n), this._videoView = new e.SM.Views.Video({
                    height: t.height,
                    model: o,
                    size: i,
                    width: t.width
                });
                var l = this._videoView.get("container");
                l.addClass("sm-lightbox-image"), this.setStdModContent(e.WidgetStdMod.BODY, l), this._videoView.render(), l._node.style.position = "absolute", this._allowScroll("A" !== s && (t.width > n || t.height > a)), this.imageSize = t
            },
            _requestFullscreenForNode: function(t) {
                if (t.requestFullScreen) document.onfullscreenchange = e.bind(this._fullScreenChange, this), t.requestFullScreen();
                else if (t.mozRequestFullScreen) document.onmozfullscreenchange = e.bind(this._fullScreenChange, this), t.mozRequestFullScreen();
                else {
                    if (!t.webkitRequestFullScreen) return !1;
                    document.onwebkitfullscreenchange = e.bind(this._fullScreenChange, this), t.webkitRequestFullScreen()
                }
                return !0
            },
            _show: function(t) {
                this._syncViewport(), this._attachUIEvents(), t && t.suppressRender || (this.rendered ? this._videoView || this._renderBody() : this.render()), this._autoHideControls && this._startAutoHideControls(), this.get("transparentBG") || this.addOpaqueMask(), e.one("body").addClass("sm-noscroll"), this.get("launchAsSlideshow") || i.Tracker.createEvent(i.CATEGORY.LIGHTBOX, "Start").log()
            },
            _showControls: function() {
                this._boundingBox.removeClass("sm-lightbox-clean")
            },
            _syncViewport: function() {
                this._viewportHeight = e.DOM.winHeight(), this._viewportWidth = e.DOM.winWidth()
            },
            _startAutoHideControls: function() {
                this._stopAutoHideControls(), this._hideControls(this.hideControlsInitialDelay), e.UA.mobile || (this._mouseEventHandler = e.on("mousemove", function() {
                    this._hideControls(this.hideControlsDelay), this._showControls()
                }, window, this))
            },
            _stopAutoHideControls: function() {
                this._autoHideTimer && (this._autoHideTimer.cancel(), this._autoHideTimer = null), this._mouseEventHandler && (this._mouseEventHandler.detach(), this._mouseEventHandler = null), this._showControls()
            },
            _syncFooter: function() {
                var t, i = this._footerPanels;
                i && this._footerNode && (!e.UA.mobile && this.imageSize && "image" === this.get("infobarWidth") ? (this._footerNode.addClass("sm-lightbox-footer-aligned"), t = this.imageSize.width > 576 ? this.imageSize.width : 576, this._footerNode.setStyle("width", t + "px")) : (this._footerNode.removeClass("sm-lightbox-footer-aligned"), this._footerNode.setStyle("width", "auto")))
            },
            _afterImageChange: function(e) {
                var t;
                e.prevVal && e.prevVal.get("ImageID") != e.newVal.get("ImageID") && (t = !0), this.rendered && t && this._renderBody()
            },
            _afterImageSizeChange: function() {
                this.rendered && this._renderBody()
            },
            _afterRender: function() {
                this._renderLightbox()
            },
            _afterVisibleChange: function(e) {
                e.newVal ? this._show() : this._hide()
            },
            _fullScreenChange: function() {
                document.webkitIsFullScreen || document.mozFullScreen ? (this.fire(a), this._isFullscreen = !0) : (this.fire(o), this._isFullscreen = !1), this._boundingBox.toggleClass("sm-lightbox-fullscreen", this._isFullscreen)
            },
            _onDragStart: function(e) {
                this.get("image").get("IsProtected") && e.preventDefault()
            },
            _onFullscreenClick: function() {
                e.SM.Page.uxdisabled || this.toggleFullScreen()
            },
            _onKeyUp: function(t) {
                if (!e.SM.Page.uxdisabled) {
                    var i = t.charCode;
                    this._isFullscreen || (88 === i || 27 === i) && this.hide()
                }
            },
            _onNodeHideClick: function() {
                return e.SM.Page.uxdisabled || this._boundingBox.hasClass("sm-lightbox-clean") ? void 0 : this._isFullscreen ? void this.exitFullscreen() : void this.hide()
            },
            _onWindowResize: function() {
                this._syncViewport(), this.get("visible") && (this._syncFooter(), this.get("autoRender") && !this._videoView && this._renderBody())
            },
            _onContextMenu: function(t) {
                this.get("image").get("IsProtected") && (t.preventDefault(), e.SM.Page.Tooltip.showAtXY(SM.env.rightClickMessage, t.pageX, t.pageY, {
                    className: "sm-right-click-message"
                }))
            },
            isZoomed: function() {
                var e = document.documentElement.clientWidth / window.innerWidth;
                return 1 !== e
            },
            pinchToZoomSupport: function() {
                return e.UA.touchEnabled && (e.UA.ios || e.UA.android)
            },
            addOpaqueMask: function(e) {
                var t = e || this.get("maskNode");
                t && t.addClass("sm-lightbox-mask")
            },
            removeOpaqueMask: function(e) {
                var t = e || this.get("maskNode");
                t && t.removeClass("sm-lightbox-mask")
            },
            _onLinkClick: function(t) {
                e.SM.Page.uxdisabled && t.halt(!0)
            }
        }, {
            CSS_PREFIX: "sm-lightbox",
            ATTRS: {
                allowFullscreen: {
                    value: !0
                },
                autoHideControls: {
                    value: !1
                },
                autoRender: {
                    value: !0
                },
                buttons: {
                    value: null
                },
                fillHeight: {
                    value: null
                },
                focusOn: {
                    value: {}
                },
                height: {
                    value: "100%"
                },
                hideOn: {
                    value: []
                },
                image: {},
                imageSize: {
                    value: "A"
                },
                modal: {
                    value: !0
                },
                width: {
                    value: "100%"
                },
                constrain: {
                    value: !0
                },
                infobarWidth: {
                    value: "full"
                },
                transparentBG: {
                    value: !1
                },
                launchAsSlideshow: {
                    value: !1
                }
            },
            IMAGE_ZOOM_MULTIPLIER: n
        });
        var i = SM["import"]("sm-analytics"),
            h = SM["import"]("sm-page"),
            d = {
                S: "Small",
                M: "Medium",
                L: "Large",
                XL: "X-Large",
                X2: "X2-Large",
                X3: "X3-Large",
                X4: "X4-Large",
                X5: "X5-Large",
                "4K": "4K",
                "5K": "5K",
                O: "Original",
                A: "Fill"
            };
        e.namespace("SM.Views.Lightbox.Plugins").Basic = e.Base.create("sm-lightbox-basic", e.Plugin.Base, [], {
            buttonTemplate: '<div class="sm-lightbox-tools"><div class="sm-lightbox-icons">' + e.SM.ImageButtons.getHTML("favorite") + e.SM.ImageButtons.getHTML("favorites", {
                label: "See All"
            }) + e.SM.ImageButtons.getHTML("share") + e.SM.ImageButtons.getHTML("comment") + e.SM.ImageButtons.getHTML("tools") + e.SM.ImageButtons.getHTML("info") + e.SM.ImageButtons.getHTML("download") + e.SM.ImageButtons.getHTML("sizes") + '</div><%== Y.SM.Templates.button({className: "sm-lightbox-buy-button",label    : data.label,icon     : data.icon,size     : "small",skin     : data.skin,value    : "buy",noChrome : data.noChrome}) %></div>',
            emptyInfoTemplate: '<% if (data.canEdit) { %><p class="<%=data.inlineClass%>" data-name="All"><span class="sm-inlineedit-placeholder sm-muted">add <span data-singlefield="Title" class="sm-inlineedit-specific">title</span>, <span data-singlefield="CaptionRaw" class="sm-inlineedit-specific">caption</span>, <% if (data.showKeywords) { %><span data-singlefield="Keywords" class="sm-inlineedit-specific">keywords</span>, or <span class="sm-inlineedit-specific">all</span><% } else { %>or <span class="sm-inlineedit-specific">both</span><% } %></span><span class="sm-inlineedit-hover-button sm-fonticon-small sm-fonticon-Pencil"></span></p><% } %>',
            titleTemplate: '<div class="<%=data.inlineClass%>" data-name="Title" data-placeholder="add title"><h3 class="sm-lightbox-title sm-h3"><% if (data.title) { %><%= data.title %><% } else if (data.canEdit) { %><span class="sm-inlineedit-placeholder sm-muted">add title</span><% } %><% if (data.canEdit) { %><span class="sm-inlineedit-hover-button sm-fonticon-small sm-fonticon-Pencil"></span><% } %></h4></div>',
            captionTemplate: '<p class="<%=data.inlineClass%> sm-lightbox-caption" data-type="textarea" data-name="CaptionRaw" data-placeholder="add a caption"><% if (data.caption) { %><%== data.caption %><% } else if (data.showFileName) { %><%== data.fileName %><% } else if (data.canEdit) { %><span class="sm-inlineedit-placeholder sm-muted">add caption</span><% } %><% if (data.canEdit) { %><span class="sm-inlineedit-hover-button sm-fonticon-small sm-fonticon-Pencil"></span><% } %></p>',
            imageKeywordsTemplate: '<% var photoBy = data.photoBy; %><% var keywords = data.keywords; %><p class="<%=data.inlineClass%> sm-lightbox-keywords" data-name="Keywords" data-placeholder="add keywords"><% if (keywords && keywords.length) { %><span class="sm-fonticon sm-fonticon-small sm-fonticon-Tags"></span><% for (var i = 0; i < keywords.length; i++) {%><% var keyword = keywords[i]; %><% if (photoBy.user.url) { %><a class="sm-muted" href="<%= photoBy.user.url %>/keyword/<%= encodeURIComponent(keyword) %>"><%= keyword %></a><% } else { %><a class="sm-muted" href="/keyword/<%= encodeURIComponent(keyword) %>"><%= keyword %></a><% } %><% } %><% } else if (data.canEdit && data.showKeywords) { %><span class="sm-inlineedit-placeholder sm-muted">add keywords</span><% } %><% if (data.canEdit && data.showKeywords) { %><span class="sm-inlineedit-hover-button sm-fonticon-small sm-fonticon-Pencil"></span><% } %></p>',
            infoTemplate: '<div class="sm-lightbox-info"></div>',
            expandTemplate: '<div class="sm-lightbox-info-expand"><span class="sm-fonticon"></span></div>',
            imageAttributionTemplate: '<% var photoBy = data.photoBy; %><% if (photoBy && photoBy.user && photoBy.user.name ) { %><span class="sm-muted sm-text-mini"><% if (photoBy.user.name) { %><a href="<%= photoBy.user.url %>" class="sm-muted"><%= photoBy.user.name %></a><% if (photoBy.album.url) { %>, from <% } %><% } %></span><% } %><% if (photoBy && photoBy.album && photoBy.album.url) { %><p class="sm-muted sm-text-mini"><% if (!photoBy.user.name) { %>From <% } %><a href="<%= photoBy.album.url %>" class="sm-muted"><%= photoBy.album.name %></a></p><% } %>',
            initializer: function() {
                this._host = this.get("host"), this._host.get("boundingBox").addClass("sm-lightbox-basic"), this.afterHostEvent("renderFooter", this._afterRenderFooter, this), this._buyButtonStyle = this.get("buyButtonStyle"), this._buyButtonSkin = this.get("buyButtonSkin"), this._showTitle = this.get("showTitle"), this._showCaption = this.get("showCaption"), this._showKeywords = this.get("showKeywords")
            },
            destructor: function() {
                this._detachUIEvents()
            },
            _attachUIEvents: function() {
                this._detachUIEvents();
                var t = this._host.getStdModNode(e.WidgetStdMod.HEADER),
                    i = this._host.getStdModNode(e.WidgetStdMod.BODY);
                this._uiEvents = [e.on("image:updated", this._onImageUpdated, this), e.on("imageSizeMenu:imageSizeChange", this._handleImageSizeChange, this), this.afterHostMethod("_hide", this._afterHide, this), this._host.after("imageChange", this._afterImageChange, this), this._host.after(a, this._afterFullScreen, this), this._centerPanelNode.after("click", this._afterInfoClick, this), this._centerPanelNode.delegate("click", this._handleKeywordClick, "a.sm-muted", this), this._toolbarNode.delegate("click", this._onBuyButtonClick, ".sm-lightbox-buy-button", this), this._centerPanelNode.delegate("click", this._handleInlineEditClick, ".sm-inlineedit-node", this)], e.UA.mobile ? this._uiEvents.push(i.on("click", this._onMobileImageClick, this), this._centerPanelNode.after("click", this._onMobileInfoHover, this)) : this._uiEvents.push(t.after("mouseenter", this._afterHeaderMouseEnter, this), t.after("mouseleave", this._afterHeaderMouseLeave, this), this._footerNode.after("mouseenter", this._afterFooterMouseEnter, this), this._footerNode.after("mouseleave", this._afterFooterMouseLeave, this), this._centerPanelNode.after("mouseenter", this._afterCenterPanelMouseEnter, this), this._centerPanelNode.after("mouseleave", this._afterCenterPanelMouseLeave, this))
            },
            _detachUIEvents: function() {
                this._uiEvents && (new e.EventHandle(this._uiEvents).detach(), this._uiEvents = null)
            },
            _compileTemplates: function() {
                if (!this._compiledTemplates) {
                    var t = e.Template.Micro;
                    this._compiledTemplates = {
                        imageEmpty: t.compile(this.emptyInfoTemplate),
                        imageTitle: t.compile(this.titleTemplate),
                        imageCaption: t.compile(this.captionTemplate),
                        imageKeywords: t.compile(this.imageKeywordsTemplate),
                        buttons: t.compile(this.buttonTemplate),
                        imageAttribution: t.compile(this.imageAttributionTemplate)
                    }
                }
                return this._compiledTemplates
            },
            _render: function() {
                this._renderInfo(), this._renderToolbar(), this.rendered = !0, this._attachUIEvents()
            },
            _renderInfo: function() {
                var t, i, s, o, a, n = this._compileTemplates(),
                    l = this._host.get("boundingBox"),
                    h = "",
                    d = this._host.get("image"),
                    r = "",
                    c = e.Node.create(this.infoTemplate),
                    u = (e.SM.Page.uxdisabled, ""),
                    g = !1;
                d && (h = e.Lang.trim(d.get("Caption")), r = e.Lang.trim(d.get("Title")), i = e.Lang.trim(d.get("Keywords")), g = d.get("ShowFileName"), t = d.get("PhotoBy"), s = d.get("CanEdit"), o = d.get("ShowKeywords"), a = s ? "sm-inlineedit-node" : "", s && this._showTitle && this._showCaption && this._showKeywords && (u += n.imageEmpty({
                    canEdit: s,
                    showKeywords: o,
                    inlineClass: a
                })), this._showTitle && (r || s) && (u += n.imageTitle({
                    title: r,
                    canEdit: s,
                    inlineClass: a
                })), this._showCaption && (h || g || s) && (u += n.imageCaption({
                    caption: h,
                    showFileName: g,
                    fileName: d.get("FileName"),
                    canEdit: s,
                    inlineClass: a
                })), this._showKeywords && (i.length || s) && (u += n.imageKeywords({
                    keywords: i,
                    photoBy: t,
                    canEdit: s,
                    showKeywords: o,
                    inlineClass: a
                })), u += n.imageAttribution({
                    photoBy: t
                }), c.setHTML(u), this._showTitle && r || this._showCaption && h || this._showCaption && g || this._showKeywords && i.length || t && (t.user && t.user.name || t.album && t.album.url) ? this._footerNode.removeClass("sm-lightbox-no-info") : s && this._showTitle && this._showCaption && this._showKeywords ? this._footerNode.addClass("sm-lightbox-no-info") : s && (this._showTitle || this._showCaption || this._showKeywords) ? this._footerNode.removeClass("sm-lightbox-no-info") : this._footerNode.addClass("sm-lightbox-no-info")), this._centerPanelNode.setHTML(c), c.destroy(!0), this._centerPanelNode.append(this.expandTemplate), this._footerNode.toggleClass("sm-lightbox-canedit", s && (this._showTitle || this._showCaption || this._showKeywords)), l.toggleClass("sm-lightbox-gecko", !!e.UA.gecko), this._host._syncFooter()
            },
            _renderToolbar: function() {
                var t = this._toolbarNode,
                    i = (this.get("galleryAlbum"), this._compileTemplates()),
                    s = {
                        label: "",
                        icon: "",
                        skin: this._buyButtonSkin,
                        noChrome: !1
                    };
                switch (t && t.remove(!0), this._buyButtonStyle) {
                    case "icon":
                        s.icon = "CartAdd", s.noChrome = !0;
                        break;
                    case "iconbutton":
                        s.icon = "CartAdd";
                        break;
                    default:
                        s.label = "Buy"
                }
                t = this._toolbarNode = e.Node.create(i.buttons(s)), this._buyIconButton = t.one(".sm-lightbox-buy-button"), this._buyButtonLabel = this._buyIconButton.one(".sm-button-label"), this._imageButtons = new e.SM.ImageButtons({
                    container: t
                }), this._imageButtons.hideAll(), this._syncToolbar(), this._rightPanelNode.setHTML(t)
            },
            _syncToolbar: function() {
                var t = this._imageButtons,
                    i = !0;
                if (t) {
                    var s = this._host.get("image");
                    if (!s) return void t.hideAll();
                    var o = s.getRelated("Album"),
                        a = this.get("galleryAlbum");
                    t.setContext({
                        image: s,
                        album: o,
                        galleryAlbum: a,
                        requestData: this.get("requestData"),
                        realGallery: this.get("realGallery"),
                        lightbox: !0
                    }), t.updateAll(), a && (i = a.get("IsSellable")), i = o ? i && o.get("IsSellable") : !1, i ? (this._buyButtonLabel && this._buyButtonLabel.set("text", "Buy"), this._buyIconButton.show()) : this._buyIconButton.hide();
                    for (var n = t.container.getDOMNode(), l = n.querySelectorAll(".sm-lightbox-icons > *"), h = !0, d = 0; d < l.length; d++) {
                        var r = l[d];
                        if (null !== r.offsetParent) {
                            h = !1;
                            break
                        }
                    }
                    this._footerNode.toggleClass("sm-lightbox-no-tools", h && !i), e.UA.ios && s.get("IsVideo") && this._toolbarNode.one(".sm-button-image-download").hide()
                }
            },
            _handleInlineEditClick: function(t) {
                if (!(e.SM.Page.uxdisabled || e.UA.mobile && !this._host._boundingBox.hasClass("sm-lightbox-info-expanded"))) {
                    var s, o = t.currentTarget,
                        a = o.getData("name"),
                        n = this,
                        l = this._host.get("image");
                    if (o.hasClass("sm-inlineedit-plugged") || "A" === t.target.getDOMNode().tagName || !l.get("CanEdit") || this._host._boundingBox.hasClass("sm-lightbox-clean")) return void(this._host._boundingBox.hasClass("sm-lightbox-clean") && t.preventDefault());
                    if ("All" === a) {
                        var h = ["Title", "CaptionRaw"],
                            d = o.get("parentNode"),
                            r = t.target.getData("singlefield");
                        l.get("ShowKeywords") && h.push("Keywords"), s = o.ancestor(".sm-lightbox-no-info"), s && s.removeClass("sm-lightbox-no-info"), r ? (this._plugInlineNode(d.one('[data-name="' + r + '"]'), l), i.Tracker.createEvent(i.CATEGORY.LIGHTBOX_IMAGE_TOOL, "Button Click", {
                            label: "CaptionRaw" === r ? "Caption" : r
                        }).log()) : (e.use("sm-nodeedit", function() {
                            e.Array.each(h, function(e) {
                                var t = d.one('[data-name="' + e + '"]');
                                n._plugInlineNode(t, l)
                            }), n._centerPanelNode.one('[data-name="Title"] input').focus().set("value", "").set("value", l.get("Title"))
                        }), i.Tracker.createEvent(i.CATEGORY.LIGHTBOX_IMAGE_TOOL, "Button Click", {
                            label: "All"
                        }).log())
                    } else this._plugInlineNode(o, l), i.Tracker.createEvent(i.CATEGORY.LIGHTBOX_IMAGE_TOOL, "Button Click", {
                        label: "CaptionRaw" === a ? "Caption" : a
                    }).log()
                }
            },
            _plugInlineNode: function(t, i) {
                var s, o = t.getData("name"),
                    a = t.getData("type"),
                    n = t.getData("placeholder"),
                    l = this;
                s = "Keywords" === o ? i.get("Keywords").join("; ") : i.get(o), t.unplug(), e.use("sm-nodeedit", function() {
                    t.plug(e.SM.Plugin.InlineEdit, {
                        value: s,
                        type: a,
                        placeholder: n
                    }), t.inlineedit.on("save", l._handleInlineEditSave, l, o, i), t.inlineedit.on("cancel", l._handleInlineEditCancel, l, o), l._footerNode.addClass("sm-lightbox-has-plugged-node"), l._hasInlineNode = !0
                })
            },
            _handleInlineEditSave: function(t, s) {
                var o = t.value,
                    a = this.get("galleryAlbum"),
                    n = this._host.get("image");
                n.set(s, o), n.save({
                    data: {
                        ImageID: n.get("ImageID"),
                        ImageKey: n.get("ImageKey"),
                        GalleryAlbumID: a ? a.get("AlbumID") : 0,
                        GalleryAlbumKey: a ? a.get("AlbumKey") : ""
                    }
                }, e.bind(this._afterInlineEditSave, this, s)), i.Tracker.createEvent(i.CATEGORY.LIGHTBOX_IMAGE_TOOL, "Submit", {
                    label: "CaptionRaw" === s ? "Caption" : s
                }).log()
            },
            _handleInlineEditCancel: function(e, t) {
                this._checkReloadInfo(e), i.Tracker.createEvent(i.CATEGORY.LIGHTBOX_IMAGE_TOOL, "Cancel", {
                    label: "CaptionRaw" === t ? "Caption" : t
                }).log()
            },
            _afterInlineEditSave: function(t) {
                var i = this._compileTemplates(),
                    s = this._centerPanelNode,
                    o = this._host.get("image"),
                    a = o.get("CanEdit"),
                    n = o.get("ShowKeywords"),
                    l = a ? "sm-inlineedit-node" : "";
                "Title" === t ? s.one('[data-name="Title"]').replace(i.imageTitle({
                    title: o.get("Title"),
                    canEdit: a,
                    inlineClass: l
                })) : "CaptionRaw" === t ? s.one('[data-name="CaptionRaw"]').replace(i.imageCaption({
                    caption: o.get("Caption"),
                    showFileName: o.get("ShowFileName"),
                    fileName: o.get("FileName"),
                    canEdit: a,
                    inlineClass: l
                })) : "Keywords" === t && s.one('[data-name="Keywords"]').replace(i.imageKeywords({
                    keywords: o.get("Keywords"),
                    photoBy: o.get("PhotoBy"),
                    canEdit: a,
                    showKeywords: n,
                    inlineClass: l
                })), this._checkReloadInfo({
                    afterSave: !0
                }), e.fire("image:updated", {
                    image: o,
                    updates: {
                        Title: o.get("Title"),
                        Caption: o.get("Caption"),
                        CaptionRaw: o.get("CaptionRaw"),
                        Keywords: o.get("Keywords")
                    },
                    src: "lightbox"
                })
            },
            _handleKeywordClick: function(e) {
                this._host.boundingBox.hasClass("sm-lightbox-info-expanded") || e.preventDefault()
            },
            _onMobileImageClick: function() {
                var e = this._host;
                e._autoHideTimer && (e._autoHideTimer.cancel(), e._autoHideTimer = null), e._mouseEventHandler && (e._mouseEventHandler.detach(), e._mouseEventHandler = null), e._boundingBox.toggleClass("sm-lightbox-clean"), e._boundingBox.removeClass("sm-lightbox-info-expanded"), this._footerNode.one(".sm-lightbox-info").getDOMNode().scrollTop = 0
            },
            _onMobileInfoHover: function() {
                var e = this._host;
                e._autoHideTimer && (e._autoHideTimer.cancel(), e._autoHideTimer = null), e._boundingBox.hasClass("sm-lightbox-info-expanded") || setTimeout(function() {
                    e._boundingBox.addClass("sm-lightbox-info-expanded")
                }, 50)
            },
            _checkReloadInfo: function(t) {
                var i = this._centerPanelNode.all(".sm-inlineedit-plugged"),
                    s = i.size();
                t = e.merge({}, t), t.afterSave || s--, 0 === s && (this._renderInfo(), this._footerNode.removeClass("sm-lightbox-has-plugged-node"), this._hasInlineNode = !1)
            },
            _checkAutoStart: function() {
                !this._hasInlineNode && this._host._autoHideControls && this._host._startAutoHideControls()
            },
            _afterFooterMouseEnter: function() {
                this._host._stopAutoHideControls()
            },
            _afterFooterMouseLeave: function() {
                this._checkAutoStart();
                var t = this;
                e.later(250, null, function() {
                    t._footerNode.one(".sm-lightbox-info").getDOMNode().scrollTop = 0
                })
            },
            _afterHeaderMouseEnter: function() {
                this._host._stopAutoHideControls()
            },
            _afterHeaderMouseLeave: function() {
                this._host._autoHideControls && this._host._startAutoHideControls()
            },
            _afterHide: function() {
                this._imageButtons.closeAll()
            },
            _onImageUpdated: function(e) {
                this._host.get("visible") && this._host.get("autoRender") && "lightbox" !== e.src && (this._host._renderBody(), this._host._renderFooter())
            },
            _afterFullScreen: function() {
                this._imageButtons.closeAll()
            },
            _afterRenderFooter: function(e) {
                this._footerNode = e.footerNode, this._leftPanelNode = e.leftPanelNode, this._centerPanelNode = e.centerPanelNode, this._rightPanelNode = e.rightPanelNode, this._render()
            },
            _afterImageChange: function() {
                this.rendered && (this._renderInfo(), this._syncToolbar())
            },
            _onBuyButtonClick: function(t) {
                if (!e.SM.Page.uxdisabled) {
                    var s, o = t.currentTarget,
                        a = o.getData("value"),
                        n = this._host.get("image"),
                        l = n.getRelated("Album");
                    t.preventDefault();
                    var d = {
                        node_type: "Page",
                        node_id: h.nodeId,
                        node_uri: window.location.pathname
                    };
                    void 0 !== h.galleryView && (d.node_type = "Gallery", d.gallery_style = h.galleryView.get("galleryStyle")), i.Tracker.createEvent(i.CATEGORY.BUY, "Start", {
                        property: "Lightbox",
                        isOwner: !(!h.user || !h.user.isOwner)
                    }).addContext(i.CONTEXT.NODE, d).log(), "buy" === a && (e.DOM.winWidth() < e.SM.Page.responsiveDesign.mobileMaxWidth ? (s = SM["import"]("sm-cart-helpers"), s.deprecatedShowAddToCart(n, l)) : this._showBuyMenu(o, n, l, this.get("galleryAlbum")))
                }
            },
            _showBuyMenu: function(t, i, s, o) {
                this._buyMenu || (this._buyMenu = new e.SM.Menus.Buy({
                    galleryAlbum: o
                }), this._buyMenu.menu.render(), this._buyMenu.target = t), this._buyMenu.update(i, s, o), this._buyMenu.menu.show({
                    anchorPoint: t
                })
            },
            _handleImageSizeChange: function(e) {
                e.size !== this._host.get("imageSize") && ("manual" === this.get("imageSizeChange") ? this.fire("imageSizeSelected", {
                    size: e.size
                }) : (this._host.set("imageSize", e.size), this._host._renderBody()), i.Tracker.createEvent(i.CATEGORY.LIGHTBOX, "Change Image Size", {
                    label: d[e.size] || e.size
                }).log())
            }
        }, {
            NS: "basic",
            ATTRS: {
                imageSizeChange: {
                    value: "automatic"
                },
                galleryAlbum: {},
                requestData: {},
                realGallery: {
                    value: !0
                },
                buyButtonStyle: {
                    value: "button"
                },
                buyButtonSkin: {
                    value: "accent"
                },
                showTitle: {
                    value: !0
                },
                showCaption: {
                    value: !0
                },
                showKeywords: {
                    value: !0
                }
            }
        }), e.namespace("SM.Views.Lightbox.Plugins").LiveChat = e.Base.create("sm-lightbox-livechat", e.Plugin.Base, [], {
            classNames: {
                anchoredRight: "sm-livechat-right",
                compactContainer: "livechat-compact-container"
            },
            initializer: function() {
                this._compactContainer = e.one("#" + this.classNames.compactContainer), this.afterHostEvent("visibleChange", this._afterVisibleChange, this)
            },
            _anchorChatBottom: function() {
                this._compactContainer && this._compactContainer.removeClass(this.classNames.anchoredRight)
            },
            _anchorChatRight: function() {
                this._compactContainer && this._compactContainer.addClass(this.classNames.anchoredRight)
            },
            _afterVisibleChange: function(t) {
                window.LC_API && !e.Object.isEmpty(window.LC_API) && (t.newVal ? this._anchorChatRight() : this._anchorChatBottom())
            }
        }, {
            NS: "livechat",
            ATTRS: {}
        }), e.namespace("SM.Views.Lightbox.Plugins").Nav = e.Base.create("sm-lightbox-nav", e.Plugin.Base, [], {
            navTemplate: '<div class="sm-lightbox-nav sm-lightbox-nav-<%=data.position%>"><%== Y.SM.Templates.button({icon: data.icon,value: data.position,noChrome: true}) %></div>',
            initializer: function() {
                this.afterHostEvent("render", this._afterRender, this), this.afterHostEvent("visibleChange", this._afterVisibleChange, this)
            },
            destructor: function() {
                this._detachEvents()
            },
            _afterRender: function() {
                this._renderNav()
            },
            _renderNav: function() {
                var t = this.get("host"),
                    i = t.getStdModNode(e.WidgetStdMod.HEADER, !0),
                    s = e.Template.Micro.compile(this.navTemplate);
                this._leftNode = e.Node.create(s({
                    position: "left",
                    icon: "AngleBracketLeftSlim"
                })), this._rightNode = e.Node.create(s({
                    position: "right",
                    icon: "AngleBracketRightSlim"
                })), i.append(this._leftNode).append(this._rightNode)
            },
            _attachEvents: function() {
                var t = this.get("host"),
                    i = t.get("contentBox"),
                    s = t.getStdModNode(e.WidgetStdMod.HEADER, !0);
                this._detachEvents(), this._eventHandles = [], this._eventHandles.push(s.delegate("click", this._onNavButtonClick, ".sm-lightbox-nav .sm-button", this), e.on("keyup", this._onKeyUp, document, this)), e.UA.touchEnabled ? this._eventHandles.push(i.on("flick", this._onTilePhotoFlick, null, this), i.on("touchstart", this._onTouchStart, this)) : this._eventHandles.push(i.delegate("click", this._onTilePhotoClick, ".sm-tile-single .sm-tile-content", this))
            },
            _detachEvents: function() {
                e.Array.each(this._eventHandles, function(e) {
                    e.detach()
                })
            },
            _afterVisibleChange: function(e) {
                e.newVal ? this._attachEvents() : this._detachEvents()
            },
            _onNavButtonClick: function(t) {
                if (!e.SM.Page.uxdisabled) {
                    var i = t.currentTarget,
                        s = i.getData("value");
                    i.get("parentNode").hasClass("sm-lightbox-nav-disabled") || this.fire("navigate", {
                        direction: s
                    })
                }
            },
            _onKeyUp: function(t) {
                if (!e.SM.Page.uxdisabled && this.get("enableKeyboard")) {
                    var i, s = t.charCode;
                    37 === s ? i = "left" : 39 === s && (i = "right"), i && this.fire("navigate", {
                        direction: i
                    })
                }
            },
            toggleNavArrows: function(e, t) {
                var i = this._leftNode,
                    s = this._rightNode;
                e ? i.removeClass("sm-lightbox-nav-disabled") : i.addClass("sm-lightbox-nav-disabled"), t ? s.removeClass("sm-lightbox-nav-disabled") : s.addClass("sm-lightbox-nav-disabled")
            },
            _onTilePhotoClick: function(t) {
                e.SM.Page.uxdisabled || (t.halt(), this.fire("navigate", {
                    direction: "right"
                }))
            },
            _onTilePhotoFlick: function(e) {
                var t, i = e.flick,
                    s = this.get("host");
                if (!s.isZoomed()) {
                    var o = e.target.getDOMNode().tagName;
                    "INPUT" !== o && "TEXTAREA" !== o && "x" === i.axis && Math.abs(i.distance) >= 96 && (t = i.distance > 0 ? "left" : "right", e.preventDefault(), this.fire("navigate", {
                        direction: t
                    }))
                }
            },
            _onTouchStart: function(e) {
                e.touches && e.touches.length > 1 && this.get("host").get("boundingBox").addClass("sm-lightbox-clean")
            }
        }, {
            NS: "nav",
            ATTRS: {
                enableKeyboard: {
                    value: !0
                }
            }
        });
        var r = e.Base.create("sm-lightbox-exiftab", e.View, [], {
                render: function() {
                    var t = this.get("container");
                    this._basicView || (this._basicView = new e.SM.Views.ImageInfo.Basic,
                        t.append(this._basicView.get("container"))), this._basicView.setAttrs({
                        image: this.get("image")
                    }), this._basicView.render(), this._detailedView || (this._detailedView = new e.SM.Views.ImageInfo.Detailed, t.append(this._detailedView.get("container"))), this._detailedView.setAttrs({
                        image: this.get("image")
                    }), this._detailedView.render(), this._mapView || (this._mapView = new e.SM.Views.ImageInfo.Map, t.append(this._mapView.get("container"))), this._mapView.setAttrs({
                        image: this.get("image"),
                        width: 300,
                        height: 225
                    }), this._mapView.render()
                }
            }, {
                ATTRS: {
                    image: {},
                    galleryAlbum: {}
                },
                checkDisplay: function(e) {
                    var t = e.getRelated("Album");
                    return t.get("EXIF")
                }
            }),
            c = e.Base.create("sm-lightbox-comments", e.View, [], {
                render: function() {
                    var t, i = this.get("container"),
                        s = this.get("image");
                    this._commentsView || (this._commentsView = new e.SM.Views.CommentList.Generic), this._commentsView.setAttrs({
                        type: "Image",
                        typeId: s.get("ImageID"),
                        typeKey: s.get("ImageKey")
                    }), this._commentsView.render(), this._commentsView.commentList.addcomment.set("addMessage", "Add a comment to rate this Image"), t = this._commentsView.get("container"), t.inDoc() || i.append(t)
                }
            }, {
                ATTRS: {
                    image: {},
                    galleryAlbum: {}
                },
                checkDisplay: function(e) {
                    var t = e.getRelated("Album");
                    return t.get("Comments")
                }
            }),
            u = e.Base.create("sm-lightbox-info", e.View, [], {
                socialTemplate: '<div class="yui3-g sm-lightbox-imageinfo-social"><div class="yui3-u sm-lightbox-imageinfo-fb"></div><div class="yui3-u sm-lightbox-imageinfo-twitter"></div></div>',
                actionsTemplate: '<div class="sm-lightbox-imageinfo-actions"><div class="yui3-g"><% var i; %><% if (data.canShare) { i++; %><div class="yui3-u-1-2">' + e.SM.Templates.button({
                    icon: "Action",
                    label: "Share",
                    value: "share",
                    size: "small",
                    noChrome: !0
                }) + '</div><% } %><% if (i === 2) { %></div><div class="yui3-g"><% } %><% if (data.image.CanDownload) { %><div class="yui3-u-1-2">' + e.SM.Templates.button({
                    icon: "Download",
                    label: "Download",
                    value: "download",
                    size: "small",
                    noChrome: !0
                }) + '</div><% } %><div class="yui3-u-1-2">' + e.SM.Templates.button({
                    icon: "ScreenExpand3",
                    label: "Preview Size",
                    value: "preview",
                    size: "small",
                    noChrome: !0
                }) + '</div><% if (data.image.PhotoBy.album.url) { i++ %><div class="yui3-u-1-2">' + e.SM.Templates.button({
                    icon: "Link",
                    label: "Original Gallery",
                    value: "link",
                    size: "small",
                    noChrome: !0,
                    href: " "
                }) + '</div><% } %></div><div class="yui3-g "><div class="yui3-u-1-2">' + e.SM.Templates.button({
                    icon: "Slideshow",
                    label: "Slideshow",
                    value: "slideshow",
                    size: "small"
                }) + '</div><% if (data.CanBuy) { %><div class="yui3-u-1-2">' + e.SM.Templates.button({
                    icon: "CartAdd",
                    label: "Add to Cart",
                    value: "buy",
                    size: "small",
                    skin: "accent"
                }) + "</div><% } %></div></div>",
                captionTemplate: '<div class="sm-lightbox-imageinfo-caption"><% if (data.image.Title) { %><h2><%= data.image.Title %></h2><% } %><div class="sm-lightbox-imageinfo-caption-block"><p><% if (data.image.ShowFileName) { %><%= data.image.FileName %><% } else { %><%== data.image.Caption %><% } %></p><% if (data.showKeywords && data.image.Keywords) { %><p><span class="sm-fonticon sm-fonticon-small sm-fonticon-Tags"></span><%= data.image.Keywords %></p></div><% } %><% if (data.image.PhotoBy.user.name || data.image.PhotoBy.album.url) { %><% if (data.image.PhotoBy.user.name) { %><p class="sm-lightbox-imageinfo-caption-photoby"><a href="<%= data.image.PhotoBy.user.url %>" class="sm-text-mini"><%= data.image.PhotoBy.user.name %></a></p><% } %><% } %></div>',
                initializer: function() {
                    this._compiledTemplates = this._compileTemplates(), this._eventHandles = []
                },
                _cleanup: function() {
                    var t, i = [this._buyMenu, this._dlButton, this._shareButton, this._previewMenu];
                    for (e.each(this._eventHandles, function(e) {
                            e.detach()
                        }), t = 0; t < i.length; t++) i[t] && i[t].destroy()
                },
                render: function() {
                    var t, i, s = this.get("host"),
                        o = this.get("container"),
                        a = this.get("image"),
                        n = a.getRelated("Album"),
                        l = this.get("galleryAlbum"),
                        h = {
                            canQuickShare: !0,
                            canShare: !0,
                            canRank: !0,
                            canBuy: !0,
                            image: a.toJSON()
                        };
                    this._cleanup(), l && (h.canQuickShare = l.get("CanQuickShare"), h.canShare = l.get("CanShare"), h.canRank = l.get("CanRank"), h.canBuy = l.get("IsSellable"), h.showKeywords = l.get("ShowKeywords")), h.canQuickShare = h.canQuickShare && n.get("CanQuickShare"), h.canShare = h.canShare && n.get("CanShare"), h.canRank = h.canRank && n.get("CanRank"), h.canBuy = h.canBuy && a.get("CanBuy"), h.showKeywords = h.showKeywords && n.get("ShowKeywords"), h.image.Keywords = h.image.Keywords.replace(/\,/g, " |"), o.setHTML(""), o.append(this._compiledTemplates.actions(h)), o.append(this._compiledTemplates.caption(h)), h.canQuickShare && (o.append(this._compiledTemplates.social()), this._fbTimer && this._fbTimer.cancel(), this._fbTimer = e.later(500, this, function() {
                        var t = new e.SM.Facebook,
                            i = new e.SM.Twitter;
                        t.renderLikeButton(o.one(".sm-lightbox-imageinfo-fb"), {
                            colorScheme: e.SM.Facebook.LIKE_BUTTON_OPTIONS.COLOR_SCHEME.DARK,
                            layout: e.SM.Facebook.LIKE_BUTTON_OPTIONS.LAYOUT.BUTTON_COUNT
                        }), i.renderTweetButton(o.one(".sm-lightbox-imageinfo-twitter"))
                    })), t = o.one('[data-value="link"]'), i = o.one('[data-value="photoBy"]'), s._downloadIconButton = o.one('[data-value="download"]'), s._shareIconButton = o.one('[data-value="share"]'), this._timer && this._timer.cancel(), this._timer = e.later(500, this, function() {
                        i && (i.one(".sm-button-label").setHTML(h.image.PhotoBy.user.name), i.setAttribute("href", h.image.PhotoBy.user.url)), t && t.setAttribute("href", h.image.PhotoBy.album.url), this._renderBuyMenu(a, n, l), s._renderImageSizeMenu(a, o.one('[data-value="preview"]')), e.delegate("click", s._handleIconClicked, o, ".sm-lightbox-imageinfo-actions button", s)
                    }), this._eventHandles.push(o.one('[data-value="slideshow"]').on("click", s.enterFullScreenAndPlay, s))
                },
                _renderBuyMenu: function(t, i, s) {
                    var o = this.get("container").one('[data-value="buy"]');
                    this._buyMenu = new e.SM.Menus.Buy({
                        galleryAlbum: s
                    }), this._buyMenu.menu.render(), this._buyMenu.menu.get("container").setStyle("zIndex", 1e3), o && this._eventHandles.push(o.on("click", this._handleBuyButtonClick, this)), this._buyMenu.update(t, i, s, null, !0)
                },
                _handleBuyButtonClick: function(e) {
                    this._buyMenu._loadMenu(), this._buyMenu.menu.show({
                        anchorPoint: e.target
                    })
                },
                _compileTemplates: function() {
                    return {
                        social: e.Template.Micro.compile(this.socialTemplate),
                        actions: e.Template.Micro.compile(this.actionsTemplate),
                        caption: e.Template.Micro.compile(this.captionTemplate)
                    }
                }
            }, {
                ATTRS: {
                    image: {},
                    galleryAlbum: {}
                },
                checkDisplay: function() {
                    return !0
                }
            });
        e.namespace("SM.Views.Lightbox.Plugins").Social = e.Base.create("sm-lightbox-social", e.Plugin.Base, [], {
            containerTemplate: '<div class="sm-lightbox-imageinfo-container"></div>',
            initializer: function() {
                var e = this.get("host");
                this._eventHandles = [], this._eventHandles.push(e.once("initPanel", this._onceInitPanel, this), e.on("render", this._onceHostRender, this), this.afterHostEvent("sm-slideshow-view:indexChange", this._afterSlideshowIndexChange, this), this.onHostEvent("sm-slideshow-view:exitFullScreen", e.pauseSlideshow, e))
            },
            destructor: function() {
                e.Array.each(this._eventHandles, function(e) {
                    e.detach()
                }), this._tabView && this._tabView.destroy()
            },
            _initTabSubViews: function() {
                var t = this.get("host"),
                    i = t.get("galleryAlbum");
                return this._tabSubViews = [], this._activeSubViewIndex = 0, this._tabSubViews.push({
                    containerId: e.guid(),
                    viewClass: u,
                    viewInstance: null,
                    icon: "Info"
                }), (!i || i.get("Comments")) && this._tabSubViews.push({
                    containerId: e.guid(),
                    viewClass: c,
                    viewInstance: null,
                    icon: "Comments"
                }), (!i || i.get("EXIF")) && this._tabSubViews.push({
                    containerId: e.guid(),
                    viewClass: r,
                    viewInstance: null,
                    icon: "Camera"
                }), this._tabSubViews
            },
            _renderTabView: function() {
                if (!this._tabView) {
                    var t, i = this.get("host"),
                        s = i._panel,
                        o = e.Node.create(this.containerTemplate),
                        a = [],
                        n = [],
                        l = this._initTabSubViews();
                    e.Array.each(l, function(e) {
                        a.push({
                            anchor: e.containerId,
                            icon: e.icon
                        }), n.push('<div id="' + e.containerId + '"></div>')
                    }), s.setStdModContent(e.WidgetStdMod.FOOTER, o, e.WidgetStdMod.AFTER), t = e.Node.create('<div class="sm-lightbox-imageinfo-tabs">' + e.SM.Templates.tabs({
                        tabs: a
                    }) + "<div>" + n.join("") + "</div></div>"), o.append(t), this._tabView = new e.TabView({
                        srcNode: t
                    }).render(), this._eventHandles.push(this._tabView.after("selectionChange", this._afterTabSelectionChange, this))
                }
            },
            _toggleTabsDisplay: function() {
                var t = this.get("image"),
                    i = this._tabView.get("boundingBox").all(".yui3-tab");
                e.Array.each(this._tabSubViews, function(s, o) {
                    s.viewClass.checkDisplay(t) ? (i.item(o).show(), e.one("#" + s.containerId).show()) : (i.item(o).hide(), e.one("#" + s.containerId).hide(), this._activeSubViewIndex === o && (this._activeSubViewIndex = 0, this._tabView.selectChild(0)))
                }, this)
            },
            _updateTabSubView: function() {
                var t, i = this._tabSubViews[this._activeSubViewIndex],
                    s = this.get("host"),
                    o = this.get("image");
                i.viewInstance || (i.viewInstance = new i.viewClass({
                    container: e.one("#" + i.containerId)
                })), t = i.viewInstance.get("image"), t !== o && (i.viewInstance.setAttrs({
                    image: o,
                    galleryAlbum: s.get("galleryAlbum"),
                    host: s
                }), i.viewInstance.render())
            },
            _afterTabSelectionChange: function(e) {
                var t = e.newVal.get("index");
                this._activeSubViewIndex !== t && (this._activeSubViewIndex = t, this._updateTabSubView())
            },
            _afterSlideshowIndexChange: function(e) {
                var t = this.get("host"),
                    i = t.get("modelList");
                this.set("image", i.item(e.newVal)), this._toggleTabsDisplay(), this._updateTabSubView()
            },
            _onceInitPanel: function(e) {
                e.panel.get("boundingBox").addClass("sm-lightbox-imageinfo")
            },
            _onceHostRender: function() {
                var e = this.get("host"),
                    t = e.get("startImageId"),
                    i = e.get("modelList");
                this.set("image", i.getById(t)), this._renderTabView(), this._toggleTabsDisplay(), this._updateTabSubView()
            }
        }, {
            NS: "social",
            ATTRS: {
                image: {}
            }
        });
        var g = SM["import"]("sm-dom");
        e.namespace("SM.Views.Lightbox.Plugins").Slideshow = e.Base.create("sm-lightbox-slideshow", e.Plugin.Base, [], {
            initializer: function() {
                this.afterHostEvent("renderFooter", this._afterRenderFooter, this), this.afterHostMethod("_onWindowResize", this._afterWindowResize, this)
            },
            destructor: function() {
                this._detachUIEvents(), this._destroySlideshow(), this.get("host").hide()
            },
            _attachUIEvents: function() {
                this._detachUIEvents(), this._ssButtonEvent = this._leftPanelNode.delegate("click", this.handleSlideshowClick, ".sm-lightbox-play", this)
            },
            _detachUIEvents: function() {
                this._ssButtonEvent && this._ssButtonEvent.detach()
            },
            _afterRenderFooter: function(e) {
                this._leftPanelNode = e.leftPanelNode, this.get("showExternalPlayButton") && (this._renderSlideshowButton(), this._attachUIEvents())
            },
            _renderSlideshowButton: function() {
                this.get("host").get("boundingBox").addClass("sm-lightbox-has-slideshow"), this._leftPanelNode.setHTML(e.SM.Templates.button({
                    className: "sm-lightbox-play",
                    icon: "PlayerPlay",
                    size: "large",
                    noChrome: !0
                }))
            },
            handleSlideshowClick: function(t, s) {
                if (!e.SM.Page.uxdisabled) {
                    var o = s ? s : "Lightbox";
                    i.Tracker.createEvent(i.CATEGORY.SLIDESHOW, "Start", {
                        property: o
                    }).log();
                    var a = this._leftPanelNode.one(".sm-fonticon");
                    if (!this._slideshow || this._slideshow.get("destroyed")) {
                        var n = this;
                        e.use("sm-slideshow-view", function() {
                            n._createSlideshow()
                        })
                    } else a.hasClass("sm-fonticon-PlayerPlay") ? (a.replaceClass("sm-fonticon-PlayerPlay", "sm-fonticon-PlayerPause"), this._slideshow.play()) : (a.replaceClass("sm-fonticon-PlayerPause", "sm-fonticon-PlayerPlay"), this._slideshow.pause())
                }
            },
            _createSlideshow: function() {
                var t, i, s = this.get("host"),
                    n = this.get("modelList"),
                    l = s.get("image"),
                    h = n.indexOf(l),
                    d = n.get("PageSize"),
                    r = Math.floor(l.get("Index") / d) + 1,
                    c = s.supportsFullscreen({
                        allowChrome: !0
                    }),
                    u = this.get("slideshowConfig") || {},
                    g = s.get("infobarWidth");
                i = new e.SM.Models.GalleryImageList, h -= h % d, i.add(n.toJSON().slice(h, h + d)), i._set("PageNumber", r), i._set("PageSize", n.get("PageSize")), i._set("TotalItems", n.get("TotalItems")), i._set("TotalPages", n.get("TotalPages")), i._lastApiRequest = e.merge(n._lastApiRequest), i._lastApiRequest.data = e.merge(i._lastApiRequest.data), u = e.merge({
                    transitionSpeed: 2,
                    speed: 4,
                    showCaptions: !0
                }, u, {
                    showFullscreen: !1,
                    keyboardControls: !0,
                    showNavigation: !1,
                    showPlayButton: !this.get("showExternalPlayButton"),
                    autoStart: !0,
                    heightSource: c ? "auto" : "fixed",
                    height: e.DOM.winHeight(),
                    currentImage: l,
                    modelList: i
                }), this._slideshow = t = new e.SM.Views.Slideshow(u), t.plug(e.SM.SlideshowGalleryPlugin), t.set("index", l.get("Index")), s.nav && (s.nav.toggleNavArrows(!0, !0), s.nav.set("enableKeyboard", !1), this._ssEvents = [s.nav.on("navigate", this._onLightboxNavigate, this)]), "image" === g && (s.set("infobarWidth", "full"), s._syncFooter(), this._hostInfoBarWidth = g), s.get("boundingBox").addClass("sm-lightbox-slideshow-fullscreen"), this.get("showExternalPlayButton") && this._leftPanelNode.one(".sm-fonticon").replaceClass("sm-fonticon-PlayerPlay", "sm-fonticon-PlayerPause"), s.setStdModContent(e.WidgetStdMod.BODY, t.get("container")), this._ssEvents.push(s.on("visibleChange", function(e) {
                    e.newVal || (this._destroySlideshow(), s.hide())
                }, this)), c ? (s._isFullscreen ? t.render() : (s.once(a, t.render, t), s.toggleFullScreen()), this._ssEvents.push(s.on(o, this._destroySlideshow, this))) : t.render(), s.set("autoRender", !1)
            },
            _onLightboxNavigate: function(e) {
                var t = e.direction;
                e.preventDefault(), this._slideshow.pause(), this.get("showExternalPlayButton") && this._leftPanelNode.one(".sm-fonticon").replaceClass("sm-fonticon-PlayerPause", "sm-fonticon-PlayerPlay"), "left" === t ? this._slideshow.previous() : "right" === t && this._slideshow.next()
            },
            _destroySlideshow: function() {
                var t = this.get("host");
                t.nav && t.nav.set("enableKeyboard", !0), t.get("boundingBox").removeClass("sm-lightbox-slideshow-fullscreen"), t.set("autoRender", !0), this._slideshow && this._slideshow.destroy(), new e.EventHandle(this._ssEvents).detach(), this.get("showExternalPlayButton") && this._leftPanelNode.one(".sm-fonticon").replaceClass("sm-fonticon-PlayerPause", "sm-fonticon-PlayerPlay"), this._hostInfoBarWidth && (t.set("infobarWidth", this._hostInfoBarWidth), t._syncFooter())
            },
            _afterWindowResize: function() {
                if (this._slideshow) {
                    var e = this.get("host");
                    e.supportsFullscreen({
                        allowChrome: !0
                    }) || (this._slideshow.set("height", e._viewportHeight), this._slideshow._resize())
                }
            },
            _supportsFullscreen: function() {
                return g.fullscreenEnabled
            },
            _requestFullscreenForNode: function(e) {
                if (e.requestFullScreen) e.requestFullScreen();
                else if (e.mozRequestFullScreen) e.mozRequestFullScreen();
                else {
                    if (!e.webkitRequestFullScreen) return !1;
                    e.webkitRequestFullScreen()
                }
                return !0
            }
        }, {
            NS: "slideshow",
            ATTRS: {
                modelList: {},
                slideshowConfig: {},
                showExternalPlayButton: {
                    value: !0
                }
            }
        })
    }(), SM.currentModule = null
}, "", {
    requires: ["sm", "base", "event-flick", "event-touch", "event-mouseenter", "event-resize", "panel", "plugin", "sm-buy-menu", "sm-cart-helpers", "sm-comment-view-deprecated", "sm-dom", "sm-facebook", "sm-image-buttons-deprecated", "sm-imageinfo-view", "sm-imagesize-menu", "sm-imagesrcconfig", "sm-models-usernode", "sm-page-tooltip", "sm-slideshow-gallery-plugin", "sm-templates-button", "sm-templates-form", "sm-twitter", "sm-video-view", "template-micro", "sm-analytics", "sm-page"]
});
YUI.add("sm-live-chat", function(t) {
    SM.currentModule = "sm-live-chat";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        var e, n, a = SM["import"]("lodash"),
            i = SM["import"]("sm-dom"),
            o = SM["import"]("rsvp"),
            s = 0,
            r = 1,
            c = 2,
            _ = 3,
            d = i.doc,
            h = i.win,
            m = ["/close"];
        h.__lc = {
            license: SM.env.liveChat.license
        }, h.LC_API = {}, t.namespace("SM").LiveChat = module.exports = {
            hasMenu: !1,
            _accountSettingsUrlTemplate: a.template("https://<%- sslHost %>/settings?nick=<% print(encodeURIComponent(nickName)); %>"),
            _adminUrlTemplate: a.template("https://<%- sslHost %>/admin/info/user?NickName=<% print(encodeURIComponent(nickName)); %>"),
            addCustomParam: function(t) {
                __lc.params || (__lc.params = []), __lc.params.push(t)
            },
            displayChat: function() {
                var t = this.getChatWindowState();
                switch (t) {
                    case c:
                    case s:
                        LC_API.start_chat();
                        break;
                    case r:
                        LC_API.open_chat_window();
                        break;
                    default:
                        return
                }
            },
            getUserAccountSettingsUrl: function() {
                return this._accountSettingsUrlTemplate({
                    nickName: this.nickName,
                    sslHost: this.sslHost
                })
            },
            getUserAdminPage: function() {
                return this._adminUrlTemplate({
                    nickName: this.nickName,
                    sslHost: this.sslHost
                })
            },
            getChatWindowState: function() {
                return LC_API.chat_window_maximized() ? s : LC_API.chat_window_minimized() ? r : LC_API.chat_window_hidden() ? c : _
            },
            initialize: function() {
                if (!e) {
                    e = o.defer(), this._setupCustomParams(), this._setupCallbacks();
                    var t, n = d.createElement("script");
                    n.async = !0, n.src = "//cdn.livechatinc.com/tracking.js", n.onerror = e.reject, t = d.getElementsByTagName("script")[0], t.parentNode.insertBefore(n, t)
                }
                return e.promise
            },
            _isForcedChatLocation: function() {
                var t = !0,
                    e = !1,
                    n = void 0;
                try {
                    for (var a, i = m[Symbol.iterator](); !(t = (a = i.next()).done); t = !0) {
                        var o = a.value;
                        if (o === window.location.pathname) return !0
                    }
                } catch (s) {
                    e = !0, n = s
                } finally {
                    try {
                        !t && i["return"] && i["return"]()
                    } finally {
                        if (e) throw n
                    }
                }
                return !1
            },
            _setupCallbacks: function() {
                LC_API.on_before_load = this._onBeforeLoad.bind(this), LC_API.on_after_load = this._onAfterLoad.bind(this), LC_API.on_chat_started = this._onChatStart.bind(this), LC_API.on_chat_state_changed = this._onChatStateChanged.bind(this), LC_API.on_chat_window_opened = this._onChatStart.bind(this), LC_API.on_chat_ended = this._onChatEnd.bind(this), LC_API.on_chat_window_minimized = this._onChatMinimized.bind(this)
            },
            _setupCustomParams: function() {
                var t = this.customParams;
                if (__lc.params = [{
                        name: "Account Settings",
                        value: this.getUserAccountSettingsUrl()
                    }, {
                        name: "Admin Page",
                        value: this.getUserAdminPage()
                    }, {
                        name: "Homepage",
                        value: this.userHomepage
                    }], t)
                    for (var e = 0, n = t.length; n > e; e++) this.addCustomParam(t[e])
            },
            _onAfterLoad: function() {
                return e.promise._state ? void this.displayChat() : void e.resolve()
            },
            _onBeforeLoad: function() {
                LC_API.visitor_engaged() ? LC_API.open_chat_window() : this._isForcedChatLocation() || LC_API.hide_chat_window()
            },
            _onChatEnd: function() {
                this._chatEnded = !0
            },
            _onChatMinimized: function() {},
            _onChatStart: function() {},
            _onChatStateChanged: function(t) {
                n = t.state
            }
        }
    }(), SM.currentModule = null
}, "", {
    requires: ["lodash", "rsvp", "sm", "sm-dom"]
});
YUI.add("sm-load-external-svg", function(e) {
    SM.currentModule = "sm-load-external-svg";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: !0
        });
        var e = SM["import"]("sm-dom"),
            r = e.doc,
            o = SM["import"]("sm-io-xhr-transport"),
            t = {};
        exports["default"] = function(e) {
            return t[e] ? Promise.resolve() : new Promise(function(n, u) {
                var d = {
                    method: "GET",
                    headers: {
                        "x-requested-with": null
                    },
                    responseType: "document",
                    url: e
                };
                o.send(d, function(o, d) {
                    o || !d.documentElement ? u() : (t[e] = !0, r.body.insertBefore(d.documentElement, r.body.childNodes[0]), n())
                })
            })
        }, module.exports = exports["default"]
    }(), SM.currentModule = null
}, "", {
    requires: ["sm-dom", "sm-io-xhr-transport"]
});
YUI.add("sm-map", function(e) {
    SM.currentModule = "sm-map";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        var t = e.Leaflet,
            a = '&copy; <a href="https://www.mapbox.com/map-feedback/">Mapbox</a> &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',
            s = "https://api.mapbox.com/styles/v1/smugmug/ciqik1p6l0000bdnp18jsr2fx/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1Ijoic211Z211ZyIsImEiOiJjaXFpanV4bjAwNnFjZnlucG55c2c0OXBsIn0.lgUMqNddcj0P85SXQVRejQ",
            i = "https://api.mapbox.com/styles/v1/smugmug/ciqikr4xb0001bima0uo6subk/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1Ijoic211Z211ZyIsImEiOiJjaXFpanV4bjAwNnFjZnlucG55c2c0OXBsIn0.lgUMqNddcj0P85SXQVRejQ",
            o = e.Base.create("sm-map", e.View, [], {
                initializer: function() {
                    this.controls = {}, this.images = this.get("images"), this.layers = {}, this.map = null, this.mapNode = null, this.markers = [], this.markerHash = {}
                },
                destructor: function() {
                    this._detachMapEvents(), e.Object.each(this.markers, function(e, t) {
                        delete this.markers[t], e = null
                    }, this), e.Object.each(this.controls, function(e, t) {
                        delete this.controls[t], e = null
                    }, this), e.Object.each(this.layers, function(e, t) {
                        delete this.layers[t], e = null
                    }, this), this.map.remove(), this.map = null, this.mapNode && this.mapNode.remove(!0), this.mapNode = null
                },
                _attachMapEvents: function() {
                    this.map.on("baselayerchange", this._onMapBaseLayerChange, this), this.layers.markerCluster && this.layers.markerCluster.on("clusterclick", this._onMarkerClusterClick, this), this.map.on("overlayadd", function(e) {
                        this.overlayLayer = e.name
                    }, this), this.map.on("overlayremove", function() {
                        this.overlayLayer = ""
                    }, this)
                },
                _detachMapEvents: function() {
                    this.layers.markerCluster && this.layers.markerCluster.off("clusterclick")
                },
                _onMapBaseLayerChange: function(e) {
                    this.selectedLayer = e.name
                },
                addImageMarkers: function(e, t) {
                    var a, s = [],
                        i = this;
                    e.length && (e.forEach(function(e) {
                        var r = void 0,
                            n = void 0;
                        e.isSmugMugResource ? (r = e.get("ImageKey"), n = e.getExpansion("ImageMetadata"), e = e.get()) : r = i.getKeyFromImage(e);
                        var l = n && 0 !== n.get("Latitude") && 0 !== n.get("Longitude");
                        (0 !== e.Latitude || 0 !== e.Longitude || l) && (i.markerHash[r] || (i.layers.markerCluster ? (a = o.createImageMarker(e, t), i.markers.push(a), i.markerHash[r] = a, s.push(a)) : i.addImageMarker(e, t)))
                    }), this.layers.markerCluster && this.layers.markerCluster.addLayers(s))
                },
                getKeyFromImage: function(t) {
                    var a = t.ImageKey;
                    if (!a && t instanceof e.SM.Models.Image) a = t.get("ImageKey");
                    else if (!a) {
                        var s = t.WebUri.split("-");
                        a = s[s.length - 1]
                    }
                    return a
                },
                addMarker: function(a, s) {
                    var i = t.latLng(a),
                        r = new t.Marker(i, e.merge({
                            icon: s.accent ? o.accentIcon : o.icon
                        }, s));
                    return r.addTo(this.map), this.markers.push(r), r
                },
                addImageMarker: function(e, t) {
                    var a = void 0;
                    if (a = e.isSmugMugResource ? e.get("ImageKey") : this.getKeyFromImage(e), this.markerHash[a]) return this.markerHash[a];
                    var s = o.createImageMarker(e, t);
                    return this.layers.markerCluster ? this.layers.markerCluster.addLayer(s) : s.addTo(this.map), this.markers.push(s), this.markerHash[a] = s, s
                },
                _fitMarkerBounds: function() {
                    var e;
                    if (this.map && this.layers.markerCluster) try {
                        e = this.layers.markerCluster.getBounds(), e.isValid() ? this.map.fitBounds(e) : this.map.fitWorld()
                    } catch (t) {} else this.map && this.map.fitWorld()
                },
                enableZoomControl: function() {
                    this._setZoomControl(!0)
                },
                disableZoomControl: function() {
                    this._setZoomControl(!1)
                },
                enableSatellite: function() {
                    this._setSatellite(!0)
                },
                disableSatellite: function() {
                    this._setSatellite(!1)
                },
                _setZoomControl: function(e) {
                    this.map && (e && !this.map.zoomControl._map ? this.map.zoomControl.addTo(this.map) : !e && this.map.zoomControl._map && this.map.zoomControl.removeFrom(this.map))
                },
                _setSatellite: function(t) {
                    this.map && (t && !this.controls.layer._map ? this.controls.layer.addTo(this.map) : !t && this.controls.layer._map && this.controls.layer.removeFrom(this.map), t && this.controls.layer && e.Node(this.controls.layer._container).one(".leaflet-control-layers-toggle").setStyle("backgroundImage", "none").append('<span class="sm-fonticon sm-fonticon-Menu"></span>'))
                },
                render: function(o) {
                    var r = [];
                    return this.layers.map = new t.TileLayer(s, {
                        attribution: a
                    }), r[r.length] = this.layers.map, this.layers.sat = new t.TileLayer(i, {
                        attribution: a
                    }), this.get("clusters") && (this.layers.markerCluster = new t.MarkerClusterGroup({
                        maxClusterRadius: 50,
                        showCoverageOnHover: !1,
                        spiderfyDistanceMultiplier: 1.3,
                        spiderfyOnMaxZoom: !1,
                        zoomToBoundsOnClick: !1
                    }), r[r.length] = this.layers.markerCluster), o ? this.mapNode = o : this.mapNode = this.get("container").getDOMNode(), e.Node.create('<a href="http://mapbox.com/about/maps" class="mapbox-maplogo" target="_blank">Mapbox</a>').appendTo(this.mapNode), this.map && (this.map.remove(), this.map = null), this.map = new t.Map(this.mapNode, {
                        attributionControl: !1,
                        layers: r,
                        zoomControl: !0,
                        minZoom: this.get("minZoom"),
                        maxZoom: this.get("maxZoom"),
                        scrollWheelZoom: this.get("scrollWheelZoom"),
                        keyboard: !1,
                        trackResize: !1,
                        worldCopyJump: !0
                    }), this.controls.attribution = new t.Control.Attribution({
                        prefix: !1
                    }).addTo(this.map), this.controls.layer = new t.Control.Layers({
                        Normal: this.layers.map,
                        Satellite: this.layers.sat
                    }).addTo(this.map), t.Marker.prototype._setPos = function(e) {
                        this._icon && (t.DomUtil.setPosition(this._icon, e), this._shadow && t.DomUtil.setPosition(this._shadow, e), this._zIndex = e.y + this.options.zIndexOffset, this._resetZIndex())
                    }, t.DistanceGrid.prototype._sqDist = function(e, t) {
                        if (e && t) {
                            var a = t.x - e.x,
                                s = t.y - e.y;
                            return a * a + s * s
                        }
                    }, e.one(".leaflet-overlay-pane .leaflet-zoom-animated") && e.one(".leaflet-overlay-pane .leaflet-zoom-animated").setStyle("height", 0), this.addImageMarkers(this.get("images")), this._fitMarkerBounds(), this._attachMapEvents(), this._setSatellite(this.get("satellite")), this._setZoomControl(this.get("zoomControl")), this
                },
                rerender: function(e) {
                    var t = this.map.getCenter(),
                        a = this.map.getZoom(),
                        s = this.map.options,
                        i = "Satellite" === this.selectedLayer;
                    this.markerHash = {}, this.render(e), this.map.setView(t, a, s), i && (this.map.removeLayer(this.layers.map), this.map.addLayer(this.layers.sat))
                },
                _onMarkerClusterClick: function(e) {
                    var t = e.layer,
                        a = this.map,
                        s = 9;
                    s >= t.getChildCount() || a.getMaxZoom() === a.getZoom() ? t.spiderfy() : t.zoomToBounds()
                }
            }, {
                ATTRS: {
                    minZoom: {
                        value: 2
                    },
                    maxZoom: {
                        value: 18
                    },
                    scrollWheelZoom: {
                        value: !1
                    },
                    satellite: {
                        value: !0
                    },
                    clusters: {
                        value: !0
                    },
                    zoomControl: {
                        value: !0
                    },
                    images: {
                        value: []
                    }
                },
                icon: new t.DivIcon({
                    className: "smugmap-pin",
                    html: '<div class="plug" style="position: absolute; width: 10px; height: 10px; left: 11px; top: 10px; border-radius: 5px;"></div><span class="sm-fonticon sm-fonticon-Location3" style="font-size: 48px; height: 100%; line-height: 24px; overflow: hidden; width: auto;"></span>',
                    iconAnchor: new t.Point(16, 39),
                    iconSize: new t.Point(32, 42),
                    popupAnchor: new t.Point(0, -36)
                }),
                accentIcon: new t.DivIcon({
                    className: "smugmap-pin smugmap-pin-selected",
                    html: '<div class="plug" style="position: absolute; width: 10px; height: 10px; left: 11px; top: 10px; border-radius: 5px;"></div><span class="sm-fonticon sm-fonticon-Location3" style="font-size: 48px; height: 100%; line-height: 24px; overflow: hidden; width: auto;"></span>',
                    iconAnchor: new t.Point(16, 39),
                    iconSize: new t.Point(32, 42),
                    popupAnchor: new t.Point(0, -36)
                }),
                markerPopupTemplate: e.Template.Micro.compile('<a href="<%= data.galleryUrl %>"><%== data.imageTemplate %></a>'),
                createImageMarker: function(a, s) {
                    var i, r, n;
                    if (s = e.merge({}, s), a.isSmugMugResource) {
                        var l = a.getExpansion("ImageSizeDetails"),
                            m = l.get("ImageSizeThumb");
                        i = {
                            url: m.Url,
                            width: m.Width,
                            height: m.Height
                        };
                        var h = a.getExpansion("ImageMetadata");
                        r = a.get("Latitude") && a.get("Longitude") ? new t.LatLng(a.get("Latitude"), a.get("Longitude")) : new t.LatLng(h.get("Latitude"), h.get("Longitude")), n = a.get("WebUri")
                    } else if ("v2" === s.version) i = {
                        url: a.ThumbnailUrl,
                        width: a.Width,
                        height: a.Height
                    }, r = new t.LatLng(a.Latitude, a.Longitude), n = a.WebUri;
                    else {
                        var p = a instanceof e.Model ? a : new e.SM.Models.Image(a);
                        r = new t.LatLng(p.get("Latitude"), p.get("Longitude")), i = p.getTemplateConfigForSize("Th"), n = p.get("GalleryUrl")
                    }
                    var c = new t.Marker(r, {
                        icon: s.accent ? o.accentIcon : o.icon
                    });
                    return c.bindPopup(o.markerPopupTemplate({
                        galleryUrl: n,
                        imageTemplate: e.SM.Templates.image(i)
                    }), {
                        closeButton: !0
                    }), c
                }
            });
        e.namespace("SM").Map = o, module.exports = exports = o
    }(), SM.currentModule = null
}, "", {
    requires: ["base", "dom", "node", "widget", "leaflet", "leaflet-markercluster", "view", "sm-resource-image", "template-micro", "sm-image-template"]
});
YUI.add("sm-menu", function(e) {
    SM.currentModule = "sm-menu";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        e.namespace("SM.Extension").MenuSkinClass = function() {}, e.SM.Extension.MenuSkinClass.prototype._getNodeSkinClass = function(e) {
            var n = e.ancestor(function(e) {
                return e.hasClass("sm-nui") || e.hasClass("sm-user-ui")
            });
            return n ? n.hasClass("sm-nui") ? "sm-nui" : "sm-user-ui" : null
        }, e.namespace("SM.Extension").MenuIcons = function() {}, e.SM.Extension.MenuIcons.prototype._renderNodeIcon = function(e, n) {
            if (n.icon) {
                var s = n.icon.replace(/\W/g, ""),
                    t = e.one("." + this.classNames.label);
                t.prepend('<span class="sm-fonticon sm-fonticon-small sm-fonticon-' + s + '"></span>')
            }
            return e
        };
        var n = e.Base.create("sm-menu", e.Menu, [e.SM.Extension.MenuSkinClass, e.SM.Extension.MenuIcons], {
            show: function(s) {
                if (n.superclass.show.apply(this, arguments), s && s.anchorPoint && s.anchorPoint instanceof e.Node) {
                    var t = this._getNodeSkinClass(s.anchorPoint);
                    t && this.get("container").addClass(t)
                }
            },
            renderNode: function(e, s) {
                var t = n.superclass.renderNode.apply(this, arguments);
                return this._renderNodeIcon(t, e), t
            },
            _afterDisable: function(s) {
                n.superclass._afterDisable.apply(this, arguments), s.item.disabledMessage && (s.item.tooltip = e.SM.Page.Tooltip.attachToNode(s.item.disabledMessage, this.getHTMLNode(s.item)))
            },
            _afterEnable: function(e) {
                n.superclass._afterEnable.apply(this, arguments), e.item.tooltip && e.item.tooltip.destroy()
            }
        }, {});
        e.namespace("SM").Menu = n;
        var s = e.Base.create("sm-menu-plugin", e.Plugin.Menu, [e.SM.Extension.MenuSkinClass, e.SM.Extension.MenuIcons], {
            render: function() {
                s.superclass.render.call(this);
                var e = this._getNodeSkinClass(this.get("host"));
                e && this.get("container").addClass(e)
            },
            renderNode: function(e, n) {
                var t = s.superclass.renderNode.apply(this, arguments);
                return this._renderNodeIcon(t, e), t
            },
            _afterHostClick: function() {
                this._host.getAttribute("disabled") || s.superclass._afterHostClick.call(this)
            }
        }, {
            NS: "menu"
        });
        e.namespace("SM.Plugin").Menu = s
    }(), SM.currentModule = null
}, "", {
    requires: ["gallery-sm-menu", "gallery-sm-menu-plugin", "sm-page-tooltip"]
});
YUI.add("sm-messagebox", function(e) {
    SM.currentModule = "sm-messagebox";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        var s = e.Node,
            t = (e.Lang, e.config.doc),
            i = "info",
            n = "error",
            a = "confirm",
            o = "alert",
            d = "spinner",
            g = "none",
            m = "sm-messagebox-msg",
            r = '<div class="sm-messagebox-icon"></div>',
            l = '<div class="' + m + '"></div>';
        e.namespace("SM");
        var h = e.Base.create("sm-messagebox", e.Widget, [], {
            renderUI: function() {
                var e = this.get("boundingBox"),
                    i = this.get("contentBox"),
                    n = t.createDocumentFragment(),
                    a = s.create(r),
                    o = s.create(l),
                    d = this.get("message");
                e.addClass(this.getClassName(this.get("type"))), o.setHTML(d), n.appendChild(s.getDOMNode(a)), n.appendChild(s.getDOMNode(o)), i.append(n)
            },
            bindUI: function() {},
            syncUI: function() {},
            setMessage: function(e) {
                var s = this.get("boundingBox"),
                    t = s.one("." + m);
                t && t.setHTML(e)
            },
            setType: function(e) {
                var s, t;
                e && (t = this.get("type"), s = this.get("boundingBox"), s.removeClass(this.getClassName(t)).addClass(this.getClassName(e)), this.set("type", e))
            }
        }, {
            CSS_PREFIX: "sm-messagebox",
            ATTRS: {
                message: {
                    value: ""
                },
                type: {
                    value: i
                }
            },
            TYPES: {
                INFO: i,
                ERROR: n,
                CONFIRM: a,
                ALERT: o,
                SPINNER: d,
                NONE: g
            }
        });
        e.SM.MessageBox = h;
        var u = e.Base.create("sm-messagebox", e.SM.Panel, [], {
                _inTimer: null,
                _outTimer: null,
                _hideTimer: null,
                initializer: function() {
                    this.set("visible", !1), this.set("zIndex", 1002), this.set("centered", !0), this.set("width", 250), this.set("fillHeight", null)
                },
                renderUI: function() {
                    u.superclass.renderUI.call(this);
                    var e = this.get("boundingBox"),
                        i = this.get("contentBox"),
                        n = t.createDocumentFragment(),
                        a = s.create(r),
                        o = s.create(l),
                        d = this.get("message");
                    e.addClass(this.getClassName(this.get("type")) + " sm-nui"), this.setStdModContent("body", '<div class="sm-panel-content-margin sm-messagebox-msg">' + d + "</div>"), n.appendChild(s.getDOMNode(a)), n.appendChild(s.getDOMNode(o)), i.append(n)
                },
                open: function(s, t) {
                    var i = this.get("boundingBox"),
                        n = {
                            type: a,
                            width: 250
                        },
                        o = 0;
                    t = e.merge(n, t), i.replaceClass(this.getClassName(this.get("type")), this.getClassName(t.type)), this.setAttrs(t), this.setStdModContent("body", '<div class="sm-panel-content-margin sm-messagebox-msg">' + s + "</div>"), this.get("animate") && (i.addClass("sm-messagebox-in"), o = 0), this._inTimer = e.later(o, this, this._in, !1)
                },
                close: function() {
                    this._out()
                },
                _in: function() {
                    var s = this.get("boundingBox");
                    this.centered(), this.show(), this.get("animate") && s.removeClass("sm-messagebox-in"), this.get("autoHide") && (this._outTimer = e.later(this.get("autoHideDelay"), this, this._out, !1))
                },
                _out: function() {
                    var s = this.get("boundingBox"),
                        t = 0;
                    this.get("animate") && (s.addClass("sm-messagebox-out"), t = 300), this._hideTimer = e.later(t, this, this._hide, !1)
                },
                _hide: function() {
                    var e = this.get("boundingBox");
                    this.hide(), this.get("animate") && e.removeClass("sm-messagebox-out")
                }
            }, {
                CSS_PREFIX: "sm-messagebox sm-panel",
                ATTRS: {
                    message: {
                        value: ""
                    },
                    type: {
                        value: i
                    },
                    autoHide: {
                        value: !0
                    },
                    autoHideDelay: {
                        value: 2e3
                    },
                    animate: {
                        value: !0
                    },
                    messageNode: {
                        value: null,
                        getter: function(e) {
                            return e || (e = this.get("boundingBox").one(".sm-messagebox-msg")), e
                        },
                        readOnly: !0
                    }
                },
                TYPES: {
                    INFO: i,
                    ERROR: n,
                    CONFIRM: a,
                    ALERT: o,
                    SPINNER: d,
                    NONE: g
                }
            }),
            c = null;
        e.SM.MessageBoxOverlay = {
            show: function(s, t) {
                t || (t = {});
                var i = {
                    type: a,
                    width: 250
                };
                t = e.merge(i, t), c || (c = new u, c.render("body")), c.open(s, t)
            },
            hide: function() {
                c && c.close()
            }
        }
    }(), SM.currentModule = null
}, "", {
    requires: ["base", "node", "overlay", "widget", "sm-panel"]
});
YUI.add("sm-modal", function(e) {
    SM.currentModule = "sm-modal";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        ! function() {
            var e = SM["import"]("lodash"),
                n = SM["import"]("classnames"),
                t = SM["import"]("sm-dom"),
                o = t.doc,
                s = SM["import"]("react"),
                l = SM["import"]("react-dom"),
                r = SM["import"]("sm-page"),
                a = "content",
                i = function(t) {
                    function i() {
                        return babelHelpers.classCallCheck(this, i), babelHelpers.possibleConstructorReturn(this, (i.__proto__ || Object.getPrototypeOf(i)).apply(this, arguments))
                    }
                    return babelHelpers.inherits(i, t), babelHelpers.createClass(i, [{
                        key: "componentDidMount",
                        value: function() {
                            var e = this.props;
                            r.disablePageScroll(), this._lastFocused = o.activeElement, e.initialFocus ? e.initialFocus() : this.focus()
                        }
                    }, {
                        key: "componentWillUnmount",
                        value: function() {
                            var e = this._lastFocused;
                            this.props.restoreFocus && e && e.focus(), this._lastFocused = null, r.enablePageScroll()
                        }
                    }, {
                        key: "render",
                        value: function() {
                            var e = s.Children.only(this.props.children),
                                t = s.cloneElement(e, {
                                    className: n("sm-modal-content", e.props.className),
                                    ref: a,
                                    role: "dialog",
                                    tabIndex: -1
                                });
                            return s.createElement(i.Mask, babelHelpers["extends"]({
                                ref: "maskContainer"
                            }, this.props), t)
                        }
                    }, {
                        key: "focus",
                        value: function() {
                            var e = l.findDOMNode(this.refs[a]);
                            e && e.focus()
                        }
                    }, {
                        key: "hide",
                        value: function() {
                            this.refs.maskContainer._hide()
                        }
                    }], [{
                        key: "mount",
                        value: function(n) {
                            var t = o.body.appendChild(o.createElement("div")),
                                r = n.props.onClose;
                            return l.render(s.cloneElement(n, {
                                onClose: function() {
                                    for (var n = arguments.length, s = Array(n), a = 0; n > a; a++) s[a] = arguments[a];
                                    1 === s.length && (s = s[0]), r && r(s), e.defer(function() {
                                        l.unmountComponentAtNode(t), o.body.removeChild(t)
                                    })
                                }
                            }), t)
                        }
                    }, {
                        key: "unmount",
                        value: function(e) {
                            e.props.onClose()
                        }
                    }]), i
                }(s.Component),
                u = s.PropTypes;
            i.propTypes = {
                applyUserSkin: u.bool,
                centered: u.bool,
                children: u.element.isRequired,
                closeOnClickOutside: u.bool,
                closeOnEscape: u.bool,
                maskOpacity: u.number,
                onClose: u.func,
                initialFocus: u.func,
                restoreFocus: u.bool
            }, i.defaultProps = {
                restoreFocus: !0
            }, module.exports = exports = i
        }(), ! function() {
            function e(e) {
                return e.appendChild(e.ownerDocument.createElement("div"))
            }
            var n = SM["import"]("classnames"),
                t = SM["import"]("sm-dom"),
                o = SM["import"]("react"),
                s = SM["import"]("react-dom"),
                l = 0,
                r = 1,
                a = .95,
                i = ".sm-overlay-container",
                u = ".sm-user-overlay-container",
                c = function(l) {
                    function r(e) {
                        babelHelpers.classCallCheck(this, r);
                        var n = babelHelpers.possibleConstructorReturn(this, (r.__proto__ || Object.getPrototypeOf(r)).call(this, e));
                        return n._mounted = !1, n
                    }
                    return babelHelpers.inherits(r, l), babelHelpers.createClass(r, [{
                        key: "componentDidMount",
                        value: function() {
                            this.renderModalContent()
                        }
                    }, {
                        key: "componentDidUpdate",
                        value: function() {
                            this.renderModalContent()
                        }
                    }, {
                        key: "componentWillMount",
                        value: function() {
                            var n = i;
                            this.props.applyUserSkin && (n = u), this._container = e(t.querySelector(n))
                        }
                    }, {
                        key: "componentWillUnmount",
                        value: function() {
                            this._unmountModalContent({
                                suppressOnClose: !0
                            });
                            var e = this._container;
                            e.parentNode.removeChild(e), this._container = null
                        }
                    }, {
                        key: "render",
                        value: function() {
                            return null
                        }
                    }, {
                        key: "renderModalContent",
                        value: function() {
                            var e = this,
                                t = this.props,
                                l = o.Children.only(t.children),
                                r = ["sm-modal"];
                            t.centered && (r = r.concat(["sm-modal-centered", "sm-flex", "sm-flex-items-center", "sm-flex-justify-center"])), this._mountedModal = s.render(o.createElement("div", {
                                className: t.className,
                                onKeyDown: this._handleKeyDown.bind(this)
                            }, o.createElement("div", {
                                className: "sm-modal-mask",
                                style: {
                                    opacity: t.maskOpacity
                                }
                            }), o.createElement("div", {
                                className: n(r),
                                onClick: t.closeOnClickOutside ? this._handleModalClick.bind(this) : null,
                                style: t.style
                            }, l)), this._container, function() {
                                e._mounted = !0
                            })
                        }
                    }, {
                        key: "_handleKeyDown",
                        value: function(e) {
                            this.props.closeOnEscape && (e.stopPropagation(), "Escape" !== e.key || e.altKey || e.ctrlKey || e.metaKey || e.shiftKey || (e.preventDefault(), this._unmountModalContent()))
                        }
                    }, {
                        key: "_handleModalClick",
                        value: function(e) {
                            this.props.closeOnClickOutside && e.currentTarget === e.target && this._unmountModalContent()
                        }
                    }, {
                        key: "_hide",
                        value: function() {
                            this._unmountModalContent()
                        }
                    }, {
                        key: "_unmountModalContent",
                        value: function() {
                            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
                            this._mountedModal && (s.unmountComponentAtNode(this._container), this._mounted = !1, this._mountedModal = null, e.suppressOnClose || this.props.onClose())
                        }
                    }, {
                        key: "getModalMountNode",
                        value: function() {
                            var e = this._mountedModal;
                            return e && this._mounted ? s.findDOMNode(e) : null
                        }
                    }]), r
                }(o.Component);
            c.MASK_CLEAR = l, c.MASK_OPAQUE = r, c.MASK_TRANSPARENT = a, c.displayName = "Modal.Mask";
            var d = o.PropTypes;
            c.propTypes = {
                applyUserSkin: d.bool,
                centered: d.bool,
                children: d.element.isRequired,
                closeOnClickOutside: d.bool,
                closeOnEscape: d.bool,
                maskOpacity: d.number,
                onClose: d.func
            }, c.defaultProps = {
                applyUserSkin: !1,
                closeOnClickOutside: !1,
                closeOnEscape: !1,
                maskOpacity: a,
                onClose: function() {}
            }, exports.Mask = c
        }()
    }(), SM.currentModule = null
}, "", {
    requires: ["classnames", "lodash", "react", "react-dom", "sm", "sm-dom", "sm-page"]
});
YUI.add("sm-model-history", function(t) {
    SM.currentModule = "sm-model-history";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        var i = (t.Node, "host"),
            e = t.Base.create("pluginModelHistory", t.Plugin.Base, [], {
                initializer: function(t) {
                    var e = this.get(i);
                    this.afterHostMethod("setAttrs", this._updateHistory, this), this._eventHandles = [e.on("save", this._onHostUpdate, this)], this.rHistory || (this.rHistory = [], this.rHistory[0] = this.get(i).getAttrs())
                },
                _updateHistory: function() {
                    this.get(i).isModified() && (this.rHistory[this.rHistory.length] = this.get(i).getAttrs())
                },
                revert: function(t) {
                    this.rHistory && (t || (t = this.get("StableRevision")), this.get(i).setAttrs(this.rHistory[t - 1]), this.rHistory = this.rHistory.slice(0, t), this.setStableRevision())
                },
                isModifiedWithHistory: function(t) {
                    var e;
                    t || (t = this.get("StableRevision"));
                    for (e in this.get(i).changed)
                        if (this.rHistory[t - 1][e] != this.get(i).get(e)) return !0;
                    return !1
                },
                getCurrentRevision: function() {
                    return this.rHistory ? this.rHistory.length : 1
                },
                setStableRevision: function(t) {
                    t || (t = this.getCurrentRevision()), this.set("StableRevision", t)
                },
                _onHostUpdate: function(t) {
                    this.setStableRevision()
                },
                getStableAttr: function(t) {
                    return this.rHistory[this.get("StableRevision") - 1][t] ? this.rHistory[this.get("StableRevision") - 1][t] : !1
                }
            }, {
                NS: "modelhistory",
                ATTRS: {
                    StableRevision: {
                        value: 1
                    }
                }
            });
        t.namespace("SM.Plugin").ModelHistory = e
    }(), SM.currentModule = null
}, "", {
    requires: ["node", "plugin"]
});
YUI.add("sm-model-list-sync-api", function(e) {
    SM.currentModule = "sm-model-list-sync-api";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        function t(e) {}
        t.prototype = {
            _getAPIEndpoint: function() {
                return this.apiEndpoint || this.model && this.model.NAME
            },
            _getData: function(e) {
                var t;
                switch (e) {
                    case "create":
                    case "update":
                    case "read":
                    case "delete":
                    default:
                        t = {}
                }
                return t
            },
            _preFetchPage: function(t, s) {
                var a = this._lastApiRequest;
                a && t > 0 && t <= this.get("TotalPages") ? (a.data.PageNumber = t, a.data.PageSize = s, a.on = {
                    success: function(t) {
                        e.fire("modelListPrefetchComplete", {
                            response: t.response
                        })
                    },
                    failure: function(e) {}
                }, this._api.sendRequest(a)) : e.fire("modelListPrefetchComplete", {
                    response: null
                })
            },
            _loadPage: function(e, t, s, a, i) {
                var n = this._lastApiRequest;
                n && e > 0 && e <= this.get("TotalPages") && (n.data.PageNumber = e, n.data.PageSize = t, n.on = {
                    success: function(e) {
                        var t = this.parse(e.response.results);
                        addOptions = {
                            silent: !0
                        }, s ? this.reset(t) : ("undefined" != typeof i && (addOptions.index = i), this.fire("newPage", {
                            models: this.add(t, addOptions)
                        })), a && a(null, e.response)
                    },
                    failure: function(e) {
                        a && a("err", e.response)
                    },
                    context: this
                }, this._api.sendRequest(n))
            },
            loadNextPage: function(e) {
                this._loadPage(this.get("PageNumber") + 1, this.get("PageSize"), !1, e)
            },
            loadPreviousPage: function(e) {
                this._loadPage(this.get("PageNumber") - 1, this.get("PageSize"), !1, e, 0)
            },
            loadPage: function(e, t) {
                this._loadPage(e, this.get("PageSize"), !0, t)
            },
            changePageSize: function(e, t) {
                this._loadPage(1, e, !0, t)
            }
        }, e.namespace("SM").ModelListSyncAPI = e.augment(e.SM.APISyncBase, t)
    }(), SM.currentModule = null
}, "", {
    requires: ["sm-sync-api-base"]
});
YUI.add("sm-model-sync-api", function(e) {
    SM.currentModule = "sm-model-sync-api";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        function t() {}
        t.prototype = {
            _getAPIEndpoint: function() {
                return this.apiEndpoint || this.name
            },
            _getData: function(t) {
                var n = this.getAttrs([this.idAttribute]);
                switch (t) {
                    case "create":
                        n = e.merge(n, this.toJSON());
                        break;
                    case "update":
                        n = e.merge(n, this.changed);
                        break;
                    case "read":
                    case "delete":
                }
                return n
            },
            commit: function(t, n) {
                var r = this;
                return "function" == typeof t && (n = t, t = {}), r.get("destroyed") ? r.destroy(e.merge(t, {
                    "delete": !0
                }), n) : r.isModified() ? r.save(t, n) : n && n(), r
            }
        }, e.namespace("SM").ModelSyncAPI = e.augment(t, e.SM.APISyncBase)
    }(), SM.currentModule = null
}, "", {
    requires: ["base", "model", "sm-sync-api-base"]
});
YUI.add("sm-models-usernode", function(e) {
    SM.currentModule = "sm-models-usernode";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        ! function() {
            var a = null,
                t = {
                    ROOT: 1,
                    FOLDER: 2,
                    ALBUM: 4,
                    SYSTEM_FOLDER: 16,
                    PAGE: 64,
                    SYSTEM_ALBUM_VISIBLE: 1024
                },
                s = {
                    IDC: 0,
                    GENERIC: 1,
                    USER_SET: 2
                },
                l = {
                    INHERIT: 0,
                    PUBLIC: 1,
                    UNLISTED: 2,
                    PRIVATE: 3
                },
                n = 6,
                i = e.Base.create("sm-usernode-model", e.Model, [e.SM.ModelSyncAPI, e.ModelRelate], {
                    idAttribute: "NodeID",
                    apiEndpoint: "node",
                    initializer: function() {
                        this._privacySetting = null
                    },
                    validate: function(e, a) {
                        var s = [];
                        if (this.get("Type") != t.ROOT && ("Name" in e && ("string" != typeof e.Name || 0 === e.Name.length) && s.push({
                                Field: "Name",
                                Message: "Please enter a Name"
                            }), "UrlName" in e && ("string" != typeof e.UrlName || 0 === e.UrlName.length) && s.push({
                                Field: "UrlName",
                                Message: "Please enter a URL"
                            })), s.length) {
                            var l = new Error;
                            l.errors = s, a(l)
                        } else a()
                    },
                    getPrivacySetting: function(a) {
                        if (this.isNew()) a(null);
                        else if (e.Lang.isNull(this._privacySetting)) {
                            var t = new e.SM.API;
                            t.sendRequest({
                                method: "rpc.node.getprivacysetting",
                                data: {
                                    NodeID: this.get("NodeID")
                                },
                                callback: {
                                    success: function(e) {
                                        e.response.results.PrivacySetting && (this._privacySetting = e.response.results.PrivacySetting, a(this._privacySetting))
                                    },
                                    context: this
                                },
                                cfg: {
                                    method: "GET"
                                }
                            })
                        } else a(this._privacySetting)
                    },
                    getTypeName: function(e) {
                        var a = this.get("Type"),
                            s = "Page";
                        switch (a) {
                            case t.ROOT:
                                s = e ? "Homepages" : "Homepage";
                                break;
                            case t.FOLDER:
                                s = e ? "Folders" : "Folder";
                                break;
                            case t.ALBUM:
                                s = e ? "Galleries" : "Gallery";
                                break;
                            case t.PAGE:
                                s = e ? "Pages" : "Page"
                        }
                        return s
                    },
                    getTypeIcon: function() {
                        var e = this.get("Type"),
                            a = "Document";
                        switch (e) {
                            case t.ROOT:
                                a = "Home";
                                break;
                            case t.FOLDER:
                                a = "Folder";
                                break;
                            case t.ALBUM:
                                a = "Gallery";
                                break;
                            case t.PAGE:
                                a = "Document"
                        }
                        return a
                    },
                    isAlbum: function() {
                        return t.ALBUM == this.get("Type")
                    },
                    isFolder: function() {
                        return t.FOLDER == this.get("Type")
                    },
                    isSystemFolder: function() {
                        return t.SYSTEM_FOLDER == this.get("Type")
                    },
                    isRootFolder: function() {
                        return t.ROOT == this.get("Type")
                    }
                }, {
                    ATTRS: {
                        NodeID: {
                            value: null
                        },
                        Depth: {
                            value: 1
                        },
                        ParentID: {
                            value: null
                        },
                        RemoteID: {
                            value: null
                        },
                        RemoteKey: {
                            value: null
                        },
                        Type: {
                            value: t.FOLDER
                        },
                        Name: {
                            value: "",
                            setter: function(a) {
                                return e.Lang.trim(a)
                            }
                        },
                        UrlName: {
                            value: "",
                            setter: function(a) {
                                return e.Lang.trim(a)
                            }
                        },
                        UrlPath: {
                            value: ""
                        },
                        Url: {
                            value: ""
                        },
                        IDPath: {
                            value: ""
                        },
                        HLSetting: {
                            value: s.IDC,
                            validator: function(e) {
                                var a = !0;
                                return e = parseInt(e, 10), e != s.IDC && e != s.GENERIC && e != s.USER_SET && (a = !1), a
                            }
                        },
                        HLImageID: {
                            value: null
                        },
                        HLImageKey: {
                            value: null
                        },
                        PasswordProtected: {
                            value: !1
                        },
                        PrivacyLevel: {
                            value: l.PUBLIC
                        },
                        NodePrivacyLevel: {
                            value: l.PUBLIC
                        },
                        ParentPrivacyLevel: {
                            value: l.PUBLIC
                        },
                        ViewPassword: {
                            value: ""
                        },
                        ViewPassHint: {
                            value: ""
                        },
                        DateAdded: {
                            value: null
                        },
                        DateAddedDisplay: {
                            value: ""
                        },
                        DateModified: {
                            value: null
                        },
                        DateModifiedDisplay: {
                            value: ""
                        },
                        IsOwner: {
                            value: !1
                        },
                        Description: {
                            value: ""
                        },
                        Keywords: {
                            value: ""
                        },
                        SmugSearchable: {
                            value: 1
                        },
                        WorldSearchable: {
                            value: 1
                        },
                        ParentEffectiveSecurityType: {
                            value: 1
                        },
                        SecurityType: {
                            value: 1
                        },
                        EffectiveSecurityType: {
                            value: 1
                        },
                        GrantData: {
                            valueFn: function() {
                                return {
                                    Pending: [],
                                    Access: []
                                }
                            }
                        },
                        ShowCoverImage: {
                            value: !1
                        }
                    },
                    RELATIONSHIPS: {
                        Image: {
                            type: "toOne",
                            key: "HLImageID",
                            relatedModel: e.SM.Models.Image,
                            relatedKey: "ImageID"
                        }
                    },
                    TYPES: t,
                    HL_SETTINGS: s,
                    PRIVACY_LEVELS: l,
                    MAX_NODE_DEPTH: n,
                    authenticate: function(t, s, l, n) {
                        a = a || new e.SM.API, a.sendRequest({
                            method: "rpc.node.auth",
                            data: {
                                NodeID: t,
                                Password: s,
                                Remember: l
                            },
                            freshRequest: !0,
                            callback: {
                                success: function(a) {
                                    n(a.response.results.Node && !e.Lang.isNull(a.response.results.Node.HasAccess) ? a.response.results.Node.HasAccess : !1)
                                },
                                context: this
                            },
                            cfg: {
                                method: "POST"
                            }
                        })
                    }
                });
            e.namespace("SM.Models").UserNode = i, module.exports = i
        }(),
        function() {
            var a = e.Base.create("sm-models-usernodelist", e.ModelList, [e.SM.ModelListSyncAPI], {
                model: e.SM.Models.UserNode,
                comparator: null,
                apiEndpoint: "node",
                apiCategories: {
                    forpagedesign: {
                        method: "forpagedesign"
                    },
                    childfolders: {
                        method: "childfolders",
                        expanded: {
                            HighlightImages: e.SM.Models.ImageList
                        }
                    },
                    childalbums: {
                        method: "childalbums",
                        expanded: {
                            HighlightImages: e.SM.Models.ImageList
                        }
                    },
                    childnodes: {
                        method: "childnodes",
                        expanded: {
                            HighlightImages: e.SM.Models.ImageList
                        }
                    },
                    recentalbumnodes: {
                        method: "recentalbumnodes",
                        expanded: {
                            HighlightImages: e.SM.Models.ImageList
                        }
                    }
                },
                initializer: function(e) {}
            }, {});
            e.namespace("SM.Models").UserNodeList = a
        }()
    }(), SM.currentModule = null
}, "", {
    requires: ["base", "model", "model-list", "model-relate", "sm-album-model", "sm-api", "sm-image-model", "sm-model-list-sync-api", "sm-model-sync-api"]
});
YUI.add("sm-models-usernodepagedesign", function(e) {
    SM.currentModule = "sm-models-usernodepagedesign";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        var d = {
                DEFAULT: 1,
                DESKTOP: 1,
                MOBILE: 2,
                SITE: 3
            },
            n = e.Base.create("sm-models-usernodepagedesign", e.Model, [e.SM.ModelSyncAPI], {
                idAttribute: "NodeID",
                apiEndpoint: "nodepagedesign"
            }, {
                ATTRS: {
                    NodeID: {
                        value: null
                    },
                    NickName: {
                        value: ""
                    },
                    PageDesignID: {
                        value: 0
                    },
                    PageDesignType: {
                        value: 0
                    }
                },
                PAGE_DESIGN_TYPES: d
            });
        e.namespace("SM.Models").UserNodePageDesign = n
    }(), SM.currentModule = null
}, "", {
    requires: ["base", "model", "sm-api", "sm-model-sync-api"]
});
YUI.add("sm-notifications-bootstrap", function(o) {
    SM.currentModule = "sm-notifications-bootstrap";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        "use strict";
        var o = SM["import"]("sm-notifications").NotificationsController,
            t = SM["import"]("sm-resource-core"),
            r = SM["import"]("sm-page");
        r.on("page:init", function() {
            new o(t.loadLocal("userProductNotifications")).render()
        })
    }(), SM.currentModule = null
}, "", {
    requires: ["sm-page", "sm-resource-core", "sm-notifications"]
});
YUI.add("sm-notifications", function(e) {
    SM.currentModule = "sm-notifications";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        "use strict";
        var e, t = SM["import"]("lodash"),
            i = SM["import"]("sm-analytics"),
            n = SM["import"]("sm-component-button"),
            o = SM["import"]("sm-dom"),
            s = SM["import"]("sm-component-icon"),
            r = SM["import"]("sm-resource-notification"),
            a = SM["import"]("react"),
            c = SM["import"]("react-dom"),
            l = a.addons.CSSTransitionGroup,
            p = a.PropTypes;
        ! function() {
            e = function(e) {
                this._validateUserProductNotification(e), this.userProductNotification = e
            };
            var t = e.prototype;
            t._validateUserProductNotification = function(e) {
                if (!e) throw new Error("NotificationAccessor constructor requires userProductNotification param");
                if (!(e instanceof r)) throw new Error("NotificationAccessor constructor requires userProductNotification param to be of type UserProductNotification");
                if (!e.hasExpansion("UserProductNotificationContextData")) throw new Error("NotificationAccessor constructor requires a UserProductNotification with UserProductNotificationContextData already expanded");
                if (!e.hasExpansion("ProductNotification")) throw new Error("NotificationAccessor constructor requires a UserProductNotification with ProductNotification already expanded")
            }, t._getProductNotification = function() {
                return this.productNotification || (this.productNotification = this.userProductNotification.getExpansion("ProductNotification")), this.productNotification
            }, t.acknowledge = function(e) {
                return this.userProductNotification.acknowledge(e)
            }, t.getCategory = function() {
                return this._getProductNotification().get("Category")
            }, t.getContextData = function() {
                return this.contextData || (this.contextData = this.userProductNotification.getExpansion("UserProductNotificationContextData").get("ContextData")), this.contextData || {}
            }, t.getKey = function() {
                return this.userProductNotification.get("UserProductNotificationKey")
            }, t.getMessage = function() {
                return this._getProductNotification().get("Message")
            }, t.getName = function() {
                return this._getProductNotification().get("Name")
            }, t.getTrackingName = function() {
                return _[this.getName()] || this.getName()
            }, t.getPriority = function() {
                return this._getProductNotification().get("Priority")
            }, t.getTitle = function() {
                return this._getProductNotification().get("Title")
            }, t.getType = function() {
                return this._getProductNotification().get("Type")
            }, t.isDismissible = function() {
                return this._getProductNotification().get("Dismissible")
            }, exports.NotificationAccessor = e
        }();
        var u = exports.NotificationsContainerViewMixin = {
                propTypes: {
                    entries: p.arrayOf(p.shape({
                        reactElement: p.element.isRequired,
                        notification: p.instanceOf(e).isRequired
                    }))
                },
                getDefaultProps: function() {
                    return {
                        entries: []
                    }
                }
            },
            d = (exports.SingleViewNotificationsContainer = a.createClass({
                displayName: "SingleViewNotificationsContainer",
                mixins: [u],
                propTypes: {
                    animate: p.bool,
                    animationEffect: p.string
                },
                getDefaultProps: function() {
                    return {
                        animate: !1,
                        animationEffect: "reveal"
                    }
                },
                render: function() {
                    var e = ["sm-product-notifications-container"];
                    this.props.className && e.push(this.props.className);
                    var t = this.props.entries.length > 0 ? this.props.entries[0].reactElement : null,
                        i = t ? a.createElement("div", {
                            className: e.join(" ")
                        }, t) : null;
                    return this.props.animate && (i = a.createElement(l, {
                        component: "div",
                        transitionName: this.props.animationEffect,
                        transitionAppear: !0,
                        transitionAppearTimeout: 500,
                        transitionEnterTimeout: 500,
                        transitionLeaveTimeout: 500
                    }, i)), i
                }
            }), exports.NotificationViewMixin = {
                propTypes: {
                    acknowledgeHandler: p.func.isRequired,
                    logEvent: p.func.isRequired,
                    notification: p.instanceOf(e).isRequired,
                    trackerNiceName: p.string,
                    owner: p.object.isRequired,
                    viewer: p.object.isRequired
                },
                acknowledge: function() {
                    return this.props.acknowledgeHandler(this.props.notification, !1)
                },
                dismiss: function() {
                    return this.props.acknowledgeHandler(this.props.notification, !0)
                }
            }),
            E = exports.ExpiredCCViewMixin = {
                propTypes: {
                    assistantMessage: p.string,
                    assistantTitle: p.string,
                    dismissBtnLabel: p.string,
                    ownerMessage: p.string,
                    ownerTitle: p.string,
                    updateBtnUrl: p.string,
                    updateBtnLabel: p.string
                },
                getDefaultProps: function() {
                    return {
                        dismissBtnLabel: "I'll Do It Later",
                        updateBtnUrl: "https://" + SM.env.host.ssl + "/settings/billing/subscription",
                        updateBtnLabel: "Update Now"
                    }
                },
                componentDidMount: function() {
                    this._logView()
                },
                _dismissClickHandler: function() {
                    return this.dismiss().then(this._logClose)
                },
                _forwardToSettings: function() {
                    o.win.location.href = this.props.updateBtnUrl + "?NickName=" + encodeURIComponent(this.props.owner.nickName)
                },
                _generateAnalyticsAttachedLink: function(e, t) {
                    return a.createElement("a", {
                        href: t,
                        onClick: this._linkClickHandler.bind(this, e, t)
                    }, e)
                },
                _linkClickHandler: function(e, t) {
                    this._logLink(e, t).then(function() {
                        o.win.location.href = t
                    })
                },
                _renderMessage: function() {
                    return this.props.viewer.isAssistant && this.props.assistantMessage ? this.props.assistantMessage : this.props.ownerMessage || this.props.notification.getMessage()
                },
                _renderTitle: function() {
                    return this.props.viewer.isAssistant && this.props.assistantTitle ? this.props.assistantTitle : this.props.ownerTitle || this.props.notification.getTitle()
                },
                _updateClickHandler: function(e) {
                    var t = this.props.notification.isDismissible(),
                        i = t ? this.dismiss : this.acknowledge;
                    i().then(this._logUpdate.bind(this, e)).then(this._forwardToSettings)
                },
                _logClose: function() {
                    return this.props.logEvent(this.props.notification, i.CATEGORY.ACCOUNT_EXPIRATION, "Close", {
                        label: this.props.dismissBtnLabel
                    })
                },
                _logLink: function(e, t) {
                    return this.props.logEvent(this.props.notification, i.CATEGORY.ACCOUNT_EXPIRATION, "Link Click", {
                        label: e,
                        property: t
                    })
                },
                _logUpdate: function(e) {
                    return this.props.logEvent(this.props.notification, i.CATEGORY.ACCOUNT_EXPIRATION, "Update Payment Method", {
                        label: e
                    })
                },
                _logView: function() {
                    return this.props.logEvent(this.props.notification, i.CATEGORY.ACCOUNT_EXPIRATION, "Expiration Notification", {
                        label: this.props.notification.getTrackingName()
                    }, !0)
                }
            },
            m = exports.ExpiredCCBanner = a.createClass({
                displayName: "ExpiredCCBanner",
                mixins: [d, E],
                render: function() {
                    return a.createElement("div", {
                        className: "sm-nui sm-expired-cc-banner"
                    }, a.createElement("h2", {
                        className: "sm-expired-cc-title"
                    }, this._renderTitle()), a.createElement("p", {
                        className: "sm-expired-cc-message"
                    }, this._renderMessage()), this.props.notification.isDismissible() ? a.createElement(n, {
                        className: "sm-expired-cc-dismiss-button",
                        size: "small",
                        onClick: this._dismissClickHandler
                    }, this.props.dismissBtnLabel) : null, this.props.viewer.isAssistant ? null : a.createElement(n, {
                        className: "sm-expired-cc-update-button",
                        size: "small",
                        onClick: this._updateClickHandler.bind(this, this.props.updateBtnLabel)
                    }, this.props.updateBtnLabel))
                }
            }),
            f = (exports.BillingInfoBanner = a.createClass({
                displayName: "BillingInfoBanner",
                mixins: [d, E],
                render: function() {
                    return a.createElement("div", {
                        className: "sm-nui sm-expired-cc-banner"
                    }, a.createElement("div", {
                        className: "sm-expired-cc-message"
                    }, a.createElement("div", {
                        style: {
                            "float": "left"
                        }
                    }, a.createElement(s, {
                        icon: "Warning"
                    })), this._renderMessage()))
                }
            }), exports.ExpiredCCEvaluationPeriodBanner = a.createClass({
                displayName: "ExpiredCCEvaluationPeriodBanner",
                render: function() {
                    return a.createElement(m, babelHelpers["extends"]({}, this.props, {
                        ownerMessage: this._getOwnerMessage(),
                        assistantMessage: this._getAssistantMessage()
                    }))
                },
                _getAssistantMessage: function() {
                    var e = this._getDaysUntilRenewalString();
                    return "Once its updated, you can breathe easy for a few more years." + (e ? " Youve got " + e + " until renewal, but dont worry, we wont ever bill early." : "")
                },
                _getOwnerMessage: function() {
                    var e = this._getDaysUntilRenewalString();
                    return "Update in seconds and breathe easy for a few more years." + (e ? " Youve got " + e + " until renewal, but dont worry, we wont bill you early." : "")
                },
                _getDaysUntilRenewalString: function() {
                    var e = this.props.notification.getContextData().DaysUntilRenewal;
                    if ("undefined" == typeof e) return "";
                    switch (e) {
                        case 0:
                        case 1:
                            return "1 day";
                        default:
                            return e + " days"
                    }
                }
            }), exports.ExpiredCCAccountSettingsBanner = a.createClass({
                displayName: "ExpiredCCAccountSettingsBanner",
                mixins: [d, E],
                getInitialState: function() {
                    return {
                        currentTab: null
                    }
                },
                componentWillMount: function() {
                    this._updateCurrentTab(), o.win.addEventListener("hashchange", this._updateCurrentTab, !1)
                },
                componentWillUnmount: function() {
                    o.win.removeEventListener("hashchange", this._updateCurrentTab, !1)
                },
                render: function() {
                    var e = this._hasPaymentInfo(),
                        t = e ? "update your billing information" : "setup a payment option",
                        i = this._getNoPaymentInfoSentence({
                            hasPaymentInfo: e
                        }),
                        n = "subscription" === this.state.currentTab ? t + " below" : a.createElement("a", {
                            onClick: this._updateClickHandler.bind(this, t)
                        }, t);
                    return a.createElement("div", {
                        className: "sm-nui sm-expired-cc-banner"
                    }, a.createElement("h2", {
                        className: "sm-expired-cc-title"
                    }, this._getTitle({
                        hasPaymentInfo: e
                    })), this.props.viewer.isAssistant && this.props.assistantMessage ? a.createElement("p", {
                        className: "sm-expired-cc-message"
                    }, this.props.assistantMessage) : a.createElement("p", {
                        className: "sm-expired-cc-message"
                    }, i, "It takes a few seconds to ", n, "."))
                },
                _extractTabNameFromHash: function() {
                    var e, t, i, n = null;
                    return e = o.win.location.hash, e && (t = o.win.location.hash.substr(1).split("="), i = t[0], "section" === i && (n = decodeURIComponent(t[1]))), n
                },
                _extractTabNameFromCookie: function() {
                    var e = null,
                        t = /smcplasttab=(\w+)/g,
                        i = t.exec(o.doc.cookie);
                    return null !== i && (e = i[1]), e
                },
                _updateCurrentTab: function() {
                    var e = this._extractTabNameFromHash() || this._extractTabNameFromCookie();
                    e && this.setState({
                        currentTab: e
                    })
                },
                _hasPaymentInfo: function() {
                    var e = this.props.notification.getContextData().HasPaymentInfo;
                    return "undefined" == typeof e ? !1 : e ? !0 : !1
                },
                _getTitle: function(e) {
                    var t = e.hasPaymentInfo;
                    return this.props.notification.getName() === h.NAME_RENEWAL_ACCT_SETTINGS_CC_MISSING_EXPIRED ? t ? this._renderTitle() : "Pssst! You do not have billing info on file." : this._renderTitle()
                },
                _getNoPaymentInfoSentence: function(e) {
                    var t = e.hasPaymentInfo;
                    return this.props.notification.getName() === h.NAME_RENEWAL_ACCT_SETTINGS_CC_MISSING_EXPIRED ? "" : t ? "" : "You do not have billing info on file. "
                }
            }), exports.ExpiredCCPage = a.createClass({
                displayName: "ExpiredCCPage",
                mixins: [d, E],
                render: function() {
                    var e = this._generateAnalyticsAttachedLink("Contact our Support Heroes", "http://help.smugmug.com/customer/portal/emails/new");
                    return a.createElement("div", {
                        className: "sm-expired-cc-page-content"
                    }, a.createElement("h1", {
                        className: "sm-expired-cc-title sm-title-l"
                    }, this._renderTitle()), a.createElement("p", {
                        className: "sm-expired-cc-message"
                    }, this._renderMessage()), this.props.viewer.isAssistant ? null : a.createElement(n, {
                        className: "sm-expired-cc-update-button",
                        size: "large",
                        skin: "accent",
                        onClick: this._updateClickHandler.bind(this, this.props.updateBtnLabel)
                    }, this.props.updateBtnLabel), this.props.notification.isDismissible() ? a.createElement(n, {
                        className: "sm-expired-cc-dismiss-button",
                        size: "large",
                        onClick: this._pageDismissClickHandler
                    }, this.props.dismissBtnLabel) : null, a.createElement("p", {
                        className: "sm-expired-cc-page-fine-print"
                    }, "Question? Please give us the opportunity to help.", a.createElement("br", null), e, "."))
                },
                _forwardToOrigin: function() {
                    var e = this.props.viewer.homepage;
                    o.win.location.search.substr(1).split("&").some(function(t) {
                        var i = t.split("="),
                            n = i[0];
                        return "goTo" === n ? (e = decodeURIComponent(i[1]), !0) : !1
                    }), o.win.location.href = e
                },
                _pageDismissClickHandler: function() {
                    this._dismissClickHandler().then(this._forwardToOrigin)
                }
            })),
            g = (exports.ExpiredCCPastDuePage = a.createClass({
                displayName: "ExpiredCCPastDuePage",
                render: function() {
                    return a.createElement(f, babelHelpers["extends"]({}, this.props, {
                        ownerMessage: this._getOwnerMessage(),
                        assistantMessage: this._getAssistantMessage()
                    }))
                },
                _getAssistantMessage: function() {
                    return "Dont worry, weve kept your photos safe. Have the account owner update their billing information " + this._getDaysUntilSuspendString() + " to avoid any account hiccups."
                },
                _getOwnerMessage: function() {
                    return "Dont worry, weve kept your photos safe. Update your billing information " + this._getDaysUntilSuspendString() + " to avoid any account hiccups."
                },
                _getDaysUntilSuspendString: function() {
                    var e = this.props.notification.getContextData().DaysUntilSuspend;
                    if ("undefined" == typeof e) return "";
                    switch (e) {
                        case 0:
                        case 1:
                            return "today";
                        default:
                            return "in the next " + e + " days"
                    }
                }
            }), exports.ServiceMigrationBanner = a.createClass({
                displayName: "ServiceMigrationBanner",
                mixins: [d],
                render: function() {
                    return a.createElement("div", {
                        className: "sm-nui sm-migration-banner"
                    }, a.createElement("h2", {
                        className: "sm-migration-title"
                    }, this._renderTitle()), a.createElement("p", {
                        className: "sm-migration-message"
                    }, this._renderMessage()))
                },
                _renderMessage: function() {
                    var e = this.props.notification.getContextData().InProgress;
                    return e ? "Well be sure to email you with more details when everything is complete. For now, feel free to explore your account!" : a.createElement("span", null, "Important note - We are currently experiencing a high volume of excited people attempting to transfer their photos! Never fear, our Heroes are flying as fast as possible to save the day. It may be a few hours, but your photos are safe and queued up. Refresh this page for your status at any time, and thank you for your patience!", a.createElement("br", null), a.createElement("br", null), "If youre new to SmugMug, your account will automatically update to the appropriate plan as soon as your photo transfer starts. For more helpful information, please see our ", a.createElement("a", {
                        href: "https://www.smugmug.com/phanfare"
                    }, "FAQ"), ".")
                },
                _renderTitle: function() {
                    var e = this.props.notification.getContextData().InProgress;
                    return e ? "All systems go! Your photos are on their way." : "Your Phanfare photos will be on their way shortly."
                }
            }), {
                ACCOUNT_SETTINGS_BANNER: "ProductNotificationAccountSettingBanners",
                BILLING_INFO_BANNER: "ProductNotificationBillingInfoBanners",
                FULL_PAGE_BODY: "ProductNotificationFullPageBody",
                TOP_BANNER: "ProductNotificationTopBanners"
            }),
            h = {
                NAME_RENEWAL_ACTIVE_PERIOD_CC_EXPIRED: "RenewalActiveExpiredBillingInfo",
                NAME_RENEWAL_EVALUATION_PERIOD_CC_MISSING_EXPIRED: "RenewalEPMissingExpiredBillingInfo",
                NAME_RENEWAL_PAST_DUE_BILLING_ERROR: "RenewalPDBillingError",
                NAME_RENEWAL_PAST_DUE_BILLING_ERROR_GOTO: "RenewalPDBillingErrorGOTO",
                NAME_RENEWAL_SUSPENDED_PERIOD_BILLING_ERROR_GOTO: "RenewalSPBillingErrorGOTO",
                NAME_RENEWAL_ACCT_SETTINGS_CC_MISSING_EXPIRED: "RenewalAcctSettingsMissingExpiredBillingInfo",
                NAME_RENEWAL_ACCT_SETTINGS_PAST_DUE_BILLING_ERROR: "RenewalAcctSettingsPDBillingError",
                NAME_RENEWAL_ACCT_SETTINGS_SUSPENDED_BILLING_ERROR: "RenewalAcctSettingsSPBillingError",
                NAME_SERVICE_MIGRATION_STATUS: "ServiceMigrationStatus"
            },
            _ = {};
        _[h.NAME_RENEWAL_ACTIVE_PERIOD_CC_EXPIRED] = "Active Period Credit Card Expired", _[h.NAME_RENEWAL_EVALUATION_PERIOD_CC_MISSING_EXPIRED] = "Evaluation Period Missing or Expired Billing Info", _[h.NAME_RENEWAL_PAST_DUE_BILLING_ERROR] = "Past Due Billing Error", _[h.NAME_RENEWAL_PAST_DUE_BILLING_ERROR_GOTO] = "Past Due Billing Error Page", _[h.NAME_RENEWAL_SUSPENDED_PERIOD_BILLING_ERROR_GOTO] = "Renewal Suspended Billing Error Page", _[h.NAME_RENEWAL_ACCT_SETTINGS_CC_MISSING_EXPIRED] = "Evaluation Period Acct Settings Missing or Expired Billing Info", _[h.NAME_RENEWAL_ACCT_SETTINGS_PAST_DUE_BILLING_ERROR] = "Past Due Acct Settings Billing Error", _[h.NAME_RENEWAL_ACCT_SETTINGS_SUSPENDED_BILLING_ERROR] = "Renewal Suspended Acct Settings Billing Error";
        var N = [{
                name: g.ACCOUNT_SETTINGS_BANNER,
                selector: "#sm-control-panel-product-notification-banner",
                viewComponent: exports.SingleViewNotificationsContainer,
                viewComponentProps: {
                    animate: !0,
                    animationEffect: "reveal"
                }
            }, {
                name: g.BILLING_INFO_BANNER,
                selector: "#sm-billing-info-notification-banner",
                viewComponent: exports.SingleViewNotificationsContainer
            }, {
                name: g.FULL_PAGE_BODY,
                selector: ".sm-notification-page .sm-modal-content",
                viewComponent: exports.SingleViewNotificationsContainer
            }, {
                name: g.TOP_BANNER,
                selector: ".sm-notifications-container-top-banner",
                viewComponent: exports.SingleViewNotificationsContainer,
                viewComponentProps: {
                    animate: !0,
                    animationEffect: "reveal"
                }
            }],
            C = {},
            w = C[g.TOP_BANNER] = {};
        w[h.NAME_SERVICE_MIGRATION_STATUS] = {
            viewComponent: exports.ServiceMigrationBanner
        }, w[h.NAME_RENEWAL_ACTIVE_PERIOD_CC_EXPIRED] = {
            viewComponent: exports.ExpiredCCBanner,
            viewComponentProps: {
                assistantMessage: "Help us give the account owner a heads up.",
                assistantTitle: "Oh No! This Credit Cards Expired",
                updateBtnUrl: "https://" + SM.env.host.ssl + "/settings/billing/card"
            }
        }, w[h.NAME_RENEWAL_EVALUATION_PERIOD_CC_MISSING_EXPIRED] = {
            viewComponent: exports.ExpiredCCEvaluationPeriodBanner,
            viewComponentProps: {
                assistantTitle: "Pssst! The Billing Info Needs Fixing"
            }
        }, w[h.NAME_RENEWAL_PAST_DUE_BILLING_ERROR] = {
            viewComponent: exports.ExpiredCCBanner,
            viewComponentProps: {
                assistantMessage: "Please let the account owner know to update their info right away so we can keep your photos safe for years to come. ",
                assistantTitle: "Wait! We Couldnt Renew This Account"
            }
        };
        var A = C[g.FULL_PAGE_BODY] = {};
        A[h.NAME_RENEWAL_PAST_DUE_BILLING_ERROR_GOTO] = {
            viewComponent: exports.ExpiredCCPastDuePage,
            viewComponentProps: {
                assistantTitle: "We're Trying To Renew This Account",
                dismissBtnLabel: "Remind Me Later"
            }
        }, A[h.NAME_RENEWAL_SUSPENDED_PERIOD_BILLING_ERROR_GOTO] = {
            viewComponent: exports.ExpiredCCPage,
            viewComponentProps: {
                assistantMessage: "Weve been trying to renew this account but keep getting billing errors. We had to make the site private, but dont worry, were keeping your photos safe. Once the billing information is updated, everything will go back to normal."
            }
        };
        var T = C[g.ACCOUNT_SETTINGS_BANNER] = {};
        T[h.NAME_RENEWAL_ACCT_SETTINGS_CC_MISSING_EXPIRED] = {
            viewComponent: exports.ExpiredCCAccountSettingsBanner,
            viewComponentProps: {
                assistantMessage: "Help us give the account owner a heads up.",
                assistantTitle: "Pssst! The Billing Info Needs Fixing"
            }
        }, T[h.NAME_RENEWAL_ACCT_SETTINGS_PAST_DUE_BILLING_ERROR] = {
            viewComponent: exports.ExpiredCCAccountSettingsBanner,
            viewComponentProps: {
                assistantMessage: "Please let the photographer know to update their info right away so we can keep your photos safe for years to come. ",
                assistantTitle: "Wait! We Couldnt Renew This Account"
            }
        }, T[h.NAME_RENEWAL_ACCT_SETTINGS_SUSPENDED_BILLING_ERROR] = {
            viewComponent: exports.ExpiredCCAccountSettingsBanner,
            viewComponentProps: {
                assistantMessage: "Please let the photographer know to update their info right away so we can keep your photos safe for years to come. ",
                assistantTitle: "Wait! We Couldnt Renew This Account"
            }
        };
        var I = C[g.BILLING_INFO_BANNER] = {};
        I[h.NAME_RENEWAL_ACCT_SETTINGS_PAST_DUE_BILLING_ERROR] = {
                viewComponent: exports.BillingInfoBanner,
                viewComponentProps: {
                    ownerMessage: "Please update your credit card so we can renew your subscription. We'll charge your card once it's fixed."
                }
            }, I[h.NAME_RENEWAL_ACCT_SETTINGS_SUSPENDED_BILLING_ERROR] = {
                viewComponent: exports.BillingInfoBanner,
                viewComponentProps: {
                    ownerMessage: "Please update your credit card so we can renew your subscription. We'll charge your card once it's fixed."
                }
            },
            function() {
                function n(e) {
                    this.initializeNotificationViewContainers(), this.initializeNotifications(e)
                }
                var s = n.prototype;
                s.initializeNotificationViewContainers = function() {
                    this.notificationViewContainers = {}, N.forEach(function(e) {
                        var t = o.querySelector(e.selector);
                        t && (this.notificationViewContainers[e.name] = {
                            config: e,
                            domElement: t,
                            entries: [],
                            reactComponent: null
                        })
                    }, this)
                }, s.initializeNotifications = function(i) {
                    Array.isArray(i) || (i = [i]), this.notifications = [], i.forEach(function(t) {
                        this.notifications.push(new e(t))
                    }, this), this.notifications.forEach(function(e) {
                        var i, n;
                        Object.keys(this.notificationViewContainers).forEach(function(o) {
                            n = this.notificationViewContainers[o], i = this._getConfigForNotification(o, e), i && n.entries.push({
                                reactElement: a.createElement(i.viewComponent, t.assign({
                                    acknowledgeHandler: this.handleAcknowledge.bind(this, n),
                                    key: e.getKey(),
                                    logEvent: this._logNotificationEvent.bind(this),
                                    notification: e,
                                    owner: SM.env.pageOwner,
                                    viewer: SM.env.loggedInUser
                                }, i.viewComponentProps)),
                                notification: e
                            })
                        }, this)
                    }, this)
                }, s.render = function() {
                    var e;
                    for (e in this.notificationViewContainers) this._renderContainer(this.notificationViewContainers[e])
                }, s._renderContainer = function(e) {
                    var i;
                    e && e.domElement && (i = e.entries.length > 0 || e.reactComponent && e.reactComponent.isMounted(), i && (e.reactComponent = c.render(a.createElement(e.config.viewComponent, t.assign({
                        entries: e.entries
                    }, e.config.viewComponentProps)), e.domElement)))
                }, s.handleAcknowledge = function(e, t, i) {
                    return t.acknowledge(i).then(function() {
                        i && t.isDismissible() && e && (this._removeEntryFromContainer(e, t), this._renderContainer(e))
                    }.bind(this), function(e) {
                        throw e.error && 404 === e.error.response.Code && o.win.location.reload(), e
                    })
                }, s._logNotificationEvent = function(e, t, n, o, s) {
                    var r = this._createTrackerEvent(t, n, o || {});
                    return r.systemAction = s || !1, r.addContext(i.CONTEXT.NOTIFICATION, {
                        notification_name: e.getTrackingName(),
                        is_dismissible: e.isDismissible()
                    }), r.log()
                }, s._createTrackerEvent = function(e, t, n) {
                    return i.Tracker.createEvent(e, t, n || {})
                }, s._getConfigForNotification = function(e, t) {
                    var i = C[e];
                    return i ? i[t.getName()] : null
                }, s._removeEntryFromContainer = function(e, i) {
                    e && t.remove(e.entries, function(e) {
                        return e.notification === i
                    })
                }, exports.NotificationsController = n
            }()
    }(), SM.currentModule = null
}, "", {
    requires: ["lodash", "react", "react-dom", "sm-analytics", "sm-component-button", "sm-component-icon", "sm-dom", "sm-resource-notification"]
});
YUI.add("sm-overlay", function(e) {
    SM.currentModule = "sm-overlay";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        var l = "header-separated",
            t = e.Base.create("overlay", e.Panel, [], {
                DEF_PARENT_NODE: ".sm-overlay-container",
                initializer: function(t) {
                    t || (t = {}), t.close && this.plug(e.SM.Plugin.OverlayClose, t), t.draggable && this.plug(e.SM.Plugin.OverlayDrag, t), t.headerSeparator && this.get("boundingBox").addClass(this.getClassName(l)), (t.disableScrollbars || t.modal) && (!t.disableScrollbars, this.plug(e.SM.Plugin.OverlayScrollbars, t))
                },
                renderUI: function() {
                    var l = this.get("title"),
                        t = this.get("smbuttons"),
                        a = null,
                        r = null,
                        s = null,
                        n = 0;
                    if (l.length > 0 && this.set("headerContent", '<h3 class="sm-heading">' + l + "</h3>"), t.length > 0) {
                        for (a = document.createDocumentFragment(), n = 0; n < t.length; n++) r = t[n], r.label && r.value && (s = new e.SM.Button({
                            label: r.label,
                            value: r.value,
                            skin: r.skin ? r.skin : e.SM.Button.SKINS.LIGHT
                        }), s.render(a));
                        this.setStdModContent(e.WidgetStdMod.FOOTER, a, e.WidgetStdMod.AFTER)
                    } else this.getStdModNode(e.WidgetStdMod.FOOTER) || this.setStdModContent(e.WidgetStdMod.FOOTER, "")
                }
            }, {
                CSS_PREFIX: "sm-overlay",
                ATTRS: {
                    title: {
                        value: ""
                    },
                    smbuttons: {
                        value: []
                    },
                    buttons: {
                        value: {}
                    },
                    close: {
                        value: !1
                    },
                    draggable: {
                        value: !1
                    },
                    headerSeparator: {
                        value: !1
                    },
                    disableScrollbars: {
                        value: !1
                    },
                    constrain: {
                        value: !0
                    }
                }
            });
        e.namespace("SM").Overlay = t
    }(), SM.currentModule = null
}, "", {
    requires: ["overlay", "panel", "sm-button", "sm-overlayclose", "sm-overlaydrag", "sm-overlayscrollbars", "sm-templates-button"]
});
YUI.add("sm-overlayclose", function(e) {
    SM.currentModule = "sm-overlayclose";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        var n = e.Node,
            t = "boundingBox",
            s = "host",
            o = "close",
            i = "overlayclose",
            r = o,
            l = "closeNode",
            a = "sm-icon",
            u = '<span class="' + a + " " + a + "-" + o + '" title="Close"></span>',
            c = e.Base.create(i, e.Plugin.Base, [], {
                initializer: function(e) {
                    this.afterHostEvent("render", this._render)
                },
                destructor: function() {
                    var e = this.get(l);
                    e && e.destroy()
                },
                _render: function() {
                    var e = this.get(s),
                        n = e.get(t),
                        o = this.get(l);
                    n.appendChild(o), this._bind()
                },
                _bind: function() {
                    var e = this.get(l);
                    this.publish(o, {
                        defaultFn: this._defCloseFn
                    }), e.on("click", function(e) {
                        e.halt(), this.fire(o)
                    }, this)
                },
                _defCloseFn: function(e) {
                    var n = this.get(s);
                    n.hide()
                }
            }, {
                NS: r,
                ATTRS: {
                    closeNode: {
                        valueFn: function() {
                            return n.create(u)
                        }
                    }
                }
            });
        e.namespace("SM").OverlayClosePlugin = c, e.namespace("SM.Plugin").OverlayClose = c, e.namespace("SM.Plugin").EVENT_CLOSE = o
    }(), SM.currentModule = null
}, "", {
    requires: ["node", "overlay", "plugin"]
});
YUI.add("sm-overlaydrag", function(e) {
    SM.currentModule = "sm-overlaydrag";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        var t = e.Node,
            d = "boundingBox",
            n = "host",
            r = "drag",
            a = "overlaydrag",
            i = r,
            o = "handleNode",
            s = "sm-icon",
            g = "dragwide",
            l = '<span class="' + s + " " + s + "-" + g + '" title="Drag"></span>',
            u = e.Base.create(a, e.Plugin.Base, [], {
                _drag: null,
                initializer: function(e) {
                    this.afterHostEvent("render", this._render)
                },
                destructor: function() {
                    var e = this.get(n),
                        t = (e.get(d), this.get(o));
                    t && t.destroy(), this._drag && this._drag.destroy()
                },
                _render: function() {
                    var e = this.get(n),
                        t = e.get(d),
                        r = this.get(o);
                    t.appendChild(r), this._bind()
                },
                _bind: function() {
                    var t = this.get(n),
                        r = t.get(d),
                        a = this.get(o),
                        i = t.getStdModNode(e.WidgetStdMod.HEADER) ? t.getStdModNode(e.WidgetStdMod.HEADER).one("h1") : null,
                        s = [a];
                    null !== i && s.push(i), e.each(s, function(t) {
                        t instanceof e.Node && t.addClass("yui3-dd-handle")
                    }), this._drag = new e.DD.Drag({
                        node: r,
                        handles: s
                    }), this._drag.addTarget(this)
                }
            }, {
                NAME: a,
                NS: i,
                ATTRS: {
                    handleNode: {
                        valueFn: function() {
                            return t.create(l)
                        }
                    }
                }
            });
        e.namespace("SM").OverlayDragPlugin = u, e.namespace("SM.Plugin").OverlayDrag = u
    }(), SM.currentModule = null
}, "", {
    requires: ["dd-plugin", "node", "overlay", "plugin"]
});
YUI.add("sm-overlayscrollbars", function(l) {
    SM.currentModule = "sm-overlayscrollbars";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        var r = "host",
            s = "overlayscrollbars",
            o = s,
            e = "disableScrollbars",
            a = "scrollbarClass",
            n = "sm-noscroll",
            t = "sm-noscroll-x",
            c = "sm-noscroll-y",
            u = l.Base.create(s, l.Plugin.Base, [], {
                initializer: function() {
                    this.beforeHostMethod("show", this._removeScrollbars), this.beforeHostMethod("hide", this._addScrollbars)
                },
                _removeScrollbars: function() {
                    var s = this.get(r),
                        o = s.get(e),
                        u = null;
                    o === !0 ? u = n : "x" == o ? u = t : "y" == o && (u = c), null !== u && (l.one("body").addClass(u), this.set(a, u))
                },
                _addScrollbars: function() {
                    var r = this.get(a);
                    l.one("body").removeClass(r)
                }
            }, {
                NS: o,
                ATTRS: {
                    scrollbarClass: {
                        value: null
                    }
                }
            });
        l.namespace("SM.Plugin").OverlayScrollbars = u
    }(), SM.currentModule = null
}, "", {
    requires: ["node", "overlay", "plugin"]
});
YUI.add("sm-page-admin", function(e) {
    SM.currentModule = "sm-page-admin";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        "use strict";
        var i = e.SM.Page,
            o = SM.env,
            n = o.host;
        i.admin = {
            jsLevel: e.Cookie.get("jslevel"),
            widgetsLoaded: 0,
            reload: function() {
                document.location.reload(!0)
            },
            setCookie: function(o, a, l) {
                return e.Cookie.set(o, a, {
                    domain: n.session,
                    path: "/",
                    expires: new Date(+new Date + 31536e6)
                }), l && i.admin.reload(), i.admin
            },
            clearCookie: function(o, a) {
                return e.Cookie.remove(o, {
                    domain: n.session,
                    path: "/"
                }), a && i.admin.reload(), i.admin
            },
            toggleCookie: function(o, n, a) {
                return e.Cookie.exists(o) ? i.admin.clearCookie(o) : i.admin.setCookie(o, n), a && i.admin.reload(), i.admin
            }
        }, i.on("page:init", function() {
            var o = i.user.isAdmin && i.navigation.getMenu("account");
            if (o) {
                var a = i.owner && i.owner.nickName ? i.owner.nickName : null;
                o.insertNode(null, {
                    label: "Admin",
                    children: [{
                        label: "Admin Home",
                        url: "https://" + n.ssl + "/admin/"
                    }, {
                        type: "heading",
                        label: "User Tools"
                    }, {
                        label: "User Homepage",
                        state: {
                            disabled: !a
                        },
                        url: a ? i.owner.homepage : ""
                    }, {
                        label: "User Info",
                        state: {
                            disabled: !a
                        },
                        url: "https://" + n.ssl + "/admin/info/user/?NickName=" + a
                    }, {
                        label: "User Account Settings",
                        state: {
                            disabled: !a
                        },
                        url: "https://" + n.ssl + "/settings/?nick=" + a
                    }, {
                        label: "User Profile",
                        state: {
                            disabled: !a
                        },
                        onclick: function() {
                            i.nav.profile.showProfileOverlay(a)
                        }
                    }, {
                        label: "Album Info",
                        state: {
                            disabled: !(i.model.get("Type") === e.SM.Models.UserNode.TYPES.ALBUM)
                        },
                        onclick: function() {
                            i.album && i.album.get(i.album.idAttribute) && (window.location.href = "https://" + n.ssl + "/admin/albuminfo.mg?AlbumID=" + i.album.get(i.album.idAttribute))
                        }
                    }, {
                        type: "heading",
                        label: "Admin Tools"
                    }, {
                        label: "JS/CSS Levels",
                        children: [{
                            label: ("-min" === i.admin.jsLevel || null === i.admin.jsLevel ? " " : "") + "Min",
                            onclick: function() {
                                i.admin.clearCookie("jslevel", !0)
                            }
                        }, {
                            label: ("" === i.admin.jsLevel || "-raw" === i.admin.jsLevel ? " " : "") + "Raw",
                            onclick: function() {
                                i.admin.setCookie("jslevel", "-raw", !0)
                            }
                        }]
                    }, {
                        label: "TimeStuff",
                        children: [{
                            label: (e.Cookie.exists("timeStuff") ? " " : "") + "TimeStuff",
                            onclick: function() {
                                i.admin.setCookie("timeStuffNick", i.user.nickName).toggleCookie("timeStuff", !0).clearCookie("timeStuffImages", !0)
                            }
                        }, {
                            label: (e.Cookie.exists("timeStuffImages") ? " " : "") + "Images",
                            onclick: function() {
                                i.admin.setCookie("timeStuffNick", i.user.nickName).toggleCookie("timeStuff", !0).toggleCookie("timeStuffImages", !0, !0)
                            }
                        }]
                    }, {
                        label: (e.Cookie.exists("loadReactPerf") ? " " : "") + "React Perf",
                        state: {
                            disabled: "-min" === i.admin.jsLevel || null === i.admin.jsLevel
                        },
                        onclick: function() {
                            i.admin.toggleCookie("loadReactPerf", !0, !0)
                        }
                    }, {
                        label: (e.Cookie.exists("XHProfiler") ? " " : "") + "XHProf",
                        onclick: function() {
                            i.admin.toggleCookie("XHProfiler", !0, !0)
                        }
                    }, {
                        label: (e.Cookie.exists("dpnaa") ? " " : "") + "Hide Notifications",
                        onclick: function() {
                            i.admin.toggleCookie("dpnaa", !0, !0)
                        }
                    }]
                }, {
                    index: 3,
                    silent: !0
                })
            }
        }), "undefined" != typeof performance && i.on("widget-loaded", function() {
            if (++i.admin.widgetsLoaded === i.widgets.length) {
                var e = performance.timing,
                    o = +new Date - e.navigationStart,
                    n = e.responseEnd - e.requestStart,
                    a = o - n;
                console.log("User-perceived page loading time: " + o + "ms"), console.log("Backend response time: " + n + "ms"), console.log("Render time: " + a + "ms")
            }
        })
    }(), SM.currentModule = null
}, "", {
    requires: ["cookie", "sm-page-nav-account"]
});
YUI.add("sm-page-alert", function(e) {
    SM.currentModule = "sm-page-alert";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        e.namespace("SM.Page").alert = e.SM.Panel.alert
    }(), SM.currentModule = null
}, "", {
    requires: ["sm-page", "sm-panel-alert"]
});
YUI.add("sm-page-background", function(e) {
    SM.currentModule = "sm-page-background";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        "use strict";
        var a, o, i, n, s = e.SM.Page;
        e.namespace("SM.Page").background = {
            render: function(e) {
                if (this.config = e, s.background.destroy(), e) switch (e.BackgroundType) {
                    case "photo":
                        this.renderImage(e);
                        break;
                    case "slideshow":
                        this.renderSlideshow(e);
                        break;
                    case "video":
                        this.renderVideo(e)
                }
            },
            destroy: function() {
                a && (a.destroy(), a = null), o && (o.destroy(), o = null), n && (n.remove(!0), n = null), i && (i.remove(!0), i = null), e.one("body").removeClass("sm-page-hasbackground")
            },
            renderImage: function(i) {
                i.ImageData && (e.one("body").addClass("sm-page-hasbackground"), o = new e.SM.Models.Image(i.ImageData), a = new e.SM.Views.Tile({
                    clickable: !1,
                    container: this._getContainer(),
                    imageSize: "cover",
                    resource: o,
                    verticallyCenter: "center" === i.VerticalAlign
                }), a.render(), this._renderMask(i))
            },
            renderSlideshow: function(a) {
                var i = this,
                    n = {
                        autoStart: e.Lang.isUndefined(a.AutoStart) ? !0 : a.AutoStart,
                        clickable: e.Lang.isUndefined(a.Clickable) ? !1 : a.Clickable,
                        contentAwareHeight: !1,
                        cover: e.Lang.isUndefined(a.Cover) ? !0 : a.Cover,
                        heightSource: "inline",
                        randomize: e.Lang.isUndefined(a.Randomize) ? !1 : a.Randomize,
                        showCaptions: e.Lang.isUndefined(a.ShowCaptions) ? !1 : a.ShowCaptions,
                        showFullscreen: !1,
                        showNavigation: e.Lang.isUndefined(a.ShowNavigation) ? !1 : a.ShowNavigation,
                        showPlayButton: e.Lang.isUndefined(a.PlayButton) ? !1 : a.PlayButton,
                        showSpeed: !1,
                        showThumbnails: !1,
                        speed: a.Speed,
                        splashDelay: a.SplashDelay,
                        splashImageID: a.SplashImageID,
                        transition: a.Transition,
                        transitionSpeed: a.TransitionSpeed
                    };
                if (a.SplashImageData && (n.splashImage = new e.SM.Models.Image(a.SplashImageData)), "selectedImages" === a.SlideshowSource) {
                    if (!a.ImageListData) return;
                    n.randomize = !!a.Randomize, o = new e.SM.Models.ImageList, o.add(a.ImageListData), o.size() && (n.modelList = o, this._showSlideshow(n, a))
                } else {
                    var t = void 0;
                    switch (a.SlideshowSource) {
                        case "album":
                            if (!a.AlbumID || !a.AlbumKey) return;
                            o = new e.SM.Models.GalleryImageList, t = {
                                albumId: a.AlbumID,
                                albumKey: a.AlbumKey
                            };
                            break;
                        case "keyword":
                            if (!a.Keywords) return;
                            o = new e.SM.Models.GalleryImageList, t = {
                                keywords: a.Keywords,
                                nickName: s.owner.nickName
                            };
                            break;
                        case "recent":
                            n.randomize = !!a.Randomize, o = new e.SM.Models.ImageList, t = {
                                NickName: s.owner.nickName,
                                Limit: 50
                            };
                            break;
                        default:
                            return
                    }("album" === a.SlideshowSource || "keyword" === a.SlideshowSource) && (Object.assign(t, {
                        returnModelList: !0,
                        idCopy: !0,
                        PageNumber: 1,
                        PageSize: 10
                    }), a.Randomize && (t.randomize = Date.now())), o.load({
                        apiCategory: a.SlideshowSource,
                        data: t,
                        prefetchNext: !0,
                        prefetchPrev: !0
                    }, function(e) {
                        !e && o.size() && (n.modelList = o, i._showSlideshow(n, a))
                    })
                }
            },
            _showSlideshow: function(o, i) {
                var n = this._getContainer();
                a = new e.SM.Views.Slideshow(o), o.modelList instanceof e.SM.Models.GalleryImageList && a.plug(e.SM.SlideshowGalleryPlugin), n.setHTML(a.get("container")), this._renderMask(i), e.one("body").addClass("sm-page-hasbackground"), a.render()
            },
            renderVideo: function(i) {
                if (i.VideoData) {
                    var n, s, t, r, d = this._getContainer(),
                        l = i.Loop ? " loop" : "";
                    !e.UA.ios && this._hasHTMLMP4Support() ? (e.one("body").addClass("sm-page-hasbackground"), o = new e.SM.Models.Image(i.VideoData), n = o.getLargestVideoSizeForContainer(Math.min(e.DOM.winWidth(), 960)), s = o.get("Sizes"), t = s[n], r = t.width / t.height, a = e.Node.create('<video autoplay class="' + this._getVideoAspectRatioClassName(r) + '" preload="auto" muted src="' + t.url + '"' + l + "></video>"), d.setHTML(a), this._renderMask(i)) : this.renderImage(i)
                }
            },
            _hasHTMLMP4Support: function() {
                var e = document.createElement("video");
                return e && e.canPlayType ? e.canPlayType("video/mp4;") : !1
            },
            _getVideoAspectRatioClassName: function(e) {
                var a = "sm-video-";
                return 1 > e ? a += "portrait" : 1 === e ? a += "square" : 1.333 >= e ? a += "traditional" : 1.778 >= e ? a += "widescreen" : e >= 2.35 && (a += "cinematic"), a
            },
            _renderMask: function(a) {
                if (a.Mask) {
                    var o = this._getContainer(),
                        n = "sm-page-background-mask",
                        s = [n];
                    a.MaskColor && s.push(n + "-color-" + a.MaskColor), a.MaskOpacity && s.push(n + "-opacity-" + a.MaskOpacity), i = e.Node.create('<div class="' + s.join(" ") + '"></div>'), o.append(i)
                }
            },
            _getContainer: function() {
                if (!n) {
                    var a = e.one("body");
                    n = e.Node.create('<div class="sm-page-background"></div>'), n.generateID(), a.prepend(n)
                }
                return n
            }
        }
    }(), SM.currentModule = null
}, "", {
    requires: ["node", "promise", "sm-image-model", "sm-tile-view", "sm-album-model", "sm-image-model", "sm-slideshow-view", "sm-slideshow-gallery-plugin"]
});
YUI.add("sm-page-contact", function(e) {
    SM.currentModule = "sm-page-contact";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        "use strict";
        var n = e.SM.Page,
            o = e.one(".sm-footer-navitem-contact");
        e.namespace("SM.Page").contact = {
            addContactOverlay: function() {
                return n.dialogs.contact ? void 0 : new e.Promise(function(o) {
                    e.use("sm-procontact-overlay", function() {
                        n.dialogs.contact = {
                            dialogClass: e.SM.ProContactOverlay,
                            config: {
                                proNickname: n.owner.nickName,
                                displayName: n.owner.profileName || n.owner.siteName || n.owner.nickName,
                                visible: !1
                            }
                        }, o()
                    })
                })
            }
        }, o && !n.isOwnerLoggedIn() && n.owner && (o.one(">a").setAttribute("href", "#"), o.on("click", function(o) {
            o.preventDefault(), e.when(e.SM.Page.contact.addContactOverlay()).then(function() {
                n.showDialog("contact")
            })
        }))
    }(), SM.currentModule = null
}, "", {
    requires: ["promise", "sm-page-nodepage"]
});
YUI.add("sm-page-cookiemonster", function(e) {
    SM.currentModule = "sm-page-cookiemonster";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        "use strict";
        e.SM.Page.on("page:init", function(o) {
            if (o.cookieMonster === !0 && o.cookieMonsterHost) {
                var r = SM.env.host,
                    n = "https://" + r.main;
                e.one("body").append('<iframe class="sm-cookiemonster" src="' + n + "/include/js/cookiemonster.mg?returnTo=" + r.http + o.cookieMonsterHost + '" frameborder="0" height="0" width="0" scrolling="no"></iframe>')
            }
        })
    }(), SM.currentModule = null
}, "", {
    requires: ["sm-page"]
});
YUI.add("sm-page-eucookie", function(e) {
    SM.currentModule = "sm-page-eucookie";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        e.SM.Page.on("page:init", function(o) {
            if (o.eucookie) {
                var n = e.one(".sm-eu-cookie-message");
                n && n.one("button").on("click", function() {
                    n.hide()
                })
            }
        })
    }(), SM.currentModule = null
}, "", {
    requires: ["event-base", "node-base", "sm-page"]
});
YUI.add("sm-page-feeds", function(e) {
    SM.currentModule = "sm-page-feeds";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        "use strict";
        var n = e.SM.Page,
            u = e.one(".sm-footer-navitem-feeds").appendChild(e.SM.Templates.button({
                icon: "RSS",
                noChrome: !0,
                size: "small"
            }));
        n.on("page:init", function(t) {
            var s = t.feedsConfig;
            s && s.length && (u.plug(e.SM.Plugin.Menu, {
                items: s
            }), n.navigation.menus.feeds = u.menu)
        })
    }(), SM.currentModule = null
}, "", {
    requires: ["sm-menu", "sm-page-menu", "sm-templates-button"]
});
YUI.add("sm-page-layout", function(e) {
    SM.currentModule = "sm-page-layout";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        "use strict";
        var t = e.SM.Page,
            o = "sm-page-layout-region-pinned",
            i = "sm-page-layout-region-stopped";
        e.namespace("SM.Page").layout = {
            pinnedRegionNode: null,
            clonedRegionNode: null,
            regionPositionInfo: null,
            footerRegionNode: null,
            initPinnedRegion: function() {
                t.layout.pinnedRegionNode && (t.layout.unstopRegion(t.layout.pinnedRegionNode), t.layout.unpinRegion(t.layout.pinnedRegionNode)), t.layout.pinnedRegionNode = null, t.layout.clonedRegionNode = null, t.layout.regionPositionInfo = null, t.layout.fillHeight = null;
                var o, i, n = e.one(".sm-page-layout[data-pinned-region]");
                n && (o = n.getData("pinned-region").toLowerCase(), o && (t.layout.footerRegionNode = n.one("> .sm-page-layout-region-footer"), i = "header" === o || "footer" === o ? n.one("> .sm-page-layout-region-" + o) : n.one("> .sm-page-layout-region > .sm-page-layout-region-" + o), i && (t.layout.pinnedRegionNode = i, t.layout.fillHeight = n.hasClass("sm-page-layout-fillheight"), t.layout.attachScroll(), t.layout._attachWindowResize(), ("footer" === o || "header" === o) && t.layout.initPinnedHeaderFooter(i))))
            },
            attachScroll: function() {
                var o = e.one("body");
                o.plug(e.Plugin.ScrollInfo, {
                    scrollDelay: e.UA.ie && e.UA.ie < 10 ? 100 : 10
                }), t.layout._scrollHandler = o.scrollInfo.on("scroll", t.layout.onScroll)
            },
            detachScroll: function() {
                var o = e.one("body");
                t.layout._scrollHandler && t.layout._scrollHandler.detach(), o.unplug(e.Plugin.ScrollInfo)
            },
            onScroll: function(o) {
                var i = t.layout.pinnedRegionNode,
                    n = t.layout.getRegionPositionInfo(i),
                    l = "footer" === n.regionName,
                    a = o.isScrollDown,
                    s = o.isScrollUp,
                    g = o.scrollTop,
                    r = n.y,
                    u = n.offsetHeight,
                    h = t.layout.footerRegionNode,
                    d = t.layout.clonedRegionNode;
                l && (r = d ? d.getY() : i.getY()), s && l ? g + e.DOM.winHeight() <= r + u && t.layout.pinRegion(i) : a && l ? g + e.DOM.winHeight() >= r + u && t.layout.unpinRegion(i) : a ? g >= r && (t.layout.pinRegion(i), "header" !== n.regionName && (u = i.get("offsetHeight"), g + u >= h.getY() && t.layout.stopRegion(i))) : s && (u = i.get("offsetHeight"), h.getY() - u >= g && t.layout.unstopRegion(i), r >= g && (t.layout.unstopRegion(i), t.layout.unpinRegion(i)))
            },
            initPinnedHeaderFooter: function(e) {
                this._initTimeout && clearTimeout(this._initTimeout), this._initCounter ? this._initCounter++ : this._initCounter = 1, this._initCounter <= 60 && (this._initTimeout = setTimeout(function() {
                    t.layout.pinHeaderFooter(e) || t.layout.initPinnedHeaderFooter(e)
                }, 500))
            },
            pinHeaderFooter: function(o) {
                var i = e.one("body"),
                    n = t.layout.getRegionPositionInfo(o),
                    l = o.getY(),
                    a = n.offsetHeight,
                    s = 0,
                    g = n.regionName;
                return i.scrollInfo && (s = i.scrollInfo.getScrollInfo().scrollTop || 0), "header" === g && s >= l ? (t.layout.pinRegion(o), !0) : "footer" === g && s + e.DOM.winHeight() <= l + a ? (t.layout.pinRegion(o), !0) : !1
            },
            getRegionSizeInfo: function(t) {
                return {
                    x: t.getX(),
                    width: t.get("offsetWidth"),
                    computedHeight: t.getComputedStyle("height"),
                    winWidth: e.DOM.winWidth(),
                    winHeight: e.DOM.winHeight()
                }
            },
            getRegionPositionInfo: function(e) {
                var o, i = t.layout.clonedRegionNode;
                return null === t.layout.regionPositionInfo && e && (e.hasClass("sm-page-layout-region-left") ? o = "left" : e.hasClass("sm-page-layout-region-header") ? o = "header" : e.hasClass("sm-page-layout-region-right") ? o = "right" : e.hasClass("sm-page-layout-region-footer") && (o = "footer"), t.layout.regionPositionInfo = {
                    y: i ? i.getY() : e.getY(),
                    width: e.getStyle("width"),
                    minHeight: e.getStyle("minHeight"),
                    offsetHeight: e.get("offsetHeight"),
                    regionName: o
                }), t.layout.regionPositionInfo
            },
            pinRegion: function(e) {
                var i, n, l, a;
                e && !e.hasClass(o) && (l = t.layout.getRegionPositionInfo(e), i = t.layout.getRegionSizeInfo(e), a = {
                    width: i.width + "px"
                }, t.layout.clonedRegionNode = n = e.cloneNode(), n.setStyles({
                    visibility: "hidden",
                    height: i.computedHeight
                }), "right" === l.regionName ? a.right = i.winWidth - (i.x + i.width) + "px" : "left" === l.regionName && (a.left = i.x + "px"), !t.layout.fillHeight || "left" !== l.regionName && "right" !== l.regionName || (a.minHeight = i.winHeight + "px"), e.insert(n, "after"), e.setStyles(a), e.addClass(o))
            },
            stopRegion: function(e) {
                if (e && e.hasClass(o) && !e.hasClass(i)) {
                    var n = t.layout.getRegionPositionInfo(e),
                        l = {};
                    "right" === n.regionName ? l.right = "0px" : "left" === n.regionName && (l.left = "0px"), e.setStyles(l), e.addClass(i)
                }
            },
            unstopRegion: function(e) {
                if (e && e.hasClass(i)) {
                    var o = t.layout.getRegionPositionInfo(e),
                        n = t.layout.getRegionSizeInfo(e),
                        l = {};
                    "right" === o.regionName ? l.right = n.winWidth - (n.x + n.width) + "px" : "left" === o.regionName && (l.left = n.x + "px"), e.setStyles(l), e.removeClass(i)
                }
            },
            unpinRegion: function(e) {
                if (e) {
                    var i = t.layout.getRegionPositionInfo(e),
                        n = {
                            width: i.width,
                            minHeight: 0
                        };
                    e.hasClass(o) && (t.layout.clonedRegionNode && t.layout.clonedRegionNode.remove(!0), t.layout.clonedRegionNode = null, t.layout.regionPositionInfo = null, e.removeClass(o), "right" === i.regionName ? n.right = 0 : "left" === i.regionName ? n.left = "auto" : ("header" === i.regionName || "footer" === i.regionName) && (n.width = "inherit"), e.setStyles(n))
                }
            },
            stopPinning: function() {
                t.layout.unstopRegion(t.layout.pinnedRegionNode), t.layout.unpinRegion(t.layout.pinnedRegionNode), t.layout.detachScroll(), t.layout.pinnedRegionNode = null, t.layout.clonedRegionNode = null, t.layout.regionPositionInfo = null, t.layout.fillHeight = null
            },
            initFillHeight: function() {
                var t = this,
                    o = e.all(".sm-page-layout.sm-page-layout-fillheight");
                o.size() && (this._layoutNodes = o, this._layoutRegions = {}, o.each(function(e) {
                    t._setFillHeights(e)
                }), this._attachWindowResize())
            },
            _attachWindowResize: function() {
                this._detachWindowResize(), this._resizeHandler = e.after("windowresize", this._afterWindowResize, null, this)
            },
            _detachWindowResize: function() {
                this._resizeHandler && this._resizeHandler.detach(), this._resizeHandler = null
            },
            _getLayoutRegions: function(e) {
                var t, o;
                return o = e.generateID(), t = this._layoutRegions[o], t || (t = this._layoutRegions[o] = {
                    top: e.one("> .sm-page-layout-region > .sm-page-layout-region-top"),
                    body: e.one("> .sm-page-layout-region-body"),
                    left: e.one("> .sm-page-layout-region-body > .sm-page-layout-region-left"),
                    center: e.one("> .sm-page-layout-region-body > .sm-page-layout-region-center"),
                    right: e.one("> .sm-page-layout-region-body > .sm-page-layout-region-right"),
                    bottom: e.one("> .sm-page-layout-region > .sm-page-layout-region-bottom")
                }), t
            },
            _getMinHeight: function(t, o) {
                var i, n = e.DOM.winHeight(),
                    l = t.getY(),
                    a = o.top ? o.top.get("offsetHeight") : 0,
                    s = o.left ? o.left.get("offsetHeight") : 0,
                    g = o.center ? o.center.get("offsetHeight") : 0,
                    r = o.right ? o.right.get("offsetHeight") : 0,
                    u = o.bottom ? o.bottom.get("offsetHeight") : 0,
                    h = Math.max(s, g, r),
                    d = n - l - a - h - u;
                d -= parseInt(t.getStyle("marginTop"), 10), d -= parseInt(t.getStyle("marginBottom"), 10);
                var y = e.one("#sm-page-footer, .sm-page-powered-by");
                return y && (d -= y.get("offsetHeight"), d -= parseInt(y.getStyle("marginTop"), 10), d -= parseInt(y.getStyle("marginBottom"), 10)), i = d > 0 ? h + d : h
            },
            _resetFillHeights: function(e) {
                var t = this._getLayoutRegions(e),
                    o = {
                        minHeight: 0
                    };
                t.center && t.center.setStyles(o), o.bottom = "auto", t.left && t.left.setStyles(o), t.right && t.right.setStyles(o)
            },
            _setFillHeights: function(e) {
                var t = this._getLayoutRegions(e),
                    o = this._getMinHeight(e, t),
                    i = {
                        minHeight: o + "px"
                    };
                t.center && t.center.setStyles(i), i.bottom = "0", t.left && t.left.setStyles(i), t.right && t.right.setStyles(i)
            },
            _afterWindowResize: function() {
                var i = this;
                if (e.DOM.winWidth() > e.SM.Page.responsiveDesign.mobileMaxWidth) {
                    this._layoutNodes && (this._layoutNodes.each(function(e) {
                        i._resetFillHeights(e)
                    }), this._layoutNodes.each(function(e) {
                        i._setFillHeights(e)
                    }));
                    var n = this.pinnedRegionNode,
                        l = t.layout.getRegionPositionInfo(n);
                    n && n.hasClass(o) && ("footer" === l.regionName || "header" === l.regionName ? (this.unpinRegion(n), this.pinHeaderFooter(n)) : (this.unpinRegion(n), this.pinRegion(n)))
                } else this.stopPinning(), this.stopFillHeight(), this.attachWindowResizeForReattach()
            },
            attachWindowResizeForReattach: function() {
                this._detachWindowResize(), this._resizeHandler = e.after("windowresize", this._afterWindowResizeForReattach, null, this)
            },
            _afterWindowResizeForReattach: function() {
                e.DOM.winWidth() > e.SM.Page.responsiveDesign.mobileMaxWidth && (this._detachWindowResize(), this.initPinnedRegion(), this.initFillHeight(), this._afterWindowResize())
            },
            stopFillHeight: function() {
                var e = this;
                this._detachWindowResize(), this._layoutNodes && this._layoutNodes.each(function(t) {
                    e._resetFillHeights(t)
                }), this._layoutNodes = null, this._layoutRegions = null
            }
        }, e.once("domready", function() {
            e.DOM.winWidth() > e.SM.Page.responsiveDesign.mobileMaxWidth ? (t.layout.initPinnedRegion(), t.layout.initFillHeight()) : t.layout.attachWindowResizeForReattach(), e.one("body").addClass("sm-page-initialized")
        })
    }(), SM.currentModule = null
}, "", {
    requires: ["event-resize", "node", "sm-scrollinfo"]
});
YUI.add("sm-page-live-chat", function(e) {
    SM.currentModule = "sm-page-live-chat";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        "use strict";
        var n = SM["import"]("lodash"),
            t = SM["import"]("sm-live-chat"),
            a = SM["import"]("sm-component-panel-modal"),
            s = SM["import"]("sm-component-panel-base"),
            o = e.SM.Page,
            r = SM["import"]("react"),
            i = r.createClass({
                displayName: "InfoPanel",
                propTypes: {
                    onClose: r.PropTypes.func.isRequired,
                    reason: r.PropTypes.string.isRequired
                },
                render: function() {
                    var e = this.props.reason;
                    return r.createElement(a, null, r.createElement(s, {
                        height: 65,
                        width: 515
                    }, r.createElement(s.Header, null, r.createElement(s.CloseButton, {
                        onClick: this.props.onClose
                    })), r.createElement(s.Body, null, r.createElement("div", {
                        className: "sm-panel-content-margin"
                    }, r.createElement("span", {
                        dangerouslySetInnerHTML: {
                            __html: e.charAt(e.length - 1).match(/[.!?]/) ? this.props.reason : this.props.reason + "."
                        }
                    }), r.createElement("a", {
                        href: "http://help.smugmug.com/customer/portal/emails/new",
                        target: "_blank"
                    }, " Contact us by email any time.")))))
                }
            });
        __lc.visitor = {
            name: o.user.displayName,
            email: o.user.email
        }, n.assign(t, {
            hasMenu: !0,
            nickName: o.user.nickName,
            sslHost: SM.env.host.ssl,
            userHomepage: o.user.homepage,
            disableMenuItem: function() {
                var e = this._getMenuNode();
                e && e.disable()
            },
            enableMenuItem: function() {
                var e = this._getMenuNode();
                e && !LC_API.visitor_engaged() && e.enable()
            },
            heroesAvailable: function() {
                return LC_API.agents_are_available()
            },
            launchChat: function() {
                this.initialize().then(function() {
                    t.heroesAvailable() ? t.displayChat() : t.showPanel()
                }, function() {
                    t.showPanel({
                        error: !0
                    })
                })
            },
            showPanel: function(e) {
                e || (e = {});
                var n;
                n = e.error ? "Error loading live chat" : o.liveChat.closureReason;
                var t = a.mount(r.createElement(i, {
                    onClose: function() {
                        a.unmount(t)
                    },
                    reason: n
                }))
            },
            userHasFeature: function() {
                return o.userHasFeature(o.FEATURES.SUPPORT_CHAT)
            },
            _getMenuNode: function() {
                var e = o.help && o.help.getMenu();
                return e && !this._menuNode && (this._menuNode = o.help.getMenu().getNodeById("LiveChat")), this._menuNode
            },
            _onChatMinimized: function() {
                this._chatEnded || LC_API.visitor_engaged() ? this._chatEnded = null : LC_API.hide_chat_window(), this.enableMenuItem()
            },
            _onChatStart: function() {
                LC_API.visitor_engaged() && this.disableMenuItem()
            }
        }, !0)
    }(), SM.currentModule = null
}, "", {
    requires: ["lodash", "react", "sm", "sm-component-panel-base", "sm-component-panel-modal", "sm-live-chat", "sm-page"]
});
YUI.add("sm-page-menu", function(e) {
    SM.currentModule = "sm-page-menu";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        function n(e) {
            e.preventDefault()
        }
        var t = e.SM.Page,
            a = t.navigation,
            u = SM["import"]("lodash"),
            r = SM["import"]("sm-analytics");
        e.mix(a, {
            menus: {},
            _defAddMenuFn: function(t) {
                var u, r = a.menus,
                    i = t.config || {};
                r[t.name] || (u = a.addItem(t.name), u && (u.all("a").on("click", n), u.plug(e.SM.Plugin.Menu, {
                    items: i.items || []
                }), i.tracking && u.before("click", a._onParentItemClick, null, i.tracking), u.menu.on("itemClick", a._onItemClick), r[t.name] = u.menu)), t.menu = r[t.name]
            },
            _defRemoveMenuFn: function(e) {
                var n = a.menus[e.name];
                n && (n.destroy(), delete a.menus[e.name], a.removeItem(e.name))
            },
            _onItemClick: function(e) {
                var n = e.item,
                    t = function() {
                        "function" == typeof n.onclick ? n.onclick(e) : n.url && "#" !== n.url && (document.location.href = n.url)
                    };
                n.url && "#" !== n.url && e.preventDefault(), n.tracking ? a.trackEvent(u.assign(n.tracking, {
                    label: n.label
                })).then(t) : t()
            },
            _onParentItemClick: function(e, n) {
                n && a.trackEvent(n)
            },
            addMenu: function(e, n) {
                return t.fire("menu:add", {
                    name: e,
                    config: n
                }), a.getMenu(e)
            },
            getMenu: function(e) {
                return t.navigation.menus[e]
            },
            getTrackingMenuConfig: function(e) {
                return u.assign({
                    action: "Navigation Click",
                    property: null
                }, e)
            },
            getTrackingItemConfig: function(e) {
                return u.assign({
                    action: "Menu Click",
                    property: null
                }, e)
            },
            removeMenu: function(e) {
                t.fire("menu:remove", {
                    name: e
                })
            },
            trackEvent: function(e) {
                var n = r.Tracker.createEvent(r.CATEGORY.HEADER_TOOL_BAR, e.action, {
                    label: e.label,
                    property: e.property
                });
                return t.model && n.addContext(r.CONTEXT.NODE, {
                    node_id: t.model.get("NodeID"),
                    node_type: t.model.getTypeName()
                }), n.log()
            }
        }), t.publish({
            "menu:add": {
                emitFacade: !0,
                defaultFn: a._defAddMenuFn
            },
            "menu:remove": {
                emitFacade: !0,
                defaultFn: a._defRemoveMenuFn
            }
        })
    }(), SM.currentModule = null
}, "", {
    requires: ["lodash", "gallery-sm-menu-plugin", "sm-analytics", "sm-page-nav", "sm-menu"]
});
YUI.add("sm-page-nav-account", function(e) {
    SM.currentModule = "sm-page-nav-account";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        "use strict";
        var a = e.SM.Page;
        e.namespace("SM.Page.nav").profile = {
            addProfileOverlay: function(n) {
                var i = this;
                return a.dialogs.profileOverlay ? n : new e.Promise(function(l) {
                    e.use("sm-panel-profileeditor", function() {
                        a.dialogs.profileOverlay = {
                            dialogClass: e.SM.ProfileOverlay,
                            config: {
                                nickName: n
                            }
                        }, i._nickName = n, l(n)
                    })
                })
            },
            showProfileOverlay: function(n) {
                var i = this;
                e.when(this.addProfileOverlay(n)).then(function(e) {
                    e && e !== i._nickName && (a.getDialog("profileOverlay").set("nickName", e), i._nickName = e), a.showDialog("profileOverlay")
                })
            }
        }, a.on("page:init", function(n) {
            var i = SM.env,
                l = i.loggedInUser;
            if (l) {
                var o = i.logoutURL,
                    r = l.homepage,
                    t = e.SM.Page.user,
                    s = t.nickName,
                    u = t.isParticipant,
                    c = [];
                "" == r || u || c.push({
                    label: "Homepage",
                    url: r
                }), t.isAssistantLogin || c.push({
                    label: "Shared With Me",
                    url: "/dashboard"
                }), c.push({
                    label: "Edit Profile",
                    id: "account-manage-profile",
                    onclick: function() {
                        a.nav.profile.showProfileOverlay(s)
                    }
                }), c.push({
                    label: "Account Settings",
                    url: "/settings/?nick=" + s
                }), c.push({
                    label: "Apps",
                    url: n.appsPageUrl
                }), c.push({
                    label: "Log Out",
                    url: o
                }), e.SM.Page.navigation.addMenu("account", {
                    items: c
                })
            }
        })
    }(), SM.currentModule = null
}, "", {
    requires: ["promise", "sm-page-nodepage", "sm-page-menu", "sm-templates-button"]
});
YUI.add("sm-page-nav-cart", function(e) {
    SM.currentModule = "sm-page-nav-cart";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";

        function a(a) {
            var r = n.cartItem,
                t = n.cartHeader;
            a ? (t ? r.setHTML(e.SM.Templates.button({
                size: "small",
                href: e.SM.Cart.URL,
                skin: "accent",
                label: a
            }) + "<h2>Items in Cart</h2>") : (r.setHTML(e.SM.Templates.button({
                icon: "Cart",
                size: "small",
                href: e.SM.Cart.URL,
                badgeNumber: a,
                badgeSkin: "accent"
            })), a > 999 ? r.one(".sm-badge-number").addClass("sm-badge-larger") : a > 99 && r.one(".sm-badge-number").addClass("sm-badge-large")), r.show(), t && t.removeClass("sm-cart-header-hidden")) : (r.hide(), t && t.addClass("sm-cart-header-hidden"))
        }

        function r(r) {
            return e.SM.Cart.getItems(r || {
                refresh: !0
            }).then(function(e) {
                var r, t = 0;
                for (r = e.length - 1; r >= 0; --r) t += e[r].get("Quantity");
                return a(t), t
            })
        }

        function t() {
            s.api.sendRequest({
                apiMethod: "rpc.cart.totalitems",
                freshRequest: !0
            }).then(function(e) {
                var r = e.response && e.response.results,
                    t = r && r.TotalItems || 0;
                return a(t), t
            })
        }
        var n, s = e.SM.Page,
            d = !1;
        n = {
            cartItem: null,
            cartHeader: null,
            initHeader: function() {
                var a, r = e.one(".sm-cart-header"),
                    t = e.one(".sm-page-header-navitem-cart");
                t || (a = r, r = e.Node.create(n.headerTemplate), t = r.one(".sm-page-header-navitem-cart"), a ? a.replace(r) : e.one("body").prepend(r)), n.cartItem = t, n.cartHeader = r, e.SM.Cart.on("contentsChange", n.refresh)
            },
            headerTemplate: '<div class="sm-cart-header sm-cart-header-hidden"><div class="sm-page-header-nav"><div class="sm-page-header-navitem-cart"></div></div></div>',
            refresh: function(e) {
                return d ? t() : r(e)
            }
        }, s.cart || (s.cart = {}), s.cart.navigation = n, s.on("page:init", function() {
            n.initHeader(), e.later(1e3, this, function() {
                n.refresh({
                    refresh: !0,
                    allowFailure: !0
                })["catch"](function() {
                    return d = !0, t()
                })
            })
        }), module.exports = n
    }(), SM.currentModule = null
}, "", {
    requires: ["sm", "sm-api", "sm-templates-button", "sm-cart"]
});
YUI.add("sm-page-nav-customize", function(e) {
    SM.currentModule = "sm-page-nav-customize";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        "use strict";
        var t = e.SM.Page,
            i = t.navigation,
            n = SM.env,
            o = e.SM.Models.UserNode,
            s = {
                1: "Homepage",
                2: "Folder",
                4: "Gallery",
                16: "Page",
                64: "Page"
            };
        t.modes.editSkin = {
            start: function(i) {
                var n = e.SM.Page,
                    s = n.pageDesignId,
                    a = n.entireSiteDesignId,
                    r = n.model.get("Type");
                return t._pageEditorPromise || (t._pageEditorPromise = new e.Promise(function(i) {
                    e.use("sm-customize-controllers", "sm-customize-views", "sm-customize-models", function() {
                        var n = {
                            nickName: t.owner.nickName,
                            userNode: t.model
                        };
                        a && r === o.TYPES.ROOT && (n.siteSkinMode = !0), i(new e.SM.Customize.PageSkinEditor(n))
                    })
                })), t._pageEditorPromise.then(function(e) {
                    return a && r === o.TYPES.ROOT ? e.start(a) : s ? e.start(s) : e.startFromScratch(), i
                })
            }
        }, t.modes.editSiteSkin = {
            start: function(i) {
                var n = t.pageDesignId;
                return t._pageEditorPromise || (t._pageEditorPromise = new e.Promise(function(i) {
                    e.use("sm-customize-controllers", "sm-customize-views", "sm-customize-models", function() {
                        i(new e.SM.Customize.SiteSkinEditor({
                            nickName: t.owner.nickName,
                            userNode: t.model
                        }))
                    })
                })), t._pageEditorPromise.then(function(e) {
                    return e.start(n), i
                })
            }
        }, t.editSkin = function() {
            t.setMode("editSkin", {})
        }, t.editSiteSkin = function() {
            t.setMode("editSiteSkin", {})
        }, t.setAlbumStyle = function(i) {
            var n = t.album;
            n.set("TemplateID", i), n.save({
                data: {
                    AlbumKey: n.get("AlbumKey")
                }
            }, e.bind(function() {
                var e, t, i = window.location.href; - 1 !== i.indexOf("/i-") ? (e = i.lastIndexOf("/"), t = i.substring(0, e)) : t = i, window.location.href = t
            }, this))
        }, t.initCustomizeMenu = function(n) {
            return e.one(".sm-page-header-navitem-customize .sm-button") ? i.addMenu("customize", {
                items: t.getCustomizeMenuItems(n),
                tracking: i.getTrackingMenuConfig({
                    label: "Customize"
                })
            }) : null
        }, t.getCustomizeMenuItems = function(s) {
            var a, r, l = [],
                d = s.defaultGalleryStyle,
                g = [{
                    id: 3,
                    name: "SmugMug",
                    icon: "StyleThumbsImage"
                }, {
                    id: 17,
                    name: "Thumbnails",
                    icon: "StyleThumbs"
                }, {
                    id: 18,
                    name: "Collage Landscape",
                    icon: "StyleCollageLandscape"
                }, {
                    id: 19,
                    name: "Collage Portrait",
                    icon: "StyleCollagePortrait"
                }, {
                    id: 16,
                    name: "Journal",
                    icon: "StyleJournal"
                }, {
                    id: 8,
                    name: "Slideshow",
                    icon: "Slideshow"
                }],
                m = [],
                u = !1;
            for (r = 0; r < g.length; r++) a = g[r], u = a.id == s.galleryStyle ? !0 : s.galleryStyle || a.id != d ? !1 : !0, a.id == d && (a.id = 0, a.name = a.name + " (Default)"), m.push({
                label: a.name,
                icon: a.icon,
                state: {
                    disabled: u
                },
                onclick: function(e) {
                    return function() {
                        t.setAlbumStyle(e)
                    }
                }(a.id),
                tracking: i.getTrackingItemConfig({
                    property: "Customize: Gallery Style"
                })
            });
            return n.loggedInUser.isOwner && l.push({
                id: "nodeSettings",
                label: "Settings",
                onclick: function() {
                    e.use("sm-settings", function(e) {
                        t.dialogs.settings = {
                            dialogClass: e.SM.SettingsOverlay,
                            config: {
                                modal: !0,
                                visible: !1,
                                titleLocation: "outside",
                                render: !0,
                                userNode: t.model
                            }
                        };
                        var i = t.getDialog("settings");
                        i.once("saved", function(e) {
                            this.hide(), location.href = e.userNode.get("Url")
                        }), i.show()
                    })
                },
                tracking: i.getTrackingItemConfig({
                    property: "Customize"
                })
            }, {
                id: "galleryStyle",
                label: "Gallery Style",
                children: m
            }, {
                label: "Theme",
                id: "editSkin",
                state: {
                    disabled: !0
                },
                onclick: function() {
                    var e = t.model.get("Type");
                    e === o.TYPES.ROOT && !t.ownerHasFeature(t.FEATURES.CUSTOMIZATION) && t.ownerHasFeature(t.FEATURES.THEMES) ? t.editSiteSkin() : t.editSkin()
                },
                tracking: i.getTrackingItemConfig({
                    property: "Customize"
                })
            }, {
                label: "Content and Design",
                id: "editPage",
                state: {
                    disabled: !0
                },
                onclick: function() {
                    document.location.href = "/customize" + (t.model.get("UrlPath") || "")
                },
                tracking: i.getTrackingItemConfig({
                    property: "Customize"
                })
            }, {
                label: "Choose a New Site Design",
                id: "chooseDesign",
                url: "/customize/choose",
                state: {
                    disabled: !0
                },
                tracking: i.getTrackingItemConfig({
                    property: "Customize"
                })
            }), l
        }, t.on("page:init", function(e) {
            var a = t.model.get("Type"),
                r = s[a],
                l = t.initCustomizeMenu(e);
            if (t.pageDesignId = e.pageDesignId, t.pageDesignHasLayout = e.pageDesignHasLayout, t.sitePageDesignId = e.sitePageDesignId, t.entireSiteDesignId = e.entireSiteDesignId, t.defaultTemplateId = e.defaultTemplateId, t.pageDesignRevertType = e.pageDesignRevertType, t.sitewideSkinId = e.sitewideSkinId, t.templateSkinId = e.templateSkinId, t.siteDesignId = e.siteDesignId, t.sitePageDesignType = e.sitePageDesignType, t.defaultGalleryStyle = e.defaultGalleryStyle, t.galleryStyle = e.galleryStyle, l) {
                var d = l.getNodeById("editPage"),
                    g = l.getNodeById("editSkin"),
                    m = l.getNodeById("chooseDesign"),
                    u = l.getNodeById("nodeSettings"),
                    c = l.getNodeById("galleryStyle");
                e.allowCustomDesigns && t.owner && n.loggedInUser && n.loggedInUser.isOwner && !n.loggedInUser.isAssistant ? (t.ownerHasFeature(t.FEATURES.CUSTOMIZATION) ? t.siteDesignId && (a !== o.TYPES.SYSTEM_ALBUM_VISIBLE ? d && d.enable() : d && d.remove(), m && m.enable()) : (t.ownerHasFeature(t.FEATURES.BASIC_CUSTOMIZATION) && a === o.TYPES.ROOT ? d && d.enable() : d && d.remove(), m && m.remove()), t.ownerHasFeature(t.FEATURES.THEMES) ? g && g.enable() : g && g.remove()) : (d && d.remove(), g && g.remove(), m && m.remove()), u && (!r || t.model.isRootFolder() || t.model.isSystemFolder() ? u.remove() : u.label = r + " Settings"), g && (r === s[1] ? g.label = "Site-Wide Theme" : r && (g.label = r + " Theme")), 4 !== a && c && c.remove(), l.children.length < 1 && i.removeItem("customize")
            }
        })
    }(), SM.currentModule = null
}, "", {
    requires: ["sm-button", "sm-page-nodepage", "sm-models-usernode", "sm-models-usernodepagedesign", "sm-templates-button", "sm-panel-confirm", "promise"]
});
YUI.add("sm-page-nav-help", function(e) {
    SM.currentModule = "sm-page-nav-help";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        "use strict";
        var t, n, i = e.SM.Page,
            a = SM.env.host.main,
            s = SM["import"]("sm-dom"),
            u = SM["import"]("react"),
            l = SM["import"]("statuspage"),
            o = "sm-status-page-node-id";
        i.help = {
            _currentHelpButton: null,
            _defaultMenuItems: [{
                label: "Help Center",
                onclick: function() {
                    s.win.open("http://" + a + "/services/assistly", "_blank")
                }
            }, {
                state: {
                    disabled: i.user && i.user.isParticipant || (i.user && i.owner && i.user.nickName === i.owner.nickName ? !1 : !0)
                },
                label: "Guided Tours",
                onclick: function() {
                    e.use("sm-guide-list", function(e) {
                        new e.SM.Guide.GuideListPanel
                    })
                }
            }, {
                label: "Getting Started Video",
                onclick: function() {
                    SM.load("sm-component-panel-modal", "sm-introvideopanel").then(function(e) {
                        var t = e["sm-component-panel-modal"],
                            n = e["sm-introvideopanel"],
                            i = t.mount(u.createElement(n, {
                                onClose: function() {
                                    t.unmount(i)
                                }
                            }))
                    })
                }
            }],
            _renderMenu: function(t) {
                t.plug(e.SM.Plugin.Menu, {
                    items: i.help.getHelpItems(n),
                    on: {
                        itemClick: function(e) {
                            e.item.onclick && e.item.onclick(e)
                        }
                    }
                })
            },
            getHelpItems: function(n) {
                var i = this._defaultMenuItems.slice(0);
                return n && (i.push({
                    disabledMessage: "Chat is not currently active",
                    id: "LiveChat",
                    label: "Chat with a Hero",
                    onclick: function() {
                        t.launchChat()
                    },
                    state: {
                        disabled: !0
                    }
                }), e.use("sm-page-live-chat", function() {
                    t = SM["import"]("sm-live-chat"), t.initialize().then(function() {
                        t.enableMenuItem()
                    })
                })), i
            },
            fetchStatusPage: function(e) {
                var t = new l({
                    pageId: "724cl4r0f6zw"
                });
                t.getStatus({
                    success: function(t) {
                        e.insertNode(null, {
                            id: o,
                            data: t,
                            label: '<span class="sm-site-status-dot" data-status="' + t.status.indicator + '"></span><span>' + t.status.description + "</span>",
                            onclick: function() {
                                s.win.open(t.page.url, "_blank")
                            }
                        })
                    }
                })
            },
            getMenu: function() {
                return this._currentHelpButton ? this._currentHelpButton.menu : i.navigation.getMenu("help")
            },
            registerCurrentHelpButton: function(e) {
                this._renderMenu(e), this._currentHelpButton = e, this.fetchStatusPage(this._currentHelpButton.menu)
            }
        }, i.navigation && i.on("page:init", function(e) {
            var t = s.getViewportRect().width <= i.responsiveDesign.mobileMaxWidth,
                a = "iOS" === SM.env.platform || "Android" === SM.env.device;
            n = e.liveChat.load = e.liveChat.load && !(t || a), i.liveChat = e.liveChat;
            var u = i.navigation.addMenu("help", {
                items: i.help.getHelpItems(n)
            });
            u && i.help.fetchStatusPage(u)
        })
    }(), SM.currentModule = null
}, "", {
    requires: ["react", "sm", "sm-dom", "sm-menu", "sm-page-menu", "sm-templates-button", "statuspage"]
});
YUI.add("sm-page-nav-login", function(n) {
    SM.currentModule = "sm-page-nav-login";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        "use strict";
        n.SM.Page.login = function() {
            n.SM.Page.loginPage()
        }, n.SM.Page.loginPage = function() {
            window.location.href = "https://" + SM.env.host.ssl + "/login?goTo=" + encodeURIComponent(window.location.href)
        }
    }(), SM.currentModule = null
}, "", {
    requires: ["sm-login", "sm-page", "sm-panel"]
});
YUI.add("sm-page-nav-organize", function(e) {
    SM.currentModule = "sm-page-nav-organize";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        "use strict";
        var n = e.SM.Page,
            o = n.navigation,
            a = (SM.env, e.SM.Models.UserNode);
        n.on("page:init", function() {
            var r = n.model.get("Type"),
                t = n.model,
                i = r === a.TYPES.ALBUM,
                u = r === a.TYPES.PAGE,
                d = "/organize";
            (r === e.SM.Models.UserNode.TYPES.FOLDER || i || u) && (d += encodeURI(t.get("UrlPath"))), n.admin && n.owner && n.owner.nickName && (d += "?nick=" + n.owner.nickName), e.one(".sm-page-header-navitem-organize .sm-button") && e.one(".sm-page-header-navitem-organize .sm-button").setAttribute("href", d).on("click", function(e) {
                e.preventDefault(), o.trackEvent(o.getTrackingMenuConfig({
                    label: "Organize"
                })).then(function() {
                    document.location.href = d
                })
            })
        })
    }(), SM.currentModule = null
}, "", {
    requires: ["sm-page-nodepage", "sm-models-usernode"]
});
YUI.add("sm-page-nav-sell", function(e) {
    SM.currentModule = "sm-page-nav-sell";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        "use strict";
        var n = e.SM.Page,
            t = n.navigation;
        SM.env;
        n.initializeSellMenu = function() {
            var r = null;
            if (e.one(".sm-page-header-navitem-sell .sm-button")) {
                var l = n.getSellMenuItems();
                l.length ? r = t.addMenu("sell", {
                    items: l,
                    tracking: t.getTrackingMenuConfig({
                        label: "Sell"
                    })
                }) : t.removeItem("sell")
            }
            return r
        }, n.getSellMenuItems = function() {
            var e = [];
            n.model.get("Type");
            return n.ownerHasFeature(n.FEATURES.SALES) && e.push({
                label: "Sales History",
                id: "salesHistoryMenu",
                url: n.getSellMenuItemURL(n.FEATURES.SALES),
                tracking: t.getTrackingItemConfig({
                    property: "Sell"
                })
            }), n.ownerHasFeature(n.FEATURES.PRICING) && (n.model && n.model.isAlbum() && n.ownerHasFeature(n.FEATURES.MULTIPLE_PRICELISTS) ? e.push({
                id: "setPrices",
                label: "Gallery Pricing",
                onclick: n.openGalleryPrices,
                tracking: t.getTrackingItemConfig({
                    property: "Sell"
                })
            }) : e.push({
                label: "Pricelists",
                id: "priceListsMenu",
                url: n.getSellMenuItemURL(n.FEATURES.PRICING),
                tracking: t.getTrackingItemConfig({
                    property: "Sell"
                })
            })), n.ownerHasFeature(n.FEATURES.COUPONS) && e.push({
                label: "Coupons",
                id: "couponsMenu",
                url: n.getSellMenuItemURL(n.FEATURES.COUPONS),
                tracking: t.getTrackingItemConfig({
                    property: "Sell"
                })
            }), n.ownerHasFeature(n.FEATURES.PACKAGES) && e.push({
                label: "Packages",
                id: "packagesMenu",
                url: n.getSellMenuItemURL(n.FEATURES.PACKAGES),
                tracking: t.getTrackingItemConfig({
                    property: "Sell"
                })
            }), n.ownerHasFeature(n.FEATURES.EVENTS) && e.push({
                label: "Events",
                id: "eventsMenu",
                url: n.getSellMenuItemURL(n.FEATURES.EVENTS),
                tracking: t.getTrackingItemConfig({
                    property: "Sell"
                })
            }), (n.ownerHasFeature(n.FEATURES.BACKPRINTING) || n.ownerHasFeature(n.FEATURES.CUSTOM_CART) || n.ownerHasFeature(n.FEATURES.PACKAGING) || n.ownerHasFeature(n.FEATURES.PRINTMARKS) || n.ownerHasFeature(n.FEATURES.WATERMARKS)) && e.push({
                label: "Branding",
                id: "brandingMenu",
                url: n.getSellMenuItemURL(n.FEATURES.CUSTOM_CART),
                tracking: t.getTrackingItemConfig({
                    property: "Sell"
                })
            }), e
        }, n.getSellMenuItemURL = function(e) {
            var t = "",
                r = "NickName",
                l = "";
            switch (e) {
                case n.FEATURES.COUPONS:
                    t = "/sales/coupons";
                    break;
                case n.FEATURES.CUSTOM_CART:
                    t = "/settings", r = "nick", l = "#section=branding";
                    break;
                case n.FEATURES.EVENTS:
                    t = "/homepage/eventmarketing.mg";
                    break;
                case n.FEATURES.PACKAGES:
                    t = "/sales/packages";
                    break;
                case n.FEATURES.PRICING:
                    t = "/sales/pricing";
                    break;
                case n.FEATURES.SALES:
                    t = "/sales/history"
            }
            return "https://" + SM.env.host.ssl + t + "?" + r + "=" + n.owner.nickName + l
        }, n.openGalleryPrices = function() {
            e.use("sm-setprice-panel", function() {
                n.dialogs.setPrices || (n.dialogs.setPrices = {
                    dialogClass: e.SM.SetPricePanel,
                    config: {
                        modal: !0,
                        visible: !1,
                        titleLocation: "outside",
                        render: !0,
                        userNode: n.model
                    }
                }), e.SM.Page.api.sendRequest({
                    method: "rpc.user.pricelists",
                    data: {
                        NickName: n.owner.nickName
                    },
                    freshRequest: !0
                }).then(function(e) {
                    var t = e.response.results.pricelists,
                        r = n.getDialog("setPrices");
                    t.length ? (r.set("priceLists", t), r.once("saved", function(e) {
                        this.hide(), location.href = e.userNode.get("Url")
                    }), r.show()) : r.launchFullPriceList()
                })
            })
        }, n.on("page:init", function(e) {
            n.initializeSellMenu()
        })
    }(), SM.currentModule = null
}, "", {
    requires: []
});
YUI.add("sm-page-nav-upload", function(e) {
    SM.currentModule = "sm-page-nav-upload";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        "use strict";
        var a = e.SM.Page,
            o = a.navigation,
            n = a.user.nickName,
            l = e.SM.Models.UserNode;
        e.namespace("SM.Page.nav").upload = {
            uploadNodeId: 0,
            handleExistingClick: function(o) {
                var n = this;
                e.use(["sm-picker-plugin", "sm-uploader-tracking"], function() {
                    var l = o.originEvent.target,
                        i = SM["import"]("sm-uploader-tracking");
                    l.pickerplugin || l.plug(e.SM.Plugin.Picker, {
                        pickerMode: e.SM.Picker.MODE_ALBUM,
                        pickerConfig: {
                            limit: 1,
                            useLoggedInUser: !0,
                            message: null
                        },
                        triggerMode: !0
                    }), l.pickerplugin.showPicker(), a.uxdisabled = !0, l.pickerplugin.after("hidingPicker", a.nav.upload._onPickerHide, n), i.trackScreenView("Choose A Gallery")
                })
            },
            _onPickerHide: function(o) {
                if (a.uxdisabled = !1, o.selectedData[0]) {
                    var n = o.selectedData[0].hostData,
                        l = o.selectedData[0].typeInfo;
                    n.id && (a.nav.upload.showUploadPanel(l.Name || "", {
                        albumKey: n.key,
                        nodeId: l.NodeID
                    }, function(e) {
                        e && (window.location.href = l.UrlPath)
                    }), e.use(["sm-resource-album", "sm-uploader-tracking"], function() {
                        var e = SM["import"]("sm-resource-core"),
                            a = SM["import"]("sm-uploader-tracking");
                        e.Album.loadByKey(n.key, {
                            expand: ["Node"]
                        }).then(function(e) {
                            a.trackEvent(a.ACTIONS.selectGallery, {
                                contexts: babelHelpers.defineProperty({}, a.CONTEXTS.NODE, {
                                    node_id: e.getExpansion("Node").get("NodeID"),
                                    node_type: "Gallery"
                                }),
                                screenName: "Choose A Gallery"
                            })
                        })
                    }))
                }
            },
            showUploadPanel: function(o, n, l) {
                e.use("sm-uploader", function() {
                    var e = SM["import"]("sm-modal"),
                        i = SM["import"]("sm-uploader"),
                        d = a.nav.upload.modal;
                    d && e.unmount(d), d = i.showAsModal({
                        albumKey: n.albumKey,
                        nodeId: n.nodeId,
                        nodeName: o,
                        onClose: function(e) {
                            "function" == typeof l && l(e), a.nav.upload.modal = null
                        }
                    }), a.nav.upload.modal = d
                })
            },
            createAndShowNewalbumOverlay: function() {
                return new e.Promise(function(o) {
                    e.use(["sm-album-overlay", "sm-uploader-tracking", "sm-resource-core"], function() {
                        var l = SM["import"]("sm-uploader-tracking"),
                            i = SM["import"]("sm-resource-core"),
                            d = e.SM.Page.nav.upload,
                            t = d.uploadNodeDepth,
                            r = d.uploadNodeId;
                        i.loadUri("/api/v2/node/" + r, {
                            expand: ["User.UserContacts"]
                        }).then(function(o) {
                            a.dialogs.newAlbum = {
                                dialogClass: e.SM.AlbumOverlay,
                                config: {
                                    close: !0,
                                    contacts: o.getExpansion("User.UserContacts"),
                                    modal: !0,
                                    nickName: n,
                                    parentNode: o,
                                    uploadNodeDepth: t,
                                    uploadNodeId: r,
                                    visible: !1
                                }
                            }, a.showDialog("newAlbum")
                        }), l.trackScreenView("New Gallery"), o()
                    })
                })
            }
        }, a.on("page:init", function(n) {
            var i = a.model,
                d = i.get("Type");
            if (e.SM.Page.nav.upload.uploadNodeId = n.uploadNodeId, e.SM.Page.nav.upload.uploadNodeDepth = n.uploadNodeDepth, (e.UA.android || e.UA.ios) && e.DOM.winWidth() <= e.SM.Page.responsiveDesign.mobileMaxWidth) {
                var t = e.one(".sm-page-header-navitem-upload[data-nav=upload]"),
                    r = e.one(".sm-page-header-navitem-upload .sm-button");
                (d === l.TYPES.ALBUM || d === l.TYPES.SYSTEM_ALBUM_VISIBLE) && t && r && (t.setAttribute("data-upload-mode", "page"), r.on("click", function() {
                    window.location.href = "/upload/" + i.get("RemoteKey")
                }))
            } else {
                var u = [{
                    label: "To New Gallery",
                    value: "newgallery",
                    onclick: function() {
                        a.nav.upload.createAndShowNewalbumOverlay()
                    },
                    tracking: o.getTrackingItemConfig({
                        property: "Upload"
                    })
                }, {
                    label: "To Existing Gallery",
                    value: "existing",
                    onclick: e.bind(a.nav.upload.handleExistingClick, this),
                    tracking: o.getTrackingItemConfig({
                        property: "Upload"
                    })
                }];
                (d === l.TYPES.ALBUM || d === l.TYPES.SYSTEM_ALBUM_VISIBLE) && (a.album = new e.SM.Models.Album, u.unshift({
                    label: "To This Gallery",
                    value: "thisgallery",
                    onclick: function() {
                        (d === l.TYPES.ALBUM || d === l.TYPES.SYSTEM_ALBUM_VISIBLE) && a.nav.upload.showUploadPanel(a.model.get("Name"), {
                            albumKey: a.model.get("RemoteKey"),
                            nodeId: a.nodeId
                        }, function(e) {
                            e && (window.location.href = window.location.href)
                        })
                    },
                    tracking: o.getTrackingItemConfig({
                        property: "Upload"
                    })
                })), a.navigation.addMenu("upload", {
                    items: u,
                    tracking: o.getTrackingMenuConfig({
                        label: "Upload"
                    })
                })
            }
        })
    }(), SM.currentModule = null
}, "", {
    requires: ["sm-page-nodepage", "sm-templates-button", "sm-page-menu", "sm-models-usernode"]
});
YUI.add("sm-page-nav", function(e) {
    SM.currentModule = "sm-page-nav";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        "use strict";
        var n = e.SM.Page;
        e.SM.Page.navigation = {
            items: {},
            node: e.one("#sm-page-header"),
            addItem: function(e) {
                var a, t = n.navigation.items,
                    r = n.navigation.node;
                return r && !t[e] && (a = r.one("[data-nav=" + e + "]"), t[e] = a), t[e]
            },
            removeItem: function(e) {
                var a = n.navigation,
                    t = a.items,
                    r = t[e];
                return r && r.destroy && r.destroy(), a.node.all("[data-nav=" + e + "]").remove(), r
            }
        }
    }(), SM.currentModule = null
}, "", {
    requires: ["sm-page", "node"]
});
YUI.add("sm-page-nodepage", function(e) {
    SM.currentModule = "sm-page-nodepage";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        "use strict";
        var n = e.SM.Page,
            t = "normal",
            r = n.publish("page:modeChange"),
            o = SM["import"]("sm-dom"),
            i = (SM["import"]("react"), SM["import"]("react-dom")),
            d = SM["import"]("sm-gallery-settings");
        e.mix(n, {
            type: "page",
            widgets: [],
            modes: {
                normal: {}
            },
            model: null,
            getMode: function() {
                return t
            },
            setMode: function(e, t) {
                n.fire("page:modeChange", {
                    prevMode: n.getMode(),
                    newMode: e,
                    config: t
                })
            }
        }), r._firing = new e.Promise(function(e) {
            e()
        }), r.fire = function(r) {
            var o = this;
            o._firing = o._firing.then(function() {
                return new e.Promise(function(t, i) {
                    var d, s, a = e.merge({
                            preventDefault: function() {
                                this.prevented = !0, i(this)
                            }
                        }, r),
                        u = o._subscribers;
                    if (u)
                        for (d = 0, s = u.length; s > d; ++d) u[d].fn.call(u[d].context || n, a);
                    a.prevented || t(a)
                }).then(function(e) {
                    var r, o = n.modes[e.newMode],
                        i = n.modes[e.prevMode];
                    return i && i.end && (r = i.end(e)), o && o.start && (r = r ? r.then(o.start) : o.start(e)), r ? r.then(function(e) {
                        return t = e.newMode, e
                    }) : t = e.newMode, r || e
                }).then(function(e) {
                    var t, r, i = o._afters;
                    if (i)
                        for (t = 0, r = i.length; r > t; ++t) i[t].fn.call(i[t].context || n, e);
                    return e
                })
            }).then(null, function(e) {
                return null
            })
        }, r._fire = function(e) {
            return this.fire(e[0])
        }, n.on("page:init", function(t) {
            n.nodeId = t.nodeId, n.notFound = t.notFound, n.model = new e.SM.Models.UserNode(t.userNode), o.isStandalone && o.delegate(o.doc.body, "click", function(e) {
                var n = e.currentTarget,
                    t = o.doc.location.hostname;
                n.hostname === t && (e.preventDefault(), o.doc.location = n.href)
            }, ".sm-page-widget a");
            var r = o.querySelector(".sm-page-header-navitem-settings");
            r && n.isOwnerOrAdmin() && i.render(new d, r)
        })
    }(), SM.currentModule = null
}, "", {
    requires: ["sm-page", "sm-models-usernode", "promise", "sm-dom", "sm-mobile-app-instructions", "sm-gallery-settings"]
});
YUI.add("sm-page-scroll-to-top", function(t) {
    SM.currentModule = "sm-page-scroll-to-top";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        "use strict";

        function t(t, e, o) {
            e.split(" ").forEach(function(e) {
                t.addEventListener(e, o)
            })
        }

        function e(t) {
            return (t /= .5) < 1 ? -.5 * (Math.sqrt(1 - t * t) - 1) : .5 * (Math.sqrt(1 - (t -= 2) * t) + 1)
        }

        function o(t) {
            var o = g.pageYOffset;
            if (!h && 0 !== o) {
                t.preventDefault();
                var n = 0,
                    r = function a() {
                        n += 1 / 60;
                        var t = n / d,
                            r = 0;
                        1 > t ? (h = g.requestAnimationFrame(a), r = o - o * e(t)) : h = null, g.scrollTo(0, r)
                    };
                r()
            }
        }
        var n = SM["import"]("lodash"),
            r = SM["import"]("sm-component-button"),
            a = SM["import"]("sm-dom"),
            i = SM["import"]("sm-icon"),
            s = SM["import"]("sm-page"),
            c = SM["import"]("react"),
            l = SM["import"]("react-dom"),
            m = 500,
            p = {
                transitionName: "fade",
                transitionAppear: !0,
                transitionAppearTimeout: m,
                transitionEnterTimeout: m,
                transitionLeaveTimeout: m
            },
            u = 250,
            d = 1.5,
            f = a.doc,
            M = f.body,
            g = a.win,
            v = c.addons.CSSTransitionGroup,
            h = void 0;
        s.on("page:init", function() {
            var e = a.getViewportRect().height,
                s = void 0,
                m = function() {
                    var t = void 0;
                    g.pageYOffset >= 2 * e && (s || (s = M.appendChild(f.createElement("div"))), t = c.createElement(r, {
                        className: "sm-page-scroll-to-top",
                        key: "scrollToTop",
                        skin: "submit",
                        size: "small",
                        title: "Back to the top of this page"
                    }, c.createElement("span", {
                        className: "sm-page-scroll-to-top-label"
                    }, "Back To Top"), c.createElement(i, {
                        name: "ArrowNext"
                    }))), s && l.render(c.createElement(v, p, t), s)
                };
            g.addEventListener("resize", n.throttle(function() {
                e = a.getViewportRect().height, m()
            }), 100), a.delegate(M, "click", o, ".sm-page-scroll-to-top"), g.addEventListener("scroll", n.debounce(m, u)), t(g, "wheel touchstart", function() {
                h && (g.cancelAnimationFrame(h), h = null)
            })
        })
    }(), SM.currentModule = null
}, "", {
    requires: ["lodash", "react-dom", "sm-component-button", "sm-dom", "sm-icon", "sm-page"]
});
YUI.add("sm-page-socialmetadata", function(e) {
    SM.currentModule = "sm-page-socialmetadata";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        e.namespace("SM.Page").SocialMetadata = e.Base.create("sm-page-socialmetadata", e.View, [], {
            EscapedNodeTemplate: '<<%= data.name %><% for (var key in data.attributes){ %> <%=key%>="<%=data.attributes[key] %>"<% } %> />',
            UnescapedNodeTemplate: '<<%= data.name %><% for (var key in data.attributes){ %> <%=key%>="<%==data.attributes[key]%>"<% } %> />',
            _mappings: {
                Vault: {
                    OpenGraph: {},
                    Twitter: {},
                    Schema: {}
                },
                Image: {
                    OpenGraph: {
                        "og:url": "URL",
                        "og:title": "Title",
                        "og:image": "Image",
                        "og:description": "Description",
                        "og:type": "article"
                    },
                    Twitter: {
                        "twitter:url": "URL",
                        "twitter:title": "Title",
                        "twitter:description": "Description",
                        "twitter:image:width": "ImageWidth",
                        "twitter:image:height": "ImageHeight",
                        "twitter:image": "Image",
                        "twitter:site": "@SmugMug",
                        "twitter:card": "photo"
                    },
                    Schema: {
                        url: "URL",
                        name: "Title",
                        caption: "Description",
                        description: "Description",
                        image: "Image",
                        width: "ImageWidth",
                        height: "ImageHeight"
                    }
                },
                Video: {
                    OpenGraph: {
                        "og:title": "Title",
                        "og:url": "URL",
                        "og:image": "Image",
                        "og:description": "Description",
                        "og:video": "player",
                        "og:video:type": "Flash",
                        "og:type": "video.other"
                    },
                    Twitter: {
                        "twitter:url": "URL",
                        "twitter:title": "Title",
                        "twitter:description": "Description",
                        "twitter:image": "Image",
                        "twitter:image:width": "ImageWidth",
                        "twitter:image:height": "ImageHeight",
                        "twitter:player": "Player",
                        "twitter:player:width": "VideoWidth",
                        "twitter:player:height": "VideoHeight",
                        "twitter:player:stream": "Stream",
                        "twitter:player:stream:content_type": "video/mp4; codecs='avc1.32E01E, mpa.40.2'",
                        "twitter:site": "@SmugMug",
                        "twitter:card": "player"
                    },
                    Schema: {
                        url: "URL",
                        name: "Title",
                        caption: "Description",
                        description: "Description",
                        image: "Image",
                        thumbnailUrl: "Thumbnail",
                        playerType: "Flash",
                        videoQuality: "HD"
                    }
                }
            },
            _compiledEscapedNodeTemplate: null,
            _compiledUnescapedNodeTemplate: null,
            _i: null,
            _image: null,
            _head: null,
            init: function() {
                this._compiledEscapedNodeTemplate = e.Template.Micro.compile(this.EscapedNodeTemplate), this._compiledUnescapedNodeTemplate = e.Template.Micro.compile(this.UnescapedNodeTemplate), this._head = e.Node.one("head")
            },
            render: function(e) {
                this._image = e, this._parseImageValues(), this._removeSocialNodes(), this._head.append(this._renderTwitter()), this._head.append(this._renderOpenGraph()), this._head.append(this._renderSchema()), this._head.setAttribute("itemscope", "").setAttribute("itemtype", this._getSchemaType())
            },
            _parseImageValues: function() {
                var e = this._image,
                    t = {};
                t.Type = e.get("IsVideo") ? "Video" : "Image", e.get("IsVault") === !0 && (t.Type = "Vault"), t.URL = e.get("GalleryUrl"), t.Title = e.get("Title"), t.Description = e.get("CaptionText"), 0 == t.Title.length && (t.Title = t.Description, t.Description = "See more", 0 == t.Title.length && (t.Title = "A Great " + t.Type)), t.Image = e.getUrlForSize("L"), t.Thumbnail = e.getUrlForSize("T"), "Video" == t.Type && (t.Stream = e.getUrlForSize("640")), this._i = t
            },
            _renderTwitter: function() {
                var e, t, i = "",
                    a = this._i;
                switch (a.Type) {
                    case "Video":
                        if (t = this._image.get("Sizes"), t[320] && t[320].usable && (a.VideoHeight = t[320].height, a.VideoWidth = t[320].width), t[640] && t[640].usable && (a.VideoHeight = t[640].height, a.VideoWidth = t[640].width), !a.VideoHeight) return "";
                        a.Player = this._makeRootUrl() + "/services/embed/" + this._image.get("ImageID") + "_" + this._image.get("ImageKey") + "?width=" + a.VideoWidth + "&height=" + a.VideoHeight, a.Image = this._image.getUrlForSize("M"), a.ImageWidth = t.M.width, a.ImageHeight = t.M.height;
                        break;
                    case "Image":
                        if (t = this._image.get("Sizes"), t.XL) a.Image = this._image.getUrlForSize("XL"), a.ImageWidth = t.XL.width, a.ImageHeight = t.XL.height;
                        else if (t.L) a.Image = this._image.getUrlForSize("L"), a.ImageWidth = t.L.width, a.ImageHeight = t.L.height;
                        else {
                            if (!t.M) return "";
                            a.Image = this._image.getUrlForSize("M"), a.ImageWidth = t.M.width, a.ImageHeight = t.M.height
                        }
                        break;
                    default:
                        return ""
                }
                for (e in this._mappings[a.Type].Twitter) switch (e) {
                    case "twitter:player:stream:content_type":
                        i += this._makeNode("meta", {
                            name: e,
                            content: this._mappings[a.Type].Twitter[e]
                        }, !0);
                        break;
                    case "twitter:site":
                    case "twitter:card":
                        i += this._makeNode("meta", {
                            name: e,
                            content: this._mappings[a.Type].Twitter[e]
                        });
                        break;
                    case "twitter:url":
                    case "twitter:image":
                        i += this._makeNode("meta", {
                            name: e,
                            content: a[this._mappings[a.Type].Twitter[e]]
                        }, !0);
                        break;
                    default:
                        i += this._makeNode("meta", {
                            name: e,
                            content: a[this._mappings[a.Type].Twitter[e]]
                        })
                }
                return i
            },
            _renderOpenGraph: function() {
                var e, t = "",
                    i = this._i;
                for (e in this._mappings[i.Type].OpenGraph) switch (e) {
                    case "og:video:type":
                    case "og:type":
                    case "og:site_name":
                        t += this._makeNode("meta", {
                            property: e,
                            content: this._mappings[i.Type].OpenGraph[e]
                        }, !0);
                        break;
                    case "og:url":
                    case "og:image":
                        t += this._makeNode("meta", {
                            property: e,
                            content: i[this._mappings[i.Type].OpenGraph[e]]
                        }, !0);
                        break;
                    default:
                        t += this._makeNode("meta", {
                            property: e,
                            content: i[this._mappings[i.Type].OpenGraph[e]]
                        })
                }
                return t
            },
            _renderSchema: function() {
                var e, t = "",
                    i = this._i;
                for (e in this._mappings[i.Type].Schema) switch (e) {
                    case "playerType":
                    case "videoQuality":
                        t += this._makeNode("meta", {
                            itemprop: e,
                            content: this._mappings[i.Type].Schema[e]
                        });
                        break;
                    case "url":
                    case "image":
                        t += this._makeNode("meta", {
                            itemprop: e,
                            content: i[this._mappings[i.Type].Schema[e]]
                        }, !0);
                        break;
                    default:
                        t += this._makeNode("meta", {
                            itemprop: e,
                            content: i[this._mappings[i.Type].Schema[e]]
                        })
                }
                return t
            },
            _makeRootUrl: function() {
                return SM.env.pageOwner ? SM.env.host.http + SM.env.pageOwner.nickName + "." + SM.env.host.main : SM.env.host.http + SM.env.host.main
            },
            _getSchemaType: function() {
                switch (this._i.Type) {
                    case "Image":
                        return "http://schema.org/ImageObject";
                    case "Video":
                        return "http://schema.org/VideoObject";
                    default:
                        return "http://schema.org/Thing"
                }
            },
            _removeSocialNodes: function() {
                e.Node.all('meta[property^="og:"]').remove(!0), e.Node.all('meta[name^="twitter:"]').remove(!0), e.Node.all("meta[itemprop][content]").remove(!0), e.Node.all("[itemscope]").removeAttribute("itemscope").removeAttribute("itemtype"), e.Node.all("[itemprop]").removeAttribute("itemprop")
            },
            _makeNode: function(e, t, i) {
                return template = i ? this._compiledUnescapedNodeTemplate : this._compiledEscapedNodeTemplate, template({
                    name: e,
                    attributes: t
                })
            }
        }, {})
    }(), SM.currentModule = null
}, "", {
    requires: ["sm-page", "template"]
});
YUI.add("sm-page-tooltip", function(t) {
    SM.currentModule = "sm-page-tooltip";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";

        function e(o) {
            this._preventHideOnClick = o.preventHideOnClick, this._attachTo = o.attachTo, this._alignment = n[o.alignment] ? o.alignment : "below", this._slideIn = o.slideIn, this.node = t.Node.create('<div class="sm-tooltip sm-tooltip-floating sm-text-mini"><span class="sm-tooltip-content"></span></div>');
            var i = "default";
            o.skin ? i = s[o.skin] ? o.skin : "default" : o.attachTo && (i = e.getSkinForNode(o.attachTo)), this.node.addClass("sm-tooltip-" + i), ("nui" === i || "blue" === i) && this.node.addClass("sm-nui"), o.showArrow && (this._showArrow = !0, this.node.addClass("sm-tooltip-show-arrow")), o.className && this.node.addClass(o.className), this.setContent(o.text), this.node.hide(), this._attachHoverEvents()
        }
        var o = SM["import"]("sm-dom"),
            i = o.doc.body,
            o = SM["import"]("sm-dom"),
            s = {
                blue: !0,
                nui: !0
            },
            n = {
                above: !0,
                below: !0,
                left: !0,
                right: !0,
                auto: !0
            },
            a = 300,
            h = 100;
        e.prototype = {
            _attachHoverEvents: function() {
                this._detachHoverEvents(), this._attachTo && (this._hoverEvents = [this._attachTo.on("hover", this._handleMouseEnter, this, this._attachTo), this._attachTo.on("mouseleave", this._handleMouseLeave, this, this._attachTo), this.node.on("hover", this._handleMouseEnter, this, this._attachTo), this.node.on("mouseleave", this._handleMouseLeave, this, this._attachTo)])
            },
            _detachHoverEvents: function() {
                new t.EventHandle(this._hoverEvents).detach(), this._hoverEvents = null
            },
            _attachHideEvents: function() {
                this._detachHideEvents(), this._preventHideOnClick || (this._hideEvents = [o.addEventListener(i, "keydown", this.hide, this), o.addEventListener(i, "mousedown", this._onBodyMouseDown, this)])
            },
            _detachHideEvents: function() {
                if (this._hideEvents) {
                    for (; this._hideEvents.length;) o.removeEventListener(this._hideEvents.shift());
                    this._hideEvents = null
                }
            },
            destroy: function() {
                this.fire("destroy"), this._detachHoverEvents(), this._detachHideEvents(), this._windowResizeHandle && this._windowResizeHandle.detach(), this.node.remove(!0), this.node = null
            },
            hide: function() {
                this._cancelTooltipShow(), this._detachHideEvents(), this._windowResizeHandle && this._windowResizeHandle.detach(), t.soon(function() {
                    this.node.transition({
                        duration: .25,
                        easing: "ease-out",
                        opacity: 0
                    }, function() {
                        this._onHideTransitionEnd()
                    }.bind(this))
                }.bind(this))
            },
            _onHideTransitionEnd: function() {
                this._attachTo ? (this.node.hide(), this.node.remove()) : this.destroy()
            },
            _onBodyMouseDown: function(t) {
                this.node.contains(t.target) || this.hide()
            },
            setContent: function(t) {
                this.node.one(".sm-tooltip-content").setHTML(t)
            },
            setPosition: function(t, e) {
                this.node.setStyles({
                    left: t + "px",
                    top: e + "px"
                })
            },
            show: function() {
                this.node.inDoc() || this.node.appendTo(i), this._attachHideEvents(), this.node.setStyle("opacity", "0"), this.node.show(), this.node.transition({
                    easing: "ease-out",
                    duration: .25,
                    opacity: 1
                })
            },
            showAt: function(e, o, i) {
                var s = !i && this._slideIn;
                s ? t.Lang.isObject(this._slideIn) ? this.setPosition(this._slideIn.x, this._slideIn.y) : this.node.hasClass("sm-tooltip-align-below") ? this.setPosition(e, o + 25) : this.node.hasClass("sm-tooltip-align-right") ? this.setPosition(e + 25, o) : this.node.hasClass("sm-tooltip-align-above") ? this.setPosition(e, o - 25) : this.node.hasClass("sm-tooltip-align-left") && this.setPosition(e - 25, o) : this.setPosition(e, o), this.show(), s && t.soon(t.bind(function() {
                    this.node.transition({
                        easing: "cubic-bezier(0.645, 0.045, 0.355, 1)",
                        duration: .5,
                        top: o + "px",
                        left: e + "px"
                    })
                }, this))
            },
            _handleMouseEnter: function(e, o) {
                this._cancelTooltipHide(), !this._tooltipShowDelay && this.node._isHidden() && (this._tooltipShowDelay = t.later(a, this, function() {
                    this._attachHideEvents(), this.showAtNode(o), this._tooltipShowDelay = null
                }))
            },
            _handleMouseLeave: function() {
                this._tooltipHideDelay || (this._tooltipHideDelay = t.later(h, this, function() {
                    this.hide(), this._tooltipHideDelay = null
                }))
            },
            _cancelTooltipShow: function() {
                this._tooltipShowDelay && (this._tooltipShowDelay.cancel(), this._tooltipShowDelay = null)
            },
            _cancelTooltipHide: function() {
                this._tooltipHideDelay && (this._tooltipHideDelay.cancel(), this._tooltipHideDelay = null)
            },
            showAtNode: function(e) {
                e = t.one(e);
                var s = e.getXY(),
                    n = !1;
                this.node.removeClass("sm-tooltip-align-left").removeClass("sm-tooltip-align-right").removeClass("sm-tooltip-align-above").removeClass("sm-tooltip-align-below"), this.node.inDoc() || (this.setPosition(-1e3, -1e3), this.node.appendTo(i), this.node.setStyle("opacity", "0"), this.node.show(), n = !0), t.later(1, this, function() {
                    var i, a = !0,
                        h = this._alignment,
                        l = 0;
                    this.node.all(".sm-tooltip-arrow").remove();
                    do {
                        switch (i = t.clone(s), a = !0, this.node.removeClass("sm-tooltip-align-left").removeClass("sm-tooltip-align-right").removeClass("sm-tooltip-align-above").removeClass("sm-tooltip-align-below"), h) {
                            case "right":
                                this.node.addClass("sm-tooltip-align-right"), i[0] += e.get("offsetWidth") + (this._showArrow ? 10 : 0), i[1] += e.get("offsetHeight") / 2 - this.node.get("offsetHeight") / 2;
                                break;
                            case "below":
                                this.node.addClass("sm-tooltip-align-below"), i[0] += e.get("offsetWidth") / 2 - this.node.get("offsetWidth") / 2, i[1] += e.get("offsetHeight") + (this._showArrow ? 10 : 0);
                                break;
                            case "left":
                                this.node.addClass("sm-tooltip-align-left"), i[0] -= this.node.get("offsetWidth") + (this._showArrow ? 10 : 0), i[1] += e.get("offsetHeight") / 2 - this.node.get("offsetHeight") / 2;
                                break;
                            case "above":
                                this.node.addClass("sm-tooltip-align-above"), i[0] += e.get("offsetWidth") / 2 - this.node.get("offsetWidth") / 2, i[1] -= this.node.get("offsetHeight") + (this._showArrow ? 10 : 0)
                        }
                        "left" == h && i[0] < 0 && (a = !1, h = "right"), i[0] < 0 ? i[0] = 0 : i[0] + this.node.get("offsetWidth") > t.DOM.viewportRegion().right && (i[0] = i[0] - (i[0] + this.node.get("offsetWidth") - t.DOM.viewportRegion().right)), i[1] + this.node.get("offsetHeight") > t.DOM.viewportRegion().bottom ? (a = !1, h = "above") : i[1] < t.DOM.viewportRegion().top && (a = !1, h = "below"), l++
                    } while (!a && 4 >= l);
                    var d, r = e.getDOMNode().getClientRects()[0],
                        c = this.node.getDOMNode().getClientRects()[0],
                        u = "";
                    switch (h) {
                        case "right":
                        case "left":
                            r && (d = 2 * (0 - (i[1] + c.height / 2 - (r.top + o.win.scrollY + r.height / 2))), u = ' style="top: ' + d + 'px;"'), this.node.append('<span class="sm-tooltip-arrow sm-fonticon sm-fonticon-ArrowTriangleLeft"' + u + "></span>");
                            break;
                        case "below":
                        case "above":
                            r && (d = 2 * (0 - (i[0] + c.width / 2 - (r.left + o.win.scrollX + r.width / 2))), u = ' style="left: ' + d + 'px;"'), this.node.append('<span class="sm-tooltip-arrow sm-fonticon sm-fonticon-ArrowTriangleUp"' + u + "></span>")
                    }
                    this.showAt(i[0], i[1], !n)
                }), this._windowResizeHandle = t.one("window").once("resize", function() {
                    this.showAtNode(e)
                }, this)
            },
            getControlHandle: function() {
                var t = this;
                return {
                    destroy: function() {
                        t.node && t.destroy()
                    },
                    hide: function() {
                        t.node && t.hide()
                    },
                    getCurrentPosition: function() {
                        var e = t.node.get("region");
                        return {
                            x: e.left,
                            y: e.top,
                            height: e.height,
                            width: e.width
                        }
                    }
                }
            }
        }, t.augment(e, t.EventTarget), e.getSkinForNode = function(t) {
            var e = t.ancestor(function(t) {
                return t.hasClass("sm-nui") || t.hasClass("sm-user-ui")
            });
            return e && e.hasClass("sm-nui") ? "nui" : "default"
        };
        var l, d;
        t.namespace("SM.Page").Tooltip = {
            showAtXY: function(t, o, i, s) {
                s = s || {};
                var n = new e(s);
                return n.setContent(t), n.showAt(o, i), s.destroyCallback && n.on("destroy", s.destroyCallback), n.getControlHandle()
            },
            showAtNode: function(t, o, i) {
                i = i || {}, i.skin || (i.skin = e.getSkinForNode(o));
                var s = new e(i);
                return s.setContent(t), s.showAtNode(o), i.destroyCallback && s.on("destroy", i.destroyCallback), s.getControlHandle()
            },
            attachToNode: function(t, o, i) {
                i = i || {}, i.attachTo = o;
                var s = new e(i);
                return s.setContent(t), i.destroyCallback && s.on("destroy", i.destroyCallback), s.getControlHandle()
            }
        }, o.delegate(i, "mouseover", function(e) {
            var i = e.currentTarget;
            if (l) {
                if (d === i) return;
                l.hide(), l = null, d = null
            }
            var s = t.Escape.html(i.getAttribute("data-tooltip"));
            if (s) var n, h = t.later(a, null, function() {
                    n = t.SM.Page.Tooltip.showAtNode(s, t.one(i), {
                        alignment: i.getAttribute("data-tooltip-alignment"),
                        preventHideOnClick: !0
                    }), l = n, d = i
                }),
                r = o.addEventListener(i, "mouseleave", function(t) {
                    h.cancel(), o.removeEventListener(r), n && (n.hide(), n === l && (l = null, d = null))
                })
        }, "[data-tooltip]"), module.exports = t.SM.Page.Tooltip
    }(), SM.currentModule = null
}, "", {
    requires: ["escape", "sm", "sm-dom", "sm-page", "node", "transition"]
});
YUI.add("sm-page-tracking", function(a) {
    SM.currentModule = "sm-page-tracking";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        "use strict";
        var r = SM.Tracker,
            t = SM["import"]("sm-analytics");
        a.SM.Page.on("page:init", function(a) {
            if (t.Tracker.init(a.dataLayer), a.tracking && r) {
                var e = a.trackingOptions;
                r.init(!1, e || {
                    ga: {
                        trackExternalClicks: !1,
                        customVariables: {}
                    }
                })
            }
        })
    }(), SM.currentModule = null
}, "", {
    requires: ["sm", "sm-analytics", "sm-page"]
});
YUI.add("sm-page", function(e) {
    SM.currentModule = "sm-page";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        var n, r = SM["import"]("sm-dom"),
            t = "data-page-noscroll",
            i = SM.env;
        e.SM.Page = module.exports = n = e.mix(new e.EventTarget, {
            init: function(r) {
                e.SM.CSRF && r.csrfToken && e.SM.CSRF.setToken(r.csrfToken), this.nextSandbox = r.nextSandbox, r.features && (this.FEATURES = r.features), n.publish("page:init", {
                    fireOnce: !0
                }).fire(r)
            },
            api: new e.SM.API,
            user: i.loggedInUser,
            owner: i.pageOwner,
            readOnly: i.readOnly,
            isOwnerLoggedIn: function(e) {
                e = e || (e = {
                    includeAssistants: !0
                });
                var r = n.owner,
                    t = n.user,
                    i = r && t && r.nickName === t.nickName;
                return e.includeAssistants ? i : i && !t.isAssistant
            },
            isOwnerOrAdmin: function(e) {
                e = e || (e = {
                    includeAssistants: !0
                });
                var r = n.user;
                return n.isOwnerLoggedIn(e) || r && r.isAdmin
            },
            canEdit: function() {
                return !n.readOnly && n.isOwnerLoggedIn()
            },
            dialogs: {},
            getDialog: function(r, t) {
                var i = n.dialogs[r];
                if (i.dialogClass) try {
                    i = new i.dialogClass(i.config), t || (n.dialogs[r] = i), i.render()
                } catch (s) {
                    return e.error("Couldn't instantiate " + r + " dialog", s), null
                }
                return i
            },
            showDialog: function(e) {
                var r = n.getDialog(e);
                return r && r.show(), n
            },
            hideDialog: function(e) {
                var r = n.getDialog(e);
                return r && r.hide(), n
            },
            destroyDialog: function(e) {
                var r = n.getDialog(e);
                return r && (r.destroy(), r = null, delete n.dialogs[e]), n
            },
            disablePageScroll: function(e) {
                r.doc.body.setAttribute(t, !0), !this.pageScrollListener && e && (this.pageScrollListener = r.addEventListener(r.doc.body, "touchmove", function(e) {
                    e.preventDefault()
                }))
            },
            enablePageScroll: function() {
                r.doc.body.removeAttribute(t), this.pageScrollListener && (r.removeEventListener(this.pageScrollListener), this.pageScrollListener = null)
            },
            ownerHasFeature: function(e) {
                var n = i.pageOwner;
                return n && n.features && n.features[e] ? !0 : !1
            },
            userHasFeature: function(e) {
                var n = i.loggedInUser;
                return n && n.features && n.features[e] ? !0 : !1
            },
            renderWidgets: !0,
            FEATURES: {}
        }, !0)
    }(), SM.currentModule = null
}, "", {
    requires: ["event-custom", "sm-api", "sm-cart", "sm-dom"]
});
YUI.add("sm-pagewidget-adsense-view", function(e) {
    SM.currentModule = "sm-pagewidget-adsense-view";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        var a = 3,
            d = e.Template.Micro,
            i = {
                maxCountEditError: d.compile("Three <%= data.adType %> units are already applied to this page. This ad will not appear on your published site."),
                notEnoughInfoWarning: "Must specifiy both an ad slot and publisher id."
            },
            t = d.compile('<div class="sm-page-widget-adsense-container sm-page-widget-adsense-align-<%= data.adAlignment %><% if (data.responsive) { %> sm-page-widget-adsense-responsive<% } %>"><ins class="adsbygoogle sm-page-widget-adsense-<%= data.adName %>" style="display:inline-block;<% if (!data.responsive && (data.adWidth && data.adHeight)) { %>width:<%= data.adWidth %>px;height:<%= data.adHeight %>px;<% } %>" data-ad-client="ca-pub-<%= data.publisherId %>" data-ad-slot="<%= data.adSlot %>"></ins></div>'),
            n = d.compile('<div style="text-align:<%= data.adAlignment %>"><div class="sm-page-widget-adsense-placeholder" style="width:<%= data.adWidth %>px;height:<%= data.adHeight %>px"><div class="centered"><span class="sm-muted sm-fonticon <% if (data.is404Page) { %>sm-fonticon-Warning<% } else { %>sm-fonticon-InfoEncircled<% } %>"></span><div class="sm-muted sm-text-mini"><% if (data.is404Page) { %>Per AdSense policy, you may not place ads on error pages. This ad unit will not appear on your published 404 page.<% } else { %>Your ad unit will appear here when viewing the published page.<% } %></div></div></div></div>'),
            s = !1,
            o = !1,
            r = {
                standard: {},
                link: {}
            },
            g = function(e) {
                g.superclass.constructor.call(this, e);
                var a = this.config.widget.data.widgetId;
                "string" == typeof a || 0 === a ? this._widgetId = "temp" : this._widgetId = a
            };
        e.namespace("SM.PageWidget").AdSense = e.extend(g, e.SM.PageWidget.BaseView, {
            destroy: function() {
                g.superclass.destroy.call(this), delete r[this.config.widget.data.adType][this._widgetId]
            },
            render: function() {
                var a = this;
                return new e.Promise(function(d, i) {
                    a._renderAdContainer(), this.editMode || e.SM.Page.notFound || s || o ? d() : (o = !0, e.Get.js("http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js", {
                        async: !0,
                        onSuccess: function() {
                            o = !1, s = !0, d()
                        },
                        onFailure: function() {
                            o = !1, i()
                        }
                    }))
                })
            },
            _renderAdContainer: function() {
                var d, s = this.config.widget.data,
                    o = s.adType,
                    g = !!e.SM.Page.notFound;
                if (r[o][this._widgetId] = !0, d = e.Object.size(r[o]), this.editMode) s.publisherId && s.adSlot ? d > a ? this.renderEmpty("Warning", i.maxCountEditError({
                    adType: "standard" === o ? "ad" : "link"
                })) : this.container.setHTML(n({
                    adAlignment: s.adAlign,
                    adHeight: s.adHeight,
                    adWidth: s.adWidth,
                    is404Page: g
                })) : this.renderEmpty("Warning", i.notEnoughInfoWarning);
                else if (!g && a >= d && s.publisherId && s.adSlot) {
                    this.container.setHTML(t({
                        adAlignment: s.adAlign || "center",
                        adHeight: s.adHeight,
                        adName: s.adName,
                        adSlot: s.adSlot,
                        adWidth: s.adWidth,
                        publisherId: s.publisherId,
                        responsive: s.responsiveAd
                    }));
                    try {
                        (adsbygoogle = window.adsbygoogle || []).push({})
                    } catch (l) {}
                }
            }
        })
    }(), SM.currentModule = null
}, "", {
    requires: ["get", "promise", "template-micro", "sm-pagewidget-base-view", "sm-page-nodepage"]
});
YUI.add("sm-pagewidget-base-view", function(e) {
    SM.currentModule = "sm-pagewidget-base-view";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        var t = SM["import"]("lodash"),
            i = SM["import"]("sm-dom"),
            n = SM["import"]("sm-image-preloader"),
            s = SM["import"]("react-dom"),
            o = null,
            r = null,
            a = "sm-page-widget-hidden",
            d = function(e) {
                this.init(e)
            };
        t.assign(d.prototype, {
            emptyTemplate: e.Template.Micro.compile('<div class="sm-page-widget-empty"><span class="sm-muted sm-fonticon sm-fonticon-<%= data.icon %>"></span><div class="sm-muted sm-text-mini"><%= data.message %></div></div>'),
            init: function(t) {
                this.moduleName = "", this.config = {}, this.resize = !1, this.forceResize = !1, this.editMode = !1, this.container = null, this.widgetNode = null, this.columnNode = null, e.Object.each(t, function(t, i) {
                    "undefined" != typeof this[i] && ("container" === i || "columnNode" === i || "widgetNode" === i ? this[i] = e.Node.one(t) : this[i] = t)
                }, this), this._eventHandlers = [], this._views = [], this._bindEvents()
            },
            _bindEvents: function() {
                if (this.resize && "function" == typeof this._checkResize) {
                    if (this.forceResize || e.UA.ios || e.UA.android || this._checkLayoutStretchy()) {
                        var n = i.getViewportRect();
                        this._winWidth = n.width, this._winHeight = n.height, this._resizeHandler = i.addEventListener(i.win, "resize", t.debounce(this._onWindowResize.bind(this), 150))
                    }
                    this._eventHandlers.push(e.after("layout:widthchange", this._checkResize, this))
                }
            },
            _precacheImages: function(t) {
                var i = [],
                    s = t.resources;
                s.page && (s = s.resources), s.model && (s = s.toArray()), s.forEach(function(n) {
                    if (!n.isSmugMugResource || -1 !== n.endpointType.indexOf("Image")) {
                        var s = e.SM.Views.Tile.getImageSize(n, t.layoutOptions.imageSize, t.layoutOptions.containerWidth, {
                            imageCrop: t.layoutOptions.imageCrop,
                            maxWidth: t.layoutOptions.containerWidth
                        });
                        i.push(e.SM.Models.Image.getUrl(n, s))
                    }
                }), n.prefetch(i)
            },
            render: function() {
                return this
            },
            destroy: function() {
                new e.EventHandle(this._eventHandlers).detach(), this._resizeHandler && i.removeEventListener(this._resizeHandler), this._resizeTimer = null, this._resizeHandler = null, s.unmountComponentAtNode(this.container.getDOMNode()), e.Array.each(this._views, function(e) {
                    e && e.destroy()
                })
            },
            _checkLayoutStretchy: function() {
                return o || (o = e.one(".sm-page-layout")), null === r && (r = !o.hasClass("sm-page-layout-fixed")), r
            },
            _onWindowResize: function() {
                var e = i.getViewportRect(),
                    t = e.width,
                    n = e.height;
                (t !== this._winWidth || n !== this._winHeight) && this._checkResize(), this._winWidth = t, this._winHeight = n
            },
            getContainerWidth: function() {
                var e = document.body.style,
                    t = e.overflowY;
                e.overflowY = "scroll";
                var i = this.container.get("offsetWidth");
                return e.overflowY = t, i
            },
            getParentNode: function() {
                var t = this.config;
                return !this.widgetNode && t && t.widget && (this.widgetNode = e.one("#" + t.widget.parentId)), this.widgetNode
            },
            showParentNode: function() {
                this.getParentNode().removeClass(a)
            },
            hideColumnNode: function() {
                var e = this.getParentNode().ancestor(".sm-page-layout-column");
                e && e.hide()
            },
            renderEmpty: function(e, t) {
                this.container.setHTML(this.emptyTemplate({
                    icon: e || "SlashEncircled",
                    message: t || "Empty"
                }))
            }
        }), e.namespace("SM.PageWidget").BaseView = module.exports = d
    }(), SM.currentModule = null
}, "", {
    requires: ["base", "event-resize", "lodash", "node", "react-dom", "sm", "sm-dom", "view", "template-micro", "sm-tile-view", "sm-image-preloader"]
});
YUI.add("sm-pagewidget-breadcrumb-view", function(e) {
    SM.currentModule = "sm-pagewidget-breadcrumb-view";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        ! function() {
            var t = SM["import"]("react"),
                r = SM["import"]("react-dom"),
                n = SM["import"]("sm-component-collapsible-breadcrumbs"),
                o = SM["import"]("sm-component-breadcrumbs"),
                a = o.Breadcrumbs,
                c = o.Breadcrumb,
                s = function(e) {
                    function o() {
                        return babelHelpers.classCallCheck(this, o), babelHelpers.possibleConstructorReturn(this, (o.__proto__ || Object.getPrototypeOf(o)).apply(this, arguments))
                    }
                    return babelHelpers.inherits(o, e), babelHelpers.createClass(o, [{
                        key: "destroy",
                        value: function() {
                            babelHelpers.get(o.prototype.__proto__ || Object.getPrototypeOf(o.prototype), "destroy", this).call(this), r.unmountComponentAtNode(this._containerDOMNode)
                        }
                    }, {
                        key: "init",
                        value: function(e) {
                            babelHelpers.get(o.prototype.__proto__ || Object.getPrototypeOf(o.prototype), "init", this).call(this, e), this._containerDOMNode = this.container.getDOMNode()
                        }
                    }, {
                        key: "render",
                        value: function() {
                            var e = this,
                                o = this.config.widget.data,
                                c = this._createBreadcrumbs();
                            return new Promise(function(s) {
                                o.showFullBreadcrumb ? r.render(t.createElement(a, null, c), e._containerDOMNode, s) : r.render(t.createElement(n, null, c), e._containerDOMNode, s)
                            })
                        }
                    }, {
                        key: "_createBreadcrumbs",
                        value: function() {
                            var e = this.config.widget.data,
                                r = e.breadcrumbs,
                                n = e.emphasizeCurrentPage,
                                o = e.showCurrentPage,
                                a = r.length,
                                s = [];
                            return Object.is(o, null) && (o = !0), r.forEach(function(e, r) {
                                var i = r === a - 1,
                                    u = i && n && o ? t.createElement("h1", null, e.name) : e.name,
                                    l = t.createElement(c, {
                                        key: r,
                                        url: e.url
                                    }, u);
                                0 === r ? s.push(t.cloneElement(l, {
                                    icon: "Home"
                                }, "")) : s.push(l)
                            }), s
                        }
                    }]), o
                }(SM["import"]("sm-pagewidget-base-view"));
            e.namespace("SM.PageWidget").Breadcrumb = module.exports = exports = s
        }()
    }(), SM.currentModule = null
}, "", {
    requires: ["react", "react-dom", "sm", "sm-pagewidget-base-view", "sm-component-pure-render", "sm-component-collapsible-breadcrumbs"]
});
YUI.add("sm-pagewidget-comments-view", function(e) {
    SM.currentModule = "sm-pagewidget-comments-view";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        ! function() {
            var t = SM["import"]("react"),
                r = SM["import"]("react-dom"),
                o = SM["import"]("sm-resource-core"),
                s = SM["import"]("sm-comments"),
                n = function(e) {
                    function n() {
                        return babelHelpers.classCallCheck(this, n), babelHelpers.possibleConstructorReturn(this, (n.__proto__ || Object.getPrototypeOf(n)).apply(this, arguments))
                    }
                    return babelHelpers.inherits(n, e), babelHelpers.createClass(n, [{
                        key: "init",
                        value: function(e) {
                            babelHelpers.get(n.prototype.__proto__ || Object.getPrototypeOf(n.prototype), "init", this).call(this, e);
                            var t = e.config.widget.data;
                            this._nodePromise = o.loadUri("/api/v2/node/" + encodeURI(t.nodeId))
                        }
                    }, {
                        key: "render",
                        value: function() {
                            var e = this;
                            return this._nodePromise.then(function(o) {
                                r.render(t.createElement(s, {
                                    resource: o
                                }), e.container.getDOMNode())
                            })
                        }
                    }]), n
                }(SM["import"]("sm-pagewidget-base-view"));
            e.namespace("SM.PageWidget").Comments = module.exports = exports = n
        }()
    }(), SM.currentModule = null
}, "", {
    requires: ["react", "react-dom", "sm", "sm-comments", "sm-pagewidget-base-view", "sm-resource"]
});
YUI.add("sm-pagewidget-featuredevents-view", function(e) {
    SM.currentModule = "sm-pagewidget-featuredevents-view";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        ! function() {
            function i(e) {
                e.resize = !0, i.superclass.constructor.call(this, e)
            }
            var t = e.SM.PageWidget;
            e.namespace("SM.PageWidget").FeaturedEvents = e.extend(i, t.Nodes, {
                _getTilesConfig: function(i) {
                    var t = this.getContainerWidth(),
                        n = e.SM.Views.Tiles.PAGINATION_TYPES,
                        s = i.paginationType || n.INFINITE;
                    return (!s || this.editMode && s === n.INFINITE) && (s = n.NONE), {
                        dataMap: {
                            Title: "Name"
                        },
                        layout: i.tileLayout,
                        pagination: s,
                        spacing: i.tileSpacing,
                        parentNode: this.container,
                        layoutOptions: {
                            containerWidth: t,
                            imageCrop: i.imageCrop,
                            imageSize: i.imageSize,
                            showInfo: i.tileInfo,
                            infoHover: i.tileInfoHover,
                            spacing: i.tileSpacing,
                            varyHeight: i.varyHeight,
                            showType: i.tileIcon
                        },
                        paginationOptions: e.merge({
                            pageSize: this._getPageSize(i, t, i.imageSize)
                        }, this.paginationOptions)
                    }
                },
                _renderTiles: function(i) {
                    i.resources.size && i.resources.size() || i.resources.totalResources ? (this._tiles = new e.SM.Views.Tiles(i), this._tiles.render(), this.showParentNode()) : this.editMode ? (this.renderEmpty(this._emptyIcon, this._emptyMessage), this.showParentNode()) : this.hideColumnNode(), SM.env.loggedInUser && SM.env.loggedInUser.isAdmin && (e.publish("widget-loaded", {
                        broadcast: 2
                    }), e.fire("widget-loaded", {
                        name: "nodes"
                    }))
                },
                render: function() {
                    var i = this,
                        t = i.config,
                        n = t.widget.data,
                        s = i._getTilesConfig(n),
                        o = s.resources = new e.SM.Events.Models.EventList;
                    return s.dataMap.Url = "URL", new e.Promise(function(e) {
                        o.load({
                            apiCategory: "featured",
                            data: {
                                NickName: t.user.nickName,
                                SortBy: n.sortBy,
                                SortDirection: n.sortDirection
                            }
                        }, function(t) {
                            t || (i._renderTiles(s), e())
                        })
                    })
                }
            })
        }()
    }(), SM.currentModule = null
}, "", {
    requires: ["promise", "sm-events-models", "sm-image-model", "sm-pagewidget-base-view", "sm-pagewidget-nodes-view", "sm-tiles-view"]
});
YUI.add("sm-pagewidget-feed-view", function(e) {
    SM.currentModule = "sm-pagewidget-feed-view";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        ! function() {
            var t = SM["import"]("react"),
                r = SM["import"]("react-dom"),
                s = function(e) {
                    function s() {
                        return babelHelpers.classCallCheck(this, s), babelHelpers.possibleConstructorReturn(this, (s.__proto__ || Object.getPrototypeOf(s)).apply(this, arguments))
                    }
                    return babelHelpers.inherits(s, e), babelHelpers.createClass(s, [{
                        key: "destroy",
                        value: function() {
                            babelHelpers.get(s.prototype.__proto__ || Object.getPrototypeOf(s.prototype), "destroy", this).call(this), r.unmountComponentAtNode(this._containerDOMNode)
                        }
                    }, {
                        key: "init",
                        value: function(e) {
                            babelHelpers.get(s.prototype.__proto__ || Object.getPrototypeOf(s.prototype), "init", this).call(this, e), this._containerDOMNode = this.container.getDOMNode()
                        }
                    }, {
                        key: "render",
                        value: function() {
                            var e = this;
                            return new Promise(function(s) {
                                r.render(t.createElement(exports._feedController, {
                                    config: e.config,
                                    onRenderEmpty: e.renderEmpty.bind(e),
                                    viewResolve: s
                                }), e._containerDOMNode)
                            })
                        }
                    }]), s
                }(SM["import"]("sm-pagewidget-base-view"));
            e.namespace("SM.PageWidget").Feed = module.exports = exports = s
        }(), ! function() {
            var e = SM["import"]("react"),
                t = SM["import"]("sm-page"),
                r = function(r) {
                    function s(e) {
                        babelHelpers.classCallCheck(this, s);
                        var t = babelHelpers.possibleConstructorReturn(this, (s.__proto__ || Object.getPrototypeOf(s)).call(this, e));
                        return t.state = {
                            feedItems: []
                        }, t
                    }
                    return babelHelpers.inherits(s, r), babelHelpers.createClass(s, [{
                        key: "componentDidMount",
                        value: function() {
                            this._loadFeed()
                        }
                    }, {
                        key: "_loadFeed",
                        value: function() {
                            var e = this,
                                r = (e.props.config, this.props.config.widget.data),
                                s = r.numberOfPosts,
                                o = r.shortDate,
                                i = r.url;
                            t.api.sendRequest({
                                method: "rpc.feedwidget.getfeed",
                                data: {
                                    url: i,
                                    numberOfPosts: s,
                                    shortDate: o
                                },
                                callback: {
                                    success: e._handleSuccess,
                                    failure: e._handleFailure,
                                    context: e
                                }
                            })
                        }
                    }, {
                        key: "_handleSuccess",
                        value: function(e) {
                            var t = this.props,
                                r = e.response.results.feeditems;
                            return r.length ? void this.setState({
                                feedItems: r
                            }, t.viewResolve) : void this._handleFailure()
                        }
                    }, {
                        key: "_handleFailure",
                        value: function() {
                            var e = this.props;
                            e.onRenderEmpty("RSS", "No Feed Items"), e.viewResolve()
                        }
                    }, {
                        key: "render",
                        value: function() {
                            var t = this.props,
                                r = t.config.widget.data,
                                s = this.state.feedItems,
                                o = s.map(function(t, s) {
                                    return e.createElement(exports._feedItem, {
                                        showDate: t.pubDate && r.showDate,
                                        showTitle: t.title && r.showTitle,
                                        showDescription: t.description && r.showDescription,
                                        item: t,
                                        key: s
                                    })
                                });
                            return e.createElement("ul", {
                                className: "sm-feed",
                                style: "fixed" === r.widthType && r.width ? {
                                    width: r.width
                                } : null
                            }, o)
                        }
                    }]), s
                }(SM["import"]("sm-component-pure-render")),
                s = e.PropTypes;
            r.propTypes = {
                config: s.object.isRequired,
                onRenderEmpty: s.func.isRequired,
                viewResolve: s.func.isRequired
            }, exports._feedController = r
        }();
        var t = SM["import"]("react"),
            r = function(e) {
                function r() {
                    return babelHelpers.classCallCheck(this, r), babelHelpers.possibleConstructorReturn(this, (r.__proto__ || Object.getPrototypeOf(r)).apply(this, arguments))
                }
                return babelHelpers.inherits(r, e), babelHelpers.createClass(r, [{
                    key: "render",
                    value: function() {
                        var e = this.props,
                            r = e.item;
                        return t.createElement("li", {
                            className: "sm-feed-item"
                        }, e.showDate && t.createElement("p", {
                            className: "sm-text-mini sm-muted sm-feed-item-date"
                        }, r.pubDate), e.showTitle && t.createElement("a", {
                            href: r.link,
                            className: "sm-h1 sm-feed-item-title"
                        }, r.title), e.showDescription && t.createElement("div", {
                            className: "sm-feed-item-description",
                            dangerouslySetInnerHTML: {
                                __html: r.description
                            }
                        }))
                    }
                }]), r
            }(SM["import"]("sm-component-pure-render")),
            s = t.PropTypes;
        r.propTypes = {
            showDate: s.bool,
            showTitle: s.bool,
            showDescription: s.bool,
            item: s.object
        }, exports._feedItem = r
    }(), SM.currentModule = null
}, "", {
    requires: ["react", "react-dom", "sm", "promise", "sm-api-base", "sm-page", "sm-pagewidget-base-view", "sm-component-pure-render"]
});
YUI.add("sm-pagewidget-folders-view", function(e) {
    SM.currentModule = "sm-pagewidget-folders-view";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        ! function() {
            function o(e) {
                o.superclass.constructor.call(this, e)
            }
            var d = e.SM.PageWidget;
            e.namespace("SM.PageWidget").Folders = e.extend(o, d.Nodes, {
                paginationOptions: e.merge(d.Nodes.prototype.paginationOptions, {
                    label: "folder",
                    labelPlural: "folders"
                }),
                _emptyIcon: "Folder",
                _emptyMessage: "No Folders Found",
                _emptySelected: "No Folders Selected",
                _nodeType: "Folder"
            })
        }()
    }(), SM.currentModule = null
}, "", {
    requires: ["sm-pagewidget-base-view", "sm-album-model", "sm-image-model", "sm-models-usernode", "sm-pagewidget-nodes-view", "sm-tiles-view"]
});
YUI.add("sm-pagewidget-galleries-view", function(e) {
    SM.currentModule = "sm-pagewidget-galleries-view";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        ! function() {
            function i() {
                i.superclass.constructor.apply(this, arguments)
            }
            var t = SM["import"]("sm-resource-core"),
                a = e.SM.PageWidget;
            a.Galleries = e.extend(i, a.Nodes, {
                paginationOptions: e.merge(a.Nodes.prototype.paginationOptions, {
                    label: "gallery",
                    labelPlural: "galleries"
                }),
                _nodeType: "Album",
                _emptyIcon: "Gallery",
                _emptyMessage: "No Galleries Found",
                _emptySelected: "No Galleries Selected",
                render: function() {
                    var t = this,
                        a = this.config.widget.data,
                        r = this._getTilesConfig(a),
                        n = a.nodeSource;
                    return "recent" === n ? new e.Promise(function(e) {
                        t._getRecentGalleries(r).then(function(i) {
                            r.resources = i, t._precacheImages(r), t._renderTiles(r), e()
                        })
                    }) : void("allGalleries" === n ? this._getAllGalleries(r).then(function(e) {
                        r.resources = e, t._precacheImages(r), t._renderTiles(r)
                    }) : i.superclass.render.call(this))
                },
                _getRecentGalleries: function(e) {
                    var i = this,
                        a = "/api/v2/album!search",
                        r = encodeURIComponent(i.config.user.nickName);
                    return t.loadUri(a, {
                        paginate: !0,
                        start: 1,
                        count: e.paginationOptions.pageSize,
                        data: {
                            Scope: "/api/v2/user/" + r,
                            SortDirection: "Descending",
                            SortMethod: "LastUpdated"
                        },
                        expand: {
                            HighlightImage: !0,
                            "HighlightImage.ImageSizeDetails": !0
                        }
                    })
                },
                _getAllGalleries: function(e) {
                    var i = this.config.widget.data,
                        a = "/api/v2/user/" + encodeURIComponent(this.config.user.nickName) + "!albums",
                        r = "DateModified" === i.sortMethod ? "Last Updated" : "Date Added",
                        n = i.sortDirection;
                    return t.loadUri(a, {
                        paginate: !0,
                        start: 1,
                        count: e.paginationOptions.pageSize,
                        data: {
                            Order: r + " (" + n + ")"
                        },
                        expand: {
                            HighlightImage: !0,
                            "HighlightImage.ImageSizeDetails": !0,
                            "HighlightImage.ImageAlbum": !0
                        }
                    })
                }
            })
        }()
    }(), SM.currentModule = null
}, "", {
    requires: ["promise", "sm-pagewidget-base-view", "sm-album-model", "sm-image-model", "sm-models-usernode", "sm-pagewidget-nodes-view", "sm-tiles-view", "sm-resource-album"]
});
YUI.add("sm-pagewidget-gplusbadge-view", function(e) {
    SM.currentModule = "sm-pagewidget-gplusbadge-view";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        var t = SM["import"]("lodash"),
            i = SM["import"]("rsvp"),
            n = t.template('https://plus.google.com/<% if (type && type === "community") { %>communities/<% } %><%- id %>'),
            r = "There was a problem rendering the badge. Verify that both the URL and badge type are correct and try again.",
            s = function(e) {
                e.forceResize = !0, e.resize = !0, s.superclass.constructor.call(this, e);
                var t = e.config.widget.data;
                this._href = n({
                    id: t.id,
                    type: t.type
                })
            };
        e.namespace("SM.PageWidget").GooglePlusBadge = e.extend(s, e.SM.PageWidget.BaseView, {
            render: function() {
                var n = this.container,
                    s = this.config.widget.data,
                    o = t.clone(s.badgeOptions),
                    d = this;
                return n.setStyle("textAlign", s.alignment), this.editMode && n.setStyle("minHeight", "100px"), new i.Promise(function(t, i) {
                    o.width = d._getWidth(), s.id ? (o.href = d._href, e.SM.GooglePlus.renderBadge(n.getDOMNode(), s.type, o).then(function() {
                        if (d.editMode) var i = 0,
                            o = n.one(".g-" + s.type),
                            a = e.later(250, d, function() {
                                var e = parseInt(o.getStyle("height"), 10);
                                (++i > 4 || e) && (a.cancel(), i > 4 && !e && d.renderEmpty("User", r), t())
                            }, null, !0);
                        else t()
                    }, function() {
                        d.editMode && d.renderEmpty("User", r), i()
                    })) : (d.editMode && d.renderEmpty("User", "Enter a valid Google+ URL."), t())
                })
            },
            _checkResize: function() {
                if (!this._resizing) {
                    var e = this,
                        t = this.getContainerWidth();
                    t !== this._lastWidth && (this._resizing = !0, t < this._lastWidth ? this._reRender().then(function() {
                        e._resizing = !1
                    }) : this._isShrunk ? this._reRender().then(function() {
                        e._resizing = !1
                    }) : this._resizing = !1)
                }
            },
            _getWidth: function() {
                var t, i = this.config.widget.data.badgeOptions,
                    n = i.width,
                    r = this.getContainerWidth(),
                    s = e.SM.GooglePlus.BADGE_SIZES[i.layout.toUpperCase()].MIN_WIDTH;
                return t = n > r ? Math.max(s, r) : n, this._isShrunk = n > t, this._lastWidth = t, t
            },
            _reRender: function() {
                var n = this.container,
                    r = this.config.widget.data,
                    s = t.clone(r.badgeOptions),
                    o = n.one(".g-" + r.type);
                return s.width = this._getWidth(), s.href = this._href, o && o.hide(), new i.Promise(function(t) {
                    e.SM.GooglePlus.renderBadge(n.getDOMNode(), r.type, s).then(function() {
                        o && o.remove(!0), t()
                    })
                })
            }
        })
    }(), SM.currentModule = null
}, "", {
    requires: ["lodash", "rsvp", "sm-google-plus", "sm-pagewidget-base-view"]
});
YUI.add("sm-pagewidget-html-view", function(e) {
    SM.currentModule = "sm-pagewidget-html-view";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: !0
        });
        var t = function(e) {
            function t() {
                return babelHelpers.classCallCheck(this, t), babelHelpers.possibleConstructorReturn(this, (t.__proto__ || Object.getPrototypeOf(t)).apply(this, arguments))
            }
            return babelHelpers.inherits(t, e), babelHelpers.createClass(t, [{
                key: "render",
                value: function() {
                    !this.config.widget.data.html && this.editMode && this.renderEmpty("HTML", "No HTML present")
                }
            }]), t
        }(SM["import"]("sm-pagewidget-base-view"));
        e.namespace("SM.PageWidget").Html = t, exports["default"] = t, module.exports = exports["default"]
    }(), SM.currentModule = null
}, "", {
    requires: ["sm", "sm-pagewidget-base-view"]
});
YUI.add("sm-pagewidget-image-view", function(e) {
    SM.currentModule = "sm-pagewidget-image-view";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        ! function() {
            var t = SM["import"]("sm-dom"),
                i = function(e) {
                    e.resize = !0, i.superclass.constructor.call(this, e)
                };
            e.namespace("SM.PageWidget").Image = e.extend(i, e.SM.PageWidget.BaseView, {
                _checkResize: function() {
                    this._tileView && this._tileView.resize()
                },
                render: function() {
                    var t = this.config,
                        i = t.widget.data,
                        a = i.ImageData,
                        s = i.ClickAction,
                        l = i.OpenInNewTab;
                    if (a) switch (a.Status) {
                        case "Delete":
                        case "Deleted":
                            this.editMode && this.renderEmpty("Image", "Selected Photo Has Been Deleted");
                            break;
                        default:
                            if ("Hidden" === a.Status && !e.SM.Page.isOwnerOrAdmin()) return;
                            this._image = new e.SM.Models.Image(i.ImageData);
                            var n = {
                                autoResize: !1,
                                center: i.CenterImage,
                                clickable: "off" !== s,
                                containerWidth: this.getContainerWidth(),
                                maxHeight: i.CustomHeight,
                                maxWidth: i.CustomWidth,
                                dataMap: {
                                    Url: "GalleryUrl"
                                },
                                imageCrop: i.Crop,
                                imageSize: i.Size,
                                resource: this._image,
                                showInfo: i.TileInfo,
                                infoAlignment: i.InfoAlignment,
                                showStatus: "Hidden" === a.Status,
                                parentNode: this.container
                            };
                            "custom" === i.Size ? n.imageSize = "fit" : (n.maxHeight = 0, n.maxWidth = 0), this._tileView = new e.SM.Views.Tile(n), this._tileView.render();
                            var o = this._tileView.get("container");
                            if ("lightbox" === s) {
                                this._tileView.on("tileClick", this._onTileClick, this);
                                var r = o.one(".sm-tile-title");
                                r && r.on("click", this._onTileClick, this)
                            } else if ("custom" === s) {
                                var m = i.CustomURL,
                                    u = o.one("a.sm-tile-content");
                                u.set("href", m), l && u.set("target", "_blank");
                                var c = o.one(".sm-tile-title > a");
                                c && (c.set("href", m), l && c.set("target", "_blank"))
                            }
                            this._views.push(this._tileView)
                    } else this.renderEmpty("Image", "No Photo Selected")
                },
                _onTileClick: function(i) {
                    i.preventDefault();
                    var a = i.tile || this._image,
                        s = t.win.scrollY || (t.doc.documentElement || t.doc.body).scrollTop || 0;
                    e.use("sm-lightbox-view", function() {
                        var i = new e.SM.Views.Lightbox({
                                autoHideControls: !0,
                                image: a
                            }),
                            l = new e.SM.Models.Album({
                                AlbumID: a.get("AlbumID"),
                                AlbumKey: a.get("AlbumKey")
                            });
                        l.load({
                            data: {
                                AlbumID: a.get("AlbumID"),
                                AlbumKey: a.get("AlbumKey")
                            }
                        }, function() {
                            i.set("image", a)
                        }), i.plug(e.SM.Views.Lightbox.Plugins.Basic, {
                            galleryAlbum: l,
                            allowGalleryBuy: !1,
                            realGallery: !1
                        }), e.one("html").hasClass("sm-user-ui") ? i.render(".sm-user-overlay-container") : i.render(), i.show(), i.after("visibleChange", function(e) {
                            e.newVal || (i.destroy(), t.win.scrollTo(0, s))
                        })
                    })
                }
            })
        }()
    }(), SM.currentModule = null
}, "", {
    requires: ["sm", "sm-dom", "sm-image-model", "sm-pagewidget-base-view", "sm-tile-view"]
});
YUI.add("sm-pagewidget-images-view", function(e) {
    SM.currentModule = "sm-pagewidget-images-view";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        ! function() {
            function i(e) {
                e.resize = !0, i.superclass.constructor.call(this, e)
            }
            var SM = window.SM,
                t = SM["import"]("sm-dom");
            e.namespace("SM.PageWidget").Images = e.extend(i, e.SM.PageWidget.BaseView, {
                render: function() {
                    var i, t = this,
                        a = t.config.widget.data,
                        s = a.imageSource || "album",
                        o = t._getTilesConfig(a);
                    return new e.Promise(function(n) {
                        if ("selectedImages" === s) o.resources = new e.SM.Models.ImageList({
                            items: a.selectedImages
                        }), t._renderTiles(o), n();
                        else {
                            switch (i = {
                                PageSize: o.paginationOptions.pageSize,
                                returnModelList: !0,
                                VisitorView: a.visitorView
                            }, s) {
                                case "keyword":
                                    i.keywords = a.keywords || "", i.nickName = a.nickname || "", o.resources = new e.SM.Models.GalleryImageList;
                                    break;
                                case "popular":
                                case "recent":
                                    i.NickName = t.config.user.nickName || "", i.Scope = a.scope || "", i.Limit = o.paginationOptions.pageSize, o.resources = new e.SM.Models.ImageList;
                                    break;
                                default:
                                    i.albumId = a.albumId || 0, i.albumKey = a.albumKey || "", i.nodeId = a.nodeId || "", o.resources = new e.SM.Models.GalleryImageList
                            }
                            o.resources.load({
                                apiCategory: s,
                                data: i
                            }, function() {
                                t._precacheImages(o), t._renderTiles(o), n()
                            })
                        }
                    })
                },
                _checkResize: function() {
                    this._tiles && this._tiles.resize()
                },
                _getPageSize: function(i, t, a) {
                    var s = i.pageSizeType;
                    return "all" === s ? 1e3 : e.SM.Views.Tiles.getPageSize(t, i.tileLayout, {
                        crop: i.imageCrop,
                        imageSize: a,
                        pageSize: "custom" === s ? i.pageSize : null
                    })
                },
                _getTilesConfig: function(i) {
                    var t = this.getContainerWidth(),
                        a = e.SM.Views.Tiles.PAGINATION_TYPES,
                        s = i.clickAction,
                        o = i.paginationType || a.INFINITE;
                    return (!o || this.editMode && o === a.INFINITE) && (o = a.NONE), {
                        autoResize: !1,
                        clickable: "off" !== s,
                        dataMap: {
                            Url: "GalleryUrl",
                            Caption: "CaptionText"
                        },
                        layout: i.tileLayout,
                        pagination: o,
                        parentNode: this.container,
                        layoutOptions: {
                            containerWidth: t,
                            imageCrop: i.imageCrop,
                            imageSize: i.imageSize,
                            showInfo: i.tileInfo,
                            infoHover: i.tileInfoHover,
                            showStatus: !0,
                            spacing: i.tileSpacing,
                            varyHeight: i.varyHeight,
                            infoAlignment: i.infoAlignment
                        },
                        paginationOptions: {
                            label: "image",
                            labelPlural: "images",
                            pageSize: this._getPageSize(i, t, i.imageSize)
                        }
                    }
                },
                _renderTiles: function(i) {
                    var t = i.resources;
                    t.size() > 0 ? (this._tiles = new e.SM.Views.Tiles(i), this._tiles.render(), "lightbox" === this.config.widget.data.clickAction && this._tiles.on("tileClick", this._onTileClick, this), this.showParentNode()) : this.editMode ? (this.renderEmpty("Image", "No Photos Found"), this.showParentNode()) : this.hideColumnNode(), SM.env.loggedInUser && SM.env.loggedInUser.isAdmin && (e.publish("widget-loaded", {
                        broadcast: 2
                    }), e.fire("widget-loaded", {
                        name: "images"
                    }))
                },
                _onTileClick: function(i) {
                    i.preventDefault();
                    var a = i.tile,
                        s = this._tiles.get("resources"),
                        o = window.scrollY || (t.doc.documentElement || t.doc.body).scrollTop || 0;
                    e.use("sm-lightbox-view", function() {
                        var i = new e.SM.Views.Lightbox({
                                autoHideControls: !0,
                                image: a,
                                visible: !1
                            }),
                            n = new e.SM.Models.Album({
                                AlbumID: a.get("AlbumID"),
                                AlbumKey: a.get("AlbumKey")
                            });
                        n.load({
                            data: {
                                AlbumID: a.get("AlbumID"),
                                AlbumKey: a.get("AlbumKey")
                            }
                        }, function() {
                            i.set("image", a)
                        }), i.plug(e.SM.Views.Lightbox.Plugins.Nav), i.plug(e.SM.Views.Lightbox.Plugins.Basic, {
                            galleryAlbum: n,
                            allowGalleryBuy: !1,
                            realGallery: !1
                        }), e.one("html").hasClass("sm-user-ui") ? i.render(".sm-user-overlay-container") : i.render(), i.show(), i.nav.after("navigate", function(t) {
                            var a = s.item(s.indexOf(i.get("image")) + ("right" === t.direction ? 1 : -1)),
                                o = new e.SM.Models.Album({
                                    AlbumID: a.get("AlbumID"),
                                    AlbumKey: a.get("AlbumKey")
                                });
                            o.load({
                                data: {
                                    AlbumID: a.get("AlbumID"),
                                    AlbumKey: a.get("AlbumKey")
                                }
                            }, function() {
                                i.set("image", a)
                            }), i.basic.set("galleryAlbum", o), i.set("image", a);
                            var n = s.indexOf(a);
                            i.nav.toggleNavArrows(n > 0, n < s.size() - 1)
                        }, this);
                        var l = s.indexOf(i.get("image"));
                        i.nav.toggleNavArrows(l > 0, l < s.size() - 1), i.after("visibleChange", function(e) {
                            e.newVal || (i.destroy(), t.win.scrollTo(0, o))
                        })
                    })
                }
            })
        }()
    }(), SM.currentModule = null
}, "", {
    requires: ["promise", "sm", "sm-dom", "sm-image-model", "sm-pagewidget-base-view", "sm-tiles-view", "sm-slideshow-view", "sm-slideshow-gallery-plugin"]
});
YUI.add("sm-pagewidget-keywords-view", function(e) {
    SM.currentModule = "sm-pagewidget-keywords-view";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        var SM = window.SM,
            t = e.Template.Micro,
            a = e.SM.Page,
            s = SM.env.host.http + SM.env.host.cdn + "/include/js/tagcanvas/{FileName}-20140219173927.js",
            i = t.compile('<% var weightClassBase = "sm-keyword-", className = "sm-keywords-" + data.displayStyle; %><div class="<%= className %>"><% if (data.displayStyle === "cloud") { %><% var listId = data.canvasId + "-list"; %><canvas id="<%= data.canvasId %>" width="<%== data.canvasWidth %>" height="400"><ul><% } %><% Y.Object.each(data.keywordsData.Keywords, function (count, kw) { %><% var intCount = parseInt(count, 10), weightClass; %><% if (intCount < parseInt(data.keywordsData.one, 10)) { %><% weightClass = weightClassBase + "one"; %><% } else if (intCount >= data.keywordsData.one && intCount < data.keywordsData.two) { %><% weightClass = weightClassBase + "two"; %><% } else if (intCount >= data.keywordsData.two && intCount < data.keywordsData.three) { %><% weightClass = weightClassBase + "three"; %><% } else if (intCount >= data.keywordsData.three && intCount < data.keywordsData.four) { %><% weightClass = weightClassBase + "four"; %><% } else if (intCount >= data.keywordsData.four && intCount < data.keywordsData.five) { %><% weightClass = weightClassBase + "five"; %><% } else if (intCount >= data.keywordsData.five && intCount < data.keywordsData.six) { %><% weightClass = weightClassBase + "six"; %><% } else if (intCount >= data.keywordsData.six && intCount < data.keywordsData.seven) { %><% weightClass = weightClassBase + "seven"; %><% } else if (intCount >= data.keywordsData.seven && intCount < data.keywordsData.eight) { %><% weightClass = weightClassBase + "eight"; %><% } else if (intCount >= data.keywordsData.eight && intCount < data.keywordsData.nine) { %><% weightClass = weightClassBase + "nine"; %><% } else { %><% weightClass = weightClassBase + "ten"; %><% } %><% var scope = data.nodeScope ? "n-" + data.nodeScope + "/" : ""; %><% if (data.displayStyle === "list") { %><a class="sm-muted <%= weightClass %>" href="/keyword/<%= scope %><%= encodeURIComponent(kw) %>"><%= kw %></a> <% } else { %><li><a class="<%= weightClass %>" href="/keyword/<%= scope %><%= encodeURIComponent(kw) %>"><%= kw %></a></li><% } %><% }); %><% if (data.displayStyle === "cloud") { %></ul></canvas><% } %></div>'),
            n = {
                textColour: "",
                textFont: "",
                outlineMethod: "colour",
                outlineColour: "#ffffff",
                depth: .8,
                maxSpeed: .05,
                reverse: !0,
                weight: !0,
                weightMode: "size",
                wheelZoom: !1
            },
            d = function(t) {
                d.superclass.constructor.call(this, t), this._tagCanvasUrl = e.Lang.sub(s, {
                    FileName: a.admin && "-debug" === a.admin.jsLevel ? "tagcanvas-debug" : "tagcanvas-min"
                })
            };
        e.namespace("SM.PageWidget").Keywords = e.extend(d, e.SM.PageWidget.BaseView, {
            render: function() {
                var t = this.config.widget.data,
                    a = this;
                return new e.Promise(function(s) {
                    t.keywordsData ? "list" !== t.displayStyle && a._isCanvasSupported() ? e.Get.js(a._tagCanvasUrl, {
                        async: !0
                    }, function() {
                        this.editMode ? e.onceAfter("widget:rendered", function() {
                            a._renderCloud(t)
                        }) : a._renderCloud(t), s()
                    }) : (s(), a._renderList(t), a._fireWidgetLoaded()) : (a.editMode && a.renderEmpty("Tags", "No Keywords fit the scope"), s())
                })
            },
            _fireWidgetLoaded: function() {
                SM.env.loggedInUser && SM.env.loggedInUser.isAdmin && (e.publish("widget-loaded", {
                    broadcast: 2
                }), e.fire("widget-loaded", {
                    name: "keywords"
                }))
            },
            _renderCloud: function(t) {
                var a = this.container,
                    s = e.guid(),
                    d = e.merge(t, {
                        canvasId: s,
                        canvasWidth: this.getContainerWidth()
                    }),
                    o = this.config.widget.data.linkHoverColor;
                a.setHTML(i(d)), e.later(100, this, function() {
                    try {
                        window.TagCanvas.Start(s, null, e.merge(n, {
                            outlineColour: o
                        }))
                    } catch (a) {
                        this._renderList(t)
                    }
                    this._fireWidgetLoaded()
                })
            },
            _renderList: function(e) {
                this.container.setHTML(i(e))
            },
            _isCanvasSupported: function() {
                return !!document.createElement("canvas").getContext
            }
        })
    }(), SM.currentModule = null
}, "", {
    requires: ["get", "promise", "sm-pagewidget-base-view"]
});
YUI.add("sm-pagewidget-logo-image", function(e) {
    SM.currentModule = "sm-pagewidget-logo-image";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: !0
        });
        var e = SM["import"]("classnames"),
            t = SM["import"]("react"),
            a = SM["import"]("sm-dom"),
            n = function(n) {
                var r = n.imageHeight,
                    i = n.imageWidth,
                    o = n.imageUrl,
                    m = n.url,
                    s = n.retinaUrl,
                    u = n.handleOnContextMenu,
                    g = n.maskShape,
                    l = a.devicePixelRatio >= 2,
                    c = [{
                        "sm-page-widget-logo-img": "" === s || !l
                    }, {
                        "sm-page-widget-logo-img-retina": "" !== s && l
                    }],
                    d = s && l ? s : o,
                    S = {
                        background: "url(" + d + ") center center",
                        width: i,
                        height: r,
                        backgroundRepeat: "no-repeat"
                    };
                return "none" !== g ? (S.width = S.height = Math.min(i, r) + "px", S.backgroundSize = "cover") : S.backgroundSize = "contain", t.createElement("a", {
                    href: m
                }, t.createElement("img", {
                    "data-image-mask-shape": g,
                    className: e(c),
                    style: S,
                    onContextMenu: u,
                    src: SM.env.host.spacerGif
                }))
            };
        n.MASK_SHAPE_NONE = "none", n.MASK_SHAPE_CIRCLE = "circle", n.MASK_SHAPE_SQUIRCLE = "squircle";
        var r = t.PropTypes;
        n.propTypes = {
            imageHeight: r.number,
            imageWidth: r.number,
            imageUrl: r.string,
            url: r.string,
            retinaUrl: r.string,
            handleOnContextMenu: r.func,
            maskShape: r.oneOf([n.MASK_SHAPE_NONE, n.MASK_SHAPE_CIRCLE, n.MASK_SHAPE_SQUIRCLE])
        }, n.defaultProps = {
            handleOnContextMenu: function() {},
            maskShape: n.MASK_SHAPE_NONE
        }, exports["default"] = n, module.exports = exports["default"]
    }(), SM.currentModule = null
}, "", {
    requires: ["classnames", "react", "react-dom", "sm", "sm-dom"]
});
YUI.add("sm-pagewidget-logo-layout", function(e) {
    SM.currentModule = "sm-pagewidget-logo-layout";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: !0
        });
        var e = SM["import"]("classnames"),
            t = SM["import"]("react"),
            o = SM["import"]("sm-pagewidget-logo-image"),
            a = SM["import"]("sm-pagewidget-logo-text"),
            r = function(r) {
                var i = r.alignment,
                    g = r.imagePosition,
                    l = r.imageUrl,
                    n = r.subText,
                    s = r.text,
                    m = r.retinaUrl,
                    p = ["sm-page-widget-logo-container", "sm-page-widget-logo-align-" + i, {
                        "sm-page-widget-logo-retina": "" !== m
                    }],
                    d = l && ("above" === g || "left" === g),
                    u = l && ("below" === g || "right" === g),
                    T = s || n;
                return t.createElement("div", {
                    className: e(p),
                    "data-text-img-position": g
                }, d && t.createElement(o, r), T && t.createElement(a, r), u && t.createElement(o, r))
            };
        r.ALIGNMENT_LEFT = "left", r.ALIGNMENT_CENTER = "center", r.ALIGNMENT_RIGHT = "right";
        var i = t.PropTypes;
        r.propTypes = {
            alignment: i.oneOf([r.ALIGNMENT_LEFT, r.ALIGNMENT_CENTER, r.ALIGNMENT_RIGHT]),
            imagePosition: a.propTypes.imagePosition,
            imageUrl: o.propTypes.imageUrl,
            subText: i.string,
            text: i.string,
            retinaUrl: o.propTypes.retinaUrl
        }, r.defaultProps = {
            alignment: r.ALIGNMENT_LEFT,
            imagePosition: a.IMAGE_POSITION_LEFT
        }, exports["default"] = r, module.exports = exports["default"]
    }(), SM.currentModule = null
}, "", {
    requires: ["classnames", "react", "react-dom", "sm", "sm-dom", "sm-pagewidget-logo-image", "sm-pagewidget-logo-text"]
});
YUI.add("sm-pagewidget-logo-tagline", function(e) {
    SM.currentModule = "sm-pagewidget-logo-tagline";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: !0
        });
        var e = SM["import"]("classnames"),
            t = SM["import"]("react"),
            s = function(s) {
                var r = s.subText,
                    o = s.subTextCaps,
                    u = s.subTextColor,
                    T = s.subTextSize,
                    a = (s.text, s.textSize),
                    E = u ? "sm-" + u : "",
                    l = "upper" === o || "lower" === o ? "sm-page-widget-logo-" + o : "",
                    S = ["sm-page-widget-logo-subtext", "" + E, "" + l];
                return T ? S.push("sm-page-widget-logo-text-" + T) : S.push("sm-page-widget-logo-" + a), t.createElement("h2", {
                    className: e(S)
                }, r)
            };
        s.TEXT_SIZE_XSMALL = "xs", s.TEXT_SIZE_SMALL = "s", s.TEXT_SIZE_MEDIUM = "m", s.TEXT_SIZE_LARGE = "l", s.TEXT_SIZE_XLARGE = "xl";
        var r = t.PropTypes;
        s.propTypes = {
            subText: r.string,
            subTextCaps: r.string,
            subTextColor: r.string,
            subTextSize: r.string,
            textSize: r.oneOf([s.TEXT_SIZE_XSMALL, s.TEXT_SIZE_SMALL, s.TEXT_SIZE_MEDIUM, s.TEXT_SIZE_LARGE, s.TEXT_SIZE_XLARGE])
        }, s.defaultProps = {
            textSize: s.TEXT_SIZE_LARGE
        }, exports["default"] = s, module.exports = exports["default"]
    }(), SM.currentModule = null
}, "", {
    requires: ["classnames", "react", "react-dom", "sm", "sm-dom"]
});
YUI.add("sm-pagewidget-logo-text", function(e) {
    SM.currentModule = "sm-pagewidget-logo-text";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: !0
        });
        var e = SM["import"]("classnames"),
            t = SM["import"]("react"),
            o = SM["import"]("sm-pagewidget-logo-tagline"),
            i = {
                left: "paddingLeft",
                right: "paddingRight",
                above: "paddingTop",
                below: "paddingBottom"
            },
            r = function(r) {
                var n = r.imagePadding,
                    a = r.imagePosition,
                    l = r.imageUrl,
                    g = r.letterSpacing,
                    s = r.lineHeight,
                    m = r.subText,
                    u = r.text,
                    d = r.textCaps,
                    p = r.textColor,
                    I = r.textCustomColor,
                    c = r.textFont,
                    x = r.textFontWeight,
                    S = r.textSize,
                    O = r.url,
                    E = {},
                    M = p && "custom" !== p ? "sm-" + p : "",
                    T = "upper" === d || "lower" === d ? "sm-page-widget-logo-" + d : "";
                l && a && (E[i[a]] = n);
                var _ = ["sm-page-widget-logo-text", "sm-page-widget-logo-" + S, "" + M, "" + T],
                    P = {
                        color: "custom" === p && I ? "#" + I : null,
                        fontFamily: c ? c : null,
                        fontWeight: c && x ? x : null,
                        lineHeight: s ? s + "px" : null,
                        letterSpacing: g ? g : null
                    };
                return t.createElement("div", {
                    className: "sm-page-widget-logo-text-container",
                    "data-text-img-position": a,
                    style: E
                }, u && t.createElement("a", {
                    href: O
                }, t.createElement("h1", {
                    className: e(_),
                    style: P
                }, u)), m && t.createElement(o, r))
            };
        r.IMAGE_POSITION_ABOVE = "above", r.IMAGE_POSITION_BELOW = "below", r.IMAGE_POSITION_LEFT = "left", r.IMAGE_POSITION_RIGHT = "right";
        var n = t.PropTypes;
        r.propTypes = {
            imagePadding: n.number,
            imagePosition: n.oneOf([r.IMAGE_POSITION_ABOVE, r.IMAGE_POSITION_BELOW, r.IMAGE_POSITION_LEFT, r.IMAGE_POSITION_RIGHT]),
            imageUrl: n.string,
            letterSpacing: n.number,
            lineHeight: n.number,
            subText: n.string,
            text: n.string,
            textCaps: n.string,
            textColor: n.string,
            textCustomColor: n.string,
            textFont: n.string,
            textFontWeight: n.number,
            textSize: o.propTypes.textSize,
            url: n.string
        }, r.defaultProps = {
            imagePadding: 10,
            imagePosition: r.IMAGE_POSITION_LEFT,
            textSize: o.TEXT_SIZE_LARGE
        }, exports["default"] = r, module.exports = exports["default"]
    }(), SM.currentModule = null
}, "", {
    requires: ["classnames", "react", "react-dom", "sm", "sm-dom", "sm-pagewidget-logo-tagline"]
});
YUI.add("sm-pagewidget-logo-view", function(e) {
    SM.currentModule = "sm-pagewidget-logo-view";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        ! function() {
            var t = SM["import"]("react"),
                o = SM["import"]("react-dom"),
                r = (SM["import"]("sm-dom"), SM["import"]("sm-page"), SM["import"]("sm-pagewidget-logo-layout")),
                n = function(n) {
                    function i() {
                        return babelHelpers.classCallCheck(this, i), babelHelpers.possibleConstructorReturn(this, (i.__proto__ || Object.getPrototypeOf(i)).apply(this, arguments))
                    }
                    return babelHelpers.inherits(i, n), babelHelpers.createClass(i, [{
                        key: "destroy",
                        value: function() {
                            babelHelpers.get(i.prototype.__proto__ || Object.getPrototypeOf(i.prototype), "destroy", this).call(this), o.unmountComponentAtNode(this._containerDOMNode)
                        }
                    }, {
                        key: "init",
                        value: function(e) {
                            babelHelpers.get(i.prototype.__proto__ || Object.getPrototypeOf(i.prototype), "init", this).call(this, e), this._containerDOMNode = this.container.getDOMNode()
                        }
                    }, {
                        key: "render",
                        value: function() {
                            var e = this;
                            return new Promise(function(n) {
                                o.render(t.createElement(r, babelHelpers["extends"]({}, e.config.widget.data, {
                                    handleOnContextMenu: e._onContextMenu.bind(e)
                                })), e._containerDOMNode, n)
                            })
                        }
                    }, {
                        key: "_onContextMenu",
                        value: function(t) {
                            this.config.widget.data.isProtected && (t.preventDefault(), e.SM.Page.Tooltip.showAtXY(SM.env.rightClickMessage, t.pageX, t.pageY, {
                                className: "sm-right-click-message"
                            }))
                        }
                    }]), i
                }(SM["import"]("sm-pagewidget-base-view"));
            e.namespace("SM.PageWidget").Logo = module.exports = exports = n
        }()
    }(), SM.currentModule = null
}, "", {
    requires: ["classnames", "react", "react-dom", "sm", "sm-fonts", "sm-pagewidget-base-view", "sm-page-tooltip", "sm-pagewidget-logo-layout"]
});
YUI.add("sm-pagewidget-map-view", function(e) {
    SM.currentModule = "sm-pagewidget-map-view";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        function t(e) {
            t.superclass.constructor.call(this, e || {})
        }
        e.namespace("SM.PageWidget").Map = e.extend(t, e.SM.PageWidget.BaseView, {
            init: function(e) {
                e.resize = !0, t.superclass.init.call(this, e)
            },
            destroy: function() {
                this.smugmap.destroy(), this.mapNode && this.mapNode.remove(!0), this.mapNode = null, t.superclass.destroy.call(this)
            },
            render: function() {
                this._setContainerHeight(), this._renderMap(), this._attachEvents()
            },
            _attachEvents: function() {
                this.editMode && this._eventHandlers.push(e.after("widget:rendered", this._checkResize, this, {
                    type: "widget:rendered"
                }))
            },
            _renderMap: function() {
                this.mapNode = this.container.appendChild("<div></div>"), this.smugmap = new e.SM.Map({
                    container: this.mapNode,
                    images: this.config.widget.data.images
                }), this.smugmap.render()
            },
            _setContainerHeight: function() {
                var e = this.getContainerWidth(),
                    t = e > 400 ? parseInt(e / 2, 10) : e;
                this.container.setStyle("height", t + "px")
            },
            _checkResize: function(e) {
                e && "resize" === e.type || this._setContainerHeight(), this.smugmap && (this.editMode && (this.smugmap.map.invalidateSize(), this.smugmap._fitMarkerBounds()), this.smugmap.map._onResize())
            }
        })
    }(), SM.currentModule = null
}, "", {
    requires: ["base", "node", "sm-image-model", "sm-image-template", "sm-map", "sm-pagewidget-base-view", "template-micro"]
});
YUI.add("sm-pagewidget-nav-view", function(e) {
    SM.currentModule = "sm-pagewidget-nav-view";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        ! function() {
            var a = function(e) {
                e.resize = !0, a.superclass.constructor.call(this, e)
            };
            e.namespace("SM.PageWidget").Nav = e.extend(a, e.SM.PageWidget.BaseView, {
                render: function() {
                    return this._renderView(), this
                },
                _bindEvents: function() {
                    if (a.superclass._bindEvents.call(this), this.config.widget.data.hasContactItem) {
                        var t = this;
                        e.use("sm-page-contact", function() {
                            t._eventHandlers.push(t.container.delegate("click", function(a) {
                                var i = t.config.widget.data.style;
                                a.preventDefault(), ("horizontal" === i || "vertical" === i) && t._navStyleView.hideAllMenus(), e.when(e.SM.Page.contact.addContactOverlay()).then(function() {
                                    e.SM.Page.showDialog("contact")
                                })
                            }, ".sm-page-widget-nav-contact", t))
                        })
                    }
                    e.SM.Page.user || this._eventHandlers.push(this.container.delegate("click", function(a) {
                        var t = this.config.widget.data.style;
                        a.preventDefault(), ("horizontal" === t || "vertical" === t) && this._navStyleView.hideAllMenus(), e.SM.Page.login()
                    }, ".sm-page-widget-nav-login", this))
                },
                _checkResize: function() {
                    this._resizing || (this._resizing = !0, this._navStyleView.render(), this._resizing = !1)
                },
                _renderView: function() {
                    var a, t = this.config.widget.data,
                        i = this.container;
                    switch (t.style) {
                        case "horizontal":
                        case "vertical":
                            a = "Standard";
                            break;
                        case "accordion":
                            a = "Accordion";
                            break;
                        case "footer":
                            a = "Footer"
                    }
                    if (t.items && 0 !== t.items.length) {
                        var s = this._navStyleView = new e.SM.PageWidget.Nav.Styles[a](e.merge(t, {
                            container: i
                        }));
                        s.render(), this._views.push(s)
                    } else "editPage" === e.SM.Page.getMode() && this.renderEmpty("Warning", "No items in this navigation menu")
                }
            })
        }(),
        function() {
            var a = e.Template.Micro,
                t = e.SM.Page.owner.nickName;
            e.namespace("SM.PageWidget.Nav").Templates = {
                accordionItem: '<% var itemData = data.data, itemLabel = data.label, Templates = Y.SM.PageWidget.Nav.Templates; %><li id="<%= data.id %>" class="<%= data.itemClassNames.join(" ") %> sm-nav-item-toplevel<% if (itemData.active) { %> sm-page-widget-nav-activepage<% } else if (itemData.hasActive) { %> sm-page-widget-nav-hasactivepage<% } %>"><% if (itemData.type === "searchinput") { %><%== Templates.searchItem %><% } else { %><% if (itemData.type === "login") { %><%== Templates.loginItem(Y.merge(data, {className:"sm-accordion-item-label"})) %><% } else { %><a href="<%= data.url %>" data-item-id="<%= data.id %>" data-children-id="<%= data._childrenId %>" class="sm-accordion-item-label<% if (itemData.type === "contact") { %> sm-page-widget-nav-contact<% } %><% if (itemData.openInNewTab) { %>" target="_blank<% } %>"><%= itemLabel %></a><% } %><% if (data._renderedItems) { %><a class="sm-accordion-item-action" href="#"><span class="sm-fonticon sm-fonticon-small"></span></a><ul id="<%= data._childrenId %>" class="sm-accordion-children"><%== data._renderedItems %></ul><% } %><% } %></li>',
                accordionSubItemContainer: '<% var itemData = data.item.data; %><li id="<%= data.id %>" class="sm-accordion-item sm-nav-item sm-nav-item-sublevel<% if (itemData.active) { %> sm-page-widget-nav-activepage<% } %>"><%== data._renderedItem %></li>',
                accordionSubItem: '<% if (data.url) { %><% if (data.data.type === "login") { %><%== Y.SM.PageWidget.Nav.Templates.loginItem(Y.merge(data, {className:"sm-accordion-item-label"})) %><% } else { %><a href="<%= data.url %>" class="sm-accordion-item-label<% if (data.data.type === "contact") { %> sm-page-widget-nav-contact<% } %><% if (data.data.openInNewTab) { %>" target="_blank<% } %>" data-item-id="<%= data.id %>"><%= data.label %></a><% } %><% } else { %><span class="sm-accordion-item-label" data-item-id="<%= data.id %>"><%= data.label %></span><% } %>',
                footerItem: a.compile('<% var itemData = data.data; %><li class="sm-page-widget-nav-toplink<% if (data.numChildren > 0) { %> sm-page-widget-nav-has-subitems<% } %><% if (itemData.active) { %> sm-page-widget-nav-activepage<% } else if (itemData.hasActive) { %> sm-page-widget-nav-hasactivepage<% } %>"><% if (itemData.type === "searchinput") { %><%== Y.SM.PageWidget.Nav.Templates.searchItem %><% } else if (itemData.type === "login") { %><%== Y.SM.PageWidget.Nav.Templates.loginItem(Y.merge(data, {className:"sm-page-widget-nav-topitem"})) %><% } else { %><a href="<%= data.url %>" class="sm-page-widget-nav-topitem<% if (itemData.type === "contact") { %> sm-page-widget-nav-contact<% } %>"<% if (itemData.openInNewTab) { %> target="_blank"<% } %>><span class="sm-page-widget-nav-label"><%= data.label %></span></a><% } %><% if (data.numChildren > 0) { %><ul class="sm-page-widget-nav-subitems"><% for (var i = 0; i < data.children.length; ++i) { %><% var childItem = data.children[i]; %><li<% if (childItem.data.active) { %> class="<%= data.classNames.activeNode %>"<% } %>><% if (childItem.data.type === "login") { %><%== Y.SM.PageWidget.Nav.Templates.loginItem(Y.merge(childItem, {className:"sm-page-widget-nav-subitem"})) %><% } else { %><a href="<%= childItem.url %>" class="sm-page-widget-nav-subitem<% if (childItem.data.type === "contact") { %> sm-page-widget-nav-contact<% } %>"<% if (childItem.data.openInNewTab) { %> target="_blank"<% } %>><span class="sm-pagewidget-nav-label"><%= childItem.label %></span></a><% } %></li><% } %></ul><% } %></li>'),
                loginItem: a.compile('<a href="<% if (Y.SM.Page.user) { %><%= SM.env.logoutURL %><% } else { %>#<% } %>" class="<%= data.className %> sm-page-widget-nav-login"><%= data.label %></a>'),
                mobileMenu: a.compile('<% var headerClass = "", sectionClass = ""; if (data.hasSearchItem) { headerClass="yui3-g"; sectionClass = "yui3-u-1-2"; }%><% var searchButton = Y.SM.Templates.button({icon: "Search", noChrome: true, value: "expandsearch", size: "small"}); %><div class="sm-page-widget-nav-mobile-header <%= headerClass %>"><% switch (data.alignment) { %><% case "right": %><% if (data.hasSearchItem) { %><div class="yui3-u-1-2 sm-page-widget-nav-search-expand"><%== searchButton %></div><% } %><div class="sm-page-widget-nav-menu-expand <%= sectionClass %>"><%== Y.SM.Templates.button({label: "Menu", icon: "Menu", noChrome: true, value: "expanditems", iconAlign: data.alignment}) %></div><% break; %><% case "center": %><div class="sm-page-widget-nav-menu-expand <%= sectionClass %>"<% if (data.hasSearchItem) { %> style="text-align:right;"<% } %> data-value="expanditems"><a class="sm-h5" href="#">Menu</a></div><% if (data.hasSearchItem) { %><div class="yui3-u-1-2 sm-page-widget-nav-search-expand" data-value="expandsearch"><%== searchButton %></div><% } %><% break; %><% case "left": %><div class="sm-page-widget-nav-menu-expand <%= sectionClass %>"><%== Y.SM.Templates.button({label: "Menu", icon: "Menu", noChrome: true, value: "expanditems", iconAlign: data.alignment}) %></div><% if (data.hasSearchItem) { %><div class="yui3-u-1-2 sm-page-widget-nav-search-expand"><%== searchButton %></div><% } %><% break; %><% } %><% if (data.hasSearchItem) { %><%== Y.SM.PageWidget.Nav.Templates.mobileSearchItem %><% } %></div><div class="sm-page-widget-nav-items"></div>'),
                popoverItem: a.compile('<li class="sm-page-widget-nav-toplink<% if (data.itemClassName) { %> <%= data.itemClassName %><% } %>"><% if (data.type === "searchinput") { %><%== Y.SM.PageWidget.Nav.Templates.searchItem %><% } else if (data.type === "contact" && !(data.isTablet && data.hasChildren)) { %><a href="#" class="sm-page-widget-nav-contact"><%= data.label %></a><% } else { %><% if (data.type === "login" && !(data.isTablet && data.hasChildren)) { %><%== Y.SM.PageWidget.Nav.Templates.loginItem(data) %><% } else { %><a href="<%= data.url %>"<% if (data.target) { %> target="<%= data.target %>"<% } %>><%= data.label %></a><% } %><% if (data.hasChildren) { %><div /><% } %><% } %></li>'),
                popoverItemsContainer: a.compile('<ul class="<%= data.orientation %>"></ul>'),
                searchItem: '<form class="sm-page-widget-nav-search" action="/search/" method="get"><input type="hidden" name="c" value="photos"><input type="hidden" name="n" value="' + t + '"><input type="text" name="q" class="sm-form-field sm-form-field-text-input" placeholder="search for photos..." /></form>',
                mobileSearchItem: '<form class="sm-page-widget-nav-search" action="/search/" method="get"><input type="hidden" name="c" value="photos"><input type="hidden" name="n" value="' + t + '">' + e.SM.Templates.textboxLabel({
                    name: "q",
                    value: "",
                    iconSuffix: "Search"
                }) + "</form>"
            }
        }(),
        function() {
            var a = SM["import"]("lodash"),
                t = SM["import"]("sm-dom"),
                i = e.Node,
                s = e.SM.Page,
                n = e.SM.PageWidget.Nav.Templates,
                l = e.config.win,
                r = e.Base.create("sm-navAccordionView", e.SM.Views.Accordion, [], {
                    itemTemplate: n.accordionItem,
                    subItemContainerTemplate: n.accordionSubItemContainer,
                    subItemTemplate: n.accordionSubItem,
                    _onItemClick: function(e) {
                        (e.target.hasClass("sm-fonticon") || "#" === e.currentTarget.getAttribute("href")) && (e.preventDefault(), r.superclass._onItemClick.call(this, e))
                    }
                }, {
                    ATTRS: {
                        mutuallyExclusive: {
                            value: !1
                        }
                    }
                }),
                d = e.Base.create("sm-navMenuPlugin", e.SM.Plugin.Menu, [], {
                    initializer: function() {
                        this._isTablet = this.get("tabletStyle")
                    },
                    _attachMenuPluginEvents: function() {
                        d.superclass._attachMenuPluginEvents.call(this), this.get("showOnHover") && t.addEventListener(t.win, "keydown", function(e) {
                            var a = e.keyCode || e.which;
                            9 === a && t.doc.activeElement === this._host.getDOMNode() && (this._tabbingBlur = !0)
                        }, this)
                    },
                    renderNode: function(a, i) {
                        this._isTablet && !a.isRoot() && a.hasChildren() && ("login" === a.data.type || "contact" === a.data.type || a.url && "#" !== a.url) && (a.prepend({
                            children: [],
                            data: e.clone(a.data),
                            label: a.label,
                            url: a.url
                        }), a.url = "#", a.data.type = "url", a.children[0].data.hasActive = !1), "login" === a.data.type && s.user && (a.url = SM.env.logoutURL), a.label = e.Escape.html(a.label);
                        var n = a.data,
                            l = d.superclass.renderNode.call(this, a, i),
                            r = l.getDOMNode(),
                            o = t.querySelector("." + this.classNames.label, r),
                            c = e.SM.PageWidget.Nav.Styles.Base.prototype.classNames;
                        switch (n.hasActive && t.classList(r).add(c.hasActiveNode), n.type) {
                            case "contact":
                                t.classList(o).add(c.contactItem);
                                break;
                            case "login":
                                t.classList(o).add(c.loginItem);
                                break;
                            case "node":
                                n.active && t.classList(r).add(c.activeNode)
                        }
                        return n.openInNewTab && (o.target = "_blank"), l
                    },
                    _afterHostBlur: function() {
                        this._tabbingBlur && this.hide(), delete this._tabbingBlur
                    },
                    _afterHostClick: function(e) {
                        return this._isTablet && e.preventDefault(), d.superclass._afterHostClick.call(this, e)
                    }
                }, {
                    NS: "menu",
                    ATTRS: {
                        tabletStyle: {
                            value: !1
                        }
                    }
                });
            e.namespace("SM.PageWidget.Nav.Styles").Base = e.Base.create("sm-navBase", e.View, [], {
                classNames: {
                    accent: "sm-page-widget-nav-color-accent",
                    accentHover: "sm-page-widget-nav-hover-color-accent",
                    accordion: "sm-page-widget-nav-accordion",
                    activeNode: "sm-page-widget-nav-activepage",
                    capitalizeSubLinks: "sm-page-widget-nav-sublinks-capitalize",
                    capitalizeTopLinks: "sm-page-widget-nav-toplinks-capitalize",
                    center: "sm-page-widget-nav-center",
                    contactItem: "sm-page-widget-nav-contact",
                    "default": "sm-page-widget-nav-color-default",
                    defaultHover: "sm-page-widget-nav-hover-color-default",
                    emphasized: "sm-page-widget-nav-color-emphasized",
                    emphasizedHover: "sm-page-widget-nav-hover-color-emphasized",
                    footer: "sm-page-widget-nav-footer",
                    hasActiveNode: "sm-page-widget-nav-hasactivepage",
                    hasSearchItem: "sm-page-widget-nav-has-search",
                    horizontal: "sm-page-widget-nav-popover sm-page-widget-nav-horizontal",
                    large: "sm-page-widget-nav-l",
                    left: "sm-page-widget-nav-left",
                    loginItem: "sm-page-widget-nav-login",
                    lowercaseSubLinks: "sm-page-widget-nav-sublinks-lowercase",
                    lowercaseTopLinks: "sm-page-widget-nav-toplinks-lowercase",
                    medium: "sm-page-widget-nav-m",
                    mobile: "sm-page-widget-nav-mobile",
                    muted: "sm-page-widget-nav-color-muted",
                    mutedHover: "sm-page-widget-nav-hover-color-muted",
                    regularSubLinks: "sm-page-widget-nav-sublinks-regular",
                    regularTopLinks: "sm-page-widget-nav-toplinks-regular",
                    right: "sm-page-widget-nav-right",
                    separatorSubLinks: "sm-page-widget-nav-sublinks-separator",
                    separatorTopLinks: "sm-page-widget-nav-toplinks-separator",
                    small: "sm-page-widget-nav-s",
                    vertical: "sm-page-widget-nav-popover sm-page-widget-nav-vertical",
                    xlarge: "sm-page-widget-nav-xl",
                    xsmall: "sm-page-widget-nav-xs"
                },
                template: e.Template.Micro.compile('<div class="<%= data.classNames %><% if (data.collapsable) { %> sm-page-widget-nav-collapsible<% } %>"></div>'),
                initializer: function() {
                    this._collapseMobile = this.get("collapseMobile"), this._hasSubitems = this.get("hasSubitems"), this._hasSearchInput = this.get("hasSearchItem"), this._nodeId = s.nodeId, this._mobileMaxWidth = s.responsiveDesign.mobileMaxWidth, this._isTouchDevice = "ontouchstart" in e.config.doc.documentElement || !!window.navigator.msMaxTouchPoints, this._attachNavEvents()
                },
                destructor: function() {
                    new e.EventHandle(this._eventHandles).detach(), this._accordionView && this._accordionView.destroy(), this._accordionView = null
                },
                render: function() {
                    var e, a = this.get("container"),
                        t = this._getClassNames(),
                        i = l.innerWidth <= this._mobileMaxWidth;
                    return (!this.rendered || i && !this._renderedPhone || !i && this._renderedPhone) && (this._accordionView && this._accordionView.destroy(), this._accordionView = null, a.empty().setHTML(this.template({
                        collapsable: this._collapseMobile,
                        classNames: t.join(" ")
                    })), this._menuContainer = e = a.one("div"), this._hasSearchInput && e.addClass(this.classNames.hasSearchItem), i ? (this._renderMobile(), this._renderedPhone = !0) : (this._renderDesktop(), this._renderedPhone = !1)), this.rendered = !0, this
                },
                _attachNavEvents: function() {
                    this._eventHandles = [this.get("container").delegate("click", this._handleMobileHeaderClick, ".sm-page-widget-nav-menu-expand, .sm-page-widget-nav-search-expand", this)]
                },
                _getClassNames: function() {
                    var e = [this.classNames[this.get("style")], this.classNames[this.get("textColor")], this.classNames[this.get("hoverColor")], this.classNames[this.get("textSize")], this.classNames[this.get("alignment")], this.classNames[this.get("topLinkStyle") + "TopLinks"], this.classNames[this.get("subLinkStyle") + "SubLinks"]];
                    return this.get("topLinkSeparator") && e.push(this.classNames.separatorTopLinks), this.get("subLinkSeparator") && e.push(this.classNames.separatorSubLinks), e
                },
                _renderDesktop: function() {
                    this._menuContainer.addClass(this.classNames[this.get("style")]).removeClass(this.classNames.mobile)
                },
                _renderMobile: function() {
                    var e, t, s, l = this._menuContainer,
                        d = this.get("items"),
                        o = this._hasSearchInput,
                        c = this._collapseMobile;
                    if (l.addClass(this.classNames.mobile).removeClass(this.classNames[this.get("style")]), t = i.create(n.mobileMenu({
                            hasSearchItem: o,
                            alignment: "center"
                        })), c && o) {
                        e = [];
                        for (var m = 0, h = d.length; h > m; m++) "searchinput" !== d[m].data.type && e.push(d[m])
                    }
                    if (this._hasSubitems) s = this._accordionView = new r({
                        items: e || d
                    }), c ? (t.one(".sm-page-widget-nav-items").setHTML(s.render().get("container")), l.setHTML(t)) : l.setHTML(s.render().get("container"));
                    else {
                        var g = this.get("textSize"),
                            p = d,
                            v = i.create(n.popoverItemsContainer({
                                orientation: "vertical"
                            }));
                        c && o && (p = e), a.forEach(p, function(e) {
                            var a = i.create(n.popoverItem({
                                type: e.data.type,
                                label: e.label || "",
                                url: e.url || "",
                                target: e.data.openInNewTab ? "_blank" : "",
                                itemClassName: "",
                                size: g,
                                hasChildren: !1
                            }));
                            "node" === e.data.type && e.data.typeInfo.NodeID === this._nodeId && a.addClass(this.classNames.activeNode), v.append(a)
                        }, this), c ? (t.one(".sm-page-widget-nav-items").setHTML(v), l.setHTML(t)) : l.setHTML(v)
                    }
                },
                _handleMobileHeaderClick: function(e) {
                    var a = e.currentTarget.getData("value"),
                        t = this._menuContainer;
                    e.preventDefault(), "expanditems" === a && t.toggleClass("sm-page-widget-nav-mobile-items-visible"), "expandsearch" === a && t.toggleClass("sm-page-widget-nav-mobile-search-visible")
                }
            }, {
                ATTRS: {
                    alignment: {
                        value: "left"
                    },
                    collapseMobile: {
                        value: !1
                    },
                    hasSearchItem: {
                        value: !1
                    },
                    items: {
                        value: null
                    },
                    style: {
                        value: "horizontal"
                    },
                    subLinkSeparator: {
                        value: !1
                    },
                    subLinkStyle: {
                        value: "capitalize"
                    },
                    textColor: {
                        value: "default"
                    },
                    hoverColor: {
                        value: "default"
                    },
                    textSize: {
                        value: "m"
                    },
                    topLinkSeparator: {
                        value: !1
                    },
                    topLinkStyle: {
                        value: "regular"
                    }
                }
            });
            var o = e.Base.create("sm-navAccordion", e.SM.PageWidget.Nav.Styles.Base, [], {
                _renderDesktop: function() {
                    o.superclass._renderDesktop.call(this);
                    var e = this._menuContainer,
                        a = this._accordionView = new r({
                            items: this.get("items"),
                            activeNode: this._nodeId
                        });
                    e.setHTML(a.render().get("container"))
                }
            });
            e.namespace("SM.PageWidget.Nav.Styles").Accordion = o;
            var c = e.Base.create("sm-navFooter", e.SM.PageWidget.Nav.Styles.Base, [], {
                _renderDesktop: function() {
                    c.superclass._renderDesktop.call(this);
                    var e = this._menuContainer,
                        t = this.get("items"),
                        l = i.create("<ul></ul>");
                    a.forEach(t, function(e) {
                        var a = e.url || "",
                            t = e.label || "";
                        "login" === e.data.type && s.user && (a = SM.env.logoutURL), l.append(n.footerItem({
                            classNames: this.classNames,
                            data: e.data,
                            label: t,
                            url: a,
                            numChildren: e.children.length,
                            children: e.children
                        }))
                    }, this), e.setHTML(l)
                }
            });
            e.namespace("SM.PageWidget.Nav.Styles").Footer = c;
            var m = e.Base.create("sm-navStandard", e.SM.PageWidget.Nav.Styles.Base, [], {
                initializer: function() {
                    this._menus = []
                },
                hideAllMenus: function() {
                    for (var e = 0, a = this._menus.length; a > e; e++) this._menus[e].hide()
                },
                _attachNavEvents: function() {
                    m.superclass._attachNavEvents.call(this), this._eventHandles.push(this.get("container").delegate("click", function(e) {
                        var a = e.currentTarget;
                        a && "#" === a.getAttribute("href") && e.preventDefault()
                    }, "a", this))
                },
                _renderDesktop: function() {
                    m.superclass._renderDesktop.call(this);
                    var t = this._menuContainer,
                        s = this.get("style"),
                        l = this.get("items"),
                        r = this.get("textSize"),
                        o = "horizontal" === s,
                        c = this._isTouchDevice,
                        h = o ? ["tl-bl", "tr-br", "bl-tl", "br-tr"] : ["tl-tr", "tr-tl", "bl-tr", "br-tl"],
                        g = i.create(n.popoverItemsContainer({
                            orientation: s
                        }));
                    t.setHTML(g), a.forOwn(l, function(a) {
                        var t, s, l = a.children && a.children.length > 0,
                            o = c && l ? e.clone(a) : a;
                        o.data.active ? s = this.classNames.activeNode : o.data.hasActive && (s = this.classNames.hasActiveNode);
                        var m = i.create(n.popoverItem({
                            hasChildren: l,
                            isTablet: c,
                            itemClassName: s,
                            label: o.label || "",
                            size: r,
                            target: o.data.openInNewTab ? "_blank" : "",
                            type: o.data.type,
                            url: o.url || ""
                        }));
                        l && (t = m.one(">a"), c && (t.setAttribute("href", "#"), o.url && "#" !== o.url && (o.data.active = !1, o.data.hasActive = !1, o.children.unshift({
                            children: [],
                            data: o.data,
                            label: o.label,
                            url: o.url
                        }))), t.plug(d, {
                            alignments: h,
                            container: m.one(">div"),
                            hideOnMouseLeave: !0,
                            items: o.children,
                            showOnClick: c,
                            showOnHover: !c,
                            tabletStyle: c
                        })), g.append(m), t && (t.menu.render(), this._menus.push(t.menu))
                    }, this)
                }
            });
            e.namespace("SM.PageWidget.Nav.Styles").Standard = m
        }()
    }(), SM.currentModule = null
}, "", {
    requires: ["lodash", "plugin", "promise", "template-micro", "sm-dom", "sm-page-nav-login", "sm-menu", "sm-pagewidget-base-view", "sm-accordion-view"]
});
YUI.add("sm-pagewidget-nodes-view", function(e) {
    SM.currentModule = "sm-pagewidget-nodes-view";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        ! function() {
            function i(e) {
                e.resize = !0, i.superclass.constructor.call(this, e)
            }
            var SM = window.SM,
                t = SM["import"]("sm-resource-core"),
                n = "selectedNodes";
            e.namespace("SM.PageWidget").Nodes = e.extend(i, e.SM.PageWidget.BaseView, {
                paginationOptions: {
                    label: "node",
                    labelPlural: "nodes"
                },
                _nodeType: "All",
                _emptyIcon: "Document",
                _emptyMessage: "No Items Found",
                _emptySelected: "No Items Selected",
                render: function() {
                    var i = this,
                        t = i.config.widget.data,
                        o = t.selectedIds,
                        s = i._getTilesConfig(t);
                    s.resources = new e.SM.Models.UserNodeList;
                    return s.autoResize = !1, new e.Promise(function(a) {
                        o && t.nodeSource === n ? (s.pagination = e.SM.Views.Tiles.PAGINATION_TYPES.NONE, i._getSelectedResources(s, o).then(function(e) {
                            s.resources = e, i._precacheImages(s), i._renderTiles(s), a()
                        })) : t.nodeId && t.canHaveChildren ? i._getChildResources(s).then(function(e) {
                            s.resources = e, i._renderTiles(s)
                        }) : i.editMode && (t.nodeSource === n ? i.renderEmpty(i._emptyIcon, i._emptySelected) : i.renderEmpty(i._emptyIcon, i._emptyMessage), i.showParentNode(), a())
                    })
                },
                _checkResize: function() {
                    this._tiles && this._tiles.resize()
                },
                _getChildResources: function(e) {
                    var i = this.config.widget.data,
                        n = "/api/v2/node/" + i.nodeId + "!children";
                    return t.loadUri(n, {
                        data: {
                            Type: this._nodeType,
                            SortMethod: i.sortMethod,
                            SortDirection: i.sortDirection
                        },
                        paginate: !0,
                        start: 1,
                        count: e.paginationOptions.pageSize,
                        expand: {
                            HighlightImage: !0,
                            "HighlightImage.ImageSizeDetails": !0,
                            "HighlightImage.ImageAlbum": !0,
                            "HighlightImage.PointOfInterestCrops": !0
                        }
                    })
                },
                _getSelectedResources: function(e, i) {
                    return t.loadUris(this._getSelectedResourceUris(i), {
                        expand: {
                            HighlightImage: !0,
                            "HighlightImage.ImageSizeDetails": !0,
                            "HighlightImage.ImageAlbum": !0,
                            "HighlightImage.PointOfInterestCrops": !0
                        }
                    })
                },
                _getSelectedResourceUris: function(e) {
                    var i, t = e.length,
                        n = [];
                    for (i = 0; t > i; i++) n.push("/api/v2/node/" + e[i]);
                    return n
                },
                _getPageSize: function(i, t, n) {
                    var o = i.pageSizeType;
                    return "all" === o ? 1e3 : e.SM.Views.Tiles.getPageSize(t, i.tileLayout, {
                        crop: i.imageCrop,
                        imageSize: n,
                        pageSize: "custom" === o ? i.pageSize : null
                    })
                },
                _getTilesConfig: function(i) {
                    var t = this.getContainerWidth(),
                        n = e.SM.Views.Tiles.PAGINATION_TYPES,
                        o = i.paginationType || n.INFINITE;
                    return (!o || this.editMode && o === n.INFINITE) && (o = n.NONE), {
                        dataMap: {
                            Title: "Name",
                            Url: "WebUri",
                            Caption: function() {
                                return ""
                            }
                        },
                        layout: i.tileLayout,
                        pagination: o,
                        spacing: i.tileSpacing,
                        parentNode: this.container,
                        layoutOptions: {
                            containerWidth: t,
                            imageCrop: i.imageCrop,
                            imageSize: i.imageSize,
                            showInfo: i.tileInfo,
                            infoHover: i.tileInfoHover,
                            spacing: i.tileSpacing,
                            varyHeight: i.varyHeight,
                            showType: i.tileIcon,
                            infoAlignment: i.infoAlignment
                        },
                        paginationOptions: e.merge({
                            pageSize: this._getPageSize(i, t, i.imageSize)
                        }, this.paginationOptions)
                    }
                },
                _renderTiles: function(i) {
                    var t = i.resources;
                    t.totalResources || t.length ? (this._tiles = new e.SM.Views.Tiles(i), this._tiles.render(), this.showParentNode()) : this.editMode ? (this.renderEmpty(this._emptyIcon, this._emptyMessage), this.showParentNode()) : this.hideColumnNode(), SM.env.loggedInUser && SM.env.loggedInUser.isAdmin && (e.publish("widget-loaded", {
                        broadcast: 2
                    }), e.fire("widget-loaded", {
                        name: "nodes"
                    }))
                }
            })
        }()
    }(), SM.currentModule = null
}, "", {
    requires: ["promise", "sm-pagewidget-base-view", "sm-album-model", "sm-image-model", "sm-models-usernode", "sm-tiles-view"]
});
YUI.add("sm-pagewidget-pages-view", function(e) {
    SM.currentModule = "sm-pagewidget-pages-view";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        ! function() {
            function s(e) {
                s.superclass.constructor.call(this, e)
            }
            var a = e.SM.PageWidget;
            e.namespace("SM.PageWidget").Pages = e.extend(s, a.Nodes, {
                paginationOptions: e.merge(a.Nodes.prototype.paginationOptions, {
                    label: "page",
                    labelPlural: "pages"
                }),
                _nodeType: "Page",
                _emptyIcon: "Document",
                _emptyMessage: "No Pages Found",
                _emptySelected: "No Pages Selected"
            })
        }()
    }(), SM.currentModule = null
}, "", {
    requires: ["sm-album-model", "sm-image-model", "sm-models-usernode", "sm-pagewidget-base-view", "sm-pagewidget-nodes-view", "sm-tiles-view"]
});
YUI.add("sm-pagewidget-profile-view", function(e) {
    SM.currentModule = "sm-pagewidget-profile-view";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        ! function() {
            function t() {
                o.nav.profile.showProfileOverlay(o.owner.nickName)
            }
            var i = SM["import"]("sm-dom"),
                o = SM["import"]("sm-page"),
                n = SM["import"]("react"),
                a = SM["import"]("react-dom"),
                r = SM["import"]("sm-resource-core"),
                s = function(s) {
                    function l(e) {
                        return babelHelpers.classCallCheck(this, l), e.resize = !0, e.forceResize = !0, babelHelpers.possibleConstructorReturn(this, (l.__proto__ || Object.getPrototypeOf(l)).call(this, e))
                    }
                    return babelHelpers.inherits(l, s), babelHelpers.createClass(l, [{
                        key: "destroy",
                        value: function() {
                            babelHelpers.get(l.prototype.__proto__ || Object.getPrototypeOf(l.prototype), "destroy", this).call(this), a.unmountComponentAtNode(this._containerDOMNode)
                        }
                    }, {
                        key: "init",
                        value: function(e) {
                            babelHelpers.get(l.prototype.__proto__ || Object.getPrototypeOf(l.prototype), "init", this).call(this, e), this._createResources(), this._containerDOMNode = this.container.getDOMNode()
                        }
                    }, {
                        key: "render",
                        value: function() {
                            var e = this,
                                i = this.config.widget.data,
                                r = i.hideBioImage,
                                s = i.hideCoverImage,
                                l = i.iconColor,
                                c = i.iconType,
                                m = i.openLinksInNewTab,
                                p = i.showEmail,
                                u = i.socialIcons;
                            return new Promise(function(i) {
                                a.render(n.createElement(exports._layoutComponent, {
                                    bioImage: e._bioImageResource,
                                    containerWidth: e.getContainerWidth(),
                                    coverImage: e._coverImageResource,
                                    descriptionText: e._getDescriptionText(),
                                    displayName: e._getDisplayName(),
                                    hideBioImage: r,
                                    hideCoverImage: s,
                                    iconColor: l,
                                    iconType: c,
                                    isOwner: o.isOwnerOrAdmin(),
                                    onSelectCoverClick: t,
                                    onContactEmailClick: e._handleContactEmailClick.bind(e),
                                    openLinksInNewTab: m,
                                    showEmail: p,
                                    socialIcons: u
                                }), e._containerDOMNode, i)
                            })
                        }
                    }, {
                        key: "_checkResize",
                        value: function() {
                            var e = this;
                            this._reRendering || (this._reRendering = !0, this.render().then(function() {
                                e._reRendering = !1
                            }))
                        }
                    }, {
                        key: "_handleContactEmailClick",
                        value: function(t) {
                            t.preventDefault();
                            var n = o.owner,
                                a = new e.SM.ProContactOverlay({
                                    userNickname: n.nickName,
                                    displayName: n.profileName || n.siteName || n.nickName
                                }).render(i.doc.body);
                            a.show()
                        }
                    }, {
                        key: "_createResources",
                        value: function() {
                            var e = this.config.widget.data,
                                t = e.hideBioImage,
                                i = e.hideCoverImage,
                                o = e.resourceData;
                            if (o.userProfile) {
                                this._usingProfile = !0;
                                var n = this._profileResource = r.loadLocal(o.userProfile);
                                t || (this._bioImageResource = n.getExpansion("BioImage")), i || (this._coverImageResource = n.getExpansion("CoverImage"))
                            } else o.coverImage && (this._coverImageResource = r.loadLocal(o.coverImage)), o.bioImage && (this._bioImageResource = r.loadLocal(o.bioImage))
                        }
                    }, {
                        key: "_getDescriptionText",
                        value: function() {
                            return this._usingProfile ? this._profileResource.get("BioText") : this.config.widget.data.displayText
                        }
                    }, {
                        key: "_getDisplayName",
                        value: function() {
                            return this._usingProfile ? this._profileResource.get("DisplayName") : this.config.widget.data.displayName
                        }
                    }]), l
                }(SM["import"]("sm-pagewidget-base-view"));
            e.namespace("SM.PageWidget").Profile = module.exports = exports = s
        }(), ! function() {
            function e(e, t) {
                var i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : l.MAX_SIZE,
                    o = new l(e.getExpansion("ImageSizeDetails")),
                    n = o.cover(t, i);
                return {
                    height: n.DisplayHeight,
                    url: n.Url,
                    width: n.DisplayWidth
                }
            }

            function t(e) {
                var t = c.responsiveDesign.mobileMaxWidth,
                    i = k;
                return e > t && _ >= e ? i = I : t >= e && (i = S), i
            }

            function i(e, t) {
                var i = e[t];
                if (i) return i.isSmugMugResource ? void 0 === i.getExpansion("ImageSizeDetails") ? p.error("ProfileBlock", {
                    message: "'" + t + "' must have ImageSizeDetails expanded.",
                    image: i
                }) : void 0 : p.error("ProfileBlock", {
                    message: "'" + t + "' must be a Resource instance representing an Image or AlbumImage.",
                    image: i
                })
            }
            var o = SM["import"]("lodash"),
                n = SM["import"]("sm-component-button"),
                a = SM["import"]("sm-dom"),
                r = SM["import"]("sm-component-icon"),
                s = SM["import"]("sm-component-image"),
                l = SM["import"]("sm-image-sizes"),
                c = SM["import"]("sm-page"),
                m = SM["import"]("react"),
                p = SM["import"]("sm-smuglog"),
                u = SM["import"]("sm-tappable"),
                d = a.win,
                g = "Link",
                h = 3,
                v = 2,
                f = 4,
                y = 150,
                b = 100,
                C = 72,
                _ = 800,
                k = "normal",
                I = "compact",
                S = "mobile",
                E = function(i) {
                    function l(e) {
                        babelHelpers.classCallCheck(this, l);
                        var t = babelHelpers.possibleConstructorReturn(this, (l.__proto__ || Object.getPrototypeOf(l)).call(this, e));
                        return t.state = {
                            size: k,
                            socialExpanded: !1
                        }, t
                    }
                    return babelHelpers.inherits(l, i), babelHelpers.createClass(l, [{
                        key: "componentDidMount",
                        value: function() {
                            this._clickHandler = a.addEventListener(a.doc.body, "click", this._handleBodyClick, this), this._setMaxHeights()
                        }
                    }, {
                        key: "componentDidUpdate",
                        value: function() {
                            this._setMaxHeights()
                        }
                    }, {
                        key: "componentWillMount",
                        value: function() {
                            this.setState({
                                size: t(this.props.containerWidth)
                            })
                        }
                    }, {
                        key: "componentWillReceiveProps",
                        value: function(e) {
                            this.setState({
                                size: t(e.containerWidth)
                            })
                        }
                    }, {
                        key: "componentWillUnmount",
                        value: function() {
                            a.removeEventListener(this._clickHandler)
                        }
                    }, {
                        key: "render",
                        value: function() {
                            var e = this.state,
                                t = e.size,
                                i = e.nameMaxHeight,
                                o = this.renderBioImage(),
                                n = this.renderCoverImage(),
                                a = this.renderSocialIcons(),
                                r = void 0;
                            n ? (r = "visible", this._emptyCover && (r = "empty")) : r = "none";
                            var s = void 0;
                            return o ? (s = "visible", this._emptyBioImage && (s = "empty")) : s = "none", m.createElement("div", {
                                className: "sm-page-widget-profile-v2-container",
                                "data-layout-bioimage": s,
                                "data-layout-coverimage": r,
                                "data-layout-size": t,
                                "data-layout-social": a ? "" : null
                            }, n, m.createElement("div", {
                                className: "sm-page-widget-profile-v2-content"
                            }, o, m.createElement("div", {
                                className: "sm-page-widget-profile-v2-text"
                            }, m.createElement("h1", {
                                className: "sm-page-widget-profile-v2-name",
                                ref: "displayName",
                                style: {
                                    maxHeight: i
                                }
                            }, this.props.displayName), this.renderDescription()), t !== S && a), t === S && a)
                        }
                    }, {
                        key: "renderBioImage",
                        value: function() {
                            var t = this.props,
                                i = t.bioImage,
                                o = t.hideBioImage,
                                n = t.isOwner,
                                a = void 0;
                            if (!(!i && !n || n && o)) {
                                if (i) {
                                    var l = y,
                                        c = this.state.size;
                                    c === I ? l = b : c === S && (l = C);
                                    var p = e(i, l, l);
                                    a = i.get("Protected") ? m.createElement(s.BackgroundImage, {
                                        src: p,
                                        style: {
                                            backgroundPosition: "center",
                                            backgroundSize: "cover",
                                            height: l
                                        },
                                        processing: i.get("Processing")
                                    }) : m.createElement(s.CroppedImage, {
                                        aspectRatio: "1x1",
                                        src: p,
                                        processing: i.get("Processing")
                                    })
                                } else a = m.createElement(r, {
                                    icon: "User"
                                }), this._emptyBioImage = !0;
                                return m.createElement("div", {
                                    className: "sm-page-widget-profile-v2-biophoto",
                                    "data-empty": i ? null : ""
                                }, a)
                            }
                        }
                    }, {
                        key: "renderCollapsedSocialIcons",
                        value: function(e) {
                            var t = this;
                            return m.createElement("ul", {
                                className: "sm-page-widget-profile-v2-social-dropdown",
                                "data-expanded": this.state.socialExpanded ? "" : null
                            }, e.map(function(e) {
                                return t.renderSingleSocialIcon(e)
                            }))
                        }
                    }, {
                        key: "renderCoverImage",
                        value: function() {
                            var t = this.props,
                                i = t.containerWidth,
                                o = t.coverImage,
                                a = t.hideCoverImage,
                                l = t.isOwner;
                            if (!(!o && !l || l && a)) {
                                var c = this.state.size === S,
                                    p = Math.ceil(i * (c ? 2 / 3 : 1 / 3)),
                                    u = void 0;
                                if (o) {
                                    var d = e(o, i, p);
                                    u = o.get("Protected") ? m.createElement(s.BackgroundImage, {
                                        src: d,
                                        style: {
                                            backgroundPosition: "center",
                                            backgroundSize: "cover",
                                            height: p
                                        },
                                        processing: o.get("Processing")
                                    }) : m.createElement(s.CroppedImage, {
                                        aspectRatio: c ? "3x2" : "3x1",
                                        src: d,
                                        processing: o.get("Processing"),
                                        upscale: !0
                                    })
                                } else {
                                    var g = void 0;
                                    g = c ? m.createElement("div", null, "Your Cover Photo can be set in your Profile.") : m.createElement("div", null, m.createElement("span", null, "Your Cover Photo can be set in"), m.createElement(n, {
                                        className: "sm-page-widget-profile-v2-set-coverphoto",
                                        noChrome: !0,
                                        onClick: this.props.onSelectCoverClick
                                    }, "your Profile")), u = m.createElement("div", null, m.createElement("div", {
                                        className: "sm-page-widget-profile-v2-coverimage-placeholder"
                                    }, m.createElement(r, {
                                        icon: "Image"
                                    }), g))
                                }
                                return this._emptyCover = !o, m.createElement("div", {
                                    className: "sm-page-widget-profile-v2-coverimage"
                                }, u)
                            }
                        }
                    }, {
                        key: "renderDescription",
                        value: function() {
                            var e = this.props.descriptionText;
                            return e ? m.createElement("div", {
                                className: "sm-page-widget-profile-v2-description",
                                dangerouslySetInnerHTML: {
                                    __html: e
                                },
                                ref: "description",
                                style: {
                                    maxHeight: this.state.descriptionMaxHeight
                                }
                            }) : null
                        }
                    }, {
                        key: "renderSingleSocialIcon",
                        value: function(e) {
                            var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : !1,
                                i = e.icon,
                                o = e.name,
                                a = e.url,
                                s = this.props,
                                l = s.iconColor,
                                c = s.openLinksInNewTab,
                                p = s.onContactEmailClick;
                            if (a && "http://" !== a) {
                                o = o.toLowerCase();
                                var u = void 0;
                                return u = i === g && "official" === l ? "submit" : this._getButtonSkin(), m.createElement("li", {
                                    "data-service-name": o,
                                    key: "icon-" + o
                                }, m.createElement("a", {
                                    href: a,
                                    target: c ? "_blank" : null,
                                    onClick: "mail" === o ? p : function() {}
                                }, m.createElement(n, {
                                    "data-primary": t ? "" : null,
                                    noChrome: this._socialButtonsNoChrome(),
                                    skin: u
                                }, m.createElement(r, {
                                    icon: i
                                }))))
                            }
                        }
                    }, {
                        key: "renderSocialIcons",
                        value: function() {
                            var e = this,
                                t = this.props,
                                i = t.iconColor,
                                o = t.iconType,
                                a = t.socialIcons,
                                s = (t.showEmail, t.onContactEmailClick, a && a.length);
                            if (a && s) {
                                var l = void 0,
                                    c = void 0;
                                return this.state.size === S ? (c = !0, l = a.slice(), a = []) : s > f && (c = !0, l = a.slice(f - 1), a = a.slice(0, f - 1)), m.createElement("div", {
                                    className: "sm-page-widget-profile-v2-social-container",
                                    "data-icon-color": i,
                                    "data-icon-type": o,
                                    ref: "socialContainer"
                                }, m.createElement("ul", {
                                    className: "sm-page-widget-profile-v2-social-list"
                                }, a.map(function(t) {
                                    return e.renderSingleSocialIcon(t, !0)
                                }), c && m.createElement("li", null, m.createElement(u, null, m.createElement(n, {
                                    "data-primary": "",
                                    noChrome: this._socialButtonsNoChrome(),
                                    onClick: this._handleSocialExpandClick.bind(this),
                                    onTap: this._handleSocialExpandClick.bind(this),
                                    skin: "official" === i ? "submit" : this._getButtonSkin(),
                                    title: "See more social services",
                                    value: "profile-social-expand"
                                }, m.createElement(r, {
                                    icon: "Ellipsis"
                                }))))), c && this.renderCollapsedSocialIcons(l))
                            }
                        }
                    }, {
                        key: "_getButtonSkin",
                        value: function() {
                            var e = this.props.iconColor;
                            return "official" === e || "none" === e ? e = "default" : "primary" === e && (e = "submit"), e
                        }
                    }, {
                        key: "_handleBodyClick",
                        value: function(e) {
                            var t = e.target;
                            a.closest(t, '.sm-button[data-value="profile-social-expand"]') || this.setState({
                                socialExpanded: !1
                            })
                        }
                    }, {
                        key: "_handleSocialExpandClick",
                        value: function() {
                            this.setState({
                                socialExpanded: !this.state.socialExpanded
                            })
                        }
                    }, {
                        key: "_setMaxHeights",
                        value: function() {
                            var e = this.refs.displayName,
                                t = {},
                                i = function(e) {
                                    var t = d.getComputedStyle(e),
                                        i = t["line-height"];
                                    return -1 === i.indexOf("px") ? i * parseInt(t["font-size"], 10) : parseInt(i, 10)
                                };
                            if (e) {
                                var n = i(e) * v;
                                n && (t.nameMaxHeight = n)
                            }
                            var a = this.refs.description;
                            if (a) {
                                var r = i(a) * h;
                                r && (t.descriptionMaxHeight = r)
                            }
                            o.isEmpty(t) || this.setState(t)
                        }
                    }, {
                        key: "_socialButtonsNoChrome",
                        value: function() {
                            return "icon" === this.props.iconType
                        }
                    }]), l
                }(SM["import"]("sm-component-pure-render"));
            E.MAX_PRIMARY_ICONS = f, E.SIZE_COMPACT = I, E.SIZE_MOBILE = S, E.SIZE_NORMAL = k;
            var M = m.PropTypes;
            E.propTypes = {
                bioImage: i,
                containerWidth: M.number.isRequired,
                coverImage: i,
                descriptionText: M.string,
                displayName: M.string,
                hideBioImage: M.bool,
                hideCoverImage: M.bool,
                iconColor: M.oneOf(["accent", "default", "official", "primary"]),
                iconType: M.oneOf(["button-circle", "button-square", "icon"]),
                isOwner: M.bool,
                onSelectCoverClick: M.func,
                openLinksInNewTab: M.bool,
                socialIcons: M.arrayOf(M.shape({
                    icon: M.string.isRequired,
                    name: M.string.isRequired,
                    url: M.string.isRequired
                }))
            }, E.defaultProps = {
                hideBioImage: !1,
                hideCoverImage: !1,
                iconColor: "default",
                iconType: "button-square",
                isOwner: !1,
                onSelectCoverClick: function() {},
                openLinksInNewTab: !1
            }, exports._layoutComponent = E
        }()
    }(), SM.currentModule = null
}, "", {
    requires: ["lodash", "react", "react-dom", "sm", "sm-component-button", "sm-component-icon", "sm-component-image", "sm-component-pure-render", "sm-dom", "sm-image-sizes", "sm-page", "sm-pagewidget-base-view", "sm-procontact-overlay", "sm-resource-album-image", "sm-smuglog", "sm-tappable"]
});
YUI.add("sm-pagewidget-search-view", function(e) {
    SM.currentModule = "sm-pagewidget-search-view";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";

        function t(e) {
            e || (e = {});
            var t = !0,
                r = null,
                n = this.state.query;
            return e.onSubmit && "" === n.trim() ? (r = "Please enter a search term.", t = !1) : this.props.requireNumeric && isNaN(n) && (r = "Please enter a number.", t = !1), this.setState({
                error: r
            }), t
        }

        function r(e) {
            return e || (e = this.state.query), this.props.queryTemplate.replace("{query}", e)
        }

        function n(e) {
            e || (e = this.state.query);
            var t = this.props.queryLength;
            return !t || e.length >= t ? e : new Array(t - e.length + 1).join("0") + e
        }

        function i(e) {
            d.call(this, e)
        }
        var a = SM["import"]("lodash"),
            o = SM["import"]("sm-component-button"),
            s = (SM["import"]("sm-dom"), SM["import"]("react")),
            c = SM["import"]("react-dom"),
            l = SM["import"]("sm-uri").stringifyQuery,
            u = SM["import"]("sm-component-textbox"),
            p = s.PropTypes,
            m = s.createClass({
                displayName: "SearchForm",
                mixins: [s.addons.PureRenderMixin],
                propTypes: {
                    alignment: p.oneOf(["left", "center", "right"]),
                    category: p.oneOf(["folders", "galleries", "pages", "photos", "videos"]),
                    displaySearchButton: p.bool,
                    nickName: p.string.isRequired,
                    onPickerButtonClick: p.func,
                    onSubmit: p.func,
                    pickerButtonText: p.string,
                    pickerLabel: p.string,
                    placeholder: p.string,
                    queryLabel: p.string,
                    queryLength: p.number,
                    queryTemplate: p.string,
                    requireNumeric: p.bool,
                    scopeType: p.oneOf(["custom", "default", "entire", "forced-entire", "visitor"]),
                    scopeValue: p.node.isRequired,
                    searchButtonText: p.string
                },
                getDefaultProps: function() {
                    return {
                        alignment: "left",
                        category: "photos",
                        displaySearchButton: !0,
                        pickerButtonText: "Browse",
                        requireNumeric: !1,
                        scopeType: "default",
                        searchButtonText: "Search"
                    }
                },
                getInitialState: function() {
                    return {
                        error: null,
                        query: ""
                    }
                },
                render: function() {
                    var e = this.props,
                        t = "" === this.state.query.trim();
                    if (e.displaySearchButton) var r = s.createElement(o, {
                        className: "sm-search-form-submit",
                        disabled: t,
                        size: "small",
                        skin: t ? "default" : "accent",
                        type: "submit",
                        value: "search"
                    }, e.searchButtonText);
                    return s.createElement("div", {
                        style: {
                            textAlign: e.alignment
                        }
                    }, s.createElement("form", {
                        action: "/search/",
                        className: "sm-search-form",
                        "data-scopetype": e.scopeType,
                        method: "get",
                        onSubmit: this._onSubmit,
                        ref: "form"
                    }, s.createElement(u, {
                        name: "n",
                        type: "hidden",
                        value: e.nickName
                    }), s.createElement(u, {
                        name: "scope",
                        type: "hidden",
                        value: "node"
                    }), s.createElement(u, {
                        name: "scopeValue",
                        type: "hidden",
                        value: e.scopeValue
                    }), s.createElement(u, {
                        name: "c",
                        type: "hidden",
                        value: e.category
                    }), "visitor" === e.scopeType ? this._renderPickerButton() : null, this._renderSearchBox(), r))
                },
                _renderPickerButton: function() {
                    var e = this.props,
                        t = s.createElement(o, {
                            className: "sm-search-form-picker-launch",
                            onClick: e.onPickerButtonClick,
                            size: "small",
                            skin: "accent",
                            value: "launchPicker"
                        }, e.pickerButtonText);
                    return e.pickerLabel ? s.createElement("label", null, e.pickerLabel, t) : t
                },
                _renderSearchBox: function() {
                    var e = this.props,
                        t = this.state.error,
                        r = s.createElement("span", {
                            className: "sm-search-form-input-container"
                        }, s.createElement(u, {
                            className: "sm-search-form-input",
                            error: !!t,
                            name: "q",
                            onBlur: this._onInputBlur,
                            onChange: this._onInputChange,
                            placeholder: e.placeholder || "search for " + e.category + "...",
                            type: "text",
                            value: this.state.query
                        }), t ? s.createElement("div", {
                            className: "sm-form-field-error-msg"
                        }, t) : null);
                    return e.queryLabel ? s.createElement("label", null, e.queryLabel, r) : r
                },
                _onInputBlur: function() {
                    t.call(this)
                },
                _onInputChange: function(e) {
                    this.setState({
                        query: e.target.value
                    })
                },
                _onSubmit: function(e) {
                    var i = this;
                    if (!t.call(this, {
                            onSubmit: !0
                        })) return void e.preventDefault();
                    if (!this._resubmitting) {
                        var a, o = this.props;
                        if (o.requireNumeric && o.queryLength && (a = n.call(this, a)), o.queryTemplate && (a = r.call(this, a)), o.onSubmit) {
                            e.preventDefault();
                            var s = e.currentTarget.elements;
                            o.onSubmit({
                                c: s.c.value,
                                n: s.n.value,
                                scope: s.scope.value,
                                scopeValue: s.scopeValue.value,
                                q: a || this.state.query
                            })
                        } else a && (e.preventDefault(), this.setState({
                            query: a
                        }, function() {
                            i._resubmitting = !0, c.findDOMNode(i.refs.form).submit()
                        }))
                    }
                }
            }),
            d = e.SM.PageWidget.BaseView,
            h = d.prototype;
        i.prototype = a.create(h, {
            constructor: i,
            destroy: function() {
                h.destroy.call(this), c.unmountComponentAtNode(this.container.getDOMNode())
            },
            render: function() {
                this._renderComponent()
            },
            _getPickerConfig: function() {
                if (!this._pickerConfig) {
                    var e = this.config.widget.data;
                    this._pickerConfig = {
                        closeOnPasswordCancel: !0,
                        disableBreadCrumbs: !0,
                        disableEmpty: 1,
                        disablePages: 1,
                        disableThumbOverflow: !0,
                        limit: 1,
                        nickName: e.nickName,
                        startPath: e.visitorStartPath,
                        title: "Select a Folder or Gallery"
                    }
                }
                return this._pickerConfig
            },
            _handlePickerClose: function(e) {
                if ("sm-picker:pickerCancel" !== e.pickType && e.selectedData.length) {
                    var t = e.selectedData[0].typeInfo,
                        r = this._pickerConfig.preSelected = t.NodeID;
                    this._renderComponent({
                        pickerButtonText: "Selected: " + t.Name,
                        scopeValue: r
                    })
                }
            },
            _loadAndShowPicker: function(t) {
                var r = e.one(t.currentTarget),
                    n = this,
                    i = this._getPickerConfig();
                SM.load("sm-picker-plugin").then(function() {
                    r.pickerplugin || (r.plug(e.SM.Plugin.Picker, {
                        pickerMode: e.SM.Picker.MODE_NODE,
                        pickerConfig: i,
                        skinned: !0,
                        triggerMode: !0
                    }), n._eventHandlers.push(r.pickerplugin.after("hidingPicker", n._handlePickerClose, n))), r.pickerplugin.showPicker(i)
                })
            },
            _renderComponent: function(e) {
                var t = a.assign({}, this.config.widget.data, e);
                if ("keyword" === t.resultsLocation || t.redirectUrlBase) var r = a.bind(this._onFormSubmit, this);
                c.render(s.createElement(m, {
                    alignment: t.alignment,
                    category: t.category,
                    displaySearchButton: t.displaySearchButton,
                    nickName: t.nickName,
                    onPickerButtonClick: a.bind(this._loadAndShowPicker, this),
                    onSubmit: r,
                    pickerButtonText: t.pickerButtonText,
                    pickerLabel: t.pickerLabel,
                    placeholder: t.placeholder,
                    queryLabel: t.queryLabel,
                    queryLength: t.queryLength,
                    queryTemplate: t.queryTemplate,
                    requireNumeric: t.requireNumeric,
                    scopeType: t.scopeType,
                    scopeValue: t.scopeValue,
                    searchButtonText: t.searchButtonText,
                    visitorScoped: t.visitorScoped
                }), this.container.getDOMNode())
            },
            _onFormSubmit: function(e) {
                var t, r = e.q,
                    n = e.scopeValue,
                    i = this.config.widget.data;
                "keyword" === i.resultsLocation ? (t = "/keyword/" + (n && "0" !== n ? "n-" + n + "/" : "") + encodeURIComponent(r), i.redirectUrlBase && (t = i.redirectUrlBase + t)) : i.redirectUrlBase && (t = i.redirectUrlBase + "/search/?" + l({
                    c: e.c,
                    n: e.n,
                    scope: e.scope,
                    scopeValue: n,
                    q: r
                })), document.location.href = t
            }
        }), i._form = m, e.namespace("SM.PageWidget").Search = module.exports = i
    }(), SM.currentModule = null
}, "", {
    requires: ["lodash", "react", "react-dom", "sm", "sm-component-button", "sm-component-textbox", "sm-dom", "sm-pagewidget-base-view", "sm-uri"]
});
YUI.add("sm-pagewidget-slideshow-view", function(e) {
    SM.currentModule = "sm-pagewidget-slideshow-view";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        function a(e) {
            a.superclass.constructor.call(this, e)
        }
        e.namespace("SM.PageWidget").Slideshow = e.extend(a, e.SM.PageWidget.BaseView, {
            render: function() {
                var a, s, d, i = this,
                    o = this.config,
                    t = o.widget.data,
                    r = t.galleryData,
                    l = r.galleryType,
                    n = {
                        returnModelList: !0,
                        idCopy: !0
                    },
                    m = e.SM.Models.GalleryImageList,
                    g = !0;
                switch (this.editMode ? (t.autoStart = !1, t.transition = "none") : t.splashImageData && (t.splashImage = new e.SM.Models.Image(t.splashImageData)), l) {
                    case "popular":
                    case "recent":
                        m = e.SM.Models.ImageList, g = !1, n.NickName = r.nickName, n.Limit = 50;
                        break;
                    case "selectedImages":
                        if (!t.selectedImages || !t.selectedImages.length) {
                            d = !0;
                            break
                        }
                        m = e.SM.Models.ImageList, g = !1;
                        break;
                    case "keyword":
                        if (!r.keywords) {
                            d = !0;
                            break
                        }
                        n.keywords = r.keywords || "", n.nickName = r.nickName || "", n.PageNumber = 1, n.PageSize = 40, t.randomize && (n.randomize = +new Date), t.randomize = !1;
                        break;
                    default:
                        if (!r.albumId && !r.albumKey) {
                            d = !0;
                            break
                        }
                        l = "album", n.albumId = r.albumId || 0, n.albumKey = r.albumKey || "", n.PageNumber = 1, n.PageSize = 40, t.randomize && (n.randomize = +new Date), t.randomize = !1
                }
                return d ? void(this.editMode || e.SM.Page.isOwnerLoggedIn() ? (this.renderEmpty("Gallery", "No Photos Found"), this.showParentNode()) : this.hideColumnNode()) : (a = new m, "selectedImages" === l && a.add(t.selectedImages), t.modelList = a, "selectedImages" !== l ? new e.Promise(function(o, l) {
                    a.load({
                        apiCategory: r.galleryType,
                        data: n,
                        prefetchNext: !0,
                        prefetchPrev: !0
                    }, function(r) {
                        r || !a.size() ? d = !0 : (s = new e.SM.Views.Slideshow(t), g && s.plug(e.SM.SlideshowGalleryPlugin), i.container.setHTML(s.get("container")), i._views.push(s), i._loaded = !0, i._slideshow = s), d ? (i.editMode || e.SM.Page.isOwnerLoggedIn() ? (i.renderEmpty("Gallery", "No Photos Found"), i.showParentNode()) : i.hideColumnNode(), r && l(r)) : (i.showParentNode(), s && s.render(), o(s))
                    })
                }) : (this.showParentNode(), s = new e.SM.Views.Slideshow(t), i.container.setHTML(s.get("container")), s.render(), i._views.push(s), i._loaded = !0, i._slideshow = s, void 0))
            }
        })
    }(), SM.currentModule = null
}, "", {
    requires: ["sm-album-model", "sm-flashslideshow", "sm-image-model", "sm-pagewidget-base-view", "sm-slideshow-view", "sm-slideshow-gallery-plugin"]
});
YUI.add("sm-pagewidget-socialbuttons-view", function(t) {
    SM.currentModule = "sm-pagewidget-socialbuttons-view";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        function e(t) {
            e.superclass.constructor.call(this, t)
        }
        var o = t.SM.Facebook.LIKE_BUTTON_OPTIONS,
            n = t.Template.Micro,
            i = t.SM.GooglePlus,
            a = n.compile('<li class="<%== data.serviceName %><% if (data.buttonLayout === "horizontal") { %> yui3-u<% } %>"></li>');
        t.namespace("SM.PageWidget").SocialButtons = t.extend(e, t.SM.PageWidget.BaseView, {
            render: function() {
                var e = this;
                return new t.Promise(function(o) {
                    var n = e.container,
                        i = e.config.widget.data,
                        a = t.Node.create("<ul></ul>"),
                        u = i.buttons.length,
                        r = 0,
                        s = ["align-" + i.alignment, i.buttonLayout, i.countPosition + "-count"];
                    n.setHTML(a).addClass(s.join(" ")), t.Array.each(i.buttons, function(t) {
                        e["_render" + t](a).then(function() {
                            ++r === u && o()
                        })
                    })
                })
            },
            _renderFacebook: function(e) {
                var n, i = this.config.widget.data,
                    u = new t.SM.Facebook;
                return n = e.appendChild(a({
                    buttonLayout: i.buttonLayout,
                    serviceName: "facebook"
                })), u.renderLikeButton(n, {
                    action: o.ACTION.LIKE,
                    colorScheme: o.COLOR_SCHEME.LIGHT,
                    font: o.FONT.ARIAL,
                    href: i.url,
                    layout: "horizontal" === i.countPosition ? o.LAYOUT.BUTTON_COUNT : o.LAYOUT.BOX_COUNT,
                    send: !1,
                    showFaces: !1
                })
            },
            _renderGooglePlus: function(t) {
                var e, o, n = this.config.widget.data;
                return e = t.appendChild(a({
                    buttonLayout: n.buttonLayout,
                    serviceName: "googleplus"
                })), o = "right" === n.alignment && "horizontal" === n.countPosition && "vertical" === n.buttonLayout, i.renderPlusOneButton(e.getDOMNode(), {
                    align: o ? "right" : "left",
                    size: "horizontal" === n.countPosition ? i.PLUSONE_BUTTON_OPTIONS.SIZE.MEDIUM : i.PLUSONE_BUTTON_OPTIONS.SIZE.TALL
                })
            },
            _renderTwitter: function(e) {
                var o, n = this.config.widget.data,
                    i = new t.SM.Twitter;
                return o = e.appendChild(a({
                    buttonLayout: n.buttonLayout,
                    serviceName: "twitter"
                })), i.renderTweetButton(o, {
                    TweetCountPosition: n.countPosition,
                    TweetHashtag: n.tweetHashtag,
                    TweetShowCount: !0,
                    url: n.url
                })
            }
        })
    }(), SM.currentModule = null
}, "", {
    requires: ["sm-facebook", "sm-twitter", "sm-google-plus", "sm-pagewidget-base-view"]
});
YUI.add("sm-pagewidget-video-view", function(e) {
    SM.currentModule = "sm-pagewidget-video-view";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        var i = function(e) {
            e.resize = !0, i.superclass.constructor.call(this, e)
        };
        e.namespace("SM.PageWidget").Video = e.extend(i, e.SM.PageWidget.BaseView, {
            render: function() {
                var i, t, d, o = this.config.widget.data,
                    n = this.container,
                    s = o.size,
                    a = this.editMode ? !1 : o.autoPlay;
                if (o.imageInfo)
                    if (o.imageInfo.IsVideo) {
                        i = this.getContainerWidth(), this._cachedContainerWidth = i, t = new e.SM.Models.Image(o.imageInfo), d = new e.SM.Models.Album(o.albumInfo), s = "auto" === s || s > i ? t.getLargestVideoSizeForContainer(i) : t.getLargestVideoSize(s);
                        var r = t.get("Sizes")[s];
                        this._videoView = new e.SM.Views.Video({
                            model: t,
                            size: s,
                            autoPlay: a,
                            center: o.centerVideo,
                            showAlbumLink: o.showAlbum,
                            canShare: o.showShare,
                            width: Math.min(r.width, i),
                            height: r.height
                        }), n.setHTML(this._videoView.get("container")), this._videoView.render(), this._views.push(this._videoView)
                    } else this.renderEmpty("VideoCamera", "No Video Selected");
                else this.renderEmpty("VideoCamera", "No Video Selected");
                SM.env.loggedInUser && SM.env.loggedInUser.isAdmin && (e.publish("widget-loaded", {
                    broadcast: 2
                }), e.fire("widget-loaded", {
                    name: "video"
                }))
            },
            _checkResize: function(i) {
                if (!this._resizing && window.innerHeight != screen.height) {
                    var t = this.getContainerWidth();
                    e.UA.chrome && this._cachedContainerWidth < t || this._cachedContainerWidth !== t && (this._resizing = !0, this._cachedContainerWidth = t, this._videoView && this._videoView.destroy(), this.render(), this._resizing = !1)
                }
            }
        })
    }(), SM.currentModule = null
}, "", {
    requires: ["sm-album-model", "sm-image-model", "sm-pagewidget-base-view", "sm-video-view"]
});
YUI.add("sm-pagewidget-vimeo-view", function(e) {
    SM.currentModule = "sm-pagewidget-vimeo-view";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: !0
        });
        var t = SM["import"]("react"),
            i = SM["import"]("react-dom"),
            r = SM["import"]("sm-vimeo"),
            s = {
                small: {
                    width: 560,
                    height: 315
                },
                medium: {
                    width: 640,
                    height: 360
                },
                large: {
                    width: 853,
                    height: 480
                },
                xlarge: {
                    width: 1280,
                    height: 720
                }
            },
            a = "scaleToFit",
            d = .56,
            o = function(e) {
                function o(e) {
                    return babelHelpers.classCallCheck(this, o), babelHelpers.possibleConstructorReturn(this, (o.__proto__ || Object.getPrototypeOf(o)).call(this, Object.assign(e, {
                        resize: !0
                    })))
                }
                return babelHelpers.inherits(o, e), babelHelpers.createClass(o, [{
                    key: "render",
                    value: function() {
                        var e = this.container.getDOMNode(),
                            s = this.config.widget.data,
                            a = this._getIframeSize(s.size);
                        s.videoId ? i.render(t.createElement(r, {
                            center: s.centerVideo,
                            id: s.videoId,
                            width: a.width,
                            height: a.height,
                            autoplay: s.autoPlay && !this.editMode
                        }), e) : this.renderEmpty("Vimeo", "No Video Selected")
                    }
                }, {
                    key: "_getIframeSize",
                    value: function(e) {
                        var t = this.container.getDOMNode().clientWidth,
                            i = void 0,
                            r = void 0;
                        return e === a ? (i = t, r = i * d) : (i = s[e].width, r = s[e].height, i > t && (i = t, r = i * d)), this._width = i, {
                            height: r,
                            width: i
                        }
                    }
                }, {
                    key: "_checkResize",
                    value: function() {
                        var e = this.config,
                            t = this._width,
                            i = void 0,
                            r = void 0;
                        this._resizing || (this._resizing = !0, i = this.container, r = this._getIframeSize(e.widget.data.size), i && r.width !== t && this.render(), this._resizing = !1)
                    }
                }]), o
            }(SM["import"]("sm-pagewidget-base-view"));
        e.namespace("SM.PageWidget").Vimeo = o, exports["default"] = o, module.exports = exports["default"]
    }(), SM.currentModule = null
}, "", {
    requires: ["react", "react-dom", "sm", "sm-pagewidget-base-view", "sm-vimeo"]
});
YUI.add("sm-pagewidget-wufoo-view", function(e) {
    SM.currentModule = "sm-pagewidget-wufoo-view";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        var o = "wufoo.com/scripts/embed/form.js",
            r = e.Template.Micro.compile('<div id="wufoo-<%= data.formHash %>">Fill out my <a href="<%= data.formLink %>">online form</a></div>'),
            i = function(e) {
                i.superclass.constructor.call(this, e), this._wufooUrl = ("https:" === document.location.protocol ? "https://secure." : "http://www.") + o
            };
        e.namespace("SM.PageWidget").Wufoo = e.extend(i, e.SM.PageWidget.BaseView, {
            render: function() {
                var o = this.config.widget.data,
                    r = this;
                return o.formLink && o.userName && o.formHash ? new e.Promise(function(i, t) {
                    var n = {
                        async: !0,
                        autoResize: !0,
                        formHash: o.formHash,
                        header: o.hideHeader ? "hide" : "show",
                        resizeDone: function() {
                            r._resolved || (i(), r._resolved = !0)
                        },
                        ssl: !0,
                        userName: o.userName
                    };
                    window.WufooForm ? r._renderForm(n) : e.Get.js(r._wufooUrl, {
                        onSuccess: function() {
                            r._renderForm(n)
                        },
                        onFailure: function() {
                            r._showError("Error loading Wufoo Javascript."), t()
                        }
                    })
                }) : void this._showError("Enter a valid Wufoo shortlink.")
            },
            _renderForm: function(e) {
                var o, i = this.container,
                    t = this.config.widget.data;
                i.setHTML(r({
                    formHash: t.formHash,
                    formLink: t.formLink,
                    showLink: t.showLink
                }));
                try {
                    o = new window.WufooForm, o.initialize(e), o.display()
                } catch (n) {}
            },
            _showError: function(o) {
                "editPage" === e.SM.Page.getMode() && this.renderEmpty("Warning", o)
            }
        })
    }(), SM.currentModule = null
}, "", {
    requires: ["get", "promise", "template-micro", "sm-pagewidget-base-view"]
});
YUI.add("sm-pagewidget-youtube-view", function(e) {
    SM.currentModule = "sm-pagewidget-youtube-view";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        ! function() {
            var t = (SM["import"]("sm-dom"), SM["import"]("react")),
                i = SM["import"]("react-dom"),
                r = SM["import"]("sm-youtube"),
                s = {
                    small: {
                        width: 560,
                        height: 315
                    },
                    medium: {
                        width: 640,
                        height: 360
                    },
                    large: {
                        width: 853,
                        height: 480
                    },
                    xlarge: {
                        width: 1280,
                        height: 720
                    }
                },
                a = "scaleToFit",
                o = .56,
                d = function(e) {
                    function d(e) {
                        return babelHelpers.classCallCheck(this, d), e.resize = !0, babelHelpers.possibleConstructorReturn(this, (d.__proto__ || Object.getPrototypeOf(d)).call(this, e))
                    }
                    return babelHelpers.inherits(d, e), babelHelpers.createClass(d, [{
                        key: "render",
                        value: function() {
                            var e = this.config,
                                s = this.container.getDOMNode(),
                                a = e.widget.data,
                                o = this._getIframeSize(a.size);
                            a.id || a.playlistId ? i.render(t.createElement(r, {
                                center: a.centerVideo,
                                id: a.id,
                                playlistId: a.playlistId,
                                width: o.width,
                                height: o.height,
                                autoplay: a.autoPlay && !this.editMode
                            }), s) : this.renderEmpty("YouTube", "No Video Selected")
                        }
                    }, {
                        key: "_getIframeSize",
                        value: function(e) {
                            var t = this.container.getDOMNode().clientWidth,
                                i = void 0,
                                r = void 0;
                            return e === a ? (i = t, r = parseInt(i * o, 10)) : (i = s[e].width, r = s[e].height, i > t && (i = t, r = parseInt(i * o, 10))), this._width = i, {
                                height: r,
                                width: i
                            }
                        }
                    }, {
                        key: "_checkResize",
                        value: function() {
                            var e = this.config,
                                t = this._width,
                                i = void 0,
                                r = void 0;
                            this._resizing || (this._resizing = !0, i = this.container, r = this._getIframeSize(e.widget.data.size), i && r.width !== t && this.render(), this._resizing = !1)
                        }
                    }]), d
                }(SM["import"]("sm-pagewidget-base-view"));
            e.namespace("SM.PageWidget").YouTube = module.exports = exports = d
        }()
    }(), SM.currentModule = null
}, "", {
    requires: ["react", "react-dom", "sm", "sm-pagewidget-base-view", "sm-youtube"]
});
YUI.add("sm-pagination-view", function(t) {
    SM.currentModule = "sm-pagination-view";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        t.namespace("SM.Views.Pagination").Basic = t.Base.create("sm-pagination-basic", t.View, [], {
            containerTemplate: '<div class="sm-pagination"></div>',
            pagesTemplate: '<%==Y.SM.Templates.button({icon:      "AngleBracketLeftSlim",value:     "left",href:      data.leftHref,skin:      "submit",noChrome:  true,className: "sm-pagination-button-left",disabled:  data.page === 1})%><%==Y.SM.Templates.button({label:    "1",value:    1,skin:     data.page === 1?"submit":"",noChrome: true})%><% if (data.less) { %><span>...</span><% } %><% for (var i=0; i<data.pages.length; i++) { %><%==Y.SM.Templates.button({label:    data.pages[i],value:    data.pages[i],skin:     data.page === data.pages[i]?"submit":"",noChrome: true})%><% } %><% if (data.more) { %><span>...</span><% } %><%==Y.SM.Templates.button({label:    data.total,value:    data.total,skin:     data.page === data.total?"submit":"",noChrome: true})%><%==Y.SM.Templates.button({icon:      "AngleBracketRightSlim",value:     "right",href:      data.rightHref,skin:      "submit",noChrome:  true,className: "sm-pagination-button-right",disabled:  data.page === data.total})%>',
            initializer: function() {
                this._attachEvents()
            },
            destructor: function() {
                this._detachEvents()
            },
            render: function() {
                var t, e = this.get("container"),
                    a = this._compileTemplates(),
                    i = this.get("total"),
                    n = this.get("page"),
                    s = [],
                    r = !1,
                    o = !1;
                if (6 >= i)
                    for (t = 2; i > t; t++) s.push(t);
                else if (5 >= n && i > 6)
                    for (t = 2; 5 >= t && i > t; t++) s.push(t), o = !0;
                else n >= i - 4 ? (s.push(i - 4, i - 3, i - 2, i - 1), r = !0) : (s.push(n - 1, n, n + 1), o = !0, r = !0);
                e.setHTML(a.pages({
                    total: i,
                    page: n,
                    pages: s,
                    less: r,
                    more: o,
                    leftHref: this.get("leftHref") || "#",
                    rightHref: this.get("rightHref") || "#"
                })), this._leftButton = e.one(".sm-pagination-button-left"), this._rightButton = e.one(".sm-pagination-button-right")
            },
            _attachEvents: function() {
                var t = this.get("container");
                this._detachEvents(), this._eventHandles = [], this._eventHandles.push(this.after("pageChange", this._afterPageChange, this), this.after("leftHrefChange", this._afterHrefChange, this, "left"), this.after("rightHrefChange", this._afterHrefChange, this, "right"), t.delegate("click", this._onButtonClick, ".sm-button", this))
            },
            _detachEvents: function() {
                t.Array.each(this._eventHandles, function(t) {
                    t.detach()
                })
            },
            _compileTemplates: function() {
                return this._templates || (this._templates = {
                    pages: t.Template.Micro.compile(this.pagesTemplate)
                }), this._templates
            },
            _onButtonClick: function(t) {
                var e, a = t.currentTarget,
                    i = a.getData("value"),
                    n = this.get("page"),
                    s = this.get("total");
                t.preventDefault(), e = "left" === i ? n - 1 : "right" === i ? n + 1 : parseInt(i, 10), n !== e && e > 0 && s >= e && (this.set("page", e, {
                    src: "button"
                }), this.get("autoReRender") && this.render())
            },
            _afterPageChange: function(t) {
                "button" !== t.src && this.render()
            },
            _afterHrefChange: function(t, e) {
                "left" === e && this._leftButton ? this._leftButton.setAttribute("href", t.newVal) : "right" === e && this._rightButton && this._rightButton.setAttribute("href", t.newVal)
            }
        }, {
            ATTRS: {
                total: {},
                page: {
                    value: 1,
                    validator: function(t) {
                        var e = this.get("total");
                        return t > 0 && e >= t
                    }
                },
                leftHref: {},
                rightHref: {},
                autoReRender: {
                    value: !0
                }
            }
        })
    }(), SM.currentModule = null
}, "", {
    requires: ["template-micro", "view", "sm-image-buttons-deprecated"]
});
YUI.add("sm-panel-alert", function(e) {
    SM.currentModule = "sm-panel-alert";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        e.namespace("SM.Panel").Alert = e.Base.create("panel-alert", e.SM.Panel, [], {
            messageTemplate: '<div class="yui3-g"><div class="sm-panel-icon yui3-u-1-6"><span class="sm-fonticon sm-fonticon-<%= data.icon %>"></span></div><div class="sm-panel-message yui3-u-5-6"><% if (data.rawMessage) { %><%== data.rawMessage %><% } else { %><%= data.message %><% } %></div></div>',
            initializer: function(e) {
                this._eventHandles = [], e.width || this.set("width", 336), this.after("render", this._onceRender, this)
            },
            destructor: function() {
                e.Array.each(this._eventHandles, function(e) {
                    e.detach()
                })
            },
            _onceRender: function() {
                var t, a, s = this.get("boundingBox"),
                    n = this.get("type"),
                    i = this.get("message"),
                    l = e.Template.Micro.compile(this.messageTemplate);
                switch (n) {
                    case "error":
                        a = "XCrossEncircled";
                        break;
                    case "info":
                        a = "InfoEncircled";
                        break;
                    default:
                        a = "Warning"
                }
                s.addClass(this.getClassName("alert")), s.addClass(this.getClassName("alert-" + n)), this.setStdModContent(e.WidgetStdMod.BODY, l({
                    icon: a,
                    message: i,
                    rawMessage: this.get("rawMessage")
                })), t = e.Node.create(e.SM.Templates.button({
                    label: this.get("buttonLabel"),
                    skin: "submit"
                })), this.setStdModContent(e.WidgetStdMod.FOOTER, t), this._eventHandles.push(t.on("click", this._onButtonClick, this)), this.centered()
            },
            _onButtonClick: function(e) {
                e.preventDefault(), this.hide()
            }
        }, {
            CSS_PREFIX: "sm-panel",
            ATTRS: {
                type: {
                    value: "warning"
                },
                message: {},
                buttonLabel: {
                    value: "OK"
                },
                modal: {
                    value: !0,
                    readOnly: !0
                },
                hideOn: {
                    value: [],
                    readOnly: !0
                },
                centered: {
                    value: !0,
                    readOnly: !0
                },
                rawMessage: {}
            }
        }), e.SM.Panel.alert = function(t, a) {
            return a = e.merge(a, {
                message: t,
                render: !0
            }), new e.Promise(function(t) {
                var s = new e.SM.Panel.Alert(a);
                s.on("visibleChange", function(e) {
                    e.newVal || (s.destroy(), t())
                })
            })
        }
    }(), SM.currentModule = null
}, "", {
    requires: ["template-micro", "sm-panel", "sm-templates-button"]
});
YUI.add("sm-panel-confirm", function(e) {
    SM.currentModule = "sm-panel-confirm";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        var t = {
            warning: "Warning",
            error: "XCross",
            info: "InfoEncircled"
        };
        e.namespace("SM.Panel").Confirm = e.Base.create("panel-confirm", e.SM.Panel, [], {
            messageTemplate: '<p class="sm-panel-confirm-message"><%= data.message %></p>',
            initializer: function(e) {
                this._eventHandles = [], e.width || this.set("width", 336), this.set("modal", !0), this.set("hideOn", []), this.set("centered", !0), this.after("render", this._onceRender, this)
            },
            destructor: function() {
                e.Array.each(this._eventHandles, function(e) {
                    e.detach()
                })
            },
            _onceRender: function() {
                var t = this.get("boundingBox"),
                    n = this.get("message"),
                    s = e.Template.Micro.compile(this.messageTemplate);
                t.addClass(this.getClassName("confirm")), t.addClass(this.getClassName(this.get("type"))), n && this.setStdModContent(e.WidgetStdMod.BODY, s({
                    message: n
                })), this._eventHandles.push(t.delegate("click", this._onButtonClick, ".sm-button", this))
            },
            _onButtonClick: function(e) {
                var t = e.currentTarget,
                    n = t.getData("value");
                e.preventDefault(), this.fire("confirm", {
                    confirmed: "confirm" === n
                }), this.hide()
            },
            _renderTitle: function() {
                var n = this.get("title"),
                    s = t[this.get("type")],
                    i = "";
                s && (i = '<span class="sm-fonticon sm-fonticon-large sm-fonticon-' + s + '"></span>'), n.length ? (this._titleNode || (this._titleNode = e.Node.create("<h2></h2>")), this._titleNode.setHTML(i + n), this.setStdModContent(e.WidgetStdMod.HEADER, this._titleNode, e.WidgetStdMod.BEFORE)) : this._titleNode && (this._titleNode.destroy(!0), this._titleNode = null)
            }
        }, {
            CSS_PREFIX: "sm-panel",
            ATTRS: {
                message: {},
                cancelLabel: {
                    value: "Cancel"
                },
                confirmLabel: {
                    value: "Confirm"
                },
                smbuttons: {
                    getter: function() {
                        return [{
                            value: "cancel",
                            label: this.get("cancelLabel")
                        }, {
                            value: "confirm",
                            label: this.get("confirmLabel"),
                            skin: "submit"
                        }]
                    }
                },
                type: {
                    value: "warning"
                }
            }
        }), e.namespace("SM.Panel").confirm = function(n, s) {
            var i;
            if (s || (s = {}), s.type) {
                var a = '<span class="sm-fonticon sm-fonticon-large sm-fonticon-' + t[s.type] + '"></span>';
                s.title = a + (s.title || "")
            }
            return i = "string" == typeof n ? "<p>" + e.Escape.html(n) + "</p>" : n, s = e.merge({
                centered: !0,
                modal: !0,
                width: 336
            }, s, {
                bodyContent: i,
                render: !0,
                smbuttons: s && s.confirmButtons || [{
                    label: s.cancelLabel || "No",
                    size: "small",
                    value: "no"
                }, {
                    label: s.confirmLabel || "Yes",
                    skin: "submit",
                    size: "small",
                    value: "yes"
                }]
            }), new e.Promise(function(t, n) {
                var i = new e.SM.Panel(s);
                i.get("boundingBox").addClass("sm-panel-confirm").addClass("sm-panel-" + s.type), i.get("contentBox").delegate("click", function(e) {
                    var s = e.currentTarget.getData("value");
                    1 === e.button && (i.destroy(), "yes" === s ? t(s) : n(s))
                }, ".sm-button")
            })
        }
    }(), SM.currentModule = null
}, "", {
    requires: ["promise", "template-micro", "sm-panel"]
});
YUI.add("sm-panel", function(t) {
    SM.currentModule = "sm-panel";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        t.namespace("SM").Panel = t.Base.create("panel", t.Panel, [], {
            initializer: function(e) {
                this.get("draggable") && this.plug(t.SM.Panel.Draggable), this.get("closable") && this.after("render", this._renderCloseButton, this)
            },
            destructor: function() {
                t.Array.each(this._eventHandles, function(t) {
                    t.detach()
                })
            },
            DEF_PARENT_NODE: ".sm-overlay-container",
            renderUI: function() {
                var e = this.get("scrollHeight"),
                    i = this.get("boundingBox");
                this._eventHandles = [], this._renderTitle(), this._renderButtons(), this._eventHandles.push(this.after("titleChange", this._renderTitle, this), this.after("smbuttonsChange", this._renderButtons, this)), e && (i.addClass(this.getClassName("scrollable")), this.get("bodyContent") && this.getStdModNode(t.WidgetStdMod.BODY) || this.setStdModContent(t.WidgetStdMod.BODY, ""), this.getStdModNode(t.WidgetStdMod.BODY, !0).setStyle("height", e)), this.get("fixed") && i.addClass(this.getClassName("fixed"))
            },
            _renderTitle: function() {
                var e = this.get("boundingBox"),
                    i = this.get("title"),
                    s = this.get("titleLocation"),
                    d = this.get("titlePosition");
                e.addClass(this.getClassName("title-" + s)), i.length ? (this._titleNode || ("outside" === s ? (this._titleNode = t.Node.create("<h1></h1>"), "center" === d && e.addClass(this.getClassName("title-center"))) : this._titleNode = t.Node.create("<h2></h2>")), this._titleNode.setHTML(i), this.setStdModContent(t.WidgetStdMod.HEADER, this._titleNode, t.WidgetStdMod.BEFORE)) : this._titleNode && (this._titleNode.destroy(!0), this._titleNode = null)
            },
            _renderButtons: function() {
                var e = this.get("smbuttons");
                e.length ? this.setStdModContent(t.WidgetStdMod.FOOTER, t.SM.Templates.buttonGroup({
                    buttons: e
                }), t.WidgetStdMod.AFTER) : this.getStdModNode(t.WidgetStdMod.FOOTER) || this.setStdModContent(t.WidgetStdMod.FOOTER, "")
            },
            _renderCloseButton: function() {
                if (!this._closeNode) {
                    var e = t.Node.create(t.SM.Panel.CLOSE_NODE_TEMPLATE),
                        i = t.Node.create(t.SM.Templates.button({
                            icon: "XCrossSlim",
                            skin: "submit",
                            noChrome: !0
                        }));
                    e.append(i), i.on("click", this._onCloseClick, this), this._closeNode = e
                }
                this.get("boundingBox").addClass(this.getClassName("close-button")), this.getStdModNode(t.WidgetStdMod.HEADER).insert(this._closeNode, "after")
            },
            _onCloseClick: function(t) {
                t.halt(), this.hide()
            },
            moveToFront: function() {
                var t = this.get("boundingBox");
                t.get("parentNode").append(t)
            },
            hide: function(e) {
                var i = t.fire("panel:hide", {
                    viaEsc: e ? "key" == e.type && 27 == e.which : !1
                });
                return i && (t.SM.Panel.superclass.hide.call(this), this.fire("hide")), this
            }
        }, {
            CSS_PREFIX: "sm-panel",
            CLOSE_NODE_TEMPLATE: '<div class="sm-panel-close"></div>',
            ATTRS: {
                title: {
                    value: ""
                },
                titleLocation: {
                    value: "inside",
                    validator: function(e) {
                        return t.Array.indexOf(["inside", "outside"], e) > -1
                    }
                },
                titlePosition: {
                    value: "",
                    valueFn: function() {
                        return this.get("width") <= 340 ? "center" : "left"
                    }
                },
                smbuttons: {
                    value: []
                },
                buttons: {
                    value: {}
                },
                draggable: {},
                closable: {},
                scrollHeight: {},
                fixed: {}
            }
        }), t.namespace("SM.Panel").Draggable = t.Base.create("sm-panel-draggable", t.Plugin.Base, [], {
            initializer: function(t) {
                this.afterHostEvent("render", this._afterHostRender), this.afterHostMethod("_renderTitle", this._afterHostRenderTitle)
            },
            destructor: function() {
                this._drag && this._drag.destroy()
            },
            _afterHostRender: function(t) {
                this._bindDrag()
            },
            _afterHostRenderTitle: function() {
                var e = this.get("host"),
                    i = e.get("contentBox"),
                    s = e.getStdModNode(t.WidgetStdMod.HEADER),
                    d = e.get("title");
                this._drag && (d.length && s ? (i.removeClass("yui3-dd-handle"), s.addClass("yui3-dd-handle"), this._drag.set("handles", [s])) : (i.addClass("yui3-dd-handle"), this._drag.set("handles", [i])))
            },
            _bindDrag: function() {
                var e = this.get("host"),
                    i = e.get("boundingBox"),
                    s = e.get("contentBox"),
                    d = e.getStdModNode(t.WidgetStdMod.HEADER),
                    n = [];
                d ? n.push(d) : n.push(s), t.Array.each(n, function(t) {
                    t.addClass("yui3-dd-handle")
                }), this._drag = new t.DD.Drag({
                    node: i,
                    handles: n
                }), this._drag.addTarget(this)
            }
        }, {
            NS: "draggable"
        })
    }(), SM.currentModule = null
}, "", {
    requires: ["panel", "plugin", "dd-plugin", "sm-templates-button"]
});
YUI.add("sm-picker-history", function(t) {
    SM.currentModule = "sm-picker-history";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        var n = t.Lang,
            e = "history",
            i = "container",
            s = "buttons",
            u = t.Base.create("sm-picker-history", t.Widget, [], {
                _historyMenuInitialized: !1,
                initializer: function() {},
                renderUI: function() {},
                bindUI: function() {},
                syncUI: function() {},
                clear: function() {
                    this.set(e, [])
                },
                push: function(t) {
                    var n = this.get(e),
                        i = null;
                    n.length >= 1 && (i = n[n.length - 1], this._updateBackButton(i.label)), this._rebuildHistoryMenu(), n.push(t), this.set(e, n)
                },
                pop: function() {
                    var t = this.get(e),
                        n = null;
                    return t.length > 0 ? (n = t.pop(), n = t.pop()) : n = {
                        clear: !0
                    }, 0 === t.length ? this._updateBackButton(!1) : this._updateBackButton(n.label), this.set(e, t), n
                },
                _updateBackButton: function(t) {
                    var n = this.get(s),
                        e = n.back;
                    e.get("disabled") ? e.set("disabled", !1) : t === !1 && e.set("disabled", !0)
                },
                _rebuildHistoryMenu: function() {
                    var s = this.get(e),
                        u = this.get(i),
                        o = null,
                        a = [],
                        l = 0,
                        r = null,
                        c = null;
                    if (u) {
                        for (l = s.length; 0 !== l; l--) r = s[l - 1], c = {
                            name: r.label,
                            type: t.SM.Menu.ITEM_TYPES.ITEM,
                            action: r.type
                        }, a.push(c);
                        o = new t.SM.Menu({
                            menuConfig: {
                                alignment: "horizontal",
                                items: [{
                                    type: t.SM.Menu.ITEM_TYPES.ICON,
                                    iconClassNames: ["sm-icon-down", "sm-icon-down-button"],
                                    spanClassNames: ["sm-button-content", "sm-icon-down-button"],
                                    anchorClassNames: ["sm-button"],
                                    items: a
                                }]
                            }
                        }), n.isString(u) && (u = t.one(u), this.set(i, u)), u.setContent(""), o.render(u)
                    }
                }
            }, {
                ATTRS: {
                    history: {
                        value: []
                    },
                    container: {
                        value: null
                    },
                    buttons: {
                        value: null
                    }
                }
            });
        t.namespace("SM").PickerHistory = u
    }(), SM.currentModule = null
}, "", {
    requires: ["base", "node", "widget"]
});
YUI.add("sm-picker-overlay", function(e) {
    SM.currentModule = "sm-picker-overlay";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        var i = e.Lang,
            t = e.DOM,
            s = "visible",
            l = "sm-picker-help",
            r = "sm-picker-overlay",
            o = "sm-picker-container",
            a = '<div class="' + l + '"></div>',
            n = {
                "item-0": "Select multiple items.",
                "item-1": "Please select a single photo or gallery.",
                "item-2": "Please select ({limit}) items.",
                "image-0": "Select multiple photos from any of your galleries.",
                "image-1": "Please select a single photo from one of your galleries.",
                "image-2": "Please select ({limit}) photos from one of your galleries.",
                "album-0": "Select multiple galleries.",
                "album-1": "Please select a single gallery.",
                "album-2": "Please select ({limit}) galleries.",
                "folder-0": "Select multiple folders.",
                "folder-1": "Please select a single folder.",
                "folder-2": "Please select ({limit}) folders.",
                "node-0": "Select multiple sources.",
                "node-1": "Please select a single source.",
                "node-2": "Please select ({limit}) sources.",
                "page-0": "Select multiple pages.",
                "page-1": "Please select a single page.",
                "page-2": "Please select ({limit}) pages."
            },
            h = {
                image: {
                    singular: "photo",
                    multiple: "photos"
                },
                album: {
                    singular: "gallery",
                    multiple: "galleries"
                },
                folder: {
                    singular: "folder",
                    multiple: "folders"
                },
                node: {
                    singular: "page, folder or gallery",
                    multiple: "pages, folders or galleries"
                },
                page: {
                    singular: "page",
                    multiple: "pages"
                }
            },
            d = "boundingBox",
            c = e.Base.create("sm-picker-overlay", e.SM.Panel, [], {
                _resizeTimer: null,
                _handles: null,
                initializer: function(i) {
                    i = this._updateConfig(i), this.set("fillHeight", null), this.set("titleLocation", "outside"), this.set("title", "Picker"), this._config = i, this.set("picker", new e.SM.Picker(i))
                },
                renderUI: function() {
                    c.superclass.renderUI.call(this);
                    var i = e.Node.create("<div />"),
                        t = this.get("picker");
                    this._renderHeaderUI(), i.addClass(o), i.append(e.Node.create(a)), t.render(i), t.addTarget(this), this.setStdModContent(e.WidgetStdMod.BODY, i), this.set(s, !1), this.centered(), this.get(d).addClass(r)
                },
                show: function(i) {
                    var t = this.get("picker");
                    this._attachUIListeners(), i = this._config = this._updateConfig(e.merge(this._config, i)), this.set(s, !0), this._renderHeaderUI(), t.show(i), this._resizeUI()
                },
                hide: function() {
                    this.get("picker").closeUiCleanup(), this._detachUIListeners(), this.set(s, !1)
                },
                _attachUIListeners: function() {
                    var i = this.get("picker");
                    this._handles = [i.on(e.SM.Picker.EVENT_SELECT, this.hide, this), i.on(e.SM.Picker.EVENT_CANCEL, this.hide, this), i.on(e.SM.Picker.EVENT_USER_FAIL, this._destroy, this), e.on("windowresize", this._onWindowResize, null, this)]
                },
                _destroy: function() {
                    this.hide(), this.destroy()
                },
                _detachUIListeners: function() {
                    new e.EventHandle(this._handles).detach(), this._handles = null
                },
                _onWindowResize: function() {
                    this._resizeTimer && this._resizeTimer.cancel(), this._resizeTimer = e.later(150, this, this._resizeUI)
                },
                _resizeUI: function() {
                    var e = t.winWidth(),
                        i = t.winHeight(),
                        s = this.get(d),
                        l = s.one(".yui3-widget-hd").get("offsetHeight"),
                        r = Math.floor(.85 * e),
                        o = Math.floor(.85 * i) - l;
                    s.setStyles({
                        width: r,
                        height: o,
                        left: Math.floor((e - r) / 2),
                        top: Math.floor((i - o) / 2) + l
                    }), this.get("picker").resizeUI(), this.centered()
                },
                _renderHeaderUI: function() {
                    var e, i = this._config,
                        t = "Choose";
                    i.hasOwnProperty("title") && i.title ? t = i.title : i.hasOwnProperty("mode") && "" !== i.mode && (e = 1 === i.limit ? " a " : " one or more ", t += e + (1 === i.limit ? h[i.mode].singular : h[i.mode].multiple)), this.set("title", t), this.showHelpMessage(i.message)
                },
                showHelpMessage: function(t, l) {
                    l || (l = "info");
                    var r, o, a, h, d = this._config,
                        c = this.get("boundingBox").one(".sm-picker-help"),
                        g = t;
                    c && (this._fadeoutMessageTimer && this._fadeoutMessageTimer.cancel(), t || (o = d.hasOwnProperty("mode") ? d.mode : "Item", o += "-", o += d.hasOwnProperty("limit") ? d.limit : "0", n.hasOwnProperty(o) || (o = "item-0"), g = n[o]), this.get(s) === !0 && (r = new e.SM.MessageBox({
                        message: i.sub(g, d),
                        type: l
                    }), r.render(c), h = r.get("boundingBox"), a = "-" + parseInt(c.get("offsetWidth"), 10) / 2 + "px", c.setStyle("marginLeft", a), h.removeClass("sm-messagebox-fadeout").show(), this._fadeoutMessageTimer = e.later(5e3, this, function() {
                        this._fadeoutMessageTimer = null, e.UA.ie > 0 ? h.hide() : h.addClass("sm-messagebox-fadeout")
                    }, !1)))
                },
                _updateConfig: function(e) {
                    var s, l = null,
                        r = {
                            disableScrollbars: !0,
                            modal: !0,
                            visible: !1,
                            centered: !0,
                            width: Math.floor(.85 * t.winWidth()) + "px",
                            height: Math.floor(.85 * t.winHeight()) - 52 + "px",
                            allowEmptySelections: !1
                        };
                    for (s in r) r.hasOwnProperty(s) && (l = r[s], e.hasOwnProperty(s) && i.isString(e[s]) && "" !== e[s] && (l = e[s]), this.set(s, l));
                    return e
                }
            }, {
                CSS_PREFIX: "sm-panel",
                ATTRS: {
                    config: {
                        value: null
                    },
                    picker: {
                        value: null
                    },
                    zIndex: {
                        value: 1
                    }
                }
            });
        e.namespace("SM").PickerOverlay = module.exports = c
    }(), SM.currentModule = null
}, "", {
    requires: ["anim-base", "base", "event-resize", "node", "sm-messagebox", "sm-panel", "sm-picker"]
});
YUI.add("sm-picker-plugin", function(e) {
    SM.currentModule = "sm-picker-plugin";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        var i = e.Template.Micro,
            t = null,
            s = i.compile('<div class="sm-picker-plugin"><div><div class="sm-picker-plugin-thumb sm-picker-launch"></div><span class="sm-icon sm-picker-plugin-clear" title="Remove Image"></span><div class="sm-picker-launch"><%== Y.SM.Templates.button({label: data.label, skin: "submit", size: "small"}) %></div></div></div>'),
            a = "hidingPicker",
            r = "valueChanged",
            n = "thumbCleared",
            l = null,
            o = null,
            c = {},
            d = 2,
            h = 4,
            u = "pickerplugin";
        c[e.SM.Picker.MODE_IMAGE] = {
            limit: 1,
            disableEmpty: 1,
            disableCollected: 0,
            disableVideo: 1,
            disableArchive: 1,
            disablePages: 1,
            disablePhoto: 0,
            disableThumbOverflow: !1
        }, c[e.SM.Picker.MODE_ALBUM] = {
            limit: 1,
            disableAlbum: 0,
            disableEmpty: 0,
            disablePages: 1,
            disableThumbOverflow: !1
        }, c[e.SM.Picker.MODE_FOLDER] = {
            limit: 1,
            disableAlbum: 1,
            disableEmpty: 0,
            disablePages: 1,
            disableThumbOverflow: !1
        }, c[e.SM.Picker.MODE_NODE] = {
            limit: 1,
            disableAlbum: 0,
            disableEmpty: 0,
            disablePages: 0,
            disableThumbOverflow: !1
        }, c[e.SM.Picker.MODE_PAGE] = {
            limit: 1,
            disableAlbum: 0,
            disableEmpty: 0,
            disablePages: 0,
            disableThumbOverflow: !1
        };
        var m = SM["import"]("lodash");
        e.namespace("SM.Plugin").Picker = module.exports = e.Base.create("sm-picker-plugin", e.Plugin.Base, [], {
            initializer: function() {
                var e = this._host = this.get("host"),
                    i = this._triggerMode = this.get("triggerMode"),
                    t = this._useMiniView = this.get("useMiniView");
                this._pickerMode = this.get("pickerMode"), this._numItems = 0, i || (e.addClass("sm-picker-pluggedin"), e.hide()), this._initializePicker(), this._attachEvents(), i || t || this._render()
            },
            destructor: function() {
                var i = this._getTileView();
                new e.EventHandle(this._eventHandles).detach(), t && (t.destroy(), t = null), i && i.destroy()
            },
            changePreselected: function(e, i) {
                i || (i = {});
                var t = this._host,
                    s = this;
                t.set("value", e), e ? this._setupThumbLoad(this._getPreSelected()).then(function(e) {
                    s._loadAndRenderThumb(e)
                }) : this._clearSelection(i)
            },
            reset: function() {
                this._clearSelection()
            },
            showPicker: function(e) {
                e && (this._pickerConfig = m.assign(this._pickerConfig, e)), l = this._host.get("name"), this._triggerMode && (o = this._host.getAttribute("id")), this._showPicker()
            },
            getPicker: function() {
                return t ? t.get("picker") : null
            },
            _attachEvents: function() {
                var i = this._getContainer();
                this._eventHandles = [t.get("picker").after([e.SM.Picker.EVENT_SELECT, e.SM.Picker.EVENT_CANCEL], this._onPickerEvent, this, e.SM.Picker.EVENT_SELECT)], this._triggerMode || this._useMiniView || this._eventHandles.push(i.delegate("click", this._onPickerLaunchClick, ".sm-picker-launch", this), e.delegate("click", function(e) {
                    e.preventDefault(), this._clearSelection()
                }, i, ".sm-picker-plugin-clear", this))
            },
            _clearSelection: function(e) {
                e || (e = {}), this._triggerMode || (this._host.set("value", ""), this._numItems = 0, this._renderEmptyThumb(), e.silent || this.fire(n))
            },
            _initializePicker: function() {
                var i, s = this._pickerMode,
                    a = c[s],
                    r = this.get("pickerStartNode"),
                    SM = window.SM;
                i = e.merge(a, this.get("pickerConfig")), ("video" === s || i.disablePhoto && i.disableVideo) && (i.disableVideo = 0, i.disablePhoto = 1, s = "image"), i.mode = s, i.startPath || (r ? this._getStartPath(r) : i.startPath = null), null === t && (t = SM.packages && (window.SM.packages.galleryPicker || window.SM.packages.photoPicker) ? window.SM.packages.galleryPicker || window.SM.packages.photoPicker : new e.SM.PickerOverlay(i)), this._pickerConfig = i
            },
            _getContainer: function() {
                var i, t = this._useMiniView;
                if (!t) return this._container || (i = e.Node.create(s({
                    label: this.get("pickerLaunchBtnText")
                })), this._selectedTileContainer = i.one(".sm-picker-plugin-thumb"), this._container = i), this._container
            },
            _getFontIcon: function() {
                var i, t = this._pickerMode;
                if (!this._fontIcon) {
                    switch (t) {
                        case e.SM.Picker.MODE_IMAGE:
                            i = "Image";
                            break;
                        case e.SM.Picker.MODE_ALBUM:
                            i = "Gallery";
                            break;
                        case e.SM.Picker.MODE_FOLDER:
                            i = "Folder";
                            break;
                        case e.SM.Picker.MODE_NODE:
                            i = "Document";
                            break;
                        case e.SM.Picker.MODE_PAGE:
                            i = "Page2";
                            break;
                        case "video":
                            i = "VideoCamera"
                    }
                    this._fontIcon = i
                }
                return this._fontIcon
            },
            _getPreSelected: function() {
                var i, t = this._host,
                    s = t.get("value");
                return s && (i = [], e.Array.each(s.split(/,\s*/g), function(e) {
                    i.push(e)
                }), this._numItems = i.length), i
            },
            _getStartPath: function(i) {
                var t = this,
                    s = e.ModelStore.getList(e.SM.Models.UserNode).getById(i) || new e.SM.Models.UserNode;
                s.load({
                    data: {
                        NodeID: i
                    }
                }, function(e, s) {
                    var a = null,
                        r = "",
                        n = "",
                        l = "";
                    if (!e) {
                        s.Node.IDPath && (a = s.Node.IDPath.split(",").join("-Folder,") + "-Folder");
                        var o = s.Node.Type;
                        switch (o) {
                            case h:
                                r = "Album", n = s.Node.RemoteID, l = s.Node.RemoteKey;
                                break;
                            case d:
                                r = "Folder", n = i;
                                break;
                            default:
                                console.log("Unknown Node Type: ", s.Node.Type)
                        }(o === h || o === d) && (a += "," + n + "-" + r, a += l ? "-" + l : ""), t._pickerConfig.startPath = a
                    }
                })
            },
            _getTileView: function() {
                var i, t = this._useMiniView;
                return this._selectedTileView || (i = {
                    autoResize: !1,
                    center: !1,
                    clickable: !1,
                    imageCrop: "1x1",
                    resource: this._getTileModel()
                }, t ? i = e.merge(i, {
                    containerWidth: 32,
                    imageSize: "fit",
                    maxHeight: 32,
                    maxWidth: 32
                }) : i.imageSize = "Th", this._selectedTileView = new e.SM.Views.Tile(i)), this._selectedTileView
            },
            _getTileModel: function() {
                var i, t;
                return this._selectedTileModel || (i = this.get("selectedImageModel"), t = new e.SM.Models.Image, i && (this._modelPreloaded = !0, t.setAttrs(i.getAttrs())), this._selectedTileModel = t), this._selectedTileModel
            },
            _loadAndRenderThumb: function(e) {
                var i = this,
                    t = e.thumbData;
                this._triggerMode || (t && (t.id || t.key) || this._renderSelectedThumb(!0), this._getTileModel().load({
                    data: {
                        ImageID: e.thumbData.id,
                        ImageKey: e.thumbData.key
                    }
                }, function(e) {
                    e || i._renderSelectedThumb()
                }))
            },
            _render: function() {
                var e = this,
                    i = this._host,
                    t = this._getPreSelected();
                t ? this._modelPreloaded ? this._renderSelectedThumb() : this._setupThumbLoad(t).then(function(i) {
                    e._loadAndRenderThumb(i)
                }) : this._renderEmptyThumb(), i.insert(this._getContainer(), "after")
            },
            _renderEmptyThumb: function() {
                var e = this._getContainer(),
                    i = this._getTileView(),
                    t = this._useMiniView;
                t || (i.get("container").remove(), e.one(".sm-picker-plugin-clear").hide(), e.one(".sm-picker-launch .sm-button-label").set("text", this.get("pickerLaunchBtnText")), e.removeClass("sm-picker-plugin-has-selection").addClass("sm-picker-plugin-no-selection"))
            },
            _renderSelectedThumb: function(i) {
                var t = this._getContainer(),
                    s = this._getTileView(),
                    a = this._useMiniView,
                    r = this._selectedTileContainer;
                a || (i ? r.setHTML(e.SM.Templates.button({
                    icon: this._getFontIcon(),
                    size: "small",
                    title: "Make Selection"
                })) : (s.set("parentNode", r), s.render({
                    clear: !0
                })), t.removeClass("sm-picker-plugin-no-selection").addClass("sm-picker-plugin-has-selection"), t.one(".sm-picker-launch .sm-button-label").set("text", this.get("pickerChangeBtnText")), t.one(".sm-picker-plugin-clear").show())
            },
            _setupThumbLoad: function(i) {
                var t = this;
                return new e.Promise(function(s) {
                    var a, r, n = t._pickerMode,
                        l = {};
                    switch (n) {
                        case e.SM.Picker.MODE_IMAGE:
                        case "video":
                            a = i[0].split(/\-/), l.thumbData = {
                                id: a[0],
                                key: a[1]
                            }, s(l);
                            break;
                        case e.SM.Picker.MODE_ALBUM:
                            a = i[0].split(/\-/), r = new e.SM.Models.Album, r.load({
                                data: {
                                    AlbumID: a[0],
                                    AlbumKey: a[1]
                                }
                            }, function(e, i) {
                                e || (i.Image && (l.thumbData = {
                                    id: i.Image.ImageID,
                                    key: i.Image.ImageKey
                                }), s(l))
                            });
                            break;
                        case e.SM.Picker.MODE_FOLDER:
                        case e.SM.Picker.MODE_NODE:
                        case e.SM.Picker.MODE_PAGE:
                            r = e.ModelStore.getList(e.SM.Models.UserNode).getById(i[0]) || new e.SM.Models.UserNode, r.load({
                                data: {
                                    NodeID: i[0],
                                    GetHLImageID: !0
                                }
                            }, function(e, i) {
                                e || (i.Node.HLImageID && (l.thumbData = {
                                    id: i.Node.HLImageID,
                                    key: i.Node.HLImageKey
                                }), s(l))
                            })
                    }
                })
            },
            _showPicker: function() {
                var i, s, a, r = !!e.SM.Page.owner;
                t || (this._initializePicker(), this._attachEvents());
                var n = this.get("skinned");
                if (t.get("rendered")) {
                    var l = t.get("boundingBox"),
                        o = l.get("parentNode");
                    n && !o.hasClass("sm-user-overlay-container") ? e.one(".sm-user-overlay-container").append(l) : n || o.hasClass("sm-overlay-container") || e.one(".sm-overlay-container").append(l)
                } else t.render(n ? ".sm-user-overlay-container" : "");
                s = this._pickerConfig.nickName ? this._pickerConfig.nickName : r && e.SM.Page.user.isAdmin ? e.SM.Page.owner.nickName : e.SM.Page.user.nickName, a = this._pickerConfig.preSelected ? this._pickerConfig.preSelected : this.get("noPreselected") ? [] : this._getPreSelected(), i = e.merge(this._pickerConfig, {
                    nickName: s,
                    preSelected: a
                });
                var c = this.getPicker();
                c.get("boundingBox").one(".sm-picker-breadcrumb").empty(), c.set("disableBreadCrumbs", !!i.disableBreadCrumbs), t.show(i)
            },
            _updateInputValue: function(i) {
                var t, s = this._host,
                    a = [];
                this._triggerMode || (e.Array.each(i, function(i) {
                    var t = i.hostData.id;
                    "undefined" != typeof i.hostData.key && (t += "-" + i.hostData.key), this._pickerMode === e.SM.Picker.MODE_NODE && 4 === i.typeInfo.Type && (t = i.typeInfo.NodeID), a.push(t)
                }.bind(this)), t = a.join(","), s.set("value", t), this.fire(r, {
                    newVal: t,
                    selectedData: i
                }))
            },
            _onPickerEvent: function(i) {
                var s = this._host,
                    r = i._type,
                    n = this._pickerMode,
                    c = [];
                if (!(this._triggerMode && s.getAttribute("id") !== o || !this._triggerMode && l !== s.get("name"))) {
                    if (r !== e.SM.Picker.EVENT_CANCEL) {
                        if (!i.selectedKeys || i.selectedKeys && 0 === i.selectedKeys.length) return i.stopImmediatePropagation(), void t.showHelpMessage("", "error");
                        switch (r) {
                            case e.SM.Picker.EVENT_SELECT:
                                this._numItems = i.selectedKeys.length, e.each(i.selectedData, function(i) {
                                    var t = i.typeInfo,
                                        s = {},
                                        a = {};
                                    switch (n) {
                                        case e.SM.Picker.MODE_IMAGE:
                                        case "video":
                                            s.id = t.imageId || t.ImageID, s.key = t.imageKey || t.ImageKey, a.id = t.imageId || t.ImageID, a.key = t.imageKey || t.ImageKey;
                                            break;
                                        case e.SM.Picker.MODE_ALBUM:
                                        case e.SM.Picker.MODE_FOLDER:
                                        case e.SM.Picker.MODE_NODE:
                                        case e.SM.Picker.MODE_PAGE:
                                            t.HLImageID && i.imageInfo && (a.id = t.HLImageID, a.key = i.imageInfo.imageKey || i.imageInfo.ImageKey), n === e.SM.Picker.MODE_ALBUM || n === e.SM.Picker.MODE_NODE && 4 === t.Type ? (s.id = t.AlbumID || t.albumId, s.key = t.AlbumKey || t.albumKey) : s.id = t.NodeID
                                    }
                                    c.push({
                                        hostData: s,
                                        typeInfo: t,
                                        thumbData: a
                                    })
                                }), this._updateInputValue(c), this._selectedTileContainer && this._loadAndRenderThumb(c[0]);
                                break;
                            case e.SM.Picker.EVENT_CANCEL:
                        }
                    }
                    this.fire(a, {
                        pickType: i.type,
                        selectedData: c,
                        srcNode: s
                    })
                }
            },
            _onPickerLaunchClick: function(e) {
                e.preventDefault(), e.currentTarget.hasClass("sm-picker-plugin-clear") || (l = this._host.get("name"), this._showPicker())
            }
        }, {
            NS: u,
            EVENT_PICKER_HIDDEN: a,
            EVENT_PICKER_THUMB_CLEARED: n,
            ATTRS: {
                noPreselected: {
                    value: !1
                },
                pickerChangeBtnText: {
                    value: "Browse"
                },
                pickerConfig: {
                    value: null
                },
                pickerLaunchBtnText: {
                    value: "Browse"
                },
                pickerMode: {
                    value: e.SM.Picker.MODE_IMAGE
                },
                pickerStartNode: {
                    value: null
                },
                selectedImageModel: {
                    value: null,
                    writeOnce: "initOnly"
                },
                skinned: {
                    value: !1
                },
                triggerMode: {
                    value: !1
                },
                useMiniView: {
                    value: !0
                }
            }
        })
    }(), SM.currentModule = null
}, "", {
    requires: ["base", "lodash", "node", "plugin", "promise", "sm", "sm-button", "sm-image-model", "sm-tile-view", "sm-models-usernode", "sm-overlay", "sm-picker-overlay"]
});
YUI.add("sm-picker", function(e) {
    SM.currentModule = "sm-picker";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        var t = SM["import"]("react"),
            s = SM["import"]("react-dom"),
            i = t.createFactory(SM["import"]("sm-progressbar")),
            a = e.Node,
            l = e.DOM,
            n = e.config.doc,
            r = e.Lang,
            o = e.UA,
            h = ".",
            d = "-",
            u = "px",
            c = e.SM,
            g = "sm-picker",
            p = "breadcrumb",
            m = "detail",
            b = "detail-total",
            _ = "list",
            v = "list-content",
            f = "viewport",
            w = "view-main",
            y = "view-empty",
            C = "view-screen",
            S = "view-selected",
            P = "view-selected-open",
            M = "view-selected-toggle",
            k = "view-large-thumbs",
            T = "view-small-thumbs",
            N = "loading-mask",
            I = "progress",
            O = "preview-screen",
            A = "container",
            E = "overlay",
            D = "tools",
            R = "body",
            B = "back",
            F = "more",
            U = "buttons",
            V = "selected",
            z = "footer",
            L = "footer-center",
            H = "sm-hidden",
            q = "sm-thumbnail",
            x = "sm-thumbnail-title",
            K = "sm-button-skin-submit",
            W = "sm-button-skin-default",
            G = (SM.env.host ? SM.env.host.spacerGif : SM.hostConfig.imgPrefix + "spacer.gif", '<div class="' + g + d + R + '"></div>'),
            j = '<div class="sm-picker-header yui3-g"><div class="yui3-u-2-3"><div class="' + g + d + B + '"></div><div class="' + g + d + p + '"></div></div><div class="yui3-u-1-3" style="text-align:right"><div class="' + g + d + V + '"></div></div></div>',
            Y = '<div class="' + g + d + f + ' yui3-u-1"><div class="' + g + d + N + " " + H + '"><div class="' + g + d + N + '-box"><div class="' + g + d + N + '-content"><div class="sm-progress-spinner sm-progress-spinner-visible"></div></div></div></div><div class="' + g + d + O + " " + H + '"></div><div class="' + g + d + C + " " + H + '"></div><div class="' + g + d + S + " " + H + '"><div class="' + g + d + _ + '"><div class="' + g + d + v + '"></div></div><div class="' + g + d + M + '"><div><span class="sm-fonticon-sml sm-fonticon-ArrowTriangleRight"></span></div></div></div><div class="' + g + d + y + " " + H + '">Empty</div><div class="' + g + d + w + '"><div class="' + g + d + _ + '"><div class="' + g + d + v + '"></div></div></div><div class="' + g + d + F + " " + H + '"></div></div>',
            X = '<div class="' + g + d + m + '"><div class="' + g + d + m + '-content"><div class="' + g + d + b + '"></div></div></div>',
            J = '<div class="yui3-g ' + g + d + z + '"><div class="yui3-u-1-3 ' + g + d + D + '"></div><div class="yui3-u-1-3 ' + g + d + L + '"></div><div class="yui3-u-1-3 ' + g + d + U + '"></div></div>',
            Q = '<div class="' + g + d + I + " " + H + '"></div>',
            Z = "You have reached the limit of {limit}.",
            $ = "There are no items available to pick in this {parentType}.",
            ee = "rpc.thumbnail.folders",
            te = "rpc.thumbnail.images",
            se = "rpc.thumbnail.idlookup",
            ie = "rpc.thumbnail.pathlookup",
            ae = "pickerItemSelected",
            le = "pickerCancel",
            ne = "pickerUserFail",
            re = "image",
            oe = "album",
            he = "node",
            de = "folder",
            ue = "page",
            ce = {
                image: "Photo",
                video: "Video",
                album: "Gallery",
                folder: "Folder",
                node: "Node",
                page: "Page"
            },
            ge = 0,
            pe = 1,
            me = 2,
            be = "Album",
            _e = "Image",
            ve = "Folder",
            fe = "Category",
            we = "SubCategory",
            ye = "RootFolder",
            Ce = "Node",
            Se = "Page",
            Pe = {
                image: _e,
                album: be,
                node: Ce,
                folder: ve,
                page: Se
            },
            Me = "My SmugMug",
            ke = "Selected",
            Te = "view-album",
            Ne = "view-folder",
            Ie = "view-category",
            Oe = "view-selected",
            Ae = "view-idlookup",
            Ee = Ne,
            De = {
                "view-album": be,
                "view-folder": ve,
                "view-category": fe,
                "view-node": Ce,
                "view-page": Se
            },
            Re = 50,
            Be = 50,
            Fe = 0,
            Ue = 100,
            Ve = 385,
            ze = "00-RootFolder",
            Le = "nickName",
            He = "page",
            qe = "pagesize",
            xe = "viewConfig",
            Ke = "config",
            We = "visible",
            Ge = "requestSent",
            je = "selectedState",
            Ye = "selectedCount",
            Xe = "currentSelected",
            Je = "nodeMore",
            Qe = "nodeViewport",
            Ze = "nodeViewportList",
            $e = "nodeScreen",
            et = "boundingBox",
            tt = "contentBox",
            st = "default",
            it = "selected",
            at = "type",
            lt = "mode",
            nt = "limit",
            rt = "debug",
            ot = e.Base.create("sm-picker", e.Widget, [], {
                _handles: null,
                _pickerOpen: !1,
                _preview: null,
                _api: null,
                _buttons: null,
                _scrolling: !1,
                _scrollTimer: null,
                _resizing: !1,
                _resizeTimer: null,
                _requestInProgress: !1,
                _thumbManager: null,
                _history: null,
                _keyEvent: null,
                _selectedDrawerOpen: !1,
                _mainViewMode: null,
                _viewSelectedWidth: null,
                _prefetch: null,
                _rpcTotals: null,
                _defaultRoot: ze,
                _passwordPanelOpen: !1,
                initializer: function(t) {
                    this._handles = null, this._buttons = {}, this._rpcTotals = {}, this._disableFlags = {}, this._prefetch = {
                        preSelected: null,
                        totalPages: null
                    }, this._api = new e.SM.API, this._thumbManager = new e.SM.ThumbnailManager({
                        defaultContainer: h + this.getClassName(w) + " " + h + this.getClassName(v),
                        disableThumbOverflow: t.disableThumbOverflow,
                        selectedContainer: h + this.getClassName(S) + " " + h + this.getClassName(v),
                        selectedType: t.hasOwnProperty(lt) && Pe.hasOwnProperty(t[lt]) ? Pe[t[lt]] : "",
                        limit: t.hasOwnProperty(nt) ? t[nt] : 0,
                        debug: t.hasOwnProperty(rt) ? t[rt] : !1
                    }), this.set(Ke, t), this._history = new c.PickerHistory, this.publish(ae, {
                        emitFacade: !0
                    }), this.publish(le, {
                        emitFacade: !0
                    }), this.publish(ne, {
                        emitFacade: !0
                    }), "undefined" != typeof t.preSelected && (r.isArray(t.preSelected) || (t.preSelected = t.preSelected.split(",")), t.preSelected.length > 0 && (this._prefetch.preSelected = this._normalizePreSelected(t.preSelected, t.mode), this._prefetch.totalPages = Math.ceil(t.preSelected.length / Be), this._prefetchSelection(0))), "undefined" != typeof t.startPath && null !== t.startPath && (r.isArray(t.startPath) || (t.startPath = t.startPath.split(",")), t.startPath.length > 0 && (this._prefetchPath(t.startPath), s = t.startPath.slice(-1).toString(), "Album" === s.split("-")[1].toString() ? t.viewConfig = {
                        albumId: s.split("-")[0].toString(),
                        albumKey: s.split("-")[2].toString(),
                        type: "view-album"
                    } : "Folder" === s.split("-")[1].toString() && (t.viewConfig = {
                        folderId: s.split("-")[0].toString(),
                        type: "view-folder"
                    }))), "undefined" != typeof t.callback && ("function" == typeof t.callback.select && this.on(ae, t.callback.select), "function" == typeof t.callback.cancel && this.on(le, t.callback.cancel));
                    var s, i = this.get(Le),
                        a = null;
                    null === i && (r.isObject(SM.env.loggedInUser) ? i = r.isObject(SM.env.pageOwner) && SM.env.loggedInUser.nickName !== SM.env.pageOwner.nickName ? SM.env.pageOwner.nickName : SM.env.loggedInUser.nickName : r.isObject(SM.pageDetails) && r.isObject(SM.pageDetails.BrowseUser) && SM.pageDetails.BrowseUser.hasOwnProperty("NickName") && (r.isObject(SM.pageDetails.BrowseUser) && SM.pageDetails.BrowseUser.NickName && SM.pageDetails.BrowseUser.NickName !== NickName ? i = NickName : a = NickName, i = r.isString(a) && SM.pageDetails.BrowseUser.NickName !== a ? a : SM.pageDetails.BrowseUser.NickName), this.set(Le, i))
                },
                destructor: function() {
                    s.unmountComponentAtNode(this._loadingProgressDOMNode)
                },
                renderUI: function() {
                    var e = n.createDocumentFragment(),
                        t = this.get(tt);
                    this.fire("pickerRender"), e.appendChild(a.getDOMNode(this._getHeaderNode())), e.appendChild(a.getDOMNode(this._getBodyNode())), e.appendChild(a.getDOMNode(this._getFooterNode())), t.append(e)
                },
                bindUI: function() {
                    this.fire("pickerBind");
                    var e = this.get(et),
                        t = e.one(h + this.getClassName(f)),
                        s = e.one(h + this.getClassName(w)),
                        i = e.one(h + this.getClassName(F)),
                        a = e.one(h + this.getClassName(C));
                    this.set(Qe, t), this.set(Ze, s), this.set(Je, i), this.set($e, a), this._attachUIListeners()
                },
                _attachUIListeners: function() {
                    var t = this.get(et),
                        s = t.one(h + this.getClassName(p)),
                        i = e.one("document");
                    this._handles = [e.delegate("click", this._handleBreadcrumbItemClick, s, ".sm-breadcrumb-item a", this), t.one(h + this.getClassName(M)).on("click", this._uiToggleSelected, this), e.delegate("click", this._handleButtonClick, t, ".sm-button", this), this._thumbManager.on("selectedCountChange", this._handleSelectCountChange, this), this._thumbManager.on("currentSelectedChange", this._handleCurrentSelectedChange, this), this._thumbManager.on("thumbnailSelect", this._handleThumbEvent, this), this._thumbManager.on("thumbnailNavigate", this._handleThumbEvent, this), this._thumbManager.on("thumbnailSelectAll", this._handleThumbnailSelectAll, this), this._thumbManager.on("thumbnailSelectNone", this._handleThumbnailSelectNone, this), this._thumbManager.on(c.ThumbnailManager.EVENT_LIMIT_REACHED, function(t) {
                        var s = new c.MessageBox({
                                message: r.sub(Z, {
                                    limit: t.limit
                                }),
                                type: "alert"
                            }),
                            i = e.one(h + this.getClassName("help"));
                        i.setContent(""), s.render(i), i.show()
                    }, this), this._thumbManager.on(c.ThumbnailManager.EVENT_LIMIT_BELOW, function(e) {
                        this._hideHelpMessage()
                    }, this), i.on("keydown", this._handleKeyDownUp, this), i.on("keyup", this._handleKeyDownUp, this)], this._thumbManager._bindUI()
                },
                _detachUIListeners: function() {
                    new e.EventHandle(this._handles).detach(), this._handles = null
                },
                syncUI: function() {},
                show: function(e) {
                    if (r.isNull(this.get(Le))) return void this.fire(ne);
                    this._disableFlags = {}, this._uiUpdateFlags(!0), "undefined" != typeof e && (this._disableFlags = {}, this._updateConfig(e));
                    var t = {
                            type: Ee
                        },
                        s = this.get(Ke);
                    "undefined" != typeof s.viewConfig && null !== s.viewConfig && (t = s.viewConfig), r.isArray(this._handles) || this._attachUIListeners(), this._thumbManager.set("disableThumbOverflow", s.disableThumbOverflow), this.set(We, !0), this._pickerOpen = !0, this._thumbManager.activateHotkeys(!1), this._thumbManager.activateSelect(!1), this._thumbManager.get(Ye) > 0 && (t = {
                        type: Oe
                    }), this._uiRenderViewport(t), this._uiToggleSelected(!0), this.resizeUI()
                },
                closeUiCleanup: function() {
                    this._uiToggleLoadingMask("hide"), this._detachUIListeners(), this._pickerOpen = !1, this._thumbManager.activateHotkeys(!1), this._thumbManager.activateSelect(!1), this._hideHelpMessage(), this._uiToggleSelected(!0), this._uiPreviewClose(), this._uiUpdateBreadcrumbs(null, {})
                },
                resizeUI: function() {
                    var t, s, i, a, l, n, r = this.get(et),
                        o = r.one(h + this.getClassName(w)),
                        d = r.one(h + this.getClassName(S)),
                        c = this.get(Ke),
                        p = null,
                        m = 0,
                        b = null,
                        y = e.StyleSheet("picker");
                    r.ancestor(h + this.getClassName(E)) ? (p = r.ancestor(h + this.getClassName(E)), m = p.get("offsetHeight") - 96) : (p = r.ancestor(h + this.getClassName(A)), m = p.get("offsetHeight")), Ve > m && (m = Ve), this._uiSetViewHeight(m), 1 === c[nt] ? this._buttons.selectAll.hide() : this._buttons.selectAll.show(), t = Math.floor(o.get("offsetWidth") / 167), s = Math.floor(o.get("offsetWidth") / 123), i = o.get("offsetWidth") - 167 * t - 25, a = o.get("offsetWidth") - 123 * s - 25, l = 7 + Math.floor(i / (t + 1)), n = 7 + Math.floor(a / (s + 1)), l > 7 && (b = h + g + " " + h + this.getClassName(f) + " " + h + this.getClassName(k) + " " + h + this.getClassName(v), y.set(b, {
                        margin: "7px 0 0 " + l + u
                    }), y.set(b + " " + h + q, {
                        margin: "0 " + l + u + " 7px 0"
                    })), n > 7 && (b = h + g + " " + h + this.getClassName(f) + " " + h + this.getClassName(T) + " " + h + this.getClassName(v), y.set(b, {
                        margin: "7px 0 0 " + n + u
                    }), y.set(b + " " + h + q, {
                        margin: "0 " + n + u + " 7px 0"
                    })), c[nt] >= 1 ? this._viewSelectedWidth = 190 : c[lt] === re ? this._viewSelectedWidth = 123 * (s - 2) + 20 : this._viewSelectedWidth = 167 * (t - 2) + 20, d.setStyles({
                        height: m + u,
                        width: this._viewSelectedWidth + u
                    }), d.one(h + this.getClassName(_)).setStyle("width", this._viewSelectedWidth - 12 + u), this._uiTogglePreviewButton(this._thumbManager.get(Xe))
                },
                _getHeaderNode: function() {
                    var t = a.create(j),
                        s = t.one(h + this.getClassName(B)),
                        i = t.one(h + this.getClassName(V));
                    return s.append(e.SM.Templates.button({
                        icon: "ArrowLeft",
                        size: "small",
                        skin: "submit",
                        value: "pickerBack"
                    })), this._buttons.back = s.one('.sm-button[data-value="pickerBack"]'), this._buttons.back.set("disabled", !0), i.append(e.SM.Templates.button({
                        label: "Selected",
                        size: "small",
                        skin: "submit",
                        value: "pickerSelected"
                    })).append(e.SM.Templates.button({
                        label: "0",
                        size: "small",
                        skin: "accent",
                        value: "pickerCount"
                    })).append(e.SM.Templates.button({
                        icon: "CheckMark",
                        label: "Select All",
                        size: "small",
                        value: "pickerSelectAll"
                    })), this._buttons.selected = i.one('.sm-button[data-value="pickerSelected"]'), this._buttons.selected.set("disabled", !1), this._buttons.selected.hide(), this._buttons.selectAll = i.one('.sm-button[data-value="pickerSelectAll"]'), this._buttons.selectAll.set("disabled", !0), this._buttons.count = i.one('.sm-button[data-value="pickerCount"]'), this._buttons.count.hide(), this._history.set("buttons", this._buttons), t
                },
                _getBodyNode: function() {
                    var e = a.create(G),
                        t = a.create(Y),
                        s = a.create(X);
                    return e.append(t), e.append(s), e
                },
                _getFooterNode: function() {
                    var t = a.create(J),
                        l = t.one(h + this.getClassName(L)),
                        n = a.create(Q),
                        r = t.one(h + this.getClassName(U)),
                        o = t.one(h + this.getClassName(D)),
                        u = this.get(Ke);
                    return o.append(e.SM.Templates.button({
                        icon: "View",
                        label: "Preview",
                        size: "small",
                        value: "pickerPreview"
                    })), this._buttons.preview = o.one('.sm-button[data-value="pickerPreview"]'), u.mode !== re && this._buttons.preview.hide(), r.append(e.SM.Templates.button({
                        label: "Cancel",
                        size: "small",
                        value: "pickerCancel"
                    })).append(e.SM.Templates.button({
                        label: "Done",
                        size: "small",
                        skin: "accent",
                        value: "pickerDone"
                    })), this._buttons.done = r.one('.sm-button[data-value="pickerDone"]'), this._buttons.done.addClass("sm-button-width-medium"), this._buttons.done.set("disabled", !0), this._buttons.done.removeClass("sm-button-skin-accent"), this._buttons.cancel = r.one('.sm-button[data-value="pickerCancel"]'), this._buttons.cancel.addClass("sm-button-width-medium"), l.append(n), l.append(a.create('<div class="' + g + d + 'flags">')), this._loadingProgressDOMNode = n.getDOMNode(), s.render(i({
                        percentComplete: 0
                    }), this._loadingProgressDOMNode), t
                },
                _updateConfig: function(t) {
                    var s, i, a = this.get(Ke),
                        l = t.hasOwnProperty(lt) ? t[lt] : null,
                        n = t.hasOwnProperty(nt) ? t[nt] : null;
                    if (this._api = new e.SM.API, this._thumbManager.setRenderType(it).clear(), this._thumbManager.setRenderType(st).clear(), this._handleSelectCountChange({
                            newVal: null
                        }), null !== n && this._thumbManager.set(nt, n), l ? (this._thumbManager.set("selectedType", Pe[l]), i = l) : i = a[lt], s = e.merge(a, t), s.hasOwnProperty("userId") && r.isNumber(s.userId) ? s.userId = parseInt(s.userId, 10) : s.userId = null, "undefined" != typeof s.preSelected ? (r.isArray(s.preSelected) || (s.preSelected = s.preSelected.split(",")), s.preSelected.length > 0 && (s.preSelected = this._normalizePreSelected(s.preSelected, i), this._prefetch.preSelected = s.preSelected, this._prefetch.totalPages = Math.ceil(s.preSelected.length / Be), this.set(Ke, s), this._prefetchSelection(0)), this._thumbManager.syncSelected(s.preSelected)) : this._thumbManager.syncSelected([]), null === s.startPath) s.viewConfig = null;
                    else if ("undefined" != typeof s.startPath && "" !== s.startPath && (r.isArray(s.startPath) || (s.startPath = s.startPath.split(",")), s.startPath.length > 0)) {
                        this._prefetchPath(s.startPath);
                        var o = s.startPath.slice(-1).toString();
                        "Album" === o.split("-")[1].toString() ? s.viewConfig = {
                            albumId: o.split("-")[0].toString(),
                            albumKey: o.split("-")[2].toString(),
                            type: "view-album"
                        } : "Folder" === o.split("-")[1].toString() && (s.viewConfig = {
                            folderId: o.split("-")[0].toString(),
                            type: "view-folder"
                        })
                    }
                    this.set(Ke, s), this.set(xe, {
                        clear: !0
                    }), t.nickName && this.set(Le, t.nickName), this._history.clear(), this._buttons.back.set("disabled", !0)
                },
                _normalizePreSelected: function(t, s) {
                    var i = [];
                    return e.Array.each(t, function(e) {
                        if (e.split("-")[1]) i.push(e);
                        else switch (s) {
                            case de:
                                i.push(e + "-" + ve);
                                break;
                            case oe:
                                i.push(e + "-" + be);
                                break;
                            case re:
                                i.push(e + "-" + _e);
                                break;
                            case ue:
                                i.push(e + "-" + Se);
                                break;
                            case he:
                                i.push(e + "-" + Ce)
                        }
                    }, this), i
                },
                _handleResize: function() {
                    this._resizing === !1 && (o.ie > 0 && o.ie < 9 || 0 === o.ie) && (this._resizeTimer && this._resizeTimer.cancel(), this._resizing = !1, this._resizeTimer = e.later(500, this, this.resizeUI, !1))
                },
                _handlePreviewTooSmall: function() {
                    this._uiTogglePreviewButton(!1)
                },
                _handleSelectCountChange: function(e) {
                    this._buttons.count.setContent(e.newVal), e.newVal > 0 ? (this._buttons.count.show(), this._buttons.done.set("disabled", !1), this._buttons.done.addClass("sm-button-skin-accent"), this._buttons.done.removeClass("sm-button-skin-default"), this._buttons.selected.show(), this._buttons.selected.addClass(W)) : (currentConfig = this.get(Ke), currentConfig.hasOwnProperty("allowEmptySelections") && currentConfig.allowEmptySelections || (this._buttons.done.set("disabled", !0), this._buttons.done.removeClass("sm-button-skin-accent"), this._buttons.done.addClass("sm-button-skin-default"), this._buttons.count.hide(), this._selectedDrawerOpen === !1 && (this._buttons.done.set("disabled", !0), this._buttons.selected.hide()))), this._selectedDrawerOpen === !0 && this._uiTogglePreviewButton(e.newVal)
                },
                _handleCurrentSelectedChange: function(e) {
                    this._uiTogglePreviewButton(e.newVal)
                },
                _handleButtonClick: function(e) {
                    var t, s = e.currentTarget.getData("value"),
                        i = this.get(Ke);
                    if (!this._passwordPanelOpen) switch (s) {
                        case "pickerBack":
                            if (this._buttons.back.get("disabled")) return;
                            t = this._history.pop(), e.halt(!0), t.clear = !0, this._uiPreviewClose(), this._uiToggleSelected(!0), t.hasOwnProperty("page") && delete t.page, this._uiRenderViewport(t);
                            break;
                        case "pickerSelected":
                        case "pickerCount":
                            this._uiToggleSelected(e);
                            break;
                        case "pickerPreview":
                            if (this._buttons.preview.get("disabled")) return;
                            e.halt(!0), this._uiPreviewOpen();
                            break;
                        case "pickerSelectAll":
                            if (this._buttons.selectAll.get("disabled")) return;
                            this._buttons.selectAll.hasClass(K) ? (this._thumbManager.handleSelectAction("none"), this._buttons.selectAll.replaceClass(K, W)) : (this._thumbManager.handleSelectAction("all"), this._buttons.selectAll.replaceClass(W, K));
                            break;
                        case "pickerDone":
                            if (this._buttons.done.get("disabled")) return;
                            this.fire(ae, {
                                mode: i.mode,
                                type: i.mode,
                                deselectedKeys: this._thumbManager.get("deselectedKeys"),
                                selectedKeys: this._thumbManager.get("selectedKeys"),
                                selectedData: this._thumbManager.get("selectedData"),
                                selectedByType: this._thumbManager.get("selectedByType"),
                                context: i.context || ""
                            });
                            break;
                        case "pickerCancel":
                            this.fire(le, {})
                    }
                },
                _handleKeyDownUp: function(t) {
                    if (this._pickerOpen !== !1)
                        if ("keydown" === t.type) this._keyEvent = t;
                        else if ("keyup" === t.type) {
                        this._keyEvent = null;
                        var s = null,
                            i = 0;
                        27 === t.keyCode ? null !== this._preview && this._preview.get("visible") === !0 && this._preview.hide() : 83 === t.keyCode ? (t.halt(!0), this._uiToggleSelected(t)) : 75 === t.keyCode || 38 === t.keyCode ? (t.halt(!0), s = e.one(h + this.getClassName(w) + " " + h + this.getClassName(_)), s.get("scrollHeight") > 0 && s.get("scrollTop") > 0 && (i = s.get("scrollTop") < 100 ? 0 : s.get("scrollTop") - Ue, s.set("scrollTop", i))) : (74 === t.keyCode || 40 === t.keyCode) && (t.halt(!0), s = e.one(h + this.getClassName(w) + " " + h + this.getClassName(_)), s.get("scrollHeight") > 0 && (i = s.get("scrollTop") + Ue, i = i > s.get("scrollHeight") ? s.get("scrollHeight") : i, s.set("scrollTop", i)))
                    }
                },
                _handleBreadcrumbMenuItemClick: function(e) {
                    var t = e.item.data.key.split("-"),
                        s = t[0].toString().replace("#", ""),
                        i = t[1].toString(),
                        a = e.item.label,
                        l = void 0 !== t[2] ? t[2].toString() : "";
                    this._navigateToNewItem(a, s, i, l)
                },
                _handleBreadcrumbItemClick: function(e) {
                    var t = e.currentTarget.getData("key");
                    if (e.preventDefault(), t && t.match("-") && !this._passwordPanelOpen) {
                        var s = t.split("-"),
                            i = s[0].toString().replace("#", ""),
                            a = s[1].toString(),
                            l = e.target.getContent(),
                            n = s[2] || "";
                        this._navigateToNewItem(l, i, a, n)
                    }
                },
                _navigateToNewItem: function(e, t, s, i, a) {
                    var l = {
                        clear: !0
                    };
                    switch (s) {
                        case ye:
                            l.type = Ne, l.label = e;
                            break;
                        case ve:
                            l.type = Ne, "00" !== t && (l.folderId = t), l.label = e;
                            break;
                        case be:
                            l.type = Te, "00" !== t && (l.albumId = t, l.albumKey = i), l.label = e
                    }
                    a && (l.authInfo = a, this._startPathNode && (this._startPathPassword = !0)), this._uiPreviewClose(), this._uiToggleSelected(!0), this._uiRenderViewport(l)
                },
                _handleThumbEvent: function(t) {
                    var s, i, a, l, n = this.get(Ke),
                        r = n.mode,
                        o = t.origTarget,
                        d = t.type,
                        u = o.ancestor(h + q),
                        c = this.get(xe),
                        g = {};
                    if (u)
                        if (s = u.getAttribute("data-type"), i = u.getAttribute("data-id"), a = u.one(h + x + " h4"), l = a ? a.getContent() : "", d === e.SM.ThumbnailManager.EVENT_SELECT) n.limit > 0 && (r === re && s === _e || r === oe && s === be || r === de && (s === be || s === ve)) && this._thumbManager.get(Ye) >= n.limit && t.halt(!0), r === oe && s !== be && t.halt(!0);
                        else if (d == e.SM.ThumbnailManager.EVENT_NAVIGATE) switch (r) {
                        case re:
                            if (s === be) {
                                if (this._requestInProgress && c.albumId == i) return;
                                this._requestInProgress = !0, g.albumId = i, g.albumKey = u.getAttribute("data-key"), g.label = l, g.type = Te, g.clear = !0, t.halt(!0), this._uiRenderViewport(g)
                            } else if (s == ve) {
                                if (this._requestInProgress && c.folderId == i) return;
                                this._requestInProgress = !0, g.folderId = i, g.label = l, g.type = Ne, g.clear = !0, t.halt(!0), this._uiRenderViewport(g), this._thumbManager.remove(u)
                            }
                            break;
                        case oe:
                        case de:
                        case he:
                        case ue:
                            if (s === ve) {
                                if (this._requestInProgress && c.folderId == i) return;
                                this._requestInProgress = !0, g.folderId = i, g.label = l, g.type = Ne, g.clear = !0, t.halt(!0), this._uiRenderViewport(g), this._thumbManager.remove(u)
                            }
                    }
                },
                _uiUpdateFlags: function(e) {
                    var t = this.get(et).one(h + this.getClassName("flags")),
                        s = "";
                    e || (this._disableFlags.hasOwnProperty("aspect") && (s += "<p>" + this._disableFlags.aspect + " item" + (this._disableFlags.aspect > 1 ? "s have" : " has") + " been disabled for not meeting aspect requirements.</p>"), this._disableFlags.hasOwnProperty("printSize") && (s += "<p>" + this._disableFlags.printSize + " item" + (this._disableFlags.printSize > 1 ? "s have" : " has") + " been disabled for not meeting print size requirements.</p>")), t.setContent(s)
                },
                _uiPreviewOpen: function() {
                    0 !== this._thumbManager.get("selectedCount") && (this._preview || (this._preview = new c.ThumbnailPreview({
                        constrainTo: h + this.getClassName(w),
                        thumbManager: this._thumbManager
                    }), this._preview.render(this.get(et).ancestor("div")), this._preview.on(c.ThumbnailPreview.EVENT_PREVIEW_TOO_SMALL, this._handlePreviewTooSmall, this), this._preview.on(c.ThumbnailPreview.EVENT_PREVIEW_CLOSE, this._uiPreviewClose, this), this._preview.after("visibleChange", function(e) {
                        e.newVal === !1 && this._uiPreviewClose()
                    }, this)), this._preview.get("visible") === !1 ? this._preview.show(this._selectedDrawerOpen === !0 ? "selected" : "thumbnail") && (this.get(et).one(h + this.getClassName(O)).removeClass(H), this._buttons.preview.replaceClass(W, K), this._thumbManager.activateHotkeys(!1), this._thumbManager.activateSelect(!1), this._buttons.selectAll.hide()) : this._uiPreviewClose())
                },
                _uiPreviewClose: function() {
                    this._preview && this._preview.get("visible") === !0 && this._preview.hide(), this.get(et).one(h + this.getClassName(O)).addClass(H), this._buttons.preview.replaceClass(K, W);
                    var e = this._selectedDrawerOpen === !0 ? Oe : this._mainViewMode;
                    this._uiActivateThumbManager(e), this._buttons.selectAll.show(), this._uiHandleSelectAllButton(e)
                },
                _hideHelpMessage: function() {
                    var t = e.one(h + this.getClassName("help"));
                    t.setContent("")
                },
                _uiRenderViewport: function(t) {
                    if ("undefined" == typeof t || t !== !1) {
                        var s = this.get(xe),
                            i = null,
                            a = null;
                        if (r.isObject(s) && r.isObject(t) && s.type == t.type && (!t.hasOwnProperty("page") || 0 === t.page) && t.hasOwnProperty("authInfo") && !t.authInfo.authFlow) switch (s.type) {
                            case Te:
                                if (s.albumId == t.albumId) return;
                                break;
                            case Ne:
                            case Ie:
                                if (s.folderId == t.folderId) return;
                                break;
                            case Oe:
                        }
                        switch (r.isObject(t) || (t = {}), t.hasOwnProperty(at) || (t.type = Ee, t.clear = !0), t.type === Ne ? (t.hasOwnProperty("label") && "" !== t.label || (t.label = Me), t.hasOwnProperty("folderId") && !t.hasOwnProperty("folderType") && (i = this._thumbManager.makeUniqueKey(t.folderId, ve), a = this._thumbManager.getTreeData(i), t.folderType = a && a.typeInfo.hasOwnProperty("subCategoryId") ? we : fe)) : t.type === Oe && (t.label = ke), t.type === Oe || t.hasOwnProperty("page") || (this._uiToggleLoadingMask("show"), this._history.push(e.clone(t)), this._uiToggleSelected(!0)), t.hasOwnProperty("authInfo") && (t.authFlow = t.authInfo.authFlow, t.authPass = t.authInfo.pass, t.authSavePass = t.authInfo.savePass, delete t.authInfo), this.set(xe, t), this._uiHideEmptyView(), t.page && 0 !== t.page || this._uiUpdatePaginationProgress(!1), t.type) {
                            case Te:
                                this._getImages();
                                break;
                            case Oe:
                                this._uiRenderSelected();
                                break;
                            case Ne:
                            case Ie:
                                this._getFolders()
                        }
                    }
                },
                _uiRenderSelected: function() {
                    this._thumbManager.renderSelectedThumbs()
                },
                _uiToggleSelected: function(e) {
                    if (this._selectedDrawerOpen !== !1 || e !== !0) {
                        r.isObject(e) && e.halt(!0);
                        var t = this.get(et),
                            s = t.one(h + this.getClassName(S)),
                            i = this.get($e),
                            a = this.getClassName(P),
                            l = this._thumbManager.get(Ye),
                            n = H,
                            d = {
                                easing: "ease-in",
                                duration: .5,
                                opacity: 1,
                                on: {
                                    start: function() {
                                        i.removeClass(n)
                                    }
                                }
                            },
                            c = {
                                easing: "ease-out",
                                duration: .5,
                                opacity: 0,
                                on: {
                                    end: function() {
                                        i.addClass(n)
                                    }
                                }
                            };
                        if (this._selectedDrawerOpen === !1 && r.isObject(e)) {
                            if (0 === l) return;
                            this._uiPreviewClose(), s.removeClass(H), this._uiRenderViewport({
                                type: Oe
                            }), s.transition({
                                duration: .5,
                                delay: 0,
                                easing: "ease-out",
                                width: {
                                    value: this._viewSelectedWidth + u
                                },
                                on: {
                                    start: function() {
                                        o.ie > 0 ? (i.removeClass(n), i.setStyle("opacity", 1)) : i.transition(d)
                                    },
                                    end: function() {
                                        s.addClass(a)
                                    }
                                }
                            }), this._selectedDrawerOpen = !0, this._buttons.selected.replaceClass(W, K), this._thumbManager.setRenderType(it), this._uiHandleSelectAllButton(Oe), this._uiActivateThumbManager(Oe), this._uiTogglePreviewButton(this._thumbManager.get(Ye))
                        } else this._selectedDrawerOpen === !0 ? (s.transition({
                            duration: .5,
                            delay: 0,
                            easing: "ease-in",
                            width: {
                                value: 0
                            },
                            on: {
                                start: function() {
                                    s.removeClass(a), o.ie > 0 ? (i.addClass(n), i.setStyle("opacity", 0)) : i.transition(c)
                                },
                                end: function() {
                                    s.addClass(H)
                                }
                            }
                        }), this._selectedDrawerOpen = !1, this._buttons.selected.replaceClass(K, W), this._thumbManager.setRenderType(st), this._uiHandleSelectAllButton(this._mainViewMode), this._uiActivateThumbManager(this._mainViewMode), this._thumbManager.get(Ye) < 1 && this._buttons.selected.hide(), this._handleSelectCountChange({
                            newVal: this._thumbManager.get(Ye)
                        }), this._uiTogglePreviewButton(this._thumbManager.get(Xe))) : (i.hasClass(H) || (i.addClass(H), this._selectedDrawerOpen = !1), this._buttons.selected.hasClass(K) && this._buttons.selected.replaceClass(K, W))
                    }
                },
                _uiToggleLoadingMask: function(e) {
                    var t = this.get(et).one(h + this.getClassName(N));
                    "show" == e ? t.removeClass(H) : t.addClass(H)
                },
                _uiSetViewHeight: function(e) {
                    var t = this.get(et),
                        s = t.one(h + this.getClassName(f)),
                        i = t.one(h + this.getClassName(w)),
                        a = t.one(h + this.getClassName(S));
                    s.setStyle("height", e + u), i.setStyle("height", e + u), i.one(h + this.getClassName(_)).setStyle("height", e + u), a.setStyle("height", e + u), a.one(h + this.getClassName(_)).setStyle("height", e + u)
                },
                _uiUpdatePaginationProgress: function(e) {
                    var t, a = this.get(et).one(h + this.getClassName(L)),
                        l = a.one(h + this.getClassName(I)),
                        n = H,
                        o = {
                            easing: "ease-in",
                            duration: .5,
                            opacity: 1,
                            on: {
                                start: function() {
                                    l.removeClass(n)
                                }
                            }
                        },
                        d = {
                            easing: "ease-out",
                            duration: .5,
                            opacity: 0,
                            on: {
                                end: function() {
                                    l.addClass(n)
                                }
                            }
                        };
                    return e === !1 ? void l.transition(d) : (t = Math.floor((e.page + 1) / e.totalPages * 100), void(r.isNumber(t) && (s.render(i({
                        percentComplete: t
                    }), this._loadingProgressDOMNode), 0 === e.page && e.totalPages > 1 && l.hasClass(H) ? l.transition(o) : e.page === e.totalPages - 1 && l.transition(d))))
                },
                _uiShowEmptyView: function(t) {
                    var s = new e.SM.MessageBox({
                            message: t,
                            type: "alert"
                        }),
                        i = this.get(et).one(h + this.getClassName(y));
                    i.setContent(""), s.render(i), i.removeClass(H)
                },
                _uiHideEmptyView: function() {
                    this.get(et).one(h + this.getClassName(y)).addClass(H)
                },
                _uiHandleSelectAllButton: function(e) {
                    var t = this.get(Ke),
                        s = t[lt],
                        i = 0,
                        a = this.get("viewTotals"),
                        l = 0;
                    return t[nt] > 0 ? void this._buttons.selectAll.hide() : (a.hasOwnProperty(s) && (l = a[s]), void(t[nt] < 1 && e === Oe ? (this._buttons.selectAll.addClass(K), this._buttons.selectAll.removeClass(W), this._buttons.selectAll.set("disabled", !1), this._buttons.selectAll.show()) : l > 0 ? (i = this._thumbManager.getNumberOfSelectedThumbs(), this._buttons.selectAll.set("disabled", !1), this._buttons.selectAll.show(), i === l ? (this._buttons.selectAll.addClass(K), this._buttons.selectAll.removeClass(W)) : (this._buttons.selectAll.addClass(W), this._buttons.selectAll.removeClass(K))) : (this._buttons.selectAll.hide(), this._buttons.selectAll.set("disabled", !0), this._buttons.selectAll.addClass(W), this._buttons.selectAll.removeClass(K))))
                },
                _handleThumbnailSelectAll: function(e) {
                    this._buttons.selectAll.addClass(K), this._buttons.selectAll.removeClass(W), this._buttons.selectAll.set("disabled", !1)
                },
                _handleThumbnailSelectNone: function(e) {
                    this._buttons.selectAll.addClass(W), this._buttons.selectAll.set("disabled", !1), this._buttons.selectAll.removeClass(K)
                },
                _uiActivateThumbManager: function(e) {
                    var t = this.get(Ke),
                        s = t[lt],
                        i = this.get("viewTotals");
                    e === Oe || e === s || (s === de || s === he) && e !== re ? (this._thumbManager.activateHotkeys(!0), this._thumbManager.activateSelect(!0)) : e === de && r.isObject(i) && i.hasOwnProperty(s) && i[s] > 0 ? (this._thumbManager.activateSelect(!0), this._thumbManager.activateHotkeys(!0)) : (this._thumbManager.activateHotkeys(!1), this._thumbManager.activateSelect(!1))
                },
                _uiTogglePreviewButton: function(e) {
                    var t = this.get(Ke),
                        s = !1;
                    (e === !1 || l.winHeight() < 610) && (s = !0), s === !1 && t.mode === re && e > 0 ? (this._buttons.preview.set("disabled", !1), this._buttons.preview.show()) : (this._buttons.preview.hide(), this._buttons.preview.set("disabled", !0), this._uiPreviewClose())
                },
                _uiUpdateBreadcrumbs: function(t, s) {
                    var i, a, l = this.get(et),
                        n = this.get(xe),
                        r = l.one(h + this.getClassName(p)),
                        o = [];
                    if (n.type !== Oe && null !== t && this._selectedDrawerOpen !== !0 && !this.get("disableBreadCrumbs")) {
                        i = this._thumbManager.getTreeBranches(t), i.length > 0 && e.Array.each(i, function(e, t) {
                            var s;
                            s = e.key ? this._thumbManager.makeUniqueKey(e.id, e.type, e.key) : this._thumbManager.makeUniqueKey(e.id, e.type), s = "#" + s, o.push({
                                name: e.type === ye ? "Home" : e.name,
                                data: {
                                    key: t !== i.length - 1 ? s : ""
                                }
                            })
                        }, this), a = new e.SM.Views.Breadcrumb({
                            items: o
                        }), a.itemTemplate = '<li class="sm-breadcrumb-item"><a href="#" <% if (data.data && data.data.key) { %>data-key="<%= data.data.key %>"<% } %>><% if (data.icon) { %><span class="sm-fonticon sm-fonticon-small sm-fonticon-<%= data.icon %>"></span><% } %><%== data.name %></a></li>', a.render();
                        var d = a.getMenu();
                        d && d.on("itemClick", this._handleBreadcrumbMenuItemClick, this), r.setContent(a.get("container"))
                    }
                },
                _prefetchPath: function(t) {
                    var s = this.get(Ke),
                        i = ["disableEmpty", "disablePassworded", "disablePrivate", "disableUnlisted", "disableNonSellable", "limitAlbums"],
                        a = {
                            type: Ae,
                            mode: s.mode,
                            nickname: this.get(Le)
                        };
                    r.isNumber(s.userId) && (a.userId = s.userId), e.Array.each(i, function(e) {
                        s.hasOwnProperty(e) && (a[e] = s[e])
                    }), this._startPathNode = !0, this.set(Ge, !0), this._api.sendRequest({
                        method: ie,
                        freshRequest: !0,
                        data: e.merge(a, {
                            keyList: t.join(",")
                        }),
                        callback: {
                            context: this,
                            success: this._handlePickerResponse,
                            failure: this._handlePickerResponseFailure
                        },
                        cfg: {
                            method: "GET"
                        }
                    })
                },
                _prefetchSelection: function(t) {
                    var s, i, a, l = this.get(Ke),
                        n = ["disableEmpty", "disablePassworded", "disablePrivate", "disableUnlisted", "disableNonSellable", "limitAlbums"],
                        o = {
                            type: Ae,
                            mode: l.mode,
                            nickname: this.get(Le),
                            page: t,
                            size: this._prefetch.totalPages
                        };
                    r.isNumber(l.userId) && (o.userId = l.userId), e.Array.each(n, function(e) {
                        l.hasOwnProperty(e) && (o[e] = l[e])
                    }), s = t * Be, i = s + Be, a = {
                        keyList: this._prefetch.preSelected.slice(s, i).join(",")
                    }, this.set(Ge, !0), this._api.sendRequest({
                        method: se,
                        freshRequest: !0,
                        data: e.merge(o, a),
                        callback: {
                            context: this,
                            success: this._handlePickerResponse,
                            failure: this._handlePickerResponseFailure
                        },
                        cfg: {
                            method: "GET"
                        }
                    })
                },
                _getFolders: function() {
                    var t = this.get(xe),
                        s = this.get(Ke),
                        i = ["disableAlbum", "disableEmpty", "disableHideOwner", "disablePassworded", "disablePrivate", "disableUnlisted", "disableNonSellable", "limitAlbums", "disablePages", "disableSystemAlbums"],
                        a = {
                            nickname: this.get(Le),
                            page: this.get(He),
                            size: this.get(qe)
                        };
                    r.isNumber(s.userId) && (a.userId = s.userId), e.Array.each(i, function(e) {
                        s.hasOwnProperty(e) && (a[e] = s[e])
                    }), t.hasOwnProperty("folderId") && null === t.folderId && delete t.folderId, this.set(Ge, !0), this._api.sendRequest({
                        method: ee,
                        freshRequest: !0,
                        data: e.merge(a, t),
                        callback: {
                            context: this,
                            success: this._handlePickerResponse,
                            failure: this._handlePickerResponseFailure
                        },
                        cfg: {
                            method: "GET"
                        }
                    })
                },
                _getImages: function() {
                    var t = this.get(xe),
                        s = this.get(Ke),
                        i = ["disableCollected", "disableHidden", "disablePhoto", "disableVideo", "disableArchive", "disableNonPriceable", "disablePassworded", "disablePrivate", "disableUnlisted", "disableNonPrintable", "disableNonSellable"],
                        a = {
                            nickname: this.get(Le),
                            page: this.get(He),
                            size: this.get(qe)
                        };
                    r.isNumber(s.userId) && (a.userId = s.userId), e.Array.each(i, function(e) {
                        s.hasOwnProperty(e) && (a[e] = s[e])
                    }), this.set(Ge, !0), this._api.sendRequest({
                        method: te,
                        freshRequest: !0,
                        data: e.merge(a, t),
                        callback: {
                            context: this,
                            success: this._handlePickerResponse,
                            failure: this._handlePickerResponseFailure
                        },
                        cfg: {
                            method: "GET"
                        }
                    })
                },
                _handlePickerResponse: function(t) {
                    var s = this.get(et).one(h + this.getClassName(w)),
                        i = this.get(xe),
                        a = this.get(Ke),
                        l = null,
                        n = t.response,
                        o = n.meta,
                        d = o.method,
                        u = n.results,
                        c = u.hasOwnProperty("nDeep") ? "true" == u.nDeep : null,
                        g = u.Pagination,
                        p = u.viewConfig,
                        m = g && g.page && g.size ? g.page * g.size : null,
                        b = null,
                        _ = null,
                        v = null;
                    if (c === !0 && (this._thumbManager.set("nDeep", !0), this._defaultRoot = u.nDeepRootID + "-" + ye), "ok" === o.stat) {
                        if (this.set(Ge, !1), r.isObject(i) && i.clear && ("" !== this._thumbManager.get(je) && this._thumbManager.set(je, ""), this._thumbManager.setRenderType(st).clear(), delete i.clear, this.set(xe, i)), r.isObject(i) && r.isObject(p) && "view-selected" != i.type) {
                            if (i.type != p.type) return;
                            switch (i.type) {
                                case Ie:
                                case Ne:
                                    if (i.folderId != p.folderId) return;
                                    break;
                                case Te:
                                    if (i.albumId != p.albumId) return
                            }
                        }
                        if (u.hasOwnProperty("AuthGallery")) this._handlePasswordProtectedAlbumOrNode(u);
                        else {
                            switch (this._startPathPassword && (this._startPathNode = !1), d) {
                                case se:
                                    return this._thumbManager.setRenderType(it), u.hasOwnProperty("Folders") && e.Array.each(u.Folders, function(e) {
                                            this._thumbManager.add(e)
                                        }, this), u.hasOwnProperty("Albums") && e.Array.each(u.Albums, function(e) {
                                            this._thumbManager.add(e)
                                        }, this), u.hasOwnProperty("Images") && e.Array.each(u.Images, function(e) {
                                            this._thumbManager.add(e)
                                        }, this), u.hasOwnProperty("Pages") && e.Array.each(u.Pages, function(e) {
                                            this._thumbManager.add(e)
                                        }, this), u.hasOwnProperty("Nodes") && e.Array.each(u.Nodes, function(e) {
                                            this._thumbManager.add(e)
                                        }, this), g.page < this._prefetch.totalPages - 1 && this._prefetchSelection(g.page + 1),
                                        void this._thumbManager.setRenderType(st);
                                case ie:
                                    return this._thumbManager.addToTree({
                                        typeId: c === !0 ? u.nDeepRootID : "00",
                                        type: ye,
                                        typeInfo: {
                                            name: Me,
                                            parentId: null
                                        }
                                    }, this._defaultRoot), u.hasOwnProperty("Folders") && e.Array.each(u.Folders, function(e) {
                                        this._thumbManager.addToTree(e, this._thumbManager.makeUniqueKey(e.typeId, e.type))
                                    }, this), u.hasOwnProperty("Albums") && e.Array.each(u.Albums, function(e) {
                                        this._thumbManager.addToTree(e, this._thumbManager.makeUniqueKey(e.typeId, e.type))
                                    }, this), void(u.hasOwnProperty("LastItem") && this._uiUpdateBreadcrumbs(u.LastItem));
                                case ee:
                                    this._thumbManager.setRenderType(st), l = de, _ = ce[ve.toLowerCase()], b = p.hasOwnProperty("folderId") && !r.isNull(p.folderId) ? p.folderId + "-" + ve : this._defaultRoot, this._rpcTotals.hasOwnProperty(b) || (c === !0 ? this._rpcTotals[b] = {
                                        folder: 0,
                                        album: 0,
                                        image: 0,
                                        video: 0,
                                        page: 0
                                    } : this._rpcTotals[b] = {
                                        category: 0,
                                        subcategory: 0,
                                        album: 0,
                                        image: 0,
                                        video: 0
                                    }), u.hasOwnProperty("Folders") ? v = u.Folders : u.hasOwnProperty("Categories") ? v = u.Categories : u.hasOwnProperty("SubCategories") && (v = u.SubCategories), null !== v && e.Array.each(v, function(e) {
                                        c === !1 && (e.typeInfo.parentId = b), this._thumbManager.add(e), c === !0 ? this._rpcTotals[b].folder++ : b == this._defaultRoot ? this._rpcTotals[b].category++ : this._rpcTotals[b].subcategory++
                                    }, this), "page" !== a.mode && u.hasOwnProperty("Albums") && (null === v && (l = oe), e.Array.each(u.Albums, function(e) {
                                        c === !1 && (e.typeInfo.parentId = b), this._thumbManager.add(e), this._rpcTotals[b].album++
                                    }, this)), u.hasOwnProperty("Pages") && e.Array.each(u.Pages, function(e) {
                                        this._thumbManager.add(e), this._rpcTotals[b].page++
                                    }, this), s.hasClass(this.getClassName(T)) && s.removeClass(this.getClassName(T)), s.addClass(this.getClassName(k)), b == this._defaultRoot && this._thumbManager.addToTree({
                                        typeId: c === !0 ? u.nDeepRootID : "00",
                                        type: ye,
                                        typeInfo: {
                                            name: Me,
                                            parentId: null
                                        }
                                    }, this._defaultRoot), g && g.page === g.totalPages - 1 ? (this.set("viewTotals", this._rpcTotals[b]), this._uiUpdateBreadcrumbs(b, this._rpcTotals[b]), delete this._rpcTotals[b]) : this._uiUpdateBreadcrumbs(b), this._uiUpdateFlags(!0);
                                    break;
                                case te:
                                    this._thumbManager.setRenderType(st), l = re, b = p.albumId + "-" + be, _ = ce[be.toLowerCase()], this._rpcTotals.hasOwnProperty(b) || (this._rpcTotals[b] = {
                                        image: 0,
                                        video: 0
                                    }), u.hasOwnProperty("Images") && (e.Array.each(u.Images, function(e) {
                                        var t = null,
                                            s = null,
                                            i = !1;
                                        a.hasOwnProperty("requireAspect") ? (t = this._thumbManager.getLargestSize(e.typeInfo.Sizes, !1), s = this._thumbManager.getAspect(t.width, t.height), e.typeInfo.isDisabled = s !== a.requireAspect ? !0 : !1, e.typeInfo.isDisabled === !0 && (this._disableFlags.hasOwnProperty("aspect") || (this._disableFlags.aspect = 0), this._disableFlags.aspect++)) : a.hasOwnProperty("requireSize") && (t = this._thumbManager.getLargestSize(e.typeInfo.Sizes, !0), i = a.hasOwnProperty("requireSizeStrict") ? a.requireSizeStrict : !1, e.typeInfo.isDisabled = !this._thumbManager.checkSize(t.width, t.height, a.requireSize.width, a.requireSize.height, i), e.typeInfo.isDisabled === !0 && (this._disableFlags.hasOwnProperty("printSize") || (this._disableFlags.printSize = 0), this._disableFlags.printSize++)), this._thumbManager.add(e), "mp4" == e.typeInfo.format ? this._rpcTotals[b].video++ : this._rpcTotals[b].image++
                                    }, this), s.hasClass(this.getClassName(k)) && s.removeClass(this.getClassName(k)), s.addClass(this.getClassName(T))), g && g.page == g.totalPages - 1 ? (this.set("viewTotals", this._rpcTotals[b]), this._uiUpdateBreadcrumbs(b, this._rpcTotals[b]), delete this._rpcTotals[b]) : this._uiUpdateBreadcrumbs(b), e.Object.size(this._disableFlags) > 0 && this._uiUpdateFlags()
                            }
                            0 === this._thumbManager.get("thumbKeys").length ? this._uiShowEmptyView(r.sub($, {
                                parentType: _
                            })) : this._thumbManager.renderDefaultThumbs(m), this._uiToggleLoadingMask("hide"), this._requestInProgress = !1, g && g.page < g.totalPages - 1 && (p.page = g.page + 1, this._uiRenderViewport(p)), g && g.total > 0 && this._uiUpdatePaginationProgress(g), this._uiActivateThumbManager(l), this._uiHandleSelectAllButton(l), this._mainViewMode = l
                        }
                    }
                },
                _handlePickerResponseFailure: function(e) {
                    console.error("response failure", e)
                },
                _handlePasswordProtectedAlbumOrNode: function(t) {
                    var s = '<div><span class="sm-label-overhead">Hint:</span><h4>"{hint}"</h4></div>',
                        i = new e.SM.Panel.Confirm({
                            centered: !0,
                            width: "500px",
                            modal: !0,
                            disableScrollbars: !0,
                            title: "This Folder Requires a Password",
                            confirmLabel: "Let Me In",
                            cancelLabel: "Cancel",
                            zIndex: 1
                        });
                    if (i._onButtonClick = function(t) {
                            "confirm" !== t.currentTarget.getData("value") || n.get("value") ? e.SM.Panel.Confirm.prototype._onButtonClick.call(this, t) : this._hasEmptyError || (l.setStyles({
                                marginBottom: "20px",
                                position: "relative"
                            }), n.addClass("sm-form-field-error").setStyle("bottom", "0"), l.append('<div class="sm-form-field-error-msg">Please enter a value.</div>'), this._hasEmptyError = !0)
                        }, i.render(), this._passwordPanelOpen = !0, t.AuthGallery.hasOwnProperty("hasHint") && t.AuthGallery.hasHint) {
                        var a = e.Node.create(e.Lang.sub(s, {
                            hint: t.AuthGallery.hint
                        }));
                        i.getStdModNode(e.WidgetStdMod.BODY, !0).append(a)
                    }
                    var l = e.Node.create('<div class="sm-search-form-input-container" />'),
                        n = e.Node.create(e.SM.Templates.textbox({
                            name: "Password",
                            placeholder: "Enter password here...",
                            type: "password"
                        }));
                    t.AuthGallery.hasOwnProperty("password") && n.set("value", t.AuthGallery.password), i.getStdModNode(e.WidgetStdMod.BODY, !0).append(l.append(n));
                    var r = e.Node.create('<div class="sm-node-password-remember"></div>'),
                        o = new e.SM.Fields.Checkbox({
                            label: "Remember Password",
                            value: "1",
                            unselectedValue: "0"
                        }).render(r);
                    i.getStdModNode(e.WidgetStdMod.BODY, !0).append(r), i.getStdModNode(e.WidgetStdMod.BODY).setStyles({
                        marginLeft: "18px",
                        marginRight: "18px"
                    }), i.getStdModNode(e.WidgetStdMod.HEADER).setStyle("textAlign", "center"), i.on("confirm", function(e) {
                        var s = {},
                            a = "",
                            l = "",
                            r = "",
                            h = {
                                authFlow: !1,
                                pass: "",
                                savePass: "0"
                            };
                        e.confirmed ? (h = {
                            authFlow: !0,
                            pass: n.get("value"),
                            savePass: o.getValue()
                        }, t.viewConfig.hasOwnProperty("albumId") ? (a = t.viewConfig.albumId, r = t.viewConfig.albumKey) : t.viewConfig.hasOwnProperty("folderId") ? a = t.viewConfig.folderId : t.viewConfig.hasOwnProperty("typeId") && (a = t.viewConfig.typeId), l = De.hasOwnProperty(t.viewConfig.type) ? De[t.viewConfig.type] : t.viewConfig.type, i.destroy(!0), this._passwordPanelOpen = !1, this._navigateToNewItem(t.viewConfig.label, a, l, r, h)) : (s = t.AuthGallery.hasOwnProperty("viewConfig") ? t.AuthGallery.viewConfig : {
                            niceName: "",
                            typeId: "00",
                            type: ye,
                            typeDataKey: ""
                        }, i.destroy(!0), this._passwordPanelOpen = !1, this._startPathNode && this.get("config").closeOnPasswordCancel ? (this._startPathPassword = null, this.fire(le, {})) : this._navigateToNewItem(s.niceName, s.typeId, s.type, s.typeDataKey, h))
                    }, this)
                }
            }, {
                CSS_PREFIX: g,
                ATTRS: {
                    nickName: {
                        value: null
                    },
                    page: {
                        value: Fe
                    },
                    tree: {
                        value: {}
                    },
                    pagesize: {
                        value: Re
                    },
                    viewConfig: {
                        value: null
                    },
                    overlay: {
                        value: null
                    },
                    config: {
                        value: {}
                    },
                    thumbData: {
                        value: []
                    },
                    viewTotals: {
                        value: {}
                    },
                    disableBreadCrumbs: {
                        value: !1
                    },
                    visible: {
                        value: !1
                    },
                    requestSent: {
                        value: !1
                    },
                    nodeMore: {
                        value: null
                    },
                    nodeViewport: {
                        value: null
                    },
                    nodeViewMain: {
                        value: null
                    },
                    nodeScreen: {
                        value: null
                    }
                },
                EVENT_SELECT: g + ":" + ae,
                EVENT_CANCEL: g + ":" + le,
                EVENT_USER_FAIL: g + ":" + ne,
                TAB_CATEGORIES: pe,
                TAB_GALLERIES: ge,
                TAB_SELECTED: me,
                MODE_IMAGE: re,
                MODE_ALBUM: oe,
                MODE_NODE: he,
                MODE_FOLDER: de,
                MODE_PAGE: ue,
                REAL_TITLES: ce
            });
        e.namespace("SM").Picker = module.exports = ot
    }(), SM.currentModule = null
}, "", {
    requires: ["anim", "base", "event-custom", "event-custom-complex", "node", "react", "react-dom", "sm-api", "sm-breadcrumb-view", "sm-button", "sm-overlay", "sm-picker-history", "sm-progressbar", "sm-thumbnail", "sm-thumbnail-manager", "sm-thumbnail-preview", "stylesheet", "substitute", "transition", "widget", "sm-panel-confirm", "model", "sm-templates-form", "sm-fields"]
});
YUI.add("sm-plan-model", function(e) {
    SM.currentModule = "sm-plan-model";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        var n = e.Base.create("sm-plan", e.Model, [e.SM.ModelSyncAPI, e.ModelRelate], {
            apiEndpoint: "plan",
            idAttribute: "NickName",
            validate: function(e) {},
            _sanitizeInt: function(e) {
                return parseInt(e, 10)
            },
            _sanitizeEmpty: function(n) {
                return e.Lang.trim(n)
            }
        }, {
            ATTRS: {
                NickName: {
                    value: null
                },
                PlanID: {
                    value: 0,
                    setter: "_sanitizeInt"
                },
                TermPrice: {
                    value: 0
                },
                Description: {
                    value: ""
                },
                Term: {
                    value: 0,
                    setter: "_sanitizeInt"
                }
            }
        });
        e.namespace("SM.Models").Plan = n
    }(), SM.currentModule = null
}, "", {
    requires: ["base", "model", "model-relate", "sm-api", "sm-model-history", "sm-model-sync-api"]
});
YUI.add("sm-pretty-date", function(e) {
    SM.currentModule = "sm-pretty-date";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        /*!
         * JavaScript Pretty Date
         * Copyright (c) 2011 John Resig (ejohn.org)
         * Licensed under the MIT and GPL licenses.
         */
        function e(e) {
            var r = new Date((e || "").replace(/-/g, "/").replace(/[TZ]/g, " ")),
                t = ((new Date).getTime() - r.getTime()) / 1e3,
                a = Math.floor(t / 86400),
                o = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
            return isNaN(a) || 0 > a ? void 0 : 0 == a && (60 > t && "just now" || 120 > t && "1 minute ago" || 3600 > t && Math.floor(t / 60) + " minutes ago" || 7200 > t && "1 hour ago" || 86400 > t && Math.floor(t / 3600) + " hours ago") || 1 == a && "Yesterday" || 7 > a && a + " days ago" || 31 > a && Math.ceil(a / 7) + " weeks ago" || "on " + o[r.getMonth()] + " " + r.getDate() + ", " + r.getFullYear()
        }
        module.exports = e
    }(), SM.currentModule = null
}, "", {
    requires: []
});
YUI.add("sm-pretty-size", function(e) {
    SM.currentModule = "sm-pretty-size";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: !0
        });
        var e = SM["import"]("sm-smuglog"),
            r = ["B", "KB", "MB", "GB", "TB"];
        exports["default"] = function(t) {
            var s = parseFloat(t);
            if (Number.isNaN(s)) throw e.error("sm-pretty-size", {
                message: "Invalid size given",
                size: t
            });
            for (var u = -1; ++u < 4 && Math.abs(s) >= 1024;) s /= 1024;
            return s.toFixed(2) + " " + r[u]
        }, module.exports = exports["default"]
    }(), SM.currentModule = null
}, "", {
    requires: ["sm-smuglog"]
});
YUI.add("sm-procontact-overlay", function(e) {
    SM.currentModule = "sm-procontact-overlay";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        function t(e, t) {
            this._form = e, this._fieldCfg = t
        }
        var a = SM["import"]("sm-io-core"),
            s = e.SM.Page,
            i = '<div class="yui3-g sm-procontact-overlay"><div class="yui3-u-1-4 sm-contact-pro-biophoto"></div><div class="yui3-u-3-4 sm-contact-pro-form"></div></div>',
            n = e.Template.Micro.compile("Message sent! Any response will go to <%= data.responseEmail %>.");
        t.prototype.render = function(e) {
            e.append('<div class="sm-form-field-overhead"><label class="sm-label">To: ' + this._fieldCfg.displayName + "</label></div>")
        };
        var o = e.Base.create("sm-prodcontact-overlay", e.SM.Panel, [], {
            _fieldNames: [{
                formName: "email",
                friendlyName: "Email address"
            }, {
                formName: "subject",
                friendlyName: "Email subject"
            }, {
                formName: "question",
                friendlyName: "Message"
            }],
            initializer: function() {
                e.SM.Form.registerFormField("toLabel", t), this._userNickname = this.get("userNickname") || s.owner.nickName, this._attachEvents(), this._loadPageOwnerInfo()
            },
            destructor: function() {
                new e.EventHandle(this._contactEvents).detach(), this._contactEvents = null, this._contactForm.destroy()
            },
            hide: function() {
                o.superclass.hide.call(this);
                var e = this._contactForm;
                e.get("model").setAttrs({
                    subject: "",
                    question: ""
                }), e.clearAllErrors()
            },
            _attachEvents: function() {
                var t = this._boundingBox = this.get("boundingBox");
                this._contactEvents = [this.after("render", this._afterRender(), this), this.on("visibleChange", this._onVisibleChange, this), t.delegate("click", this._onButtonClick, ".sm-button:not([disabled])", this), e.on("windowresize", this._onWindowResize, null, this)]
            },
            _loadPageOwnerInfo: function() {
                s.api.sendRequest({
                    method: "rpc.page.getprocontact",
                    freshRequest: !0,
                    data: {
                        nickname: this._userNickname
                    },
                    callback: {
                        context: this,
                        success: this._handlePageOwnerLoad,
                        failure: this._handlePageOwnerLoad
                    },
                    cfg: {
                        method: "GET"
                    }
                })
            },
            _sendMessage: function() {
                var e = this._contactForm.get("model").toJSON(),
                    t = e.email;
                this._emailFrom = t, a({
                    uri: "/api/v2/user/" + this._userNickname + "!procontact",
                    type: "v2",
                    method: "POST",
                    data: {
                        fromEmail: t,
                        subject: e.subject,
                        body: e.question,
                        referrer: window.location.href
                    }
                }).then(this._handleSendEmail.bind(this), this._handleSendEmailFailure.bind(this))
            },
            _validateFields: function() {
                for (var t, a, s = this._contactForm, i = s.get("model"), n = /^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/, o = [], l = 0, r = this._fieldNames.length; r > l; l++) t = this._fieldNames[l], a = e.Lang.trim(i.get(t.formName)), a ? "email" !== t.formName || a.match(n) ? "question" === t.formName && a.length > 65536 && o.push({
                    Field: t.formName,
                    Message: "Message is too long, please try to reduce the length of your message."
                }) : o.push({
                    Field: t.formName,
                    Message: "Please enter a valid email address."
                }) : o.push({
                    Field: t.formName,
                    Message: t.friendlyName + " is required."
                });
                return o.length ? (s.setErrors(o), !1) : (s.clearAllErrors(), !0)
            },
            _afterRender: function() {
                var t = e.Node.create(i),
                    a = t.one(".sm-contact-pro-form"),
                    n = this._contactForm = new e.SM.Form({
                        fields: [{
                            type: "toLabel",
                            displayName: this.get("displayName")
                        }, {
                            type: "text",
                            label: "Your Email Address",
                            name: "email",
                            value: s.user ? s.user.email || "" : ""
                        }, {
                            type: "text",
                            label: "Subject",
                            name: "subject"
                        }, {
                            type: "textarea",
                            label: "Message",
                            name: "question"
                        }]
                    });
                this._boundingBox.addClass("sm-panel-contact"), a.append(n.render().get("container")), n.getField("email").container.setStyle("marginTop", 0), this.setStdModContent(e.WidgetStdMod.BODY, t)
            },
            _handlePageOwnerLoad: function(t) {
                var a, s = t.response,
                    i = s.results;
                if ("ok" !== s.meta.stat) return !1;
                if (a = this.get("boundingBox").one(".sm-contact-pro-biophoto"), this.set("displayName", i.User.displayName), i.bioImageModel && i.bioImageModel.ImageID > 0) {
                    var n = new e.SM.Models.Image(i.bioImageModel),
                        o = new e.SM.Views.Tile({
                            resource: n,
                            clickable: !1,
                            showInfo: !1,
                            imageCrop: "1x1",
                            imageSize: "Th",
                            parentNode: a
                        });
                    o.render()
                } else a.append('<img src="/img/contactus/nobio.jpg" />')
            },
            _handleSendEmail: function() {
                this._sendAttempts = 0, this.hide(), e.SM.Toast.display(n({
                    responseEmail: this._emailFrom
                }))
            },
            _handleSendEmailFailure: function() {
                this._enableSubmit(), e.SM.Toast.display("We're awfully sorry, but there was a problem sending your email. Please try again.")
            },
            _onButtonClick: function(e) {
                var t = e.currentTarget.getData("value");
                "send" === t ? this._validateFields() && (this._disableSubmit(), this._sendMessage()) : this.hide()
            },
            _onVisibleChange: function(e) {
                e.newVal && (this._enableSubmit(), this.centered())
            },
            _onWindowResize: function() {
                this.centered()
            },
            _enableSubmit: function() {
                var e = this.get("contentBox").one(".sm-contact-submit");
                e && (e.removeClass("sm-button-disabled"), e.removeAttribute("disabled"))
            },
            _disableSubmit: function() {
                var e = this.get("contentBox").one(".sm-contact-submit");
                e && (e.addClass("sm-button-disabled"), e.setAttribute("disabled", !0))
            }
        }, {
            CSS_PREFIX: "sm-panel",
            ATTRS: {
                centered: {
                    value: !0
                },
                constrain: {
                    value: !0
                },
                displayName: {
                    value: "Me"
                },
                modal: {
                    value: !0
                },
                smbuttons: {
                    valueFn: function() {
                        return [{
                            label: "Cancel",
                            value: "cancel"
                        }, {
                            label: "Send",
                            value: "send",
                            skin: "submit",
                            className: "sm-contact-submit"
                        }]
                    }
                },
                title: {
                    value: null,
                    getter: function(e) {
                        return e || (e = "Contact " + this.get("displayName"), this._setStateVal("title", e)), e
                    }
                },
                titleLocation: {
                    value: "outside"
                },
                userNickname: {}
            }
        });
        e.namespace("SM").ProContactOverlay = o
    }(), SM.currentModule = null
}, "", {
    requires: ["base", "sm", "sm-io", "sm-api2-transaction", "sm-panel", "sm-page", "sm-tile-view", "sm-form", "sm-image-model", "sm-image-template", "sm-toast"]
});
YUI.add("sm-progressbar", function(e) {
    SM.currentModule = "sm-progressbar";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        var e = SM["import"]("classnames"),
            s = SM["import"]("react"),
            r = function(r) {
                var t = r.className,
                    a = r.message,
                    m = r.percentComplete,
                    n = "number" != typeof m;
                return s.createElement("div", {
                    className: e("sm-progress", t),
                    "data-indeterminate": n ? "" : null
                }, a && s.createElement("div", {
                    className: "sm-progress-message"
                }, a), s.createElement("div", {
                    className: "sm-progress-bar"
                }, s.createElement("div", {
                    className: "sm-progress-complete",
                    style: {
                        width: n ? null : m + "%"
                    }
                })))
            },
            t = s.PropTypes;
        r.propTypes = {
            message: t.string,
            percentComplete: t.number
        }, module.exports = r
    }(), SM.currentModule = null
}, "", {
    requires: ["classnames", "react"]
});
YUI.add("sm-promise-fix", function(r) {
    SM.currentModule = "sm-promise-fix";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        "use strict";
        var e = r.SM.SmugLog,
            o = r.Promise.Resolver.prototype.reject;
        r.Promise.Resolver.prototype.reject = function(n) {
            var i = !!this._errbacks.length;
            if (o.call(this, n), !i && (n instanceof ReferenceError || n instanceof SyntaxError || n instanceof TypeError)) {
                var t = r.config.win ? r.config.win.location.href : null;
                e.add("Unhandled Promise Error", {
                    url: t,
                    stack: n.stack
                }, e.LEVEL_ERROR)["catch"](function() {
                    e.error("Failure logging unhandled promise error.")
                })
            }
        }, r.Promise.isPromise = function(r) {
            return r && "function" == typeof r.then
        }
    }(), SM.currentModule = null
}, "", {
    requires: ["promise", "sm-smuglog"],
    condition: {
        trigger: "promise"
    }
});
YUI.add("sm-quicknews", function(e) {
    SM.currentModule = "sm-quicknews";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        "use strict";
        var n = SM["import"]("sm-dom"),
            t = SM["import"]("sm-component-panel-modal"),
            s = SM["import"]("sm-component-panel-base"),
            r = SM["import"]("sm-component-pure-render"),
            o = SM["import"]("react"),
            l = o.PropTypes,
            a = n.classList(n.doc.body),
            c = function(e) {
                function n() {
                    return babelHelpers.classCallCheck(this, n), babelHelpers.possibleConstructorReturn(this, (n.__proto__ || Object.getPrototypeOf(n)).apply(this, arguments))
                }
                return babelHelpers.inherits(n, e), babelHelpers.createClass(n, [{
                    key: "componentDidMount",
                    value: function() {
                        this.refs.modal.focusContent(), a.add("sm-quicknews-body-scroll-fix")
                    }
                }, {
                    key: "componentWillUnmount",
                    value: function() {
                        a.remove("sm-quicknews-body-scroll-fix")
                    }
                }, {
                    key: "render",
                    value: function() {
                        return o.createElement(t, {
                            ref: "modal"
                        }, o.createElement(s, {
                            className: "sm-quicknews-panel"
                        }, o.createElement(s.Header, null, o.createElement(s.CloseButton, {
                            onClick: this.props.onClose
                        }), o.createElement("h1", null, "What's New At SmugMug")), o.createElement(s.Body, null, this.props.entries && this.props.entries.map(function(e, n) {
                            return o.createElement("div", {
                                key: n,
                                className: "sm-quicknews-entry"
                            }, o.createElement("h5", {
                                className: "sm-quicknews-date"
                            }, new Date(e.Time).toLocaleDateString()), o.createElement("h2", null, e.Title), o.createElement("p", {
                                className: "sm-text-large",
                                dangerouslySetInnerHTML: {
                                    __html: e.News.replace(/(\r\n|\n|\r)/gm, "<br />")
                                }
                            }))
                        }))))
                    }
                }]), n
            }(r);
        c.propTypes = {
            entries: l.arrayOf(l.shape({
                News: l.string,
                Time: l.string,
                Title: l.string
            })),
            onClose: l.func.isRequired
        }, e.SM.Page.on("page:init", function(n) {
            n.loadQuickNews && e.SM.API2.getUser(e.SM.Page.user.nickName, {
                fields: [],
                expand: {
                    UserLatestQuickNews: !0
                }
            }).then(function(e) {
                if (e && e.response) {
                    var n = e.response.UserLatestQuickNews;
                    n && n.length > 0 && ! function() {
                        var e = t.mount(o.createElement(c, {
                            entries: n,
                            onClose: function() {
                                t.unmount(e)
                            }
                        }))
                    }()
                }
            })
        })
    }(), SM.currentModule = null
}, "", {
    requires: ["sm", "sm-component-panel-modal", "sm-component-panel-base", "sm-component-pure-render", "sm-dom", "react", "sm-api2"]
});
YUI.add("sm-react-helper-render-to-shared-node", function(e) {
    SM.currentModule = "sm-react-helper-render-to-shared-node";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        var r = (SM["import"]("react"), SM["import"]("react-dom")),
            n = {
                mount: function(e, n, o) {
                    n.getDOMNode && (n = n.getDOMNode());
                    var t, d = n.ownerDocument;
                    t = n.appendChild(d.createElement("div"));
                    var u = r.render(e, t, function() {
                        o && o(u)
                    });
                    return u
                },
                unmount: function(n) {
                    var o = n && r.findDOMNode(n),
                        t = o && o.parentNode;
                    t && (r.unmountComponentAtNode(t), t.parentNode.removeChild(t), "undefined" != typeof e && "function" == typeof e.Node && t._yuid && e.Node(t).destroy())
                }
            };
        e.namespace("SM.ReactHelper").RenderToSharedNode = n, module.exports = n
    }(), SM.currentModule = null
}, "", {
    requires: ["react", "react-dom", "sm"]
});
YUI.add("sm-redux-store", function(r) {
    SM.currentModule = "sm-redux-store";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";

        function r(r, e, t) {
            var s = r,
                n = !0,
                u = !1,
                m = void 0;
            try {
                for (var o, i = t[Symbol.iterator](); !(n = (o = i.next()).done); n = !0) {
                    var a = o.value;
                    s = a(s, e)
                }
            } catch (d) {
                u = !0, m = d
            } finally {
                try {
                    !n && i["return"] && i["return"]()
                } finally {
                    if (u) throw m
                }
            }
            return s
        }
        Object.defineProperty(exports, "__esModule", {
            value: !0
        });
        var e = SM["import"]("redux"),
            t = e.createStore,
            s = e.applyMiddleware,
            n = e.combineReducers,
            u = e.compose,
            m = SM["import"]("sm-dom"),
            o = SM["import"]("sm-io-core");
        SM["import"]("sm-api2-transaction");
        var i = SM["import"]("redux-thunk")["default"],
            a = SM["import"]("sm-comments-reducers"),
            d = a.comments,
            c = a.commentsUser,
            l = function() {
                var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
                    t = arguments[1],
                    s = [SM["import"]("sm-gallery-settings-reducers").UI, SM["import"]("sm-lightbox-reducers").UI, SM["import"]("sm-w9-reducers").UI];
                return r(e, t, s)
            },
            p = function() {
                var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
                    t = arguments[1],
                    s = [SM["import"]("sm-gallery-settings-reducers").DATA, SM["import"]("sm-api-redux-reducers").DATA, SM["import"]("sm-w9-reducers").DATA];
                return r(e, t, s)
            },
            g = function() {
                var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
                    t = arguments[1],
                    s = [SM["import"]("sm-api-redux-reducers").INTERNAL, SM["import"]("sm-api-redux-paginator-reducers").INTERNAL];
                return r(e, t, s)
            },
            M = t(n({
                comments: d,
                commentsUser: c,
                ui: l,
                data: p,
                _internal: g
            }), u(s(i.withExtraArgument({
                io: o
            })), "-min" !== SM.env.jsLevel && m.win.devToolsExtension ? m.win.devToolsExtension() : function(r) {
                return r
            }));
        exports["default"] = M, module.exports = exports["default"]
    }(), SM.currentModule = null
}, "", {
    requires: ["redux", "redux-thunk", "sm", "sm-api-redux-paginator-reducers", "sm-api-redux-reducers", "sm-api2-transaction", "sm-comments-reducers", "sm-dom", "sm-gallery-settings-reducers", "sm-io-core", "sm-lightbox-reducers", "sm-w9-reducers"]
});
YUI.add("sm-request-queue", function(t) {
    SM.currentModule = "sm-request-queue";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        function e() {
            this._groups = {}
        }
        t.mix(e.prototype, {
            abort: function(t) {
                var e = this._groups[t];
                if (e) {
                    for (delete this._groups[t]; e.length;) e.shift().abort();
                    return this
                }
            },
            add: function(u, n, s) {
                var r, o = this._groups[u],
                    i = this;
                return o || (o = this._groups[u] = [], o.options = s || {}), r = new t.Promise(function(s, r) {
                    function a() {
                        i.remove(u, d.id), !o.options.abortOnFailure || "aborted" !== d.status && "failure" !== d.status ? i._next(u) : i.abort(u)
                    }
                    var d = this;
                    d.groupName = u, d.id = t.guid("request-queue"), d.status = "pending", d.abort = function() {
                        d.status = "aborted", d._trx && d._trx.abort(), a()
                    }, d.send = function() {
                        if ("pending" !== d.status) return "running" !== d.status && i._next(u), d;
                        var o = i._mockIO || e._mockIO || t.SM.io;
                        return d.status = "running", d._trx = o(n), d._trx.then(function(t) {
                            d.status = "success", a(), s(t)
                        }, function(t) {
                            d.status = "failure", a(), r(t)
                        }), d
                    }
                }), o.push(r), this._next(u), r
            },
            isBusy: function() {
                return t.Object.some(this._groups, function(t) {
                    return t && t.length
                })
            },
            remove: function(e, u) {
                var n, s = this._groups[e];
                if (s) return t.Array.some(s, function(t, e) {
                    return t.id === u ? (n = t, s.splice(e, 1), !0) : void 0
                }), s.length || delete this._groups[e], n
            },
            _next: function(t) {
                var e = this._groups[t],
                    u = e && e[0],
                    n = this;
                u && "pending" === u.status && (e.delayTimeout || (e.options.delay ? (e.delayTimeout = setTimeout(function() {
                    e.delayTimeout = null, n._next(t)
                }, e.options.delay), e.options.delay = null) : u.send()))
            }
        }), t.SM.RequestQueue = e
    }(), SM.currentModule = null
}, "", {
    requires: ["promise", "sm-api2"]
});
YUI.add("sm-resource-album-image", function(e) {
    SM.currentModule = "sm-resource-album-image";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";

        function e(e, r) {
            if (o.call(this, r), e)
                if ("string" == typeof e) {
                    if (!t.isAPIUri(e)) throw s.error({
                        message: "Invalid parent album URI.",
                        uri: e
                    });
                    this._albumUri = e
                } else {
                    if ("Album" !== e.resourceType) throw s.error("Parent album must be a URI or an Album resource.");
                    this._album = e
                }
        }
        var r = SM["import"]("lodash"),
            t = SM["import"]("sm-resource-core"),
            o = SM["import"]("sm-resource-image"),
            u = SM["import"]("rsvp"),
            s = SM["import"]("sm-smuglog"),
            i = "sm-resource-album-image";
        e.prototype = r.create(o.prototype, {
            constructor: e
        });
        var n = e.prototype;
        n.resourceType = "AlbumImage", n.getAlbum = function() {
            if (!this.isNew() || this.hasExpansion("Album")) return this.expand("Album");
            if (this._album) return u.resolve(this._album);
            var e = this._albumUri;
            if (!this._albumUri) throw s.error(i, {
                message: "No album to expand! You probably didn't pass one to the constructor.",
                method: "getAlbum"
            });
            var r = this;
            return t.loadUri(e).then(function(e) {
                return "Album" !== e.resourceType && s.log(i, 'Expected resourceType "Album" but got "' + e.resourceType + '"', s.LEVEL_WARNING), r._album = e, e
            })
        }, n.sync = function(e) {
            if (e || (e = {}), !this.hasChanges() && !e.force) return this.refresh(e);
            var r = this;
            return this.expand("Image").then(function(t) {
                return t.update(r.changes()), t.sync(e).then(function() {
                    return r.refresh(e)
                })
            })
        }, e.getUriForKey = function(e, r) {
            return "/api/v2/album/" + encodeURIComponent(e) + "/image/" + encodeURIComponent(r)
        }, e.loadByKey = function(r, o, u) {
            return t.loadUri(e.getUriForKey(r, o), u)
        }, t.registerResourceClass("AlbumImage", e), module.exports = t.AlbumImage = e
    }(), SM.currentModule = null
}, "", {
    requires: ["lodash", "rsvp", "sm", "sm-resource-core", "sm-resource-image", "sm-smuglog"]
});
YUI.add("sm-resource-album", function(e) {
    SM.currentModule = "sm-resource-album";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";

        function e() {
            t.apply(this, arguments)
        }
        var r = SM["import"]("lodash"),
            o = SM["import"]("sm-resource-core"),
            t = SM["import"]("sm-resource-node"),
            s = SM["import"]("rsvp"),
            i = SM["import"]("sm-smuglog"),
            n = "sm-resource-album";
        e.prototype = r.create(t.prototype, {
            constructor: e
        });
        var a = e.prototype;
        a.fieldConfig = {
            Date: {
                getter: o.parseDate,
                setter: o.stringifyDate
            },
            LastUpdated: {
                getter: o.parseDate,
                setter: o.stringifyDate
            }
        }, a.resourceType = "Album", a.collectImages = function(e, t) {
            var s = this._getResourceUris(e, "AlbumImage"),
                i = this.getExpansionUri("CollectImages");
            return o.postUri(i, r.assign({}, t, {
                data: {
                    CollectUris: s.join(",")
                }
            }))
        }, a.deleteImages = function(e, t) {
            var s = this._getResourceUris(e, "AlbumImage"),
                i = this.getExpansionUri("DeleteAlbumImages");
            return o.postUri(i, r.assign({}, t, {
                data: {
                    Async: !0,
                    DeleteUris: s.join(",")
                }
            }))
        }, a.getParentFolder = function() {
            if (!this.isNew() || this.hasExpansion("Folder")) return this.expand("Folder");
            var e = this;
            return this._getParentFolder().then(function(r) {
                return r && (e._meta.expansions.Folder = r), r
            })
        }, a.moveImages = function(e, t) {
            var s = this._getResourceUris(e, "AlbumImage"),
                i = this.getExpansionUri("MoveAlbumImages");
            return o.postUri(i, r.assign({}, t, {
                data: {
                    Async: !0,
                    MoveUris: s.join(",")
                }
            }))
        }, a.positionImages = function(e, t, a) {
            a || (a = {});
            var u = this;
            return new s.Promise(function(s, m) {
                var l = u._getResourceUris(e, "AlbumImage"),
                    c = u.getExpansionUri("SortAlbumImages");
                if (!c) throw i.error(n, {
                    message: 'Must set SortMethod to "Position" before images can be positioned.',
                    method: "positionImages"
                });
                o.requestQueue.add(u.getCanonicalUri() + "-sort", r.assign({}, a.io, {
                    method: "POST",
                    type: "v2",
                    uri: c,
                    data: r.assign({}, a.io && a.io.data, {
                        MoveUris: l.join(","),
                        MoveLocation: a.after ? "After" : "Before",
                        Uri: u._getResourceUri(t, "AlbumImage")
                    })
                }), {
                    abortOnFailure: !0
                }).then(s, function(e) {
                    i.console(n, {
                        method: "positionImages",
                        uri: c,
                        error: e && e.error || e
                    }, i.LEVEL_ERROR), m(e)
                })
            })
        }, a._getCreateUri = function() {
            return this.getParentFolder().then(function(e) {
                return e.getExpansionUri("FolderAlbums")
            })
        }, e.getUriForKey = function(e) {
            return "/api/v2/album/" + encodeURIComponent(e)
        }, e.loadByKey = function(r, t) {
            return o.loadUri(e.getUriForKey(r), t)
        }, e.unlockdownloadByKey = function(r, t) {
            return o.postUri(e.getUriForKey(r) + "!unlockdownload", t)
        }, e.downloadByKey = function(r, t) {
            return "undefined" != typeof t ? o.postUri(e.getUriForKey(r) + "!download", t) : o.loadUri(e.getUriForKey(r) + "!download")
        }, o.registerResourceClass("Album", e), module.exports = o.Album = e
    }(), SM.currentModule = null
}, "", {
    requires: ["lodash", "rsvp", "sm", "sm-resource-core", "sm-resource-album-image", "sm-resource-folder", "sm-resource-image", "sm-resource-node", "sm-smuglog"]
});
YUI.add("sm-resource-core", function(e) {
    SM.currentModule = "sm-resource-core";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        var t;
        ! function() {
            t = function(e, t, r) {
                var n = t && t.Pages;
                e || (e = []), r || (r = {}), Array.isArray(e) || (e = [e]), n && (this.nextPageUri = n.NextPage), this.options = r, this.resources = e
            };
            var e = t.prototype;
            e.getNextPage = function(e) {
                return n.loadUri(this.nextPageUri, Object.assign({}, e, {
                    paginate: !0
                }))
            }, e.isLastPage = function() {
                return !this.nextPageUri
            }
        }();
        var r;
        ! function() {
            var t = SM["import"]("sm-smuglog"),
                s = "sm-resource-paginator";
            r = function(e, t, r) {
                var n = t && t.Pages,
                    s = t && t.Uri;
                if (e || (e = []), r || (r = {}), Array.isArray(e) || (e = [e]), !n) {
                    var a = e.length;
                    n = {
                        Count: a,
                        FirstPage: s,
                        LastPage: s,
                        RequestedCount: r.count || a || 100,
                        Start: 1,
                        Total: a
                    }
                }
                this.page = Math.ceil(n.Start / n.RequestedCount), this.options = r, this.requestedCount = n.RequestedCount, this.resources = e, this.start = n.Start, this.totalPages = Math.max(1, Math.ceil(n.Total / n.RequestedCount)), this.totalResources = n.Total, this.uri = s
            };
            var a = r.prototype;
            a.getNextPage = function(e) {
                return this.getPage(this.page + 1, e)
            }, a.getPage = function(e, r) {
                if (1 > e) return Promise.reject(t.error(s, {
                    message: "Page number is out of bounds: " + e,
                    method: "getPage"
                }));
                r = Object.assign({}, this.options, {
                    start: null
                }, r);
                var a = r.count || this.requestedCount;
                return n.loadUri(this.uri, Object.assign({}, r, {
                    count: a,
                    paginate: !0,
                    start: r.start || (e - 1) * this.requestedCount + 1
                }))
            }, a.getPrevPage = function(e) {
                return this.getPage(this.page - 1, e)
            }, a.isFirstPage = function() {
                return 1 === this.page
            }, a.isLastPage = function() {
                return this.page === this.totalPages
            }, a.toString = function() {
                for (var e = [], t = 0, r = this.resources.length; r > t; ++t) e.push(this.resources[t].toString());
                return "ResourcePaginator: [" + e.join(", ") + "]"
            }, e.namespace("SM").ResourcePaginator = r
        }();
        var n;
        ! function() {
            var s = SM["import"]("lodash"),
                a = SM["import"]("sm-event-emitter"),
                i = SM["import"]("rsvp"),
                o = SM["import"]("sm-smuglog"),
                u = SM["import"]("sm-uri"),
                c = SM["import"]("sm-redux-store"),
                f = SM["import"]("sm-api-redux-actions"),
                h = f.request,
                p = f.response,
                l = "sm-resource-core";
            n = function() {
                this._fields = {}, this._meta = {
                    expansions: {},
                    paginatedExpansions: {},
                    uris: {}
                }
            }, n.prototype = s.create(a.prototype, {
                constructor: n
            });
            var d = n.prototype,
                g = "change";
            d.endpointType = "Unknown", d.isSmugMugResource = !0, d.paginationClass = r, d.resourceType = "Resource", d.changes = function() {
                return this.isNew() ? this.get() : s.assign({}, this._changes)
            }, d.destroy = function() {
                o.add(l, "#destroy() is deprecated. Please don't use it.", o.LEVEL_DEPRECATED)
            }, d.expand = function(e, t) {
                if (t || (t = {}), !t.io && !t.refresh) {
                    if ("object" === ("undefined" == typeof e ? "undefined" : babelHelpers["typeof"](e))) return this._expandMultiple(e, t);
                    var r = this.getExpansion(e);
                    if (void 0 !== r) return i.resolve(r)
                }
                return n.loadUri(this.getCanonicalUri(), {
                    expand: "object" === ("undefined" == typeof e ? "undefined" : babelHelpers["typeof"](e)) ? e : [e],
                    io: s.assign({}, t.io, {
                        fields: ["Uri", "ResponseLevel"]
                    })
                }).then(function(t) {
                    if ("object" === ("undefined" == typeof e ? "undefined" : babelHelpers["typeof"](e))) {
                        var r = {};
                        return s.isArray(e) ? s.forEach(e, function(e) {
                            r[e] = t.getExpansion(e)
                        }) : s.forOwn(e, function(e, n) {
                            r[n] = t.getExpansion(n, e)
                        }), r
                    }
                    return t.getExpansion(e)
                })
            }, d.get = function(e) {
                var t = this._fields;
                if (e) {
                    var r = this.fieldConfig && this.fieldConfig[e],
                        n = r && r.getter;
                    if (n && t.hasOwnProperty(e)) return "string" == typeof n && (n = this[n]), n.call(this, t[e]);
                    var a = t[e];
                    return a && "object" === ("undefined" == typeof a ? "undefined" : babelHelpers["typeof"](a)) && (a = s.isArray(a) ? a.concat() : s.assign({}, a)), a
                }
                var i = {};
                for (var o in t) t.hasOwnProperty(o) && (i[o] = this.get(o));
                return i
            }, d.getCanonicalUri = function() {
                return n.buildCanonicalUri(this.get("Uri"))
            }, d.getExpansion = function(e, t) {
                var r, a = this._meta;
                if (!e || "*" === e) return r = {}, s.forOwn(a.expansions, function(e, t) {
                    r[t] = e.resources
                }), r;
                var i = e.split(".");
                if (1 === i.length) {
                    if (e = i[0], t && (t.count || t.start)) {
                        var o = a.paginatedExpansions[e];
                        o && (r = o[(t.start || 1) + ":" + (t.count || "")])
                    } else r = a.expansions[e];
                    return r ? t && t.paginate ? new this.paginationClass(r.resources, r.response) : s.isArray(r.resources) ? r.resources.concat() : r.resources : void 0
                }
                return n._getNestedExpansions(this, i, t)
            }, d.getExpansionUri = function(e) {
                var t = this._meta.uris[e];
                return t && "object" === ("undefined" == typeof t ? "undefined" : babelHelpers["typeof"](t)) ? t.Uri : t
            }, d.has = function(e) {
                return this._fields.hasOwnProperty(e)
            }, d.hasChanges = function(e) {
                var t = this._changes;
                if (e) return !!t && t.hasOwnProperty(e);
                if (this.isNew()) return !0;
                if (!t) return !1;
                for (var r in t)
                    if (t.hasOwnProperty(r)) return !0;
                return !1
            }, d.hasExpansion = function(e) {
                return this._meta.expansions.hasOwnProperty(e)
            }, d.isNew = function() {
                return !this._meta.version
            }, d.push = function(e) {
                var t = this.get(e);
                if ("undefined" == typeof t) t = [];
                else if (!t.push) throw new Error("Field is not an array: " + e);
                var r = Array.prototype.push.apply(t, Array.prototype.slice.call(arguments, 1)),
                    n = {};
                return n[e] = t, this.update(n, {
                    src: "push"
                }), r
            }, d.refresh = function(e) {
                var t = n.buildCanonicalUri(this.get("Uri"));
                return t ? n.loadUri(t, e) : i.reject(o.error(l, {
                    message: "Can't refresh because this resource has no associated URI.",
                    method: "refresh"
                }))
            }, d.revert = function() {
                return this._lastSync && this.hasChanges() && (this._meta.version = this._lastSync.version, this.update(this._lastSync.fields, {
                    force: !0,
                    src: "sync"
                })), this
            }, d.sync = function(e) {
                if (e || (e = {}), !this.hasChanges() && !e.force) return this.refresh(e);
                var t = this.isNew() ? "POST" : "PATCH",
                    r = this;
                return this._getSyncUri().then(function(a) {
                    return n._request(a, t, s.assign({}, e, {
                        data: r._getRawChanges(e),
                        returnRawResponse: !0
                    })).then(function(e) {
                        return r.isNew() ? e.response && r._updateFromSync(e.response, {
                            raw: e.raw
                        }) : n._makeResources(e), r
                    })
                })
            }, d.toJSON = function() {
                return this.get()
            }, d.toString = function() {
                var e = this.get("Uri");
                return e ? this.resourceType + ": " + e : this.resourceType
            }, d.unshift = function(e) {
                var t = this.get(e);
                if (void 0 === t) t = [];
                else if (!t.unshift) throw new Error("Field is not an array: " + e);
                var r = Array.prototype.unshift.apply(t, Array.prototype.slice.call(arguments, 1)),
                    n = {};
                return n[e] = t, this.update(n, {
                    src: "unshift"
                }), r
            }, d.update = function(e, t) {
                t || (t = {});
                var r = "sync" === t.src;
                this._lastSync || r || this.isNew() || (this._lastSync = {
                    version: this._meta.version,
                    fields: s.assign({}, this._fields)
                }), this._changes || (this._changes = {});
                var a, i = {},
                    o = {};
                return s.forOwn(e, function(e, t) {
                    var s = this.fieldConfig && this.fieldConfig[t],
                        u = e,
                        c = this.get(t),
                        f = this._fields[t];
                    if (!r && null !== e && s && s.setter) {
                        var h = s.setter;
                        "string" == typeof h && (h = this[h]), u = h.call(this, e)
                    }
                    if (u !== f && !this._equivalent(u, f)) {
                        if (("Uri" === t || "ResponseLevel" === t) && n._removeCachedResource(this), null === u && void 0 === f) return;
                        this._fields[t] = u, i[t] = this._changes[t] = this.get(t), o[t] = c, a = !0
                    }
                }, this), t.force && s.forOwn(this._fields, function(t, n) {
                    e.hasOwnProperty(n) || (a = !0, i[n] = null, o[n] = this.get(n), delete this._fields[n], r ? delete this._changes[n] : this._changes[n] = null)
                }, this), r && ((i.Uri || i.ResponseLevel) && n._setCachedResource(this), s.forOwn(e, function(e, t) {
                    delete this._changes[t]
                }, this), this._meta.version || (this._meta.version = s.now()), this._lastSync = {
                    version: this._meta.version,
                    fields: this._lastSync ? s.assign({}, this._lastSync.fields, i) : s.assign({}, this._fields)
                }), a && this.emit(g, {
                    changes: i,
                    previous: o,
                    src: t.src || "update"
                }), this
            }, d.validate = function() {
                return this.hasChanges() ? this._getValidationParams().then(s.bind(this._validate, this)) : i.resolve()
            }, d._equivalent = function(e, t, r) {
                if (e === t) return !0;
                var n = "undefined" == typeof e ? "undefined" : babelHelpers["typeof"](e),
                    a = "undefined" == typeof t ? "undefined" : babelHelpers["typeof"](t);
                if (n !== a || "object" !== n) return !1;
                if (r || (r = 0), r >= 16) return o.console(l, "Aborting equivalence check due to recursion.", o.LEVEL_WARNING), !1;
                if (s.isArray(e)) {
                    if (!s.isArray(t) || e.length !== t.length) return !1;
                    for (var i = 0, u = e.length; u > i; ++i)
                        if (!this._equivalent(e[i], t[i], r + 1)) return !1;
                    return !0
                }
                if (s.isArray(t)) return !1;
                if (e.isSmugMugResource || t.isSmugMugResource) return e.resourceType && e.resourceType === t.resourceType && e._meta.version === t._meta.version ? e.get("Uri") === t.get("Uri") && this._equivalent(e.get(), t.get(), r + 1) : !1;
                if (s.isPlainObject(e) && s.isPlainObject(t)) {
                    var c, f = 0;
                    return c = s.some(e, function(e, n) {
                        return f += 1, !this._equivalent(e, t[n], r + 1)
                    }, this), !c && f === s.size(t)
                }
                return !1
            }, d._expandMultiple = function(e, t) {
                t || (t = {});
                var r = !s.isArray(e),
                    n = r ? s.keys(e) : e,
                    a = {};
                if (!n.length) return i.resolve(a);
                var o = !0,
                    u = {};
                return s.forEach(n, function(t) {
                    var n = r ? e[t] : null,
                        s = this.getExpansion(t, n);
                    void 0 !== s ? a[t] = s : (u[t] = n || !0, o = !1)
                }, this), o ? i.resolve(a) : this.expand(u, s.assign({}, t, {
                    refresh: !0
                })).then(function(e) {
                    return s.assign(a, e)
                })
            }, d._extractMetadataFromFields = function(e, t) {
                var r = this._meta;
                "object" === babelHelpers["typeof"](e.Uris) && (s.assign(r.uris, e.Uris), delete e.Uris);
                var a = t && t.raw;
                if (!a || !a.Expansions) return this;
                var i = t && t.alreadyExtracted || {};
                if (e.Uri) {
                    if (i[e.Uri]) return this;
                    i[e.Uri] = !0
                }
                var o = s.now();
                return s.forOwn(r.uris, function(e, t) {
                    e = e && "object" === ("undefined" == typeof e ? "undefined" : babelHelpers["typeof"](e)) ? e.Uri : e;
                    var c = a.Expansions[e];
                    if (c) {
                        var f, h = c.Locator,
                            p = n.CLASSES[h] || n;
                        c[h] && (f = c[h]);
                        var l, d, g;
                        if (!f) {
                            if (l = r.paginatedExpansions[t] || (r.paginatedExpansions[t] = {}), d = "Objects" === c.LocatorType ? [] : null, g = new u(c.Uri), (g.queryParams.count || g.queryParams.start) && (l[(g.queryParams.start || "1") + ":" + (g.queryParams.count || "")] = {
                                    resources: d,
                                    response: c
                                }, g.queryParams.count || g.queryParams.start && "1" !== g.queryParams.start)) return;
                            return void(r.expansions[t] = {
                                resources: d,
                                response: c
                            })
                        }
                        if (s.isArray(f)) {
                            d = [];
                            for (var v = 0, m = f.length; m > v; ++v) d.push(n._makeResource(p, f[v], {
                                alreadyExtracted: i,
                                endpointType: c.Locator,
                                meta: {
                                    version: o
                                },
                                raw: a
                            }))
                        } else d = n._makeResource(p, f, {
                            alreadyExtracted: i,
                            endpointType: c.Locator,
                            meta: {
                                version: o
                            },
                            raw: a
                        });
                        var y = c.Pages;
                        y && y.Start && y.RequestedCount && (l = r.paginatedExpansions[t] || (r.paginatedExpansions[t] = {}), g = new u(c.Uri), l[y.Start + ":" + (g.queryParams.count || "")] = {
                            resources: d,
                            response: c
                        }, 1 !== y.Start || g.queryParams.count) || (r.expansions[t] = {
                            resources: d,
                            response: c
                        })
                    }
                }, this), this
            }, d._getCreateUri = function() {
                return i.reject(new Error("This resource does not have a create URI. It may be read-only."))
            }, d._getRawChanges = function(e) {
                if (e && e.force || this.isNew()) return s.assign({}, this._fields);
                var t = {};
                for (var r in this._changes) this._changes.hasOwnProperty(r) && (t[r] = this._fields[r]);
                return t
            }, d._getResourceUri = function(e, t) {
                if (n.isAPIUri(e)) return e;
                if (!e) throw new Error("Expected a Resource instance or URI but got a falsy value.");
                if (t && e.resourceType !== t) throw new Error('Expected a Resource of type "' + t + '", but got one of type "' + e.resourceType + '".');
                return e.getCanonicalUri()
            }, d._getResourceUris = function(e, t) {
                var r = [];
                if (s.isArray(e))
                    for (var n = 0, a = e.length; a > n; ++n) r.push(this._getResourceUri(e[n], t));
                else r.push(this._getResourceUri(e, t));
                return r
            }, d._getSyncUri = function() {
                if (this.isNew()) return this._getCreateUri();
                var e = n.buildCanonicalUri(this.get("Uri"));
                return e ? i.resolve(e) : i.reject(new Error("This resource does not have a sync URI. It may be read-only."))
            }, d._getValidationParams = function() {
                var e = this._meta.params || {},
                    t = this.isNew() ? "POST" : "PATCH";
                if (e[t]) return i.resolve(this._parseValidationParams(e[t]));
                var r = this;
                return this._getSyncUri().then(function(e) {
                    return n._request(e, "OPTIONS", {
                        io: {
                            cache: !0,
                            verbose: !0
                        },
                        returnRawResponse: !0
                    }).then(function(e) {
                        var n = e.raw.Options,
                            s = n && n.Parameters;
                        return s && s[t] ? (r._meta.params || (r._meta.params = {}), r._meta.params[t] = s[t], r._parseValidationParams(s[t])) : {}
                    })
                })
            }, d._parseValidationParams = function(e) {
                var t = {};
                if (!e) return t;
                for (var r, n = 0, s = e.length; s > n; ++n) r = e[n], t[r.Name] = r;
                return t
            }, d._updateFromSync = function(e, t) {
                return t || (t = {}), t.meta || (t.meta = {}), t.meta.version || (t.meta.version = s.now()), s.assign(this._meta, t.meta), this._extractMetadataFromFields(e, t), this.update(e, {
                    src: "sync"
                })
            }, d._validate = function(e) {
                function t(e, t) {
                    r || (r = {}), r[e] || (r[e] = []), r[e].push(t)
                }
                var r, a = this._getRawChanges();
                if (s.forOwn(e, function(e, r) {
                        !e.Required || a.hasOwnProperty(r) && null !== a[r] || t(r, "Missing required field.")
                    }), s.forOwn(a, function(r, a) {
                        var i = e[a];
                        if (!i || i.ReadOnly) return void t(a, "This field is read-only and cannot be changed.");
                        if (null !== r) {
                            var o = i.MAX_CHARS || i.MAX_LENGTH || i.MAX_VALUE || 1 / 0,
                                u = i.MIN_CHARS || i.MIN_LENGTH || i.MIN_VALUE || 0;
                            switch (("INFINITY" === o || "POSITIVE_INFINITY" === o) && (o = 1 / 0), "NEGATIVE_INFINITY" === u && (u = -(1 / 0)), i.Type) {
                                case "Boolean":
                                    "boolean" != typeof r && 0 !== r && 1 !== r && t(a, "Must be a boolean value (true, false, 0, or 1).");
                                    break;
                                case "Checkbox":
                                    "boolean" != typeof r && 0 !== r && 1 !== r && t(a, "Must be a boolean value (true, false, 0, or 1).");
                                    break;
                                case "DateTime":
                                    s.isDate(r) || s.isDate(n.parseDate(r)) || t(a, "Must be a date.");
                                    break;
                                case "FloatingPoint":
                                case "Integer":
                                    if (!s.isNumber(r) || isNaN(r)) {
                                        t(a, "Must be a number. Cannot contain letters or commas.");
                                        break
                                    }
                                    "Integer" === i.Type && r % 1 !== 0 && t(a, "Must be an integer."), u > r && t(a, "Must be greater than or equal to " + u + "."), r > o && t(a, "Must be less than or equal to " + o + ".");
                                    break;
                                case "Select":
                                    -1 === s.indexOf(i.OPTIONS, r) && t(a, "Must be one of the following values: " + i.OPTIONS.join(", ") + ".");
                                    break;
                                case "Uri":
                                    if (!n.isAPIUri(r)) {
                                        t(a, "Must be an API URI.");
                                        break
                                    }
                                    r.length < u && t(a, "Too short; must be at least " + u + " characters long."), r.length > o && t(a, "Too long; must be " + o + " characters or fewer.");
                                    break;
                                case "Text":
                                case "Varchar":
                                    if ("string" != typeof r) {
                                        t(a, "Must be a string.");
                                        break
                                    }
                                    r.length < u && t(a, "Too short; must be at least " + u + " characters long."), r.length > o && t(a, "Too long; must be " + o + " characters or fewer.")
                            }
                        }
                    }), r) {
                    var i = new Error("Validation failed.");
                    throw i.fields = r, i
                }
            }, n._cache = {}, n.CLASSES = {}, n.requestQueue = new e.SM.RequestQueue, n.deleteUri = function(e, t) {
                return n._request(e, "DELETE", t)
            }, n.getProblems = function(e) {
                var t = {};
                if (e && e.error && e.error.response && (e = e.error.response), !e || !e.Options || !e.Options.Parameters) return t;
                var r = e.Options.Parameters;
                return s.forOwn(r, function(e) {
                    s.forEach(e, function(e) {
                        e.Problems && s.isArray(e.Problems) && (t[e.Name] = e.Problems.concat())
                    })
                }), t
            }, n.isAPIUri = function(e) {
                return "string" == typeof e && 0 === e.indexOf("/api/v2/")
            }, n.buildCanonicalUri = function(e) {
                return e ? e.replace(/\?.*$/, "") : void 0
            }, n.loadLocal = function(e, t) {
                var r, s, a;
                if ("string" == typeof e ? (s = e, r = n._localData && n._localData[s], a = n._localDataCache && n._localDataCache[s]) : r = e, !a) {
                    if (!r) return void 0;
                    c.dispatch(p(r, void 0, "Resource")), a = n._makeResources(r), s && (n._localDataCache || (n._localDataCache = {}), n._localDataCache[s] = a)
                }
                if (t && t.paginate) {
                    r.RequestedExpansions && (t.expand = r.RequestedExpansions);
                    var i = n._getPaginationClass(a);
                    return new i(a, r.Response, t)
                }
                return a
            }, n.loadPath = function(e, t, r) {
                r || (r = {});
                var n;
                if ("string" == typeof t) n = t;
                else {
                    if (!t || "User" !== t.resourceType) throw o.error(l, {
                        message: "`owner` must be a nickname string or SM.Resource.User instance.",
                        method: "loadPath",
                        owner: t,
                        path: e
                    });
                    n = t.get("NickName")
                }
                var a = "/api/v2/user/" + encodeURIComponent(n) + "!urlpathlookup";
                return this._request(a, s.assign({}, r, {
                    data: s.assign({}, r.data, {
                        urlpath: e
                    })
                }))
            }, n.loadUri = function(e, t) {
                return n._request(e, t)
            }, n.loadUris = function(e, t) {
                var r = {};
                s.forEach(e, function(e) {
                    var t = e.split("/"),
                        n = t.pop(),
                        s = t.join("/");
                    r[s] || (r[s] = []), r[s].push(n)
                });
                var a = [];
                s.forOwn(r, function(e, t) {
                    for (var r, n = t + "/" + e.shift(); r = e.shift();) n.length + r.length + 1 <= 800 ? n += "," + r : (a.push(n), n = t + "/" + r);
                    a.push(n)
                });
                var o = [];
                return s.forEach(a, function(e) {
                    o.push(n.loadUri(e, t))
                }), i.all(o).then(function(e) {
                    for (var t, r = [], n = 0, a = e.length; a > n; ++n) t = e[n], s.isArray(t) ? Array.prototype.push.apply(r, t) : r.push(t);
                    return r
                })
            }, n.parseDate = function(e) {
                if (Date.parse(e)) return new Date(e);
                /*!
                 * Date.parse with progressive enhancement for ISO 8601 <https://github.com/csnover/js-iso8601>
                 * (c) 2011 Colin Snover <http://zetafleet.com>
                 * Released under MIT license.
                 */
                var t, r = 0,
                    n = [1, 4, 5, 6, 7, 10, 11];
                if (t = /^(\d{4}|[+\-]\d{6})(?:-(\d{2})(?:-(\d{2}))?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(?:\.(\d{3}))?)?(?:(Z)|([+\-])(\d{2})(?::(\d{2}))?)?)?$/.exec(e)) {
                    for (var s, a = 0; s = n[a]; ++a) t[s] = +t[s] || 0;
                    return t[2] = (+t[2] || 1) - 1, t[3] = +t[3] || 1, "Z" !== t[8] && void 0 !== t[9] && (r = 60 * t[10] + t[11], "+" === t[9] && (r = 0 - r)), new Date(Date.UTC(t[1], t[2], t[3], t[4], t[5] + r, t[6], t[7]))
                }
                return NaN
            }, n.patchUri = function(e, t) {
                return n._request(e, "PATCH", t)
            }, n.postUri = function(e, t) {
                return n._request(e, "POST", t)
            }, n.putUri = function(e, t) {
                return n._request(e, "PUT", t)
            }, n.registerResourceClass = function(e, t) {
                n.CLASSES[e] = t
            }, n.stringifyDate = function(e) {
                function t(e) {
                    return 10 > e ? "0" + e : e
                }
                return e.getUTCFullYear() + "-" + t(e.getUTCMonth() + 1) + "-" + t(e.getUTCDate()) + "T" + t(e.getUTCHours()) + ":" + t(e.getUTCMinutes()) + ":" + t(e.getUTCSeconds()) + "+00:00"
            }, n._getCachedResource = function(e) {
                var t = e.Uri && n.buildCanonicalUri(e.Uri),
                    r = t && n._cache[t];
                return r ? r[e.ResponseLevel || "None"] : void 0
            }, n._getNestedExpansions = function(e, t, r, a) {
                if (!e || !t.length) return e;
                if (a || (a = 0), a >= 16) throw new Error("Too much recursion!");
                var i;
                if (t = t.concat(), s.isArray(e)) i = [], s.forEach(e, function(e) {
                    var s = n._getNestedExpansions(e, t, r, a + 1);
                    s && i.push(s)
                });
                else {
                    var o = 1 === t.length;
                    i = n._getNestedExpansions(e.getExpansion(t.shift(), o ? r : null), t, r, a + 1)
                }
                return s.isArray(i) && (i = s.flattenDeep(i), i.length || (i = void 0)), i
            }, n._getPaginationClass = function(e) {
                return Array.isArray(e) ? e.length ? e[0].paginationClass : n.Paginator : e.paginationClass
            }, n._makeResource = function(e, t, r) {
                var a = n._getCachedResource(t);
                return r || (r = {}), r.meta || (r.meta = {
                    version: s.now()
                }), a && a.isSmugMugResource ? a._updateFromSync(t, r) : (a = new e, s.assign(a._fields, t), s.assign(a._meta, r.meta), t.Uri && n._setCachedResource(a), a._extractMetadataFromFields(a._fields, r)), r.endpointType ? a.endpointType = r.endpointType : r.raw && r.raw.Response && r.raw.Response.Locator && (a.endpointType = r.raw.Response.Locator), a
            }, n._makeResources = function(e) {
                if (!e) return void 0;
                var t = e.raw || e,
                    r = t.Response,
                    a = r && r.Locator,
                    i = r && r.LocatorType,
                    o = a && r[a];
                if (!o) return "Objects" === i ? [] : void 0;
                var u = n.CLASSES[a] || n,
                    c = s.now();
                if (s.isArray(o)) {
                    for (var f = [], h = 0, p = o.length; p > h; ++h) f[h] = n._makeResource(u, o[h], {
                        meta: {
                            params: t.Options && t.Options.Parameters,
                            version: c
                        },
                        raw: t
                    });
                    return f
                }
                return n._makeResource(u, o, {
                    meta: {
                        params: t.Options && t.Options.Parameters,
                        version: c
                    },
                    raw: t
                })
            }, n._removeCachedResource = function(e) {
                var t = e.getCanonicalUri(),
                    r = t && n._cache[t];
                if (r) {
                    var s = e.get("ResponseLevel") || "None";
                    r[s] && (r[s] = void 0)
                }
            }, n._request = function(t, r, a) {
                r && "object" === ("undefined" == typeof r ? "undefined" : babelHelpers["typeof"](r)) && (a = r, r = void 0), a || (a = {}), a = s.merge({
                    io: {
                        data: s.assign({}, a.data),
                        expand: a.expand,
                        method: r || "GET",
                        type: "v2",
                        uri: t,
                        verbose: !0,
                        nestExpansions: !1
                    }
                }, a), a.count && (a.io.data.count = a.count), a.start && (a.io.data.start = a.start), s.isObject(a.io.expand) && !s.isArray(a.io.expand) && s.forOwn(a.io.expand, function(e) {
                    if (s.isObject(e)) {
                        var t = e.data || (e.data = {});
                        e.count && (t.count = e.count), e.start && (t.start = e.start), s.forOwn(t, function(e, r) {
                            e && "object" === ("undefined" == typeof e ? "undefined" : babelHelpers["typeof"](e)) && (t[r] = JSON.stringify(e))
                        })
                    }
                }), a.io && a.io.data && s.forOwn(a.io.data, function(e, t, r) {
                    e && "object" === ("undefined" == typeof e ? "undefined" : babelHelpers["typeof"](e)) && (r[t] = JSON.stringify(e))
                });
                var i = n._mockIO || e.SM.io;
                return c.dispatch(h(a.io.uri, a.io.expand, "Resource")), i(a.io).then(function(e) {
                    if (c.dispatch(p(e.raw, void 0, "Resource")), a.returnRawResponse) return e;
                    var t = n._makeResources(e);
                    if (a.paginate) {
                        var r = n._getPaginationClass(t);
                        return new r(t, e.raw.Response, a)
                    }
                    return t
                })["catch"](function(e) {
                    throw o.console(l, {
                        method: "_request",
                        uri: t,
                        error: e && e.error || e
                    }, o.LEVEL_ERROR), e
                })
            }, n._setCachedResource = function(e) {
                var t = e.getCanonicalUri();
                if (t) {
                    var r = n._cache[t] || (n._cache[t] = {});
                    r[e.get("ResponseLevel") || "None"] = e
                }
            }, n.Paginator = r, n.ExternalPaginator = t, module.exports = n, e.namespace("SM").Resource = s.defaults(n, e.SM.Resource)
        }()
    }(), SM.currentModule = null
}, "", {
    requires: ["lodash", "rsvp", "sm", "sm-api2", "sm-api-redux-actions", "sm-event-emitter", "sm-redux-store", "sm-request-queue", "sm-smuglog", "sm-uri"]
});
YUI.add("sm-resource-coupon", function(e) {
    SM.currentModule = "sm-resource-coupon";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";

        function e(e, r) {
            o.call(this), e && Object.assign(this._fields, e), r && (this._nickName = r)
        }
        var o = SM["import"]("sm-resource-core");
        e.prototype = Object.create(o.prototype, {
            constructor: e
        });
        var r = e.prototype;
        r.resourceType = "Coupon", r._getCreateUri = function() {
            return Promise.resolve("/api/v2/user/" + encodeURIComponent(this._nickName) + "!coupons")
        }, o.registerResourceClass("Coupon", e), module.exports = o.Coupon = e
    }(), SM.currentModule = null
}, "", {
    requires: ["sm", "sm-resource-core"]
});
YUI.add("sm-resource-external", function(e) {
    SM.currentModule = "sm-resource-external";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        var e = SM["import"]("sm-resource-core"),
            r = function(e) {
                function r() {
                    var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
                    babelHelpers.classCallCheck(this, r);
                    var s = babelHelpers.possibleConstructorReturn(this, (r.__proto__ || Object.getPrototypeOf(r)).call(this));
                    return Object.assign(s._fields, e), s
                }
                return babelHelpers.inherits(r, e), r
            }(e),
            s = r.prototype;
        s.paginationClass = e.ExternalPaginator, s.resourceType = "ExternalResource", e.registerResourceClass("ExternalResource", r), module.exports = e.ExternalResource = r
    }(), SM.currentModule = null
}, "", {
    requires: ["sm", "sm-resource-core"]
});
YUI.add("sm-resource-folder", function(e) {
    SM.currentModule = "sm-resource-folder";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";

        function e() {
            t.apply(this, arguments)
        }
        var r = SM["import"]("lodash"),
            o = SM["import"]("sm-resource-core"),
            t = SM["import"]("sm-resource-node"),
            s = SM["import"]("rsvp"),
            i = SM["import"]("sm-smuglog"),
            n = "sm-resource-folder";
        e.prototype = r.create(t.prototype, {
            constructor: e
        });
        var a = e.prototype;
        a.fieldConfig = {
            DateAdded: {
                getter: o.parseDate,
                setter: o.stringifyDate
            },
            DateModified: {
                getter: o.parseDate,
                setter: o.stringifyDate
            }
        }, a.resourceType = "Folder", a.getParentFolder = function() {
            if (this.isRootFolder()) return s.resolve();
            if (!this.isNew() || this.hasExpansion("ParentFolder")) return this.expand("ParentFolder");
            var e = this;
            return this._getParentFolder().then(function(r) {
                return r && (e._meta.expansions.ParentFolder = r), r
            })
        }, a.isRootFolder = function() {
            return !this.isNew() && !this.getExpansionUri("ParentFolder")
        }, a.moveAlbums = function(e, t) {
            t || (t = {});
            var s = this._getResourceUris(e, "Album"),
                i = this.getExpansionUri("MoveFolderAlbums");
            return o.postUri(i, r.assign({}, t, {
                data: {
                    AutoRename: !!t.autoRename,
                    MoveUris: s.join(",")
                }
            }))
        }, a.moveFolders = function(e, t) {
            t || (t = {});
            var s = this._getResourceUris(e, "Folder"),
                i = this.getExpansionUri("MoveFolders");
            return o.postUri(i, r.assign({}, t, {
                data: {
                    AutoRename: !!t.autoRename,
                    MoveUris: s.join(",")
                }
            }))
        }, a.movePages = function(e, t) {
            t || (t = {});
            var s = this._getResourceUris(e, "Page"),
                i = this.getExpansionUri("MoveFolderPages");
            return o.postUri(i, r.assign({}, t, {
                data: {
                    AutoRename: !!t.autoRename,
                    MoveUris: s.join(",")
                }
            }))
        }, a.positionAlbums = function(e, t, a) {
            a || (a = {});
            var u = this;
            return new s.Promise(function(s, d) {
                var l = u._getResourceUris(e, "Album"),
                    m = u.getExpansionUri("SortFolderAlbums");
                if (!m) throw i.error(n, {
                    message: 'Must set SortMethod to "SortIndex" before albums can be positioned.',
                    method: "positionAlbums"
                });
                o.requestQueue.add(u.getCanonicalUri() + "-sortAlbums", r.assign({}, a.io, {
                    method: "POST",
                    type: "v2",
                    uri: m,
                    data: r.assign({}, a.io && a.io.data, {
                        MoveLocation: a.after ? "After" : "Before",
                        MoveUris: l.join(","),
                        Uri: u._getResourceUri(t, "Album")
                    })
                }), {
                    abortOnFailure: !0
                }).then(s, function(e) {
                    i.console(n, {
                        method: "positionAlbums",
                        uri: m,
                        error: e && e.error || e
                    }, i.LEVEL_ERROR), d(e)
                })
            })
        }, a._getCreateUri = function() {
            return this.getParentFolder().then(function(e) {
                return e.getExpansionUri("Folders")
            })
        }, o.registerResourceClass("Folder", e), module.exports = o.Folder = e
    }(), SM.currentModule = null
}, "", {
    requires: ["lodash", "rsvp", "sm", "sm-resource-core", "sm-resource-node", "sm-smuglog"]
});
YUI.add("sm-resource-image", function(e) {
    SM.currentModule = "sm-resource-image";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";

        function e(e) {
            t.call(this), e && r.assign(this._fields, e)
        }
        var r = SM["import"]("lodash"),
            t = SM["import"]("sm-resource-core"),
            o = SM["import"]("rsvp");
        e.prototype = r.create(t.prototype, {
            constructor: e
        });
        var a = e.prototype;
        a.fieldConfig = {
            Date: {
                getter: t.parseDate,
                setter: t.stringifyDate
            },
            LastUpdated: {
                getter: t.parseDate,
                setter: t.stringifyDate
            }
        }, a.resourceType = "Image", a.color = function(r, t) {
            return e.colorImages([this], r, t)
        }, a.crop = function(r, t, o, a, i) {
            return e.cropImages([this], Math.round(r), Math.round(t), Math.round(o), Math.round(a), i)
        }, a.rotate = function(r) {
            return e.rotateImages([this], r)
        }, a.watermark = function(r, t) {
            return e.watermarkImages([this], r, t)
        }, e.colorImages = function(t, o, a) {
            return e._mutate("/api/v2/image!color", r.assign({}, a, {
                ColorUris: e._getImageUris(t),
                Color: o
            }))
        }, e.cropImages = function(t, o, a, i, s, n) {
            return n = r.assign({}, n, {
                CropUris: e._getImageUris(t),
                Height: i,
                ThumbOnly: !(!n || !n.thumbOnly),
                TopLeftX: o,
                TopLeftY: a,
                Width: s
            }), delete n.thumbOnly, e._mutate("/api/v2/image!crop", n)
        }, e.getUriForKey = function(e) {
            return "/api/v2/image/" + encodeURIComponent(e)
        }, e.loadByKey = function(r, o) {
            return t.loadUri(e.getUriForKey(r), o)
        }, e.rotateImages = function(t, a) {
            a || (a = {});
            var i = e._betterModulo(a.degrees || 0, 360),
                s = a.flip || "None";
            return i || "None" !== s ? (a = r.assign({}, a, {
                Degrees: i,
                Flip: s,
                RotateUris: e._getImageUris(t)
            }), delete a.degrees, delete a.flip, e._mutate("/api/v2/image!rotate", a)) : o.resolve()
        }, e.watermarkImages = function(o, a, i) {
            if (i = r.assign({}, i, {
                    WatermarkUris: e._getImageUris(o)
                }), i.remove) i.io = r.assign({}, i.io, {
                method: "DELETE"
            }), delete i.remove;
            else if (a)
                if (t.isAPIUri(a)) i.WatermarkUri = a;
                else {
                    if (!a.isSmugMugResource) throw new Error("Unknown watermark type.");
                    i.WatermarkUri = a.getCanonicalUri()
                }
            return e._mutate("/api/v2/image!watermark", i)
        }, e._betterModulo = function(e, r) {
            return (e % r + r) % r
        }, e._getImageUris = function(e) {
            for (var r, o = [], a = 0, i = e.length; i > a; ++a)
                if (r = e[a], t.isAPIUri(r)) o.push(r);
                else if (!r.get("IsVideo")) switch (r.resourceType) {
                case "AlbumImage":
                    o.push(r.getExpansionUri("Image"));
                    break;
                case "Image":
                    o.push(r.getCanonicalUri());
                    break;
                default:
                    throw new Error('Expected a Resource of type "Image" or "AlbumImage" but got one of type "' + r.resourceType + '".')
            }
            return o.join(",")
        }, e._mutate = function(e, o) {
            var a = r.assign({}, o),
                i = a.io,
                s = i && i.method || "POST";
            return delete a.io, t._request(e, s, {
                io: r.assign({}, i, {
                    data: a
                }),
                returnRawResponse: !0
            })
        }, t.registerResourceClass("Image", e), module.exports = t.Image = e
    }(), SM.currentModule = null
}, "", {
    requires: ["lodash", "rsvp", "sm", "sm-resource-core"]
});
YUI.add("sm-resource-node", function(e) {
    SM.currentModule = "sm-resource-node";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";

        function e(e, t, i) {
            if (o.call(this), e)
                if ("string" == typeof e) {
                    if (this._parentFolderIdentifier = e, !o.isAPIUri(e))
                        if ("string" == typeof t) this._parentFolderOwner = t;
                        else {
                            if (!t || "User" !== t.resourceType) throw s.error(n, {
                                message: "`owner` must be a nickname string or SM.Resource.User instance.",
                                method: "constructor"
                            });
                            this._parentFolderOwner = t.get("NickName")
                        }
                } else "Folder" === e.resourceType && (this._parentFolderIdentifier = e);
            i || "object" != typeof t || t.isSmugMugResource || (i = t, t = null), i && r.assign(this._fields, i)
        }
        var r = SM["import"]("lodash"),
            o = SM["import"]("sm-resource-core"),
            t = SM["import"]("rsvp"),
            s = SM["import"]("sm-smuglog"),
            n = "sm-resource-node";
        e.prototype = r.create(o.prototype, {
            constructor: e
        });
        var i = e.prototype;
        i.resourceType = "Node", i._getParentFolder = function() {
            var e = this._parentFolderIdentifier;
            if (!e) return t.reject(s.error(n, {
                message: "No parent folder to expand! You probably didn't pass one to the constructor.",
                method: "_getParentFolder"
            }));
            var r;
            return r = e.isSmugMugResource && "Folder" === e.resourceType ? t.resolve(e) : o.isAPIUri(e) ? o.loadUri(e) : o.loadPath(e, this._parentFolderOwner), r.then(function(r) {
                if ("Folder" !== r.resourceType) throw s.error(n, {
                    identifier: e,
                    message: 'Expected resourceType "Folder" but got "' + r.resourceType + '"',
                    method: "_getParentFolder",
                    resource: r
                });
                return r
            })
        }, module.exports = o.Node = e
    }(), SM.currentModule = null
}, "", {
    requires: ["lodash", "rsvp", "sm", "sm-resource-core", "sm-smuglog"]
});
YUI.add("sm-resource-notification", function(r) {
    SM.currentModule = "sm-resource-notification";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";

        function r(r) {
            e.call(this), r && o.assign(this._fields, r)
        }
        var o = SM["import"]("lodash"),
            e = SM["import"]("sm-resource-core");
        r.prototype = o.create(e.prototype, {
            constructor: r
        });
        var t = r.prototype;
        t.resourceType = "UserProductNotification", t.acknowledge = function(r) {
            var o = this.getExpansionUri("AcknowledgeUserProductNotification");
            return e.postUri(o, {
                data: {
                    Dismiss: r
                }
            })
        }, e.registerResourceClass("UserProductNotification", r), module.exports = e.UserProductNotification = r
    }(), SM.currentModule = null
}, "", {
    requires: ["lodash", "sm", "sm-resource-core"]
});
YUI.add("sm-resource-page", function(e) {
    SM.currentModule = "sm-resource-page";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";

        function e() {
            o.apply(this, arguments)
        }
        var r = SM["import"]("lodash"),
            t = SM["import"]("sm-resource-core"),
            o = SM["import"]("sm-resource-node");
        e.prototype = r.create(o.prototype, {
            constructor: e
        });
        var n = e.prototype;
        n.fieldConfig = {
            DateAdded: {
                getter: t.parseDate,
                setter: t.stringifyDate
            },
            DateModified: {
                getter: t.parseDate,
                setter: t.stringifyDate
            }
        }, n.resourceType = "Page", n.getParentFolder = function() {
            if (!this.isNew() || this.hasExpansion("Folder")) return this.expand("Folder");
            var e = this;
            return this._getParentFolder().then(function(r) {
                return r && (e._meta.expansions.Folder = r), r
            })
        }, n._getCreateUri = function() {
            return this.getParentFolder().then(function(e) {
                return e.getExpansionUri("FolderPages")
            })
        }, e.loadById = function(e, r) {
            return t.loadUri("/api/v2/page/" + encodeURIComponent(e), r)
        }, t.registerResourceClass("Page", e), module.exports = t.Page = e
    }(), SM.currentModule = null
}, "", {
    requires: ["lodash", "sm", "sm-resource-core", "sm-resource-folder", "sm-resource-node"]
});
YUI.add("sm-resource-task", function(e) {
    SM.currentModule = "sm-resource-task";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";

        function e() {
            r.apply(this, arguments)
        }
        var t = SM["import"]("lodash"),
            r = SM["import"]("sm-resource-core"),
            s = SM["import"]("rsvp");
        e.prototype = t.create(r.prototype, {
            constructor: e
        });
        var o = e.prototype;
        o.fieldConfig = {
            TimeAdded: {
                getter: r.parseDate,
                setter: r.stringifyDate
            },
            TimeUpdated: {
                getter: r.parseDate,
                setter: r.stringifyDate
            }
        }, o.resourceType = "Task", o.isDone = function() {
            return this.get("Status") === e.STATUS_DONE
        }, o.isError = function() {
            return this.get("Status") === e.STATUS_ERROR
        }, o.isPending = function() {
            return this.get("Status") === e.STATUS_PENDING
        }, o.poll = function(e) {
            if (!this.isPending()) return s.resolve(this);
            if (this._pollPromise) return this._pollPromise;
            e = t.assign({}, {
                maxInterval: 15e3,
                maxRetries: 5,
                minInterval: 1e3
            }, e);
            var r = this;
            return this._pollPromise = new s.Promise(function(t, s) {
                function o() {
                    var n = r.get("PercentComplete");
                    r.refresh().then(function() {
                        return r.isPending() ? (r.get("PercentComplete") <= n && (i = Math.min(e.maxInterval, 1.5 * i)), void setTimeout(o, i)) : (r._pollPromise = null, void t(r))
                    }, function(t) {
                        return e.maxRetries ? (e.maxRetries -= 1, i = Math.min(e.maxInterval, 1.5 * i), void setTimeout(o, i)) : (r._pollPromise = null, void s(t))
                    })
                }
                var i = e.minInterval;
                setTimeout(o, i)
            }), this._pollPromise
        }, e.STATUS_DONE = "Done", e.STATUS_ERROR = "Error", e.STATUS_PENDING = "Pending", e.loadById = function(e, t) {
            return r.loadUri("/api/v2/task/" + encodeURIComponent(e), t)
        }, e.loadByNickName = function(e, s) {
            var o = "/api/v2/user/" + encodeURIComponent(e) + "!tasks";
            return s && s.status && (s = t.assign({}, s), s.io = t.assign({}, s.io), s.io.data = t.assign({}, s.io.data, {
                status: s.status
            }), delete s.status), r.loadUri(o, s)
        }, r.registerResourceClass("Task", e), module.exports = r.Task = e
    }(), SM.currentModule = null
}, "", {
    requires: ["lodash", "rsvp", "sm", "sm-resource-core"]
});
YUI.add("sm-resource-user", function(e) {
    SM.currentModule = "sm-resource-user";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";

        function e(e) {
            r.call(this), e && Object.assign(this._fields, e)
        }
        var r = SM["import"]("sm-resource-core"),
            t = "/api/v2/user",
            o = "generatenickname";
        e.prototype = Object.create(r.prototype, {
            constructor: e
        });
        var s = e.prototype;
        s.resourceType = "User", e.loadByNickName = function(e, o) {
            return r.loadUri(t + "/" + encodeURIComponent(e), o)
        }, e.generateNickName = function(e, s) {
            return r.loadUri(t + "!" + o, {
                data: {
                    FirstName: e,
                    LastName: s
                }
            })
        }, r.registerResourceClass("User", e), module.exports = r.User = e
    }(), SM.currentModule = null
}, "", {
    requires: ["sm", "sm-resource-core"]
});
YUI.add("sm-resource-w9", function(e) {
    SM.currentModule = "sm-resource-w9";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";

        function e(e, o) {
            r.call(this), e && Object.assign(this._fields, e), o && (this._nickName = o)
        }
        var r = SM["import"]("sm-resource-core");
        e.prototype = Object.create(r.prototype, {
            constructor: e
        });
        var o = e.prototype;
        o.resourceType = "W9", o._getCreateUri = function() {
            return Promise.resolve("/api/v2/user/" + encodeURIComponent(this._nickName) + "!w9")
        }, r.registerResourceClass("W9", e), module.exports = r.W9 = e
    }(), SM.currentModule = null
}, "", {
    requires: ["sm", "sm-resource-core"]
});
YUI.add("sm-scrollinfo", function(t) {
    SM.currentModule = "sm-scrollinfo";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        var e = t.config.doc,
            i = t.config.win,
            o = "scroll",
            s = "scrollDown",
            l = "scrollLeft",
            r = "scrollRight",
            n = "scrollUp",
            h = "scrollToBottom",
            c = "scrollToLeft",
            a = "scrollToRight",
            f = "scrollToTop";
        t.Plugin.ScrollInfo = t.Base.create("scrollInfoPlugin", t.Plugin.Base, [], {
            initializer: function(t) {
                this._host = t.host, this._hostIsBody = "body" === this._host.get("nodeName").toLowerCase(), this._scrollDelay = this.get("scrollDelay"), this._scrollMargin = this.get("scrollMargin"), this._scrollNode = this._getScrollNode(), this.refreshDimensions(), this._lastScroll = this.getScrollInfo(), this._bind()
            },
            destructor: function() {
                new t.EventHandle(this._events).detach(), this._events = null
            },
            getOffscreenNodes: function(e, i) {
                "undefined" == typeof i && (i = this._scrollMargin);
                var o = t.Selector.query(e || "*", this._host._node);
                return new t.NodeList(t.Array.filter(o, function(t) {
                    return !this._isElementOnscreen(t, i)
                }, this))
            },
            getOnscreenNodes: function(e, i) {
                "undefined" == typeof i && (i = this._scrollMargin);
                var o = t.Selector.query(e || "*", this._host._node);
                return new t.NodeList(t.Array.filter(o, function(t) {
                    return this._isElementOnscreen(t, i)
                }, this))
            },
            getScrollInfo: function() {
                var t, i, o, s, l, r, n = e.body,
                    h = e.documentElement,
                    c = this._scrollNode,
                    a = this._lastScroll,
                    f = this._scrollMargin,
                    d = void 0 !== window.pageXOffset,
                    g = void 0 !== window.pageYOffset,
                    _ = "CSS1Compat" === (e.compatMode || "");
                return this._hostIsBody ? (t = Math.max(n.scrollWidth, n.clientWidth, h.scrollWidth, h.clientWidth), i = Math.max(n.scrollHeight, n.clientHeight, h.scrollHeight, h.clientHeight), o = d ? window.pageXOffset : _ ? e.documentElement.scrollLeft : e.body.scrollLeft, s = g ? window.pageYOffset : _ ? e.documentElement.scrollTop : e.body.scrollTop) : (t = c.scrollWidth, i = c.scrollHeight, o = c.scrollLeft, s = c.scrollTop), l = s + this._height, r = o + this._width, {
                    atBottom: l > i - f,
                    atLeft: f > o,
                    atRight: r > t - f,
                    atTop: f > s,
                    isScrollDown: a && s > a.scrollTop,
                    isScrollLeft: a && o < a.scrollLeft,
                    isScrollRight: a && o > a.scrollLeft,
                    isScrollUp: a && s < a.scrollTop,
                    scrollBottom: l,
                    scrollHeight: i,
                    scrollLeft: o,
                    scrollRight: r,
                    scrollTop: s,
                    scrollWidth: t
                }
            },
            isNodeOnscreen: function(e, i) {
                return e = t.one(e), !(!e || !this._isElementOnscreen(e._node, i))
            },
            refreshDimensions: function() {
                var o = e.documentElement;
                t.UA.ios || t.UA.android && t.UA.chrome ? (this._winHeight = i.innerHeight, this._winWidth = i.innerWidth) : (this._winHeight = o.clientHeight, this._winWidth = o.clientWidth), this._hostIsBody ? (this._height = this._winHeight, this._width = this._winWidth) : (this._height = this._scrollNode.clientHeight, this._width = this._scrollNode.clientWidth), this._refreshHostBoundingRect()
            },
            _bind: function() {
                var e = t.one("win");
                this._events = [this.after({
                    scrollDelayChange: this._afterScrollDelayChange,
                    scrollMarginChange: this._afterScrollMarginChange
                }), e.on("windowresize", this._afterResize, this)], this._hostIsBody ? this._events.push(e.after("scroll", this._afterHostScroll, this)) : this._events.push(e.after("scroll", this._afterWindowScroll, this), this._host.after("scroll", this._afterHostScroll, this))
            },
            _getScrollNode: function() {
                return t.Node.getDOMNode(this._host)
            },
            _isElementOnscreen: function(t, e) {
                var i = this._hostRect,
                    o = t.getBoundingClientRect();
                return "undefined" == typeof e && (e = this._scrollMargin), !(o.top > i.bottom + e || o.bottom < i.top - e || o.right < i.left - e || o.left > i.right + e)
            },
            _refreshHostBoundingRect: function() {
                var t, e = this._winHeight,
                    i = this._winWidth;
                this._hostIsBody ? (t = {
                    bottom: e,
                    height: e,
                    left: 0,
                    right: i,
                    top: 0,
                    width: i
                }, this._isHostOnscreen = !0) : t = this._scrollNode.getBoundingClientRect(), this._hostRect = t
            },
            _triggerScroll: function(e) {
                var i = this.getScrollInfo(),
                    d = t.merge(e, i),
                    g = this._lastScroll;
                this._lastScroll = i, this.fire(o, d), i.isScrollLeft ? this.fire(l, d) : i.isScrollRight && this.fire(r, d), i.isScrollUp ? this.fire(n, d) : i.isScrollDown && this.fire(s, d), i.atBottom && (!g.atBottom || i.scrollHeight > g.scrollHeight) && this.fire(h, d), i.atLeft && !g.atLeft && this.fire(c, d), i.atRight && (!g.atRight || i.scrollWidth > g.scrollWidth) && this.fire(a, d), i.atTop && !g.atTop && this.fire(f, d)
            },
            _afterHostScroll: function(t) {
                var e = this;
                clearTimeout(this._scrollTimeout), this._scrollTimeout = setTimeout(function() {
                    e._triggerScroll(t)
                }, this._scrollDelay)
            },
            _afterResize: function() {
                this.refreshDimensions()
            },
            _afterScrollDelayChange: function(t) {
                this._scrollDelay = t.newVal
            },
            _afterScrollMarginChange: function(t) {
                this._scrollMargin = t.newVal
            },
            _afterWindowScroll: function() {
                this._refreshHostBoundingRect()
            }
        }, {
            NS: "scrollInfo",
            ATTRS: {
                scrollDelay: {
                    value: 50
                },
                scrollMargin: {
                    value: 50
                }
            }
        })
    }(), SM.currentModule = null
}, "", {
    requires: ["array-extras", "base-build", "event-resize", "node-pluginhost", "plugin", "selector"]
});
YUI.add("sm-slider", function(e) {
    SM.currentModule = "sm-slider";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        e.namespace("SM").Slider = e.Base.create("sm-slider", e.Slider, [], {
            initializer: function() {
                this._isHorizontal = null, this.set("thumbUrl", "/img/spacer.gif"), this.after("thumbMove", this._afterThumbMove, this)
            },
            destructor: function() {
                this._valuePanel && this._valuePanel.destroy()
            },
            _afterThumbMove: function(e) {
                if (this._thumbNode || (this._thumbNode = this.get("boundingBox").one("." + this.getClassName("thumb"))), null === this._isHorizontal && (this._isHorizontal = "x" === this.get("axis")), !this._railSize) {
                    var t = this.get("boundingBox").one("." + this.getClassName("rail"));
                    this._railSize = this._isHorizontal ? t.get("offsetWidth") : t.get("offsetHeight")
                }
                if (!this._capNode) {
                    var i = this.getClassName(this._isHorizontal ? "rail-cap-left" : "rail-cap-bottom");
                    this._capNode = this.get("boundingBox").one("." + i)
                }
                this._isHorizontal ? this._capNode.setStyle("width", e.offset + "px") : this._capNode.setStyle("height", this._railSize - e.offset + "px"), this._syncValuePanel()
            },
            _getValuePanel: function() {
                return this._valuePanel || (this._valuePanel = new e.SM.Panel({
                    visible: !1,
                    render: !0,
                    zIndex: 1
                }), this._valuePanel.get("contentBox").removeClass("sm-panel-content").addClass("sm-tooltip")), this._valuePanel
            },
            _syncValuePanel: function() {
                var t = this._getValuePanel(),
                    i = this.get("valuePanelFormatter");
                return t.get("contentBox").setHTML(i(this.get("value"))), this._isHorizontal ? t.align(this._thumbNode, [e.WidgetPositionAlign.BC, e.WidgetPositionAlign.TC]) : t.align(this._thumbNode, [e.WidgetPositionAlign.RC, e.WidgetPositionAlign.LC]), this._panelTimer && this._panelTimer.cancel(), t.show(), this._panelTimer = e.later(500, this, function() {
                    this._getValuePanel().hide()
                }, !1), t
            }
        }, {
            CSS_PREFIX: "yui3-slider",
            ATTRS: {
                valuePanelFormatter: {
                    validator: e.Lang.isFunction,
                    value: function(e) {
                        return e
                    }
                }
            }
        })
    }(), SM.currentModule = null
}, "", {
    requires: ["slider", "sm-panel"]
});
YUI.add("sm-slideshow-gallery-plugin", function(e) {
    SM.currentModule = "sm-slideshow-gallery-plugin";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        function t(t) {
            e.Plugin.Base.call(this, t)
        }
        var s = SM["import"]("sm-image-preloader");
        t.NAME = "slideshowGalleryPlugin", t.NS = "gallery", e.namespace("SM").SlideshowGalleryPlugin = e.extend(t, e.Plugin.Base, {
            initializer: function(e) {
                var t, s;
                this._host = e.host, this._modelList = this._host.get("modelList"), this._eventHandles = [], this._loadingPage = {}, this._prefetched = {}, this.beforeHostMethod("play", this._play), this.beforeHostMethod("render", this._render), this.beforeHostMethod("_setIndex", this._setIndex), this.beforeHostMethod("_afterIndexChange", this._afterIndexChange), this.beforeHostMethod("_setArrowStates", this._setArrowStates), this.beforeHostMethod("_cacheImages", this._cacheImages), this.afterHostMethod("_resize", this._afterResize), t = this._modelList.get("PageNumber"), s = this._host.get("index"), t > 1 && (s += (t - 1) * this._modelList.get("PageSize"), this._host.set("index", s))
            },
            _afterResize: function() {
                var e = this._modelList.get("PageNumber"),
                    t = this._getPrefetchSizeUrls(this._modelList);
                t !== this._prefetchSizes && (this._prefetched = {}, s.prefetch(t), this._prefetchSizes = t, this._prefetch(e), this._prefetch(e + 1), this._prefetch(e - 1))
            },
            _getPrefetchSizeUrls: function(t) {
                var s = [],
                    i = this._host.get("width"),
                    a = this._host.get("height");
                return t.some(function(t) {
                    var n = e.SM.Views.Tile.getImageSize(t, "fit", i, {
                        maxHeight: a,
                        maxWidth: i
                    });
                    s.push(e.SM.Models.Image.getUrl(t, n))
                }), s
            },
            _prefetch: function(t) {
                var i, a, n = this._modelList,
                    r = n.get("TotalPages");
                t >= 1 && r >= t && !this._prefetched[t] && (i = e.merge(n._lastApiRequest), a = i.data = e.merge(i.data), delete i.on, delete a.returnModelList, a.imageSizes && delete a.imageSizes, a.PageNumber = t, n._api.sendRequest(i).then(function() {
                    var e = this._getPrefetchSizeUrls(n);
                    s.prefetch(e)
                }.bind(this)), this._prefetched[t] = !0)
            },
            _play: function() {
                var t = this._host,
                    s = this._modelList.get("TotalItems");
                return t.get("index") + 1 === s && t.set("index", 0, {
                    src: "play"
                }), s && (t._playButton && t._playButton.replaceClass("sm-fonticon-PlayerPlay", "sm-fonticon-PlayerPause"), t._cacheSize = e.SM.Views.Slideshow.SMALL_CACHE, t._playing = !0, t._timeStarted = +new Date, t._scheduleNext()), new e.Do.Prevent
            },
            _render: function() {
                var t = this._host,
                    s = this._modelList,
                    i = t.getAttrs(),
                    a = s.get("PageNumber"),
                    n = !s.get("TotalItems"),
                    r = i.splashImage ? +i.splashDelay : i.speed;
                if (!n) return i.index -= (a - 1) * s.get("PageSize"), t.rendered || (i.container.setHTML(e.Template.Micro.render(t.template, i)), i.showPlayButton && (t._playButton = i.container.one(".sm-slideshow-play .sm-fonticon-PlayerPlay"), i.autoStart && t._playButton.replaceClass("sm-fonticon-PlayerPlay", "sm-fonticon-PlayerPause"))), t._resize(), i.currentImage || (i.currentImage = s.item(i.index), t.set("currentImage", i.currentImage)), i.transition && i.container.addClass("sm-slideshow-transition-" + i.transition), i.splashImage && (t._showingSplash = !0, i.currentImage = i.splashImage, i.container.addClass("sm-slideshow-splash")), i.currentImage && (t._bindUI(), t._showImage(i.currentImage).then(function() {
                    t._timeStarted = +new Date, t._timeRemaining = 1e3 * r, t._bindNav(), i.autoStart && t._playing !== !1 ? (t.play(), t._hideControls(e.SM.Views.Slideshow.CONTROLS_INITIAL_DELAY)) : t._showingSplash && t._scheduleNext()
                })), t.rendered = !0, new e.Do.Prevent
            },
            _setIndex: function(t) {
                var s = this._host,
                    i = this._modelList.get("TotalItems");
                return (0 > t || t >= i) && (s.get("loop") ? t = i && (i + t % i) % i : (s.fire("invalidIndex", {
                    prevVal: s.get("index"),
                    newVal: t
                }), t = e.Attribute.INVALID_VALUE)), new e.Do.Halt(null, t)
            },
            _afterIndexChange: function(t) {
                var s, i = this._modelList,
                    a = i.get("PageNumber"),
                    n = i.get("TotalItems"),
                    r = i.get("PageSize"),
                    o = Math.floor(t.newVal / r) + 1 || 1,
                    h = this._host;
                return "currentImage" !== t.src && ((!n || t.newVal === n - 1 && !h.get("loop")) && h.pause(), n && a !== o ? this._loadingPage[o] || (this._loadingPage[o] = !0, this._modelList.loadPage(o, e.bind(this._pageLoaded, this))) : (s = t.newVal - (a - 1) * r, h.set("currentImage", i.item(s), {
                    src: "index"
                }))), new e.Do.Prevent
            },
            _setArrowStates: function() {
                var t = this._host,
                    s = t.get("container"),
                    i = t.get("loop"),
                    a = t.get("index"),
                    n = this._modelList.get("TotalItems"),
                    r = !n || !i && 0 === a,
                    o = !n || !i && a === n - 1,
                    h = s.one(".sm-slideshow-nav-left"),
                    l = s.one(".sm-slideshow-nav-right");
                return h && (h.toggleClass("sm-slideshow-nav-disabled", r), l.toggleClass("sm-slideshow-nav-disabled", o)), new e.Do.Prevent
            },
            _cacheImages: function(t) {
                var s, i, a, n = this._host,
                    r = this._modelList,
                    o = n.get("height"),
                    h = n.get("width"),
                    l = e.SM.Views.Tile;
                for (t -= (r.get("PageNumber") - 1) * r.get("PageSize"), i = Math.max(0, t - n._cacheSize[0]), a = Math.min(r.size(), t + n._cacheSize[1]); a > i; ++i) s = r.item(i), s && l.cacheImage(s, "fit", h, {
                    maxHeight: o,
                    maxWidth: h
                });
                return new e.Do.Prevent
            },
            _pageLoaded: function() {
                var e, t, s = this._host,
                    i = s.get("index"),
                    a = this._modelList.get("PageSize"),
                    n = Math.floor(i / a) + 1,
                    r = this._modelList.get("PageNumber");
                this._loadingPage[r] = !1, this._prefetch(r + 1), this._prefetch(r - 1), r === n && (t = i - (r - 1) * a, e = this._modelList.item(t), e !== s.get("currentImage") && s.set("currentImage", e, {
                    src: "index"
                }), this._cacheImages(i))
            }
        })
    }(), SM.currentModule = null
}, "", {
    requires: ["plugin", "sm-image-preloader"]
});
YUI.add("sm-slideshow-view", function(e) {
    SM.currentModule = "sm-slideshow-view";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        ! function() {
            "use strict";
            var t, i, n = e.Template.Micro,
                s = e.SM.Views.Tile.cacheImage,
                o = new Error("no image"),
                a = new e.Promise(function(e, t) {
                    t(o)
                }),
                r = [1, 3],
                l = [5, 10];
            ! function(e) {
                var i, n = {
                    requestFullscreen: {
                        active: "isFullscreen",
                        change: "fullscreenchange",
                        request: "requestFullscreen",
                        error: "fullscreenerror",
                        cancel: "exitFullscreen",
                        enabled: "fullscreenEnabled",
                        fullScreenElement: "fullscreenElement"
                    },
                    mozRequestFullScreen: {
                        active: "mozFullScreen",
                        change: "mozfullscreenchange",
                        request: "mozRequestFullScreen",
                        error: "mozfullscreenerror",
                        cancel: "mozCancelFullScreen",
                        enabled: "mozFullScreenEnabled",
                        fullScreenElement: "mozFullScreenElement"
                    },
                    webkitRequestFullScreen: {
                        active: "webkitIsFullScreen",
                        change: "webkitfullscreenchange",
                        request: "webkitRequestFullScreen",
                        error: "webkitfullscreenerror",
                        cancel: "webkitCancelFullScreen",
                        enabled: "webkitFullscreenEnabled",
                        fullScreenElement: "webkitCurrentFullScreenElement"
                    }
                };
                for (i in n)
                    if (n.hasOwnProperty(i) && e[i]) {
                        t = n[i];
                        break
                    }
            }(document.createElement("div")), t && (e.Node.DOM_EVENTS[t.change] = !0, e.Node.DOM_EVENTS[t.error] = !0), i = e.Base.create("sm-slideshow-view", e.View, [], {
                _cacheSize: null,
                _controlsHidden: !0,
                _eventHandles: null,
                _playing: null,
                _timer: null,
                _timeRemaining: 0,
                _timeStarted: 0,
                _transition: null,
                containerTemplate: '<div class="sm-slideshow"></div>',
                events: {
                    ".sm-slideshow-nav": {
                        click: "_onNavClick"
                    },
                    ".sm-slideshow-fullscreen-button": {
                        click: "_onFullScreenButtonClick"
                    },
                    ".sm-slideshow-play-pause": {
                        click: "_onPlayPause"
                    }
                },
                template: '<div class="sm-slideshow-tile"><div class="sm-slideshow-image"></div><% if (data.showNavigation) { %><div class="sm-slideshow-nav sm-slideshow-nav-left">' + e.SM.Templates.button({
                    icon: "AngleBracketLeftSlim",
                    size: "large",
                    noChrome: !0
                }) + '</div><div class="sm-slideshow-nav sm-slideshow-nav-right">' + e.SM.Templates.button({
                    icon: "AngleBracketRightSlim",
                    size: "large",
                    noChrome: !0
                }) + '</div><% } %><% if (data.showPlayButton) { %><div class="sm-slideshow-play-pause">' + e.SM.Templates.button({
                    className: "sm-slideshow-play",
                    icon: "PlayerPlay",
                    size: "large",
                    noChrome: !0
                }) + '</div><% } %><% if (data.showFullscreen) { %><div class="sm-slideshow-fullscreen-button">' + e.SM.Templates.button({
                    icon: "FullScreenSlim",
                    size: "large",
                    noChrome: !0
                }) + "</div><% } %></div>",
                next: function() {
                    this.set("index", this.get("index") + 1)
                },
                pause: function() {
                    this._playButton && this._playButton.replaceClass("sm-fonticon-PlayerPause", "sm-fonticon-PlayerPlay"), clearTimeout(this._timer), this._playing = !1, this._timeRemaining -= +new Date - this._timeStarted
                },
                play: function() {
                    var e = this.get("modelList").size();
                    this.get("index") + 1 === e && this.set("index", 0, {
                        src: "play"
                    }), this._cacheSize = r, e && (this._playButton && this._playButton.replaceClass("sm-fonticon-PlayerPlay", "sm-fonticon-PlayerPause"), this._playing = !0, this._timeStarted = +new Date, this._scheduleNext())
                },
                previous: function() {
                    this.set("index", this.get("index") - 1)
                },
                render: function() {
                    var e = this,
                        t = this.getAttrs(),
                        s = !t.modelList.size(),
                        o = t.splashImage ? +t.splashDelay : t.speed;
                    s || (this.rendered || (t.container.setHTML(n.render(this.template, t)), t.showPlayButton && (this._playButton = t.container.one(".sm-slideshow-play .sm-fonticon-PlayerPlay"), !s && t.autoStart && this._playButton.replaceClass("sm-fonticon-PlayerPlay", "sm-fonticon-PlayerPause"))), this._resize(), t.transition && t.container.addClass("sm-slideshow-transition-" + t.transition), t.randomize && this.shuffleImages(), t.currentImage ? this.set("index", t.modelList.indexOf(t.currentImage)) : (t.currentImage = t.modelList.item(t.index), this.set("currentImage", t.currentImage)), t.splashImage && (this._showingSplash = !0, t.currentImage = t.splashImage, t.container.addClass("sm-slideshow-splash")), t.currentImage && (this._bindUI(), this._showImage(t.currentImage, !0).then(function(n) {
                        n || (e._timeRemaining = 1e3 * o, e._timeStarted = +new Date), e._bindNav(), t.autoStart && e._playing !== !1 ? (e.play(), e._hideControls(i.CONTROLS_INITIAL_DELAY)) : (e._showingSplash || n) && e._scheduleNext()
                    })), this.rendered = !0)
                },
                shuffleImages: function() {
                    for (var e, t, i = this.get("modelList"), n = i.toArray(), s = n.length, o = s - 1; s > 0;) e = Math.min(o, Math.floor(Math.random() * s--)), t = n[s], n[s] = n[e], n[e] = t;
                    i.reset(n)
                },
                toggleFullscreen: function(e) {
                    var i = this.get("container");
                    void 0 === e && (e = !document[t.active]), t && (e ? i.getDOMNode()[t.request]() : (document[t.cancel](), this.fire("exitFullScreen")))
                },
                _afterCurrentImageChange: function(e) {
                    this._showImage(e.newVal)
                },
                _afterIndexChange: function(e) {
                    var t = this.get("modelList"),
                        i = t.size(),
                        n = this.get("loop");
                    "currentImage" !== e.src && ((!i || e.newVal === i - 1 && !n) && this.pause(), i && (0 === e.newVal && this.get("randomize") && this.shuffleImages(), this.set("currentImage", t.item(e.newVal), {
                        src: "index"
                    })))
                },
                _bindNav: function() {
                    this._eventHandles.push(this.after("currentImageChange", this._afterCurrentImageChange), this._container.on("mousemove", this._onMouseMove, this), this._container.on("mouseout", this._onMouseOut, this)), this.get("keyboardControls") && this._eventHandles.push(e.one("doc").on("keyup", this._onKeyup, this))
                },
                _bindUI: function() {
                    this._eventHandles.push(e.on("layout:widthchange", this._resize, this), e.on("windowresize", this._resize, null, this), this.after("indexChange", this._updateImageCache)), t && this._eventHandles.push(e.on(t.change, this._onFullScreenChange, null, this))
                },
                _cacheImages: function(e) {
                    for (var t, i = this.get("modelList"), n = this.get("width"), o = this.get("height"), a = Math.max(0, e - this._cacheSize[0]), r = Math.min(i.size(), e + this._cacheSize[1]); r > a; ++a)
                        if (t = i.item(a)) {
                            var l = this.get("cover") ? "cover" : "fit";
                            s(t, l, n, {
                                containerHeight: o,
                                maxHeight: o,
                                maxWidth: n
                            })
                        }
                },
                _createImageView: function(t) {
                    var i = {
                        autoResize: !1,
                        center: !0,
                        clickable: this.get("clickable"),
                        imageCrop: "none",
                        resource: t,
                        showInfo: this.get("showCaptions") && "over",
                        dataMap: {
                            Url: "LightboxUrl"
                        }
                    };
                    return this.get("cover") ? (i.imageSize = "cover", t.get("OriginalHeight") > t.get("OriginalWidth") && (i.verticallyCenter = !1)) : (i.maxHeight = this.get("height"), i.maxWidth = this.get("width"), i.imageSize = "fit"), new e.SM.Views.Tile(i)
                },
                destructor: function() {
                    new e.EventHandle(this._eventHandles).detach(), this.get("container").setHTML("").setStyle("height", ""), this._imageView && (this._imageView.destroy(), this._views && e.each(this._views, function(e) {
                        e.destroy()
                    })), clearTimeout(this._timer), clearTimeout(this._controlTimer)
                },
                initializer: function() {
                    this._cacheSize = r, this._transition = this.get("transition"), "function" != typeof this._transition && (this._transition = i.Transitions[this._transition] || i.Transitions.none), this._eventHandles = [this.after("indexChange", e.bind("_afterIndexChange", this))], this.get("randomize") && this.shuffleImages()
                },
                _getFullScreen: function() {
                    return t && document[t.active]
                },
                _getHeight: function(e) {
                    var t = this._container;
                    if (t && "fixed" === this.get("heightSource")) {
                        var n = t.get("offsetWidth"),
                            s = i.HEIGHT_RATIOS[this.get("heightRatio")] || 1.33,
                            o = Math.round(n * s);
                        return o > e ? e : o
                    }
                    return this._height
                },
                _hideControls: function(e) {
                    var t = this;
                    e || (t._hoveringControls = !1), t._controlTimer && (clearTimeout(t._controlTimer), t._controlTimer = null), e ? t._controlTimer = setTimeout(function() {
                        t._hoveringControls || (t._container.addClass("sm-slideshow-hide-controls"), t._controlsHidden = !0)
                    }, e) : (t._container.addClass("sm-slideshow-hide-controls"), t._controlsHidden = !0)
                },
                _onFullScreenChange: function() {
                    this._resize(), document[t.active] || this.fire("exitFullScreen")
                },
                _onFullScreenButtonClick: function() {
                    this.toggleFullscreen()
                },
                _onKeyup: function(e) {
                    var t = 37 === e.keyCode ? "previous" : 39 === e.keyCode ? "next" : null;
                    t && (e.preventDefault(), this._cacheSize = l, this._showingSplash || (this.get("showPlayButton") && this.pause(), this[t]()))
                },
                _onMouseOut: function(e) {
                    e.target._node.className.indexOf("sm-button") > -1 && (this._hoveringControls = !1)
                },
                _onMouseMove: function(e) {
                    this._showControls(i.CONTROLS_DELAY), e.target._node.className.indexOf("sm-button") > -1 && (this._hoveringControls = !0)
                },
                _onNavClick: function(e) {
                    var t = e.currentTarget;
                    e.preventDefault(), this._cacheSize = l, this._showingSplash || t.hasClass("sm-slideshow-nav-disabled") || (this.get("showPlayButton") && this.pause(), t.hasClass("sm-slideshow-nav-left") ? this.previous() : this.next())
                },
                _onPlayPause: function(e) {
                    e.preventDefault(), this._playButton.hasClass("sm-fonticon-PlayerPause") ? this.pause() : this.play()
                },
                _resize: function() {
                    var t, n, s, o = this._container,
                        a = 0,
                        r = 0,
                        l = this.get("heightSource");
                    this.get("fullScreen") ? (a = screen.width, r = screen.height) : (o && (o.setStyle("width", ""), a = o.get("offsetWidth")), "fixed" === l ? r = this.get("height") : "inline" === l ? r = o.get("offsetHeight") : (t = i.HEIGHT_RATIOS[this.get("heightRatio")] || 1.33, n = e.DOM.winHeight() - 12, r = Math.round(a * t), o && this.get("contentAwareHeight") && (s = o.getY(), n > s && (.5 > s / n || n - s > 250) && (n -= s)), r > n && (r = n))), this._set("width", a), this._height = r, o && "inline" !== l && o.setStyles({
                        width: a + "px",
                        height: r + "px"
                    }), this._imageView && (this._imageView.resize(a, r), this._views && e.each(this._views, function(e) {
                        e.resize(a, r)
                    })), this._cacheImages(this.get("index"))
                },
                _scheduleNext: function() {
                    var e, t, i = this,
                        n = +new Date;
                    this._timer && clearTimeout(this._timer), this._timeRemaining -= n - this._timeStarted, this._timeStarted = n, e = Math.max(0, this._timeRemaining), t = this._showingSplash ? function() {
                        i._showingSplash = !1, i._container.removeClass("sm-slideshow-splash"), i._showImage(i.get("currentImage"))
                    } : function() {
                        i.next()
                    }, this._timer = setTimeout(t, e)
                },
                _setArrowStates: function() {
                    var e = this.get("container"),
                        t = this.get("loop"),
                        i = this.get("index"),
                        n = this.get("modelList").size(),
                        s = !n || !t && 0 === i,
                        o = !n || !t && i === n - 1,
                        a = e.one(".sm-slideshow-nav-left"),
                        r = e.one(".sm-slideshow-nav-right");
                    a && (a.toggleClass("sm-slideshow-nav-disabled", s), r.toggleClass("sm-slideshow-nav-disabled", o))
                },
                _setIndex: function(t) {
                    var i = this.get("modelList").size();
                    if (0 > t || t >= i) {
                        if (!this.get("loop")) return this.fire("invalidIndex", {
                            prevVal: this.get("index"),
                            newVal: t
                        }), e.Attribute.INVALID_VALUE;
                        t = i && (i + t % i) % i
                    }
                    return t
                },
                _showControls: function(e) {
                    this._controlsHidden && (this._container.removeClass("sm-slideshow-hide-controls"), this._controlsHidden = !1), this._controlTimer && (clearTimeout(this._controlTimer), this._controlTimer = null), e && this._hideControls(e)
                },
                _showImage: function(t, i) {
                    var n = this,
                        o = n.get("width");
                    if (n._setArrowStates(), !t) return a;
                    var r = n.get("height"),
                        l = n.get("cover") ? "cover" : "fit";
                    return s(t, l, o, {
                        containerHeight: r,
                        maxWidth: o,
                        maxHeight: r
                    }).then(function() {
                        var i = n.get("currentImage");
                        return n._showingSplash || i === t ? e.when(n._transition.call(n, t)) : void 0
                    }).then(function() {
                        n.get("currentImage") === t && (n._timeStarted = +new Date, n._timeRemaining = 1e3 * n.get("speed"), n._playing && n._scheduleNext())
                    }, function(s) {
                        var o = s ? s.message || s : "error showing image";
                        return n._timeRemaining = 0, e.SM.SmugLog.add("slideshow", o, e.SM.SmugLog.LEVEL_WARNING), i || n.get("currentImage") !== t || n._scheduleNext(), !0
                    })
                },
                _updateImageCache: function(e) {
                    this._cacheImages(e.newVal)
                },
                _keyframeTransition: function(t) {
                    var i, n, s, o = this._imageView,
                        a = o && o.get("resource"),
                        r = this.get("container").one(".sm-slideshow-image"),
                        l = this.get("transitionSpeed"),
                        h = e.stamp(t.image),
                        u = this._views || (this._views = {});
                    return t = e.merge({
                        fade: !0
                    }, t), t.image !== a ? (i = u[h], i ? (n = i.get("container"), n.removeClass("sm-slideshow-image-transitioning"), delete u[h]) : (i = this._createImageView(t.image), n = i.get("container"), t.fade && n.setStyle("opacity", 0), r.insertBefore(n, r.get("firstChild")), i.render(), u[h] = i), s = new e.Promise(function(e) {
                        t.fade && n.transition({
                            opacity: 1,
                            duration: l * (1 - n.getComputedStyle("opacity"))
                        }), o && t.animationIn && n.setStyles({
                            "-webkit-animation": t.animationIn + " " + l + "s",
                            animation: t.animationIn + " " + l + "s"
                        }), window.setTimeout(function() {
                            e()
                        }, 1e3 * l)
                    }), o && (n = o.get("container"), h = e.stamp(a), u[h] = o, n.addClass("sm-slideshow-image-transitioning"), t.fade && n.transition({
                        opacity: 0,
                        duration: l * n.getComputedStyle("opacity")
                    }), t.animationOut && n.setStyles({
                        "-webkit-animation": t.animationOut + " " + l + "s",
                        animation: t.animationOut + " " + l + "s"
                    }), window.setTimeout(function() {
                        n.remove(!0), delete u[h], o.destroy()
                    }, 1e3 * l)), this._imageView = i, s) : void 0
                }
            }, {
                BIG_CACHE: l,
                SMALL_CACHE: r,
                ATTRS: {
                    modelList: {
                        value: null
                    },
                    index: {
                        value: 0,
                        setter: "_setIndex"
                    },
                    cover: {
                        value: !1
                    },
                    currentImage: {
                        value: null
                    },
                    fullScreen: {
                        getter: "_getFullScreen",
                        readOnly: !0
                    },
                    heightSource: {
                        value: "auto",
                        validator: function(e) {
                            return "auto" === e || "fixed" === e || "inline" === e
                        }
                    },
                    heightRatio: {
                        value: "4x3",
                        validator: function(e) {
                            return e in i.HEIGHT_RATIOS
                        }
                    },
                    height: {
                        value: 800,
                        getter: "_getHeight"
                    },
                    contentAwareHeight: {
                        value: !0
                    },
                    width: {
                        readOnly: !0
                    },
                    showCaptions: {
                        value: !1
                    },
                    autoStart: {
                        value: !0
                    },
                    speed: {
                        value: 5
                    },
                    transitionSpeed: {
                        value: 5
                    },
                    splashDelay: {
                        value: 5
                    },
                    splashImage: {
                        value: null
                    },
                    showNavigation: {
                        value: !0
                    },
                    showFullscreen: {
                        value: !!t,
                        setter: function(e) {
                            return t && e
                        }
                    },
                    showPlayButton: {
                        value: !0
                    },
                    loop: {
                        value: !0
                    },
                    keyboardControls: {
                        value: !1
                    },
                    transition: {
                        value: "fade"
                    },
                    randomize: {},
                    clickable: {
                        value: !1
                    }
                },
                SPEEDS: {
                    slow: 15e3,
                    medium: 1e4,
                    fast: 5e3
                },
                TRANSITION_SPEEDS: {
                    slow: 5,
                    medium: 2,
                    fast: 1
                },
                HEIGHT_RATIOS: {
                    "1x1": 1,
                    "4x3": .75,
                    "3x4": 1.33,
                    "3x2": 2 / 3,
                    "2x3": 1.5,
                    "3x1": 1 / 3,
                    "1x3": 3
                },
                CONTROLS_DELAY: 1500,
                CONTROLS_INITIAL_DELAY: 3e3,
                Transitions: {
                    none: function(e) {
                        this._imageView && this._imageView.remove(!0);
                        var t = this._imageView = this._createImageView(e);
                        this.get("container").one(".sm-slideshow-image").prepend(t.get("container")), t.render()
                    },
                    fade: function(t) {
                        var i, n, s, o = this._imageView,
                            a = o && o.get("resource"),
                            r = this.get("container").one(".sm-slideshow-image"),
                            l = this.get("transitionSpeed"),
                            h = e.stamp(t),
                            u = this._views || (this._views = {});
                        if (t !== a) {
                            if (i = u[h], i ? (n = i.get("container"), n.removeClass("sm-slideshow-image-transitioning"), delete u[h]) : (i = this._createImageView(t), n = i.get("container"), n.setStyle("opacity", 0), r.insertBefore(n, r.get("firstChild")), i.render(), u[h] = i), s = new e.Promise(function(e) {
                                    window.setTimeout(function() {
                                        var t = l * (1 - n.getComputedStyle("opacity"));
                                        n.transition({
                                            opacity: 1,
                                            duration: t || 1
                                        }, function() {
                                            e()
                                        })
                                    }, 0)
                                }), o) {
                                var m = o.get("container");
                                h = e.stamp(a), u[h] = o, m.addClass("sm-slideshow-image-transitioning"), window.setTimeout(function() {
                                    var e = l * m.getComputedStyle("opacity");
                                    m.transition({
                                        opacity: 0,
                                        duration: e || 1
                                    }, function() {
                                        m.remove(!0), delete u[h], o.destroy()
                                    })
                                }, 0)
                            }
                            return this._imageView = i, s
                        }
                    },
                    zoomin: function(e) {
                        this._keyframeTransition({
                            image: e,
                            animationIn: "slideshow-zoomin-in",
                            animationOut: "slideshow-zoomin-out"
                        })
                    },
                    zoomout: function(e) {
                        this._keyframeTransition({
                            image: e,
                            animationIn: "slideshow-zoomout-in",
                            animationOut: "slideshow-zoomout-out"
                        })
                    },
                    zoominout: function(e) {
                        this._keyframeTransition({
                            image: e,
                            animationIn: "slideshow-zoomout-in",
                            animationOut: "slideshow-zoomin-out"
                        })
                    },
                    zoomoutin: function(e) {
                        this._keyframeTransition({
                            image: e,
                            animationIn: "slideshow-zoomin-in",
                            animationOut: "slideshow-zoomout-out"
                        })
                    },
                    slidezoom: function(e) {
                        this._keyframeTransition({
                            image: e,
                            animationIn: "slideshow-zoomin-in",
                            animationOut: "slideshow-down-out"
                        })
                    },
                    slidedown: function(e) {
                        this._keyframeTransition({
                            image: e,
                            animationIn: "slideshow-down-in",
                            animationOut: "slideshow-down-out"
                        })
                    },
                    slideup: function(e) {
                        this._keyframeTransition({
                            image: e,
                            animationIn: "slideshow-up-in",
                            animationOut: "slideshow-up-out"
                        })
                    },
                    slideupdown: function(e) {
                        this._keyframeTransition({
                            image: e,
                            animationIn: "slideshow-up-in",
                            animationOut: "slideshow-down-out"
                        })
                    },
                    slideleft: function(e) {
                        this._keyframeTransition({
                            image: e,
                            animationIn: "slideshow-left-in",
                            animationOut: "slideshow-left-out"
                        })
                    },
                    slideright: function(e) {
                        this._keyframeTransition({
                            image: e,
                            animationIn: "slideshow-right-in",
                            animationOut: "slideshow-right-out"
                        })
                    },
                    slideleftright: function(e) {
                        this._keyframeTransition({
                            image: e,
                            animationIn: "slideshow-right-in",
                            animationOut: "slideshow-left-out"
                        })
                    },
                    flipdown: function(e) {
                        this._keyframeTransition({
                            image: e,
                            animationIn: "slideshow-zoomin-in",
                            animationOut: "slideshow-flipdown-out"
                        })
                    },
                    flipup: function(e) {
                        this._keyframeTransition({
                            image: e,
                            animationIn: "slideshow-zoomin-in",
                            animationOut: "slideshow-flipup-out"
                        })
                    },
                    flipleft: function(e) {
                        this._keyframeTransition({
                            image: e,
                            animationIn: "slideshow-zoomin-in",
                            animationOut: "slideshow-flipleft-out"
                        })
                    },
                    flipright: function(e) {
                        this._keyframeTransition({
                            image: e,
                            animationIn: "slideshow-zoomin-in",
                            animationOut: "slideshow-flipright-out"
                        })
                    }
                }
            }), e.namespace("SM.Views").Slideshow = i
        }()
    }(), SM.currentModule = null
}, "", {
    requires: ["anim", "base", "event-gestures", "event-resize", "sm-image-model", "sm-video-view", "sm-tile-view", "sm-templates-button", "sm-smuglog", "transition", "view", "promise"]
});
YUI.add("sm-smuglog", function(e) {
    SM.currentModule = "sm-smuglog";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        function r(e, r) {
            return r && r instanceof Error ? {
                name: r.name,
                message: r.message,
                number: r.number && 65535 & r.number,
                line: "line" in r ? r.line : r.lineNumber,
                column: "column" in r ? r.column : r.columnNumber,
                sourceUrl: r.sourceUrl || r.fileName,
                response: r.response
            } : r
        }
        var o = {
            LEVEL_UNKNOWN: "unknown",
            LEVEL_STRICT: "strict",
            LEVEL_DEPRECATED: "deprecated",
            LEVEL_INFO: "info",
            LEVEL_NOTICE: "notice",
            LEVEL_WARNING: "warning",
            LEVEL_ERROR: "error",
            add: function(n, s, a, i) {
                if (e.config.global.SMUGLOG_SILENT) return e.Promise.resolve();
                var l = 0;
                return a || (a = o.LEVEL_INFO), i || (i = {}), i.silent || o.console(n, s, a), "object" == typeof s && (l = 1, s = e.JSON.stringify(s, r)), new e.Promise(function(r, o) {
                    e.SM.io.xhr.send({
                        url: e.SM.API.URL,
                        method: "POST",
                        headers: {
                            accept: "application/json"
                        },
                        data: e.QueryString.stringify({
                            method: "rpc.smuglog.add",
                            category: n,
                            json: l,
                            level: a,
                            message: s
                        })
                    }, function(n, s) {
                        s && s.stat === e.SM.API.STATUS_FAIL && (n = s.message), n ? o(new Error(n)) : r(s)
                    })
                })
            },
            console: function(r, n, s) {
                var a = e.config.global.console;
                if (a && !e.config.global.SMUGLOG_SILENT) switch (r || (r = "smuglog"), r = "[" + r + "]", s) {
                    case o.LEVEL_ERROR:
                    case o.LEVEL_STRICT:
                        a.error ? a.error(r, n) : a.log && a.log(r, n);
                        break;
                    case o.LEVEL_DEPRECATED:
                    case o.LEVEL_NOTICE:
                    case o.LEVEL_WARNING:
                        a.warn ? a.warn(r, n) : a.log && a.log(r, n);
                        break;
                    case o.LEVEL_INFO:
                        a.info ? a.info(r, n) : a.log && a.log(r, n);
                        break;
                    default:
                        a.log && a.log(r, n)
                }
            },
            error: function(r, n, s) {
                "object" == typeof n && (s = n, n = null), n || (n = s && s.message || "Mystery error!");
                var a = new Error(n);
                return a.category = r, s && (e.mix(a, s), n = e.merge({
                    message: n
                }, s)), o.console(r, n, o.LEVEL_ERROR), a
            }
        };
        e.namespace("SM").SmugLog = module.exports = o
    }(), SM.currentModule = null
}, "", {
    requires: ["promise", "json-stringify", "querystring-stringify-simple", "sm", "sm-io-xhr-transport", "sm-api-base"]
});
YUI.add("sm-sync-api-base", function(e) {
    SM.currentModule = "sm-sync-api-base";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        function t(t) {
            this._api = this._api || new e.SM.API, this._apiCategoryCfg = null
        }
        var s = {
                plural: function(e) {
                    return e = e.replace(/[cC]hild$/, "$&ren"), e = e.replace(/ey$/, "$&s"), e = e.replace(/y$/, "ies"), e = e.replace(/h$/, "$&es"), e = e.replace(/[^s]$/, "$&s")
                },
                singular: function(e) {
                    return e = e.replace(/([cC]hild)ren$/, "$1"), e = e.replace(/eys$/, "ey"), e = e.replace(/ies$/, "y"), e = e.replace(/hes$/, "h"), e = e.replace(/s$/, "")
                }
            },
            a = SM["import"]("sm-smuglog");
        t.ATTRS = {
            PageNumber: {
                value: 0,
                readOnly: !0
            },
            PageSize: {
                value: 0,
                readOnly: !0
            },
            TotalPages: {
                value: 0,
                readOnly: !0
            },
            TotalItems: {
                value: 0,
                readOnly: !0
            }
        }, t.prototype = {
            apiEndpoint: null,
            apiCategories: null,
            resultLocator: null,
            _getAPIEndpoint: function() {
                return this.apiEndpoint
            },
            _setAPICategoryCfg: function(e) {
                var t = this.apiCategories;
                return this._apiCategoryCfg = null, t && (e.apiCategory && t[e.apiCategory] ? this._apiCategoryCfg = t[e.apiCategory] : t["default"] && (this._apiCategoryCfg = t["default"], this._apiCategoryCfg.method = null)), this._apiCategoryCfg
            },
            _setLastApiRequest: function(e) {
                return this._lastApiRequest = {
                    method: e.method,
                    data: e.data,
                    cfg: e.cfg
                }, "undefined" != typeof e.freshRequest && (this._lastApiRequest.freshRequest = e.freshRequest), "undefined" != typeof e.cacheResponse && (this._lastApiRequest.cacheResponse = e.cacheResponse), this._lastApiRequest
            },
            _buildAPIMethod: function(e, t) {
                var s = "rpc." + this._getAPIEndpoint().toLowerCase();
                switch (e) {
                    case "create":
                        s += ".create";
                        break;
                    case "update":
                        s += ".save";
                        break;
                    case "read":
                        s += ".get";
                        break;
                    case "delete":
                        s += ".delete";
                        break;
                    default:
                        s += "." + e
                }
                return t && (s += t), s
            },
            _buildHTTPMethod: function(e) {
                var t = "GET";
                switch (e) {
                    case "create":
                    case "update":
                    case "delete":
                        t = "POST"
                }
                return t
            },
            _getData: function(e) {
                return {}
            },
            sync: function(t, s, r) {
                var i, n, o, c, u = {},
                    l = null,
                    p = null;
                s = s || {}, p = this._setAPICategoryCfg(s), p && p.method && (l = p.method), i = s.method || this._buildAPIMethod(t, l), n = e.merge(this._getData(t), s.data || {}), o = e.merge({
                    method: this._buildHTTPMethod(t)
                }, s.cfg || {}), this.resultLocator = s.resultLocator || this.resultLocator, e.Lang.isFunction(r) && (u = {
                    success: function(e) {
                        r(null, e.response.results)
                    },
                    failure: function(e) {
                        e.response || a.add("sm-sync-api-base", {
                            cfg: o,
                            method: i,
                            originalResponse: e.responseText || ""
                        }, a.LEVEL_ERROR), r(e.error, e.response && e.response.results)
                    },
                    context: this
                }), c = {
                    method: i,
                    data: n,
                    on: u,
                    cfg: o
                }, "undefined" != typeof s.freshRequest && (c.freshRequest = s.freshRequest), "undefined" != typeof s.cacheResponse && (c.cacheResponse = s.cacheResponse), this._setLastApiRequest(c), this._prefetchNext = s.prefetchNext ? !0 : !1, this._prefetchPrev = s.prefetchPrev ? !0 : !1, this._api.sendRequest(c)
            },
            parse: function(t) {
                var a, r, i, n, o, c, u = this.constructor;
                return a = this.resultLocator || this._getAPIEndpoint(), a && (r = s.singular(a).toLowerCase(), i = s.plural(a).toLowerCase(), e.some(t, function(t, s) {
                    if (!e.Lang.isObject(t, !0)) return !1;
                    var a = s.toLowerCase();
                    return a === i || a === r ? (n = t, !0) : void 0
                })), this._apiCategoryCfg && this._apiCategoryCfg.expanded && e.each(this._apiCategoryCfg.expanded, function(s, a) {
                    var r = t[a];
                    if (r && (e.Lang.isString(s) && (s = e.namespace(s)), s = s instanceof e.Model ? s.constructor : s.superclass && s.superclass.constructor instanceof e.Model.constructor ? s : null))
                        if (e.Lang.isArray(r)) {
                            var i = new s;
                            i.add(r)
                        } else if (e.Lang.isObject(r)) {
                        new s(r)
                    }
                }), u.RELATIONSHIPS && !e.Object.isEmpty(u.RELATIONSHIPS) && e.Object.each(u.RELATIONSHIPS, function(e, s) {
                    var a, r = t[s];
                    r && e.relatedModel && "string" != typeof e.relatedModel && (a = new e.relatedModel(r))
                }), t.Pagination && (o = t.Pagination.PageNumber || 0, c = t.Pagination.PageSize || 0, this._set("PageNumber", o), this._set("PageSize", c), this._set("TotalPages", t.Pagination.TotalPages || 0), this._set("TotalItems", t.Pagination.TotalItems || 0), o && c && this._preFetchPage && (this._prefetchNext && e.later(1e3, this, this._preFetchPage, [o + 1, c], !1), this._prefetchPrev && e.later(1e3, this, this._preFetchPage, [o - 1, c], !1))), n || t
            }
        }, e.namespace("SM").APISyncBase = t
    }(), SM.currentModule = null
}, "", {
    requires: ["sm-api", "sm-apierror-model", "sm-smuglog"]
});
YUI.add("sm-tappable", function(e) {
    SM.currentModule = "sm-tappable";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        var e = SM["import"]("react"),
            t = 20,
            o = function(o) {
                function n(e) {
                    babelHelpers.classCallCheck(this, n);
                    var t = babelHelpers.possibleConstructorReturn(this, (n.__proto__ || Object.getPrototypeOf(n)).call(this, e));
                    return t._touchState = {}, t
                }
                return babelHelpers.inherits(n, o), babelHelpers.createClass(n, [{
                    key: "render",
                    value: function() {
                        var t = e.Children.only(this.props.children),
                            o = t.props;
                        if (!o.onClick && !o.onTap) return t;
                        var n = {
                            WebkitTapHighlightColor: this.props.tapHighlightColor
                        };
                        return e.cloneElement(t, {
                            style: Object.assign(n, o.style),
                            onClick: o.onClick ? this._handleClick.bind(this) : o.onClick,
                            onTouchEnd: o.onTap ? this._handleTouchEnd.bind(this) : o.onTouchEnd,
                            onTouchMove: o.onTap ? this._handleTouchMove.bind(this) : o.onTouchMove,
                            onTouchStart: o.onTap ? this._handleTouchStart.bind(this) : o.onTouchStart
                        })
                    }
                }, {
                    key: "_handleClick",
                    value: function() {
                        var t = this._touchState;
                        if (!t.touched && !t.moved) {
                            var o;
                            (o = e.Children.only(this.props.children).props).onClick.apply(o, arguments)
                        }
                    }
                }, {
                    key: "_handleTouchEnd",
                    value: function() {
                        for (var t = e.Children.only(this.props.children).props, o = this._touchState, n = arguments.length, r = Array(n), l = 0; n > l; l++) r[l] = arguments[l];
                        t.onTouchEnd && t.onTouchEnd.apply(t, r), o.moved || (o.touched = !0, o.timeout = setTimeout(function() {
                            o.touched = !1
                        }, 500), r[0].allowClick = function() {
                            o.touched = !1
                        }, t.onTap.apply(t, r))
                    }
                }, {
                    key: "_handleTouchMove",
                    value: function() {
                        for (var o = e.Children.only(this.props.children).props, n = this._touchState, r = arguments.length, l = Array(r), i = 0; r > i; i++) l[i] = arguments[i];
                        o.onTouchMove && o.onTouchMove.apply(o, l);
                        var a = l[0].touches[0];
                        (Math.abs(n.clientX - a.clientX) >= t || Math.abs(n.clientY - a.clientY) >= t) && (n.moved = !0)
                    }
                }, {
                    key: "_handleTouchStart",
                    value: function() {
                        var t = e.Children.only(this.props.children).props,
                            o = this._touchState;
                        clearTimeout(o.timeout);
                        for (var n = arguments.length, r = Array(n), l = 0; n > l; l++) r[l] = arguments[l];
                        var i = r[0].touches[0];
                        o.clientX = i.clientX, o.clientY = i.clientY, o.moved = !1, o.touched = !1, t.onTouchStart && t.onTouchStart.apply(t, r)
                    }
                }]), n
            }(SM["import"]("sm-component-pure-render"));
        o.propTypes = {
            children: e.PropTypes.element.isRequired,
            tapHighlightColor: e.PropTypes.string
        }, o.defaultProps = {
            tapHighlightColor: "rgba(0, 0, 0, 0)"
        }, module.exports = o
    }(), SM.currentModule = null
}, "", {
    requires: ["react", "react-dom", "sm", "sm-component-pure-render"]
});
YUI.add("sm-templates-button", function(a) {
    SM.currentModule = "sm-templates-button";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        var t = a.Template.Micro,
            e = a.namespace("SM.Templates"),
            n = function(t, e) {
                return -1 !== a.Array.indexOf(e, t) ? t : e[0]
            },
            s = '<span class="sm-fonticon sm-button-fonticon <% if (data.iconSize) { %>sm-fonticon-<%= data.iconSize %><% } %> sm-fonticon-<%= data.icon %>"></span>',
            i = '<svg class="sm-icon sm-icon-<%= data.iconSize %> sm-icon-<%= data.icon %>" role="presentation" title="<%= data.title %>"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#sm-icon-def-<%= data.iconSize %>-<%= data.icon %>"></use></svg>',
            l = t.compile('<div class="sm-button-group sm-button-group-size-<%=data.size%> yui3-g <%=data.className%>"><% Y.Array.each(data.buttons, function(btn) { %><%== Y.SM.Templates.button(Y.merge(btn, {size: data.size, groupSize: data.groupSize})) %><% }); %></div>'),
            o = t.compile('<% if (data.badgeNumber) { %><span class="sm-button-badge-wrapper"><% } %><<%= data.tag %> type="button" class="<%= data.cssClass %>"<% if (data.value != null) { %> data-value="<%= data.value %>"<% } %><% if (data.href) { %> href="<%= data.href %>"<% } %><% if (data.title) { %> title="<%= data.title %>"<% } %><% if (data.target) { %> target="<%= data.target %>"<% } %><% if (data.disabled) { %> disabled<% } %>><% if (data.icon && data.iconAlign === "left") { %><% if (data.svg) { %>' + i + "<% } else { %>" + s + '<% } %><% } %><% if (data.label) { %><span class="sm-button-label"><%== data.label %></span><% } %><% if (data.icon && data.iconAlign === "right") { %><% if (data.svg) { %>' + i + "<% } else { %>" + s + '<% } %><% } %></<%= data.tag %>><% if (data.badgeNumber) { %><span class="sm-badge-number sm-badge-skin-<%= data.badgeSkin %>"><%= data.badgeNumber %></span></span><% } %>'),
            u = t.compile('<button class="sm-button sm-button-skin-overlay sm-button-size-overlay sm-button-overlay"<% if (data.title) { %> title="<%= data.title %>"<% } %><% if (data.value != null) { %> data-value="<%= data.value %>"<% } %>><span class="sm-button-overlay-outline"><% if (data.icon) { %><% if (data.svg) { %>' + i + "<% } else { %>" + s + '<% } %><% } %></span><% if (data.label) { %><div class="sm-button-label"><%== data.label %></div><% } %></button>');
        e.button = function(t) {
            var e = n(t.iconAlign, ["left", "right"]),
                s = n(t.size, ["large", "small"]),
                i = n(t.skin, ["default", "submit", "accent", "none"]);
            return t.groupSize && (t.className || (t.className = ""), 1 === +t.groupSize ? t.className += " yui3-u-1" : t.className += " yui3-u-1-" + t.groupSize), o(a.merge(t, {
                cssClass: ["sm-button", "sm-button-size-" + s, "none" === i ? "" : "sm-button-skin-" + i, t.noChrome ? "sm-button-nochrome" : "", t.selected ? "sm-button-selected" : "", t.className || ""].join(" "),
                iconAlign: e,
                iconSize: s,
                tag: t.href ? "a" : "button",
                target: t.href && t.target ? t.target : "",
                disabled: t.disabled,
                badgeSkin: t.badgeSkin || "alert"
            }))
        }, e.buttonGroup = function(a) {
            return a.size = n(a.size, ["large", "small"]), a.groupSize = a.buttons.length, l(a)
        }, e.overlayButton = function(a) {
            return u(a)
        }
    }(), SM.currentModule = null
}, "", {
    requires: ["array-extras", "template"]
});
YUI.add("sm-templates-form", function(a) {
    SM.currentModule = "sm-templates-form";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        var e = a.Template.Micro,
            t = a.namespace("SM.Templates"),
            l = function(e, t) {
                return -1 !== a.Array.indexOf(t, e) ? e : t[0]
            },
            o = function(e) {
                return a.Lang.isArray(e) ? a.Array.map(e, function(e) {
                    return a.Lang.isArray(e) ? {
                        value: e[0],
                        label: e.length > 1 ? e[1] : ""
                    } : e
                }) : e
            },
            i = e.compile('<div class="sm-form-field-description"><% if (data.description) { %><%= data.description %><% } %></div>'),
            n = e.compile('<input type="<%= data.type ? data.type : "text" %>" name="<%= data.name %>" value="<%= data.value %>" class="sm-form-field sm-form-field-text-input<% if (data.size === "large") { %> sm-form-field-text-input-size-large<% } %><% if (data.noChrome) { %> sm-nochrome<% } %>"<% if (data.placeholder != null) { %> placeholder="<%= data.placeholder %>"<% } %><% if (data.maxlength != null) { %> maxlength="<%= data.maxlength %>"<% } %><% if (data.disabled) { %> disabled<% } %><% if (data.readonly) { %> readonly<% } %>/>'),
            s = e.compile('<label class="sm-form-field sm-form-field-text-label sm-form-field-text-label-<%= data.position %> <% if (data.noChrome) { %> sm-nochrome <% } %><% if (data.size === "large") { %> sm-form-field-text-label-size-large <% } %><%= data.className %>"><% if (data.iconPrefix) { %><span class="sm-fonticon sm-fonticon-prefix sm-fonticon-small sm-fonticon-<%= data.iconPrefix %>"></span><% } %><% if (data.prefix) { %><span class="sm-form-field-label"><%= data.prefix %></span><% } %><span class="sm-form-field-text-input-wrapper"><input type="<%= data.type %>" name="<%= data.name %>" value="<%= data.value %>" class="sm-form-field-text-input"<% if (data.disabled) { %> disabled<% } %><% if (data.placeholder != null) { %> placeholder="<%= data.placeholder %>"<% } %>/></span><% if (data.suffix) { %><span class="sm-form-field-label"><%= data.suffix %></span><% } %><% if (data.iconSuffix) { %><span class="sm-fonticon sm-fonticon-suffix sm-fonticon-small sm-fonticon-<%= data.iconSuffix %>"></span><% } %></label>'),
            d = e.compile('<textarea class="sm-form-field sm-form-field-textarea <%= data.className %>" name="<%= data.name %>"<% if (data.disabled) { %> disabled<% } %><% if (data.placeholder != null) { %> placeholder="<%= data.placeholder %>"<% } %>><% if (data.value) { %><%= data.value %><% } %></textarea>'),
            r = e.compile('<span class="sm-form-field sm-form-field-select-wrapper <% if (data.noChrome) { %> sm-nochrome <% } %><%= data.className %>"><select class="sm-form-field-select" name="<%= data.name %>"<% if (data.disabled) { %> disabled<% } %>><% Y.Array.each(data.options, function(option) { %><% if (option.type && option.type === "optgroup") { %><%== data.optgroupTmpl(Y.merge(option, {value: data.value, noChrome: data.noChrome})) %><% } else { %><%== data.optionTmpl(Y.merge(option, {selected: data.value === option.value, noChrome: data.noChrome})) %><% } %><% }); %></select><span class="sm-fonticon sm-fonticon-small sm-fonticon-AngleBracketDown sm-form-field-select-arrow"></span></span>'),
            c = e.compile('<option class="sm-form-field-select-option" value="<%= data.value %>" data-value="<%= data.value %>" <% if (data.disabled) { %> disabled<% } %><% if (data.selected) { %> selected<% } %>><% if (data.noChrome) { %>&#x202A;&#x200A;<% } %><%= data.label %></option>'),
            f = e.compile('<optgroup class="sm-form-field-select-optgroup" label="<%== data.label %>"<% if (data.disabled) { %> disabled<% } %>><% Y.Array.each(data.options, function(option) { %><%== data.optionTmpl(Y.merge(option, {selected: data.value === option.value, noChrome: data.noChrome})) %><% }); %></optgroup>'),
            m = e.compile('<div class="sm-form-field-checkbox sm-form-field-checkbox-orientation-<%= data.orientation %> <%= data.className %>"><% Y.Array.each(data.options, function(option) { %><% option.disabled = data.disabled || option.disabled; %><%== data.checkboxTmpl(Y.merge(option, {selected: data.isSelected(option.value)})) %><% }); %></div>'),
            p = e.compile('<button name="<%= data.name %>" value="<%= data.value %>" class="sm-form-field-checkbox-item yui3-button <% if (data.selected) { %> yui3-button-selected <% } %><%= data.className %>"<% if (data.disabled) { %> disabled<% } %>><span class="sm-form-field-checkbox-icon-container"><span class="sm-form-field-checkbox-icon sm-fonticon sm-fonticon-sml sm-fonticon-CheckMark"></span></span><% if (data.label) { %><span class="yui3-button-label"><%= data.label %></span><% } %></button>'),
            u = e.compile('<div class="sm-form-field-radio sm-form-field-radio-orientation-<%= data.orientation %>"><% Y.Array.each(data.options, function(option) { %><button value="<%= option.value %>" class="sm-form-field-radio-item <% if (data.isSelected(option.value)) { %> yui3-button-selected <% } %><%= option.className %>"<% if (data.disabled || option.disabled) { %> disabled<% } %>><span class="sm-form-field-radio-icon-container"><span class="sm-form-field-radio-icon"></span></span><span class="yui3-button-label"><%= option.label %></span></button><% }); %></div>'),
            b = e.compile('<div class="sm-form-field-radio sm-form-field-radio-orientation-horizontal"><% Y.Array.each(data.options, function(option) { %><button value="<%= option.value %>" class="sm-form-field-radio-label-item <% if (data.isSelected(option.value)) { %> yui3-button-selected <% } %><%= option.className %>"<% if (data.disabled || option.disabled) { %> disabled<% } %>><span class="yui3-button-label"><%= option.label %></span></button><% }); %></div>'),
            v = e.compile('<ul class="sm-tabs yui3-g"><% Y.Array.each(data.tabs, function(tab) { %><li data-value="<%= tab.value %>" class="sm-tab yui3-u-1-<%= data.tabs.length %><% if (tab.value === data.value) { %> yui3-tab-selected<% } %>"<% if (tab.title) { %> title="<%= tab.title %>"<% } %>><a class="sm-tab-label" href="#<%= tab.anchor %>"><% if (tab.icon) { %><span class="sm-fonticon sm-fonticon-small sm-fonticon-<%= tab.icon %>"></span><% } %><%= tab.label %></a></li><% }); %></ul>'),
            h = e.compile('<ul class="sm-tabs sm-tabs-vertical"><% Y.Array.each(data.tabs, function(tab) { %><li data-value="<%= tab.value %>" class="sm-tab<% if (tab.value === data.value) { %> yui3-tab-selected<% } %>"><a class="sm-tab-label" href="#<%= tab.anchor %>"><%= tab.label %><% if (tab.icon) { %><span class="sm-fonticon sm-fonticon-small sm-fonticon-<%= tab.icon %>"></span><% } %></a></li><% }); %></ul>'),
            g = e.compile('<div class="sm-form-field-toggle"><button value="off" class="sm-form-field-toggle-item sm-form-field-toggle-item-off<% if (!data.value) { %> yui3-button-selected<% } %>"><%=data.labelOff%></button><button value="on" class="sm-form-field-toggle-item sm-form-field-toggle-item-on<% if (data.value) { %> yui3-button-selected<% } %>"><%=data.labelOn%></button></div>'),
            x = e.compile('<div class="sm-form-field-action"><% if (data.link) { %><a href="<%= data.link %>" target="<% if (data.targetBlank) { %>_blank<% } %>"><%= data.text %><span class="sm-fonticon sm-fonticon-small sm-fonticon-AngleBracketRight"></span></a><% } else { %><%= data.text %><% } %></div>'),
            y = e.compile('<label class="sm-label"><%= data.label %><% if (data.tooltip) { %><span data-tooltip="<%= data.tooltip %>" class="sm-tooltip-indicator sm-fonticon-sml sm-fonticon-HelpEncircled"<% if (data.tooltipAlign) { %> data-tooltip-alignment="<%= data.tooltipAlign %>"<% } %>></span><% } %></label>');
        t.fieldDescription = i, t.textbox = function(a) {
            return a.type = l(a.type, ["text", "password", "email", "hidden"]), a.size = l(a.size, ["small", "large"]), n(a)
        }, t.textboxLabel = function(e) {
            return e.type = l(e.type, ["text", "password", "email"]), e.size = l(e.size, ["small", "large"]), s(a.merge(e, {
                position: e.suffix || e.iconSuffix ? "right" : "left"
            }))
        }, t.textarea = d, t.select = function(e) {
            var l = o(e.options);
            return r(a.merge(e, {
                options: l,
                optionTmpl: c,
                optgroupTmpl: t.optgroup
            }))
        }, t.option = c, t.optgroup = function(e) {
            var t = o(e.options);
            return f(a.merge(e, {
                options: t,
                optionTmpl: c
            }))
        }, t.checkboxes = function(e) {
            var t = a.Array.flatten([e.value]),
                i = o(e.options);
            return m(a.merge(e, {
                isSelected: function(e) {
                    return -1 !== a.Array.indexOf(t, e)
                },
                options: i,
                type: "checkbox",
                orientation: l(e.orientation, ["horizontal", "vertical"]),
                checkboxTmpl: p
            }))
        }, t.checkbox = p, t.radios = function(a) {
            var e = o(a.options);
            return a.labelsOnly ? b({
                isSelected: function(e) {
                    return e === a.value
                },
                type: "radio",
                options: e
            }) : u({
                isSelected: function(e) {
                    return e === a.value
                },
                type: "radio",
                options: e,
                orientation: l(a.orientation, ["horizontal", "vertical"])
            })
        }, t.tabs = function(e) {
            var t = l(e.orientation, ["horizontal", "vertical"]),
                o = a.Array.map(e.tabs, function(e) {
                    return a.Lang.isArray(e) ? {
                        label: e[0],
                        anchor: e.length > 1 ? e[1] : "",
                        value: e[0]
                    } : (null == e.label && (e.label = ""), e.value = e.label.length ? e.label : e.icon, e)
                });
            return "undefined" == typeof e.value && (e.value = o[0].value), "vertical" === t ? h({
                value: e.value,
                tabs: o
            }) : v({
                value: e.value,
                tabs: o
            })
        }, t.toggle = function(a) {
            var e = a && (a.value === !0 || "on" === a.value);
            return g({
                value: e,
                labelOn: a.labelOn || "On",
                labelOff: a.labelOff || "Off"
            })
        }, t.action = x, t.label = function(a) {
            return y({
                label: a.label,
                tooltip: a.tooltip ? a.tooltip : "",
                tooltipAlign: a.tooltipAlign ? a.tooltipAlign : ""
            })
        }
    }(), SM.currentModule = null
}, "", {
    requires: ["template"]
});
YUI.add("sm-thumbnail-manager", function(e) {
    SM.currentModule = "sm-thumbnail-manager";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        var t = e.DOM,
            i = e.Node,
            a = e.Lang,
            s = ".",
            n = "-",
            l = "#",
            r = "RootFolder",
            h = "NodeFolder",
            d = "NodeAlbum",
            u = "NodePage",
            o = "Folder",
            c = "Album",
            g = "Image",
            y = "default",
            m = "selected",
            f = "debug",
            p = "limit",
            v = "thumbSize",
            b = "thumbKeys",
            _ = "thumbData",
            I = "thumbDomIds",
            D = "treeKeys",
            S = "treeData",
            C = "renderType",
            A = "renderData",
            T = "defaultContainer",
            k = "selectedContainer",
            O = "selectedType",
            N = "selectedKeys",
            K = "selectedData",
            w = "selectedState",
            P = "selectedCount",
            M = "currentSelected",
            E = "selectedByType",
            F = "deselectedKeys",
            L = "initialKeys",
            R = "nDeep",
            x = "sm-thumbnail",
            U = "sm-thumbnail-selected",
            z = "sm-thumbnail-active",
            H = "sm-thumbnail-noclick",
            B = "sm-thumbnail-manager",
            q = "id",
            j = {
                NodeFolder: ["NodeID", "ParentID", "Type", "Name", "UrlName", "UrlPath", "IDPath", "RemoteID", "DateAdded", "DateModified", "Status", "SortMethod", "SortDirection", "SortIndex", "HLSetting", "HLImageID", "DateAddedDisplay", "DateModifiedDisplay", "PasswordProtected", "PrivacyLevel", "HasChildren", "Depth", "SecurityType", "EffectiveSecurityType"],
                NodeAlbum: ["NodeID", "ParentID", "Type", "Name", "UrlName", "UrlPath", "IDPath", "RemoteID", "DateAdded", "DateModified", "Status", "SortMethod", "SortDirection", "SortIndex", "HLSetting", "HLImageID", "AlbumID", "AlbumKey", "DynamicImageCount", "Protected", "Printable", "PasswordProtected", "DateAddedDisplay", "DateModifiedDisplay", "PrivacyLevel", "HasImages", "SecurityType", "EffectiveSecurityType"],
                NodePage: ["NodeID", "ParentID", "Type", "Name", "UrlName", "UrlPath", "IDPath", "RemoteID", "DateAdded", "DateModified", "Status", "SortMethod", "SortDirection", "SortIndex", "HLSetting", "HLImageID", "DateAddedDisplay", "DateModifiedDisplay", "PasswordProtected", "PrivacyLevel", "SecurityType", "EffectiveSecurityType"],
                Folder: ["children", "dateUpdated", "name", "nodeId", "parentId", "type", "subCategoryId", "categoryId", "categoryType"],
                Album: ["children", "albumId", "albumKey", "categoryId", "parentId", "dateUpdated", "folderId", "imageCount", "thumbImageId", "title", "titleSafe"],
                Image: ["BaseUrl", "FileName", "Format", "ImageID", "ImageKey", "AlbumID", "AlbumKey", "IsProtected", "NewKey", "SEOFilename", "Serial", "Sizes", "Status", "isDisabled", "PrivacyLevel", "OriginalWidth", "OriginalHeight", "External", "AlbumPassword", "IsVideo", "IsArchive"]
            },
            V = "thumbnailSelectAll",
            X = "thumbnailSelectNone",
            W = "thumbnailSelectInverse",
            G = "thumbnailSelect",
            Y = "thumbnailNavigate",
            J = "thumbnailSelectLimitReached",
            Q = "thumbnailSelectLimitBelow",
            Z = "all",
            $ = "none",
            ee = "toggle",
            te = "inverse",
            ie = e.Base.create("sm-thumbnail-manager", e.Base, [], {
                _hotKeysActive: !1,
                _selectActive: !1,
                _keyEvent: null,
                _debugOverlay: null,
                _bindSelectedContainer: !1,
                _lastTarget: null,
                initializer: function() {
                    this.publish(V, {
                        emitFacade: !0
                    }), this.publish(X, {
                        emitFacade: !0
                    }), this.publish(G, {
                        emitFacade: !0
                    }), this.publish(Y, {
                        emitFacade: !0
                    }), this.publish(J, {
                        emitFacade: !0
                    }), this.publish(Q, {
                        emitFacade: !0
                    })
                },
                _bindUI: function() {
                    if (!this._eventHandles) {
                        var t = e.one("document");
                        this._eventHandles = [e.delegate("dblclick", this._handleThumbClick, this.get(T), s + x + " a", this), e.delegate("click", this._handleThumbClick, this.get(T), s + x + " a", this), t.on("keydown", this._handleKeyDownUp, this), t.on("keyup", this._handleKeyDownUp, this), this.on(N + "Change", this._displaySelected, this), this.on(F + "Change", this._displaySelected, this)]
                    }
                },
                syncSelected: function(t) {
                    var i = [],
                        s = [];
                    a.isArray(t) ? (e.Array.each(t, function(e) {
                        var t = e.split("-");
                        i.push(t[0] + n + t[1])
                    }), this.set(L, i)) : this.get(N) && (i = e.clone(this.get(N)), this.set(L, i)), this.set(F, s)
                },
                add: function(e) {
                    var t = this.get(C);
                    t == y ? this._addDefault(e) : t == m && this._addSelected(e)
                },
                addToTree: function(e, t) {
                    var i = this.get(S),
                        a = this.get(D);
                    a.push(t), i[t] = e, this.set(D, a), this.set(S, i)
                },
                remove: function(e) {
                    a.isObject(e) && (this._addRemoveSelectedData(e, "remove"), this.handleSelectedChange())
                },
                removeLimit: function(t) {
                    if (t && !(1 > t)) {
                        var i = this.get(T),
                            a = this.get(N),
                            s = this.get(K),
                            r = this.get(E),
                            h = this.get(I),
                            d = a.length,
                            u = d - t,
                            o = null,
                            c = 0,
                            g = 0,
                            y = null,
                            m = null;
                        if (u > 0 && d > 0) {
                            for (g = 0; u > g; g++) y = a.shift(), y && (o = y.split(n), c = e.Array.indexOf(r[o[1]], o[0]), c >= 0 && r[o[1]].splice(c, 1), s[y] && delete s[y], m = i.one(l + h[y]), m && m.removeClass(U));
                            this.handleSelectedChange()
                        }
                    }
                },
                getData: function(t) {
                    var i = this.get(_),
                        a = this.get(b);
                    return e.Array.indexOf(a, t) >= 0 ? i[t] : null
                },
                getSelectedData: function(t) {
                    var i = this.get(K),
                        a = this.get(N);
                    return e.Array.indexOf(a, t) >= 0 ? i[t] : null
                },
                getTreeData: function(t) {
                    var i, a = this.get(S),
                        s = this.get(D),
                        n = [r, h, d],
                        l = null;
                    return "number" == typeof t || "string" == typeof t && t.indexOf("-") < 0 ? (e.Array.some(n, function(i) {
                        var n = this.makeUniqueKey(t, i);
                        e.Array.indexOf(s, n) >= 0 && (l = a[n])
                    }, this), l) : e.Array.indexOf(s, t) >= 0 ? a[t] : "string" == typeof t && (i = t.substring(0, t.lastIndexOf("-")), e.Array.indexOf(s, i) >= 0) ? a[i] : null
                },
                getTreeBranches: function(e) {
                    var t = this.getTreeData(e);
                    return null === t ? [] : this.get(R) === !0 ? this._getNDeepBranches(t) : this._getCategoryBranches(t)
                },
                getCurrentSelected: function() {
                    var t = this.get(b),
                        i = this.get(N),
                        a = [];
                    return e.Array.each(t, function(t) {
                        e.Array.indexOf(i, t) >= 0 && a.push(t)
                    }), a
                },
                getLastClickKey: function() {
                    if (!this._lastTarget) return null;
                    var e = this._lastTarget.ancestor(s + x),
                        t = e.get(q);
                    return this._getKeyFromDomId(t)
                },
                makeUniqueKey: function(e, t, i) {
                    var a = t.replace("Node", "");
                    return i ? e + n + a + n + i : e + n + a
                },
                clear: function() {
                    var e = this.get(C);
                    this._updateContainers(), e == y ? this._clearDefault() : e == m && this._clearSelected()
                },
                renderThumbs: function(e) {
                    var t = this.get(C);
                    this._updateContainers(), t == y ? this._renderDefault(e) : t == m && (this._bindSelectedClick(), this._renderSelected())
                },
                renderDefaultThumbs: function(e) {
                    this._updateContainers(), this._renderDefault(e)
                },
                renderSelectedThumbs: function() {
                    this._updateContainers(), this._bindSelectedClick(), this._renderSelected()
                },
                activateHotkeys: function(e) {
                    this._hotKeysActive = e
                },
                activateSelect: function(e) {
                    this._selectActive = e
                },
                setRenderType: function(e) {
                    return this.set(C, e), this
                },
                getNumberOfSelectedThumbs: function() {
                    var e = this.get(C),
                        t = null;
                    return e == y ? t = this.get(T) : e == m && (t = this.get(k)), t.all(s + U).size()
                },
                handleSelectAction: function(e) {
                    var t = this.get(C),
                        i = null,
                        a = this.get(w),
                        n = "sm-thumbnail-" + this.get(O).toLowerCase(),
                        l = null,
                        r = null;
                    switch (t == y ? i = this.get(T) : t == m && (i = this.get(k)), e) {
                        case $:
                            this.fire(X), l = i.all(s + U), l.removeClass(U), l.each(function(e) {
                                this._addRemoveSelectedData(e, "remove")
                            }, this);
                            break;
                        case Z:
                            this.fire(V), l = i.all(s + x + s + n), l.addClass(U), l.each(function(e) {
                                this._addRemoveSelectedData(e, "add")
                            }, this), l = i.all(s + x + s + n + s + H), l.removeClass(U), l.each(function(e) {
                                this._addRemoveSelectedData(e, "remove")
                            }, this);
                            break;
                        case ee:
                            this.fire(V), l = i.all(s + U), r = i.all(s + x + s + n), a == Z ? (r.addClass(U), r.each(function(e) {
                                this._addRemoveSelectedData(e, "add")
                            }, this)) : (l.removeClass(U), l.each(function(e) {
                                this._addRemoveSelectedData(e, "remove")
                            }, this));
                            break;
                        case te:
                            this.fire(W), l = i.all(s + x + s + n), l.each(function(e) {
                                e.hasClass(U) ? (e.removeClass(U), this._addRemoveSelectedData(e, "remove")) : (e.addClass(U), this._addRemoveSelectedData(e, "add"))
                            }, this)
                    }
                    this._lastTarget = null, this.set(w, e), this.handleSelectedChange()
                },
                handleSelectedChange: function() {
                    var e = this.get(N),
                        t = this.get(M),
                        i = this.getCurrentSelected().length;
                    this.set(P, e.length), this._displaySelected(), t !== i && this.set(M, i)
                },
                _getNDeepBranches: function(t) {
                    var i = [],
                        a = [];
                    return t.typeInfo.hasOwnProperty("IDPath") && (i = t.typeInfo.IDPath.split(",")), i.push(t.typeId), e.Array.each(i, function(e) {
                        var t = this.getTreeData(e),
                            i = {
                                id: null,
                                type: null,
                                name: null
                            };
                        if (t) {
                            switch (i.id = t.typeId, t.type) {
                                case r:
                                    i.type = r, i.name = t.typeInfo.name;
                                    break;
                                case h:
                                    i.type = o, i.name = t.typeInfo.Name;
                                    break;
                                case d:
                                    i.type = c, i.name = t.typeInfo.Name, i.key = t.typeInfo.AlbumKey;
                                    break;
                                case o:
                                    i.type = o, i.name = t.typeInfo.name;
                                    break;
                                case c:
                                    i.type = c, i.name = t.typeInfo.title, i.key = t.typeInfo.albumKey;
                                    break;
                                case g:
                                    i.type = g, i.name = t.typeInfo.fileName
                            }
                            a.push(i)
                        }
                    }, this), a
                },
                _getCategoryBranches: function(e) {
                    var t, i = this.get(S),
                        a = null,
                        s = null,
                        n = !1,
                        l = 0,
                        h = [];
                    for (t = e.typeId + "-" + e.type; n === !1;) {
                        if (i.hasOwnProperty(t) ? s = i[t] : i.hasOwnProperty(t + "-" + c) ? s = i[t + "-" + c] : i.hasOwnProperty(t + "-" + o) ? s = i[t + "-" + o] : console.log("could not find parentId: ", t), !s) return h;
                        switch (a = {
                            id: null,
                            type: null,
                            name: null
                        }, a.id = s.typeId, s.type) {
                            case r:
                                a.type = o, a.name = s.typeInfo.name;
                                break;
                            case o:
                                a.type = o, a.name = s.typeInfo.name;
                                break;
                            case c:
                                a.type = c, a.name = s.typeInfo.title, a.key = s.typeInfo.albumKey;
                                break;
                            case g:
                                a.type = g, a.name = s.typeInfo.fileName
                        }
                        h.push(a), null !== s.typeInfo.parentId ? t = s.typeInfo.parentId : n = !0, l++, s = null, l > 8 && (n = !0)
                    }
                    return h.reverse()
                },
                getAspect: function(e, t) {
                    var i = [parseInt(e, 10), parseInt(t, 10)];
                    return Math.floor(Math.max(i[0], i[1]) / Math.min(i[0], i[1]) * 100) / 100
                },
                getLargestSize: function(t, i) {
                    var a = ["O", "X3", "X2", "XL", "L", "M", "S"],
                        s = !1;
                    return i || (a = a.slice(1), console.log("not including the orig", a)), e.Array.each(a, function(e) {
                        s === !1 && t.hasOwnProperty(e) && (s = t[e])
                    }), s
                },
                checkSize: function(e, t, i, a, s) {
                    return s ? e == i && t == a || e == a && t == i : e >= i && t >= a || e >= a && t >= i
                },
                _updateContainers: function() {
                    var t = this.get(T),
                        i = this.get(k);
                    a.isString(t) && this.set(T, e.one(t)), a.isString(i) && this.set(k, e.one(i))
                },
                _addDefault: function(e) {
                    var t = this.get(_),
                        i = this.get(b),
                        a = this._getUniqueKey(e);
                    e.rendered = !1, e = this._minimizeData(e), i.push(a), t[a] = e, e.type !== g && this.addToTree(e, a), this.set(_, t), this.set(b, i)
                },
                _addSelected: function(e) {
                    var t = this.get(N),
                        i = this.get(K),
                        a = this.get(E),
                        s = this._getUniqueKey(e);
                    e.rendered = !1, e = this._minimizeData(e), t.push(s), i[s] = e, "NodeAlbum" == e.type ? a[e.type.replace("Node", "")].push(e.typeInfo.RemoteID) : a[e.type.replace("Node", "")].push(e.typeId), this.set(N, t), this.set(K, i), this.set(E, a), this.handleSelectedChange()
                },
                _clearDefault: function() {
                    var e = this.get(T);
                    a.isObject(e) && e.setContent(""), this.set(b, []), this.set(_, {}), this.set(I, {})
                },
                _clearSelected: function() {
                    this.set(N, []), this.set(w, "none"), this.set(K, {}), this.set(P, 0), this.set(E, {
                        Image: [],
                        Album: [],
                        Folder: [],
                        Page: []
                    }), this.set(F, [])
                },
                _bindSelectedClick: function() {
                    this._bindSelectedContainer !== !0 && (e.delegate("click", this._handleThumbClick, this.get(k), s + x + " a", this), this._bindSelectedContainer = !0)
                },
                _renderDefault: function(t) {
                    var i = this.get(_),
                        a = this.get(T),
                        s = this.get(v),
                        n = this.get(K),
                        l = this.get(I),
                        r = null,
                        h = null,
                        d = null !== t ? t : 0,
                        u = parseInt(this.get(M), 10),
                        o = 0 === d ? 0 : u,
                        c = this.get("disableThumbOverflow");
                    a.hasClass("yui3-g") || a.addClass("yui3-g"), 0 === d && (this._lastTarget = null), e.Object.each(i, function(t, d) {
                        t.rendered === !1 && (r = e.merge(t, {
                            size: s
                        }, {
                            disableThumbOverflow: c
                        }), n[d] && (r.selected = !0, o++), h = new e.SM.Thumbnail(r), h.render(a), i[d].rendered = !0, l[d] = h.get("id"))
                    }), o !== u && this.set(M, o)
                },
                _renderSelected: function() {
                    var t = this.get(k),
                        i = this.get(v),
                        a = this.get(K),
                        s = null,
                        n = null,
                        l = [],
                        r = null;
                    t && (this.set(A, e.clone(a)), t.setContent(""), e.Object.each(a, function(a) {
                        if (a.type === d) {
                            var h, u = this.get("treeData");
                            e.Object.each(u, function(e) {
                                a.typeInfo.AlbumID && e.typeId === a.typeId ? h = e : e.typeInfo.NodeID === a.typeId && (h = e)
                            }), a = h || a
                        }
                        s = e.merge(a, {
                            size: i,
                            selected: !0
                        }), n = new e.SM.Thumbnail(s), n.render(t), r = null, s.type == c || s.type === d ? r = s.typeInfo.albumKey || s.typeInfo.AlbumKey : s.type == g && (r = s.typeInfo.imageKey), l.push(this.makeUniqueKey(s.typeId, s.type, r))
                    }, this))
                },
                _minimizeData: function(e) {
                    var t = e.typeInfo,
                        i = e.hasOwnProperty("imageInfo") ? e.imageInfo : null,
                        a = null,
                        s = null,
                        n = null;
                    switch (e.type) {
                        case h:
                        case o:
                        case u:
                            a = this._trimFields(t, e.type), null !== i && (s = this._trimFields(i, g), !s.Sizes.Fo && s.Sizes.Ti && (s.Sizes.Fo = {
                                ext: s.Sizes.Ti.ext,
                                width: Math.floor(.75 * s.Sizes.Ti.width),
                                height: Math.floor(.75 * s.Sizes.Ti.height),
                                usable: s.Sizes.Ti.usable
                            })), e.type === o ? n = a.nodeId : a.NodeID;
                            break;
                        case d:
                        case c:
                            a = this._trimFields(t, e.type), null !== i && (s = this._trimFields(i, g));
                            break;
                        case g:
                            s = this._trimFields(t, g), a = s, a.Caption = t.Caption, a.Keywords = t.Keywords
                    }
                    return {
                        rendered: !1,
                        type: e.type,
                        typeId: e.typeId,
                        typeInfo: a,
                        imageInfo: s
                    }
                },
                _trimFields: function(e, t) {
                    var i = {},
                        s = j[t],
                        n = null,
                        l = 0;
                    if (a.isArray(s))
                        for (l = 0; l < s.length; l++) n = s[l], e.hasOwnProperty(n) && (i[n] = e[n]);
                    return i
                },
                _getUniqueKey: function(e) {
                    var t = e.typeId,
                        i = e.type;
                    return "NodeAlbum" == e.type && (t = e.typeInfo.RemoteID), this.makeUniqueKey(t, i)
                },
                _getThumb: function(e, t) {
                    var i = e + n + t,
                        a = this.get(C),
                        s = this.get(A),
                        l = this.get(_);
                    return a == y ? l[i] : a == m ? s[i] : !1
                },
                _getKeyFromDomId: function(e) {
                    var t, i = this.get(I);
                    for (t in i)
                        if (i[t] == e) return t;
                    return !1
                },
                _handleKeyDownUp: function(e) {
                    if ("keydown" === e.type && e.shiftKey !== !1) this._keyEvent = e;
                    else if ("keyup" === e.type) {
                        if (this._keyEvent = null, this._hotKeysActive === !1) return;
                        68 === e.keyCode && (e.preventDefault(), this.handleSelectAction($)), (0 === this.get(p) || this.get(C) == m) && (73 === e.keyCode ? (e.preventDefault(), this.handleSelectAction(te)) : 65 === e.keyCode && (e.preventDefault(), this.handleSelectAction(Z)))
                    }
                },
                _handleThumbClick: function(t) {
                    var i = t.target,
                        a = this.get(p),
                        n = i.ancestor(s + x),
                        l = this.get(O),
                        r = n.getAttribute("data-type"),
                        h = r === l,
                        d = n.hasClass(z),
                        u = this.get(C);
                    return l.toLowerCase() == e.SM.Picker.MODE_NODE && (h = !0), "dblclick" !== t.type && (!d || r !== o && r != c) || r === c && h || u == m ? void("click" === t.type && this._selectActive === !0 && h === !0 ? (this._removeAllActiveFlags(), this._keyEvent && this._keyEvent.shiftKey && 1 !== a && null !== this._lastTarget ? this._selectThumbRange(i) : this._selectSingleThumb(i), this._lastTarget = i, t.halt(!0), this.fire(G, {
                        origTarget: i
                    })) : "click" !== t.type || d || this._selectActive !== !1 && (this._selectActive !== !0 || h !== !1) || (this._removeAllActiveFlags(), n.addClass(z))) : (t.halt(!0), void this.fire(Y, {
                        origTarget: i
                    }))
                },
                _removeAllActiveFlags: function() {
                    var e;
                    e = this.get(T).all(s + z), e.removeClass(z)
                },
                _selectSingleThumb: function(t) {
                    var i, a = t.ancestor(s + x),
                        l = this.get(O),
                        r = a.getAttribute("data-type"),
                        h = r === l,
                        d = this.get(P),
                        u = this.get(p),
                        o = this.getEvent(J),
                        c = a.getData("type"),
                        y = a.getData("id");
                    if (c != g || this.get(C) === m || (i = this.getData(y + n + c), !i.hasOwnProperty("imageInfo") || !i.imageInfo.isDisabled)) {
                        if (l.toLowerCase() == e.SM.Picker.MODE_NODE && (h = !0), a.hasClass(U) || h !== !0) a.removeClass(U), a.addClass(z), this._addRemoveSelectedData(a, "remove"), u > 1 && o.fired === !0 && u >= d - 1 && this.fire(Q, {
                            limit: u
                        });
                        else {
                            if (u > 1) {
                                if (d >= u) return;
                                d + 1 == u && this.fire(J, {
                                    limit: u
                                })
                            } else 1 == u && this._selectNone();
                            a.addClass(U), a.addClass(z), this._addRemoveSelectedData(a, "add")
                        }
                        this.handleSelectedChange()
                    }
                },
                _selectThumbRange: function(e) {
                    var t, i, a = this._getCurrentNodeList(),
                        n = e.ancestor(s + x),
                        l = n.get(q),
                        r = this.get(p),
                        h = r - this.get(P),
                        d = this.getEvent(J),
                        u = null,
                        o = null,
                        c = null,
                        g = null,
                        y = !1,
                        m = !1,
                        f = 0,
                        v = {},
                        b = [],
                        _ = 0;
                    return r > 1 && this.get(P) >= r ? void this.fire(J, {
                        limit: r
                    }) : void(null !== this._lastTarget && (c = this._lastTarget.ancestor(s + x), g = c.get(q), g !== l && (a.each(function(e) {
                        var t = e.get(q);
                        return (t === l || t === g) && b.push(t), 2 == b.length ? !0 : (t === l ? v.target = f : t === g && (v.last = f), void f++)
                    }, this), u = b[0], o = b[1], t = n.hasClass(U), i = c.hasClass(U), m = !t && !i || t && i ? t ? !1 : !0 : v.target < v.last ? t ? !1 : !0 : i ? !0 : !1, a.each(function(e) {
                        var t = e.get(q),
                            i = e.hasClass(U),
                            a = e.getAttribute("data-type") == this.get(O),
                            s = !e.hasClass(H);
                        if (t === u && (y = !0), y === !0) {
                            if (m === !0 && s === !1);
                            else if (m === !0 && i === !1 && a === !0) {
                                if (_++, e.addClass(U), this._addRemoveSelectedData(e, "add"), r > 1 && _ >= h) return this.fire(J, {
                                    limit: r
                                }), y = !1, !0
                            } else m === !1 && i === !0 && (e.removeClass(U), this._addRemoveSelectedData(e, "remove"), r > 1 && d.fired === !0 && this.get(P) <= r && this.fire(Q, {
                                limit: r
                            }));
                            if (t == o) return y = !1, !0
                        }
                    }, this), this.handleSelectedChange())))
                },
                _selectNone: function() {
                    var e = this.get(T).all(s + U),
                        t = this.get(N);
                    e.removeClass(U), this.set(F, t), this.set(N, []), this.set(w, "none"), this.set(K, {}), this.set(P, 0), this.set(E, {
                        Image: [],
                        Album: [],
                        Folder: [],
                        Page: []
                    })
                },
                _getCurrentNodeList: function() {
                    var e = this.get(C);
                    return e === y ? this.get(T).all(s + x) : e === m ? this.get(k).all(s + x) : i.nodeList()
                },
                _addRemoveSelectedData: function(t, i) {
                    var a = this.get(T),
                        s = t.getAttribute("data-id"),
                        r = t.getAttribute("data-type"),
                        h = this._getThumb(s, r),
                        d = this.get(I),
                        u = this.get(L),
                        o = this.get(F),
                        c = this.get(N),
                        g = this.get(K),
                        y = this.get(E),
                        m = s + n + r,
                        f = null,
                        p = null;
                    if ("Album" === r && "Node" === this.get("selectedType")) {
                        var v = this.get("renderData");
                        e.Array.each(e.Object.keys(v), function(e) {
                            var t = v[e];
                            t.typeInfo.NodeID === s && (m = e)
                        })
                    }
                    "add" === i ? (f = e.Array.indexOf(c, m), 0 > f && (c.push(m), y[r].push(s), g[m] = h, p = a.one(l + d[m]), p && !p.hasClass(U) && p.addClass(U)), f = e.Array.indexOf(o, m), f >= 0 && o.splice(f, 1)) : "remove" === i && (f = e.Array.indexOf(c, m), f >= 0 && c.splice(f, 1), f = e.Array.indexOf(y[r], s), f >= 0 && y[r].splice(f, 1), g[m] && delete g[m], p = a.one(l + d[m]), p && p.removeClass(U), f = e.Array.indexOf(u, m), f >= 0 && o.push(m)), this.set(N, c), this.set(K, g), this.set(E, y)
                },
                _displaySelected: function() {
                    if (this.get(f) !== !1) {
                        null === this._debugOverlay && (this._debugOverlay = new e.SM.Overlay({
                            title: "ThumbManager Debug",
                            bodyContent: "debug",
                            className: "managerDebug",
                            visible: !1,
                            zIndex: 1010,
                            centered: !1,
                            width: 300,
                            height: 170,
                            x: Math.floor(t.winWidth() / 2) - 150,
                            y: t.winHeight() - 200,
                            draggable: !0,
                            close: !0
                        }), this._debugOverlay.get("boundingBox").addClass(B + "-debug"), this._debugOverlay.render(s + B), this._debugOverlay.show());
                        var i = this.get(L),
                            a = this.get(N),
                            n = this.get(F),
                            l = "";
                        this._debugOverlay && (l = '<div class="yui3-u-1-3"><h2>selected</h2><ul>', e.Array.each(a, function(e) {
                            l += "<li>" + e + "</li>"
                        }), l += "</ul></div>", l += '<div class="yui3-u-1-3"><h2>de-selected</h2><ul>', e.Array.each(n, function(e) {
                            l += "<li>" + e + "</li>"
                        }), l += "</ul></div>", l += '<div class="yui3-u-1-3"><h2>initial</h2><ul>', e.Array.each(i, function(e) {
                            l += "<li>" + e + "</li>"
                        }), l += "</ul></div>", this._debugOverlay.set("bodyContent", l))
                    }
                }
            }, {
                CSS_PREFIX: B,
                ATTRS: {
                    nDeep: {
                        value: !1
                    },
                    debug: {
                        value: !1
                    },
                    defaultContainer: {
                        value: null
                    },
                    disableThumbOverflow: {
                        value: !1
                    },
                    selectedContainer: {
                        value: null
                    },
                    selectedType: {
                        value: ""
                    },
                    limit: {
                        value: 0,
                        setter: function(e) {
                            return parseInt(e, 10)
                        }
                    },
                    thumbKeys: {
                        value: []
                    },
                    thumbData: {
                        value: {}
                    },
                    thumbDomIds: {
                        value: {}
                    },
                    thumbSize: {
                        value: "Ti"
                    },
                    treeKeys: {
                        value: []
                    },
                    treeData: {
                        value: {}
                    },
                    renderType: {
                        value: y
                    },
                    renderData: {
                        value: {}
                    },
                    selectedKeys: {
                        value: []
                    },
                    selectedData: {
                        value: {}
                    },
                    selectedState: {
                        value: "none"
                    },
                    selectedCount: {
                        value: 0
                    },
                    currentSelected: {
                        value: 0
                    },
                    selectedByType: {
                        value: {
                            Image: [],
                            Album: [],
                            Folder: []
                        }
                    },
                    deselectedKeys: {
                        value: []
                    },
                    initialKeys: {
                        value: []
                    }
                },
                EVENT_SELECT: B + ":" + G,
                EVENT_NAVIGATE: B + ":" + Y,
                EVENT_LIMIT_REACHED: B + ":" + J,
                EVENT_LIMIT_BELOW: B + ":" + Q
            });
        e.namespace("SM").ThumbnailManager = ie
    }(), SM.currentModule = null
}, "", {
    requires: ["base", "dom", "event", "node", "overlay", "sm-overlay", "sm-thumbnail"]
});
YUI.add("sm-thumbnail-preview", function(e) {
    SM.currentModule = "sm-thumbnail-preview";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        var t = e.Node,
            i = e.Lang,
            n = e.SM,
            s = ".",
            a = "sm-thumbnail-preview",
            h = a + "-image",
            l = a + "-body",
            o = a + "-close",
            r = a + "-prevnext",
            d = a + "-filename",
            u = a + "-filename-content",
            v = a + "-filename-tooltip",
            c = a + "-caption",
            g = a + "-caption-content",
            m = "sm-hidden",
            p = '<div class="' + d + '"><div class="' + u + '"></div></div><div class="' + v + " " + m + ' sm-badge sm-badge-lgt"><div class="sm-badge-content"></div></div><div class="yui3-g"><div class="yui3-u-1-2 ' + r + '"></div><div class="yui3-u-1-2 ' + o + '"></div></div>',
            b = '<div class="' + l + '"><div class="' + h + '"></div><div class="' + c + '"><div class="' + g + '"></div></div>',
            _ = "thumbManager",
            w = "currentThumbs",
            f = "lastClick",
            y = "L",
            S = "boundingBox",
            C = 90,
            T = 110,
            P = "thumbnailPreviewClose",
            I = "thumbnailPreviewTooSmall",
            M = e.Base.create("sm-thumbnail-preview", e.Overlay, [], {
                _previewOpen: null,
                _handles: null,
                _hovering: !1,
                _hoverTimer: null,
                BOUNDING_TEMPLATE: "<div></div>",
                initializer: function(e) {
                    this._handles = null, e.hasOwnProperty("constrainTo") && this.set("constrain", e.constrainTo), this.set("visible", !1), this.set("zIndex", 1011), this.set("fillHeight", null), this.publish(P, {
                        emitFacade: !0
                    }), this.publish(I, {
                        emitFacade: !0
                    })
                },
                renderUI: function() {
                    var i = t.create(p),
                        n = i.one(s + r),
                        h = i.one(s + o),
                        l = this.get(S);
                    n.append(e.SM.Templates.button({
                        icon: "ArrowLeft",
                        size: "small",
                        value: "previewPrev"
                    })).append(e.SM.Templates.button({
                        icon: "ArrowRight",
                        size: "small",
                        value: "previewNext"
                    })), h.append(e.SM.Templates.button({
                        icon: "XCrossEncircled",
                        size: "small",
                        value: "previewClose"
                    })), this.set("headerContent", i), this.set("bodyContent", t.create(b)), l.all(s + r + " .sm-button").hide(), l.setStyles({
                        left: C,
                        top: T
                    }), this.get(S).addClass(a)
                },
                bindUI: function() {
                    this._attachUIListeners()
                },
                _attachUIListeners: function() {
                    var t = this.get(S),
                        i = t.one(s + l),
                        n = e.one("document");
                    this._handles = [e.delegate("click", this._handleButtonClick, t, ".sm-button", this), n.on("keydown", this._handleKeyDownUp, this), n.on("keyup", this._handleKeyDownUp, this), i.on("mouseover", this._handlePreviewHover, this), i.on("mouseout", function() {
                        this._hoverTimer && this._hoverTimer.cancel(), this._hoverCaption(!1)
                    }, this)]
                },
                _detachUIListeners: function() {
                    e.each(this._handles, function(e) {
                        e.detach()
                    }), this._handles = null
                },
                show: function(e) {
                    var t = this.get(_),
                        n = "thumbnail" == e ? t.getCurrentSelected() : t.get("selectedKeys"),
                        a = t.getLastClickKey(),
                        h = this.get("boundingBox").all(s + r + " .sm-button");
                    return i.isArray(this._handles) || this._attachUIListeners(), this.set(w, n), this.set(f, a), n.length > 0 ? this._updatePreviewImage(n[0]) ? (1 == n.length ? h.hide() : h.show(), this._previewOpen = !0, this.set("visible", !0), !0) : (this.fire(I), this.hide(), !1) : !1
                },
                hide: function() {
                    this._previewOpen = !1, this.set("visible", !1), this.fire(P)
                },
                _handlePreviewHover: function(t) {
                    this._hovering === !1 && (this._hoverTimer && this._hoverTimer.cancel(), this._hovering = !0, this._hoverTimer = e.later(500, this, this._hoverCaption, "mouseover" == t.type))
                },
                _hoverCaption: function(e) {
                    var t = this.get(S).one(s + c),
                        i = this.get("captionHeight"),
                        n = this.get(S).one(s + "sm-thumbnail"),
                        a = n.getAttribute("data-id") + "-" + n.getAttribute("data-type"),
                        h = this.get(_).getSelectedData(a);
                    return this._hoverTimer = null, this._hovering = !1, "" === h.imageInfo.FileName ? (t.setStyle("height", 0), void t.addClass(m)) : void(e === !0 ? (null === i && (t.hasClass(m) && t.removeClass(m), t.setStyle("height", "auto"), i = t.get("offsetHeight"), t.setStyle("height", 0), t.addClass(m), this.set("captionHeight", i)), t.transition({
                        duration: .3,
                        delay: 0,
                        easing: "ease-in",
                        height: {
                            value: i + "px"
                        },
                        on: {
                            start: function() {
                                t.removeClass(m)
                            },
                            end: function() {}
                        }
                    })) : t.transition({
                        duration: .3,
                        delay: 0,
                        easing: "ease-out",
                        height: {
                            value: 0
                        },
                        on: {
                            start: function() {},
                            end: function() {
                                t.addClass(m)
                            }
                        }
                    }))
                },
                _handleButtonClick: function(e) {
                    var t = e.currentTarget.getData("value");
                    switch (t) {
                        case "previewPrev":
                            this._handlePrevNext(e, "prev");
                            break;
                        case "previewNext":
                            this._handlePrevNext(e, "next");
                            break;
                        case "previewClose":
                            this.hide()
                    }
                },
                _handlePrevNext: function(t, n) {
                    var a, h = t.currentTarget.getAttribute("data-value"),
                        l = this.get(w),
                        o = this.get(S).one(s + "sm-thumbnail"),
                        r = o.getAttribute("data-id") + "-" + o.getAttribute("data-type"),
                        d = null,
                        u = null;
                    u = i.isString(n) ? n : h, a = e.Array.indexOf(l, r), "prev" == u ? (d = a - 1, 0 > d && (d = l.length - 1), this._updatePreviewImage(l[d])) : "next" == u && (d = a + 1, d >= l.length && (d = 0), this._updatePreviewImage(l[d]))
                },
                _handleKeyDownUp: function(e) {
                    this._previewOpen !== !1 && "keyup" == e.type && (27 === e.keyCode ? (e.halt(!0), this.hide()) : 39 === e.keyCode ? (e.halt(!0), this._handlePrevNext(e, "next")) : 37 === e.keyCode && (e.halt(!0), this._handlePrevNext(e, "prev")))
                },
                _updatePreviewImage: function(t) {
                    var i, a, o, r, d = this.get(_).getSelectedData(t),
                        u = d.imageInfo.Sizes,
                        v = this.get(S),
                        p = v.one(s + h),
                        b = v.one(s + l),
                        w = v.one(s + c),
                        f = v.one(s + g),
                        P = this.get("constrain"),
                        I = {
                            width: P.get("offsetWidth"),
                            height: P.get("offsetHeight")
                        },
                        M = !1,
                        x = ["L", "M", "S"],
                        N = y;
                    return p.setContent(""), e.Array.each(x, function(e) {
                        M === !1 && u.hasOwnProperty(e) && u[e].width + 14 <= I.width && u[e].height + 42 <= I.height && (N = e, M = !0)
                    }), M === !1 ? !1 : (d.fileHover = !1, d.size = N, i = new n.Thumbnail(d), i.render(p), v.setStyles({
                        left: C,
                        top: T
                    }), a = u[N].width, o = u[N].height, this.set("width", a + 14), this.set("height", o + 42), b.ancestor(".yui3-widget-bd").setStyles({
                        width: a + 2,
                        height: o + 2
                    }), p.one(".sm-thumbnail-thumb").setStyles({
                        width: a,
                        height: o
                    }), p.one(".sm-thumbnail-thumb-image").setStyles({
                        paddingTop: 0,
                        paddingLeft: 0
                    }), r = "", "" !== d.imageInfo.FileName && (r += '<div class="sm-thumbnail-preview-caption-photo-data"><b>Filename:</b> ', r += d.imageInfo.FileName + s + d.imageInfo.Format + "</div>"), w.setStyle("height", 0), w.addClass(m), "" !== r && (f.setContent(r), this.set("captionHeight", null)), !0)
                }
            }, {
                ATTRS: {
                    thumbManager: {
                        value: null
                    },
                    currentThumbs: {
                        value: []
                    },
                    captionHeight: {
                        value: null
                    },
                    lastClick: {
                        value: null
                    }
                },
                CSS_PREFIX: a
            });
        e.namespace("SM").ThumbnailPreview = M, e.namespace("SM").ThumbnailPreview.EVENT_PREVIEW_CLOSE = a + ":" + P, e.namespace("SM").ThumbnailPreview.EVENT_PREVIEW_TOO_SMALL = a + ":" + I
    }(), SM.currentModule = null
}, "", {
    requires: ["base", "node", "sm-button", "sm-thumbnail", "sm-tooltip-old", "transition", "widget"]
});
YUI.add("sm-thumbnail", function(e) {
    SM.currentModule = "sm-thumbnail";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        var t = SM["import"]("lodash"),
            s = t.template('<a class="sm-thumbnail-content" title="<%- title %>"></a>'),
            i = e.Node,
            a = e.Lang,
            l = SM,
            n = ".",
            r = "-",
            d = "px",
            h = "NodeFolder",
            o = "NodeAlbum",
            m = "NodePage",
            g = "Folder",
            c = "Album",
            u = "Image",
            p = 1024,
            y = "{base}i-{imageKey}/{serial}/{size}/{name}-{size}.{ext}",
            b = "{base}{name}/{imageId}_{imageKey}-{size}{serial}.{ext}",
            v = "{base}{albumId}_{albumKey}/{imageId}_{imageKey}#{imageId}_{imageKey}-A-LB",
            S = v,
            f = {
                JPEG: "jpeg",
                JPG: "jpg",
                GIF: "gif",
                PNG: "png",
                ARC: "arc",
                MP4: "mp4"
            },
            I = {
                OPEN: "Open",
                PROCESS: "Preprocess",
                HIDDEN: "Hidden"
            },
            T = {
                LARGE: {
                    name: "L",
                    width: 800,
                    height: 600,
                    ext: "jpg"
                },
                MEDIUM: {
                    name: "M",
                    width: 600,
                    height: 450,
                    ext: "jpg"
                },
                SMALL: {
                    name: "S",
                    width: 400,
                    height: 300,
                    ext: "jpg"
                },
                THUMB: {
                    name: "Th",
                    width: 150,
                    height: 150,
                    ext: "jpg"
                },
                TINY: {
                    name: "Ti",
                    width: 100,
                    height: 100,
                    ext: "jpg"
                },
                FOLDER: {
                    name: "Fo",
                    width: 75,
                    height: 75,
                    ext: "jpg"
                }
            },
            w = {
                L: "LARGE",
                M: "MEDIUM",
                S: "SMALL",
                Th: "THUMB",
                Ti: "TINY",
                Fo: "FOLDER"
            },
            P = "sm-thumbnail",
            C = "selected",
            N = "status-hidden",
            D = "status-process",
            E = "status-missing",
            M = "thumb",
            z = "thumb-image",
            L = "thumb-ghost",
            F = "title",
            O = "filename",
            _ = "badges",
            A = "badges-hidden",
            U = "play",
            x = "size",
            k = "link",
            K = "noclick",
            B = "display-name",
            G = "sm-hidden",
            H = "sm-image-img",
            R = "sm-fonticon-Folder2",
            j = "sm-fonticon-Folder",
            V = "sm-fonticon-Document",
            Y = "boundingBox",
            q = "typeId",
            J = "typeInfo",
            Z = "imageInfo",
            W = "type",
            X = "size",
            Q = "selected",
            $ = "fileHover",
            ee = "clickable",
            te = "showBadges",
            se = "preFetch",
            ie = l.env.host ? l.env.host.spacerGif : l.hostConfig.imgPrefix + "spacer.gif",
            ae = '<div class="' + P + r + z + '"><img src="' + ie + '" class="' + H + '" /></div>',
            le = '<div class="sm-thumbnail-new-badge"></div>',
            ne = '<span class="sm-fonticon sm-fonticon-{securityType} {thumbType}"></span>',
            re = '<span class="sm-fonticon sm-fonticon-{icon}"></span>',
            de = '<span class="sm-thumbnail-new-badge-text {thumbType} {privacy} {isProtected} {isEmpty} {isProcessing} {isDisabled}">{badgeText}</span>',
            he = '<div class="' + P + r + F + '"><h4>{name}</h4><p class="sm-thumbnail-date-modified">{content}</p></div>',
            oe = '<span class="sm-fonticon sm-fonticon-Gallery2"></span>',
            me = '<div class="' + P + r + F + '"><h4>{title}</h4><p class="sm-thumbnail-date-modified">{content}</p></div>',
            ge = '<div class="' + P + r + O + '"><span class="' + P + r + O + '-content">{filename}</span></div>',
            ce = {
                Folder: '<div class="' + P + r + M + '"><span class="sm-fonticon {folderClass}"></span></div>',
                NodeFolder: '<div class="' + P + r + M + '"><span class="sm-fonticon {folderClass}"></span></div>',
                Album: '<div class="' + P + r + M + '"><div class="' + P + r + L + '1"></div><div class="' + P + r + L + '2"></div></div>',
                NodeAlbum: '<div class="' + P + r + M + '"><div class="' + P + r + L + '1"></div><div class="' + P + r + L + '2"></div></div>',
                Image: '<div class="' + P + r + M + '"></div>',
                NodePage: '<div class="' + P + r + M + '"><span class="sm-fonticon {pageClass}"></span></div>'
            },
            ue = e.Base.create("sm-thumbnail", e.Widget, [], {
                _hovering: !1,
                _hoverTimer: null,
                CONTENT_TEMPLATE: null,
                initializer: function() {
                    this._publishEvents()
                },
                destructor: function() {},
                renderUI: function() {
                    this._renderImage()
                },
                bindUI: function() {
                    var e = this.get(Y);
                    this.get(W) == u && this.get($) === !0 && (e.on("mouseover", this._handleThumbHover, this), e.on("mouseout", function() {
                        this._hoverTimer && this._hoverTimer.cancel(), this._hoverFilename(!1)
                    }, this))
                },
                syncUI: function() {
                    this._setBoundingBoxSize()
                },
                getUniqueKey: function() {
                    var e = null,
                        t = this.get(J),
                        s = this.get(W);
                    switch (s) {
                        case g:
                            e = t.nodeId;
                            break;
                        case c:
                            e = t.albumId;
                            break;
                        case u:
                            e = t.imageId
                    }
                    return e + r + s
                },
                _renderImage: function() {
                    var t, l = this.get(Y),
                        r = this.get(J),
                        y = this.get(Z),
                        b = this.get(X),
                        v = y && y.Sizes && y.Sizes[b] ? y.Sizes[b] : T[w[b]],
                        S = this.get(W),
                        f = S == g || S == h || S == m ? "Fo" : b,
                        P = r.hasOwnProperty("EffectiveSecurityType") && 1 != r.EffectiveSecurityType,
                        C = r.hasOwnProperty("PrivacyLevel") && 2 == r.PrivacyLevel,
                        N = r.hasOwnProperty("PrivacyLevel") && 3 == r.PrivacyLevel,
                        M = r.Type == p,
                        z = !0,
                        L = null,
                        F = null,
                        O = null,
                        x = null,
                        K = 0,
                        H = null,
                        q = (e.config.doc.createDocumentFragment(), [{
                            key: "categories",
                            single: "category",
                            multiple: "categories"
                        }, {
                            key: "subcategories",
                            single: "subcategory",
                            multiple: "subcategories"
                        }, {
                            key: "folders",
                            single: "folder",
                            multiple: "folders"
                        }, {
                            key: "albums",
                            single: "gallery",
                            multiple: "galleries"
                        }]),
                        Q = null;
                    if (z = S == h ? r.hasOwnProperty("HasChildren") ? !r.HasChildren : null === y : S == o && r.hasOwnProperty("HasImages") ? !r.HasImages : null === y, y && y.Sizes && y.Sizes.hasOwnProperty(f) ? v = y.Sizes[f] : w.hasOwnProperty(f) ? v = T[w[f]] : b == parseInt(b, 10) ? (b = parseInt(b, 10), v = y.Sizes.S, v.custom = !0, v.width >= v.height ? (v.aspect = v.width / v.height, v.width = b, v.height = Math.round(b / v.aspect)) : (v.aspect = v.height / v.width, v.width = Math.round(b / v.aspect), v.height = b), f = v.width + "x" + v.height, y.Sizes[f] = v, this.set(X, f), this.set(Z, y)) : 2 == b.split("x").length && (f = b, b = b.split("x"), v = y.Sizes.S, v.custom = !0, v.width = parseInt(b[0], 10), v.height = parseInt(b[1], 10), y.Sizes[f] = v, this.set(Z, y)), t = {
                            "badges-classname": this.get(te) ? this.getClassName(_) : this.getClassName(A),
                            "play-classname": this.getClassName(U),
                            "link-classname": this.getClassName(k),
                            "name-classname": this.getClassName(B),
                            "image-width": v.width,
                            "image-height": v.height,
                            folderClass: z ? R : j,
                            pageClass: V
                        }, S == c && r.AlbumID && (t.AlbumID = r.AlbumID), L = i.create(a.sub(ce[S], e.merge(y, t))), null !== y && y.Status === I.PROCESS) F = i.create(a.sub(ae, null)), F.one("img").setStyles({
                        width: v.width + d,
                        height: v.height + d
                    }), l.addClass(this.getClassName(D)), L.append(F);
                    else if (null !== y && y.Sizes && y.Sizes[f]) {
                        var se = T.SMALL.name;
                        f !== T.THUMB.name && f !== T.TINY.name && (se = f), F = i.create(a.sub(ae, y)), S == g || S == h || S == m ? F.one("img").setStyles({
                            background: "url(" + this.getUrlForSize(se, y) + ") center center / cover no-repeat",
                            width: T.FOLDER.width + d,
                            height: T.FOLDER.height + d
                        }) : F.one("img").setStyles({
                            background: "url(" + this.getUrlForSize(se, y) + ") center center / cover no-repeat",
                            width: v.width + d,
                            height: v.height + d
                        }), L.append(F)
                    } else null !== y && y.Sizes && !y.Sizes[f] ? ((S == g || S == h || S == m) && (v.width = 80, v.height = 65), F = i.create(a.sub(ae, null)), F.one("img").setStyles({
                        width: v.width + d,
                        height: v.height + d
                    }), F.one("img").addClass(this.getClassName(E)), L.append(F)) : null !== y && !P || S !== c && S !== o || (F = i.create(a.sub(ae, null)), F.one("img").setStyles({
                        width: v.width + d,
                        height: v.height + d
                    }), z && F.one("img").addClass("emptyalbum_ti"), L.append(F));
                    switch ((S == g || S == h || S == m) && (f = b), S) {
                        case g:
                            x = "", r.hasOwnProperty("children") && null !== r.children && e.Array.each(q, function(e) {
                                Q = e.key, K >= 2 || r.children.hasOwnProperty(Q) && a.isNumber(r.children[Q]) && (x.length > 0 && (x += ", "), x += r.children[Q], x += 1 == r.children[Q] ? " " + e.single : " " + e.multiple, K++)
                            }), "" === x && (x = "Empty"), O = i.create(a.sub(he, {
                                name: r.name,
                                content: x
                            }));
                            break;
                        case h:
                        case m:
                            x = "", r.hasOwnProperty("DateModifiedDisplay") && null !== r.DateModifiedDisplay ? x = "Modified: " + r.DateModifiedDisplay : r.hasOwnProperty("DateModified") && null !== r.DateModified && (x = "Modified: " + r.DateModified.split(" ").slice(0, 1)), "" === x && (x = "Empty"), O = i.create(a.sub(he, {
                                name: r.Name,
                                content: x
                            })), (P || C || N) && (H = i.create(le), P && H.append(i.create(a.sub(ne, {
                                thumbType: S === h ? "Folder" : "Page",
                                securityType: 2 == r.EffectiveSecurityType ? "FolderLock" : "FolderUser"
                            }))), C && H.append(i.create(a.sub(de, {
                                thumbType: S === h ? "Folder" : "Page",
                                privacy: "Unlisted",
                                badgeText: "UNLISTED",
                                isProtected: P ? "isProtected" : "",
                                isEmpty: z ? "Empty" : "",
                                isDisabled: "",
                                isProcessing: ""
                            }))), N && H.append(i.create(a.sub(de, {
                                thumbType: S === h ? "Folder" : "Page",
                                privacy: "Private",
                                badgeText: "PRIVATE",
                                isProtected: P ? "isProtected" : "",
                                isEmpty: z ? "Empty" : "",
                                isDisabled: "",
                                isProcessing: ""
                            }))));
                            break;
                        case c:
                            O = i.create(a.sub(me, {
                                title: r.title,
                                titleSafe: r.titleSafe,
                                content: "Updated: " + r.dateUpdated
                            }));
                            break;
                        case o:
                            x = "", r.hasOwnProperty("DateModifiedDisplay") && null !== r.DateModifiedDisplay ? x = "Updated: " + r.DateModifiedDisplay : r.hasOwnProperty("DateModified") && null !== r.DateModified && (x = "Updated: " + r.DateModified.split(" ").slice(0, 1)), "" === x && (x = r.DynamicImageCount + " Photos"), O = i.create(a.sub(me, {
                                title: r.Name,
                                titleSafe: r.UrlName,
                                content: x
                            })), M ? (H = i.create(le), H.append(i.create(a.sub(ne, {
                                thumbType: "Gallery",
                                securityType: "Gallery2Lock"
                            })))) : P || C || N ? (H = i.create(le), P && H.append(i.create(a.sub(ne, {
                                thumbType: "Gallery",
                                securityType: 2 == r.EffectiveSecurityType ? "GalleryLock" : "GalleryUser"
                            }))), C && H.append(i.create(a.sub(de, {
                                thumbType: "Gallery",
                                privacy: "Unlisted",
                                badgeText: "UNLISTED",
                                isProtected: P ? "isProtected" : "",
                                isEmpty: z ? "Empty" : "",
                                isDisabled: "",
                                isProcessing: ""
                            }))), N && H.append(i.create(a.sub(de, {
                                thumbType: "Gallery",
                                privacy: "Private",
                                badgeText: "PRIVATE",
                                isProtected: P ? "isProtected" : "",
                                isEmpty: z ? "Empty" : "",
                                isDisabled: "",
                                isProcessing: ""
                            })))) : z && (H = i.create(le), H.append(oe));
                            break;
                        case u:
                            var ie, ue;
                            this.get($) === !0 && (O = i.create(a.sub(ge, {
                                filename: y.FileName + n + y.Format
                            })), O.addClass(G)), y.IsVideo && (ie = "VideoCamera"), y.IsArchive === !0 && (ie = "Vault"), y.isDisabled === !0 && (ue = !0, this.set(ee, !1)), y.Status === I.PROCESS && (ie = "ImageProcessing2"), y.Status === I.HIDDEN && (ie = "Hide"), (ie || ue) && (H = i.create(le), ie && H.append(i.create(a.sub(re, {
                                icon: ie
                            }))), ue ? H.append(a.sub(de, {
                                badgeText: "Image too small for selected product",
                                isDisabled: "isDisabled",
                                isEmpty: z ? "Empty" : "",
                                isProcessing: "",
                                isProtected: "",
                                thumbType: "Image",
                                privacy: ""
                            })) : y.Status === I.PROCESS && H.append(a.sub(de, {
                                badgeText: "PROCESSING",
                                isDisabled: "",
                                isEmpty: z ? "Empty" : "",
                                isProcessing: "isProcessing",
                                isProtected: "",
                                privacy: "",
                                thumbType: "Image"
                            })))
                    }
                    v.hasOwnProperty("custom") && v.custom === !0 && L.setStyles({
                        width: v.width,
                        height: v.height
                    });
                    var pe = l.appendChild(s({
                        title: r.Name
                    }));
                    pe.append(L), pe.append(O), null !== H && pe.append(H), (S === c || S === o) && this._centerImage(f), this._setBoundingBoxClasses("", f)
                },
                _setBoundingBoxSize: function() {
                    var e = this.get(Y),
                        t = this.get(Z),
                        s = this.get(X),
                        i = t && t.Sizes && t.Sizes[s] ? t.Sizes[s] : T[w[s]],
                        l = null,
                        n = null;
                    s !== T.TINY.name && s !== T.THUMB.name && (l = i.width, n = i.height, i.hasOwnProperty("custom") && i.custom === !0 && (l += 16, n += 16)), a.isNull(l) || a.isNull(l) || e.setStyles({
                        width: l + d,
                        height: n + d
                    })
                },
                _setBoundingBoxClasses: function(e, t) {
                    var s = this.get(Z),
                        i = this.get(W),
                        l = i.replace("Node", ""),
                        n = this.get(Q),
                        r = this.get(J),
                        d = this.get(Y),
                        h = a.isString(e) ? e.toLowerCase() : e,
                        m = a.isString(t) ? t.toLowerCase() : t;
                    n ? d.addClass(this.getClassName(C)) : d.removeClass(this.getClassName(C)), s && s.Status === I.HIDDEN ? d.addClass(this.getClassName(N)) : d.removeClass(this.getClassName(N)), e.length > 0 ? d.replaceClass(this.getClassName(x + "-" + h), this.getClassName(x + "-" + m)) : d.addClass(this.getClassName(x + "-" + t.toLowerCase())), this.get(ee) === !1 && d.addClass(this.getClassName(K)), d.addClass("yui3-u"), d.addClass(this.getClassName(l.toLowerCase())), d.setAttribute("data-id", this.get(q)), d.setAttribute("data-type", l), i == c ? d.setAttribute("data-key", r.albumKey) : i == o && (d.setAttribute("data-key", r.AlbumKey), d.setAttribute("data-nodeId", r.NodeID)), d.toggleClass("sm-thumbnail-name-overflow", this.get("disableThumbOverflow"))
                },
                _publishEvents: function() {
                    this.publish(se)
                },
                _centerImage: function(e) {
                    var t, s, e = e || "Ti",
                        i = this.get(Z),
                        a = this.get(W),
                        l = i && i.Sizes && i.Sizes[e] ? i.Sizes[e] : T[w[e]],
                        r = this.get(Y),
                        h = r.one(n + this.getClassName(z)),
                        m = T[w[e]].width,
                        g = T[w[e]].height,
                        u = 0,
                        p = 0;
                    s = Math.floor(g - l.height) / 2, t = Math.floor(m - l.width) / 2, a == c || a == o ? (u = l.height + 10, p = l.width + 10, h.setStyles({
                        marginTop: s + d,
                        height: u + d
                    }), r.one(n + this.getClassName(L) + "1").setStyles({
                        marginTop: s - 8 + d,
                        height: u + d
                    }), r.one(n + this.getClassName(L) + "2").setStyles({
                        marginTop: s - 4 + d,
                        height: u + d
                    }), h.setStyles({
                        marginLeft: t + d,
                        width: p + d
                    }), r.one(n + this.getClassName(L) + "1").setStyles({
                        marginLeft: t + 8 + d,
                        width: p + d
                    }), r.one(n + this.getClassName(L) + "2").setStyles({
                        marginLeft: t + 4 + d,
                        width: p + d
                    })) : (s > 0 && h.setStyle("paddingTop", s + d), t > 0 && h.setStyle("paddingLeft", t + d), h.setStyle("height", l.height + d), h.setStyle("width", l.width + d))
                },
                _handleThumbHover: function(t) {
                    this._hovering === !1 && (this._hoverTimer && this._hoverTimer.cancel(), this._hovering = !0, this._hoverTimer = e.later(500, this, this._hoverFilename, !0))
                },
                _hoverFilename: function(e) {
                    var t = this.get(Y).one(n + this.getClassName(O)),
                        s = this.get(Z);
                    this._hovering = !1, this._hoverTimer = null, e === !0 && "" !== s.FileName ? t.removeClass(G) : t.addClass(G)
                },
                getUrlForSize: function(t, s) {
                    var i = a.isObject(s) ? s : this.get(Z);
                    return e.SM.Thumbnail.getUrlForSize(i, t)
                },
                getGalleryUrl: function(e) {
                    var t, s = a.isObject(e) ? e : this.get(Z),
                        i = null,
                        l = null;
                    for (t in s.Sizes) s.Sizes.hasOwnProperty(t) && (i = t);
                    return l = s.NewKey ? a.sub(S, {
                        base: s.BaseUrl,
                        imageId: s.ImageID,
                        imageKey: s.ImageKey,
                        albumId: s.AlbumID,
                        albumKey: s.AlbumKey,
                        size: i
                    }) : a.sub(v, {
                        base: s.BaseUrl,
                        imageId: s.ImageID,
                        imageKey: s.ImageKey,
                        albumId: s.AlbumID,
                        albumKey: s.AlbumKey,
                        size: i
                    })
                }
            }, {
                CSS_PREFIX: P,
                ATTRS: {
                    disableThumbOverflow: {
                        value: !1
                    },
                    type: {
                        value: null
                    },
                    typeId: {
                        value: 0
                    },
                    typeInfo: {
                        value: null
                    },
                    imageInfo: {
                        value: null
                    },
                    clickable: {
                        value: !0
                    },
                    selected: {
                        value: !1
                    },
                    size: {
                        value: T.SMALL.name
                    },
                    fileHover: {
                        value: !0
                    },
                    baseUrl: {
                        value: ""
                    },
                    showBadges: {
                        value: !0
                    }
                },
                FORMATS: f,
                STATUSES: I,
                SIZES: T,
                SIZE_SHORT_LONG_NAMES: w,
                getUrlForSize: function(e, t) {
                    if (!e.Sizes) return console.log("bad info", e), !1;
                    if (!e.Sizes[t]) return console.log("bad size info: " + t, e), !1;
                    var s = (e.Sizes[t], e.Serial),
                        i = e.SEOFilename,
                        l = "Fo" == t ? T.SMALL.name : t,
                        n = e.Sizes[t].ext,
                        r = "";
                    return r = e.NewKey ? a.sub(y, {
                        base: e.BaseUrl,
                        imageId: e.ImageID,
                        imageKey: e.ImageKey,
                        name: i,
                        serial: s,
                        size: l,
                        ext: n
                    }) : a.sub(b, {
                        base: e.BaseUrl,
                        imageId: e.ImageID,
                        imageKey: e.ImageKey,
                        name: i,
                        serial: s > 0 ? "-" + s : "",
                        size: l,
                        ext: n
                    })
                }
            });
        e.namespace("SM").Thumbnail = ue
    }(), SM.currentModule = null
}, "", {
    requires: ["datatype-date", "dom", "event", "lodash", "node", "widget"]
});
YUI.add("sm-tile-base-view", function(e) {
    SM.currentModule = "sm-tile-base-view";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        "use strict";

        function t() {
            this._currentCropClassNames = {}, e.Do.before(this._addCropAndImageSizeClasses, this, "_renderNew"), e.Do.after(this._doAfterImageSizeChange, this, "_afterImageSizeChange"), e.Do.before(this._doBeforeRenderImage, this, "_renderImage")
        }

        function i() {
            this._isTile && (this._host = this), this._renderConfig = {}, e.Do.before(this._addShowInfoClass, this, "_renderNew"), e.Do.after(this._attachSharedEvents, this, "_attachEvents"), e.Do.after(this._detachSharedEvents, this, "_detachEvents")
        }
        var a = SM["import"]("sm-dom"),
            s = SM["import"]("sm-ua"),
            n = e.SM.SmugLog,
            r = /^[0-9]+x[0-9]+$/,
            l = "tileClick",
            o = "tileSelect",
            d = "tileUnselect",
            c = {
                S: 276,
                M: 384,
                L: 576,
                XL: 768,
                X2: 960
            },
            h = new Error("image load failed"),
            g = /#size#/g,
            u = new e.Promise(function(e) {
                e()
            }),
            m = ["X3", "X2", "XL", "L", "M", "S", "Th", "Ti"],
            f = ["O"].concat(m),
            p = function(e, t) {
                return t.area - e.area
            },
            v = {},
            S = function() {
                var e = new s;
                return e.isSmugBot
            }(),
            T = {},
            I = e.Base.create("sm-views-tile-base", e.View, [], {
                defaultDataMap: {
                    Caption: "Caption",
                    CaptionFallback: "",
                    IsVideo: "IsVideo",
                    Title: "Title",
                    Url: "Url"
                },
                rendered: !1,
                initializer: function() {
                    this._publishedEvents = {}, this._selectedTiles = {}
                },
                destructor: function() {
                    delete this._publishedEvents, delete this._selectedTiles
                },
                getSelectedTiles: function() {
                    return e.Object.values(this._selectedTiles)
                },
                isTileSelected: function(e) {
                    return !!this._selectedTiles[F.uid(e)]
                },
                selectTile: function(e, t) {
                    return this.get("selectable") && !this.isTileSelected(e) && this._fireEvent(o, {
                        defaultFn: this._defTileSelectFn
                    }, {
                        tile: e,
                        src: t && t.src
                    }), this
                },
                toggleTileSelection: function(e, t) {
                    return this.isTileSelected(e) ? this.unselectTile(e, t) : this.selectTile(e, t)
                },
                unselectTile: function(e, t) {
                    return this.get("selectable") && this.isTileSelected(e) && this._fireEvent(d, {
                        defaultFn: this._defTileUnselectFn
                    }, {
                        tile: e,
                        src: t && t.src
                    }), this
                },
                _calculateContainerWidth: function() {
                    return a.getElementScrollingWidth(this.get("container").getDOMNode())
                },
                _fireEvent: function(e, t, i) {
                    this._publishedEvents[e] || (this._publishedEvents[e] = this.publish(e, t)), this.fire(e, i)
                },
                _fireTileClick: function(e) {
                    this._fireEvent(l, {
                        defaultFn: this._defTileClickFn,
                        preventedFn: this._preventedTileClickFn
                    }, e)
                },
                _setDataMap: function(t) {
                    return e.merge(this.defaultDataMap, t)
                },
                _defTileClickFn: function(e) {
                    this.get("selectable") && 1 === e.originEvent.button && (e.originEvent.preventDefault(), this.toggleTileSelection(e.tile))
                },
                _defTileSelectFn: function(t) {
                    var i = this._selectedTiles;
                    "multi" !== this.get("selectable") && e.Object.each(i, function(e) {
                        this.unselectTile(e)
                    }, this), i[F.uid(t.tile)] = t.tile, this.layout ? this.layout._selectTileNode(t.tile) : this._selectTileNode(t.tile)
                },
                _defTileUnselectFn: function(e) {
                    delete this._selectedTiles[F.uid(e.tile)], "clear" !== e.src && (this.layout ? this.layout._unselectTileNode(e.tile) : this._unselectTileNode(e.tile))
                },
                _preventedTileClickFn: function(e) {
                    e.originEvent.preventDefault()
                }
            }, {
                ATTRS: {
                    autoResize: {
                        value: !0,
                        writeOnce: "initOnly"
                    },
                    clickable: {
                        value: !0,
                        writeOnce: "initOnly"
                    },
                    dataMap: {
                        setter: "_setDataMap",
                        valueFn: function() {
                            return this.defaultDataMap
                        }
                    },
                    scrollContainer: {
                        setter: e.one,
                        valueFn: function() {
                            return e.one("body")
                        },
                        writeOnce: "initOnly"
                    },
                    selectable: {
                        value: !1,
                        writeOnce: "initOnly"
                    }
                },
                isCustomSize: function(e) {
                    return r.test(e)
                },
                PREFETCH_SIZES: {
                    Ti: "Ti",
                    Th: "Th",
                    S: "S,M",
                    M: "M,L",
                    L: "L,XL",
                    XL: "XL,X2",
                    X2: "X2,X3",
                    X3: "X2,X3",
                    O: "O"
                },
                PREFETCH_SIZES_LONG: {
                    Ti: "Tiny",
                    Th: "Thumb",
                    S: "Small,Medium",
                    M: "Medium,Large",
                    L: "Large,XLarge",
                    XL: "XLarge,X2Large",
                    X2: "X2Large,X3Large",
                    X3: "X2Large,X3Large",
                    O: "Original"
                },
                IMAGE_SIZES: {
                    X3: {
                        width: 1600,
                        height: 1200
                    },
                    X2: {
                        width: 1280,
                        height: 960
                    },
                    XL: {
                        width: 1024,
                        height: 768
                    },
                    L: {
                        width: 800,
                        height: 600
                    },
                    M: {
                        width: 600,
                        height: 450
                    },
                    S: {
                        width: 400,
                        height: 300
                    },
                    Th: {
                        width: 150,
                        height: 150
                    },
                    Ti: {
                        width: 100,
                        height: 100
                    },
                    1920: {
                        width: 1920,
                        height: 1080
                    },
                    1280: {
                        width: 1280,
                        height: 720
                    },
                    960: {
                        width: 960,
                        height: 540
                    },
                    640: {
                        width: 640,
                        height: 480
                    },
                    320: {
                        width: 320,
                        height: 240
                    }
                },
                WIDTHS: {
                    none: c,
                    "1x1": {
                        Ti: 96,
                        Th: 144,
                        S: 240,
                        M: 336,
                        L: 504,
                        XL: 660,
                        X2: 828
                    },
                    "4x3": c,
                    "3x4": {
                        S: 207,
                        M: 288,
                        L: 432,
                        XL: 576,
                        X2: 720
                    },
                    "3x2": {
                        S: 300,
                        M: 408,
                        L: 612,
                        XL: 816,
                        X2: 1020
                    },
                    "2x3": {
                        S: 200,
                        M: 272,
                        L: 408,
                        XL: 544,
                        X2: 680
                    },
                    "3x1": {
                        S: 420,
                        M: 576,
                        L: 864,
                        XL: 1152,
                        X2: 1440
                    },
                    "1x3": {
                        S: 140,
                        M: 192,
                        L: 288,
                        XL: 384,
                        X2: 480
                    }
                },
                _cacheUrl: function(t, i, a) {
                    var s = T[t];
                    return s ? s : S ? {
                        cached: !0,
                        loaded: u,
                        size: a,
                        url: t
                    } : (s = T[t] = {
                        url: t,
                        size: a,
                        cached: !1
                    }, s.loaded = new e.Promise(function(e, a) {
                        var n = s.img = new Image;
                        n.onload = function() {
                            var t = v[i] || (v[i] = []);
                            s.cached = !0, s.width = n.naturalWidth, s.height = n.naturalHeight, s.area = s.width * s.height, t.push(s), t.sort(p), e()
                        }, n.onerror = function() {
                            delete T[t], a(h)
                        }, n.src = t
                    }), s)
                },
                _getLargestCached: function(e) {
                    var t = v[e];
                    return t && t[0] || null
                },
                _getImageUrl: function(e, t) {
                    var i, a = F.imageSizes(e);
                    if (e.isSmugMugResource)
                        if (I.isCustomSize(t)) i = a.template.replace(g, t);
                        else {
                            var s = a[t] || a.O;
                            i = s.url
                        }
                    else i = e.getUrlForSize(t);
                    return i || (n.error("tile-base", "Image size '" + t + "' is missing. Aborting render of image '" + F.uid(e) + "'."), i = "/image/spacer.gif"), i
                },
                _getLargestImageSize: function(t, i) {
                    i || (i = "X3");
                    var a, s = e.Array.indexOf(f, i); - 1 === s && (s = 1);
                    for (var r, l, o = s; r = f[o]; o++)
                        if (l = t[r]) {
                            a = r;
                            break
                        }
                    return a ? a : (n.error("tile-base", "No usable sizes of '" + i + "' and smaller. Aborting render of image with available sizes '" + e.Object.keys(t).join(", ") + "'."), !1)
                },
                _getLargestImageSizeForContainer: function(e, t, i, a) {
                    var s = window.devicePixelRatio;
                    s > 1 && (i *= s, a && (a *= s));
                    var r, l, o, d = m.length;
                    if (a)
                        if ("fit" === t) {
                            for (; r = m[--d];)
                                if (o = e[r], o && (o.width >= i || o.height >= a)) {
                                    l = r;
                                    break
                                }
                        } else if ("fill" === t) {
                        for (; r = m[--d];)
                            if (o = e[r], o && o.width >= i && o.height >= a) {
                                l = r;
                                break
                            }
                    } else n.add("tile-base", "Unknown sizeType '" + t + "' instead of 'fit' or 'fill'");
                    else
                        for (; r = m[--d];)
                            if (o = e[r], o && o.width >= i) {
                                l = r;
                                break
                            }
                    return l ? l : I._getLargestImageSize(e)
                }
            });
        e.namespace("SM.Views").TileBase = I;
        var w = SM["import"]("lodash"),
            _ = e.SM.Models.Image,
            y = {
                clientId: "Uri",
                IsOwner: function(e) {
                    return "Full" === e.get("ResponseLevel")
                }
            },
            C = function(e) {
                var t = e.get("EffectivePrivacy") || e.get("Privacy");
                return X[t]
            },
            b = function(e) {
                var t = e.get("EffectiveSecurityType") || e.get("SecurityType");
                return A[t]
            },
            E = function(e) {
                return function(t) {
                    return !t.getExpansionUri("Unlock" + e) && !t.getExpansionUri("UnlockNode") && "Full" !== t.get("ResponseLevel")
                }
            },
            M = function(e) {
                return function(t) {
                    return !!(t.get("Password") || t.getExpansionUri("Unlock" + e) || t.getExpansionUri("UnlockNode") || "Password" === t.get("EffectiveSecurityType"))
                }
            },
            P = w.assign({}, y, {
                AlbumPassword: function(e) {
                    var t = e.getExpansion("ImageAlbum") || e.getExpansion("Album");
                    return !(!t.get("Password") && !t.getExpansionUri("UnlockAlbum"))
                },
                PrivacyLevel: function(e) {
                    var t = e.getExpansion("ImageAlbum") || e.getExpansion("Album");
                    return X[t.get("Privacy")]
                }
            }),
            L = w.assign({}, y, {
                IsPasswordUnlocked: E("Folder"),
                PasswordProtected: M("Folder"),
                PrivacyLevel: C,
                EffectiveSecurityType: b
            }),
            N = w.assign({}, y, {
                IsPasswordUnlocked: E("Album"),
                PasswordProtected: M("Album"),
                PrivacyLevel: C,
                EffectiveSecurityType: b
            }),
            z = w.assign({}, y, {
                IsPasswordUnlocked: E("Page"),
                PasswordProtected: M("Page"),
                PrivacyLevel: C,
                EffectiveSecurityType: b
            }),
            O = {
                Album: N,
                AlbumImage: P,
                Image: P,
                Folder: L,
                Root: L,
                Page: z,
                Resource: y
            },
            x = {
                1: "root",
                2: "folder",
                4: "album",
                16: "systempage",
                64: "page"
            },
            X = {
                Public: 1,
                Unlisted: 2,
                Private: 3
            },
            A = {
                None: 1,
                Password: 2,
                GrantAccess: 4
            },
            U = {
                Ti: {
                    height: 100,
                    width: 100
                },
                Th: {
                    height: 150,
                    width: 150
                },
                S: {
                    height: 300,
                    width: 300
                },
                M: {
                    height: 450,
                    width: 450
                },
                L: {
                    height: 600,
                    width: 600
                },
                XL: {
                    height: 768,
                    width: 768
                },
                X2: {
                    height: 960,
                    width: 960
                },
                X3: {
                    height: 1200,
                    width: 1200
                }
            },
            k = {
                O: "ImageSizeOriginal",
                X3: "ImageSizeX3Large",
                X2: "ImageSizeX2Large",
                XL: "ImageSizeXLarge",
                L: "ImageSizeLarge",
                M: "ImageSizeMedium",
                S: "ImageSizeSmall",
                Th: "ImageSizeThumb",
                Ti: "ImageSizeTiny"
            },
            F = {
                imageSizes: function(e) {
                    var t;
                    return t = e.isTileConfig ? e.imageSizes : e.isSmugMugResource ? F.resourceImageSizes(e) : F.modelImageSizes(e)
                },
                mapAttrs: function(t, i) {
                    var a = t.isSmugMugResource ? t.get() : t.getAttrs();
                    return e.Object.each(i, function(e, i) {
                        a.hasOwnProperty(i) && (a["_" + i] = a[i]), e && ("function" == typeof e ? a[i] = e(t) : a[i] = a[e])
                    }), !a.Caption && a.CaptionFallback && a.ShowFileName && (a.Caption = a.CaptionFallback), a
                },
                model: function(t, i) {
                    var a, s = {
                            obj: t,
                            uid: t.get("clientId")
                        },
                        n = s.mappedAttrs = F.mapAttrs(t, i);
                    if (t instanceof _) a = t, s.altText = n.Title || n.Caption || n.FileName, s.showSecurity = t.get("Status") !== _.STATUSES.HIDDEN || 3 === t.get("PrivacyLevel") || t.get("AlbumPassword"), s.type = n.IsVideo ? "video" : "photo";
                    else {
                        a = t.getRelated && t.getRelated("Image");
                        var r = x[t.get("Type")];
                        "folder" === r ? (s.isEmpty = !t.get("HasChildren"), s.type = r) : ("album" === r || t instanceof e.SM.Models.Album) && (s.isEmpty = !t.get("HasImages"), s.type = "album"), s.altText = n.Title, s.showSecurity = !0, s.type = r
                    }
                    return a && (s.archived = a.get("IsArchive"), s.classNames = ["sm-image"], s.favorited = a.get("IsFavorite"), s.hasImage = !s.archived, s.hidden = a.get("Status") === _.STATUSES.HIDDEN, s.image = a, s.imageSizes = F.modelImageSizes(a), s.originalHeight = a.get("OriginalHeight"), s.originalWidth = a.get("OriginalWidth"), s["protected"] = a.get("IsProtected")), s
                },
                modelImageSizes: function(t) {
                    if (t.get("Status") === _.STATUSES.PROCESS) return U;
                    var i = {};
                    return e.Object.each(t.get("Sizes"), function(e, t) {
                        e.usable && (i[t] = e)
                    }), i
                },
                resource: function(t, i) {
                    var a, s, n, r = {
                            obj: t,
                            uid: t.get("Uri")
                        },
                        l = t.endpointType;
                    n = "Node" === l || "ChildNodes" === l ? t.get("IsRoot") ? "Root" : t.get("Type") : "Folder" === t.resourceType && t.isRootFolder() ? "Root" : t.resourceType;
                    var o = r.mappedAttrs = F.mapAttrs(t, w.assign({}, O[n], i));
                    if (o.Caption = e.Escape.html(o.Caption), "Image" === n || "AlbumImage" === n ? (s = t, r.altText = o.Title || o.Caption || o.FileName, r.type = t.getExpansionUri("LargestVideo") ? "video" : "photo") : (t.hasExpansion("HighlightImage") ? s = t.getExpansion("HighlightImage") : t.hasExpansion(n + "HighlightImage") && (s = t.getExpansion(n + "HighlightImage")), "Album" === n ? (a = t, r.isEmpty = !t.get("ImageCount")) : "Folder" === n && (r.isEmpty = t.get("IsEmpty")), r.altText = o.Title, r.showSecurity = !0, r.type = n.toLowerCase()), s && (a || (a = "AlbumImage" === s.resourceType ? s.getExpansion("Album") : s.getExpansion("ImageAlbum")), r.archived = !1, r.favorited = !1, r.classNames = ["sm-image"], r.hasImage = !r.archived, r.hidden = s.get("Hidden"), r.image = s, r.imageSizes = F.resourceImageSizes(s), r.originalHeight = s.get("OriginalHeight"), r.originalWidth = s.get("OriginalWidth"), r["protected"] = s.get("Protected"), t === s)) {
                        var d = a && ("Private" === a.get("EffectivePrivacy") || "Private" === a.get("Privacy") || a.get("Password") || "Password" === a.get("EffectiveSecurityType") || "Password" === a.get("SecurityType"));
                        r.showSecurity = !r.hidden || d
                    }
                    return r
                },
                resourceImageSizes: function(e) {
                    if (e.get("Processing")) return U;
                    for (var t, i, a = e.getExpansion("ImageSizeDetails").get(), s = {
                            template: a.ImageSizeTemplate
                        }, n = 0; i = f[n]; n++) t = a[k[i]], t && (s[i] = {
                        height: t.Height,
                        width: t.Width,
                        url: t.Url
                    });
                    return s
                },
                tileOffsets: function(e) {
                    if (e.isSmugMugResource && !e.get("Processing")) {
                        var t = e.getExpansion("PointOfInterestCrops");
                        if (t && t.length > 0) {
                            var i = function() {
                                var e = {};
                                return t.forEach(function(t) {
                                    e[t.get("Type")] = {
                                        x: t.get("X"),
                                        y: t.get("Y")
                                    }
                                }), {
                                    v: e
                                }
                            }();
                            if ("object" === ("undefined" == typeof i ? "undefined" : babelHelpers["typeof"](i))) return i.v
                        }
                    }
                    return e._isYUIModel && _.STATUSES.PROCESS !== e.get("Status") ? e.get("tileOffsets") : null
                },
                uid: function(e) {
                    return e.isSmugMugResource ? e.get("Uri") : e.get("clientId")
                }
            };
        e.namespace("SM.Views.TileBase").Normalize = F;
        var R = '<% if (data.renderedInfo) { %><div class="<%= data.classNames.tileInfo %>"><%== data.renderedInfo %></div><% } %>',
            H = '<span class="sm-fonticon<% if (data.smallIcons) { %>-sml<% } %> sm-tile-type-icon sm-tile-info-icon"></span>',
            D = '<% if (data.showSecurity) { %><% var badgeIcon; %><% if (data.type === "photo") { %><% if (data.tile.AlbumPassword) { %><% badgeIcon = "Lock"; %><% } else if (data.tile.EffectiveSecurityType === data.GRANT_ACCESS) { %><% badgeIcon = "User"; %><% } %><% } %><% var badgeClass; %><% var privacyLevel; %><% var isPrivate = (data.tile.PrivacyLevel === data.PRIVATE); %><% if (data.tile.IsOwner && (data.tile.PrivacyLevel === data.UNLISTED || isPrivate)) { %><% privacyLevel = isPrivate ? "private" : "unlisted" %><% badgeClass = "sm-badge-text sm-badge-text-" + privacyLevel; %><% } else if (badgeIcon) { %><% badgeClass = "sm-icon-only"; %><% } %><% if (badgeClass) { %><span class="<%= badgeClass %>"><%= privacyLevel || "" %><% if (badgeIcon) { %><span class="sm-fonticon-sml sm-fonticon-<%= badgeIcon %>"></span><% } %></span><% } %><% } %>';
        e.namespace("SM.Views.TileBase").Templates = {
            info: "<%  if (data.showType) { %>" + H + '<% } %><div class="sm-tile-info-text" data-alignment="<%= data.infoAlignment %>"><% if (data.tile.Title && data.tile.Title.trim()) { %><p title="<%= data.tile.Title %>" class="<%= data.classNames.title %>" itemprop="name"><% if (data.showInfo === "after" && data.clickable && data.tile.Url) { %><a href="<%= data.tile.Url %>"><%= data.tile.Title %></a><% } else { %> <%= data.tile.Title %><% } %> </p><% } %><% if (data.showInfo === "cover") { %>' + D + '<% } else if (data.tile.Caption && data.tile.Caption.trim()) { %><p itemprop="description" class="sm-tile-caption"><%== data.tile.Caption %></p><meta itemprop="caption" content="<%= data.tile.Caption %>" /><% } %></div>',
            tile: '<<%== data.singleTile ? "div" : "li" %><% if (data.id) { %> id="<%= data.id %>"<% } %> <% if (data.width) { %>style="width:<%= data.width %>" <% } %>class="<%= data.classNames.tileWrapper %><% if (data.type) { %> sm-tile-<%= data.type %><% } %> <%= data.containerClasses %><% if (data.showSecurity) { %><% if (data.tile.PasswordProtected && !data.tile.IsPasswordUnlocked) { %><%= " sm-tile-locked" %><% } else if (data.tile.EffectiveSecurityType === data.GRANT_ACCESS) { %><%= " sm-tile-grant" %><% } %><% } %>"itemscope itemtype="http://schema.org/<%== (data.tile.IsVideo) ? "VideoObject" : "ImageObject" %>"><div class="<%= data.classNames.tile %>" data-clientId="<%= data.tile.clientId %>"><<% if (data.clickable) { %>a itemprop="url" href="<%= data.tile.Url || "#" %>"<% } else { %>div<% } %> <% if (data.height) { %>style="height:<%= data.height %>" <% } %>class="<%= data.classNames.tileContent %><% if (!data.renderedImage) { %> sm-tile-content-empty<% } %>" data-clientId="<%= data.tile.clientId %>"><% if (data.renderedImage) { %><%== data.renderedImage %><% } else if (data.type) { %><span class="sm-fonticon sm-tile-type-icon sm-tile-placeholder-icon"></span><% } %><% if (data.showInfo === "cover" || (data.showInfo === "over" && (data.forceShowOverInfo || data.tile.Title || data.tile.Caption))) { %>' + R + "<% } else { %><% if (!data.singleTile && (data.tile.IsVideo || (data.showType && data.showSecurity && !data.showInfo && (data.tile.PasswordProtected && !data.tile.IsPasswordUnlocked)))) { %>" + H + '<% } %><% } %><% if (data.showInfo !== "cover") { %>' + D + '<% } %><% if (data.showStatus) { %><div class="sm-fonticon-sml <%= data.classNames.status %>"><span></span></div><% } %><% if (data.singleTile && data.tile.IsVideo) { %>' + e.SM.Templates.overlayButton({
                icon: "PlayerPlay"
            }) + '<% } %></<%== data.clickable ? "a" : "div" %>><% if (data.showInfo === "after") { %>' + R + '<% } %></div></<%== data.singleTile ? "div" : "li" %>>'
        }, t.ATTRS = {
            imageCrop: {
                value: "1x1",
                validator: "_isImageCropValid",
                writeOnce: "initOnly"
            }
        }, t.getDimensions = function(e, t, i) {
            var a = {};
            if (e) {
                var s = i ? i / t : 1 / 0;
                e > s ? (a.height = i, a.width = i / e) : (a.height = t * e, a.width = t)
            } else a.height = i, a.width = t;
            return a
        }, t.getFillClass = function(e, t, i) {
            if ("Ti" === e || "Th" === e) return "sm-tile-limit-both";
            if (i) {
                var a = t.originalHeight / t.originalWidth;
                return "sm-tile-limit-" + (i > a ? "height" : "width")
            }
            return ""
        }, t.HEIGHT_PERCENT = {
            "1x1": 1,
            "4x3": .75,
            "3x4": 1.33,
            "3x2": .66,
            "2x3": 1.5,
            "3x1": .33,
            "1x3": 3
        }, t.prototype = {
            _cropBaseClassName: "sm-tiles-",
            _addCropAndImageSizeClasses: function(e) {
                this._addCropClass(e), this._addImageSizeClass(e)
            },
            _addCropClass: function(e) {
                var t = this.get("imageSize"),
                    i = this.get("imageCrop");
                "Ti" === t || "Th" === t ? i = "1x1" : "none" === i && (i = "uncropped");
                var a = "cover" === t ? "" : this._cropBaseClassName + i;
                e.replaceClass(this._currentCropClassNames.crop, a), this._currentCropClassNames.crop = a
            },
            _addImageSizeClass: function(e) {
                var t = this._cropBaseClassName + this.get("imageSize");
                e.replaceClass(this._currentCropClassNames.imageSize, t), this._currentCropClassNames.imageSize = t
            },
            _doBeforeRenderImage: function(e) {
                var i = this._renderConfig[e],
                    a = this.get("imageSize");
                return i && i.hasImage ? (this._cropFillClass = t.getFillClass(a, i, t.HEIGHT_PERCENT[this.get("imageCrop")]), this._cropFillClass && i.classNames.push(this._cropFillClass), void(("Ti" !== a || "Th" !== a) && i.originalHeight > i.originalWidth && i.classNames.push(this.classNames.portrait))) : ""
            },
            _doAfterImageSizeChange: function() {
                this._addImageSizeClass(this.get("container"))
            },
            _isImageCropValid: function(e) {
                return "none" === e || !!t.HEIGHT_PERCENT[e]
            }
        }, e.namespace("SM.Views.TileBase").Crop = t;
        var V = "Ti",
            B = "Th",
            W = '<img src="/img/spacer.gif" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"/>';
        i.ATTRS = {
            containerWidth: {
                writeOnce: "initOnly"
            },
            infoTemplate: {
                value: e.SM.Views.TileBase.Templates.info,
                setter: "_setCustomMicroTemplate",
                writeOnce: "initOnly"
            },
            showInfo: {
                setter: "_setShowInfo",
                value: !1,
                writeOnce: "initOnly"
            },
            showType: {
                value: !0,
                writeOnce: "initOnly"
            },
            showStatus: {
                value: !1,
                writeOnce: "initOnly"
            },
            infoAlignment: {
                value: "left",
                writeOnce: "initOnly"
            }
        }, i.prototype = {
            sharedClassNames: {
                archive: "sm-tile-archive",
                centerImage: "sm-tiles-center-image",
                favorite: "sm-tile-favorite",
                hidden: "sm-tile-hidden",
                infoTypeBase: "sm-tiles-info-",
                portrait: "sm-tile-portrait",
                selected: "sm-tile-selected",
                status: "sm-tile-status",
                tile: "sm-tile",
                tileInfo: "sm-tile-info",
                tileContent: "sm-tile-content",
                tileWrapper: "sm-tile-wrapper",
                title: "sm-tile-title",
                videoType: "sm-tile-video",
                infoHover: "sm-tile-infohover-"
            },
            _supportsTransform: function() {
                var e = document.createElement("div"),
                    t = ["ms", "Webkit", "Moz", "O"],
                    i = "undefined" != typeof e.style.transform;
                if (!i)
                    for (var a, s = 0; a = t[s]; s++)
                        if ("undefined" != typeof e.style[a + "Transform"]) {
                            i = !0;
                            break
                        }
                return e = null, i
            }(),
            _addShowInfoClass: function(e) {
                var t = this.get("showInfo");
                t && e.addClass(this.sharedClassNames.infoTypeBase + t)
            },
            _attachSharedEvents: function() {
                this._sharedEvents && this._detachSharedEvents(), this._sharedEvents = [], this._host.get("clickable") && this._sharedEvents.push(this._host.get("container").delegate("click", this._onTileClick, "." + this.classNames.tileContent, this)), this._sharedEvents.push(this._host.get("container").delegate("contextmenu", this._onContextMenu, "." + this.classNames.tileContent, this))
            },
            _detachSharedEvents: function() {
                this._sharedEvents && (new e.EventHandle(this._sharedEvents).detach(), this._sharedEvents = null)
            },
            _renderImage: function(t, i) {
                var a = this._renderConfig[t];
                if (!a || !a.hasImage) return "";
                a.size || (a.size = this._getImageSizeToRender(t));
                var s = a.altText || "",
                    n = void 0,
                    r = F.tileOffsets(a.image),
                    l = r && r[i];
                l && V !== a.size && B !== a.size && (n = "left: " + l.x + "%; top: " + l.y + "%");
                var o = e.SM.Templates.image({
                    alt: s,
                    classNames: a.classNames,
                    dataAttrs: {
                        clientId: t
                    },
                    id: a.id,
                    url: I._getImageUrl(a.image, a.size),
                    style: n
                });
                return a["protected"] && (o += W), o
            },
            _getTileNode: function(t) {
                return e.one("#" + this._renderConfig[F.uid(t)].tileId + " ." + this.classNames.tile)
            },
            _selectTileNode: function(e) {
                var t = this._getTileNode(e);
                t && t.addClass(this.classNames.selected)
            },
            _setCustomMicroTemplate: function(t) {
                return e.Template.Micro.compile(t)
            },
            _setShowInfo: function(e) {
                return "never" === e ? !1 : e
            },
            _setupRenderConfig: function(t) {
                var i;
                ("UserGrants" === t.endpointType || "Grant" === t.endpointType) && (i = t, t = t.getExpansion("Folder") || t.getExpansion("Album") || t.getExpansion("Page"));
                var a = t.isSmugMugResource ? F.resource : F.model,
                    s = a(t, this._host.get("dataMap")),
                    n = this._renderConfig[s.uid],
                    r = [];
                s.grant = i, s.isTileConfig = !0, s.tileId = n ? n.tileId : e.guid("sm-tile-"), s.hasImage && (s.id = n && n.id ? n.id : e.guid("sm-tile-image-")), s.isEmpty && ("album" === s.type ? r.push("sm-tile-album-empty") : "folder" === s.type && r.push("sm-tile-folder-empty")), this.get("showStatus") && (s.archived && (r.push(this.classNames.archive), s.showStatus = !0), s.favorited && (r.push(this.classNames.favorite), s.showStatus = !0), s.hidden && (r.push(this.classNames.hidden), s.showStatus = !0)), r.length && (s.tileClassNames = r.join(" ")), this._renderConfig[s.uid] = s
            },
            _unselectTileNode: function(e) {
                var t = this._getTileNode(e);
                t && t.removeClass(this.classNames.selected)
            },
            _onContextMenu: function(t) {
                var i = this._renderConfig[t.currentTarget.getData("clientId")];
                i && i.hasImage && i["protected"] && (t.preventDefault(), e.SM.Page.Tooltip.showAtXY(SM.env.rightClickMessage, t.pageX, t.pageY, {
                    className: "sm-right-click-message"
                }))
            },
            _onTileClick: function(e) {
                var t = e.currentTarget.getData("clientId"),
                    i = this._renderConfig[t];
                this._host._fireTileClick({
                    tile: i.obj,
                    grant: i.grant,
                    originEvent: e
                })
            }
        }, e.namespace("SM.Views.TileBase").Shared = i
    }(), SM.currentModule = null
}, "", {
    requires: ["escape", "base-build", "sm-templates-button", "template-micro", "view", "sm-dom", "sm-smuglog", "sm-page-tooltip", "sm-album-model", "sm-ua", "lodash"]
});
YUI.add("sm-tile-view", function(e) {
    SM.currentModule = "sm-tile-view";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        var i, t = e.SM.SmugLog,
            s = e.SM.Views.TileBase,
            n = s.Crop,
            a = s.Normalize,
            r = s.Shared,
            h = 2,
            g = 3,
            o = 4,
            l = function(e, i, t) {
                var s = i || e,
                    n = t;
                return i > e && (s = e, n = e / (i / t)), {
                    width: s,
                    height: n
                }
            },
            d = function(e) {
                return e || (e = 0), parseInt(e, 10)
            },
            m = {
                Ti: !0,
                Th: !0,
                S: !0,
                M: !0,
                L: !0,
                XL: !0,
                X2: !0
            },
            c = window.devicePixelRatio || 1,
            u = "X3",
            _ = s.IMAGE_SIZES[u].height,
            S = s.IMAGE_SIZES[u].width,
            f = .4,
            p = e.Base.create("sm-views-tile", e.SM.Views.TileBase, [r, n], {
                classNames: e.merge(r.prototype.sharedClassNames, {
                    container: "sm-tile-single",
                    centerTile: "sm-tile-center"
                }),
                _centerImage: r.prototype._supportsTransform,
                _containerHeight: 0,
                _isTile: !0,
                initializer: function(i) {
                    i || (i = {});
                    var s = i.resource;
                    s && (s.isSmugMugResource || s instanceof e.SM.Models.Image) || t.error("tile", "The `resource` option must be an Image Resource or Model."), "cover" === i.imageSize ? this._set("center", !1) : "O" === i.imageSize && this._set("imageCrop", "none"), this._compiledTileTemplate = e.Template.Micro.compile(e.SM.Views.TileBase.Templates.tile), this._compiledInfoTemplate = this.get("infoTemplate")
                },
                destructor: function() {
                    this._detachEvents(), this._renderConfig = null, this._tileRenderConfig = null
                },
                render: function(e) {
                    var i = this.get("container"),
                        t = this.get("parentNode");
                    if (t && i.get("parentNode") !== t && t.appendChild(i), !this.rendered) {
                        i.addClass(this.classNames.container), this._centerImage && this.get("verticallyCenter") && i.addClass(this.classNames.centerImage), this.get("center") && i.addClass(this.classNames.centerTile);
                        var s = this._calculateContainerDimensions();
                        s.width && this._set("containerWidth", s.width), this._containerHeight = s.height;
                        var n = this.get("imageSize");
                        m[n] && p.WIDTHS[this.get("imageCrop")][n] > this.get("containerWidth") && (this._originalNamedSize = n, this._set("imageSize", "fit")), this._attachEvents()
                    }
                    var a = this.rendered;
                    if (e && e.clear) {
                        this._renderConfig = {}, this._tileRenderConfig = null;
                        var r = i.one("." + this.classNames.tileWrapper);
                        r && r.remove(!0), a = !1
                    }
                    return a ? this._renderExisting(i, e) : this._renderNew(i, e), this
                },
                resize: function(e, i) {
                    var t = !1;
                    "number" == typeof e && (this._set("maxWidth", e), t = !0), "number" == typeof i && (this._set("maxHeight", i), t = !0);
                    var s = this._calculateContainerDimensions();
                    if (t || this.get("containerWidth") !== s.width || "cover" === this.get("imageSize") && this._containerHeight !== s.height) {
                        s.width && this._set("containerWidth", s.width), this._containerHeight = s.height;
                        var n = this.get("imageCrop"),
                            a = this.get("imageSize");
                        this._originalNamedSize && p.WIDTHS[n][this._originalNamedSize] < s.width ? (this._set("imageSize", this._originalNamedSize), this._originalNamedSize = null) : m[a] && p.WIDTHS[n][a] > s.width && (this._originalNamedSize = a, this._set("imageSize", "fit")), this._renderExisting(this.get("container"))
                    }
                },
                _afterImageSizeChange: function(e) {
                    e.newVal !== e.prevVal && this._renderExisting(this.get("container"))
                },
                _attachEvents: function() {
                    this._events && this._detachEvents(), this._events = [], this._events.push(this.after("imageSizeChange", this._afterImageSizeChange, this)), this.get("autoResize") && this._events.push(e.on("windowresize", this._onWindowResize, null, this))
                },
                _calculateContainerDimensions: function() {
                    var e, i = this.get("container");
                    this._inlineWidth && (e = i.one("." + this.classNames.tileWrapper), e.hide());
                    var t = {
                        height: i.get("offsetHeight"),
                        width: s.prototype._calculateContainerWidth.call(this)
                    };
                    return e && e.show(), t
                },
                _detachEvents: function() {
                    this._events && (new e.EventHandle(this._events).detach(), this._events = null)
                },
                _getImageSizeToRender: function(e) {
                    return p.getImageSize(this._tileRenderConfig, this.get("imageSize"), this.get("containerWidth"), {
                        containerHeight: this._containerHeight,
                        maxWidth: this.get("maxWidth"),
                        maxHeight: this.get("maxHeight"),
                        imageCrop: this.get("imageCrop")
                    })
                },
                _onWindowResize: function() {
                    this.resize()
                },
                _renderNew: function(e) {
                    var i = this.get("resource");
                    ("UserGrants" === i.endpointType || "Grant" === i.endpointType) && (i = i.getExpansion("Folder") || i.getExpansion("Album") || i.getExpansion("Page"));
                    var t = "",
                        n = this.get("showInfo"),
                        r = a.uid(i);
                    this._setupRenderConfig(i), this._tileRenderConfig = this._renderConfig[r];
                    var l = this._tileRenderConfig.mappedAttrs;
                    n && (t = this._compiledInfoTemplate({
                        classNames: this.classNames,
                        clickable: this.get("clickable"),
                        showInfo: n,
                        showType: !1,
                        tile: l,
                        infoAlignment: this.get("infoAlignment")
                    }));
                    var d, m = this._tileRenderConfig,
                        c = m.hasImage && this._getImageSizeToRender(r);
                    c ? (s.isCustomSize(c) && (c = this._cacheCustomImageSize(c)), m.size = c, d = this._renderImage(r, this.get("imageCrop"))) : d = "";
                    var u = this._compiledTileTemplate({
                        classNames: this.classNames,
                        clickable: this.get("clickable"),
                        containerClasses: this._tileRenderConfig.tileClassNames,
                        renderedImage: d,
                        renderedInfo: t,
                        showInfo: n,
                        showStatus: this._tileRenderConfig.showStatus,
                        singleTile: !0,
                        tile: l,
                        type: this._tileRenderConfig.type,
                        GRANT_ACCESS: o,
                        PRIVATE: g,
                        UNLISTED: h
                    });
                    e.append(u), this._applyAfterRenderStyles(), this.rendered = !0
                },
                _cacheCustomImageSize: function(e) {
                    var i = this._tileRenderConfig,
                        t = p._largerCachedCustomSize(i.uid, e);
                    return t ? t.size : (s._cacheUrl(s._getImageUrl(i.image, e), i.uid, e), e)
                },
                _renderExisting: function(e) {
                    var i = this._tileRenderConfig,
                        t = document.getElementById(i.id);
                    if (t) {
                        var n = this._getImageSizeToRender(i.uid);
                        s.isCustomSize(n) && (n = this._cacheCustomImageSize(n)), n !== i.size && (t.src = s._getImageUrl(i.image, n), i.size = n), this._applyAfterRenderStyles()
                    } else this.render({
                        clear: !0
                    })
                },
                _applyAfterRenderStyles: function() {
                    var i, t = this.get("containerWidth"),
                        a = this.get("container"),
                        r = this.get("containerWidth"),
                        h = this.get("imageSize"),
                        g = this.get("maxHeight"),
                        o = this._tileRenderConfig,
                        d = a.one("." + this.classNames.tileWrapper);
                    if ("fit" === h || "fill" === h && g) {
                        var m, c = this.get("maxWidth");
                        if (g) {
                            var u = l(t, c, g);
                            t = u.width, m = u.height
                        } else c && t > c && (t = c);
                        var _;
                        _ = o.hasImage ? o.size && !s.isCustomSize(o.size) ? o.imageSizes[o.size] : {
                            width: o.originalWidth,
                            height: o.originalHeight
                        } : {
                            width: t,
                            height: t * f
                        };
                        var S = n.getDimensions(n.HEIGHT_PERCENT[this.get("imageCrop")] || _.height / _.width, t < _.width ? t : _.width, m && m < _.height ? m : _.height);
                        (r > S.width || m) && (i = S.width), m && this.get("center") ? (d.setStyles({
                            display: "inline-block",
                            marginTop: Math.floor((m - S.height) / 2) + "px",
                            verticalAlign: "top"
                        }), a.setStyle("minHeight", Math.round(m) + "px")) : (d.setStyles({
                            display: "",
                            marginTop: "",
                            verticalAlign: ""
                        }), a.setStyle("minHeight", ""))
                    } else if ("cover" === h) {
                        var p = n.getFillClass(h, o, this._containerHeight / r);
                        if (p !== this._cropFillClass) {
                            var v = e.one("#" + o.id);
                            v && (v.replaceClass(this._cropFillClass, p), this._cropFillClass = p)
                        }
                    }(this._inlineWidth || i) && (this._inlineWidth = i ? Math.round(i) + "px" : "", d.setStyle("width", this._inlineWidth))
                }
            }, {
                ATTRS: {
                    center: {
                        value: !0,
                        writeOnce: "initOnly"
                    },
                    maxHeight: {
                        setter: d,
                        writeOnce: "initOnly"
                    },
                    maxWidth: {
                        setter: d,
                        writeOnce: "initOnly"
                    },
                    imageSize: {
                        value: "S"
                    },
                    resource: {
                        writeOnce: "initOnly"
                    },
                    verticallyCenter: {
                        value: !0,
                        writeOnce: "initOnly"
                    }
                },
                WIDTHS: s.WIDTHS,
                cacheImage: function(e, i, t, n) {
                    var r, h = p.getImageSize(e, i, t, n),
                        g = a.uid(e);
                    return s.isCustomSize(h) && (r = p._largerCachedCustomSize(g, h)), r || (r = s._cacheUrl(s._getImageUrl(e, h), g, h)), r.loaded
                },
                _largerCachedCustomSize: function(e, i) {
                    var t = s._getLargestCached(e);
                    if (t && s.isCustomSize(t.size)) {
                        var a = i.split("x"),
                            r = n.getDimensions(t.height / t.width, parseInt(a[0], 10), parseInt(a[1], 10));
                        if (Math.floor(r.width) <= t.width && Math.floor(r.height) <= t.height) return t
                    }
                    return !1
                },
                estimatePrefetchSizes: function(t, n, a) {
                    if (t || (t = "S"), !i) {
                        var r = {
                                O: {
                                    ext: "jpg",
                                    height: S,
                                    width: S,
                                    usable: !0
                                }
                            },
                            h = s.IMAGE_SIZES;
                        for (var g in h) r[g] = {
                            ext: "jpg",
                            height: h[g].height,
                            width: h[g].height,
                            usable: !0
                        };
                        i = new e.SM.Models.Image({
                            Sizes: r,
                            OriginalWidth: S,
                            OriginalHeight: S
                        })
                    }
                    var o = p.getImageSize(i, t, n, a);
                    return s.isCustomSize(o) ? o + "," + u : s.PREFETCH_SIZES[o]
                },
                getImageSize: function(e, i, t, r) {
                    if (r || (r = {}), !e || !i || !t) return !1;
                    t = d(t), r.maxWidth = d(r.maxWidth), r.maxHeight = d(r.maxHeight);
                    var h = a.imageSizes(e);
                    if ("cover" === i) return s._getLargestImageSizeForContainer(h, "fill", t, r.containerHeight);
                    if ("O" === i) return i;
                    var g, o = r.imageCrop || "none",
                        u = h[s._getLargestImageSize(h, "O")],
                        f = u.height / u.width;
                    if (m[i] && (r.maxWidth = 0, r.maxHeight = 0, p.WIDTHS[o][i] > t && (i = "fit")), "fit" === i || "fill" === i)
                        if (r.maxHeight) {
                            var v = l(t, r.maxWidth, r.maxHeight);
                            if (g = v.height, t = v.width, "none" === o && h.O) {
                                var C = t * c,
                                    w = g * c,
                                    z = n.getDimensions(f, C, w);
                                if (u.height < z.height && u.width < z.width) return "O";
                                if (z.width > S || z.height > _) return Math.round(C) + "x" + Math.round(w)
                            }
                        } else t = r.maxWidth && r.maxWidth < t ? r.maxWidth : t;
                    else {
                        if (!m[i]) return "S";
                        t = p.WIDTHS[o][i], "none" === o && (g = p.WIDTHS["1x1"][i])
                    }
                    var I = n.getDimensions(n.HEIGHT_PERCENT[o] || f, t, g);
                    return s._getLargestImageSizeForContainer(h, "fill", I.width, I.height)
                }
            });
        e.namespace("SM.Views").Tile = p
    }(), SM.currentModule = null
}, "", {
    requires: ["sm-image-model", "sm-image-template", "sm-tile-base-view", "template-micro", "view"]
});
YUI.add("sm-tiles-view", function(e) {
    SM.currentModule = "sm-tiles-view";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        function t(e) {
            this.modelList = e, this._events = [e.after("newPage", this._afterModelListNewPage, this)]
        }

        function i(e) {
            this._paginator = e
        }
        var s = e.SM.SmugLog,
            n = e.SM.Views.TileBase,
            a = n.Normalize;
        ! function() {
            var t, i = "clear",
                o = "render",
                r = "resize",
                l = e.Base.create("sm-views-tiles", e.SM.Views.TileBase, [], {
                    layoutPlugins: {
                        grid: "Grid",
                        vertical: "Vertical",
                        columnOrganic: "ColumnOrganic",
                        rowOrganic: "RowOrganic"
                    },
                    paginationPlugins: {
                        1: null,
                        3: "Append",
                        4: "Infinite"
                    },
                    initializer: function(e) {
                        e || (e = {}), !e.resources, this._plugLayout(this.get("layout"), e.layoutOptions), this._plugPagination(this.get("pagination"), e.paginationOptions)
                    },
                    render: function(t) {
                        var s = this.get("container");
                        this.rendered && t && t.clear && (e.Object.each(this._selectedTiles, function(e) {
                            this.unselectTile(e, {
                                src: "clear"
                            })
                        }, this), this.fire(i, e.merge(t, {
                            container: s
                        })), s.empty());
                        var n = this.get("parentNode");
                        n && s.get("parentNode") !== n && n.appendChild(s);
                        var a = t && t.tiles || this.get("resources");
                        return a instanceof e.ModelList ? a = a.toArray() : a.resources && (a = a.resources), this.fire(o, e.merge(t, {
                            container: s,
                            rendered: this.rendered,
                            tiles: a
                        })), this.rendered || (s.addClass("sm-tiles"), this.rendered = !0), this
                    },
                    resize: function() {
                        this.fire(r)
                    },
                    _plugLayout: function(e, t) {
                        this.plug(e, t), this.rendered && this.render({
                            clear: !0
                        })
                    },
                    _plugPagination: function(t, i) {
                        if (t) {
                            var n = this.get("resources");
                            n instanceof e.ModelList || n.resources ? this.plug(t, i) : s.add("tiles", "The `resources` attribute is not a ModelList or Y.SM.ResourcePaginator when trying to paginate Resources. Falling back to no pagination.")
                        }
                        this.rendered && this.render({
                            clear: !0
                        })
                    },
                    _setLayout: function(t) {
                        return "string" == typeof t ? e.SM.Views.Tiles.Layout[this.layoutPlugins[t]] : t
                    },
                    _setPagination: function(t) {
                        return "string" == typeof t || "number" == typeof t ? (t = "" + t, "1" === t ? null : e.SM.Views.Tiles.Pagination[this.paginationPlugins[t]]) : t
                    }
                }, {
                    ATTRS: {
                        layout: {
                            setter: "_setLayout",
                            valueFn: function() {
                                return e.SM.Views.Tiles.Layout.Grid
                            }
                        },
                        pagination: {
                            setter: "_setPagination",
                            valueFn: function() {
                                return e.SM.Views.Tiles.Pagination.Append
                            }
                        },
                        resources: {
                            writeOnce: !0
                        }
                    },
                    LAYOUTS: {
                        COLUMN_ORGANIC: "columnOrganic",
                        GRID: "grid",
                        ROW_ORGANIC: "rowOrganic",
                        VERTICAL: "vertical"
                    },
                    PAGINATION_TYPES: {
                        NONE: 1,
                        APPEND: 3,
                        INFINITE: 4
                    },
                    WIDTHS: e.SM.Views.TileBase.WIDTHS,
                    cacheImage: function(e, t, i, s, o) {
                        var r = l.getImageSize(e, t, i, s, o),
                            h = n._cacheUrl(n._getImageUrl(e, r), a.uid(e), r);
                        return h.loaded
                    },
                    estimatePrefetchSizes: function(i, s, a, o, r) {
                        if (i || (i = "grid"), s || (s = 960), !t) {
                            var h = {},
                                g = n.IMAGE_SIZES;
                            for (var c in g) h[c] = {
                                ext: "jpg",
                                height: g[c].height,
                                width: g[c].width,
                                usable: !0
                            };
                            t = new e.SM.Models.Image({
                                Sizes: h
                            })
                        }
                        var u = l.getImageSize(t, i, s, a, o);
                        return r && r.longSizeNames ? e.SM.Views.TileBase.PREFETCH_SIZES_LONG[u] : e.SM.Views.TileBase.PREFETCH_SIZES[u]
                    },
                    getImageSize: function(e, t, i, s, n) {
                        var a = l.prototype.layoutPlugins[t];
                        return e && a && i ? (s || (s = "S"), n || (n = "1x1"), l.Layout[a].getImageSize(e, i, s, n)) : !1
                    },
                    getPageSize: function(e, t, i) {
                        i || (i = {});
                        var s = l.prototype.layoutPlugins[t];
                        return s ? l.Layout[s].getPageSize(e, i) : 48
                    }
                });
            e.namespace("SM.Views").Tiles = l
        }(), e.mix(t.prototype, {
                _afterModelListNewPage: function(t) {
                    var i = e.Array.filter(t.models, function(e) {
                        return !!e
                    });
                    this.fire("nextPage", {
                        tiles: i
                    })
                },
                destroy: function() {
                    new e.EventHandle(this._events).detach(), this._events = null, this.modelList = null
                },
                nextPage: function() {
                    this.modelList.loadNextPage(function(e) {})
                },
                isLastPage: function() {
                    var e = this.modelList;
                    return e.get("PageNumber") >= e.get("TotalPages")
                }
            }), e.augment(t, e.EventTarget), e.mix(i.prototype, {
                destroy: function() {
                    this._paginator = null
                },
                nextPage: function() {
                    var e = this._paginator.getNextPage(),
                        t = this;
                    e.then(function(e) {
                        t._paginator = e, t.fire("nextPage", {
                            tiles: e.resources
                        })
                    })
                },
                isLastPage: function() {
                    return this._paginator.isLastPage()
                }
            }), e.augment(i, e.EventTarget), e.namespace("SM.Views.Tiles.Templates").Base = e.merge(e.SM.Views.TileBase.Templates, {
                list: '<ul class="<%= data.classNames.list %>"><%== data.renderedTiles %></ul>',
                paginationTotal: '<div class="<%= data.classNames.total %>"><%= data.totalItems %> <%= data.label %></div>'
            }),
            function() {
                var t = 2,
                    i = 3,
                    s = 4,
                    n = "tileOverlayShow",
                    a = "tileOverlayClick",
                    o = "ontouchstart" in e.config.doc.documentElement,
                    r = {
                        Ti: "Th",
                        Th: "Th",
                        S: "M",
                        M: "L",
                        L: "XL",
                        XL: "XL",
                        X2: "X3",
                        X3: "X3",
                        O: "O"
                    },
                    l = e.SM.Views.TileBase,
                    h = l.Normalize,
                    g = l.Shared,
                    c = e.Base.create("sm-tiles-layout-base", e.Plugin.Base, [g], {
                        classNames: e.merge(g.prototype.sharedClassNames, {
                            container: "sm-tiles-base",
                            list: "sm-tiles-list",
                            spacingBase: "sm-tiles-spacing-",
                            infoHover: "sm-tiles-infohover-"
                        }),
                        templates: e.SM.Views.Tiles.Templates.Base,
                        _centerImages: g.prototype._supportsTransform,
                        _renderEmptyAfterInfo: !1,
                        initializer: function(t) {
                            this._compiledTemplates = {}, this._host = t.host;
                            var i;
                            this.get("overlayHtml") ? i = this.get("overlayHtml") : this.get("showHover") && (i = "<div>"), i && (this._overlay = e.Node.create(i), this._overlay.addClass("sm-tile-overlay"), this._boundShowOverlay = e.bind(this._showOverlay, this)), this._attachEvents()
                        },
                        destructor: function() {
                            this._detachEvents(), this._renderConfig = null, this._boundShowOverlay = null, this._overlay && (this._overlay.remove(!0), this._overlay = null)
                        },
                        _addSpacingClass: function(e) {
                            var t = this.get("spacing");
                            t && e.addClass(this.classNames.spacingBase + t)
                        },
                        _addInfoHoverClass: function(e) {
                            var t = this.get("showInfo"),
                                i = this.get("infoHover");
                            i && "never" !== t && "after" !== t && e.addClass(this.classNames.infoHover + i)
                        },
                        _attachEvents: function() {
                            this._events && this._detachEvents(), this._events = [];
                            var t = this._host.get("container"),
                                i = this.get("showHover") && !o,
                                s = this.get("overlayHtml") && (!o || this.get("showOverlayForTouch"));
                            (i || s) && (this._events.push(t.delegate("hover", this._onTileContentEnter, this._onTileContentLeave, "." + this.classNames.tileContent, this)), this.get("overlayClickFilter") && this._events.push(t.delegate("click", this._onTileOverlayClick, this.get("overlayClickFilter"), this)), this.onHostEvent("clear", this._onHostClear)), this._host.get("autoResize") && this._events.push(e.on("windowresize", this._onResize, null, this)), this.onHostEvent("render", this._onHostRender), this.onHostEvent("resize", this._onResize)
                        },
                        _detachEvents: function() {
                            this._events && (new e.EventHandle(this._events).detach(), this._events = null)
                        },
                        _getCompiledTemplate: function(t) {
                            var i = this._compiledTemplates;
                            return i[t] || (i[t] = e.Template.Micro.compile(this.templates[t])), i[t]
                        },
                        _getImageSizeToRender: function(e) {
                            return c.getImageSize(this._renderConfig[e], this.get("imageSize"))
                        },
                        _render: function(t, i) {
                            i || (i = {});
                            var s = e.merge(i, {
                                container: null
                            });
                            if (i.rendered || (t.addClass(this.classNames.container), this._addSpacingClass(t), this._addInfoHoverClass(t), this._centerImages && t.addClass(this.classNames.centerImage)), !i.rendered || i.clear) {
                                var n = this._host._calculateContainerWidth();
                                n && this._set("containerWidth", n), this._renderConfig = {}, this._renderNew(t, s)
                            } else this._renderExisting(t, s)
                        },
                        _renderExisting: function(e, t) {
                            var i, s = t.tiles;
                            if (s && (i = e.one("." + this.classNames.list))) {
                                t.container = i;
                                for (var n, a = 0; n = s[a]; a++) this._setupRenderConfig(n), this._renderTile(n, t)
                            }
                        },
                        _renderNew: function(e, t) {
                            var i = this.classNames,
                                s = t.tiles,
                                n = [];
                            if (s)
                                for (var a, o = 0; a = s[o]; o++) this._setupRenderConfig(a), n.push(this._renderTile(a, t));
                            e.append(this._getCompiledTemplate("list")({
                                classNames: i,
                                renderedTiles: n.join("")
                            }))
                        },
                        _renderImageContent: function(e) {
                            return e.hasImage ? this._renderImage(e.uid) : ""
                        },
                        _renderTile: function(n, a) {
                            ("UserGrants" === n.endpointType || "Grant" === n.endpointType) && (n = n.getExpansion("Folder") || n.getExpansion("Album") || n.getExpansion("Page")), a || (a = {});
                            var o, r = a.container,
                                l = this._renderConfig[h.uid(n)],
                                g = "",
                                c = this.get("showInfo"),
                                u = this.get("showType"),
                                d = l.mappedAttrs,
                                _ = this.get("forceShowOverInfo"),
                                m = this._host.get("clickable");
                            if (c) {
                                "after" === c && this._renderEmptyAfterInfo && (d.Title || (d.Title = "", m = !1), d.Caption || (d.Caption = ""));
                                var f = !0;
                                u ? "photo" === l.type ? f = !1 : "video" === l.type && ("over" === c ? f = _ || d.Title || d.Caption : "after" === c && (f = !1)) : f = !1, g = this.get("infoTemplate")({
                                    classNames: this.classNames,
                                    clickable: m,
                                    image: n,
                                    showInfo: c,
                                    showSecurity: l.showSecurity,
                                    showType: f,
                                    tile: d,
                                    infoAlignment: this.get("infoAlignment")
                                })
                            }
                            if (o = this._getCompiledTemplate("tile")({
                                    classNames: this.classNames,
                                    clickable: this._host.get("clickable"),
                                    containerClasses: l.tileClassNames,
                                    forceShowOverInfo: _,
                                    id: l.tileId,
                                    height: l.height,
                                    renderedImage: this._renderImageContent(l),
                                    renderedInfo: g,
                                    showInfo: c,
                                    showSecurity: l.showSecurity,
                                    showStatus: l.showStatus,
                                    showType: u,
                                    singleTile: !1,
                                    smallIcons: "Ti" === this.get("imageSize"),
                                    tile: d,
                                    type: l.type,
                                    width: l.width,
                                    GRANT_ACCESS: s,
                                    PRIVATE: i,
                                    UNLISTED: t
                                }), r) {
                                var p = e.Node.create(o),
                                    v = r.one("#" + l.tileId);
                                return v ? (v.replace(p), v.destroy(!0)) : r.append(p), p
                            }
                            return o
                        },
                        _resize: function() {},
                        _showOverlay: function() {
                            this._overlay.setStyle("opacity", 1)
                        },
                        _onHostClear: function() {
                            this._overlay && this._overlay.remove()
                        },
                        _onHostRender: function(e) {
                            this._render(e.container, e)
                        },
                        _onTileOverlayClick: function(e) {
                            e.preventDefault(), this._host.fire(a, {
                                tile: this._hoveredTile,
                                filterTarget: e.currentTarget
                            })
                        },
                        _onResize: function() {
                            var e = this._host._calculateContainerWidth();
                            e !== this.get("containerWidth") && (this._set("containerWidth", e), this._resize())
                        },
                        _onTileContentEnter: function(e) {
                            var t = e.currentTarget,
                                i = t.getData("clientId"),
                                s = (this._renderConfig[i], t.one(".sm-image")),
                                a = {
                                    height: "",
                                    width: "",
                                    opacity: 0
                                };
                            if (s) {
                                var o = s.get("offsetHeight"),
                                    r = s.get("offsetWidth"),
                                    l = t.get("offsetHeight"),
                                    h = t.get("offsetWidth");
                                l > o && (a.height = o + "px"), h > r && (a.width = r + "px")
                            }
                            this._overlay.setStyles(a), t.contains(this._overlay) || t.appendChild(this._overlay), this._hoveredTile = this._renderConfig[i].obj, this._host.fire(n, {
                                overlay: this._overlay,
                                tile: this._hoveredTile
                            }), window.setTimeout(this._boundShowOverlay, 1)
                        },
                        _onTileContentLeave: function() {
                            this._hoveredTile = null, this._overlay.setStyle("opacity", 0)
                        }
                    }, {
                        NS: "layout",
                        ATTRS: {
                            forceShowOverInfo: {
                                value: !1,
                                writeOnce: "initOnly"
                            },
                            imageSize: {
                                writeOnce: "initOnly"
                            },
                            overlayClickFilter: {
                                writeOnce: "initOnly"
                            },
                            overlayHtml: {
                                writeOnce: "initOnly"
                            },
                            showOverlayForTouch: {
                                writeOnce: "initOnly",
                                value: !0
                            },
                            showHover: {
                                value: !1,
                                writeOnce: "initOnly"
                            },
                            spacing: {
                                setter: function(e) {
                                    var t = parseInt(e, 10);
                                    return 6 === t ? 4 : t
                                },
                                value: 0,
                                writeOnce: "initOnly"
                            },
                            infoHover: {
                                writeOnce: "initOnly"
                            }
                        },
                        MIN_AUTO_PAGE_SIZE: 48,
                        getImageSize: function(e, t) {
                            return window.devicePixelRatio && window.devicePixelRatio > 1 && (t = r[t]), l._getLargestImageSize(h.imageSizes(e), t)
                        }
                    });
                e.namespace("SM.Views.Tiles.Layout").Base = c
            }();
        var o = e.SM.Views.Tiles,
            r = e.Base.create("sm-tiles-layout-column-base", o.Layout.Base, [], {
                classNames: e.merge(o.Layout.Base.prototype.classNames, {
                    columnBase: "sm-tiles-col-",
                    container: "sm-tiles-column-base"
                }),
                _maxColumns: 10,
                initializer: function() {
                    this._columnClassNames = {}
                },
                _addColumnClass: function(e) {
                    var t = this._calculateColumns();
                    if (t <= this._maxColumns) {
                        var i = this.classNames.columnBase + t,
                            s = e.generateID();
                        e.replaceClass(this._columnClassNames[s], i), this._columnClassNames[s] = i
                    }
                },
                _calculateColumns: function() {
                    return r.calculateColumns(this.get("containerWidth"), this.get("imageSize"), this.get("imageCrop"))
                },
                _render: function(e, t) {
                    o.Layout.Base.prototype._render.apply(this, arguments), this._addColumnClass(e)
                },
                _resize: function() {
                    this._addColumnClass(this._host.get("container"))
                }
            }, {
                NS: "layout",
                calculateColumns: function(t, i, s) {
                    var n, a, o = e.SM.Views.Tiles.WIDTHS;
                    "Ti" === i || "Th" === i ? a = o["1x1"][i] : (n = o[s] || o.none, a = n[i]);
                    var r = t / a;
                    return r > this._maxColumns ? Math.floor(r) : Math.ceil(r)
                }
            });
        e.namespace("SM.Views.Tiles.Layout").ColumnBase = r,
            function() {
                var t = e.SM.Views.TileBase,
                    i = t.Crop,
                    s = t.Normalize,
                    n = e.SM.Views.Tiles,
                    a = e.Base.create("sm-tiles-layout-grid", n.Layout.ColumnBase, [i], {
                        _renderEmptyAfterInfo: !0,
                        classNames: e.merge(n.Layout.ColumnBase.prototype.classNames, {
                            container: "sm-tiles-grid"
                        }),
                        _getImageSizeToRender: function(e) {
                            return a.getImageSize(this._renderConfig[e], this.get("containerWidth"), this.get("imageSize"), this.get("imageCrop"), this.get("spacing"))
                        },
                        _renderImageContent: function(e) {
                            return e.hasImage ? this._renderImage(e.uid, this.get("imageCrop")) : ""
                        }
                    }, {
                        NS: "layout",
                        contentDimensions: {},
                        getImageSize: function(e, o, r, l, h) {
                            if (h = h || 0, "Ti" === r || "Th" === r) return n.Layout.Base.getImageSize(e, r);
                            var g = a.contentDimensions,
                                c = r + l + o + h;
                            if (!g[c]) {
                                var u = n.Layout.ColumnBase.calculateColumns(o, r, l),
                                    d = h * (u - 1),
                                    _ = (o - d) / u;
                                g[c] = i.getDimensions(i.HEIGHT_PERCENT[l], _)
                            }
                            return t._getLargestImageSizeForContainer(s.imageSizes(e), "fill", g[c].width, g[c].height)
                        },
                        getPageSize: function(t, s) {
                            var a;
                            a = !i.HEIGHT_PERCENT[s.crop] || "Ti" === s.imageSize && "Th" === s.imageSize ? "1x1" : s.crop;
                            var o, r = e.SM.Views.Tiles.WIDTHS[a][s.imageSize],
                                l = Math.ceil(t / r);
                            return o = s && parseInt(s.pageSize, 10) > 0 ? s.pageSize : Math.ceil(n.Layout.Base.MIN_AUTO_PAGE_SIZE / l), l * o
                        }
                    });
                e.namespace("SM.Views.Tiles.Layout").Grid = a
            }(),
            function() {
                var t = e.SM.Views.TileBase,
                    i = t.Normalize,
                    s = e.SM.Views.Tiles,
                    n = e.Base.create("sm-tiles-layout-column-organic", s.Layout.ColumnBase, [], {
                        classNames: e.merge(s.Layout.ColumnBase.prototype.classNames, {
                            container: "sm-tiles-column-organic",
                            list: "sm-tiles-list sm-tiles-column"
                        }),
                        _centerImages: !1,
                        _columnOffset: 0,
                        _getImageSizeToRender: function(e) {
                            return n.getImageSize(this._renderConfig[e], this.get("containerWidth"), this.get("imageSize"), this.get("spacing"))
                        },
                        _renderExisting: function(e, t) {
                            var s, n, a, o, r, l, h = this._calculateColumns(),
                                g = t.tiles;
                            if (g && g.length && (n = e.all(".sm-tiles-column"))) {
                                var c = this._renderConfig[i.uid(g[0])];
                                if (c && null !== document.getElementById(c.tileId))
                                    for (t.container = e, o = 0; l = g[o]; o++) this._setupRenderConfig(l), this._renderTile(l, t);
                                else {
                                    for (r = 0; h > r; r++)
                                        for (a = n.item(r), t.container = a, s = (h - this._columnOffset + r) % h, o = s; l = g[o]; o += h) this._setupRenderConfig(l), this._renderTile(l, t);
                                    this._columnOffset = (this._columnOffset + g.length) % h
                                }
                            }
                        },
                        _renderNew: function(e, t) {
                            var i, s, n = this._calculateColumns(),
                                a = "sm-tiles-" + this.get("imageSize"),
                                o = t.tiles;
                            if (this._columnCount = n, o) {
                                this._columnOffset = o.length % n;
                                for (var r = 0; n > r; r++) {
                                    s = [];
                                    for (var l, h = r; l = o[h]; h += n) this._setupRenderConfig(l), s.push(this._renderTile(l, t));
                                    i = e.appendChild(this._getCompiledTemplate("list")({
                                        classNames: this.classNames,
                                        renderedTiles: s.join("")
                                    })), i.addClass(a)
                                }
                            }
                        },
                        _resize: function() {
                            this._calculateColumns() !== this._columnCount && this._host.render({
                                clear: !0
                            })
                        }
                    }, {
                        NS: "layout",
                        getImageSize: function(e, n, a, o) {
                            o = o || 0;
                            var r = s.Layout.ColumnBase.calculateColumns(n, a),
                                l = o * (r - 1),
                                h = (n - l) / r;
                            return t._getLargestImageSizeForContainer(i.imageSizes(e), "fill", h)
                        },
                        getPageSize: function(e, t) {
                            if (t && parseInt(t.pageSize, 10) > 0) return t.pageSize;
                            var i = s.WIDTHS.none[t.imageSize],
                                n = Math.ceil(e / i);
                            return Math.ceil(s.Layout.Base.MIN_AUTO_PAGE_SIZE / n) * n
                        }
                    });
                e.namespace("SM.Views.Tiles.Layout").ColumnOrganic = n
            }();
        var n = e.SM.Views.TileBase,
            a = n.Normalize,
            l = {
                Ti: !0,
                Th: !0
            },
            h = e.SM.Views.Tiles.WIDTHS["1x1"],
            g = e.Base.create("sm-tiles-layout-row-organic", o.Layout.Base, [], {
                classNames: e.merge(o.Layout.Base.prototype.classNames, {
                    container: "sm-tiles-row-organic"
                }),
                _centerImages: !1,
                _variancePercent: .5,
                _varianceWeight: .5,
                initializer: function(e) {
                    this._defaultRowHeight = h[e.imageSize] || h.S, this._rowHeightVariance = this.get("varyHeight") ? Math.round(this._defaultRowHeight * this._variancePercent) : 0;
                    var t = Math.round(this._rowHeightVariance * this._varianceWeight);
                    this._maxRowHeight = this._defaultRowHeight + t, this._minRowHeight = this._defaultRowHeight - this._rowHeightVariance + t
                },
                _calculateRowHeight: function() {
                    return this.get("varyHeight") ? this._defaultRowHeight + this._rowHeightVariance * (this._varianceWeight - Math.random()) : this._defaultRowHeight
                },
                _renderExisting: function(t, i) {
                    i || (i = {});
                    var s, n = !1,
                        o = i.tiles;
                    if (o && o.length && (s = this._renderConfig[a.uid(o[0])], n = s && null !== document.getElementById(s.tileId)), n) {
                        for (var r, l, h = 0; r = o[h]; h++)
                            if (l = a.uid(r), s = this._renderConfig[l]) {
                                var g = t.one("#" + s.tileId);
                                g && (this._setupRenderConfig(r), e.mix(this._renderConfig[l], s, !0, ["height", "heightPercent", "resource", "size", "width"]), g.replace(this._renderTile(r)), g.destroy(!0))
                            }
                    } else {
                        var c = t.one(".sm-tiles-pg");
                        c && t.removeChild(c), this._renderNew(t, i), c && t.append(c)
                    }
                },
                _renderNew: function(e, t) {
                    var i = t.tiles,
                        s = this.get("containerWidth"),
                        o = "sm-tiles-" + this.get("imageSize"),
                        r = this._maxRowHeight,
                        h = this.get("spacing"),
                        g = !this._host.pagination || this._host.pagination.isLastPage();
                    if (this._savedConfigs) {
                        for (var c, u = [], d = 0; c = this._savedConfigs[d]; d++) u.push(c.resource);
                        i = u.concat(i), this._savedConfigs = null
                    }
                    for (var _, m = this._calculateRowHeight(), f = 0, p = [], v = i.length - 1, S = 0; _ = i[S]; S++) {
                        this._setupRenderConfig(_);
                        var w = this._renderConfig[a.uid(_)];
                        if (w.resource = _, p.push(w), w.hasImage) {
                            var y = w.originalWidth,
                                T = w.originalHeight;
                            T && y ? (m > T && (m = r = T), w.heightPercent = y / T) : (w.heightPercent = 1.33, w.hasImage = !1)
                        } else w.heightPercent = 1;
                        f += w.heightPercent;
                        var C = s - (p.length - 1) * h,
                            I = Math.round(C / f);
                        if (g && S === v && (m = r >= I ? r : 1 / 0), m >= I) {
                            var z;
                            I > r ? (z = !1, I = r < this._maxRowHeight ? r : this._maxRowHeight) : z = !0;
                            for (var N = 0, P = 0; w = p[N]; N++) P += w.width = Math.round(w.heightPercent * I);
                            z && (I += this._distributeDifference(C, P, p));
                            for (var E = "", M = 0; w = p[M]; M++) {
                                if (w.hasImage) {
                                    var H = n._getLargestImageSizeForContainer(w.imageSizes, "fill", w.width, I);
                                    l[H] && !l[n._getLargestImageSize(w.imageSizes, "O")] ? w.size = "S" : w.size = H
                                }
                                w.height = I + "px", w.width += "px", E += this._renderTile(w.resource)
                            }
                            var L = e.appendChild(this._getCompiledTemplate("list")({
                                classNames: this.classNames,
                                renderedTiles: E
                            }));
                            L.addClass(o), p = [], f = 0, m = this._calculateRowHeight(), r = this._maxRowHeight
                        } else S === v && (this._savedConfigs = p)
                    }
                },
                _distributeDifference: function(e, t, i) {
                    for (var s = e - t, n = i.length, a = s > 0 ? 1 : -1, o = n / s > 0 ? a : 0, r = 0; s;) i[r].width += a, s -= a, n === ++r && (r = 0);
                    return o
                },
                _resize: function() {
                    this._savedConfigs = null, this._host.render({
                        clear: !0
                    })
                }
            }, {
                NS: "layout",
                ATTRS: {
                    varyHeight: {
                        value: !0,
                        writeOnce: "initOnly"
                    }
                },
                getImageSize: function(t, i, s) {
                    l[s] && (s = "S");
                    var o = e.SM.Views.Tiles.WIDTHS["4x3"],
                        r = o[s] || o.S,
                        g = h[s] || h.S;
                    return n._getLargestImageSizeForContainer(a.imageSizes(t), "fill", r, g)
                },
                getPageSize: function(e, t) {
                    return t && parseInt(t.pageSize, 10) > 0 ? t.pageSize : o.Layout.Base.MIN_AUTO_PAGE_SIZE
                }
            });
        e.namespace("SM.Views.Tiles.Layout").RowOrganic = g,
            function() {
                var t = e.SM.Views.TileBase,
                    i = t.Crop,
                    s = t.Normalize,
                    n = e.SM.Views.Tiles,
                    a = n.Layout.Base,
                    o = e.one("body"),
                    r = 48,
                    l = 256,
                    h = function(e) {
                        var t = e ? 2 * r : r;
                        return Math.max(o.get("winHeight") - t, l)
                    },
                    g = {
                        fill: !0,
                        fit: !0
                    },
                    c = {},
                    u = e.Base.create("sm-tiles-layout-vertical", a, [i], {
                        classNames: e.merge(a.prototype.classNames, {
                            container: "sm-tiles-vertical"
                        }),
                        _checkFillSize: function() {
                            var t, i = this.get("imageSize");
                            if (this._sizeBeforeFill || !g[i]) {
                                var s = e.SM.Views.Tiles.WIDTHS[this.get("imageCrop")][this._sizeBeforeFill || i],
                                    n = this.get("containerWidth");
                                s > n ? this._sizeBeforeFill || (t = "fill", this._sizeBeforeFill = i) : this._sizeBeforeFill && (t = this._sizeBeforeFill, this._sizeBeforeFill = null), t && (this._set("imageSize", t), this._addImageSizeClass(this._host.get("container")))
                            }
                            return t || i
                        },
                        _getImageSizeToRender: function(e) {
                            var t = this.get("containerWidth"),
                                i = this.get("imageSize");
                            return u.getImageSize(this._renderConfig[e], t, i, this.get("imageCrop"), this._maxFitHeight)
                        },
                        _render: function(e, t) {
                            this._checkFillSize();
                            var i = this.get("imageSize");
                            t.rendered || "fit" !== i || (this._maxFitHeight = h("after" === this.get("showInfo"))), a.prototype._render.apply(this, arguments)
                        },
                        _resize: function() {
                            var e = this.get("imageSize"),
                                i = this._checkFillSize();
                            if (!g[e] && !g[i]) return void a.prototype._resize.call(this);
                            var s = this,
                                n = this._host.get("container").all(".sm-image");
                            n.each(function() {
                                var i = this.getData("clientId"),
                                    n = s._renderConfig[i];
                                if (n) {
                                    var a = s._getImageSizeToRender(i);
                                    if (n.size !== a && (this.setAttribute("src", t._getImageUrl(n.image, a)), n.size = a), "fit" === e) {
                                        var o = s._calculateWidthForFit(n.imageSizes, n.size);
                                        if (n.width !== o) {
                                            var r = document.getElementById(n.tileId);
                                            r && (r.style.width = n.width = o)
                                        }
                                    }
                                }
                            })
                        },
                        _calculateWidthForFit: function(e, t) {
                            var s = this.get("containerWidth"),
                                n = e[t],
                                a = i.HEIGHT_PERCENT[this.get("imageCrop")] || n.height / n.width,
                                o = n.width > s ? s : n.width,
                                r = n.height > this._maxFitHeight ? this._maxFitHeight : n.height,
                                l = i.getDimensions(a, o, r);
                            return l.width / s * 100 + "%"
                        },
                        _setupRenderConfig: function(e) {
                            t.Shared.prototype._setupRenderConfig.call(this, e);
                            var i = this._renderConfig[s.uid(e)];
                            "fit" === this.get("imageSize") && (i.hasImage ? (i.size = this._getImageSizeToRender(i.uid), i.width = this._calculateWidthForFit(i.imageSizes, i.size)) : i.width = "60%")
                        },
                        _onResize: function() {
                            if ("fit" !== this.get("imageSize")) a.prototype._onResize.apply(this, arguments);
                            else {
                                var e = this._host._calculateContainerWidth(),
                                    t = h("after" === this.get("showInfo"));
                                e !== this.get("containerWidth") && this._set("containerWidth", e), t !== this._maxFitHeight && (this._maxFitHeight = t), this._resize()
                            }
                        }
                    }, {
                        NS: "layout",
                        getImageSize: function(e, a, o, r, l) {
                            if (!g[o]) {
                                var u = n.WIDTHS[r][o];
                                a > u && (a = u)
                            }
                            "fit" === o ? l || (l = h(!1)) : l = null;
                            var d = r + a + (l || "");
                            return c[d] || (c[d] = i.getDimensions(i.HEIGHT_PERCENT[r], a, l)), t._getLargestImageSizeForContainer(s.imageSizes(e), "none" === r ? "fit" : "fill", c[d].width, c[d].height)
                        },
                        getPageSize: function(e, t) {
                            return t && parseInt(t.pageSize, 10) > 0 ? t.pageSize : n.Layout.Base.MIN_AUTO_PAGE_SIZE
                        }
                    });
                e.namespace("SM.Views.Tiles.Layout").Vertical = u
            }(),
            function() {
                var s = e.Base.create("sm-tiles-pagination-base", e.Plugin.Base, [], {
                    classNames: {
                        loading: "sm-tiles-loading",
                        spinner: "sm-progress-spinner",
                        spinnerVisible: "sm-progress-spinner-visible"
                    },
                    initializer: function(s) {
                        this._compiledTemplates = {}, this._host = s.host, this._pagesInProgress = 0, this._boundBeforeGetNextPage = e.bind(this._beforeGetNextPage, this);
                        var n = this._host.get("resources");
                        n instanceof e.ModelList ? this._paginator = new t(n) : this._paginator = new i(n), this._attachEvents()
                    },
                    destructor: function() {
                        this._paginator && this._paginator.destroy(), this._detachEvents()
                    },
                    isLastPage: function() {
                        return this._paginator.isLastPage()
                    },
                    _attachEvents: function() {
                        this._events && this._detachEvents(), this._events = [e.Do.before(this._boundBeforeGetNextPage, this._paginator, "nextPage"), this._paginator.on("nextPage", this._onNextPage, this)]
                    },
                    _detachEvents: function() {
                        this._events && (new e.EventHandle(this._events).detach(), this._events = null)
                    },
                    _hideLoading: function() {
                        var e = this._host.get("container").one("." + this.classNames.spinner);
                        e && e.removeClass(this.classNames.spinnerVisible)
                    },
                    _showLoading: function() {
                        var t = this._host.get("container"),
                            i = t.one("." + this.classNames.spinner);
                        i || (i = e.Node.create("<div/>"), i.addClass(this.classNames.spinner)), t.appendChild(i), i.addClass(this.classNames.spinnerVisible)
                    },
                    _beforeGetNextPage: function() {
                        this._paginator.isLastPage() || (this._showLoading(), this._pagesInProgress++)
                    },
                    _onNextPage: function(e) {
                        this._host.render({
                            tiles: e.tiles
                        }), this._pagesInProgress && (this._pagesInProgress--, 0 === this._pagesInProgress && this._hideLoading())
                    }
                }, {
                    NS: "pagination"
                });
                e.namespace("SM.Views.Tiles.Pagination").Base = s
            }(),
            function() {
                var t = e.SM.Views.Tiles.Pagination.Base,
                    i = '<div class="sm-tiles-pg">' + e.SM.Templates.button({
                        label: "Load More",
                        size: "small",
                        skin: "submit",
                        className: "sm-tiles-pg-button"
                    }) + "</div>",
                    s = e.Base.create("sm-tiles-pagination-append", t, [], {
                        classNames: e.merge(t.prototype.classNames, {
                            button: "sm-tiles-pg-button",
                            pagination: "sm-tiles-pg"
                        }),
                        _attachEvents: function() {
                            t.prototype._attachEvents.apply(this, arguments), this._events.push(this._host.get("container").delegate("click", this._onShowMoreClick, "." + this.classNames.button, this)), this.onHostEvent("render", this._onHostRender)
                        },
                        _renderPaginationBar: function(e, t) {
                            t || (t = {});
                            var s = e.one("." + this.classNames.pagination);
                            return this._paginator.isLastPage() ? void(s && s.remove(!0)) : void(s ? s.replace(i) : e.append(i))
                        },
                        _showLoading: function() {
                            var e = this._host.get("container"),
                                i = e && e.one("." + this.classNames.pagination + " .sm-button");
                            i && i.set("disabled", !0), t.prototype._showLoading.call(this)
                        },
                        _hideLoading: function() {
                            var e = this._host.get("container"),
                                i = e && e.one("." + this.classNames.pagination + " .sm-button");
                            i && i.set("disabled", !1), t.prototype._hideLoading.call(this)
                        },
                        _onHostRender: function(e) {
                            this._renderPaginationBar(e.container, e)
                        },
                        _onShowMoreClick: function() {
                            this._paginator.nextPage()
                        }
                    }, {
                        NS: "pagination"
                    });
                e.namespace("SM.Views.Tiles.Pagination").Append = s
            }(),
            function() {
                var t = e.SM.Views.Tiles.Pagination.Base,
                    i = SM["import"]("lodash"),
                    s = SM["import"]("sm-dom"),
                    n = 640,
                    a = .5,
                    o = e.Base.create("sm-tiles-pagination-infinite", t, [], {
                        initializer: function() {
                            this._boundOnOrientationChange = i.bind(this._onOrientationChange, this), this._boundRecalcRegion = i.bind(this._recalcRegion, this), this._attachInfiniteEvents()
                        },
                        destructor: function() {
                            this._detachScrollEvents(), this._boundRecalcRegion = null, this._hostRegion = null
                        },
                        _attachInfiniteEvents: function() {
                            this._scrollInfo = this._host.get("scrollContainer").plug(e.Plugin.ScrollInfo, {
                                scrollDelay: 50
                            }).scrollInfo, this._scrollEvents = [this._host.after("render", this._afterHostRender, this), this._scrollInfo.on("scroll", this._onScroll, this)], s.win.addEventListener("orientationchange", this._boundOnOrientationChange)
                        },
                        _detachScrollEvents: function() {
                            this._scrollEvents && (new e.EventHandle(this._scrollEvents).detach(), this._scrollEvents = null), this._scrollInfo && (this._host.get("scrollContainer").unplug(this._scrollInfo), this._scrollInfo = null), s.win.removeEventListener("orientationchange", this._boundOnOrientationChange)
                        },
                        _recalcRegion: function() {
                            if (this.get("autoDetach") && this._paginator.isLastPage()) return void this._detachScrollEvents();
                            var t = this._hostRegion = this._host.get("container").get("region"),
                                i = this._scrollInfo.getScrollInfo(),
                                s = this._scrollPadding = Math.max(Math.floor(e.one("body").get("winHeight") * a), n);
                            i.scrollBottom + s >= t.bottom && this._paginator.nextPage()
                        },
                        _afterHostRender: function() {
                            e.soon(this._boundRecalcRegion)
                        },
                        _onScroll: function(e) {
                            e.isScrollDown && e.scrollBottom + this._scrollPadding >= this._hostRegion.bottom && this._paginator.nextPage()
                        },
                        _onOrientationChange: function() {
                            s.win.setTimeout(this._boundRecalcRegion, 200)
                        }
                    }, {
                        NS: "pagination",
                        ATTRS: {
                            autoDetach: {
                                value: !0
                            }
                        }
                    });
                e.namespace("SM.Views.Tiles.Pagination").Infinite = o
            }()
    }(), SM.currentModule = null
}, "", {
    requires: ["base-build", "event-hover", "event-resize", "lodash", "sm", "sm-dom", "sm-image-model", "sm-image-template", "sm-scrollinfo", "sm-smuglog", "sm-templates-button", "sm-tile-base-view", "template-micro", "view"]
});
YUI.add("sm-toast", function(e) {
    SM.currentModule = "sm-toast";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        e.mix(e.Node.DOM_EVENTS, {
            transitionend: 1,
            webkitTransitionEnd: 1
        });
        var t = "click",
            i = "hide",
            n = "show",
            s = e.Base.create("toast", e.View, [], {
                template: '<div class="sm-toast" role="status" aria-live="polite"></div>',
                messageTemplate: "<h4></h4>",
                destructor: function() {
                    this.hide(), this._toastNode = null
                },
                hide: function() {
                    if (!this.get("visible")) return this;
                    clearTimeout(this._timeout), this._set("visible", !1);
                    var e = this._toastNode;
                    return this._events.push(e.once(["transitionend", "webkitTransitionEnd"], this._hide, this)), e.removeClass("sm-toast-visible"), this
                },
                render: function() {
                    var t = this.get("container"),
                        i = this.get("visible"),
                        n = this._toastNode || t.one(".sm-toast");
                    return n || (n = e.Node.create(this.template), n.toggleClass("sm-hidden", !i), t.append(n)), i && n.setHTML(e.Node.create(this.messageTemplate).setHTML(this.get("message"))), this._toastNode = n, this.rendered = !0, this
                },
                show: function() {
                    return this.get("visible") || s._queue(this), this
                },
                _centerNode: function(t) {
                    var i = t.get("offsetWidth"),
                        n = e.DOM.winWidth();
                    t.setStyle("left", (n / 2 - i / 2) * (100 / n) + "%")
                },
                _hide: function() {
                    this._toastNode.addClass("sm-hidden"), new e.EventHandle(this._events).detach(), this.fire(i)
                },
                _show: function() {
                    this.rendered || this.render();
                    var t = this._toastNode;
                    this._set("visible", !0), this._events = [t.once("click", this._onClick, this)], t.removeClass("sm-hidden").setHTML(e.Node.create(this.messageTemplate).setHTML(this.get("message"))), this._centerNode(t), setTimeout(function() {
                        t.addClass("sm-toast-visible")
                    }, 1);
                    var i = this.get("duration");
                    if (i) {
                        var s = this;
                        this._timeout = setTimeout(function() {
                            s.hide()
                        }, i)
                    }
                    this.fire(n)
                },
                _defClickFn: function(e) {
                    1 === e.originEvent.button && this.hide()
                },
                _onClick: function(e) {
                    this._clickEvent || (this._clickEvent = this.publish(t, {
                        defaultFn: this._defClickFn,
                        preventedFn: this._preventedClickFn
                    })), this.fire(t, {
                        originEvent: e
                    })
                },
                _preventedClickFn: function(e) {
                    e.originEvent.preventDefault()
                }
            }, {
                ATTRS: {
                    container: {
                        valueFn: function() {
                            return e.one(".sm-overlay-container")
                        }
                    },
                    duration: {
                        value: 4e3
                    },
                    message: {
                        value: ""
                    },
                    visible: {
                        readOnly: !0,
                        value: !1
                    }
                },
                _queued: [],
                _running: null,
                clearQueue: function() {
                    s._running && (s._queued = [], s._running.hide())
                },
                display: function(t, i) {
                    "object" == typeof t && (i = t, t = i.message);
                    var n = new s(e.merge(i, {
                        message: t
                    }));
                    return n.after("hide", function() {
                        n.destroy()
                    }), n.show(), n
                },
                _next: function() {
                    if (!s._running) {
                        var e = s._queued.shift();
                        e && (s._running = e, e.once("hide", function() {
                            s._running = null, s._next()
                        }), e._show())
                    }
                },
                _queue: function(e) {
                    s._queued.push(e), s._next()
                }
            });
        e.namespace("SM").Toast = module.exports = s
    }(), SM.currentModule = null
}, "", {
    requires: ["base", "dom-screen", "node-style", "view"]
});
YUI.add("sm-tooltip-old", function(e) {
    SM.currentModule = "sm-tooltip-old";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        var t = e.Lang,
            i = e.Node,
            r = -1e4,
            s = -1e4,
            n = e.Base.create("tooltip-old", e.Widget, [e.WidgetPosition, e.WidgetStack], {
                initializer: function(e) {
                    this._triggerClassName = this.getClassName("trigger"), this._currTrigger = {
                        node: null,
                        title: null,
                        mouseX: n.OFFSCREEN_X,
                        mouseY: n.OFFSCREEN_Y
                    }, this._eventHandles = {
                        delegate: null,
                        trigger: {
                            mouseMove: null,
                            mouseOut: null
                        }
                    }, this._timers = {
                        show: null,
                        hide: null
                    }, this.publish("triggerEnter", {
                        defaultFn: this._defTriggerEnterFn,
                        preventable: !0
                    }), this.publish("triggerLeave", {
                        preventable: !1
                    })
                },
                destructor: function() {
                    this._clearCurrentTrigger(), this._clearTimers(), this._clearHandles()
                },
                bindUI: function() {
                    this.after("delegateChange", this._afterSetDelegate), this.after("triggerNodesChange", this._afterSetNodes), this._bindDelegate()
                },
                syncUI: function() {
                    this._uiSetNodes(this.get("triggerNodes"))
                },
                setTriggerContent: function(e) {
                    var r = this.get("contentBox");
                    if (r.set("innerHTML", ""), e)
                        if (e instanceof i)
                            for (var s = 0, n = e.size(); n > s; ++s) r.appendChild(e.item(s));
                        else t.isString(e) && r.set("innerHTML", e)
                },
                _afterSetNodes: function(e) {
                    this._uiSetNodes(e.newVal)
                },
                _afterSetDelegate: function(e) {
                    this._bindDelegate(e.newVal)
                },
                _uiSetNodes: function(e) {
                    this._triggerNodes && this._triggerNodes.removeClass(this._triggerClassName), e && (this._triggerNodes = e, this._triggerNodes.addClass(this._triggerClassName))
                },
                _bindDelegate: function() {
                    var t = this._eventHandles;
                    t.delegate && (t.delegate.detach(), t.delegate = null), t.delegate = e.delegate("mouseenter", e.bind(this._onNodeMouseEnter, this), this.get("delegate"), "." + this._triggerClassName)
                },
                _onNodeMouseEnter: function(e) {
                    var t = e.currentTarget;
                    !t || this._currTrigger.node && t.compareTo(this._currTrigger.node) || this._enterTrigger(t, e.pageX, e.pageY)
                },
                _onNodeMouseLeave: function(e) {
                    this._leaveTrigger(e.currentTarget)
                },
                _onNodeMouseMove: function(e) {
                    this._overTrigger(e.pageX, e.pageY)
                },
                _enterTrigger: function(e, t, i) {
                    this._setCurrentTrigger(e, t, i), this.fire("triggerEnter", {
                        node: e,
                        pageX: t,
                        pageY: i
                    })
                },
                _defTriggerEnterFn: function(t) {
                    var i = t.node;
                    if (!this.get("disabled")) {
                        this._clearTimers();
                        var r = this.get("visible") ? 0 : this.get("showDelay");
                        this._timers.show = e.later(r, this, this._showTooltip, [i])
                    }
                },
                _leaveTrigger: function(t) {
                    this.fire("triggerLeave"), this._clearCurrentTrigger(), this._clearTimers(), this._timers.hide = e.later(this.get("hideDelay"), this, this._hideTooltip)
                },
                _overTrigger: function(e, t) {
                    this._currTrigger.mouseX = e, this._currTrigger.mouseY = t
                },
                _showTooltip: function(t) {
                    var i = this._currTrigger.mouseX,
                        r = this._currTrigger.mouseY,
                        s = this.get("autoHideDelay");
                    this.move(i + n.OFFSET_X, r + n.OFFSET_Y), this.show(), this._clearTimers(), s && (this._timers.hide = e.later(s, this, this._hideTooltip))
                },
                _hideTooltip: function() {
                    this._clearTimers(), this.hide()
                },
                _setTriggerContent: function(e) {
                    var r = this.get("content");
                    r && !(r instanceof i || t.isString(r)) && (r = r[e.get("id")] || e.getAttribute("title")), this.setTriggerContent(r)
                },
                _setCurrentTrigger: function(t, i, r) {
                    var s = this._currTrigger,
                        n = this._eventHandles.trigger;
                    this._setTriggerContent(t), n.mouseMove = e.on("mousemove", e.bind(this._onNodeMouseMove, this), t), n.mouseOut = e.on("mouseleave", e.bind(this._onNodeMouseLeave, this), t);
                    var o = t.getAttribute("title");
                    t.setAttribute("title", ""), s.mouseX = i, s.mouseY = r, s.node = t, s.title = o
                },
                _clearCurrentTrigger: function() {
                    var e = this._currTrigger,
                        t = this._eventHandles.trigger;
                    if (e.node) {
                        var i = e.node,
                            r = e.title || "";
                        e.node = null, e.title = "", t.mouseMove.detach(), t.mouseOut.detach(), t.mouseMove = null, t.mouseOut = null, i.setAttribute("title", r)
                    }
                },
                _clearTimers: function() {
                    var e = this._timers;
                    e.hide && (e.hide.cancel(), e.hide = null), e.show && (e.show.cancel(), e.show = null)
                },
                _clearHandles: function() {
                    var e = this._eventHandles;
                    e.delegate && this._eventHandles.delegate.detach(), e.trigger.mouseOut && e.trigger.mouseOut.detach(), e.trigger.mouseMove && e.trigger.mouseMove.detach()
                }
            }, {
                CSS_PREFIX: "sm-tooltip-old",
                OFFSET_X: 15,
                OFFSET_Y: 15,
                OFFSCREEN_X: r,
                OFFSCREEN_Y: s,
                ATTRS: {
                    content: {
                        value: null
                    },
                    triggerNodes: {
                        value: null,
                        setter: function(e) {
                            return e && t.isString(e) && (e = i.all(e)), e
                        }
                    },
                    delegate: {
                        value: null,
                        setter: function(t) {
                            return e.one(t) || e.one("document")
                        }
                    },
                    showDelay: {
                        value: 250
                    },
                    hideDelay: {
                        value: 10
                    },
                    autoHideDelay: {
                        value: 2e3
                    },
                    visible: {
                        value: !1
                    },
                    xy: {
                        value: [r, s]
                    }
                }
            });
        e.namespace("SM").TooltipOld = n
    }(), SM.currentModule = null
}, "", {
    requires: ["event-mouseenter", "widget", "widget-position", "widget-stack"]
});
YUI.add("sm-transitions-slide", function(e) {
    SM.currentModule = "sm-transitions-slide";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        var e = SM["import"]("react"),
            r = e.PropTypes,
            t = e.addons.CSSTransitionGroup,
            n = function(r) {
                var n = r.direction,
                    s = r.className,
                    i = void 0 === s ? "" : s,
                    a = r.pageKey,
                    o = {
                        className: "sm-slide-outer-wrapper " + i
                    },
                    d = {
                        component: "div",
                        transitionName: "sm-slide-" + n,
                        className: "sm-slide-transition-group",
                        transitionEnterTimeout: 500,
                        transitionLeaveTimeout: 500
                    },
                    l = {
                        key: a,
                        className: "sm-slide-inner-wrapper"
                    };
                return e.createElement("div", babelHelpers["extends"]({}, r, o), e.createElement(t, d, e.createElement("div", l, r.children)))
            };
        n.PropTypes = {
            direction: r.oneOf(["left", "right", "up", "down"]),
            pageKey: r.string.required
        }, module.exports = exports = n
    }(), SM.currentModule = null
}, "", {
    requires: ["react", "sm"]
});
YUI.add("sm-twitter", function(t) {
    SM.currentModule = "sm-twitter";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        var e = "//platform.twitter.com/widgets.js",
            a = t.Template.Micro.compile('<a href="https://twitter.com/share" class="twitter-share-button"<% if (data.url) { %> data-url="<%= data.url %>"<% } %><% if (data.TweetCustomText) { %> data-via="<%= data.TweetCustomText %>"<% } %><% if (data.TweetVia) { %> data-via="<%= data.TweetVia %>"<% } %><% if (data.TweetRecommend) { %> data-related="<%= data.TweetRecommend %>"<% } %><% if (data.TweetHashtag) { %> data-hashtags="<%= data.TweetHashtag %>"<% } %><% if (!data.TweetShowCount) { %>  data-count="none"<% } else { %><% if (data.TweetCountPosition && data.TweetCountPosition === "vertical") { %> data-count="vertical"<% } %><% } %>>Tweet</a>');
        t.namespace("SM").Twitter = t.Base.create("sm-twitter", t.Base, [], {
            renderTweetButton: function(t, e) {
                return this._loadSDK().then(function(n) {
                    return t.append(a(e)), n.widgets.load(t.getDOMNode()), t
                })
            },
            _loadSDK: function() {
                return new t.Promise(function(a) {
                    window.twttr ? a(window.twttr) : t.Get.js(e, {
                        onSuccess: function() {
                            a(window.twttr)
                        },
                        onFailure: function() {},
                        attributes: {
                            id: "twitter-wjs"
                        }
                    })
                })
            }
        })
    }(), SM.currentModule = null
}, "", {
    requires: ["base", "node"]
});
YUI.add("sm-ua", function(e) {
    SM.currentModule = "sm-ua";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        var e = /[^ \w]+/g,
            n = function() {
                function n() {
                    var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : n.getUserAgent();
                    babelHelpers.classCallCheck(this, n), this._cache = {}, this.ua = e
                }
                return babelHelpers.createClass(n, [{
                    key: "_getMajorVersion",
                    value: function() {
                        var e = void 0,
                            n = this.ua,
                            r = 0;
                        return "Chrome" === this.name && (e = n.match(/(?:Chrome|CriOS)\/(\d+)/)), e && e[1] && (r = parseInt(e[1], 10)), isNaN(r) ? 0 : r
                    }
                }, {
                    key: "_getTokens",
                    value: function() {
                        if (this._tokens) return this._tokens;
                        var n = Object.create(null);
                        return this.ua.trim().replace(e, " ").split(/ +/).forEach(function(e) {
                            n[e.toLowerCase()] = !0
                        }), this._tokens = n, n
                    }
                }, {
                    key: "engine",
                    get: function() {
                        var e = this._cache;
                        if (e.engine) return e.engine;
                        var n = this.name,
                            r = this._tokens || this._getTokens();
                        switch (n) {
                            case "Android":
                                return e.engine = "WebKit";
                            case "Chrome":
                                return r.crios ? e.engine = "WebKit" : this._getMajorVersion() >= 28 ? e.engine = "Blink" : e.engine = "WebKit";
                            case "Firefox":
                                return e.engine = "Gecko";
                            case "IE":
                                if (r.trident || r.msie) return e.engine = "Trident";
                                if (r.edge) return e.engine = "Spartan";
                                break;
                            case "Opera":
                                return r.opr ? e.engine = "Blink" : e.engine = "Presto";
                            case "Safari":
                                return e.engine = "WebKit";
                            case "SmugBot":
                                return e.engine = "WebKit"
                        }
                        return e.engine = "Unknown"
                    }
                }, {
                    key: "isAndroidBrowser",
                    get: function() {
                        return "Android" === this.name
                    }
                }, {
                    key: "isChrome",
                    get: function() {
                        return "Chrome" === this.name
                    }
                }, {
                    key: "isFirefox",
                    get: function() {
                        return "Firefox" === this.name
                    }
                }, {
                    key: "isIE",
                    get: function() {
                        return "IE" === this.name
                    }
                }, {
                    key: "isOpera",
                    get: function() {
                        return "Opera" === this.name
                    }
                }, {
                    key: "isSafari",
                    get: function() {
                        return "Safari" === this.name
                    }
                }, {
                    key: "isSmugBot",
                    get: function() {
                        return "SmugBot" === this.name
                    }
                }, {
                    key: "name",
                    get: function() {
                        var e = this._cache;
                        if (e.name) return e.name;
                        var n = this._tokens || this._getTokens();
                        return n.smugbot ? e.name = "SmugBot" : n.opera || n.presto ? e.name = "Opera" : n.chrome ? n.edge && n.windows ? e.name = "IE" : n.opr ? e.name = "Opera" : e.name = "Chrome" : (n.msie || n.trident) && n.windows ? e.name = "IE" : n.firefox ? e.name = "Firefox" : n.safari ? n.android ? e.name = "Android" : n.crios ? e.name = "Chrome" : e.name = "Safari" : "Unknown"
                    }
                }, {
                    key: "os",
                    get: function() {
                        var e = this._cache;
                        if (e.os) return e.os;
                        var n = this._tokens || this._getTokens();
                        if (n.smugbot) return e.os = "Linux";
                        if (n.windows) return n.phone || n.iemobile || n.wpdesktop ? e.os = "Windows Phone" : e.os = "Windows";
                        if (n.mac && n.os && n.x) {
                            if (n.macintosh) return e.os = "Mac OS X";
                            if (n.mobile) return e.os = "iOS"
                        }
                        return n.android ? e.os = "Android" : n.linux ? e.os = "Linux" : "Unknown"
                    }
                }], [{
                    key: "getUserAgent",
                    value: function() {
                        return "undefined" != typeof navigator && navigator.userAgent ? navigator.userAgent : ""
                    }
                }]), n
            }();
        module.exports = n
    }(), SM.currentModule = null
}, "", {
    requires: ["sm"]
});
YUI.add("sm-uri", function(e) {
    SM.currentModule = "sm-uri";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        /*!
        Based on parseUri 1.2.2
        (c) Steven Levithan <stevenlevithan.com>
        MIT License
        http://blog.stevenlevithan.com/archives/parseuri
        */
        function r(e, t) {
            if (!(this instanceof r)) return new r(e, t);
            if ("string" != typeof e) throw new TypeError("input must be a string");
            for (var n = r.KEYS, o = n.length, u = t && t.loose ? r.REGEX_LOOSE : r.REGEX_STRICT, s = u.exec(e); o--;) this[n[o]] = s[o] || null;
            this.hash && (this.hash = decodeURIComponent(this.hash)), this.queryParams = r.parseQuery(this.query)
        }
        r.prototype.toJSON = function() {
            for (var e, t = {}, n = 0, o = r.KEYS.length; o > n; ++n) e = r.KEYS[n], t[e] = this[e];
            return t.queryParams = this.queryParams, t
        }, r.prototype.toString = function() {
            return this.source
        }, r.KEYS = ["source", "protocol", "authority", "userInfo", "user", "password", "host", "port", "relative", "path", "directory", "file", "query", "fragment"], r.REGEX_LOOSE = /^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/, r.REGEX_QUERY = /(?:^|&)([^&=]*)=?([^&]*)/g, r.REGEX_STRICT = /^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/, r.decodeComponent = function(e) {
            try {
                return decodeURIComponent(e).replace(/\+/g, " ")
            } catch (r) {
                try {
                    return e = e.replace(/%(?=[0-9a-fA-F]?[^0-9a-fA-F])/g, "%25"), decodeURIComponent(e).replace(/\+/g, " ")
                } catch (t) {
                    return ""
                }
            }
        }, r.parseQuery = function(e) {
            var t = {};
            return e && "string" == typeof e ? (e.replace(r.REGEX_QUERY, function(e, n, o) {
                n && (t[r.decodeComponent(n)] = "" === o ? !0 : r.decodeComponent(o))
            }), t) : t
        }, r.stringifyQuery = function(e) {
            return Object.keys(e).map(function(r) {
                var t = e[r];
                return void 0 !== t && null !== t && (t = "" + t), encodeURIComponent(r) + (t ? "=" + encodeURIComponent(t) : "")
            }).join("&")
        }, e.namespace("SM").Uri = module.exports = r
    }(), SM.currentModule = null
}, "", {
    requires: ["sm"]
});
YUI.add("sm-user-model", function(e) {
    SM.currentModule = "sm-user-model";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        var a = e.Base.create("sm-user", e.Model, [e.SM.ModelSyncAPI, e.ModelRelate], {
            apiEndpoint: "user",
            idAttribute: "NickName",
            apiCategories: {
                closeaccount: {
                    method: "closeaccount"
                },
                downgradeaccount: {
                    method: "downgradeaccount"
                },
                "default": {
                    expanded: {
                        Plan: e.SM.Models.Plan
                    }
                }
            },
            validate: function(e, a) {
                var t, s, l = [],
                    i = ["FirstName", "LastName", "NickName", "CardNum", "Street1", "City"];
                for (s = 0; s < i.length; s++)
                    if ("" === e[i[s]] && "undefined" != typeof this.changed[i[s]]) {
                        switch (i[s]) {
                            case "FirstName":
                                t = "First name";
                                break;
                            case "LastName":
                                t = "Last name";
                                break;
                            case "NickName":
                                t = "Nickname";
                                break;
                            case "CardNum":
                                t = "Credit card number", i[s] = "CardNumLastFive";
                                break;
                            case "Street1":
                                t = "Street address 1";
                                break;
                            case "City":
                                t = "City"
                        }
                        l.push({
                            Field: i[s],
                            Message: t + " is required."
                        })
                    }
                if (l.length) {
                    var r = new Error;
                    r.errors = l, a(r)
                } else a()
            },
            _sanitizeInt: function(e) {
                return parseInt(e, 10)
            },
            _sanitizeFloat: function(e) {
                return parseFloat(e)
            },
            _sanitizeEmpty: function(a) {
                return e.Lang.trim(a)
            }
        }, {
            ATTRS: {
                NickName: {
                    value: null
                },
                Email: {
                    value: "",
                    setter: "_sanitizeEmpty"
                },
                FirstName: {
                    value: "",
                    setter: "_sanitizeEmpty"
                },
                LastName: {
                    value: "",
                    setter: "_sanitizeEmpty"
                },
                NameDisplay: {
                    value: 0,
                    setter: "_sanitizeInt"
                },
                ThisIsMeID: {
                    value: 0,
                    setter: "_sanitizeInt"
                },
                ThisIsMeKey: {
                    value: ""
                },
                BioPic: {
                    value: ""
                },
                Bio: {
                    value: "",
                    setter: "_sanitizeEmpty"
                },
                StatsEmail: {
                    value: 0,
                    setter: "_sanitizeInt"
                },
                WarnEmail: {
                    value: 0,
                    setter: "_sanitizeInt"
                },
                UploadEmail: {
                    value: 0,
                    setter: "_sanitizeInt"
                },
                NewsEmail: {
                    value: 0,
                    setter: "_sanitizeInt"
                },
                CommentEmail: {
                    value: 0,
                    setter: "_sanitizeInt"
                },
                SortBy: {
                    value: ""
                },
                ViewBy: {
                    value: ""
                },
                Month: {
                    value: 0
                },
                MonthBytes: {
                    value: 0
                },
                OriginalSizes: {
                    value: 0
                },
                ImageCount: {
                    value: 0
                },
                TotalSizes: {
                    value: 0
                },
                BWDateSent: {
                    value: ""
                },
                BWPercentSent: {
                    value: 0
                },
                AutoBWBuy: {
                    value: 0
                },
                Created: {
                    value: ""
                },
                StartDate: {
                    value: ""
                },
                FreeCreated: {
                    value: ""
                },
                RenewalDate: {
                    value: ""
                },
                RenewalMailSent: {
                    value: ""
                },
                RenewalStatus: {
                    value: ""
                },
                LastVisit: {
                    value: ""
                },
                LastIP: {
                    value: ""
                },
                Status: {
                    value: ""
                },
                InitialType: {
                    value: ""
                },
                ContactSupport: {
                    value: 0,
                    setter: "_sanitizeInt"
                },
                Street1: {
                    value: "",
                    setter: "_sanitizeEmpty"
                },
                Street2: {
                    value: "",
                    setter: "_sanitizeEmpty"
                },
                City: {
                    value: "",
                    setter: "_sanitizeEmpty"
                },
                State: {
                    value: "",
                    setter: "_sanitizeEmpty"
                },
                Zip: {
                    value: "",
                    setter: "_sanitizeEmpty"
                },
                Country: {
                    value: "",
                    setter: "_sanitizeEmpty"
                },
                CountryAbbr: {
                    value: "",
                    setter: "_sanitizeEmpty"
                },
                PhoneNum: {
                    value: ""
                },
                CardExpMonth: {
                    value: ""
                },
                CardExpYear: {
                    value: ""
                },
                Domain: {
                    value: "",
                    setter: "_sanitizeEmpty"
                },
                DomainOnly: {
                    value: ""
                },
                GuestPass: {
                    value: ""
                },
                ViewPassword: {
                    value: ""
                },
                ViewPassHint: {
                    value: ""
                },
                FriendsView: {
                    value: 0,
                    setter: "_sanitizeInt"
                },
                FamilyView: {
                    value: 0,
                    setter: "_sanitizeInt"
                },
                PartnerID: {
                    value: 0
                },
                SearchUpdate: {
                    value: 0
                },
                W9: {
                    value: ""
                },
                TrialDays: {
                    value: 0
                },
                RootNodeID: {
                    value: 0
                },
                PlanID: {
                    value: 0,
                    setter: "_sanitizeInt"
                },
                RenewalPlanID: {
                    value: 0
                },
                CardNumLastFiveRev: {
                    value: ""
                },
                HasValidCreditCard: {
                    value: ""
                },
                IsFreeTrialAccount: {
                    value: ""
                },
                EnableProfile: {
                    value: 0,
                    setter: "_sanitizeInt"
                }
            },
            RELATIONSHIPS: {
                Plan: {
                    type: "toOne",
                    key: "PlanID",
                    relatedModel: e.SM.Models.Plan,
                    relatedKey: "PlanID"
                },
                UserSetting: {
                    type: "toOne",
                    key: "NickName",
                    relatedModel: e.SM.Models.UserSetting,
                    relatedKey: "NickName"
                }
            }
        });
        e.namespace("SM.Models").User = a,
            function() {
                var a = e.Base.create("sm-models-userlist", e.ModelList, [], {
                    model: e.SM.Models.User
                }, {
                    ATTRS: {}
                });
                e.namespace("SM.Models").UserList = a
            }()
    }(), SM.currentModule = null
}, "", {
    requires: ["base", "model", "model-relate", "sm-api", "sm-apierror-model", "sm-model-history", "sm-model-sync-api", "sm-plan-model", "sm-usersetting-model"]
});
YUI.add("sm-usersetting-model", function(e) {
    SM.currentModule = "sm-usersetting-model";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        var t = e.Base.create("sm-usersetting", e.Model, [e.SM.ModelSyncAPI, e.ModelRelate], {
            apiEndpoint: "usersetting",
            idAttribute: "NickName",
            _sanitizeInt: function(e) {
                return parseInt(e, 10)
            },
            _sanitizeEmpty: function(t) {
                return null === t ? "" : e.Lang.trim(t)
            }
        }, {
            ATTRS: {
                NickName: {
                    value: null
                },
                News: {
                    value: 0
                },
                ProSales: {
                    value: 0
                },
                Referrals: {
                    value: 0
                },
                Bio: {
                    value: null
                },
                Keywords: {
                    value: 0
                },
                Dates: {
                    value: 0
                },
                Galleries: {
                    value: 0
                },
                FriendsAndFamily: {
                    value: 0
                },
                Featured: {
                    value: 0
                },
                Communities: {
                    value: 0
                },
                CommentApproval: {
                    value: 0
                },
                NumKeywords: {
                    value: 0
                },
                DateBy: {
                    value: ""
                },
                First: {
                    value: ""
                },
                Second: {
                    value: ""
                },
                Third: {
                    value: ""
                },
                PhotoRank: {
                    value: 0
                },
                NumPhotoRank: {
                    value: 0
                },
                SmugMaps: {
                    value: 0
                },
                BioPosition: {
                    value: 0
                },
                SmugMapsPosition: {
                    value: 0
                },
                FriendsAndFamilyPosition: {
                    value: 0
                },
                CommunitiesPosition: {
                    value: 0
                },
                PhotoRankPosition: {
                    value: 0
                },
                FeaturedPosition: {
                    value: 0
                },
                DatesPosition: {
                    value: 0
                },
                KeywordsPosition: {
                    value: 0
                },
                GalleriesPosition: {
                    value: 0
                },
                Backprinting: {
                    value: ""
                },
                ContactEmail: {
                    value: ""
                },
                WorldSearchable: {
                    value: 0
                },
                SmugSearchable: {
                    value: 0
                },
                PrintVendor: {
                    value: ""
                },
                ColorCorrection: {
                    value: 0
                },
                SEO: {
                    value: ""
                },
                RecentPhotosBox: {
                    value: 0
                },
                RecentPhotosBoxPosition: {
                    value: 0
                },
                SlideshowBox: {
                    value: 0
                },
                SlideshowBoxPosition: {
                    value: 0
                },
                NumRecentPhotos: {
                    value: 0
                },
                PhotoVideoBox: {
                    value: 0
                },
                PhotoVideoBoxPosition: {
                    value: 0
                },
                SlideshowBoxSettings: {
                    value: ""
                },
                StudioName: {
                    value: ""
                },
                PhotoVideoBoxSettings: {
                    value: ""
                },
                MobileSite: {
                    value: 0
                },
                Feeds: {
                    value: 0
                },
                ValidEmail: {
                    value: 0,
                    setter: "_sanitizeInt"
                },
                Collectable: {
                    value: 0
                },
                MetaDescription: {
                    value: "",
                    setter: "_sanitizeEmpty"
                },
                FilenameKeywording: {
                    value: 0
                },
                CollectionAlbumID: {
                    value: 0
                },
                MetaKeywords: {
                    value: "",
                    setter: "_sanitizeEmpty"
                },
                QuickShare: {
                    value: 0
                },
                AutoPublish: {
                    value: 0
                },
                FacebookFollow: {
                    value: "",
                    setter: "_sanitizeEmpty"
                },
                TwitterFollow: {
                    value: "",
                    setter: "_sanitizeEmpty"
                },
                BlogFollow: {
                    value: "",
                    setter: "_sanitizeEmpty"
                },
                UseFacebook: {
                    value: 0,
                    setter: "_sanitizeInt"
                },
                BeSocialGeo: {
                    value: 0
                },
                BeSocialKeywords: {
                    value: 0
                },
                BeSocialShorten: {
                    value: 0
                },
                BeSocialLayout: {
                    value: 0
                },
                BeSocialLinkStyle: {
                    value: 0
                },
                BeSocialSize: {
                    value: 0
                },
                BoutiquePackagingStartCost: {
                    value: ""
                },
                BoutiquePackaging: {
                    value: 0,
                    setter: "_sanitizeInt"
                },
                InterceptAddress: {
                    value: 0
                },
                InterceptShipping: {
                    value: 0,
                    setter: "_sanitizeInt"
                },
                BitlyAPIKey: {
                    value: null,
                    setter: "_sanitizeEmpty"
                },
                BitlyAPILogin: {
                    value: null,
                    setter: "_sanitizeEmpty"
                },
                EventsBox: {
                    value: 0
                },
                EventsBoxPosition: {
                    value: 0
                },
                GoogleAnalytics: {
                    value: "",
                    setter: "_sanitizeEmpty"
                },
                WebmasterToolsVerification: {
                    value: "",
                    setter: "_sanitizeEmpty"
                },
                StrippedWebmasterToolsVerification: {
                    value: "",
                    setter: "_sanitizeEmpty"
                },
                PinterestVerification: {
                    value: "",
                    setter: "_sanitizeEmpty"
                },
                StrippedPinterestVerification: {
                    value: "",
                    setter: "_sanitizeEmpty"
                },
                StatCounterProjectID: {
                    value: "",
                    setter: "_sanitizeEmpty"
                },
                StatCounterSecurityID: {
                    value: "",
                    setter: "_sanitizeEmpty"
                },
                PricelistMigration: {
                    value: 0
                },
                VRNCountry: {
                    value: "",
                    setter: "_sanitizeEmpty"
                },
                VRN: {
                    value: "",
                    setter: "_sanitizeEmpty"
                },
                MetaTitle: {
                    value: "",
                    setter: "_sanitizeEmpty"
                },
                LightboxStyle: {
                    value: ""
                },
                RCPText: {
                    value: ""
                }
            }
        });
        e.namespace("SM.Models").UserSetting = t,
            function() {
                var t = e.Base.create("sm-models-usersettinglist", e.ModelList, [], {
                    model: e.SM.Models.UserSetting
                }, {
                    ATTRS: {}
                });
                e.namespace("SM.Models").UserSettingList = t
            }()
    }(), SM.currentModule = null
}, "", {
    requires: ["base", "model", "model-relate", "sm-api", "sm-apierror-model", "sm-model-history", "sm-model-sync-api"]
});
YUI.add("sm-video-view", function(e) {
    SM.currentModule = "sm-video-view";
    var exports = {};
    SM.modules[SM.currentModule] = {
        exports: exports,
        name: SM.currentModule
    };
    ! function() {
        var SM = window.SM,
            t = "/img/ria/SmugPlayer/" + SM.env.videoPlayer.version + ".swf",
            i = {
                AUTO: 1,
                HTML5: 2,
                FLASH: 3,
                QUICKTIME: 4
            },
            s = '<video id="{id}" poster="{poster}" src="{src}" controls="controls" width="{width}" height="{height}" {autoplay} x-webkit-airplay="allow"></video>',
            a = '<embed scale="tofit" controller="true" enablejavascript="true" pluginspage="http://www.apple.com/quicktime/download/" type="video/quicktime" src="{src}" width="{width}" height="{height}" class="qtMovie" style="{style}" id="{id}" {params}/>',
            h = '<object scale="tofit" width="{width}" height="{height}" id="{id}" codebase="http://www.apple.com/qtactivex/qtplugin.cab#version=6,0,2,0" classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B" style="{style}" class="qtMovie"><param name="src" value="{src}" /><param name="enablejavascript" value="true" /><param name="controller" value="true" />{params}</object>',
            r = e.Base.create("sm-video-view", e.View, [e.EventTarget], {
                containerTemplate: '<div class="sm-video"></div>',
                initializer: function() {
                    var t = this.get("model");
                    this._eventHandlers = [], this._playerId = e.guid(), t && (this._eventHandlers.push(t.after("change", this._afterModelChange, this)), this._eventHandlers.push(t.after("destroy", this.destroy, this))), this.get("type") === i.AUTO && this.set("type", this._getPlayerType()), this._height = this.get("height"), this._width = this.get("width")
                },
                destructor: function() {
                    new e.EventHandle(this._eventHandlers).detach(), this.get("container").remove(!0)
                },
                render: function() {
                    switch (this.get("center") && this.get("container").addClass("sm-video-center"), this.get("type")) {
                        case i.HTML5:
                            this._renderHTML5();
                            break;
                        case i.FLASH:
                            this._renderFlash();
                            break;
                        case i.QUICKTIME:
                            this._renderQuickTime()
                    }
                    if (this.get("verticalCenter")) {
                        var e, t = this.get("container"),
                            s = t.get("parentNode");
                        e = (s.get("offsetHeight") - t.get("offsetHeight")) / 2, t.setStyle("paddingTop", e + "px")
                    }
                    return this
                },
                resize: function(e) {
                    return this.set("size", e), this.render(), this
                },
                _afterModelChange: function(e) {
                    e.changed && e.changed.exif || this.render()
                },
                _getPlayerType: function() {
                    var t = i.FLASH;
                    return (e.UA.android || e.UA.ios || !swfobject.getFlashPlayerVersion().major > 0) && (t = i.HTML5), t
                },
                _getVideoAttributes: function() {
                    var t = this.get("model"),
                        i = t.getLargestVideoSizeForContainer(this.get("size")),
                        s = t.get("Sizes"),
                        a = s[i],
                        h = this._width ? this._width : a.width,
                        r = this._height ? this._height : a.height,
                        n = a.url,
                        o = t.getLargestImageSizeForContainer(this.get("size")),
                        l = t.getUrlForSize(o);
                    return s.QTStream && (e.UA.safari || e.UA.ios) && (n = s.QTStream.url), {
                        id: this._playerId,
                        src: n,
                        width: h,
                        height: r,
                        style: "",
                        poster: l || "",
                        autoplay: this.get("autoPlay") ? "autoplay" : ""
                    }
                },
                _renderFlash: function() {
                    var i, s, a = this.get("container"),
                        h = this.get("model"),
                        r = this.get("autoPlay"),
                        n = h.getRelated("Album") || this.get("album"),
                        o = h.getLargestVideoSizeForContainer(this.get("size")),
                        l = h.get("Sizes")[o],
                        d = this._width ? this._width : l ? l.width : 480,
                        g = this._height ? this._height : l ? l.height : 272,
                        c = "",
                        u = {
                            imageId: h.get("ImageID"),
                            imageKey: h.get("ImageKey"),
                            albumId: n ? n.get("AlbumID") : 0,
                            albumKey: n ? n.get("AlbumKey") : "",
                            width: 0,
                            height: 0,
                            hostLevel: "live" === SM.env.type ? "live" : "dev",
                            apiURL: "https://" + SM.env.host.api + "/",
                            autoPlay: r,
                            showAlbumLink: this.get("showAlbumLink")
                        },
                        m = {
                            id: this._playerId,
                            bgcolor: "#000000",
                            wmode: "transparent",
                            backgroundColor: "#000000",
                            allowScriptAccess: "always",
                            allowNetworking: "all",
                            allowFullScreen: "true",
                            quality: "best",
                            version: "10"
                        },
                        v = "",
                        p = "",
                        w = null,
                        y = e.guid();
                    n && n.get("CanShare") !== !1 && this.get("canShare") || (u.canShare = !1), SM.env.host.main.match("smugmug.net") && (c = "&endPoint=" + SM.env.host.main), v = location.host.match(".smugmug.net") || location.host.match(".smugmug.com") ? SM.env.host.cdn : location.host, p = SM.env.host.http + v + t, u.width = d, u.height = g, u.allowedDomain = location.host, i = o > this.get("size") ? "100%" : d, s = o > this.get("size") ? "100%" : g, w = e.Node.create('<div id="' + y + '"></div>'), a.setHTML(w), window.swfobject.embedSWF(p, w.getDOMNode(), i, s, "9.0.0", "expressInstall.swf", u, m, m, function(e) {
                        e.success ? a.setStyle("height", g + "px") : a.setHTML("<p>Error embedding flash player</p>")
                    })
                },
                _renderHTML5: function() {
                    var t = this.get("container"),
                        i = this.get("model"),
                        a = i.getLargestVideoSizeForContainer(this.get("size")),
                        h = i.get("Sizes")[a],
                        r = this._width ? this._width : h.width,
                        n = this._height ? this._height : h.height,
                        o = null,
                        l = this._getVideoAttributes();
                    o = e.Node.create(e.Lang.sub(s, l)), t.setStyles({
                        width: r + "px",
                        height: n + "px"
                    }), t.setHTML(o)
                },
                _renderQuickTime: function() {
                    var t, i, s, r = this.get("container"),
                        n = this.get("model"),
                        o = n.getLargestVideoSizeForContainer(this.get("size")),
                        l = n.get("Sizes"),
                        d = l[o],
                        g = this._width ? this._width : d.width,
                        c = this._height ? this._height : d.height,
                        u = n.getRelated("Album"),
                        m = null,
                        v = {
                            id: this._playerId,
                            src: d.url,
                            width: g,
                            height: c,
                            params: ""
                        },
                        p = {
                            kioskmode: !u || !u.get("Protected") || u.get("IsOwner") === !1,
                            wmode: "transparent"
                        };
                    if (l.QTStream && (e.UA.safari || e.UA.ios) && (v.src = l.QTStream.url), navigator.plugins && navigator.mimeTypes && navigator.mimeTypes.length) {
                        i = a;
                        for (s in p) t += s + '="' + p[s] + '" '
                    } else {
                        i = h;
                        for (s in p) t += '<param name="' + s + '" value="' + p[s] + '"/>'
                    }
                    v.params = t, m = e.Node.create(e.Lang.sub(i, v)), r.setStyles({
                        width: g + "px",
                        height: c + "px"
                    }), r.setHTML(m)
                }
            }, {
                ATTRS: {
                    center: {
                        value: !0
                    },
                    size: {
                        value: null
                    },
                    width: {
                        value: 0
                    },
                    height: {
                        value: 0
                    },
                    type: {
                        value: i.AUTO
                    },
                    autoPlay: {
                        value: !1
                    },
                    canShare: {
                        value: !0
                    },
                    showAlbumLink: {
                        value: !0
                    },
                    verticalCenter: {
                        value: !1
                    }
                }
            });
        e.namespace("SM.Views").Video = r
    }(), SM.currentModule = null
}, "", {
    requires: ["base", "view"]
});
YUI.add("sm-vimeo", function(e) {
    SM.currentModule = "sm-vimeo";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: !0
        });
        var e = SM["import"]("react"),
            t = function() {
                var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
                    r = t.center,
                    a = t.id,
                    o = t.width,
                    u = t.height,
                    l = t.autoplay,
                    i = l ? 1 : 0,
                    n = "https://player.vimeo.com/video/" + a + "?title=0&amp;byline=0&amp;portrait=0&amp;autoplay=" + i;
                return e.createElement("iframe", {
                    className: r ? "sm-vimeo-center" : "",
                    src: n,
                    width: o,
                    height: u,
                    frameBorder: "0",
                    webkitAllowFullScreen: !0,
                    allowFullScreen: !0
                })
            },
            r = e.PropTypes;
        t.propTypes = {
            center: r.bool,
            id: r.number.isRequired,
            width: r.number,
            height: r.number,
            autoplay: r.bool
        }, t.defaultProps = {
            width: "",
            height: "",
            autoplay: !1
        }, exports["default"] = t, module.exports = exports["default"]
    }(), SM.currentModule = null
}, "", {
    requires: ["sm", "react", "classnames"]
});
YUI.add("sm-youtube", function(e) {
    SM.currentModule = "sm-youtube";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: !0
        });
        var e = SM["import"]("react"),
            t = (SM["import"]("classnames"), function() {
                var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
                    r = t.center,
                    u = t.id,
                    l = t.playlistId,
                    a = t.width,
                    o = t.height,
                    s = t.autoplay,
                    i = "https://www.youtube.com/embed",
                    n = s ? 1 : 0;
                return l ? (u && (i += "/" + u), i += "?listType=playlist&list=" + l + "&") : i += "/" + u + "?", i += "rel=0&wmode=opaque&autoplay=" + n, e.createElement("iframe", {
                    className: r ? "sm-youtube-center" : "",
                    width: a,
                    height: o,
                    src: i,
                    frameBorder: "0",
                    allowFullScreen: !0
                })
            }),
            r = e.PropTypes;
        t.propTypes = {
            center: r.bool,
            id: r.string,
            playlistId: r.string,
            width: r.number,
            height: r.number,
            autoplay: r.bool
        }, t.defaultProps = {
            id: "",
            playlistId: "",
            width: "",
            height: "",
            autoplay: !1
        }, exports["default"] = t, module.exports = exports["default"]
    }(), SM.currentModule = null
}, "", {
    requires: ["sm", "react", "classnames"]
});
YUI.add("sm", function(r) {
    SM.currentModule = "sm";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";
        var e;
        SM["import"] = function(r) {
            var e = SM.modules[r];
            if (!e) throw new Error((SM.currentModule || "Non-module code") + " is trying to import " + r + ", but " + r + " has not been loaded.");
            return e.exports
        }, SM.load = function() {
            e || (e = SM["import"]("rsvp"));
            var o = {},
                n = Array.prototype.slice.call(arguments),
                t = [];
            n.forEach(function(r) {
                SM.modules[r] ? o[r] = SM.modules[r].exports : t.push(r)
            });
            var u;
            return u = t.length ? new e.Promise(function(e) {
                r.use(t, function() {
                    t.forEach(function(r) {
                        o[r] = SM["import"](r)
                    }), e(o)
                })
            }) : e.resolve(o), u.then(function(r) {
                return 1 === n.length ? r[n[0]] : r
            })
        }, module.exports = SM
    }(), SM.currentModule = null
}, "", {
    requires: ["rsvp"]
});
YUI.add("statuspage", function(e) {
    SM.currentModule = "statuspage";
    var exports = {},
        module = SM.modules[SM.currentModule] = {
            exports: exports,
            name: SM.currentModule
        };
    ! function() {
        "use strict";

        function e(e) {
            if (e = e || {}, !e.pageId) throw new Error("A pageId is required to initialize.");
            this.apiKey = e.apiKey || null, this.error = e.error || this.error, this.format = e.format || "json", this.pageId = e.pageId, this.version = e.version || "v1", this.secure = "secure" in e ? e.secure : !0, this.protocol = this.secure ? "https" : "http", this.host_with_port_and_protocol = e.test ? "" : this.protocol + "://hosted.statuspage.io"
        }
        Object.defineProperty(exports, "__esModule", {
            value: !0
        }), e.prototype.serialize = function(e, t) {
            var r = [];
            for (var o in e)
                if ("to_sentence" !== o) {
                    var s = t ? t + "[" + o + "]" : o,
                        i = e[o];
                    r.push("object" == ("undefined" == typeof i ? "undefined" : babelHelpers["typeof"](i)) ? this.serialize(i, s) : encodeURIComponent(s) + "=" + encodeURIComponent(i))
                }
            return r.join("&")
        }, e.prototype.createStatusPageCORSRequest = function(e, t) {
            var r = new XMLHttpRequest;
            return "withCredentials" in r ? r.open(e, t, !0) : "undefined" != typeof XDomainRequest ? (r = new XDomainRequest, r.open(e, t)) : r = null, r
        }, e.prototype.executeRequestAndCallbackWithResponse = function(e) {
            if (!e.path) throw new Error("A path is required to make a request");
            var t = e.path,
                r = e.method || "GET",
                o = e.success || null,
                s = e.error || this.error,
                i = this.host_with_port_and_protocol.replace("hosted", this.pageId) + "/api/" + this.version + "/" + t + "." + this.format,
                n = this.createStatusPageCORSRequest(r, i);
            if (n)
                if (this.apiKey && (console.log("!!! API KEY IN USE - REMOVE BEFORE DEPLOYING TO PRODUCTION !!!"), console.log("!!! API KEY IN USE - REMOVE BEFORE DEPLOYING TO PRODUCTION !!!"), console.log("!!! API KEY IN USE - REMOVE BEFORE DEPLOYING TO PRODUCTION !!!"), n.setRequestHeader("Authorization", "OAuth " + this.apiKey)), n.onload = function() {
                        var e = JSON.parse(n.responseText);
                        o && o(e)
                    }, n.error = s, "POST" === r || "DELETE" === r) {
                    var a = e.data || {};
                    n.setRequestHeader("Content-type", "application/x-www-form-urlencoded"), n.send(this.serialize(a))
                } else n.send()
        }, e.prototype.get = function(e, t) {
            if (t = t || {}, !e) throw new Error("Path is required.");
            if (!t.success) throw new Error("Success Callback is required.");
            var r = t.success || {},
                o = t.error || {};
            this.executeRequestAndCallbackWithResponse({
                path: e,
                success: r,
                error: o,
                method: "GET"
            })
        }, e.prototype.post = function(e, t) {
            if (t = t || {}, !e) throw new Error("Path is required.");
            if (!t.data) throw new Error("Data is required to post.");
            var r = t.data,
                o = t.success || {},
                s = t.error || {};
            this.executeRequestAndCallbackWithResponse({
                data: r,
                path: e,
                success: o,
                error: s,
                method: "POST"
            })
        }, e.prototype["delete"] = function(e, t) {
            if (t = t || {}, !e) throw new Error("Path is required.");
            if (!t.data) throw new Error("Data is required to post.");
            var r = t.data,
                o = t.success || {},
                s = t.error || {};
            this.executeRequestAndCallbackWithResponse({
                data: r,
                path: e,
                success: o,
                error: s,
                method: "DELETE"
            })
        }, e.prototype.error = function(e) {
            console.log("There was an error with your request")
        }, e.prototype.getSummary = function(e) {
            this.get("summary", e)
        }, e.prototype.getStatus = function(e) {
            this.get("status", e)
        }, e.prototype.getComponents = function(e) {
            this.get("components", e)
        }, e.prototype.getIncidents = function(e) {
            this.get("incidents", e)
        }, e.prototype.getUnresolvedIncidents = function(e) {
            this.get("incidents/unresolved", e)
        }, e.prototype.getScheduledMaintenances = function(e) {
            this.get("scheduled-maintenances", e)
        }, e.prototype.getActiveScheduledMaintenances = function(e) {
            this.get("scheduled-maintenances/active", e)
        }, e.prototype.getUpcomingScheduledMaintenances = function(e) {
            this.get("scheduled-maintenances/upcoming", e)
        }, e.prototype.subscribeToPage = function(e) {
            if (!e || !e.data || !e.data.subscriber) throw new Error("A subscriber object is required.");
            if (!e.data.subscriber.email && !e.data.subscriber.phone_number && !e.data.subscriber.webhook) throw new Error("You must supply a recipient (email address, phone number, or webhook url) in order to subscribe to the page.");
            this.post("subscribers", e)
        }, e.prototype.subscribeToIncident = function(e) {
            if (!e || !e.data || !e.data.subscriber) throw new Error("A subscriber object is required.");
            if (!e.data.subscriber.email && !e.data.subscriber.phone_number && !e.data.subscriber.incident_id) throw new Error("You must supply a recipient (email address, phone number, or webhook url) in order to subscribe to the page.");
            this.post("subscribers", e)
        }, e.prototype.unSubscribe = function(e) {
            if (!e || !e.data || !e.data.subscriber) throw new Error("A subscriber object is required.");
            if (!e.data.subscriber.id) throw new Error("You must supply a subscriber.id in order to cancel a subscription.");
            this["delete"]("subscribers", e)
        }, exports["default"] = e, module.exports = exports["default"]
    }(), SM.currentModule = null
}, "", {
    requires: []
});
YUI.add("anim-base", function(e, t) {
    var n = "running",
        r = "startTime",
        i = "elapsedTime",
        s = "start",
        o = "tween",
        u = "end",
        a = "node",
        f = "paused",
        l = "reverse",
        c = "iterationCount",
        h = Number,
        p = {},
        d;
    e.Anim = function() {
        e.Anim.superclass.constructor.apply(this, arguments), e.Anim._instances[e.stamp(this)] = this
    }, e.Anim.NAME = "anim", e.Anim._instances = {}, e.Anim.RE_DEFAULT_UNIT = /^width|height|top|right|bottom|left|margin.*|padding.*|border.*$/i, e.Anim.DEFAULT_UNIT = "px", e.Anim.DEFAULT_EASING = function(e, t, n, r) {
        return n * e / r + t
    }, e.Anim._intervalTime = 20, e.Anim.behaviors = {
        left: {
            get: function(e, t) {
                return e._getOffset(t)
            }
        }
    }, e.Anim.behaviors.top = e.Anim.behaviors.left, e.Anim.DEFAULT_SETTER = function(t, n, r, i, s, o, u, a) {
        var f = t._node,
            l = f._node,
            c = u(s, h(r), h(i) - h(r), o);
        l ? "style" in l && (n in l.style || n in e.DOM.CUSTOM_STYLES) ? (a = a || "", f.setStyle(n, c + a)) : "attributes" in l && n in l.attributes ? f.setAttribute(n, c) : n in l && (l[n] = c) : f.set ? f.set(n, c) : n in f && (f[n] = c)
    }, e.Anim.DEFAULT_GETTER = function(t, n) {
        var r = t._node,
            i = r._node,
            s = "";
        return i ? "style" in i && (n in i.style || n in e.DOM.CUSTOM_STYLES) ? s = r.getComputedStyle(n) : "attributes" in i && n in i.attributes ? s = r.getAttribute(n) : n in i && (s = i[n]) : r.get ? s = r.get(n) : n in r && (s = r[n]), s
    }, e.Anim.ATTRS = {
        node: {
            setter: function(t) {
                return t && (typeof t == "string" || t.nodeType) && (t = e.one(t)), this._node = t, !t, t
            }
        },
        duration: {
            value: 1
        },
        easing: {
            value: e.Anim.DEFAULT_EASING,
            setter: function(t) {
                if (typeof t == "string" && e.Easing) return e.Easing[t]
            }
        },
        from: {},
        to: {},
        startTime: {
            value: 0,
            readOnly: !0
        },
        elapsedTime: {
            value: 0,
            readOnly: !0
        },
        running: {
            getter: function() {
                return !!p[e.stamp(this)]
            },
            value: !1,
            readOnly: !0
        },
        iterations: {
            value: 1
        },
        iterationCount: {
            value: 0,
            readOnly: !0
        },
        direction: {
            value: "normal"
        },
        paused: {
            readOnly: !0,
            value: !1
        },
        reverse: {
            value: !1
        }
    }, e.Anim.run = function() {
        var t = e.Anim._instances,
            n;
        for (n in t) t[n].run && t[n].run()
    }, e.Anim.pause = function() {
        for (var t in p) p[t].pause && p[t].pause();
        e.Anim._stopTimer()
    }, e.Anim.stop = function() {
        for (var t in p) p[t].stop && p[t].stop();
        e.Anim._stopTimer()
    }, e.Anim._startTimer = function() {
        d || (d = setInterval(e.Anim._runFrame, e.Anim._intervalTime))
    }, e.Anim._stopTimer = function() {
        clearInterval(d), d = 0
    }, e.Anim._runFrame = function() {
        var t = !0,
            n;
        for (n in p) p[n]._runFrame && (t = !1, p[n]._runFrame());
        t && e.Anim._stopTimer()
    }, e.Anim.RE_UNITS = /^(-?\d*\.?\d*){1}(em|ex|px|in|cm|mm|pt|pc|%)*$/;
    var v = {
        run: function() {
            return this.get(f) ? this._resume() : this.get(n) || this._start(), this
        },
        pause: function() {
            return this.get(n) && this._pause(), this
        },
        stop: function(e) {
            return (this.get(n) || this.get(f)) && this._end(e), this
        },
        _added: !1,
        _start: function() {
            this._set(r, new Date - this.get(i)), this._actualFrames = 0, this.get(f) || this._initAnimAttr(), p[e.stamp(this)] = this, e.Anim._startTimer(), this.fire(s)
        },
        _pause: function() {
            this._set(r, null), this._set(f, !0), delete p[e.stamp(this)], this.fire("pause")
        },
        _resume: function() {
            this._set(f, !1), p[e.stamp(this)] = this, this._set(r, new Date - this.get(i)), e.Anim._startTimer(), this.fire("resume")
        },
        _end: function(t) {
            var n = this.get("duration") * 1e3;
            t && this._runAttrs(n, n, this.get(l)), this._set(r, null), this._set(i, 0), this._set(f, !1), delete p[e.stamp(this)], this.fire(u, {
                elapsed: this.get(i)
            })
        },
        _runFrame: function() {
            var e = this._runtimeAttr.duration,
                t = new Date - this.get(r),
                n = this.get(l),
                s = t >= e;
            this._runAttrs(t, e, n), this._actualFrames += 1, this._set(i, t), this.fire(o), s && this._lastFrame()
        },
        _runAttrs: function(t, n, r) {
            var i = this._runtimeAttr,
                s = e.Anim.behaviors,
                o = i.easing,
                u = n,
                a = !1,
                f, l, c;
            t >= n && (a = !0), r && (t = n - t, u = 0);
            for (c in i) i[c].to && (f = i[c], l = c in s && "set" in s[c] ? s[c].set : e.Anim.DEFAULT_SETTER, a ? l(this, c, f.from, f.to, u, n, o, f.unit) : l(this, c, f.from, f.to, t, n, o, f.unit))
        },
        _lastFrame: function() {
            var e = this.get("iterations"),
                t = this.get(c);
            t += 1, e === "infinite" || t < e ? (this.get("direction") === "alternate" && this.set(l, !this.get(l)), this.fire("iteration")) : (t = 0, this._end()), this._set(r, new Date), this._set(c, t)
        },
        _initAnimAttr: function() {
            var t = this.get("from") || {},
                n = this.get("to") || {},
                r = {
                    duration: this.get("duration") * 1e3,
                    easing: this.get("easing")
                },
                i = e.Anim.behaviors,
                s = this.get(a),
                o, u, f;
            e.each(n, function(n, a) {
                typeof n == "function" && (n = n.call(this, s)), u = t[a], u === undefined ? u = a in i && "get" in i[a] ? i[a].get(this, a) : e.Anim.DEFAULT_GETTER(this, a) : typeof u == "function" && (u = u.call(this, s));
                var l = e.Anim.RE_UNITS.exec(u),
                    c = e.Anim.RE_UNITS.exec(n);
                u = l ? l[1] : u, f = c ? c[1] : n, o = c ? c[2] : l ? l[2] : "", !o && e.Anim.RE_DEFAULT_UNIT.test(a) && (o = e.Anim.DEFAULT_UNIT);
                if (!u || !f) {
                    e.error('invalid "from" or "to" for "' + a + '"', "Anim");
                    return
                }
                r[a] = {
                    from: e.Lang.isObject(u) ? e.clone(u) : u,
                    to: f,
                    unit: o
                }
            }, this), this._runtimeAttr = r
        },
        _getOffset: function(e) {
            var t = this._node,
                n = t.getComputedStyle(e),
                r = e === "left" ? "getX" : "getY",
                i = e === "left" ? "setX" : "setY",
                s;
            return n === "auto" && (s = t.getStyle("position"), s === "absolute" || s === "fixed" ? (n = t[r](), t[i](n)) : n = 0), n
        },
        destructor: function() {
            delete e.Anim._instances[e.stamp(this)]
        }
    };
    e.extend(e.Anim, e.Base, v)
}, "@VERSION@", {
    requires: ["base-base", "node-style"]
});
YUI.add("anim-color", function(e, t) {
    var n = Number;
    e.Anim.getUpdatedColorValue = function(t, r, i, s, o) {
        return t = e.Color.re_RGB.exec(e.Color.toRGB(t)), r = e.Color.re_RGB.exec(e.Color.toRGB(r)), (!t || t.length < 3 || !r || r.length < 3) && e.error("invalid from or to passed to color behavior"), "rgb(" + [Math.floor(o(i, n(t[1]), n(r[1]) - n(t[1]), s)), Math.floor(o(i, n(t[2]), n(r[2]) - n(t[2]), s)), Math.floor(o(i, n(t[3]), n(r[3]) - n(t[3]), s))].join(", ") + ")"
    }, e.Anim.behaviors.color = {
        set: function(t, n, r, i, s, o, u) {
            t._node.setStyle(n, e.Anim.getUpdatedColorValue(r, i, s, o, u))
        },
        get: function(e, t) {
            var n = e._node.getComputedStyle(t);
            return n = n === "transparent" ? "rgb(255, 255, 255)" : n, n
        }
    }, e.each(["backgroundColor", "borderColor", "borderTopColor", "borderRightColor", "borderBottomColor", "borderLeftColor"], function(t) {
        e.Anim.behaviors[t] = e.Anim.behaviors.color
    })
}, "@VERSION@", {
    requires: ["anim-base"]
});
YUI.add("anim-curve", function(e, t) {
    e.Anim.behaviors.curve = {
        set: function(t, n, r, i, s, o, u) {
            r = r.slice.call(r), i = i.slice.call(i);
            var a = u(s, 0, 100, o) / 100;
            i.unshift(r), t._node.setXY(e.Anim.getBezier(i, a))
        },
        get: function(e) {
            return e._node.getXY()
        }
    }, e.Anim.getBezier = function(e, t) {
        var n = e.length,
            r = [],
            i, s;
        for (i = 0; i < n; ++i) r[i] = [e[i][0], e[i][1]];
        for (s = 1; s < n; ++s)
            for (i = 0; i < n - s; ++i) r[i][0] = (1 - t) * r[i][0] + t * r[parseInt(i + 1, 10)][0], r[i][1] = (1 - t) * r[i][1] + t * r[parseInt(i + 1, 10)][1];
        return [r[0][0], r[0][1]]
    }
}, "@VERSION@", {
    requires: ["anim-xy"]
});
YUI.add("anim-easing", function(e, t) {
    var n = {
        easeNone: function(e, t, n, r) {
            return n * e / r + t
        },
        easeIn: function(e, t, n, r) {
            return n * (e /= r) * e + t
        },
        easeOut: function(e, t, n, r) {
            return -n * (e /= r) * (e - 2) + t
        },
        easeBoth: function(e, t, n, r) {
            return (e /= r / 2) < 1 ? n / 2 * e * e + t : -n / 2 * (--e * (e - 2) - 1) + t
        },
        easeInStrong: function(e, t, n, r) {
            return n * (e /= r) * e * e * e + t
        },
        easeOutStrong: function(e, t, n, r) {
            return -n * ((e = e / r - 1) * e * e * e - 1) + t
        },
        easeBothStrong: function(e, t, n, r) {
            return (e /= r / 2) < 1 ? n / 2 * e * e * e * e + t : -n / 2 * ((e -= 2) * e * e * e - 2) + t
        },
        elasticIn: function(e, t, n, r, i, s) {
            var o;
            return e === 0 ? t : (e /= r) === 1 ? t + n : (s || (s = r * .3), !i || i < Math.abs(n) ? (i = n, o = s / 4) : o = s / (2 * Math.PI) * Math.asin(n / i), -(i * Math.pow(2, 10 * (e -= 1)) * Math.sin((e * r - o) * 2 * Math.PI / s)) + t)
        },
        elasticOut: function(e, t, n, r, i, s) {
            var o;
            return e === 0 ? t : (e /= r) === 1 ? t + n : (s || (s = r * .3), !i || i < Math.abs(n) ? (i = n, o = s / 4) : o = s / (2 * Math.PI) * Math.asin(n / i), i * Math.pow(2, -10 * e) * Math.sin((e * r - o) * 2 * Math.PI / s) + n + t)
        },
        elasticBoth: function(e, t, n, r, i, s) {
            var o;
            return e === 0 ? t : (e /= r / 2) === 2 ? t + n : (s || (s = r * .3 * 1.5), !i || i < Math.abs(n) ? (i = n, o = s / 4) : o = s / (2 * Math.PI) * Math.asin(n / i), e < 1 ? -0.5 * i * Math.pow(2, 10 * (e -= 1)) * Math.sin((e * r - o) * 2 * Math.PI / s) + t : i * Math.pow(2, -10 * (e -= 1)) * Math.sin((e * r - o) * 2 * Math.PI / s) * .5 + n + t)
        },
        backIn: function(e, t, n, r, i) {
            return i === undefined && (i = 1.70158), e === r && (e -= .001), n * (e /= r) * e * ((i + 1) * e - i) + t
        },
        backOut: function(e, t, n, r, i) {
            return typeof i == "undefined" && (i = 1.70158), n * ((e = e / r - 1) * e * ((i + 1) * e + i) + 1) + t
        },
        backBoth: function(e, t, n, r, i) {
            return typeof i == "undefined" && (i = 1.70158), (e /= r / 2) < 1 ? n / 2 * e * e * (((i *= 1.525) + 1) * e - i) + t : n / 2 * ((e -= 2) * e * (((i *= 1.525) + 1) * e + i) + 2) + t
        },
        bounceIn: function(t, n, r, i) {
            return r - e.Easing.bounceOut(i - t, 0, r, i) + n
        },
        bounceOut: function(e, t, n, r) {
            return (e /= r) < 1 / 2.75 ? n * 7.5625 * e * e + t : e < 2 / 2.75 ? n * (7.5625 * (e -= 1.5 / 2.75) * e + .75) + t : e < 2.5 / 2.75 ? n * (7.5625 * (e -= 2.25 / 2.75) * e + .9375) + t : n * (7.5625 * (e -= 2.625 / 2.75) * e + .984375) + t
        },
        bounceBoth: function(t, n, r, i) {
            return t < i / 2 ? e.Easing.bounceIn(t * 2, 0, r, i) * .5 + n : e.Easing.bounceOut(t * 2 - i, 0, r, i) * .5 + r * .5 + n
        }
    };
    e.Easing = n
}, "@VERSION@", {
    requires: ["anim-base"]
});
YUI.add("anim-node-plugin", function(e, t) {
    var n = function(t) {
        t = t ? e.merge(t) : {}, t.node = t.host, n.superclass.constructor.apply(this, arguments)
    };
    n.NAME = "nodefx", n.NS = "fx", e.extend(n, e.Anim), e.namespace("Plugin"), e.Plugin.NodeFX = n
}, "@VERSION@", {
    requires: ["node-pluginhost", "anim-base"]
});
YUI.add("anim-scroll", function(e, t) {
    var n = Number;
    e.Anim.behaviors.scroll = {
        set: function(e, t, r, i, s, o, u) {
            var a = e._node,
                f = [u(s, n(r[0]), n(i[0]) - n(r[0]), o), u(s, n(r[1]), n(i[1]) - n(r[1]), o)];
            f[0] && a.set("scrollLeft", f[0]), f[1] && a.set("scrollTop", f[1])
        },
        get: function(e) {
            var t = e._node;
            return [t.get("scrollLeft"), t.get("scrollTop")]
        }
    }
}, "@VERSION@", {
    requires: ["anim-base"]
});
YUI.add("anim-xy", function(e, t) {
    var n = Number;
    e.Anim.behaviors.xy = {
        set: function(e, t, r, i, s, o, u) {
            e._node.setXY([u(s, n(r[0]), n(i[0]) - n(r[0]), o), u(s, n(r[1]), n(i[1]) - n(r[1]), o)])
        },
        get: function(e) {
            return e._node.getXY()
        }
    }
}, "@VERSION@", {
    requires: ["anim-base", "node-screen"]
});
YUI.add("array-extras", function(e, t) {
    var n = e.Array,
        r = e.Lang,
        i = Array.prototype;
    n.lastIndexOf = r._isNative(i.lastIndexOf) ? function(e, t, n) {
        return n || n === 0 ? e.lastIndexOf(t, n) : e.lastIndexOf(t)
    } : function(e, t, n) {
        var r = e.length,
            i = r - 1;
        if (n || n === 0) i = Math.min(n < 0 ? r + n : n, r);
        if (i > -1 && r > 0)
            for (; i > -1; --i)
                if (i in e && e[i] === t) return i;
        return -1
    }, n.unique = function(e, t) {
        var n = 0,
            r = e.length,
            i = [],
            s, o, u, a;
        e: for (; n < r; n++) {
            a = e[n];
            for (s = 0, u = i.length; s < u; s++) {
                o = i[s];
                if (t) {
                    if (t.call(e, a, o, n, e)) continue e
                } else if (a === o) continue e
            }
            i.push(a)
        }
        return i
    }, n.filter = r._isNative(i.filter) ? function(e, t, n) {
        return i.filter.call(e, t, n)
    } : function(e, t, n) {
        var r = 0,
            i = e.length,
            s = [],
            o;
        for (; r < i; ++r) r in e && (o = e[r], t.call(n, o, r, e) && s.push(o));
        return s
    }, n.reject = function(e, t, r) {
        return n.filter(e, function(e, n, i) {
            return !t.call(r, e, n, i)
        })
    }, n.every = r._isNative(i.every) ? function(e, t, n) {
        return i.every.call(e, t, n)
    } : function(e, t, n) {
        for (var r = 0, i = e.length; r < i; ++r)
            if (r in e && !t.call(n, e[r], r, e)) return !1;
        return !0
    }, n.map = r._isNative(i.map) ? function(e, t, n) {
        return i.map.call(e, t, n)
    } : function(e, t, n) {
        var r = 0,
            s = e.length,
            o = i.concat.call(e);
        for (; r < s; ++r) r in e && (o[r] = t.call(n, e[r], r, e));
        return o
    }, n.reduce = r._isNative(i.reduce) ? function(e, t, n, r) {
        return i.reduce.call(e, function(e, t, i, s) {
            return n.call(r, e, t, i, s)
        }, t)
    } : function(e, t, n, r) {
        var i = 0,
            s = e.length,
            o = t;
        for (; i < s; ++i) i in e && (o = n.call(r, o, e[i], i, e));
        return o
    }, n.find = function(e, t, n) {
        for (var r = 0, i = e.length; r < i; r++)
            if (r in e && t.call(n, e[r], r, e)) return e[r];
        return null
    }, n.grep = function(e, t) {
        return n.filter(e, function(e, n) {
            return t.test(e)
        })
    }, n.partition = function(e, t, r) {
        var i = {
            matches: [],
            rejects: []
        };
        return n.each(e, function(n, s) {
            var u = t.call(r, n, s, e) ? i.matches : i.rejects;
            u.push(n)
        }), i
    }, n.zip = function(e, t) {
        var r = [];
        return n.each(e, function(e, n) {
            r.push([e, t[n]])
        }), r
    }, n.flatten = function(e) {
        var t = [],
            i, s, o;
        if (!e) return t;
        for (i = 0, s = e.length; i < s; ++i) o = e[i], r.isArray(o) ? t.push.apply(t, n.flatten(o)) : t.push(o);
        return t
    }
}, "@VERSION@", {
    requires: ["yui-base"]
});
YUI.add("array-invoke", function(e, t) {
    e.Array.invoke = function(t, n) {
        var r = e.Array(arguments, 2, !0),
            i = e.Lang.isFunction,
            s = [];
        return e.Array.each(e.Array(t), function(e, t) {
            e && i(e[n]) && (s[t] = e[n].apply(e, r))
        }), s
    }
}, "@VERSION@", {
    requires: ["yui-base"]
});
YUI.add("arraylist", function(e, t) {
    function s(t) {
        t !== undefined ? this._items = e.Lang.isArray(t) ? t : n(t) : this._items = this._items || []
    }
    var n = e.Array,
        r = n.each,
        i;
    i = {
        item: function(e) {
            return this._items[e]
        },
        each: function(e, t) {
            return r(this._items, function(n, r) {
                n = this.item(r), e.call(t || n, n, r, this)
            }, this), this
        },
        some: function(e, t) {
            return n.some(this._items, function(n, r) {
                return n = this.item(r), e.call(t || n, n, r, this)
            }, this)
        },
        indexOf: function(e) {
            return n.indexOf(this._items, e)
        },
        size: function() {
            return this._items.length
        },
        isEmpty: function() {
            return !this.size()
        },
        toJSON: function() {
            return this._items
        }
    }, i._item = i.item, e.mix(s.prototype, i), e.mix(s, {
        addMethod: function(e, t) {
            t = n(t), r(t, function(t) {
                e[t] = function() {
                    var e = n(arguments, 0, !0),
                        i = [];
                    return r(this._items, function(n, r) {
                        n = this._item(r);
                        var s = n[t].apply(n, e);
                        s !== undefined && s !== n && (i[r] = s)
                    }, this), i.length ? i : this
                }
            })
        }
    }), e.ArrayList = s
}, "@VERSION@", {
    requires: ["yui-base"]
});
YUI.add("async-queue", function(e, t) {
    e.AsyncQueue = function() {
        this._init(), this.add.apply(this, arguments)
    };
    var n = e.AsyncQueue,
        r = "execute",
        i = "shift",
        s = "promote",
        o = "remove",
        u = e.Lang.isObject,
        a = e.Lang.isFunction;
    n.defaults = e.mix({
        autoContinue: !0,
        iterations: 1,
        timeout: 10,
        until: function() {
            return this.iterations |= 0, this.iterations <= 0
        }
    }, e.config.queueDefaults || {}), e.extend(n, e.EventTarget, {
        _running: !1,
        _init: function() {
            e.EventTarget.call(this, {
                prefix: "queue",
                emitFacade: !0
            }), this._q = [], this.defaults = {}, this._initEvents()
        },
        _initEvents: function() {
            this.publish({
                execute: {
                    defaultFn: this._defExecFn,
                    emitFacade: !0
                },
                shift: {
                    defaultFn: this._defShiftFn,
                    emitFacade: !0
                },
                add: {
                    defaultFn: this._defAddFn,
                    emitFacade: !0
                },
                promote: {
                    defaultFn: this._defPromoteFn,
                    emitFacade: !0
                },
                remove: {
                    defaultFn: this._defRemoveFn,
                    emitFacade: !0
                }
            })
        },
        next: function() {
            var e;
            while (this._q.length) {
                e = this._q[0] = this._prepare(this._q[0]);
                if (!e || !e.until()) break;
                this.fire(i, {
                    callback: e
                }), e = null
            }
            return e || null
        },
        _defShiftFn: function(e) {
            this.indexOf(e.callback) === 0 && this._q.shift()
        },
        _prepare: function(t) {
            if (a(t) && t._prepared) return t;
            var r = e.merge(n.defaults, {
                    context: this,
                    args: [],
                    _prepared: !0
                }, this.defaults, a(t) ? {
                    fn: t
                } : t),
                i = e.bind(function() {
                    i._running || i.iterations--, a(i.fn) && i.fn.apply(i.context || e, e.Array(i.args))
                }, this);
            return e.mix(i, r)
        },
        run: function() {
            var e, t = !0;
            if (this._executing) return this._running = !0, this;
            for (e = this.next(); e && !this.isRunning(); e = this.next()) {
                t = e.timeout < 0 ? this._execute(e) : this._schedule(e);
                if (!t) break
            }
            return e || this.fire("complete"), this
        },
        _execute: function(e) {
            this._running = e._running = !0, this._executing = e, e.iterations--, this.fire(r, {
                callback: e
            });
            var t = this._running && e.autoContinue;
            return this._running = e._running = !1, this._executing = !1, t
        },
        _schedule: function(t) {
            return this._running = e.later(t.timeout, this, function() {
                this._execute(t) && this.run()
            }), !1
        },
        isRunning: function() {
            return !!this._running
        },
        _defExecFn: function(e) {
            e.callback()
        },
        add: function() {
            return this.fire("add", {
                callbacks: e.Array(arguments, 0, !0)
            }), this
        },
        _defAddFn: function(t) {
            var n = this._q,
                r = [];
            e.Array.each(t.callbacks, function(e) {
                u(e) && (n.push(e), r.push(e))
            }), t.added = r
        },
        pause: function() {
            return this._running && u(this._running) && this._running.cancel(), this._running = !1, this
        },
        stop: function() {
            return this._q = [], this._running && u(this._running) && (this._running.cancel(), this._running = !1), this._executing || this.run(), this
        },
        indexOf: function(e) {
            var t = 0,
                n = this._q.length,
                r;
            for (; t < n; ++t) {
                r = this._q[t];
                if (r === e || r.id === e) return t
            }
            return -1
        },
        getCallback: function(e) {
            var t = this.indexOf(e);
            return t > -1 ? this._q[t] : null
        },
        promote: function(e) {
            var t = {
                    callback: e
                },
                n;
            return this.isRunning() ? n = this.after(i, function() {
                this.fire(s, t), n.detach()
            }, this) : this.fire(s, t), this
        },
        _defPromoteFn: function(e) {
            var t = this.indexOf(e.callback),
                n = t > -1 ? this._q.splice(t, 1)[0] : null;
            e.promoted = n, n && this._q.unshift(n)
        },
        remove: function(e) {
            var t = {
                    callback: e
                },
                n;
            return this.isRunning() ? n = this.after(i, function() {
                this.fire(o, t), n.detach()
            }, this) : this.fire(o, t), this
        },
        _defRemoveFn: function(e) {
            var t = this.indexOf(e.callback);
            e.removed = t > -1 ? this._q.splice(t, 1)[0] : null
        },
        size: function() {
            return this.isRunning() || this.next(), this._q.length
        }
    })
}, "@VERSION@", {
    requires: ["event-custom"]
});
YUI.add("attribute-base", function(e, t) {
    function n() {
        e.AttributeCore.apply(this, arguments), e.AttributeObservable.apply(this, arguments), e.AttributeExtras.apply(this, arguments)
    }
    e.mix(n, e.AttributeCore, !1, null, 1), e.mix(n, e.AttributeExtras, !1, null, 1), e.mix(n, e.AttributeObservable, !0, null, 1), n.INVALID_VALUE = e.AttributeCore.INVALID_VALUE, n._ATTR_CFG = e.AttributeCore._ATTR_CFG.concat(e.AttributeObservable._ATTR_CFG), n.protectAttrs = e.AttributeCore.protectAttrs, e.Attribute = n
}, "@VERSION@", {
    requires: ["attribute-core", "attribute-observable", "attribute-extras"]
});
YUI.add("attribute-complex", function(e, t) {
    var n = e.Attribute;
    n.Complex = function() {}, n.Complex.prototype = {
        _normAttrVals: n.prototype._normAttrVals,
        _getAttrInitVal: n.prototype._getAttrInitVal
    }, e.AttributeComplex = n.Complex
}, "@VERSION@", {
    requires: ["attribute-base"]
});
YUI.add("attribute-core", function(e, t) {
    function b(e, t, n) {
        this._yuievt = null, this._initAttrHost(e, t, n)
    }
    e.State = function() {
        this.data = {}
    }, e.State.prototype = {
        add: function(e, t, n) {
            var r = this.data[e];
            r || (r = this.data[e] = {}), r[t] = n
        },
        addAll: function(e, t) {
            var n = this.data[e],
                r;
            n || (n = this.data[e] = {});
            for (r in t) t.hasOwnProperty(r) && (n[r] = t[r])
        },
        remove: function(e, t) {
            var n = this.data[e];
            n && delete n[t]
        },
        removeAll: function(t, n) {
            var r;
            n ? e.each(n, function(e, n) {
                this.remove(t, typeof n == "string" ? n : e)
            }, this) : (r = this.data, t in r && delete r[t])
        },
        get: function(e, t) {
            var n = this.data[e];
            if (n) return n[t]
        },
        getAll: function(e, t) {
            var n = this.data[e],
                r, i;
            if (t) i = n;
            else if (n) {
                i = {};
                for (r in n) n.hasOwnProperty(r) && (i[r] = n[r])
            }
            return i
        }
    };
    var n = e.Object,
        r = e.Lang,
        i = ".",
        s = "getter",
        o = "setter",
        u = "readOnly",
        a = "writeOnce",
        f = "initOnly",
        l = "validator",
        c = "value",
        h = "valueFn",
        p = "lazyAdd",
        d = "added",
        v = "_bypassProxy",
        m = "initValue",
        g = "lazy",
        y;
    b.INVALID_VALUE = {}, y = b.INVALID_VALUE, b._ATTR_CFG = [o, s, l, c, h, a, u, p, v], b.protectAttrs = function(t) {
        if (t) {
            t = e.merge(t);
            for (var n in t) t.hasOwnProperty(n) && (t[n] = e.merge(t[n]))
        }
        return t
    }, b.prototype = {
        _initAttrHost: function(t, n, r) {
            this._state = new e.State, this._initAttrs(t, n, r)
        },
        addAttr: function(e, t, n) {
            var r = this,
                i = r._state,
                s = i.data,
                o, u, a;
            t = t || {}, p in t && (n = t[p]), u = i.get(e, d);
            if (n && !u) i.data[e] = {
                lazy: t,
                added: !0
            };
            else if (!u || t.isLazyAdd) a = c in t, a && (o = t.value, t.value = undefined), t.added = !0, t.initializing = !0, s[e] = t, a && r.set(e, o), t.initializing = !1;
            return r
        },
        attrAdded: function(e) {
            return !!this._state.get(e, d)
        },
        get: function(e) {
            return this._getAttr(e)
        },
        _isLazyAttr: function(e) {
            return this._state.get(e, g)
        },
        _addLazyAttr: function(e, t) {
            var n = this._state;
            t = t || n.get(e, g), t && (n.data[e].lazy = undefined, t.isLazyAdd = !0, this.addAttr(e, t))
        },
        set: function(e, t, n) {
            return this._setAttr(e, t, n)
        },
        _set: function(e, t, n) {
            return this._setAttr(e, t, n, !0)
        },
        _setAttr: function(t, r, s, o) {
            var u = !0,
                a = this._state,
                l = this._stateProxy,
                c = this._tCfgs,
                h, p, d, v, m, g, y;
            return t.indexOf(i) !== -1 && (d = t, v = t.split(i), t = v.shift()), c && c[t] && this._addOutOfOrder(t, c[t]), h = a.data[t] || {}, h.lazy && (h = h.lazy, this._addLazyAttr(t, h)), p = h.value === undefined, l && t in l && !h._bypassProxy && (p = !1), g = h.writeOnce, y = h.initializing, !p && !o && (g && (u = !1), h.readOnly && (u = !1)), !y && !o && g === f && (u = !1), u && (p || (m = this.get(t)), v && (r = n.setValue(e.clone(m), v, r), r === undefined && (u = !1)), u && (!this._fireAttrChange || y ? this._setAttrVal(t, d, m, r, s, h) : this._fireAttrChange(t, d, m, r, s, h))), this
        },
        _addOutOfOrder: function(e, t) {
            var n = {};
            n[e] = t, delete this._tCfgs[e], this._addAttrs(n, this._tVals)
        },
        _getAttr: function(e) {
            var t = e,
                r = this._tCfgs,
                s, o, u, a;
            return e.indexOf(i) !== -1 && (s = e.split(i), e = s.shift()), r && r[e] && this._addOutOfOrder(e, r[e]), a = this._state.data[e] || {}, a.lazy && (a = a.lazy, this._addLazyAttr(e, a)), u = this._getStateVal(e, a), o = a.getter, o && !o.call && (o = this[o]), u = o ? o.call(this, u, t) : u, u = s ? n.getValue(u, s) : u, u
        },
        _getStateVal: function(e, t) {
            var n = this._stateProxy;
            return t || (t = this._state.getAll(e) || {}), n && e in n && !t._bypassProxy ? n[e] : t.value
        },
        _setStateVal: function(e, t) {
            var n = this._stateProxy;
            n && e in n && !this._state.get(e, v) ? n[e] = t : this._state.add(e, c, t)
        },
        _setAttrVal: function(e, t, n, i, s, o) {
            var u = this,
                a = !0,
                f = o || this._state.data[e] || {},
                l = f.validator,
                c = f.setter,
                h = f.initializing,
                p = this._getStateVal(e, f),
                d = t || e,
                v, g;
            return l && (l.call || (l = this[l]), l && (g = l.call(u, i, d, s), !g && h && (i = f.defaultValue, g = !0))), !l || g ? (c && (c.call || (c = this[c]), c && (v = c.call(u, i, d, s), v === y ? h ? i = f.defaultValue : a = !1 : v !== undefined && (i = v))), a && (!t && i === p && !r.isObject(i) ? a = !1 : (m in f || (f.initValue = i), u._setStateVal(e, i)))) : a = !1, a
        },
        setAttrs: function(e, t) {
            return this._setAttrs(e, t)
        },
        _setAttrs: function(e, t) {
            var n;
            for (n in e) e.hasOwnProperty(n) && this.set(n, e[n], t);
            return this
        },
        getAttrs: function(e) {
            return this._getAttrs(e)
        },
        _getAttrs: function(e) {
            var t = {},
                r, i, s, o = e === !0;
            if (!e || o) e = n.keys(this._state.data);
            for (i = 0, s = e.length; i < s; i++) {
                r = e[i];
                if (!o || this._getStateVal(r) != this._state.get(r, m)) t[r] = this.get(r)
            }
            return t
        },
        addAttrs: function(e, t, n) {
            return e && (this._tCfgs = e, this._tVals = t ? this._normAttrVals(t) : null, this._addAttrs(e, this._tVals, n), this._tCfgs = this._tVals = null), this
        },
        _addAttrs: function(e, t, n) {
            var r = this._tCfgs,
                i = this._tVals,
                s, o, u;
            for (s in e) e.hasOwnProperty(s) && (o = e[s], o.defaultValue = o.value, u = this._getAttrInitVal(s, o, i), u !== undefined && (o.value = u), r[s] && (r[s] = undefined), this.addAttr(s, o, n))
        },
        _protectAttrs: b.protectAttrs,
        _normAttrVals: function(e) {
            var t, n, r, s, o, u;
            if (!e) return null;
            t = {};
            for (u in e) e.hasOwnProperty(u) && (u.indexOf(i) !== -1 ? (r = u.split(i), s = r.shift(), n = n || {}, o = n[s] = n[s] || [], o[o.length] = {
                path: r,
                value: e[u]
            }) : t[u] = e[u]);
            return {
                simple: t,
                complex: n
            }
        },
        _getAttrInitVal: function(e, t, r) {
            var i = t.value,
                s = t.valueFn,
                o, u = !1,
                a = t.readOnly,
                f, l, c, h, p, d, v;
            !a && r && (f = r.simple, f && f.hasOwnProperty(e) && (i = f[e], u = !0)), s && !u && (s.call || (s = this[s]), s && (o = s.call(this, e), i = o));
            if (!a && r) {
                l = r.complex;
                if (l && l.hasOwnProperty(e) && i !== undefined && i !== null) {
                    v = l[e];
                    for (c = 0, h = v.length; c < h; ++c) p = v[c].path, d = v[c].value, n.setValue(i, p, d)
                }
            }
            return i
        },
        _initAttrs: function(t, n, r) {
            t = t || this.constructor.ATTRS;
            var i = e.Base,
                s = e.BaseCore,
                o = i && e.instanceOf(this, i),
                u = !o && s && e.instanceOf(this, s);
            t && !o && !u && this.addAttrs(e.AttributeCore.protectAttrs(t), n, r)
        }
    }, e.AttributeCore = b
}, "@VERSION@", {
    requires: ["oop"]
});
YUI.add("attribute-extras", function(e, t) {
    function o() {}
    var n = "broadcast",
        r = "published",
        i = "initValue",
        s = {
            readOnly: 1,
            writeOnce: 1,
            getter: 1,
            broadcast: 1
        };
    o.prototype = {
        modifyAttr: function(e, t) {
            var i = this,
                o, u;
            if (i.attrAdded(e)) {
                i._isLazyAttr(e) && i._addLazyAttr(e), u = i._state;
                for (o in t) s[o] && t.hasOwnProperty(o) && (u.add(e, o, t[o]), o === n && u.remove(e, r))
            }
        },
        removeAttr: function(e) {
            this._state.removeAll(e)
        },
        reset: function(t) {
            var n = this;
            return t ? (n._isLazyAttr(t) && n._addLazyAttr(t), n.set(t, n._state.get(t, i))) : e.Object.each(n._state.data, function(e, t) {
                n.reset(t)
            }), n
        },
        _getAttrCfg: function(t) {
            var n, r = this._state;
            return t ? n = r.getAll(t) || {} : (n = {}, e.each(r.data, function(e, t) {
                n[t] = r.getAll(t)
            })), n
        }
    }, e.AttributeExtras = o
}, "@VERSION@", {
    requires: ["oop"]
});
YUI.add("attribute-observable", function(e, t) {
    function s() {
        this._ATTR_E_FACADE = {}, n.call(this, {
            emitFacade: !0
        })
    }
    var n = e.EventTarget,
        r = "Change",
        i = "broadcast";
    s._ATTR_CFG = [i], s.prototype = {
        set: function(e, t, n) {
            return this._setAttr(e, t, n)
        },
        _set: function(e, t, n) {
            return this._setAttr(e, t, n, !0)
        },
        setAttrs: function(e, t) {
            return this._setAttrs(e, t)
        },
        _setAttrs: function(e, t) {
            var n;
            for (n in e) e.hasOwnProperty(n) && this.set(n, e[n], t);
            return this
        },
        _fireAttrChange: function(t, n, i, s, o, u) {
            var a = this,
                f = this._getFullType(t + r),
                l = a._state,
                c, h, p;
            u || (u = l.data[t] || {}), u.published || (p = a._publish(f), p.emitFacade = !0, p.defaultTargetOnly = !0, p.defaultFn = a._defAttrChangeFn, h = u.broadcast, h !== undefined && (p.broadcast = h), u.published = !0), o ? (c = e.merge(o), c._attrOpts = o) : c = a._ATTR_E_FACADE, c.attrName = t, c.subAttrName = n, c.prevVal = i, c.newVal = s, a._hasPotentialSubscribers(f) ? a.fire(f, c) : this._setAttrVal(t, n, i, s, o, u)
        },
        _defAttrChangeFn: function(e, t) {
            var n = e._attrOpts;
            n && delete e._attrOpts, this._setAttrVal(e.attrName, e.subAttrName, e.prevVal, e.newVal, n) ? t || (e.newVal = this.get(e.attrName)) : t || e.stopImmediatePropagation()
        }
    }, e.mix(s, n, !1, null, 1), e.AttributeObservable = s, e.AttributeEvents = s
}, "@VERSION@", {
    requires: ["event-custom"]
});
YUI.add("base-base", function(e, t) {
    function o() {
        i.apply(this, arguments), s.apply(this, arguments), r.apply(this, arguments)
    }
    var n = e.AttributeCore,
        r = e.AttributeExtras,
        i = e.BaseCore,
        s = e.BaseObservable;
    o._ATTR_CFG = i._ATTR_CFG.concat(s._ATTR_CFG), o._NON_ATTRS_CFG = i._NON_ATTRS_CFG.concat(s._NON_ATTRS_CFG), o.NAME = "base", o.ATTRS = n.protectAttrs(i.ATTRS), o.modifyAttrs = i.modifyAttrs, e.mix(o, i, !1, null, 1), e.mix(o, r, !1, null, 1), e.mix(o, s, !0, null, 1), o.prototype.constructor = o, e.Base = o
}, "@VERSION@", {
    requires: ["attribute-base", "base-core", "base-observable"]
});
YUI.add("base-build", function(e, t) {
    function f(e, t, n) {
        n[e] && (t[e] = (t[e] || []).concat(n[e]))
    }

    function l(e, t, n) {
        n._ATTR_CFG && (t._ATTR_CFG_HASH = null, f.apply(null, arguments))
    }

    function c(e, t, r) {
        n.modifyAttrs(t, r.ATTRS)
    }
    var n = e.BaseCore,
        r = e.Base,
        i = e.Lang,
        s = "initializer",
        o = "destructor",
        u = ["_PLUG", "_UNPLUG"],
        a;
    r._build = function(t, n, i, u, a, f) {
        var l = r._build,
            c = l._ctor(n, f),
            h = l._cfg(n, f, i),
            p = l._mixCust,
            d = c._yuibuild.dynamic,
            v, m, g, y, b, w;
        for (v = 0, m = i.length; v < m; v++) g = i[v], y = g.prototype, b = y[s], w = y[o], delete y[s], delete y[o], e.mix(c, g, !0, null, 1), p(c, g, h), b && (y[s] = b), w && (y[o] = w), c._yuibuild.exts.push(g);
        return u && e.mix(c.prototype, u, !0), a && (e.mix(c, l._clean(a, h), !0), p(c, a, h)), c.prototype.hasImpl = l._impl, d && (c.NAME = t, c.prototype.constructor = c, c.modifyAttrs = n.modifyAttrs), c
    }, a = r._build, e.mix(a, {
        _mixCust: function(t, n, r) {
            var s, o, u, a, f, l;
            r && (s = r.aggregates, o = r.custom, u = r.statics), u && e.mix(t, n, !0, u);
            if (s)
                for (l = 0, f = s.length; l < f; l++) a = s[l], !t.hasOwnProperty(a) && n.hasOwnProperty(a) && (t[a] = i.isArray(n[a]) ? [] : {}), e.aggregate(t, n, !0, [a]);
            if (o)
                for (l in o) o.hasOwnProperty(l) && o[l](l, t, n)
        },
        _tmpl: function(t) {
            function n() {
                n.superclass.constructor.apply(this, arguments)
            }
            return e.extend(n, t), n
        },
        _impl: function(e) {
            var t = this._getClasses(),
                n, r, i, s, o, u;
            for (n = 0, r = t.length; n < r; n++) {
                i = t[n];
                if (i._yuibuild) {
                    s = i._yuibuild.exts, o = s.length;
                    for (u = 0; u < o; u++)
                        if (s[u] === e) return !0
                }
            }
            return !1
        },
        _ctor: function(e, t) {
            var n = t && !1 === t.dynamic ? !1 : !0,
                r = n ? a._tmpl(e) : e,
                i = r._yuibuild;
            return i || (i = r._yuibuild = {}), i.id = i.id || null, i.exts = i.exts || [], i.dynamic = n, r
        },
        _cfg: function(t, n, r) {
            var i = [],
                s = {},
                o = [],
                u, a = n && n.aggregates,
                f = n && n.custom,
                l = n && n.statics,
                c = t,
                h, p;
            while (c && c.prototype) u = c._buildCfg, u && (u.aggregates && (i = i.concat(u.aggregates)), u.custom && e.mix(s, u.custom, !0), u.statics && (o = o.concat(u.statics))), c = c.superclass ? c.superclass.constructor : null;
            if (r)
                for (h = 0, p = r.length; h < p; h++) c = r[h], u = c._buildCfg, u && (u.aggregates && (i = i.concat(u.aggregates)), u.custom && e.mix(s, u.custom, !0), u.statics && (o = o.concat(u.statics)));
            return a && (i = i.concat(a)), f && e.mix(s, n.cfgBuild, !0), l && (o = o.concat(l)), {
                aggregates: i,
                custom: s,
                statics: o
            }
        },
        _clean: function(t, n) {
            var r, i, s, o = e.merge(t),
                u = n.aggregates,
                a = n.custom;
            for (r in a) o.hasOwnProperty(r) && delete o[r];
            for (i = 0, s = u.length; i < s; i++) r = u[i], o.hasOwnProperty(r) && delete o[r];
            return o
        }
    }), r.build = function(e, t, n, r) {
        return a(e, t, n, null, null, r)
    }, r.create = function(e, t, n, r, i) {
        return a(e, t, n, r, i)
    }, r.mix = function(e, t) {
        return e._CACHED_CLASS_DATA && (e._CACHED_CLASS_DATA = null), a(null, e, t, null, null, {
            dynamic: !1
        })
    }, n._buildCfg = {
        aggregates: u.concat(),
        custom: {
            ATTRS: c,
            _ATTR_CFG: l,
            _NON_ATTRS_CFG: f
        }
    }, r._buildCfg = {
        aggregates: u.concat(),
        custom: {
            ATTRS: c,
            _ATTR_CFG: l,
            _NON_ATTRS_CFG: f
        }
    }
}, "@VERSION@", {
    requires: ["base-base"]
});
YUI.add("base-core", function(e, t) {
    function v(e) {
        this._BaseInvoked || (this._BaseInvoked = !0, this._initBase(e))
    }
    var n = e.Object,
        r = e.Lang,
        i = ".",
        s = "initialized",
        o = "destroyed",
        u = "initializer",
        a = "value",
        f = Object.prototype.constructor,
        l = "deep",
        c = "shallow",
        h = "destructor",
        p = e.AttributeCore,
        d = function(e, t, n) {
            var r;
            for (r in t) n[r] && (e[r] = t[r]);
            return e
        };
    v._ATTR_CFG = p._ATTR_CFG.concat("cloneDefaultValue"), v._NON_ATTRS_CFG = ["plugins"], v.NAME = "baseCore", v.ATTRS = {
        initialized: {
            readOnly: !0,
            value: !1
        },
        destroyed: {
            readOnly: !0,
            value: !1
        }
    }, v.modifyAttrs = function(t, n) {
        typeof t != "function" && (n = t, t = this);
        var r, i, s;
        r = t.ATTRS || (t.ATTRS = {});
        if (n) {
            t._CACHED_CLASS_DATA = null;
            for (s in n) n.hasOwnProperty(s) && (i = r[s] || (r[s] = {}), e.mix(i, n[s], !0))
        }
    }, v.prototype = {
        _initBase: function(t) {
            e.stamp(this), this._initAttribute(t);
            var n = e.Plugin && e.Plugin.Host;
            this._initPlugins && n && n.call(this), this._lazyAddAttrs !== !1 && (this._lazyAddAttrs = !0), this.name = this.constructor.NAME, this.init.apply(this, arguments)
        },
        _initAttribute: function() {
            p.call(this)
        },
        init: function(e) {
            return this._baseInit(e), this
        },
        _baseInit: function(e) {
            this._initHierarchy(e), this._initPlugins && this._initPlugins(e), this._set(s, !0)
        },
        destroy: function() {
            return this._baseDestroy(), this
        },
        _baseDestroy: function() {
            this._destroyPlugins && this._destroyPlugins(), this._destroyHierarchy(), this._set(o, !0)
        },
        _getClasses: function() {
            return this._classes || this._initHierarchyData(), this._classes
        },
        _getAttrCfgs: function() {
            return this._attrs || this._initHierarchyData(), this._attrs
        },
        _getInstanceAttrCfgs: function(e) {
            var t = {},
                r, i, s, o, u, a, f, l = e._subAttrs,
                c = this._attrCfgHash();
            for (a in e)
                if (e.hasOwnProperty(a) && a !== "_subAttrs") {
                    f = e[a], r = t[a] = d({}, f, c), i = r.value, i && typeof i == "object" && this._cloneDefaultValue(a, r);
                    if (l && l.hasOwnProperty(a)) {
                        o = e._subAttrs[a];
                        for (u in o) s = o[u], s.path && n.setValue(r.value, s.path, s.value)
                    }
                }
            return t
        },
        _filterAdHocAttrs: function(e, t) {
            var n, r = this._nonAttrs,
                i;
            if (t) {
                n = {};
                for (i in t) !e[i] && !r[i] && t.hasOwnProperty(i) && (n[i] = {
                    value: t[i]
                })
            }
            return n
        },
        _initHierarchyData: function() {
            var e = this.constructor,
                t = e._CACHED_CLASS_DATA,
                n, r, i, s, o, u = !e._ATTR_CFG_HASH,
                a, f = {},
                l = [],
                c = [];
            n = e;
            if (!t) {
                while (n) {
                    l[l.length] = n, n.ATTRS && (c[c.length] = n.ATTRS);
                    if (u) {
                        s = n._ATTR_CFG, o = o || {};
                        if (s)
                            for (r = 0, i = s.length; r < i; r += 1) o[s[r]] = !0
                    }
                    a = n._NON_ATTRS_CFG;
                    if (a)
                        for (r = 0, i = a.length; r < i; r++) f[a[r]] = !0;
                    n = n.superclass ? n.superclass.constructor : null
                }
                u && (e._ATTR_CFG_HASH = o), t = e._CACHED_CLASS_DATA = {
                    classes: l,
                    nonAttrs: f,
                    attrs: this._aggregateAttrs(c)
                }
            }
            this._classes = t.classes, this._attrs = t.attrs, this._nonAttrs = t.nonAttrs
        },
        _attrCfgHash: function() {
            return this.constructor._ATTR_CFG_HASH
        },
        _cloneDefaultValue: function(t, n) {
            var i = n.value,
                s = n.cloneDefaultValue;
            s === l || s === !0 ? n.value = e.clone(i) : s === c ? n.value = e.merge(i) : s === undefined && (f === i.constructor || r.isArray(i)) && (n.value = e.clone(i))
        },
        _aggregateAttrs: function(e) {
            var t, n, r, s, o, u, f = this._attrCfgHash(),
                l, c = {};
            if (e)
                for (u = e.length - 1; u >= 0; --u) {
                    n = e[u];
                    for (t in n) n.hasOwnProperty(t) && (s = d({}, n[t], f), o = null, t.indexOf(i) !== -1 && (o = t.split(i), t = o.shift()), l = c[t], o && l && l.value ? (r = c._subAttrs, r || (r = c._subAttrs = {}), r[t] || (r[t] = {}), r[t][o.join(i)] = {
                        value: s.value,
                        path: o
                    }) : o || (l ? (l.valueFn && a in s && (l.valueFn = null), d(l, s, f)) : c[t] = s))
                }
            return c
        },
        _initHierarchy: function(e) {
            var t = this._lazyAddAttrs,
                n, r, i, s, o, a, f, l, c, h, p, d = [],
                v = this._getClasses(),
                m = this._getAttrCfgs(),
                g = v.length - 1;
            for (o = g; o >= 0; o--) {
                n = v[o], r = n.prototype, h = n._yuibuild && n._yuibuild.exts, r.hasOwnProperty(u) && (d[d.length] = r.initializer);
                if (h)
                    for (a = 0, f = h.length; a < f; a++) l = h[a], l.apply(this, arguments), c = l.prototype, c.hasOwnProperty(u) && (d[d.length] = c.initializer)
            }
            p = this._getInstanceAttrCfgs(m), this._preAddAttrs && this._preAddAttrs(p, e, t), this._allowAdHocAttrs && this.addAttrs(this._filterAdHocAttrs(m, e), e, t), this.addAttrs(p, e, t);
            for (i = 0, s = d.length; i < s; i++) d[i].apply(this, arguments)
        },
        _destroyHierarchy: function() {
            var e, t, n, r, i, s, o, u, a = this._getClasses();
            for (n = 0, r = a.length; n < r; n++) {
                e = a[n], t = e.prototype, o = e._yuibuild && e._yuibuild.exts;
                if (o)
                    for (i = 0, s = o.length; i < s; i++) u = o[i].prototype, u.hasOwnProperty(h) && u.destructor.apply(this, arguments);
                t.hasOwnProperty(h) && t.destructor.apply(this, arguments)
            }
        },
        toString: function() {
            return this.name + "[" + e.stamp(this, !0) + "]"
        }
    }, e.mix(v, p, !1, null, 1), v.prototype.constructor = v, e.BaseCore = v
}, "@VERSION@", {
    requires: ["attribute-core"]
});
YUI.add("base-observable", function(e, t) {
    function f() {}
    var n = e.Lang,
        r = "destroy",
        i = "init",
        s = "bubbleTargets",
        o = "_bubbleTargets",
        u = e.AttributeObservable,
        a = e.BaseCore;
    f._ATTR_CFG = u._ATTR_CFG.concat(), f._NON_ATTRS_CFG = ["on", "after", "bubbleTargets"], f.prototype = {
        _initAttribute: function() {
            a.prototype._initAttribute.apply(this, arguments), u.call(this), this._eventPrefix = this.constructor.EVENT_PREFIX || this.constructor.NAME, this._yuievt.config.prefix = this._eventPrefix
        },
        init: function(e) {
            var t = this._getFullType(i),
                n = this._publish(t);
            return n.emitFacade = !0, n.fireOnce = !0, n.defaultTargetOnly = !0, n.defaultFn = this._defInitFn, this._preInitEventCfg(e), n._hasPotentialSubscribers() ? this.fire(t, {
                cfg: e
            }) : (this._baseInit(e), n.fired = !0, n.firedWith = [{
                cfg: e
            }]), this
        },
        _preInitEventCfg: function(e) {
            e && (e.on && this.on(e.on), e.after && this.after(e.after));
            var t, r, i, u = e && s in e;
            if (u || o in this) {
                i = u ? e && e.bubbleTargets : this._bubbleTargets;
                if (n.isArray(i))
                    for (t = 0, r = i.length; t < r; t++) this.addTarget(i[t]);
                else i && this.addTarget(i)
            }
        },
        destroy: function() {
            return this.publish(r, {
                fireOnce: !0,
                defaultTargetOnly: !0,
                defaultFn: this._defDestroyFn
            }), this.fire(r), this.detachAll(), this
        },
        _defInitFn: function(e) {
            this._baseInit(e.cfg)
        },
        _defDestroyFn: function(e) {
            this._baseDestroy(e.cfg)
        }
    }, e.mix(f, u, !1, null, 1), e.BaseObservable = f
}, "@VERSION@", {
    requires: ["attribute-observable", "base-core"]
});
YUI.add("base-pluginhost", function(e, t) {
    var n = e.Base,
        r = e.Plugin.Host;
    e.mix(n, r, !1, null, 1), n.plug = r.plug, n.unplug = r.unplug
}, "@VERSION@", {
    requires: ["base-base", "pluginhost"]
});
YUI.add("button-core", function(e, t) {
    function i(e) {
        this.initializer(e)
    }
    var n = e.ClassNameManager.getClassName,
        r = e.AttributeCore;
    i.prototype = {
        TEMPLATE: "<button/>",
        constructor: i,
        initializer: function(e) {
            this._initNode(e), this._initAttributes(e), this._renderUI(e)
        },
        _initNode: function(t) {
            t.host ? this._host = e.one(t.host) : this._host = e.Node.create(this.TEMPLATE)
        },
        _initAttributes: function(e) {
            r.call(this, i.ATTRS, e)
        },
        _renderUI: function() {
            var e = this.getNode(),
                t = e.get("nodeName").toLowerCase();
            e.addClass(i.CLASS_NAMES.BUTTON), t !== "button" && t !== "input" && e.set("role", "button")
        },
        enable: function() {
            this.set("disabled", !1)
        },
        disable: function() {
            this.set("disabled", !0)
        },
        getNode: function() {
            return this._host || (this._host = this.get("boundingBox")), this._host
        },
        _getLabel: function() {
            var e = this.getNode(),
                t = i._getTextLabelFromNode(e);
            return t
        },
        _getLabelHTML: function() {
            var e = this.getNode(),
                t = i._getHTMLFromNode(e);
            return t
        },
        _setLabel: function(t, n, r) {
            var i = e.Escape.html(t);
            return (!r || r.src !== "internal") && this.set("labelHTML", i, {
                src: "internal"
            }), i
        },
        _setLabelHTML: function(e, t, n) {
            var r = this.getNode(),
                s = i._getLabelNodeFromParent(r),
                o = r.get("nodeName").toLowerCase();
            return o === "input" ? s.set("value", e) : s.setHTML(e), (!n || n.src !== "internal") && this.set("label", e, {
                src: "internal"
            }), e
        },
        _setDisabled: function(e) {
            var t = this.getNode();
            return t.getDOMNode().disabled = e, t.toggleClass(i.CLASS_NAMES.DISABLED, e), e
        }
    }, e.mix(i.prototype, r.prototype), i.ATTRS = {
        label: {
            setter: "_setLabel",
            getter: "_getLabel",
            lazyAdd: !1
        },
        labelHTML: {
            setter: "_setLabelHTML",
            getter: "_getLabelHTML",
            lazyAdd: !1
        },
        disabled: {
            value: !1,
            setter: "_setDisabled",
            lazyAdd: !1
        }
    }, i.NAME = "button", i.CLASS_NAMES = {
        BUTTON: n("button"),
        DISABLED: n("button", "disabled"),
        SELECTED: n("button", "selected"),
        LABEL: n("button", "label")
    }, i.ARIA_STATES = {
        PRESSED: "aria-pressed",
        CHECKED: "aria-checked"
    }, i.ARIA_ROLES = {
        BUTTON: "button",
        CHECKBOX: "checkbox",
        TOGGLE: "toggle"
    }, i._getLabelNodeFromParent = function(e) {
        var t = e.one("." + i.CLASS_NAMES.LABEL) || e;
        return t
    }, i._getTextLabelFromNode = function(e) {
        var t = i._getLabelNodeFromParent(e),
            n = t.get("nodeName").toLowerCase(),
            r = t.get(n === "input" ? "value" : "text");
        return r
    }, i._getHTMLFromNode = function(e) {
        var t = i._getLabelNodeFromParent(e),
            n = t.getHTML();
        return n
    }, i._getDisabledFromNode = function(e) {
        return e.get("disabled")
    }, e.ButtonCore = i
}, "@VERSION@", {
    requires: ["attribute-core", "classnamemanager", "node-base", "escape"]
});
YUI.add("button-group", function(e, t) {
    function s() {
        s.superclass.constructor.apply(this, arguments)
    }
    var n = "contentBox",
        r = "click",
        i = e.ButtonCore.CLASS_NAMES;
    e.ButtonGroup = e.extend(s, e.Widget, {
        renderUI: function() {
            this.getButtons().plug(e.Plugin.Button)
        },
        bindUI: function() {
            var t = this,
                i = t.get(n);
            i.delegate(r, t._handleClick, e.ButtonGroup.BUTTON_SELECTOR, t), t.after("disabledChange", t._afterDisabledChange)
        },
        _afterDisabledChange: function(t) {
            this.getButtons().each(t.newVal ? e.ButtonCore.prototype.disable : e.ButtonCore.prototype.enable)
        },
        getButtons: function() {
            var t = this.get(n);
            return t.all(e.ButtonGroup.BUTTON_SELECTOR)
        },
        getSelectedButtons: function() {
            var e = this,
                t = [],
                n = e.getButtons(),
                r = s.CLASS_NAMES.SELECTED;
            return n.each(function(e) {
                e.hasClass(r) && t.push(e)
            }), t
        },
        getSelectedValues: function() {
            var t = this.getSelectedButtons(),
                n = [],
                r;
            return e.Array.each(t, function(e) {
                r = e.getContent(), n.push(r)
            }), n
        },
        _handleClick: function(e) {
            var t = this,
                n = e.target.ancestor("." + s.CLASS_NAMES.BUTTON, !0),
                r = t.get("type"),
                i = s.CLASS_NAMES.SELECTED,
                o = n.hasClass(i),
                u;
            r === "checkbox" ? (n.toggleClass(i, !o), t.fire("selectionChange", {
                originEvent: e
            })) : r === "radio" && !o && (u = t.getButtons(), u.removeClass(i), n.addClass(i), t.fire("selectionChange", {
                originEvent: e
            }))
        }
    }, {
        NAME: "buttongroup",
        ATTRS: {
            type: {
                writeOnce: "initOnly",
                value: "radio"
            }
        },
        CLASS_NAMES: i,
        BUTTON_SELECTOR: "button, input[type=button], input[type=reset], input[type=submit], input[type=radio], input[type=checkbox]"
    })
}, "@VERSION@", {
    requires: ["button-plugin", "cssbutton", "widget"]
});
YUI.add("button-plugin", function(e, t) {
    function n() {
        n.superclass.constructor.apply(this, arguments)
    }
    e.extend(n, e.ButtonCore, {
        _afterNodeGet: function(t) {
            var n = this.constructor.ATTRS,
                r = n[t] && n[t].getter && this[n[t].getter];
            if (r) return new e.Do.AlterReturn("get " + t, r.call(this))
        },
        _afterNodeSet: function(e, t) {
            var n = this.constructor.ATTRS,
                r = n[e] && n[e].setter && this[n[e].setter];
            r && r.call(this, t)
        },
        _initNode: function(t) {
            var n = t.host;
            this._host = n, e.Do.after(this._afterNodeGet, n, "get", this), e.Do.after(this._afterNodeSet, n, "set", this)
        },
        destroy: function() {}
    }, {
        ATTRS: e.merge(e.ButtonCore.ATTRS),
        NAME: "buttonPlugin",
        NS: "button"
    }), n.createNode = function(t, n) {
        var r;
        return t && !n && !t.nodeType && !t.getDOMNode && typeof t != "string" && (n = t, t = n.srcNode), n = n || {}, r = n.template || e.Plugin.Button.prototype.TEMPLATE, t = t || n.srcNode || e.DOM.create(r), e.one(t).plug(e.Plugin.Button, n)
    }, e.namespace("Plugin").Button = n
}, "@VERSION@", {
    requires: ["button-core", "cssbutton", "node-pluginhost"]
});
YUI.add("button", function(e, t) {
    function o() {
        o.superclass.constructor.apply(this, arguments)
    }

    function u() {
        o.superclass.constructor.apply(this, arguments)
    }
    var n = e.ButtonCore,
        r = n.CLASS_NAMES,
        i = n.ARIA_STATES,
        s = n.ARIA_ROLES;
    e.extend(o, e.Widget, {
        BOUNDING_TEMPLATE: n.prototype.TEMPLATE,
        CONTENT_TEMPLATE: null
    }, {
        NAME: n.NAME,
        ATTRS: n.ATTRS,
        HTML_PARSER: {
            labelHTML: n._getHTMLFromNode,
            disabled: n._getDisabledFromNode
        },
        CLASS_NAMES: r
    }), e.mix(o.prototype, n.prototype), e.extend(u, o, {
        trigger: "click",
        selectedAttrName: "",
        initializer: function(e) {
            var t = this,
                n = t.get("type"),
                r = n === "checkbox" ? "checked" : "pressed",
                i = e[r] || !1;
            t.addAttr(r, {
                value: i
            }), t.selectedAttrName = r
        },
        destructor: function() {
            delete this.selectedAttrName
        },
        bindUI: function() {
            var e = this,
                t = e.get("contentBox");
            u.superclass.bindUI.call(e), t.on(e.trigger, e.toggle, e), e.after(e.selectedAttrName + "Change", e._afterSelectedChange)
        },
        syncUI: function() {
            var e = this,
                t = e.get("contentBox"),
                n = e.get("type"),
                r = u.ARIA_ROLES,
                i = n === "checkbox" ? r.CHECKBOX : r.TOGGLE,
                s = e.selectedAttrName;
            u.superclass.syncUI.call(e), t.set("role", i), e._uiSetSelected(e.get(s))
        },
        _afterSelectedChange: function(e) {
            this._uiSetSelected(e.newVal)
        },
        _uiSetSelected: function(e) {
            var t = this,
                n = t.get("contentBox"),
                r = u.ARIA_STATES,
                i = t.get("type"),
                s = i === "checkbox" ? r.CHECKED : r.PRESSED;
            n.toggleClass(o.CLASS_NAMES.SELECTED, e), n.set(s, e)
        },
        toggle: function() {
            var e = this;
            e._set(e.selectedAttrName, !e.get(e.selectedAttrName))
        }
    }, {
        NAME: "toggleButton",
        ATTRS: {
            type: {
                value: "toggle",
                writeOnce: "initOnly"
            }
        },
        HTML_PARSER: {
            checked: function(e) {
                return e.hasClass(r.SELECTED)
            },
            pressed: function(e) {
                return e.hasClass(r.SELECTED)
            }
        },
        ARIA_STATES: i,
        ARIA_ROLES: s,
        CLASS_NAMES: r
    }), e.Button = o, e.ToggleButton = u
}, "@VERSION@", {
    requires: ["button-core", "cssbutton", "widget"]
});
YUI.add("classnamemanager", function(e, t) {
    var n = "classNamePrefix",
        r = "classNameDelimiter",
        i = e.config;
    i[n] = i[n] || "yui3", i[r] = i[r] || "-", e.ClassNameManager = function() {
        var t = i[n],
            s = i[r];
        return {
            getClassName: e.cached(function() {
                var n = e.Array(arguments);
                return n[n.length - 1] !== !0 ? n.unshift(t) : n.pop(), n.join(s)
            })
        }
    }()
}, "@VERSION@", {
    requires: ["yui-base"]
});
YUI.add("clickable-rail", function(e, t) {
    function n() {
        this._initClickableRail()
    }
    e.ClickableRail = e.mix(n, {
        prototype: {
            _initClickableRail: function() {
                this._evtGuid = this._evtGuid || e.guid() + "|", this.publish("railMouseDown", {
                    defaultFn: this._defRailMouseDownFn
                }), this.after("render", this._bindClickableRail), this.on("destroy", this._unbindClickableRail)
            },
            _bindClickableRail: function() {
                this._dd.addHandle(this.rail), this.rail.on(this._evtGuid + e.DD.Drag.START_EVENT, e.bind(this._onRailMouseDown, this))
            },
            _unbindClickableRail: function() {
                if (this.get("rendered")) {
                    var e = this.get("contentBox"),
                        t = e.one("." + this.getClassName("rail"));
                    t.detach(this.evtGuid + "*")
                }
            },
            _onRailMouseDown: function(e) {
                this.get("clickableRail") && !this.get("disabled") && (this.fire("railMouseDown", {
                    ev: e
                }), this.thumb.focus())
            },
            _defRailMouseDownFn: function(e) {
                e = e.ev;
                var t = this._resolveThumb(e),
                    n = this._key.xyIndex,
                    r = parseFloat(this.get("length"), 10),
                    i, s, o;
                t && (i = t.get("dragNode"), s = parseFloat(i.getStyle(this._key.dim), 10), o = this._getThumbDestination(e, i), o = o[n] - this.rail.getXY()[n], o = Math.min(Math.max(o, 0), r - s), this._uiMoveThumb(o, {
                    source: "rail"
                }), e.target = this.thumb.one("img") || this.thumb, t._handleMouseDownEvent(e))
            },
            _resolveThumb: function(e) {
                return this._dd
            },
            _getThumbDestination: function(e, t) {
                var n = t.get("offsetWidth"),
                    r = t.get("offsetHeight");
                return [e.pageX - Math.round(n / 2), e.pageY - Math.round(r / 2)]
            }
        },
        ATTRS: {
            clickableRail: {
                value: !0,
                validator: e.Lang.isBoolean
            }
        }
    }, !0)
}, "@VERSION@", {
    requires: ["slider-base"]
});
YUI.add("color-base", function(e, t) {
    var n = /^#?([\da-fA-F]{2})([\da-fA-F]{2})([\da-fA-F]{2})(\ufffe)?/,
        r = /^#?([\da-fA-F]{1})([\da-fA-F]{1})([\da-fA-F]{1})(\ufffe)?/,
        i = /rgba?\(([\d]{1,3}), ?([\d]{1,3}), ?([\d]{1,3}),? ?([.\d]*)?\)/,
        s = {
            HEX: "hex",
            RGB: "rgb",
            RGBA: "rgba"
        },
        o = {
            hex: "toHex",
            rgb: "toRGB",
            rgba: "toRGBA"
        };
    e.Color = {
        KEYWORDS: {
            black: "000",
            silver: "c0c0c0",
            gray: "808080",
            white: "fff",
            maroon: "800000",
            red: "f00",
            purple: "800080",
            fuchsia: "f0f",
            green: "008000",
            lime: "0f0",
            olive: "808000",
            yellow: "ff0",
            navy: "000080",
            blue: "00f",
            teal: "008080",
            aqua: "0ff"
        },
        REGEX_HEX: n,
        REGEX_HEX3: r,
        REGEX_RGB: i,
        re_RGB: i,
        re_hex: n,
        re_hex3: r,
        STR_HEX: "#{*}{*}{*}",
        STR_RGB: "rgb({*}, {*}, {*})",
        STR_RGBA: "rgba({*}, {*}, {*}, {*})",
        TYPES: s,
        CONVERTS: o,
        convert: function(t, n) {
            var r = e.Color.CONVERTS[n.toLowerCase()],
                i = t;
            return r && e.Color[r] && (i = e.Color[r](t)), i
        },
        toHex: function(t) {
            var n = e.Color._convertTo(t, "hex"),
                r = n.toLowerCase() === "transparent";
            return n.charAt(0) !== "#" && !r && (n = "#" + n), r ? n.toLowerCase() : n.toUpperCase()
        },
        toRGB: function(t) {
            var n = e.Color._convertTo(t, "rgb");
            return n.toLowerCase()
        },
        toRGBA: function(t) {
            var n = e.Color._convertTo(t, "rgba");
            return n.toLowerCase()
        },
        toArray: function(t) {
            var n = e.Color.findType(t).toUpperCase(),
                r, i, s, o;
            return n === "HEX" && t.length < 5 && (n = "HEX3"), n.charAt(n.length - 1) === "A" && (n = n.slice(0, -1)), r = e.Color["REGEX_" + n], r && (i = r.exec(t) || [], s = i.length, s && (i.shift(), s--, n === "HEX3" && (i[0] += i[0], i[1] += i[1], i[2] += i[2]), o = i[s - 1], o || (i[s - 1] = 1))), i
        },
        fromArray: function(t, n) {
            t = t.concat();
            if (typeof n == "undefined") return t.join(", ");
            var r = "{*}";
            n = e.Color["STR_" + n.toUpperCase()], t.length === 3 && n.match(/\{\*\}/g).length === 4 && t.push(1);
            while (n.indexOf(r) >= 0 && t.length > 0) n = n.replace(r, t.shift());
            return n
        },
        findType: function(t) {
            if (e.Color.KEYWORDS[t]) return "keyword";
            var n = t.indexOf("("),
                r;
            return n > 0 && (r = t.substr(0, n)), r && e.Color.TYPES[r.toUpperCase()] ? e.Color.TYPES[r.toUpperCase()] : "hex"
        },
        _getAlpha: function(t) {
            var n, r = e.Color.toArray(t);
            return r.length > 3 && (n = r.pop()), +n || 1
        },
        _keywordToHex: function(t) {
            var n = e.Color.KEYWORDS[t];
            if (n) return n
        },
        _convertTo: function(t, n) {
            if (t === "transparent") return t;
            var r = e.Color.findType(t),
                i = n,
                s, o, u, a;
            return r === "keyword" && (t = e.Color._keywordToHex(t), r = "hex"), r === "hex" && t.length < 5 && (t.charAt(0) === "#" && (t = t.substr(1)), t = "#" + t.charAt(0) + t.charAt(0) + t.charAt(1) + t.charAt(1) + t.charAt(2) + t.charAt(2)), r === n ? t : (r.charAt(r.length - 1) === "a" && (r = r.slice(0, -1)), s = n.charAt(n.length - 1) === "a", s && (n = n.slice(0, -1), o = e.Color._getAlpha(t)), a = n.charAt(0).toUpperCase() + n.substr(1).toLowerCase(), u = e.Color["_" + r + "To" + a], u || r !== "rgb" && n !== "rgb" && (t = e.Color["_" + r + "ToRgb"](t), r = "rgb", u = e.Color["_" + r + "To" + a]), u && (t = u(t, s)), s && (e.Lang.isArray(t) || (t = e.Color.toArray(t)), t.push(o), t = e.Color.fromArray(t, i.toUpperCase())), t)
        },
        _hexToRgb: function(e, t) {
            var n, r, i;
            return e.charAt(0) === "#" && (e = e.substr(1)), e = parseInt(e, 16), n = e >> 16, r = e >> 8 & 255, i = e & 255, t ? [n, r, i] : "rgb(" + n + ", " + r + ", " + i + ")"
        },
        _rgbToHex: function(t) {
            var n = e.Color.toArray(t),
                r = n[2] | n[1] << 8 | n[0] << 16;
            r = (+r).toString(16);
            while (r.length < 6) r = "0" + r;
            return "#" + r
        }
    }
}, "@VERSION@", {
    requires: ["yui-base"]
});
YUI.add("color-hsl", function(e, t) {
    Color = {
        REGEX_HSL: /hsla?\(([.\d]*), ?([.\d]*)%, ?([.\d]*)%,? ?([.\d]*)?\)/,
        STR_HSL: "hsl({*}, {*}%, {*}%)",
        STR_HSLA: "hsla({*}, {*}%, {*}%, {*})",
        toHSL: function(t) {
            var n = e.Color._convertTo(t, "hsl");
            return n.toLowerCase()
        },
        toHSLA: function(t) {
            var n = e.Color._convertTo(t, "hsla");
            return n.toLowerCase()
        },
        _rgbToHsl: function(t, n) {
            var r, i, s, o = e.Color.REGEX_RGB.exec(t),
                u = o[1] / 255,
                a = o[2] / 255,
                f = o[3] / 255,
                l = Math.max(u, a, f),
                c = Math.min(u, a, f),
                h = !1,
                p = l - c,
                d = l + c;
            return u === a && a === f && (h = !0), p === 0 ? r = 0 : u === l ? r = (60 * (a - f) / p + 360) % 360 : a === l ? r = 60 * (f - u) / p + 120 : r = 60 * (u - a) / p + 240, s = d / 2, s === 0 || s === 1 ? i = s : s <= .5 ? i = p / d : i = p / (2 - d), h && (i = 0), r = Math.round(r), i = Math.round(i * 100), s = Math.round(s * 100), n ? [r, i, s] : "hsl(" + r + ", " + i + "%, " + s + "%)"
        },
        _hslToRgb: function(t, n) {
            var r = e.Color.REGEX_HSL.exec(t),
                i = parseInt(r[1], 10) / 360,
                s = parseInt(r[2], 10) / 100,
                o = parseInt(r[3], 10) / 100,
                u, a, f, l, c;
            return o <= .5 ? c = o * (s + 1) : c = o + s - o * s, l = 2 * o - c, u = Math.round(Color._hueToRGB(l, c, i + 1 / 3) * 255), a = Math.round(Color._hueToRGB(l, c, i) * 255), f = Math.round(Color._hueToRGB(l, c, i - 1 / 3) * 255), n ? [u, a, f] : "rgb(" + u + ", " + a + ", " + f + ")"
        },
        _hueToRGB: function(e, t, n) {
            return n < 0 ? n += 1 : n > 1 && (n -= 1), n * 6 < 1 ? e + (t - e) * 6 * n : n * 2 < 1 ? t : n * 3 < 2 ? e + (t - e) * (2 / 3 - n) * 6 : e
        }
    }, e.Color = e.mix(Color, e.Color), e.Color.TYPES = e.mix(e.Color.TYPES, {
        HSL: "hsl",
        HSLA: "hsla"
    }), e.Color.CONVERTS = e.mix(e.Color.CONVERTS, {
        hsl: "toHSL",
        hsla: "toHSLA"
    })
}, "@VERSION@", {
    requires: ["color-base"]
});
YUI.add("color-hsv", function(e, t) {
    Color = {
        REGEX_HSV: /hsva?\(([.\d]*), ?([.\d]*)%, ?([.\d]*)%,? ?([.\d]*)?\)/,
        STR_HSV: "hsv({*}, {*}%, {*}%)",
        STR_HSVA: "hsva({*}, {*}%, {*}%, {*})",
        toHSV: function(t) {
            var n = e.Color._convertTo(t, "hsv");
            return n.toLowerCase()
        },
        toHSVA: function(t) {
            var n = e.Color._convertTo(t, "hsva");
            return n.toLowerCase()
        },
        _rgbToHsv: function(t, n) {
            var r, i, s, o = e.Color.REGEX_RGB.exec(t),
                u = o[1] / 255,
                a = o[2] / 255,
                f = o[3] / 255,
                l = Math.max(u, a, f),
                c = Math.min(u, a, f),
                h = l - c;
            l === c ? r = 0 : l === u ? r = 60 * (a - f) / h : l === a ? r = 60 * (f - u) / h + 120 : r = 60 * (u - a) / h + 240, i = l === 0 ? 0 : 1 - c / l;
            while (r < 0) r += 360;
            return r %= 360, r = Math.round(r), i = Math.round(i * 100), s = Math.round(l * 100), n ? [r, i, s] : e.Color.fromArray([r, i, s], e.Color.TYPES.HSV)
        },
        _hsvToRgb: function(t, n) {
            var r = e.Color.REGEX_HSV.exec(t),
                i = parseInt(r[1], 10),
                s = parseInt(r[2], 10) / 100,
                o = parseInt(r[3], 10) / 100,
                u, a, f, l = Math.floor(i / 60) % 6,
                c = i / 60 - l,
                h = o * (1 - s),
                p = o * (1 - s * c),
                d = o * (1 - s * (1 - c));
            if (s === 0) u = o, a = o, f = o;
            else switch (l) {
                case 0:
                    u = o, a = d, f = h;
                    break;
                case 1:
                    u = p, a = o, f = h;
                    break;
                case 2:
                    u = h, a = o, f = d;
                    break;
                case 3:
                    u = h, a = p, f = o;
                    break;
                case 4:
                    u = d, a = h, f = o;
                    break;
                case 5:
                    u = o, a = h, f = p
            }
            return u = Math.min(255, Math.round(u * 256)), a = Math.min(255, Math.round(a * 256)), f = Math.min(255, Math.round(f * 256)), n ? [u, a, f] : e.Color.fromArray([u, a, f], e.Color.TYPES.RGB)
        }
    }, e.Color = e.mix(Color, e.Color), e.Color.TYPES = e.mix(e.Color.TYPES, {
        HSV: "hsv",
        HSVA: "hsva"
    }), e.Color.CONVERTS = e.mix(e.Color.CONVERTS, {
        hsv: "toHSV",
        hsva: "toHSVA"
    })
}, "@VERSION@", {
    requires: ["color-base"]
});
YUI.add("cookie", function(e, t) {
    function h(e) {
        throw new TypeError(e)
    }

    function p(e) {
        (!s(e) || e === "") && h("Cookie name must be a non-empty string.")
    }

    function d(e) {
        (!s(e) || e === "") && h("Subcookie name must be a non-empty string.")
    }
    var n = e.Lang,
        r = e.Object,
        i = null,
        s = n.isString,
        o = n.isObject,
        u = n.isUndefined,
        a = n.isFunction,
        f = encodeURIComponent,
        l = decodeURIComponent,
        c = e.config.doc;
    e.Cookie = {
        _createCookieString: function(e, t, n, r) {
            r = r || {};
            var i = f(e) + "=" + (n ? f(t) : t),
                u = r.expires,
                a = r.path,
                l = r.domain;
            return o(r) && (u instanceof Date && (i += "; expires=" + u.toUTCString()), s(a) && a !== "" && (i += "; path=" + a), s(l) && l !== "" && (i += "; domain=" + l), r.secure === !0 && (i += "; secure")), i
        },
        _createCookieHashString: function(e) {
            o(e) || h("Cookie._createCookieHashString(): Argument must be an object.");
            var t = [];
            return r.each(e, function(e, n) {
                !a(e) && !u(e) && t.push(f(n) + "=" + f(String(e)))
            }), t.join("&")
        },
        _parseCookieHash: function(e) {
            var t = e.split("&"),
                n = i,
                r = {};
            if (e.length)
                for (var s = 0, o = t.length; s < o; s++) n = t[s].split("="), r[l(n[0])] = l(n[1]);
            return r
        },
        _parseCookieString: function(e, t, n) {
            var r = {};
            if (s(e) && e.length > 0) {
                var o = t === !1 ? function(e) {
                        return e
                    } : l,
                    a = e.split(/;\s/g),
                    f = i,
                    c = i,
                    h = i;
                for (var p = 0, d = a.length; p < d; p++) {
                    h = a[p].match(/([^=]+)=/i);
                    if (h instanceof Array) try {
                        f = l(h[1]), c = o(a[p].substring(h[1].length + 1))
                    } catch (v) {} else f = l(a[p]), c = "";
                    !u(n) && n.reverseCookieLoading ? u(r[f]) && (r[f] = c) : r[f] = c
                }
            }
            return r
        },
        _setDoc: function(e) {
            c = e
        },
        exists: function(e) {
            p(e);
            var t = this._parseCookieString(c.cookie, !0);
            return t.hasOwnProperty(e)
        },
        get: function(e, t) {
            p(e);
            var n, r, s;
            return a(t) ? (s = t, t = {}) : o(t) ? s = t.converter : t = {}, n = this._parseCookieString(c.cookie, !t.raw, t), r = n[e], u(r) ? i : a(s) ? s(r) : r
        },
        getSub: function(e, t, n, r) {
            var s = this.getSubs(e, r);
            return s !== i ? (d(t), u(s[t]) ? i : a(n) ? n(s[t]) : s[t]) : i
        },
        getSubs: function(e, t) {
            p(e);
            var n = this._parseCookieString(c.cookie, !1, t);
            return s(n[e]) ? this._parseCookieHash(n[e]) : i
        },
        remove: function(t, n) {
            return p(t), n = e.merge(n || {}, {
                expires: new Date(0)
            }), this.set(t, "", n)
        },
        removeSub: function(e, t, n) {
            p(e), d(t), n = n || {};
            var r = this.getSubs(e);
            if (o(r) && r.hasOwnProperty(t)) {
                delete r[t];
                if (!n.removeIfEmpty) return this.setSubs(e, r, n);
                for (var i in r)
                    if (r.hasOwnProperty(i) && !a(r[i]) && !u(r[i])) return this.setSubs(e, r, n);
                return this.remove(e, n)
            }
            return ""
        },
        set: function(e, t, n) {
            p(e), u(t) && h("Cookie.set(): Value cannot be undefined."), n = n || {};
            var r = this._createCookieString(e, t, !n.raw, n);
            return c.cookie = r, r
        },
        setSub: function(e, t, n, r) {
            p(e), d(t), u(n) && h("Cookie.setSub(): Subcookie value cannot be undefined.");
            var i = this.getSubs(e);
            return o(i) || (i = {}), i[t] = n, this.setSubs(e, i, r)
        },
        setSubs: function(e, t, n) {
            p(e), o(t) || h("Cookie.setSubs(): Cookie value must be an object.");
            var r = this._createCookieString(e, this._createCookieHashString(t), !1, n);
            return c.cookie = r, r
        }
    }
}, "@VERSION@", {
    requires: ["yui-base"]
});
YUI.add("datatype-date-format", function(e, t) {
    var n = function(e, t, n) {
            typeof n == "undefined" && (n = 10), t += "";
            for (; parseInt(e, 10) < n && n > 1; n /= 10) e = t + e;
            return e.toString()
        },
        r = {
            formats: {
                a: function(e, t) {
                    return t.a[e.getDay()]
                },
                A: function(e, t) {
                    return t.A[e.getDay()]
                },
                b: function(e, t) {
                    return t.b[e.getMonth()]
                },
                B: function(e, t) {
                    return t.B[e.getMonth()]
                },
                C: function(e) {
                    return n(parseInt(e.getFullYear() / 100, 10), 0)
                },
                d: ["getDate", "0"],
                e: ["getDate", " "],
                g: function(e) {
                    return n(parseInt(r.formats.G(e) % 100, 10), 0)
                },
                G: function(e) {
                    var t = e.getFullYear(),
                        n = parseInt(r.formats.V(e), 10),
                        i = parseInt(r.formats.W(e), 10);
                    return i > n ? t++ : i === 0 && n >= 52 && t--, t
                },
                H: ["getHours", "0"],
                I: function(e) {
                    var t = e.getHours() % 12;
                    return n(t === 0 ? 12 : t, 0)
                },
                j: function(e) {
                    var t = new Date("" + e.getFullYear() + "/1/1 GMT"),
                        r = new Date("" + e.getFullYear() + "/" + (e.getMonth() + 1) + "/" + e.getDate() + " GMT"),
                        i = r - t,
                        s = parseInt(i / 6e4 / 60 / 24, 10) + 1;
                    return n(s, 0, 100)
                },
                k: ["getHours", " "],
                l: function(e) {
                    var t = e.getHours() % 12;
                    return n(t === 0 ? 12 : t, " ")
                },
                m: function(e) {
                    return n(e.getMonth() + 1, 0)
                },
                M: ["getMinutes", "0"],
                p: function(e, t) {
                    return t.p[e.getHours() >= 12 ? 1 : 0]
                },
                P: function(e, t) {
                    return t.P[e.getHours() >= 12 ? 1 : 0]
                },
                s: function(e, t) {
                    return parseInt(e.getTime() / 1e3, 10)
                },
                S: ["getSeconds", "0"],
                u: function(e) {
                    var t = e.getDay();
                    return t === 0 ? 7 : t
                },
                U: function(e) {
                    var t = parseInt(r.formats.j(e), 10),
                        i = 6 - e.getDay(),
                        s = parseInt((t + i) / 7, 10);
                    return n(s, 0)
                },
                V: function(e) {
                    var t = parseInt(r.formats.W(e), 10),
                        i = (new Date("" + e.getFullYear() + "/1/1")).getDay(),
                        s = t + (i > 4 || i <= 1 ? 0 : 1);
                    return s === 53 && (new Date("" + e.getFullYear() + "/12/31")).getDay() < 4 ? s = 1 : s === 0 && (s = r.formats.V(new Date("" + (e.getFullYear() - 1) + "/12/31"))), n(s, 0)
                },
                w: "getDay",
                W: function(e) {
                    var t = parseInt(r.formats.j(e), 10),
                        i = 7 - r.formats.u(e),
                        s = parseInt((t + i) / 7, 10);
                    return n(s, 0, 10)
                },
                y: function(e) {
                    return n(e.getFullYear() % 100, 0)
                },
                Y: "getFullYear",
                z: function(e) {
                    var t = e.getTimezoneOffset(),
                        r = n(parseInt(Math.abs(t / 60), 10), 0),
                        i = n(Math.abs(t % 60), 0);
                    return (t > 0 ? "-" : "+") + r + i
                },
                Z: function(e) {
                    var t = e.toString().replace(/^.*:\d\d( GMT[+-]\d+)? \(?([A-Za-z ]+)\)?\d*$/, "$2").replace(/[a-z ]/g, "");
                    return t.length > 4 && (t = r.formats.z(e)), t
                },
                "%": function(e) {
                    return "%"
                }
            },
            aggregates: {
                c: "locale",
                D: "%m/%d/%y",
                F: "%Y-%m-%d",
                h: "%b",
                n: "\n",
                r: "%I:%M:%S %p",
                R: "%H:%M",
                t: " ",
                T: "%H:%M:%S",
                x: "locale",
                X: "locale"
            },
            format: function(t, i) {
                i = i || {};
                if (!e.Lang.isDate(t)) return e.Lang.isValue(t) ? t : "";
                var s, o, u, a, f;
                s = i.format || "%Y-%m-%d", o = e.Intl.get("datatype-date-format");
                var l = function(e, t) {
                        if (u && t === "r") return o[t];
                        var n = r.aggregates[t];
                        return n === "locale" ? o[t] : n
                    },
                    c = function(i, s) {
                        var u = r.formats[s];
                        switch (e.Lang.type(u)) {
                            case "string":
                                return t[u]();
                            case "function":
                                return u.call(t, t, o);
                            case "array":
                                if (e.Lang.type(u[0]) === "string") return n(t[u[0]](), u[1]);
                            default:
                                return s
                        }
                    };
                while (s.match(/%[cDFhnrRtTxX]/)) s = s.replace(/%([cDFhnrRtTxX])/g, l);
                var h = s.replace(/%([aAbBCdegGHIjklmMpPsSuUVwWyYzZ%])/g, c);
                return l = c = undefined, h
            }
        };
    e.mix(e.namespace("Date"), r), e.namespace("DataType"), e.DataType.Date = e.Date
}, "@VERSION@", {
    lang: ["ar", "ar-JO", "ca", "ca-ES", "da", "da-DK", "de", "de-AT", "de-DE", "el", "el-GR", "en", "en-AU", "en-CA", "en-GB", "en-IE", "en-IN", "en-JO", "en-MY", "en-NZ", "en-PH", "en-SG", "en-US", "es", "es-AR", "es-BO", "es-CL", "es-CO", "es-EC", "es-ES", "es-MX", "es-PE", "es-PY", "es-US", "es-UY", "es-VE", "fi", "fi-FI", "fr", "fr-BE", "fr-CA", "fr-FR", "hi", "hi-IN", "hu", "id", "id-ID", "it", "it-IT", "ja", "ja-JP", "ko", "ko-KR", "ms", "ms-MY", "nb", "nb-NO", "nl", "nl-BE", "nl-NL", "pl", "pl-PL", "pt", "pt-BR", "ro", "ro-RO", "ru", "ru-RU", "sv", "sv-SE", "th", "th-TH", "tr", "tr-TR", "vi", "vi-VN", "zh-Hans", "zh-Hans-CN", "zh-Hant", "zh-Hant-HK", "zh-Hant-TW"]
});
YUI.add("lang/datatype-date-format_en-US", function(e) {
    e.Intl.add("datatype-date-format", "en-US", {
        a: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
        A: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
        b: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
        B: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
        c: "%a, %b %d, %Y %l:%M:%S %p %Z",
        p: ["AM", "PM"],
        P: ["am", "pm"],
        x: "%m/%d/%y",
        X: "%l:%M:%S %p"
    })
}, "@VERSION@");
YUI.add("datatype-date-math", function(e, t) {
    var n = e.Lang;
    e.mix(e.namespace("Date"), {
        isValidDate: function(e) {
            return n.isDate(e) && isFinite(e) && e != "Invalid Date" && !isNaN(e) && e != null ? !0 : !1
        },
        areEqual: function(e, t) {
            return this.isValidDate(e) && this.isValidDate(t) && e.getTime() == t.getTime()
        },
        isGreater: function(e, t) {
            return this.isValidDate(e) && this.isValidDate(t) && e.getTime() > t.getTime()
        },
        isGreaterOrEqual: function(e, t) {
            return this.isValidDate(e) && this.isValidDate(t) && e.getTime() >= t.getTime()
        },
        isInRange: function(e, t, n) {
            return this.isGreaterOrEqual(e, t) && this.isGreaterOrEqual(n, e)
        },
        addDays: function(e, t) {
            return new Date(e.getTime() + 864e5 * t)
        },
        addMonths: function(e, t) {
            var n = e.getFullYear(),
                r = e.getMonth() + t;
            n = Math.floor(n + r / 12), r = (r % 12 + 12) % 12;
            var i = new Date(e.getTime());
            return i.setFullYear(n), i.setMonth(r), i
        },
        addYears: function(e, t) {
            var n = e.getFullYear() + t,
                r = new Date(e.getTime());
            return r.setFullYear(n), r
        },
        listOfDatesInMonth: function(e) {
            if (!this.isValidDate(e)) return [];
            var t = this.daysInMonth(e),
                n = e.getFullYear(),
                r = e.getMonth(),
                i = [];
            for (var s = 1; s <= t; s++) i.push(new Date(n, r, s, 12, 0, 0));
            return i
        },
        daysInMonth: function(e) {
            if (!this.isValidDate(e)) return 0;
            var t = e.getMonth(),
                n = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
            if (t != 1) return n[t];
            var r = e.getFullYear();
            return r % 400 === 0 ? 29 : r % 100 === 0 ? 28 : r % 4 === 0 ? 29 : 28
        }
    }), e.namespace("DataType"), e.DataType.Date = e.Date
}, "@VERSION@", {
    requires: ["yui-base"]
});
YUI.add("datatype-date-parse", function(e, t) {
    e.mix(e.namespace("Date"), {
        parse: function(t) {
            var n = new Date(+t || t);
            return e.Lang.isDate(n) ? n : null
        }
    }), e.namespace("Parsers").date = e.Date.parse, e.namespace("DataType"), e.DataType.Date = e.Date
}, "@VERSION@");
YUI.add("datatype-xml-parse", function(e, t) {
    e.mix(e.namespace("XML"), {
        parse: function(t) {
            var n = null,
                r;
            return typeof t == "string" && (r = e.config.win, r.ActiveXObject !== undefined ? (n = new ActiveXObject("Microsoft.XMLDOM"), n.async = !1, n.loadXML(t)) : r.DOMParser !== undefined ? n = (new DOMParser).parseFromString(t, "text/xml") : r.Windows !== undefined && (n = new Windows.Data.Xml.Dom.XmlDocument, n.loadXml(t))), n === null || n.documentElement === null || n.documentElement.nodeName === "parsererror", n
        }
    }), e.namespace("Parsers").xml = e.XML.parse, e.namespace("DataType"), e.DataType.XML = e.XML
}, "@VERSION@");
YUI.add("dd-constrain", function(e, t) {
    var n = "dragNode",
        r = "offsetHeight",
        i = "offsetWidth",
        s = "host",
        o = "tickXArray",
        u = "tickYArray",
        a = e.DD.DDM,
        f = "top",
        l = "right",
        c = "bottom",
        h = "left",
        p = "view",
        d = null,
        v = "drag:tickAlignX",
        m = "drag:tickAlignY",
        g = function() {
            this._lazyAddAttrs = !1, g.superclass.constructor.apply(this, arguments)
        };
    g.NAME = "ddConstrained", g.NS = "con", g.ATTRS = {
        host: {},
        stickX: {
            value: !1
        },
        stickY: {
            value: !1
        },
        tickX: {
            value: !1
        },
        tickY: {
            value: !1
        },
        tickXArray: {
            value: !1
        },
        tickYArray: {
            value: !1
        },
        gutter: {
            value: "0",
            setter: function(t) {
                return e.DD.DDM.cssSizestoObject(t)
            }
        },
        constrain: {
            value: p,
            setter: function(t) {
                var n = e.one(t);
                return n && (t = n), t
            }
        },
        constrain2region: {
            setter: function(e) {
                return this.set("constrain", e)
            }
        },
        constrain2node: {
            setter: function(t) {
                return this.set("constrain", e.one(t))
            }
        },
        constrain2view: {
            setter: function() {
                return this.set("constrain", p)
            }
        },
        cacheRegion: {
            value: !0
        }
    }, d = {
        _lastTickXFired: null,
        _lastTickYFired: null,
        initializer: function() {
            this._createEvents(), this._eventHandles = [this.get(s).on("drag:end", e.bind(this._handleEnd, this)), this.get(s).on("drag:start", e.bind(this._handleStart, this)), this.get(s).after("drag:align", e.bind(this.align, this)), this.get(s).after("drag:drag", e.bind(this.drag, this))]
        },
        destructor: function() {
            e.Array.each(this._eventHandles, function(e) {
                e.detach()
            }), this._eventHandles.length = 0
        },
        _createEvents: function() {
            var t = [v, m];
            e.Array.each(t, function(e) {
                this.publish(e, {
                    type: e,
                    emitFacade: !0,
                    bubbles: !0,
                    queuable: !1,
                    prefix: "drag"
                })
            }, this)
        },
        _handleEnd: function() {
            this._lastTickYFired = null, this._lastTickXFired = null
        },
        _handleStart: function() {
            this.resetCache()
        },
        _regionCache: null,
        _cacheRegion: function() {
            this._regionCache = this.get("constrain").get("region")
        },
        resetCache: function() {
            this._regionCache = null
        },
        _getConstraint: function() {
            var t = this.get("constrain"),
                r = this.get("gutter"),
                i;
            t && (t instanceof e.Node ? (this._regionCache || (this._eventHandles.push(e.on("resize", e.bind(this._cacheRegion, this), e.config.win)), this._cacheRegion()), i = e.clone(this._regionCache), this.get("cacheRegion") || this.resetCache()) : e.Lang.isObject(t) && (i = e.clone(t)));
            if (!t || !i) t = p;
            return t === p && (i = this.get(s).get(n).get("viewportRegion")), e.Object.each(r, function(e, t) {
                t === l || t === c ? i[t] -= e : i[t] += e
            }), i
        },
        getRegion: function(e) {
            var t = {},
                o = null,
                u = null,
                a = this.get(s);
            return t = this._getConstraint(), e && (o = a.get(n).get(r), u = a.get(n).get(i), t[l] = t[l] - u, t[c] = t[c] - o), t
        },
        _checkRegion: function(e) {
            var t = e,
                o = this.getRegion(),
                u = this.get(s),
                a = u.get(n).get(r),
                p = u.get(n).get(i);
            return t[1] > o[c] - a && (e[1] = o[c] - a), o[f] > t[1] && (e[1] = o[f]), t[0] > o[l] - p && (e[0] = o[l] - p), o[h] > t[0] && (e[0] = o[h]), e
        },
        inRegion: function(e) {
            e = e || this.get(s).get(n).getXY();
            var t = this._checkRegion([e[0], e[1]]),
                r = !1;
            return e[0] === t[0] && e[1] === t[1] && (r = !0), r
        },
        align: function() {
            var e = this.get(s),
                t = [e.actXY[0], e.actXY[1]],
                n = this.getRegion(!0);
            this.get("stickX") && (t[1] = e.startXY[1] - e.deltaXY[1]), this.get("stickY") && (t[0] = e.startXY[0] - e.deltaXY[0]), n && (t = this._checkRegion(t)), t = this._checkTicks(t, n), e.actXY = t
        },
        drag: function() {
            var t = this.get(s),
                n = this.get("tickX"),
                r = this.get("tickY"),
                i = [t.actXY[0], t.actXY[1]];
            (e.Lang.isNumber(n) || this.get(o)) && this._lastTickXFired !== i[0] && (this._tickAlignX(), this._lastTickXFired = i[0]), (e.Lang.isNumber(r) || this.get(u)) && this._lastTickYFired !== i[1] && (this._tickAlignY(), this._lastTickYFired = i[1])
        },
        _checkTicks: function(e, t) {
            var n = this.get(s),
                r = n.startXY[0] - n.deltaXY[0],
                i = n.startXY[1] - n.deltaXY[1],
                p = this.get("tickX"),
                d = this.get("tickY");
            return p && !this.get(o) && (e[0] = a._calcTicks(e[0], r, p, t[h], t[l])), d && !this.get(u) && (e[1] = a._calcTicks(e[1], i, d, t[f], t[c])), this.get(o) && (e[0] = a._calcTickArray(e[0], this.get(o), t[h], t[l])), this.get(u) && (e[1] = a._calcTickArray(e[1], this.get(u), t[f], t[c])), e
        },
        _tickAlignX: function() {
            this.fire(v)
        },
        _tickAlignY: function() {
            this.fire(m)
        }
    }, e.namespace("Plugin"), e.extend(g, e.Base, d), e.Plugin.DDConstrained = g, e.mix(a, {
        _calcTicks: function(e, t, n, r, i) {
            var s = (e - t) / n,
                o = Math.floor(s),
                u = Math.ceil(s);
            return (o !== 0 || u !== 0) && s >= o && s <= u && (e = t + n * o, r && i && (e < r && (e = t + n * (o + 1)), e > i && (e = t + n * (o - 1)))), e
        },
        _calcTickArray: function(e, t, n, r) {
            var i = 0,
                s = t.length,
                o = 0,
                u, a, f;
            if (!t || t.length === 0) return e;
            if (t[0] >= e) return t[0];
            for (i = 0; i < s; i++) {
                o = i + 1;
                if (t[o] && t[o] >= e) return u = e - t[i], a = t[o] - e, f = a > u ? t[i] : t[o], n && r && f > r && (t[i] ? f = t[i] : f = t[s - 1]), f
            }
            return t[t.length - 1]
        }
    })
}, "@VERSION@", {
    requires: ["dd-drag"]
});
YUI.add("dd-ddm-base", function(e, t) {
    var n = function() {
        n.superclass.constructor.apply(this, arguments)
    };
    n.NAME = "ddm", n.ATTRS = {
        dragCursor: {
            value: "move"
        },
        clickPixelThresh: {
            value: 3
        },
        clickTimeThresh: {
            value: 1e3
        },
        throttleTime: {
            value: -1
        },
        dragMode: {
            value: "point",
            setter: function(e) {
                return this._setDragMode(e), e
            }
        }
    }, e.extend(n, e.Base, {
        _createPG: function() {},
        _active: null,
        _setDragMode: function(t) {
            t === null && (t = e.DD.DDM.get("dragMode"));
            switch (t) {
                case 1:
                case "intersect":
                    return 1;
                case 2:
                case "strict":
                    return 2;
                case 0:
                case "point":
                    return 0
            }
            return 0
        },
        CSS_PREFIX: e.ClassNameManager.getClassName("dd"),
        _activateTargets: function() {},
        _drags: [],
        activeDrag: !1,
        _regDrag: function(e) {
            return this.getDrag(e.get("node")) ? !1 : (this._active || this._setupListeners(), this._drags.push(e), !0)
        },
        _unregDrag: function(t) {
            var n = [];
            e.Array.each(this._drags, function(e) {
                e !== t && (n[n.length] = e)
            }), this._drags = n
        },
        _setupListeners: function() {
            this._createPG(), this._active = !0;
            var t = e.one(e.config.doc);
            t.on("mousemove", e.throttle(e.bind(this._docMove, this), this.get("throttleTime"))), t.on("mouseup", e.bind(this._end, this))
        },
        _start: function() {
            this.fire("ddm:start"), this._startDrag()
        },
        _startDrag: function() {},
        _endDrag: function() {},
        _dropMove: function() {},
        _end: function() {
            this.activeDrag && (this._shimming = !1, this._endDrag(), this.fire("ddm:end"), this.activeDrag.end.call(this.activeDrag), this.activeDrag = null)
        },
        stopDrag: function() {
            return this.activeDrag && this._end(), this
        },
        _shimming: !1,
        _docMove: function(e) {
            this._shimming || this._move(e)
        },
        _move: function(e) {
            this.activeDrag && (this.activeDrag._move.call(this.activeDrag, e), this._dropMove())
        },
        cssSizestoObject: function(e) {
            var t = e.split(" ");
            switch (t.length) {
                case 1:
                    t[1] = t[2] = t[3] = t[0];
                    break;
                case 2:
                    t[2] = t[0], t[3] = t[1];
                    break;
                case 3:
                    t[3] = t[1]
            }
            return {
                top: parseInt(t[0], 10),
                right: parseInt(t[1], 10),
                bottom: parseInt(t[2], 10),
                left: parseInt(t[3], 10)
            }
        },
        getDrag: function(t) {
            var n = !1,
                r = e.one(t);
            return r instanceof e.Node && e.Array.each(this._drags, function(e) {
                r.compareTo(e.get("node")) && (n = e)
            }), n
        },
        swapPosition: function(t, n) {
            t = e.DD.DDM.getNode(t), n = e.DD.DDM.getNode(n);
            var r = t.getXY(),
                i = n.getXY();
            return t.setXY(i), n.setXY(r), t
        },
        getNode: function(t) {
            return t instanceof e.Node ? t : (t && t.get ? e.Widget && t instanceof e.Widget ? t = t.get("boundingBox") : t = t.get("node") : t = e.one(t), t)
        },
        swapNode: function(t, n) {
            t = e.DD.DDM.getNode(t), n = e.DD.DDM.getNode(n);
            var r = n.get("parentNode"),
                i = n.get("nextSibling");
            return i === t ? r.insertBefore(t, n) : n === t.get("nextSibling") ? r.insertBefore(n, t) : (t.get("parentNode").replaceChild(n, t), r.insertBefore(t, i)), t
        }
    }), e.namespace("DD"), e.DD.DDM = new n
}, "@VERSION@", {
    requires: ["node", "base", "yui-throttle", "classnamemanager"]
});
YUI.add("dd-drag", function(e, t) {
    var n = e.DD.DDM,
        r = "node",
        i = "dragging",
        s = "dragNode",
        o = "offsetHeight",
        u = "offsetWidth",
        a = "drag:mouseDown",
        f = "drag:afterMouseDown",
        l = "drag:removeHandle",
        c = "drag:addHandle",
        h = "drag:removeInvalid",
        p = "drag:addInvalid",
        d = "drag:start",
        v = "drag:end",
        m = "drag:drag",
        g = "drag:align",
        y = function(t) {
            this._lazyAddAttrs = !1, y.superclass.constructor.apply(this, arguments);
            var r = n._regDrag(this);
            r || e.error("Failed to register node, already in use: " + t.node)
        };
    y.NAME = "drag", y.START_EVENT = "mousedown", y.ATTRS = {
        node: {
            setter: function(t) {
                if (this._canDrag(t)) return t;
                var n = e.one(t);
                return n || e.error("DD.Drag: Invalid Node Given: " + t), n
            }
        },
        dragNode: {
            setter: function(t) {
                if (this._canDrag(t)) return t;
                var n = e.one(t);
                return n || e.error("DD.Drag: Invalid dragNode Given: " + t), n
            }
        },
        offsetNode: {
            value: !0
        },
        startCentered: {
            value: !1
        },
        clickPixelThresh: {
            value: n.get("clickPixelThresh")
        },
        clickTimeThresh: {
            value: n.get("clickTimeThresh")
        },
        lock: {
            value: !1,
            setter: function(e) {
                return e ? this.get(r).addClass(n.CSS_PREFIX + "-locked") : this.get(r).removeClass(n.CSS_PREFIX + "-locked"), e
            }
        },
        data: {
            value: !1
        },
        move: {
            value: !0
        },
        useShim: {
            value: !0
        },
        activeHandle: {
            value: !1
        },
        primaryButtonOnly: {
            value: !0
        },
        dragging: {
            value: !1
        },
        parent: {
            value: !1
        },
        target: {
            value: !1,
            setter: function(e) {
                return this._handleTarget(e), e
            }
        },
        dragMode: {
            value: null,
            setter: function(e) {
                return n._setDragMode(e)
            }
        },
        groups: {
            value: ["default"],
            getter: function() {
                return this._groups ? e.Object.keys(this._groups) : (this._groups = {}, [])
            },
            setter: function(t) {
                return this._groups = e.Array.hash(t), t
            }
        },
        handles: {
            value: null,
            setter: function(t) {
                return t ? (this._handles = {}, e.Array.each(t, function(t) {
                    var n = t;
                    if (t instanceof e.Node || t instanceof e.NodeList) n = t._yuid;
                    this._handles[n] = t
                }, this)) : this._handles = null, t
            }
        },
        bubbles: {
            setter: function(e) {
                return this.addTarget(e), e
            }
        },
        haltDown: {
            value: !0
        }
    }, e.extend(y, e.Base, {
        _canDrag: function(e) {
            return e && e.setXY && e.getXY && e.test && e.contains ? !0 : !1
        },
        _bubbleTargets: e.DD.DDM,
        addToGroup: function(e) {
            return this._groups[e] = !0, n._activateTargets(), this
        },
        removeFromGroup: function(e) {
            return delete this._groups[e], n._activateTargets(), this
        },
        target: null,
        _handleTarget: function(t) {
            e.DD.Drop && (t === !1 ? this.target && (n._unregTarget(this.target), this.target = null) : (e.Lang.isObject(t) || (t = {}), t.bubbleTargets = t.bubbleTargets || this.getTargets(), t.node = this.get(r), t.groups = t.groups || this.get("groups"), this.target = new e.DD.Drop(t)))
        },
        _groups: null,
        _createEvents: function() {
            this.publish(a, {
                defaultFn: this._defMouseDownFn,
                queuable: !1,
                emitFacade: !0,
                bubbles: !0,
                prefix: "drag"
            }), this.publish(g, {
                defaultFn: this._defAlignFn,
                queuable: !1,
                emitFacade: !0,
                bubbles: !0,
                prefix: "drag"
            }), this.publish(m, {
                defaultFn: this._defDragFn,
                queuable: !1,
                emitFacade: !0,
                bubbles: !0,
                prefix: "drag"
            }), this.publish(v, {
                defaultFn: this._defEndFn,
                preventedFn: this._prevEndFn,
                queuable: !1,
                emitFacade: !0,
                bubbles: !0,
                prefix: "drag"
            });
            var t = [f, l, c, h, p, d, "drag:drophit", "drag:dropmiss", "drag:over", "drag:enter", "drag:exit"];
            e.Array.each(t, function(e) {
                this.publish(e, {
                    type: e,
                    emitFacade: !0,
                    bubbles: !0,
                    preventable: !1,
                    queuable: !1,
                    prefix: "drag"
                })
            }, this)
        },
        _ev_md: null,
        _startTime: null,
        _endTime: null,
        _handles: null,
        _invalids: null,
        _invalidsDefault: {
            textarea: !0,
            input: !0,
            a: !0,
            button: !0,
            select: !0
        },
        _dragThreshMet: null,
        _fromTimeout: null,
        _clickTimeout: null,
        deltaXY: null,
        startXY: null,
        nodeXY: null,
        lastXY: null,
        actXY: null,
        realXY: null,
        mouseXY: null,
        region: null,
        _handleMouseUp: function() {
            this.fire("drag:mouseup"), this._fixIEMouseUp(), n.activeDrag && n._end()
        },
        _fixDragStart: function(e) {
            this.validClick(e) && e.preventDefault()
        },
        _ieSelectFix: function() {
            return !1
        },
        _ieSelectBack: null,
        _fixIEMouseDown: function() {
            e.UA.ie && (this._ieSelectBack = e.config.doc.body.onselectstart, e.config.doc.body.onselectstart = this._ieSelectFix)
        },
        _fixIEMouseUp: function() {
            e.UA.ie && (e.config.doc.body.onselectstart = this._ieSelectBack)
        },
        _handleMouseDownEvent: function(e) {
            this.fire(a, {
                ev: e
            })
        },
        _defMouseDownFn: function(t) {
            var r = t.ev;
            this._dragThreshMet = !1, this._ev_md = r;
            if (this.get("primaryButtonOnly") && r.button > 1) return !1;
            this.validClick(r) && (this._fixIEMouseDown(r), y.START_EVENT.indexOf("gesture") !== 0 && (this.get("haltDown") ? r.halt() : r.preventDefault()), this._setStartPosition([r.pageX, r.pageY]), n.activeDrag = this, this._clickTimeout = e.later(this.get("clickTimeThresh"), this, this._timeoutCheck)), this.fire(f, {
                ev: r
            })
        },
        validClick: function(t) {
            var n = !1,
                i = !1,
                s = t.target,
                o = null,
                u = null,
                a = null,
                f = !1;
            if (this._handles) e.Object.each(this._handles, function(t, r) {
                t instanceof e.Node || t instanceof e.NodeList ? n || (a = t, a instanceof e.Node && (a = new e.NodeList(t._node)), a.each(function(e) {
                    e.contains(s) && (n = !0)
                })) : e.Lang.isString(r) && s.test(r + ", " + r + " *") && !o && (o = r, n = !0)
            });
            else {
                i = this.get(r);
                if (i.contains(s) || i.compareTo(s)) n = !0
            }
            return n && this._invalids && e.Object.each(this._invalids, function(t, r) {
                e.Lang.isString(r) && s.test(r + ", " + r + " *") && (n = !1)
            }), n && (o ? (u = t.currentTarget.all(o), f = !1, u.each(function(e) {
                (e.contains(s) || e.compareTo(s)) && !f && (f = !0, this.set("activeHandle", e))
            }, this)) : this.set("activeHandle", this.get(r))), n
        },
        _setStartPosition: function(e) {
            this.startXY = e, this.nodeXY = this.lastXY = this.realXY = this.get(r).getXY(), this.get("offsetNode") ? this.deltaXY = [this.startXY[0] - this.nodeXY[0], this.startXY[1] - this.nodeXY[1]] : this.deltaXY = [0, 0]
        },
        _timeoutCheck: function() {
            !this.get("lock") && !this._dragThreshMet && this._ev_md && (this._fromTimeout = this._dragThreshMet = !0, this.start(), this._alignNode([this._ev_md.pageX, this._ev_md.pageY], !0))
        },
        removeHandle: function(t) {
            var n = t;
            if (t instanceof e.Node || t instanceof e.NodeList) n = t._yuid;
            return this._handles[n] && (delete this._handles[n], this.fire(l, {
                handle: t
            })), this
        },
        addHandle: function(t) {
            this._handles || (this._handles = {});
            var n = t;
            if (t instanceof e.Node || t instanceof e.NodeList) n = t._yuid;
            return this._handles[n] = t, this.fire(c, {
                handle: t
            }), this
        },
        removeInvalid: function(e) {
            return this._invalids[e] && (this._invalids[e] = null, delete this._invalids[e], this.fire(h, {
                handle: e
            })), this
        },
        addInvalid: function(t) {
            return e.Lang.isString(t) && (this._invalids[t] = !0, this.fire(p, {
                handle: t
            })), this
        },
        initializer: function() {
            this.get(r).dd = this;
            if (!this.get(r).get("id")) {
                var t = e.stamp(this.get(r));
                this.get(r).set("id", t)
            }
            this.actXY = [], this._invalids = e.clone(this._invalidsDefault, !0), this._createEvents(), this.get(s) || this.set(s, this.get(r)), this.on("initializedChange", e.bind(this._prep, this)), this.set("groups", this.get("groups"))
        },
        _prep: function() {
            this._dragThreshMet = !1;
            var t = this.get(r);
            t.addClass(n.CSS_PREFIX + "-draggable"), t.on(y.START_EVENT, e.bind(this._handleMouseDownEvent, this)), t.on("mouseup", e.bind(this._handleMouseUp, this)), t.on("dragstart", e.bind(this._fixDragStart, this))
        },
        _unprep: function() {
            var e = this.get(r);
            e.removeClass(n.CSS_PREFIX + "-draggable"), e.detachAll("mouseup"), e.detachAll("dragstart"), e.detachAll(y.START_EVENT), this.mouseXY = [], this.deltaXY = [0, 0], this.startXY = [], this.nodeXY = [], this.lastXY = [], this.actXY = [], this.realXY = []
        },
        start: function() {
            if (!this.get("lock") && !this.get(i)) {
                var e = this.get(r),
                    t, a, f;
                this._startTime = (new Date).getTime(), n._start(), e.addClass(n.CSS_PREFIX + "-dragging"), this.fire(d, {
                    pageX: this.nodeXY[0],
                    pageY: this.nodeXY[1],
                    startTime: this._startTime
                }), e = this.get(s), f = this.nodeXY, t = e.get(u), a = e.get(o), this.get("startCentered") && this._setStartPosition([f[0] + t / 2, f[1] + a / 2]), this.region = {
                    0: f[0],
                    1: f[1],
                    area: 0,
                    top: f[1],
                    right: f[0] + t,
                    bottom: f[1] + a,
                    left: f[0]
                }, this.set(i, !0)
            }
            return this
        },
        end: function() {
            return this._endTime = (new Date).getTime(), this._clickTimeout && this._clickTimeout.cancel(), this._dragThreshMet = this._fromTimeout = !1, !this.get("lock") && this.get(i) && this.fire(v, {
                pageX: this.lastXY[0],
                pageY: this.lastXY[1],
                startTime: this._startTime,
                endTime: this._endTime
            }), this.get(r).removeClass(n.CSS_PREFIX + "-dragging"), this.set(i, !1), this.deltaXY = [0, 0], this
        },
        _defEndFn: function() {
            this._fixIEMouseUp(), this._ev_md = null
        },
        _prevEndFn: function() {
            this._fixIEMouseUp(), this.get(s).setXY(this.nodeXY), this._ev_md = null, this.region = null
        },
        _align: function(e) {
            this.fire(g, {
                pageX: e[0],
                pageY: e[1]
            })
        },
        _defAlignFn: function(e) {
            this.actXY = [e.pageX - this.deltaXY[0], e.pageY - this.deltaXY[1]]
        },
        _alignNode: function(e, t) {
            this._align(e), t || this._moveNode()
        },
        _moveNode: function(e) {
            var t = [],
                n = [],
                r = this.nodeXY,
                i = this.actXY;
            t[0] = i[0] - this.lastXY[0], t[1] = i[1] - this.lastXY[1], n[0] = i[0] - this.nodeXY[0], n[1] = i[1] - this.nodeXY[1], this.region = {
                0: i[0],
                1: i[1],
                area: 0,
                top: i[1],
                right: i[0] + this.get(s).get(u),
                bottom: i[1] + this.get(s).get(o),
                left: i[0]
            }, this.fire(m, {
                pageX: i[0],
                pageY: i[1],
                scroll: e,
                info: {
                    start: r,
                    xy: i,
                    delta: t,
                    offset: n
                }
            }), this.lastXY = i
        },
        _defDragFn: function(t) {
            if (this.get("move")) {
                if (t.scroll && t.scroll.node) {
                    var n = t.scroll.node.getDOMNode();
                    n === e.config.win ? n.scrollTo(t.scroll.left, t.scroll.top) : (t.scroll.node.set("scrollTop", t.scroll.top), t.scroll.node.set("scrollLeft", t.scroll.left))
                }
                this.get(s).setXY([t.pageX, t.pageY]), this.realXY = [t.pageX, t.pageY]
            }
        },
        _move: function(e) {
            if (this.get("lock")) return !1;
            this.mouseXY = [e.pageX, e.pageY];
            if (!this._dragThreshMet) {
                var t = Math.abs(this.startXY[0] - e.pageX),
                    n = Math.abs(this.startXY[1] - e.pageY);
                if (t > this.get("clickPixelThresh") || n > this.get("clickPixelThresh")) this._dragThreshMet = !0, this.start(), e && e.preventDefault && e.preventDefault(), this._alignNode([e.pageX, e.pageY])
            } else this._clickTimeout && this._clickTimeout.cancel(), this._alignNode([e.pageX, e.pageY])
        },
        stopDrag: function() {
            return this.get(i) && n._end(), this
        },
        destructor: function() {
            this._unprep(), this.target && this.target.destroy(), n._unregDrag(this)
        }
    }), e.namespace("DD"), e.DD.Drag = y
}, "@VERSION@", {
    requires: ["dd-ddm-base"]
});
YUI.add("dd-plugin", function(e, t) {
    var n = function(t) {
            e.Widget && t.host instanceof e.Widget ? (t.node = t.host.get("boundingBox"), t.widget = t.host) : (t.node = t.host, t.widget = !1), n.superclass.constructor.call(this, t)
        },
        r = "drag:start",
        i = "drag:drag",
        s = "drag:end";
    n.NAME = "dd-plugin", n.NS = "dd", e.extend(n, e.DD.Drag, {
        _widgetHandles: null,
        _widget: undefined,
        _stoppedPosition: undefined,
        _usesWidgetPosition: function(t) {
            var n = !1;
            return t && (n = t.hasImpl && t.hasImpl(e.WidgetPosition) ? !0 : !1), n
        },
        _checkEvents: function() {
            this._widget && (this.proxy ? this._widgetHandles.length > 0 && this._removeWidgetListeners() : this._widgetHandles.length === 0 && this._attachWidgetListeners())
        },
        _removeWidgetListeners: function() {
            e.Array.each(this._widgetHandles, function(e) {
                e.detach()
            }), this._widgetHandles = []
        },
        _attachWidgetListeners: function() {
            this._usesWidgetPosition(this._widget) && (this._widgetHandles.push(this.on(i, this._setWidgetCoords)), this._widgetHandles.push(this.on(s, this._updateStopPosition)))
        },
        initializer: function(e) {
            this._widgetHandles = [], this._widget = e.widget, this.on(r, this._checkEvents), this._attachWidgetListeners()
        },
        _setWidgetCoords: function(e) {
            var t = this._stoppedPosition || e.target.nodeXY,
                n = e.target.realXY,
                r = [n[0] - t[0], n[1] - t[1]];
            r[0] !== 0 && r[1] !== 0 ? this._widget.set("xy", n) : r[0] === 0 ? this._widget.set("y", n[1]) : r[1] === 0 && this._widget.set("x", n[0])
        },
        _updateStopPosition: function(e) {
            this._stoppedPosition = e.target.realXY
        }
    }), e.namespace("Plugin"), e.Plugin.Drag = n
}, "@VERSION@", {
    optional: ["dd-constrain", "dd-proxy"],
    requires: ["dd-drag"]
});
YUI.add("dom-base", function(e, t) {
    var n = e.config.doc.documentElement,
        r = e.DOM,
        i = "tagName",
        s = "ownerDocument",
        o = "",
        u = e.Features.add,
        a = e.Features.test;
    e.mix(r, {
        getText: n.textContent !== undefined ? function(e) {
            var t = "";
            return e && (t = e.textContent), t || ""
        } : function(e) {
            var t = "";
            return e && (t = e.innerText || e.nodeValue), t || ""
        },
        setText: n.textContent !== undefined ? function(e, t) {
            e && (e.textContent = t)
        } : function(e, t) {
            "innerText" in e ? e.innerText = t : "nodeValue" in e && (e.nodeValue = t)
        },
        CUSTOM_ATTRIBUTES: n.hasAttribute ? {
            htmlFor: "for",
            className: "class"
        } : {
            "for": "htmlFor",
            "class": "className"
        },
        setAttribute: function(e, t, n, i) {
            e && t && e.setAttribute && (t = r.CUSTOM_ATTRIBUTES[t] || t, e.setAttribute(t, n, i))
        },
        getAttribute: function(e, t, n) {
            n = n !== undefined ? n : 2;
            var i = "";
            return e && t && e.getAttribute && (t = r.CUSTOM_ATTRIBUTES[t] || t, i = e.tagName === "BUTTON" && t === "value" ? r.getValue(e) : e.getAttribute(t, n), i === null && (i = "")), i
        },
        VALUE_SETTERS: {},
        VALUE_GETTERS: {},
        getValue: function(e) {
            var t = "",
                n;
            return e && e[i] && (n = r.VALUE_GETTERS[e[i].toLowerCase()], n ? t = n(e) : t = e.value), t === o && (t = o), typeof t == "string" ? t : ""
        },
        setValue: function(e, t) {
            var n;
            e && e[i] && (n = r.VALUE_SETTERS[e[i].toLowerCase()], t = t === null ? "" : t, n ? n(e, t) : e.value = t)
        },
        creators: {}
    }), u("value-set", "select", {
        test: function() {
            var t = e.config.doc.createElement("select");
            return t.innerHTML = "<option>1</option><option>2</option>", t.value = "2", t.value && t.value === "2"
        }
    }), a("value-set", "select") || (r.VALUE_SETTERS.select = function(e, t) {
        for (var n = 0, i = e.getElementsByTagName("option"), s; s = i[n++];)
            if (r.getValue(s) === t) {
                s.selected = !0;
                break
            }
    }), e.mix(r.VALUE_GETTERS, {
        button: function(e) {
            return e.attributes && e.attributes.value ? e.attributes.value.value : ""
        }
    }), e.mix(r.VALUE_SETTERS, {
        button: function(e, t) {
            var n = e.attributes.value;
            n || (n = e[s].createAttribute("value"), e.setAttributeNode(n)), n.value = t
        }
    }), e.mix(r.VALUE_GETTERS, {
        option: function(e) {
            var t = e.attributes;
            return t.value && t.value.specified ? e.value : e.text
        },
        select: function(e) {
            var t = e.value,
                n = e.options;
            return n && n.length && (e.multiple || e.selectedIndex > -1 && (t = r.getValue(n[e.selectedIndex]))), t
        }
    });
    var f, l, c;
    e.mix(e.DOM, {
        hasClass: function(t, n) {
            var r = e.DOM._getRegExp("(?:^|\\s+)" + n + "(?:\\s+|$)");
            return r.test(t.className)
        },
        addClass: function(t, n) {
            e.DOM.hasClass(t, n) || (t.className = e.Lang.trim([t.className, n].join(" ")))
        },
        removeClass: function(t, n) {
            n && l(t, n) && (t.className = e.Lang.trim(t.className.replace(e.DOM._getRegExp("(?:^|\\s+)" + n + "(?:\\s+|$)"), " ")), l(t, n) && c(t, n))
        },
        replaceClass: function(e, t, n) {
            c(e, t), f(e, n)
        },
        toggleClass: function(e, t, n) {
            var r = n !== undefined ? n : !l(e, t);
            r ? f(e, t) : c(e, t)
        }
    }), l = e.DOM.hasClass, c = e.DOM.removeClass, f = e.DOM.addClass;
    var h = /<([a-z]+)/i,
        r = e.DOM,
        u = e.Features.add,
        a = e.Features.test,
        p = {},
        d = function(t, n) {
            var r = e.config.doc.createElement("div"),
                i = !0;
            r.innerHTML = t;
            if (!r.firstChild || r.firstChild.tagName !== n.toUpperCase()) i = !1;
            return i
        },
        v = /(?:\/(?:thead|tfoot|tbody|caption|col|colgroup)>)+\s*<tbody/,
        m = "<table>",
        g = "</table>",
        y;
    e.mix(e.DOM, {
        _fragClones: {},
        _create: function(e, t, n) {
            n = n || "div";
            var i = r._fragClones[n];
            return i ? i = i.cloneNode(!1) : i = r._fragClones[n] = t.createElement(n), i.innerHTML = e, i
        },
        _children: function(e, t) {
            var n = 0,
                r = e.children,
                i, s, o;
            r && r.tags && (t ? r = e.children.tags(t) : s = r.tags("!").length);
            if (!r || !r.tags && t || s) {
                i = r || e.childNodes, r = [];
                while (o = i[n++]) o.nodeType === 1 && (!t || t === o.tagName) && r.push(o)
            }
            return r || []
        },
        create: function(t, n) {
            typeof t == "string" && (t = e.Lang.trim(t)), n = n || e.config.doc;
            var i = h.exec(t),
                s = r._create,
                o = p,
                u = null,
                a, f, l, c;
            return t != undefined && (i && i[1] && (a = o[i[1].toLowerCase()], typeof a == "function" ? s = a : f = a), l = s(t, n, f), c = l.childNodes, c.length === 1 ? u = l.removeChild(c[0]) : c[0] && c[0].className === "yui3-big-dummy" ? (y = l.selectedIndex, c.length === 2 ? u = c[0].nextSibling : (l.removeChild(c[0]), u = r._nl2frag(c, n))) : u = r._nl2frag(c, n)), u
        },
        _nl2frag: function(t, n) {
            var r = null,
                i, s;
            if (t && (t.push || t.item) && t[0]) {
                n = n || t[0].ownerDocument, r = n.createDocumentFragment(), t.item && (t = e.Array(t, 0, !0));
                for (i = 0, s = t.length; i < s; i++) r.appendChild(t[i])
            }
            return r
        },
        addHTML: function(t, n, i) {
            var s = t.parentNode,
                o = 0,
                u, a = n,
                f;
            if (n != undefined)
                if (n.nodeType) f = n;
                else if (typeof n == "string" || typeof n == "number") a = f = r.create(n);
            else if (n[0] && n[0].nodeType) {
                f = e.config.doc.createDocumentFragment();
                while (u = n[o++]) f.appendChild(u)
            }
            if (i)
                if (f && i.parentNode) i.parentNode.insertBefore(f, i);
                else switch (i) {
                    case "replace":
                        while (t.firstChild) t.removeChild(t.firstChild);
                        f && t.appendChild(f);
                        break;
                    case "before":
                        f && s.insertBefore(f, t);
                        break;
                    case "after":
                        f && (t.nextSibling ? s.insertBefore(f, t.nextSibling) : s.appendChild(f));
                        break;
                    default:
                        f && t.appendChild(f)
                } else f && t.appendChild(f);
            return t.nodeName == "SELECT" && y > 0 && (t.selectedIndex = y - 1), a
        },
        wrap: function(t, n) {
            var r = n && n.nodeType ? n : e.DOM.create(n),
                i = r.getElementsByTagName("*");
            i.length && (r = i[i.length - 1]), t.parentNode && t.parentNode.replaceChild(r, t), r.appendChild(t)
        },
        unwrap: function(e) {
            var t = e.parentNode,
                n = t.lastChild,
                r = e,
                i;
            if (t) {
                i = t.parentNode;
                if (i) {
                    e = t.firstChild;
                    while (e !== n) r = e.nextSibling, i.insertBefore(e, t), e = r;
                    i.replaceChild(n, t)
                } else t.removeChild(e)
            }
        }
    }), u("innerhtml", "table", {
        test: function() {
            var t = e.config.doc.createElement("table");
            try {
                t.innerHTML = "<tbody></tbody>"
            } catch (n) {
                return !1
            }
            return t.firstChild && t.firstChild.nodeName === "TBODY"
        }
    }), u("innerhtml-div", "tr", {
        test: function() {
            return d("<tr></tr>", "tr")
        }
    }), u("innerhtml-div", "script", {
        test: function() {
            return d("<script></script>", "script")
        }
    }), a("innerhtml", "table") || (p.tbody = function(t, n) {
        var i = r.create(m + t + g, n),
            s = e.DOM._children(i, "tbody")[0];
        return i.children.length > 1 && s && !v.test(t) && s.parentNode.removeChild(s), i
    }), a("innerhtml-div", "script") || (p.script = function(e, t) {
        var n = t.createElement("div");
        return n.innerHTML = "-" + e, n.removeChild(n.firstChild), n
    }, p.link = p.style = p.script), a("innerhtml-div", "tr") || (e.mix(p, {
        option: function(e, t) {
            return r.create('<select><option class="yui3-big-dummy" selected></option>' + e + "</select>", t)
        },
        tr: function(e, t) {
            return r.create("<tbody>" + e + "</tbody>", t)
        },
        td: function(e, t) {
            return r.create("<tr>" + e + "</tr>", t)
        },
        col: function(e, t) {
            return r.create("<colgroup>" + e + "</colgroup>", t)
        },
        tbody: "table"
    }), e.mix(p, {
        legend: "fieldset",
        th: p.td,
        thead: p.tbody,
        tfoot: p.tbody,
        caption: p.tbody,
        colgroup: p.tbody,
        optgroup: p.option
    })), r.creators = p, e.mix(e.DOM, {
        setWidth: function(t, n) {
            e.DOM._setSize(t, "width", n)
        },
        setHeight: function(t, n) {
            e.DOM._setSize(t, "height", n)
        },
        _setSize: function(e, t, n) {
            n = n > 0 ? n : 0;
            var r = 0;
            e.style[t] = n + "px", r = t === "height" ? e.offsetHeight : e.offsetWidth, r > n && (n -= r - n, n < 0 && (n = 0), e.style[t] = n + "px")
        }
    })
}, "@VERSION@", {
    requires: ["dom-core"]
});
YUI.add("dom-core", function(e, t) {
    var n = "nodeType",
        r = "ownerDocument",
        i = "documentElement",
        s = "defaultView",
        o = "parentWindow",
        u = "tagName",
        a = "parentNode",
        f = "previousSibling",
        l = "nextSibling",
        c = "contains",
        h = "compareDocumentPosition",
        p = [],
        d = function() {
            var t = e.config.doc.createElement("div"),
                n = t.appendChild(e.config.doc.createTextNode("")),
                r = !1;
            try {
                r = t.contains(n)
            } catch (i) {}
            return r
        }(),
        v = {
            byId: function(e, t) {
                return v.allById(e, t)[0] || null
            },
            getId: function(e) {
                var t;
                return e.id && !e.id.tagName && !e.id.item ? t = e.id : e.attributes && e.attributes.id && (t = e.attributes.id.value), t
            },
            setId: function(e, t) {
                e.setAttribute ? e.setAttribute("id", t) : e.id = t
            },
            ancestor: function(e, t, n, r) {
                var i = null;
                return n && (i = !t || t(e) ? e : null), i || v.elementByAxis(e, a, t, null, r)
            },
            ancestors: function(e, t, n, r) {
                var i = e,
                    s = [];
                while (i = v.ancestor(i, t, n, r)) {
                    n = !1;
                    if (i) {
                        s.unshift(i);
                        if (r && r(i)) return s
                    }
                }
                return s
            },
            elementByAxis: function(e, t, n, r, i) {
                while (e && (e = e[t])) {
                    if ((r || e[u]) && (!n || n(e))) return e;
                    if (i && i(e)) return null
                }
                return null
            },
            contains: function(e, t) {
                var r = !1;
                if (!t || !e || !t[n] || !e[n]) r = !1;
                else if (e[c] && (t[n] === 1 || d)) r = e[c](t);
                else if (e[h]) {
                    if (e === t || !!(e[h](t) & 16)) r = !0
                } else r = v._bruteContains(e, t);
                return r
            },
            inDoc: function(e, t) {
                var n = !1,
                    s;
                return e && e.nodeType && (t || (t = e[r]), s = t[i], s && s.contains && e.tagName ? n = s.contains(e) : n = v.contains(s, e)), n
            },
            allById: function(t, n) {
                n = n || e.config.doc;
                var r = [],
                    i = [],
                    s, o;
                if (n.querySelectorAll) i = n.querySelectorAll('[id="' + t + '"]');
                else if (n.all) {
                    r = n.all(t);
                    if (r) {
                        r.nodeName && (r.id === t ? (i.push(r), r = p) : r = [r]);
                        if (r.length)
                            for (s = 0; o = r[s++];)(o.id === t || o.attributes && o.attributes.id && o.attributes.id.value === t) && i.push(o)
                    }
                } else i = [v._getDoc(n).getElementById(t)];
                return i
            },
            isWindow: function(e) {
                return !!(e && e.scrollTo && e.document)
            },
            _removeChildNodes: function(e) {
                while (e.firstChild) e.removeChild(e.firstChild)
            },
            siblings: function(e, t) {
                var n = [],
                    r = e;
                while (r = r[f]) r[u] && (!t || t(r)) && n.unshift(r);
                r = e;
                while (r = r[l]) r[u] && (!t || t(r)) && n.push(r);
                return n
            },
            _bruteContains: function(e, t) {
                while (t) {
                    if (e === t) return !0;
                    t = t.parentNode
                }
                return !1
            },
            _getRegExp: function(e, t) {
                return t = t || "", v._regexCache = v._regexCache || {}, v._regexCache[e + t] || (v._regexCache[e + t] = new RegExp(e, t)), v._regexCache[e + t]
            },
            _getDoc: function(t) {
                var i = e.config.doc;
                return t && (i = t[n] === 9 ? t : t[r] || t.document || e.config.doc), i
            },
            _getWin: function(t) {
                var n = v._getDoc(t);
                return n[s] || n[o] || e.config.win
            },
            _batch: function(e, t, n, r, i, s) {
                t = typeof t == "string" ? v[t] : t;
                var o, u = 0,
                    a, f;
                if (t && e)
                    while (a = e[u++]) o = o = t.call(v, a, n, r, i, s), typeof o != "undefined" && (f || (f = []), f.push(o));
                return typeof f != "undefined" ? f : e
            },
            generateID: function(t) {
                var n = t.id;
                return n || (n = e.stamp(t), t.id = n), n
            }
        };
    e.DOM = v
}, "@VERSION@", {
    requires: ["oop", "features"]
});
YUI.add("dom-screen", function(e, t) {
    (function(e) {
        var t = "documentElement",
            n = "compatMode",
            r = "position",
            i = "fixed",
            s = "relative",
            o = "left",
            u = "top",
            a = "BackCompat",
            f = "medium",
            l = "borderLeftWidth",
            c = "borderTopWidth",
            h = "getBoundingClientRect",
            p = "getComputedStyle",
            d = e.DOM,
            v = /^t(?:able|d|h)$/i,
            m;
        e.UA.ie && (e.config.doc[n] !== "BackCompat" ? m = t : m = "body"), e.mix(d, {
            winHeight: function(e) {
                var t = d._getWinSize(e).height;
                return t
            },
            winWidth: function(e) {
                var t = d._getWinSize(e).width;
                return t
            },
            docHeight: function(e) {
                var t = d._getDocSize(e).height;
                return Math.max(t, d._getWinSize(e).height)
            },
            docWidth: function(e) {
                var t = d._getDocSize(e).width;
                return Math.max(t, d._getWinSize(e).width)
            },
            docScrollX: function(n, r) {
                r = r || n ? d._getDoc(n) : e.config.doc;
                var i = r.defaultView,
                    s = i ? i.pageXOffset : 0;
                return Math.max(r[t].scrollLeft, r.body.scrollLeft, s)
            },
            docScrollY: function(n, r) {
                r = r || n ? d._getDoc(n) : e.config.doc;
                var i = r.defaultView,
                    s = i ? i.pageYOffset : 0;
                return Math.max(r[t].scrollTop, r.body.scrollTop, s)
            },
            getXY: function() {
                return e.config.doc[t][h] ? function(r) {
                    var i = null,
                        s, o, u, f, l, c, p, v, g, y;
                    if (r && r.tagName) {
                        p = r.ownerDocument, u = p[n], u !== a ? y = p[t] : y = p.body, y.contains ? g = y.contains(r) : g = e.DOM.contains(y, r);
                        if (g) {
                            v = p.defaultView, v && "pageXOffset" in v ? (s = v.pageXOffset, o = v.pageYOffset) : (s = m ? p[m].scrollLeft : d.docScrollX(r, p), o = m ? p[m].scrollTop : d.docScrollY(r, p)), e.UA.ie && (!p.documentMode || p.documentMode < 8 || u === a) && (l = y.clientLeft, c = y.clientTop), f = r[h](), i = [f.left, f.top];
                            if (l || c) i[0] -= l, i[1] -= c;
                            if (o || s)
                                if (!e.UA.ios || e.UA.ios >= 4.2) i[0] += s, i[1] += o
                        } else i = d._getOffset(r)
                    }
                    return i
                } : function(t) {
                    var n = null,
                        s, o, u, a, f;
                    if (t)
                        if (d.inDoc(t)) {
                            n = [t.offsetLeft, t.offsetTop], s = t.ownerDocument, o = t, u = e.UA.gecko || e.UA.webkit > 519 ? !0 : !1;
                            while (o = o.offsetParent) n[0] += o.offsetLeft, n[1] += o.offsetTop, u && (n = d._calcBorders(o, n));
                            if (d.getStyle(t, r) != i) {
                                o = t;
                                while (o = o.parentNode) {
                                    a = o.scrollTop, f = o.scrollLeft, e.UA.gecko && d.getStyle(o, "overflow") !== "visible" && (n = d._calcBorders(o, n));
                                    if (a || f) n[0] -= f, n[1] -= a
                                }
                                n[0] += d.docScrollX(t, s), n[1] += d.docScrollY(t, s)
                            } else n[0] += d.docScrollX(t, s), n[1] += d.docScrollY(t, s)
                        } else n = d._getOffset(t);
                    return n
                }
            }(),
            getScrollbarWidth: e.cached(function() {
                var t = e.config.doc,
                    n = t.createElement("div"),
                    r = t.getElementsByTagName("body")[0],
                    i = .1;
                return r && (n.style.cssText = "position:absolute;visibility:hidden;overflow:scroll;width:20px;", n.appendChild(t.createElement("p")).style.height = "1px", r.insertBefore(n, r.firstChild), i = n.offsetWidth - n.clientWidth, r.removeChild(n)), i
            }, null, .1),
            getX: function(e) {
                return d.getXY(e)[0]
            },
            getY: function(e) {
                return d.getXY(e)[1]
            },
            setXY: function(e, t, n) {
                var i = d.setStyle,
                    a, f, l, c;
                e && t && (a = d.getStyle(e, r), f = d._getOffset(e), a == "static" && (a = s, i(e, r, a)), c = d.getXY(e), t[0] !== null && i(e, o, t[0] - c[0] + f[0] + "px"), t[1] !== null && i(e, u, t[1] - c[1] + f[1] + "px"), n || (l = d.getXY(e), (l[0] !== t[0] || l[1] !== t[1]) && d.setXY(e, t, !0)))
            },
            setX: function(e, t) {
                return d.setXY(e, [t, null])
            },
            setY: function(e, t) {
                return d.setXY(e, [null, t])
            },
            swapXY: function(e, t) {
                var n = d.getXY(e);
                d.setXY(e, d.getXY(t)), d.setXY(t, n)
            },
            _calcBorders: function(t, n) {
                var r = parseInt(d[p](t, c), 10) || 0,
                    i = parseInt(d[p](t, l), 10) || 0;
                return e.UA.gecko && v.test(t.tagName) && (r = 0, i = 0), n[0] += i, n[1] += r, n
            },
            _getWinSize: function(r, i) {
                i = i || r ? d._getDoc(r) : e.config.doc;
                var s = i.defaultView || i.parentWindow,
                    o = i[n],
                    u = s.innerHeight,
                    a = s.innerWidth,
                    f = i[t];
                return o && !e.UA.opera && (o != "CSS1Compat" && (f = i.body), u = f.clientHeight, a = f.clientWidth), {
                    height: u,
                    width: a
                }
            },
            _getDocSize: function(r) {
                var i = r ? d._getDoc(r) : e.config.doc,
                    s = i[t];
                return i[n] != "CSS1Compat" && (s = i.body), {
                    height: s.scrollHeight,
                    width: s.scrollWidth
                }
            }
        })
    })(e),
    function(e) {
        var t = "top",
            n = "right",
            r = "bottom",
            i = "left",
            s = function(e, s) {
                var o = Math.max(e[t], s[t]),
                    u = Math.min(e[n], s[n]),
                    a = Math.min(e[r], s[r]),
                    f = Math.max(e[i], s[i]),
                    l = {};
                return l[t] = o, l[n] = u, l[r] = a, l[i] = f, l
            },
            o = e.DOM;
        e.mix(o, {
            region: function(e) {
                var t = o.getXY(e),
                    n = !1;
                return e && t && (n = o._getRegion(t[1], t[0] + e.offsetWidth, t[1] + e.offsetHeight, t[0])), n
            },
            intersect: function(u, a, f) {
                var l = f || o.region(u),
                    c = {},
                    h = a,
                    p;
                if (h.tagName) c = o.region(h);
                else {
                    if (!e.Lang.isObject(a)) return !1;
                    c = a
                }
                return p = s(c, l), {
                    top: p[t],
                    right: p[n],
                    bottom: p[r],
                    left: p[i],
                    area: (p[r] - p[t]) * (p[n] - p[i]),
                    yoff: p[r] - p[t],
                    xoff: p[n] - p[i],
                    inRegion: o.inRegion(u, a, !1, f)
                }
            },
            inRegion: function(u, a, f, l) {
                var c = {},
                    h = l || o.region(u),
                    p = a,
                    d;
                if (p.tagName) c = o.region(p);
                else {
                    if (!e.Lang.isObject(a)) return !1;
                    c = a
                }
                return f ? h[i] >= c[i] && h[n] <= c[n] && h[t] >= c[t] && h[r] <= c[r] : (d = s(c, h), d[r] >= d[t] && d[n] >= d[i] ? !0 : !1)
            },
            inViewportRegion: function(e, t, n) {
                return o.inRegion(e, o.viewportRegion(e), t, n)
            },
            _getRegion: function(e, s, o, u) {
                var a = {};
                return a[t] = a[1] = e, a[i] = a[0] = u, a[r] = o, a[n] = s, a.width = a[n] - a[i], a.height = a[r] - a[t], a
            },
            viewportRegion: function(t) {
                t = t || e.config.doc.documentElement;
                var n = !1,
                    r, i;
                return t && (r = o.docScrollX(t), i = o.docScrollY(t), n = o._getRegion(i, o.winWidth(t) + r, i + o.winHeight(t), r)), n
            }
        })
    }(e)
}, "@VERSION@", {
    requires: ["dom-base", "dom-style"]
});
YUI.add("dom-style-ie", function(e, t) {
    (function(e) {
        var t = "hasLayout",
            n = "px",
            r = "filter",
            i = "filters",
            s = "opacity",
            o = "auto",
            u = "borderWidth",
            a = "borderTopWidth",
            f = "borderRightWidth",
            l = "borderBottomWidth",
            c = "borderLeftWidth",
            h = "width",
            p = "height",
            d = "transparent",
            v = "visible",
            m = "getComputedStyle",
            g = undefined,
            y = e.config.doc.documentElement,
            b = e.Features.test,
            w = e.Features.add,
            E = /^(\d[.\d]*)+(em|ex|px|gd|rem|vw|vh|vm|ch|mm|cm|in|pt|pc|deg|rad|ms|s|hz|khz|%){1}?/i,
            S = e.UA.ie >= 8,
            x = function(e) {
                return e.currentStyle || e.style
            },
            T = {
                CUSTOM_STYLES: {},
                get: function(t, r) {
                    var i = "",
                        o;
                    return t && (o = x(t)[r], r === s && e.DOM.CUSTOM_STYLES[s] ? i = e.DOM.CUSTOM_STYLES[s].get(t) : !o || o.indexOf && o.indexOf(n) > -1 ? i = o : e.DOM.IE.COMPUTED[r] ? i = e.DOM.IE.COMPUTED[r](t, r) : E.test(o) ? i = T.getPixel(t, r) + n : i = o), i
                },
                sizeOffsets: {
                    width: ["Left", "Right"],
                    height: ["Top", "Bottom"],
                    top: ["Top"],
                    bottom: ["Bottom"]
                },
                getOffset: function(e, t) {
                    var r = x(e)[t],
                        i = t.charAt(0).toUpperCase() + t.substr(1),
                        s = "offset" + i,
                        u = "pixel" + i,
                        a = T.sizeOffsets[t],
                        f = e.ownerDocument.compatMode,
                        l = "";
                    return r === o || r.indexOf("%") > -1 ? (l = e["offset" + i], f !== "BackCompat" && (a[0] && (l -= T.getPixel(e, "padding" + a[0]), l -= T.getBorderWidth(e, "border" + a[0] + "Width", 1)), a[1] && (l -= T.getPixel(e, "padding" + a[1]), l -= T.getBorderWidth(e, "border" + a[1] + "Width", 1)))) : (!e.style[u] && !e.style[t] && (e.style[t] = r), l = e.style[u]), l + n
                },
                borderMap: {
                    thin: S ? "1px" : "2px",
                    medium: S ? "3px" : "4px",
                    thick: S ? "5px" : "6px"
                },
                getBorderWidth: function(e, t, r) {
                    var i = r ? "" : n,
                        s = e.currentStyle[t];
                    return s.indexOf(n) < 0 && (T.borderMap[s] && e.currentStyle.borderStyle !== "none" ? s = T.borderMap[s] : s = 0), r ? parseFloat(s) : s
                },
                getPixel: function(e, t) {
                    var n = null,
                        r = x(e),
                        i = r.right,
                        s = r[t];
                    return e.style.right = s, n = e.style.pixelRight, e.style.right = i, n
                },
                getMargin: function(e, t) {
                    var r, i = x(e);
                    return i[t] == o ? r = 0 : r = T.getPixel(e, t), r + n
                },
                getVisibility: function(e, t) {
                    var n;
                    while ((n = e.currentStyle) && n[t] == "inherit") e = e.parentNode;
                    return n ? n[t] : v
                },
                getColor: function(t, n) {
                    var r = x(t)[n];
                    return (!r || r === d) && e.DOM.elementByAxis(t, "parentNode", null, function(e) {
                        r = x(e)[n];
                        if (r && r !== d) return t = e, !0
                    }), e.Color.toRGB(r)
                },
                getBorderColor: function(t, n) {
                    var r = x(t),
                        i = r[n] || r.color;
                    return e.Color.toRGB(e.Color.toHex(i))
                }
            },
            N = {};
        w("style", "computedStyle", {
            test: function() {
                return "getComputedStyle" in e.config.win
            }
        }), w("style", "opacity", {
            test: function() {
                return "opacity" in y.style
            }
        }), w("style", "filter", {
            test: function() {
                return "filters" in y
            }
        }), !b("style", "opacity") && b("style", "filter") && (e.DOM.CUSTOM_STYLES[s] = {
            get: function(e) {
                var t = 100;
                try {
                    t = e[i]["DXImageTransform.Microsoft.Alpha"][s]
                } catch (n) {
                    try {
                        t = e[i]("alpha")[s]
                    } catch (r) {}
                }
                return t / 100
            },
            set: function(e, n, i) {
                var o, u = x(e),
                    a = u[r];
                i = i || e.style, n === "" && (o = s in u ? u[s] : 1, n = o), typeof a == "string" && (i[r] = a.replace(/alpha([^)]*\))/gi, "") + (n <= 1 ? "alpha(" + s + "=" + n * 100 + ")" : ""), i[r] || i.removeAttribute(r), u[t] || (i.zoom = 1))
            }
        });
        try {
            e.config.doc.createElement("div").style.height = "-1px"
        } catch (C) {
            e.DOM.CUSTOM_STYLES.height = {
                set: function(e, t, n) {
                    var r = parseFloat(t);
                    if (r >= 0 || t === "auto" || t === "") n.height = t
                }
            }, e.DOM.CUSTOM_STYLES.width = {
                set: function(e, t, n) {
                    var r = parseFloat(t);
                    if (r >= 0 || t === "auto" || t === "") n.width = t
                }
            }
        }
        b("style", "computedStyle") || (N[h] = N[p] = T.getOffset, N.color = N.backgroundColor = T.getColor, N[u] = N[a] = N[f] = N[l] = N[c] = T.getBorderWidth, N.marginTop = N.marginRight = N.marginBottom = N.marginLeft = T.getMargin, N.visibility = T.getVisibility, N.borderColor = N.borderTopColor = N.borderRightColor = N.borderBottomColor = N.borderLeftColor = T.getBorderColor, e.DOM[m] = T.get, e.namespace("DOM.IE"), e.DOM.IE.COMPUTED = N, e.DOM.IE.ComputedStyle = T)
    })(e)
}, "@VERSION@", {
    requires: ["dom-style"]
});
YUI.add("dom-style", function(e, t) {
    (function(e) {
        var t = "documentElement",
            n = "defaultView",
            r = "ownerDocument",
            i = "style",
            s = "float",
            o = "cssFloat",
            u = "styleFloat",
            a = "transparent",
            f = "getComputedStyle",
            l = "getBoundingClientRect",
            c = e.config.win,
            h = e.config.doc,
            p = undefined,
            d = e.DOM,
            v = "transform",
            m = "transformOrigin",
            g = ["WebkitTransform", "MozTransform", "OTransform", "msTransform"],
            y = /color$/i,
            b = /width|height|top|left|right|bottom|margin|padding/i;
        e.Array.each(g, function(e) {
            e in h[t].style && (v = e, m = e + "Origin")
        }), e.mix(d, {
            DEFAULT_UNIT: "px",
            CUSTOM_STYLES: {},
            setStyle: function(e, t, n, r) {
                r = r || e.style;
                var i = d.CUSTOM_STYLES;
                if (r) {
                    n === null || n === "" ? n = "" : !isNaN(new Number(n)) && b.test(t) && (n += d.DEFAULT_UNIT);
                    if (t in i) {
                        if (i[t].set) {
                            i[t].set(e, n, r);
                            return
                        }
                        typeof i[t] == "string" && (t = i[t])
                    } else t === "" && (t = "cssText", n = "");
                    r[t] = n
                }
            },
            getStyle: function(e, t, n) {
                n = n || e.style;
                var r = d.CUSTOM_STYLES,
                    i = "";
                if (n) {
                    if (t in r) {
                        if (r[t].get) return r[t].get(e, t, n);
                        typeof r[t] == "string" && (t = r[t])
                    }
                    i = n[t], i === "" && (i = d[f](e, t))
                }
                return i
            },
            setStyles: function(t, n) {
                var r = t.style;
                e.each(n, function(e, n) {
                    d.setStyle(t, n, e, r)
                }, d)
            },
            getComputedStyle: function(e, t) {
                var s = "",
                    o = e[r],
                    u;
                return e[i] && o[n] && o[n][f] && (u = o[n][f](e, null), u && (s = u[t])), s
            }
        }), h[t][i][o] !== p ? d.CUSTOM_STYLES[s] = o : h[t][i][u] !== p && (d.CUSTOM_STYLES[s] = u), e.UA.opera && (d[f] = function(t, i) {
            var s = t[r][n],
                o = s[f](t, "")[i];
            return y.test(i) && (o = e.Color.toRGB(o)), o
        }), e.UA.webkit && (d[f] = function(e, t) {
            var i = e[r][n],
                s = i[f](e, "")[t];
            return s === "rgba(0, 0, 0, 0)" && (s = a), s
        }), e.DOM._getAttrOffset = function(t, n) {
            var r = e.DOM[f](t, n),
                i = t.offsetParent,
                s, o, u;
            return r === "auto" && (s = e.DOM.getStyle(t, "position"), s === "static" || s === "relative" ? r = 0 : i && i[l] && (o = i[l]()[n], u = t[l]()[n], n === "left" || n === "top" ? r = u - o : r = o - t[l]()[n])), r
        }, e.DOM._getOffset = function(e) {
            var t, n = null;
            return e && (t = d.getStyle(e, "position"), n = [parseInt(d[f](e, "left"), 10), parseInt(d[f](e, "top"), 10)], isNaN(n[0]) && (n[0] = parseInt(d.getStyle(e, "left"), 10), isNaN(n[0]) && (n[0] = t === "relative" ? 0 : e.offsetLeft || 0)), isNaN(n[1]) && (n[1] = parseInt(d.getStyle(e, "top"), 10), isNaN(n[1]) && (n[1] = t === "relative" ? 0 : e.offsetTop || 0))), n
        }, d.CUSTOM_STYLES.transform = {
            set: function(e, t, n) {
                n[v] = t
            },
            get: function(e, t) {
                return d[f](e, v)
            }
        }, d.CUSTOM_STYLES.transformOrigin = {
            set: function(e, t, n) {
                n[m] = t
            },
            get: function(e, t) {
                return d[f](e, m)
            }
        }
    })(e)
}, "@VERSION@", {
    requires: ["dom-base", "color-base"]
});
YUI.add("escape", function(e, t) {
    var n = {
            "&": "&amp;",
            "<": "&lt;",
            ">": "&gt;",
            '"': "&quot;",
            "'": "&#x27;",
            "/": "&#x2F;",
            "`": "&#x60;"
        },
        r = {
            html: function(e) {
                return (e + "").replace(/[&<>"'\/`]/g, r._htmlReplacer)
            },
            regex: function(e) {
                return (e + "").replace(/[\-$\^*()+\[\]{}|\\,.?\s]/g, "\\$&")
            },
            _htmlReplacer: function(e) {
                return n[e]
            }
        };
    r.regexp = r.regex, e.Escape = r
}, "@VERSION@", {
    requires: ["yui-base"]
});
YUI.add("event-base", function(e, t) {
    e.publish("domready", {
        fireOnce: !0,
        async: !0
    }), YUI.Env.DOMReady ? e.fire("domready") : e.Do.before(function() {
        e.fire("domready")
    }, YUI.Env, "_ready");
    var n = e.UA,
        r = {},
        i = {
            63232: 38,
            63233: 40,
            63234: 37,
            63235: 39,
            63276: 33,
            63277: 34,
            25: 9,
            63272: 46,
            63273: 36,
            63275: 35
        },
        s = function(t) {
            if (!t) return t;
            try {
                t && 3 == t.nodeType && (t = t.parentNode)
            } catch (n) {
                return null
            }
            return e.one(t)
        },
        o = function(e, t, n) {
            this._event = e, this._currentTarget = t, this._wrapper = n || r, this.init()
        };
    e.extend(o, Object, {
            init: function() {
                var e = this._event,
                    t = this._wrapper.overrides,
                    r = e.pageX,
                    o = e.pageY,
                    u, a = this._currentTarget;
                this.altKey = e.altKey, this.ctrlKey = e.ctrlKey, this.metaKey = e.metaKey, this.shiftKey = e.shiftKey, this.type = t && t.type || e.type, this.clientX = e.clientX, this.clientY = e.clientY, this.pageX = r, this.pageY = o, u = e.keyCode || e.charCode, n.webkit && u in i && (u = i[u]), this.keyCode = u, this.charCode = u, this.which = e.which || e.charCode || u, this.button = this.which, this.target = s(e.target), this.currentTarget = s(a), this.relatedTarget = s(e.relatedTarget);
                if (e.type == "mousewheel" || e.type == "DOMMouseScroll") this.wheelDelta = e.detail ? e.detail * -1 : Math.round(e.wheelDelta / 80) || (e.wheelDelta < 0 ? -1 : 1);
                this._touch && this._touch(e, a, this._wrapper)
            },
            stopPropagation: function() {
                this._event.stopPropagation(), this._wrapper.stopped = 1, this.stopped = 1
            },
            stopImmediatePropagation: function() {
                var e = this._event;
                e.stopImmediatePropagation ? e.stopImmediatePropagation() : this.stopPropagation(), this._wrapper.stopped = 2, this.stopped = 2
            },
            preventDefault: function(e) {
                var t = this._event;
                t.preventDefault(), e && (t.returnValue = e), this._wrapper.prevented = 1, this.prevented = 1
            },
            halt: function(e) {
                e ? this.stopImmediatePropagation() : this.stopPropagation(), this.preventDefault()
            }
        }), o.resolve = s, e.DOM2EventFacade = o, e.DOMEventFacade = o,
        function() {
            e.Env.evt.dom_wrappers = {}, e.Env.evt.dom_map = {};
            var t = e.Env.evt,
                n = e.config,
                r = n.win,
                i = YUI.Env.add,
                s = YUI.Env.remove,
                o = function() {
                    YUI.Env.windowLoaded = !0, e.Event._load(), s(r, "load", o)
                },
                u = function() {
                    e.Event._unload()
                },
                a = "domready",
                f = "~yui|2|compat~",
                l = function(t) {
                    try {
                        return t && typeof t != "string" && e.Lang.isNumber(t.length) && !t.tagName && !e.DOM.isWindow(t)
                    } catch (n) {
                        return !1
                    }
                },
                c = e.CustomEvent.prototype._delete,
                h = function(t) {
                    var n = c.apply(this, arguments);
                    return this.hasSubs() || e.Event._clean(this), n
                },
                p = function() {
                    var n = !1,
                        o = 0,
                        c = [],
                        d = t.dom_wrappers,
                        v = null,
                        m = t.dom_map;
                    return {
                        POLL_RETRYS: 1e3,
                        POLL_INTERVAL: 40,
                        lastError: null,
                        _interval: null,
                        _dri: null,
                        DOMReady: !1,
                        startInterval: function() {
                            p._interval || (p._interval = setInterval(p._poll, p.POLL_INTERVAL))
                        },
                        onAvailable: function(t, n, r, i, s, u) {
                            var a = e.Array(t),
                                f, l;
                            for (f = 0; f < a.length; f += 1) c.push({
                                id: a[f],
                                fn: n,
                                obj: r,
                                override: i,
                                checkReady: s,
                                compat: u
                            });
                            return o = this.POLL_RETRYS, setTimeout(p._poll, 0), l = new e.EventHandle({
                                _delete: function() {
                                    if (l.handle) {
                                        l.handle.detach();
                                        return
                                    }
                                    var e, t;
                                    for (e = 0; e < a.length; e++)
                                        for (t = 0; t < c.length; t++) a[e] === c[t].id && c.splice(t, 1)
                                }
                            }), l
                        },
                        onContentReady: function(e, t, n, r, i) {
                            return p.onAvailable(e, t, n, r, !0, i)
                        },
                        attach: function(t, n, r, i) {
                            return p._attach(e.Array(arguments, 0, !0))
                        },
                        _createWrapper: function(t, n, s, o, u) {
                            var a, f = e.stamp(t),
                                l = "event:" + f + n;
                            return !1 === u && (l += "native"), s && (l += "capture"), a = d[l], a || (a = e.publish(l, {
                                silent: !0,
                                bubbles: !1,
                                emitFacade: !1,
                                contextFn: function() {
                                    return o ? a.el : (a.nodeRef = a.nodeRef || e.one(a.el), a.nodeRef)
                                }
                            }), a.overrides = {}, a.el = t, a.key = l, a.domkey = f, a.type = n, a.fn = function(e) {
                                a.fire(p.getEvent(e, t, o || !1 === u))
                            }, a.capture = s, t == r && n == "load" && (a.fireOnce = !0, v = l), a._delete = h, d[l] = a, m[f] = m[f] || {}, m[f][l] = a, i(t, n, a.fn, s)), a
                        },
                        _attach: function(t, n) {
                            var i, s, o, u, a, c = !1,
                                h, d = t[0],
                                v = t[1],
                                m = t[2] || r,
                                g = n && n.facade,
                                y = n && n.capture,
                                b = n && n.overrides;
                            t[t.length - 1] === f && (i = !0);
                            if (!v || !v.call) return !1;
                            if (l(m)) return s = [], e.each(m, function(e, r) {
                                t[2] = e, s.push(p._attach(t.slice(), n))
                            }), new e.EventHandle(s);
                            if (e.Lang.isString(m)) {
                                if (i) o = e.DOM.byId(m);
                                else {
                                    o = e.Selector.query(m);
                                    switch (o.length) {
                                        case 0:
                                            o = null;
                                            break;
                                        case 1:
                                            o = o[0];
                                            break;
                                        default:
                                            return t[2] = o, p._attach(t, n)
                                    }
                                }
                                if (!o) return h = p.onAvailable(m, function() {
                                    h.handle = p._attach(t, n)
                                }, p, !0, !1, i), h;
                                m = o
                            }
                            return m ? (e.Node && e.instanceOf(m, e.Node) && (m = e.Node.getDOMNode(m)), u = p._createWrapper(m, d, y, i, g), b && e.mix(u.overrides, b), m == r && d == "load" && YUI.Env.windowLoaded && (c = !0), i && t.pop(), a = t[3], h = u._on(v, a, t.length > 4 ? t.slice(4) : null), c && u.fire(), h) : !1
                        },
                        detach: function(t, n, r, i) {
                            var s = e.Array(arguments, 0, !0),
                                o, u, a, c, h, v;
                            s[s.length - 1] === f && (o = !0);
                            if (t && t.detach) return t.detach();
                            typeof r == "string" && (o ? r = e.DOM.byId(r) : (r = e.Selector.query(r), u = r.length, u < 1 ? r = null : u == 1 && (r = r[0])));
                            if (!r) return !1;
                            if (r.detach) return s.splice(2, 1), r.detach.apply(r, s);
                            if (l(r)) {
                                a = !0;
                                for (c = 0, u = r.length; c < u; ++c) s[2] = r[c], a = e.Event.detach.apply(e.Event, s) && a;
                                return a
                            }
                            return !t || !n || !n.call ? p.purgeElement(r, !1, t) : (h = "event:" + e.stamp(r) + t, v = d[h], v ? v.detach(n) : !1)
                        },
                        getEvent: function(t, n, i) {
                            var s = t || r.event;
                            return i ? s : new e.DOMEventFacade(s, n, d["event:" + e.stamp(n) + t.type])
                        },
                        generateId: function(t) {
                            return e.DOM.generateID(t)
                        },
                        _isValidCollection: l,
                        _load: function(t) {
                            n || (n = !0, e.fire && e.fire(a), p._poll())
                        },
                        _poll: function() {
                            if (p.locked) return;
                            if (e.UA.ie && !YUI.Env.DOMReady) {
                                p.startInterval();
                                return
                            }
                            p.locked = !0;
                            var t, r, i, s, u, a, f = !n;
                            f || (f = o > 0), u = [], a = function(t, n) {
                                var r, i = n.override;
                                try {
                                    n.compat ? (n.override ? i === !0 ? r = n.obj : r = i : r = t, n.fn.call(r, n.obj)) : (r = n.obj || e.one(t), n.fn.apply(r, e.Lang.isArray(i) ? i : []))
                                } catch (s) {}
                            };
                            for (t = 0, r = c.length; t < r; ++t) i = c[t], i && !i.checkReady && (s = i.compat ? e.DOM.byId(i.id) : e.Selector.query(i.id, null, !0), s ? (a(s, i), c[t] = null) : u.push(i));
                            for (t = 0, r = c.length; t < r; ++t) {
                                i = c[t];
                                if (i && i.checkReady) {
                                    s = i.compat ? e.DOM.byId(i.id) : e.Selector.query(i.id, null, !0);
                                    if (s) {
                                        if (n || s.get && s.get("nextSibling") || s.nextSibling) a(s, i), c[t] = null
                                    } else u.push(i)
                                }
                            }
                            o = u.length === 0 ? 0 : o - 1, f ? p.startInterval() : (clearInterval(p._interval), p._interval = null), p.locked = !1;
                            return
                        },
                        purgeElement: function(t, n, r) {
                            var i = e.Lang.isString(t) ? e.Selector.query(t, null, !0) : t,
                                s = p.getListeners(i, r),
                                o, u, a, f;
                            if (n && i) {
                                s = s || [], a = e.Selector.query("*", i), u = a.length;
                                for (o = 0; o < u; ++o) f = p.getListeners(a[o], r), f && (s = s.concat(f))
                            }
                            if (s)
                                for (o = 0, u = s.length; o < u; ++o) s[o].detachAll()
                        },
                        _clean: function(t) {
                            var n = t.key,
                                r = t.domkey;
                            s(t.el, t.type, t.fn, t.capture), delete d[n], delete e._yuievt.events[n], m[r] && (delete m[r][n], e.Object.size(m[r]) || delete m[r])
                        },
                        getListeners: function(n, r) {
                            var i = e.stamp(n, !0),
                                s = m[i],
                                o = [],
                                u = r ? "event:" + i + r : null,
                                a = t.plugins;
                            return s ? (u ? (a[r] && a[r].eventDef && (u += "_synth"), s[u] && o.push(s[u]), u += "native", s[u] && o.push(s[u])) : e.each(s, function(e, t) {
                                o.push(e)
                            }), o.length ? o : null) : null
                        },
                        _unload: function(t) {
                            e.each(d, function(e, n) {
                                e.type == "unload" && e.fire(t), e.detachAll()
                            }), s(r, "unload", u)
                        },
                        nativeAdd: i,
                        nativeRemove: s
                    }
                }();
            e.Event = p, n.injected || YUI.Env.windowLoaded ? o() : i(r, "load", o);
            if (e.UA.ie) {
                e.on(a, p._poll);
                if (e.UA.ie < 7) try {
                    i(r, "unload", u)
                } catch (d) {}
            }
            p.Custom = e.CustomEvent, p.Subscriber = e.Subscriber, p.Target = e.EventTarget, p.Handle = e.EventHandle, p.Facade = e.EventFacade, p._poll()
        }(), e.Env.evt.plugins.available = {
            on: function(t, n, r, i) {
                var s = arguments.length > 4 ? e.Array(arguments, 4, !0) : null;
                return e.Event.onAvailable.call(e.Event, r, n, i, s)
            }
        }, e.Env.evt.plugins.contentready = {
            on: function(t, n, r, i) {
                var s = arguments.length > 4 ? e.Array(arguments, 4, !0) : null;
                return e.Event.onContentReady.call(e.Event, r, n, i, s)
            }
        }
}, "@VERSION@", {
    requires: ["event-custom-base"]
});
YUI.add("event-custom-base", function(e, t) {
    e.Env.evt = {
        handles: {},
        plugins: {}
    };
    var n = 0,
        r = 1,
        i = {
            objs: null,
            before: function(t, r, i, s) {
                var o = t,
                    u;
                return s && (u = [t, s].concat(e.Array(arguments, 4, !0)), o = e.rbind.apply(e, u)), this._inject(n, o, r, i)
            },
            after: function(t, n, i, s) {
                var o = t,
                    u;
                return s && (u = [t, s].concat(e.Array(arguments, 4, !0)), o = e.rbind.apply(e, u)), this._inject(r, o, n, i)
            },
            _inject: function(t, n, r, i) {
                var s = e.stamp(r),
                    o, u;
                return r._yuiaop || (r._yuiaop = {}), o = r._yuiaop, o[i] || (o[i] = new e.Do.Method(r, i), r[i] = function() {
                    return o[i].exec.apply(o[i], arguments)
                }), u = s + e.stamp(n) + i, o[i].register(u, n, t), new e.EventHandle(o[i], u)
            },
            detach: function(e) {
                e.detach && e.detach()
            }
        };
    e.Do = i, i.Method = function(e, t) {
        this.obj = e, this.methodName = t, this.method = e[t], this.before = {}, this.after = {}
    }, i.Method.prototype.register = function(e, t, n) {
        n ? this.after[e] = t : this.before[e] = t
    }, i.Method.prototype._delete = function(e) {
        delete this.before[e], delete this.after[e]
    }, i.Method.prototype.exec = function() {
        var t = e.Array(arguments, 0, !0),
            n, r, s, o = this.before,
            u = this.after,
            a = !1;
        for (n in o)
            if (o.hasOwnProperty(n)) {
                r = o[n].apply(this.obj, t);
                if (r) switch (r.constructor) {
                    case i.Halt:
                        return r.retVal;
                    case i.AlterArgs:
                        t = r.newArgs;
                        break;
                    case i.Prevent:
                        a = !0;
                        break;
                    default:
                }
            }
        a || (r = this.method.apply(this.obj, t)), i.originalRetVal = r, i.currentRetVal = r;
        for (n in u)
            if (u.hasOwnProperty(n)) {
                s = u[n].apply(this.obj, t);
                if (s && s.constructor === i.Halt) return s.retVal;
                s && s.constructor === i.AlterReturn && (r = s.newRetVal, i.currentRetVal = r)
            }
        return r
    }, i.AlterArgs = function(e, t) {
        this.msg = e, this.newArgs = t
    }, i.AlterReturn = function(e, t) {
        this.msg = e, this.newRetVal = t
    }, i.Halt = function(e, t) {
        this.msg = e, this.retVal = t
    }, i.Prevent = function(e) {
        this.msg = e
    }, i.Error = i.Halt;
    var s = e.Array,
        o = "after",
        u = ["broadcast", "monitored", "bubbles", "context", "contextFn", "currentTarget", "defaultFn", "defaultTargetOnly", "details", "emitFacade", "fireOnce", "async", "host", "preventable", "preventedFn", "queuable", "silent", "stoppedFn", "target", "type"],
        a = s.hash(u),
        f = Array.prototype.slice,
        l = 9,
        c = "yui:log",
        h = function(e, t, n) {
            var r;
            for (r in t) a[r] && (n || !(r in e)) && (e[r] = t[r]);
            return e
        };
    e.CustomEvent = function(t, n) {
        this._kds = e.CustomEvent.keepDeprecatedSubs, this.id = e.guid(), this.type = t, this.silent = this.logSystem = t === c, this._kds && (this.subscribers = {}, this.afters = {}), n && h(this, n, !0)
    }, e.CustomEvent.keepDeprecatedSubs = !1, e.CustomEvent.mixConfigs = h, e.CustomEvent.prototype = {
        constructor: e.CustomEvent,
        signature: l,
        context: e,
        preventable: !0,
        bubbles: !0,
        hasSubs: function(e) {
            var t = 0,
                n = 0,
                r = this._subscribers,
                i = this._afters,
                s = this.sibling;
            return r && (t = r.length), i && (n = i.length), s && (r = s._subscribers, i = s._afters, r && (t += r.length), i && (n += i.length)), e ? e === "after" ? n : t : t + n
        },
        monitor: function(e) {
            this.monitored = !0;
            var t = this.id + "|" + this.type + "_" + e,
                n = f.call(arguments, 0);
            return n[0] = t, this.host.on.apply(this.host, n)
        },
        getSubs: function() {
            var e = this.sibling,
                t = this._subscribers,
                n = this._afters,
                r, i;
            return e && (r = e._subscribers, i = e._afters), r ? t ? t = t.concat(r) : t = r.concat() : t ? t = t.concat() : t = [], i ? n ? n = n.concat(i) : n = i.concat() : n ? n = n.concat() : n = [], [t, n]
        },
        applyConfig: function(e, t) {
            h(this, e, t)
        },
        _on: function(t, n, r, i) {
            var s = new e.Subscriber(t, n, r, i),
                u;
            return this.fireOnce && this.fired && (u = this.firedWith, this.emitFacade && this._addFacadeToArgs && this._addFacadeToArgs(u), this.async ? setTimeout(e.bind(this._notify, this, s, u), 0) : this._notify(s, u)), i === o ? (this._afters || (this._afters = []), this._afters.push(s)) : (this._subscribers || (this._subscribers = []), this._subscribers.push(s)), this._kds && (i === o ? this.afters[s.id] = s : this.subscribers[s.id] = s), new e.EventHandle(this, s)
        },
        subscribe: function(e, t) {
            var n = arguments.length > 2 ? f.call(arguments, 2) : null;
            return this._on(e, t, n, !0)
        },
        on: function(e, t) {
            var n = arguments.length > 2 ? f.call(arguments, 2) : null;
            return this.monitored && this.host && this.host._monitor("attach", this, {
                args: arguments
            }), this._on(e, t, n, !0)
        },
        after: function(e, t) {
            var n = arguments.length > 2 ? f.call(arguments, 2) : null;
            return this._on(e, t, n, o)
        },
        detach: function(e, t) {
            if (e && e.detach) return e.detach();
            var n, r, i = 0,
                s = this._subscribers,
                o = this._afters;
            if (s)
                for (n = s.length; n >= 0; n--) r = s[n], r && (!e || e === r.fn) && (this._delete(r, s, n), i++);
            if (o)
                for (n = o.length; n >= 0; n--) r = o[n], r && (!e || e === r.fn) && (this._delete(r, o, n), i++);
            return i
        },
        unsubscribe: function() {
            return this.detach.apply(this, arguments)
        },
        _notify: function(e, t, n) {
            var r;
            return r = e.notify(t, this), !1 === r || this.stopped > 1 ? !1 : !0
        },
        log: function(e, t) {},
        fire: function() {
            var e = [];
            return e.push.apply(e, arguments), this._fire(e)
        },
        _fire: function(e) {
            return this.fireOnce && this.fired ? !0 : (this.fired = !0, this.fireOnce && (this.firedWith = e), this.emitFacade ? this.fireComplex(e) : this.fireSimple(e))
        },
        fireSimple: function(e) {
            this.stopped = 0, this.prevented = 0;
            if (this.hasSubs()) {
                var t = this.getSubs();
                this._procSubs(t[0], e), this._procSubs(t[1], e)
            }
            return this.broadcast && this._broadcast(e), this.stopped ? !1 : !0
        },
        fireComplex: function(e) {
            return e[0] = e[0] || {}, this.fireSimple(e)
        },
        _procSubs: function(e, t, n) {
            var r, i, s;
            for (i = 0, s = e.length; i < s; i++) {
                r = e[i];
                if (r && r.fn) {
                    !1 === this._notify(r, t, n) && (this.stopped = 2);
                    if (this.stopped === 2) return !1
                }
            }
            return !0
        },
        _broadcast: function(t) {
            if (!this.stopped && this.broadcast) {
                var n = t.concat();
                n.unshift(this.type), this.host !== e && e.fire.apply(e, n), this.broadcast === 2 && e.Global.fire.apply(e.Global, n)
            }
        },
        unsubscribeAll: function() {
            return this.detachAll.apply(this, arguments)
        },
        detachAll: function() {
            return this.detach()
        },
        _delete: function(e, t, n) {
            var r = e._when;
            t || (t = r === o ? this._afters : this._subscribers), t && (n = s.indexOf(t, e, 0), e && t[n] === e && t.splice(n, 1)), this._kds && (r === o ? delete this.afters[e.id] : delete this.subscribers[e.id]), this.monitored && this.host && this.host._monitor("detach", this, {
                ce: this,
                sub: e
            }), e && (e.deleted = !0)
        }
    }, e.Subscriber = function(t, n, r, i) {
        this.fn = t, this.context = n, this.id = e.guid(), this.args = r, this._when = i
    }, e.Subscriber.prototype = {
        constructor: e.Subscriber,
        _notify: function(e, t, n) {
            if (this.deleted && !this.postponed) {
                if (!this.postponed) return delete this.postponed, null;
                delete this.fn, delete this.context
            }
            var r = this.args,
                i;
            switch (n.signature) {
                case 0:
                    i = this.fn.call(e, n.type, t, e);
                    break;
                case 1:
                    i = this.fn.call(e, t[0] || null, e);
                    break;
                default:
                    r || t ? (t = t || [], r = r ? t.concat(r) : t, i = this.fn.apply(e, r)) : i = this.fn.call(e)
            }
            return this.once && n._delete(this), i
        },
        notify: function(t, n) {
            var r = this.context,
                i = !0;
            r || (r = n.contextFn ? n.contextFn() : n.context);
            if (e.config && e.config.throwFail) i = this._notify(r, t, n);
            else try {
                i = this._notify(r, t, n)
            } catch (s) {
                e.error(this + " failed: " + s.message, s)
            }
            return i
        },
        contains: function(e, t) {
            return t ? this.fn === e && this.context === t : this.fn === e
        },
        valueOf: function() {
            return this.id
        }
    }, e.EventHandle = function(e, t) {
        this.evt = e, this.sub = t
    }, e.EventHandle.prototype = {
        batch: function(t, n) {
            t.call(n || this, this), e.Lang.isArray(this.evt) && e.Array.each(this.evt, function(e) {
                e.batch.call(n || e, t)
            })
        },
        detach: function() {
            var t = this.evt,
                n = 0,
                r;
            if (t)
                if (e.Lang.isArray(t))
                    for (r = 0; r < t.length; r++) n += t[r].detach();
                else t._delete(this.sub), n = 1;
            return n
        },
        monitor: function(e) {
            return this.evt.monitor.apply(this.evt, arguments)
        }
    };
    var p = e.Lang,
        d = ":",
        v = "|",
        m = "~AFTER~",
        g = /(.*?)(:)(.*?)/,
        y = e.cached(function(e) {
            return e.replace(g, "*$2$3")
        }),
        b = function(e, t) {
            return !t || !e || e.indexOf(d) > -1 ? e : t + d + e
        },
        w = e.cached(function(e, t) {
            var n = e,
                r, i, s;
            return p.isString(n) ? (s = n.indexOf(m), s > -1 && (i = !0, n = n.substr(m.length)), s = n.indexOf(v), s > -1 && (r = n.substr(0, s), n = n.substr(s + 1), n === "*" && (n = null)), [r, t ? b(n, t) : n, i, n]) : n
        }),
        E = function(t) {
            var n = this._yuievt,
                r;
            n || (n = this._yuievt = {
                events: {},
                targets: null,
                config: {
                    host: this,
                    context: this
                },
                chain: e.config.chain
            }), r = n.config, t && (h(r, t, !0), t.chain !== undefined && (n.chain = t.chain), t.prefix && (r.prefix = t.prefix))
        };
    E.prototype = {
        constructor: E,
        once: function() {
            var e = this.on.apply(this, arguments);
            return e.batch(function(e) {
                e.sub && (e.sub.once = !0)
            }), e
        },
        onceAfter: function() {
            var e = this.after.apply(this, arguments);
            return e.batch(function(e) {
                e.sub && (e.sub.once = !0)
            }), e
        },
        parseType: function(e, t) {
            return w(e, t || this._yuievt.config.prefix)
        },
        on: function(t, n, r) {
            var i = this._yuievt,
                s = w(t, i.config.prefix),
                o, u, a, l, c, h, d, v = e.Env.evt.handles,
                g, y, b, E = e.Node,
                S, x, T;
            this._monitor("attach", s[1], {
                args: arguments,
                category: s[0],
                after: s[2]
            });
            if (p.isObject(t)) return p.isFunction(t) ? e.Do.before.apply(e.Do, arguments) : (o = n, u = r, a = f.call(arguments, 0), l = [], p.isArray(t) && (T = !0), g = t._after, delete t._after, e.each(t, function(e, t) {
                p.isObject(e) && (o = e.fn || (p.isFunction(e) ? e : o), u = e.context || u);
                var n = g ? m : "";
                a[0] = n + (T ? e : t), a[1] = o, a[2] = u, l.push(this.on.apply(this, a))
            }, this), i.chain ? this : new e.EventHandle(l));
            h = s[0], g = s[2], b = s[3];
            if (E && e.instanceOf(this, E) && b in E.DOM_EVENTS) return a = f.call(arguments, 0), a.splice(2, 0, E.getDOMNode(this)), e.on.apply(e, a);
            t = s[1];
            if (e.instanceOf(this, YUI)) {
                y = e.Env.evt.plugins[t], a = f.call(arguments, 0), a[0] = b, E && (S = a[2], e.instanceOf(S, e.NodeList) ? S = e.NodeList.getDOMNodes(S) : e.instanceOf(S, E) && (S = E.getDOMNode(S)), x = b in E.DOM_EVENTS, x && (a[2] = S));
                if (y) d = y.on.apply(e, a);
                else if (!t || x) d = e.Event._attach(a)
            }
            return d || (c = i.events[t] || this.publish(t), d = c._on(n, r, arguments.length > 3 ? f.call(arguments, 3) : null, g ? "after" : !0), t.indexOf("*:") !== -1 && (this._hasSiblings = !0)), h && (v[h] = v[h] || {}, v[h][t] = v[h][t] || [], v[h][t].push(d)), i.chain ? this : d
        },
        subscribe: function() {
            return this.on.apply(this, arguments)
        },
        detach: function(t, n, r) {
            var i = this._yuievt.events,
                s, o = e.Node,
                u = o && e.instanceOf(this, o);
            if (!t && this !== e) {
                for (s in i) i.hasOwnProperty(s) && i[s].detach(n, r);
                return u && e.Event.purgeElement(o.getDOMNode(this)), this
            }
            var a = w(t, this._yuievt.config.prefix),
                l = p.isArray(a) ? a[0] : null,
                c = a ? a[3] : null,
                h, d = e.Env.evt.handles,
                v, m, g, y, b = function(e, t, n) {
                    var r = e[t],
                        i, s;
                    if (r)
                        for (s = r.length - 1; s >= 0; --s) i = r[s].evt, (i.host === n || i.el === n) && r[s].detach()
                };
            if (l) {
                m = d[l], t = a[1], v = u ? e.Node.getDOMNode(this) : this;
                if (m) {
                    if (t) b(m, t, v);
                    else
                        for (s in m) m.hasOwnProperty(s) && b(m, s, v);
                    return this
                }
            } else {
                if (p.isObject(t) && t.detach) return t.detach(), this;
                if (u && (!c || c in o.DOM_EVENTS)) return g = f.call(arguments, 0), g[2] = o.getDOMNode(this), e.detach.apply(e, g), this
            }
            h = e.Env.evt.plugins[c];
            if (e.instanceOf(this, YUI)) {
                g = f.call(arguments, 0);
                if (h && h.detach) return h.detach.apply(e, g), this;
                if (!t || !h && o && t in o.DOM_EVENTS) return g[0] = t, e.Event.detach.apply(e.Event, g), this
            }
            return y = i[a[1]], y && y.detach(n, r), this
        },
        unsubscribe: function() {
            return this.detach.apply(this, arguments)
        },
        detachAll: function(e) {
            return this.detach(e)
        },
        unsubscribeAll: function() {
            return this.detachAll.apply(this, arguments)
        },
        publish: function(t, n) {
            var r, i = this._yuievt,
                s = i.config,
                o = s.prefix;
            return typeof t == "string" ? (o && (t = b(t, o)), r = this._publish(t, s, n)) : (r = {}, e.each(t, function(e, t) {
                o && (t = b(t, o)), r[t] = this._publish(t, s, e || n)
            }, this)), r
        },
        _getFullType: function(e) {
            var t = this._yuievt.config.prefix;
            return t ? t + d + e : e
        },
        _publish: function(t, n, r) {
            var i, s = this._yuievt,
                o = s.config,
                u = o.host,
                a = o.context,
                f = s.events;
            return i = f[t], (o.monitored && !i || i && i.monitored) && this._monitor("publish", t, {
                args: arguments
            }), i || (i = f[t] = new e.CustomEvent(t, n), n || (i.host = u, i.context = a)), r && h(i, r, !0), i
        },
        _monitor: function(e, t, n) {
            var r, i, s;
            if (t) {
                typeof t == "string" ? (s = t, i = this.getEvent(t, !0)) : (i = t, s = t.type);
                if (this._yuievt.config.monitored && (!i || i.monitored) || i && i.monitored) r = s + "_" + e, n.monitored = e, this.fire.call(this, r, n)
            }
        },
        fire: function(e) {
            var t = typeof e == "string",
                n = arguments.length,
                r = e,
                i = this._yuievt,
                s = i.config,
                o = s.prefix,
                u, a, l, c;
            t && n <= 3 ? n === 2 ? c = [arguments[1]] : n === 3 ? c = [arguments[1], arguments[2]] : c = [] : c = f.call(arguments, t ? 1 : 0), t || (r = e && e.type), o && (r = b(r, o)), a = i.events[r], this._hasSiblings && (l = this.getSibling(r, a), l && !a && (a = this.publish(r))), (s.monitored && (!a || a.monitored) || a && a.monitored) && this._monitor("fire", a || r, {
                args: c
            });
            if (!a) {
                if (i.hasTargets) return this.bubble({
                    type: r
                }, c, this);
                u = !0
            } else l && (a.sibling = l), u = a._fire(c);
            return i.chain ? this : u
        },
        getSibling: function(e, t) {
            var n;
            return e.indexOf(d) > -1 && (e = y(e), n = this.getEvent(e, !0), n && (n.applyConfig(t), n.bubbles = !1, n.broadcast = 0)), n
        },
        getEvent: function(e, t) {
            var n, r;
            return t || (n = this._yuievt.config.prefix, e = n ? b(e, n) : e), r = this._yuievt.events, r[e] || null
        },
        after: function(t, n) {
            var r = f.call(arguments, 0);
            switch (p.type(t)) {
                case "function":
                    return e.Do.after.apply(e.Do, arguments);
                case "array":
                case "object":
                    r[0]._after = !0;
                    break;
                default:
                    r[0] = m + t
            }
            return this.on.apply(this, r)
        },
        before: function() {
            return this.on.apply(this, arguments)
        }
    }, e.EventTarget = E, e.mix(e, E.prototype), E.call(e, {
        bubbles: !1
    }), YUI.Env.globalEvents = YUI.Env.globalEvents || new E, e.Global = YUI.Env.globalEvents
}, "@VERSION@", {
    requires: ["oop"]
});
YUI.add("event-custom-complex", function(e, t) {
    var n, r, i = e.Object,
        s, o = {},
        u = e.CustomEvent.prototype,
        a = e.EventTarget.prototype,
        f = function(e, t) {
            var n;
            for (n in t) r.hasOwnProperty(n) || (e[n] = t[n])
        };
    e.EventFacade = function(e, t) {
        e || (e = o), this._event = e, this.details = e.details, this.type = e.type, this._type = e.type, this.target = e.target, this.currentTarget = t, this.relatedTarget = e.relatedTarget
    }, e.mix(e.EventFacade.prototype, {
        stopPropagation: function() {
            this._event.stopPropagation(), this.stopped = 1
        },
        stopImmediatePropagation: function() {
            this._event.stopImmediatePropagation(), this.stopped = 2
        },
        preventDefault: function() {
            this._event.preventDefault(), this.prevented = 1
        },
        halt: function(e) {
            this._event.halt(e), this.prevented = 1, this.stopped = e ? 2 : 1
        }
    }), u.fireComplex = function(t) {
        var n, r, i, s, o, u = !0,
            a, f, l, c, h, p, d, v, m, g = this,
            y = g.host || g,
            b, w, E = g.stack,
            S = y._yuievt,
            x;
        if (E && g.queuable && g.type !== E.next.type) return E.queue || (E.queue = []), E.queue.push([g, t]), !0;
        x = g.hasSubs() || S.hasTargets || g.broadcast, g.target = g.target || y, g.currentTarget = y, g.details = t.concat();
        if (x) {
            n = E || {
                id: g.id,
                next: g,
                silent: g.silent,
                stopped: 0,
                prevented: 0,
                bubbling: null,
                type: g.type,
                defaultTargetOnly: g.defaultTargetOnly
            }, f = g.getSubs(), l = f[0], c = f[1], g.stopped = g.type !== n.type ? 0 : n.stopped, g.prevented = g.type !== n.type ? 0 : n.prevented, g.stoppedFn && (a = new e.EventTarget({
                fireOnce: !0,
                context: y
            }), g.events = a, a.on("stopped", g.stoppedFn)), g._facade = null, r = g._createFacade(t), l && g._procSubs(l, t, r), g.bubbles && y.bubble && !g.stopped && (w = n.bubbling, n.bubbling = g.type, n.type !== g.type && (n.stopped = 0, n.prevented = 0), u = y.bubble(g, t, null, n), g.stopped = Math.max(g.stopped, n.stopped), g.prevented = Math.max(g.prevented, n.prevented), n.bubbling = w), d = g.prevented, d ? (v = g.preventedFn, v && v.apply(y, t)) : (m = g.defaultFn, m && (!g.defaultTargetOnly && !n.defaultTargetOnly || y === r.target) && m.apply(y, t)), g.broadcast && g._broadcast(t);
            if (c && !g.prevented && g.stopped < 2) {
                h = n.afterQueue;
                if (n.id === g.id || g.type !== S.bubbling) {
                    g._procSubs(c, t, r);
                    if (h)
                        while (b = h.last()) b()
                } else p = c, n.execDefaultCnt && (p = e.merge(p), e.each(p, function(e) {
                    e.postponed = !0
                })), h || (n.afterQueue = new e.Queue), n.afterQueue.add(function() {
                    g._procSubs(p, t, r)
                })
            }
            g.target = null;
            if (n.id === g.id) {
                s = n.queue;
                if (s)
                    while (s.length) i = s.pop(), o = i[0], n.next = o, o._fire(i[1]);
                g.stack = null
            }
            u = !g.stopped, g.type !== S.bubbling && (n.stopped = 0, n.prevented = 0, g.stopped = 0, g.prevented = 0)
        } else m = g.defaultFn, m && (r = g._createFacade(t), (!g.defaultTargetOnly || y === r.target) && m.apply(y, t));
        return g._facade = null, u
    }, u._hasPotentialSubscribers = function() {
        return this.hasSubs() || this.host._yuievt.hasTargets || this.broadcast
    }, u._createFacade = u._getFacade = function(t) {
        var n = this.details,
            r = n && n[0],
            i = r && typeof r == "object",
            s = this._facade;
        return s || (s = new e.EventFacade(this, this.currentTarget)), i ? (f(s, r), r.type && (s.type = r.type), t && (t[0] = s)) : t && t.unshift(s), s.details = this.details, s.target = this.originalTarget || this.target, s.currentTarget = this.currentTarget, s.stopped = 0, s.prevented = 0, this._facade = s, this._facade
    }, u._addFacadeToArgs = function(e) {
        var t = e[0];
        t && t.halt && t.stopImmediatePropagation && t.stopPropagation && t._event || this._createFacade(e)
    }, u.stopPropagation = function() {
        this.stopped = 1, this.stack && (this.stack.stopped = 1), this.events && this.events.fire("stopped", this)
    }, u.stopImmediatePropagation = function() {
        this.stopped = 2, this.stack && (this.stack.stopped = 2), this.events && this.events.fire("stopped", this)
    }, u.preventDefault = function() {
        this.preventable && (this.prevented = 1, this.stack && (this.stack.prevented = 1))
    }, u.halt = function(e) {
        e ? this.stopImmediatePropagation() : this.stopPropagation(), this.preventDefault()
    }, a.addTarget = function(t) {
        var n = this._yuievt;
        return n.targets || (n.targets = {}), n.targets[e.stamp(t)] = t, n.hasTargets = !0, this
    }, a.getTargets = function() {
        var e = this._yuievt.targets;
        return e ? i.values(e) : []
    }, a.removeTarget = function(t) {
        var n = this._yuievt.targets;
        return n && (delete n[e.stamp(t, !0)], i.size(n) === 0 && (this._yuievt.hasTargets = !1)), this
    }, a.bubble = function(e, t, n, r) {
        var i = this._yuievt.targets,
            s = !0,
            o, u, a, f, l, c = e && e.type,
            h = n || e && e.target || this,
            p;
        if (!e || !e.stopped && i)
            for (a in i)
                if (i.hasOwnProperty(a)) {
                    o = i[a], u = o._yuievt.events[c], o._hasSiblings && (l = o.getSibling(c, u)), l && !u && (u = o.publish(c)), p = o._yuievt.bubbling, o._yuievt.bubbling = c;
                    if (!u) o._yuievt.hasTargets && o.bubble(e, t, h, r);
                    else {
                        l && (u.sibling = l), u.target = h, u.originalTarget = h, u.currentTarget = o, f = u.broadcast, u.broadcast = !1, u.emitFacade = !0, u.stack = r, s = s && u.fire.apply(u, t || e.details || []), u.broadcast = f, u.originalTarget = null;
                        if (u.stopped) break
                    }
                    o._yuievt.bubbling = p
                }
        return s
    }, a._hasPotentialSubscribers = function(e) {
        var t = this._yuievt,
            n = t.events[e];
        return n ? n.hasSubs() || t.hasTargets || n.broadcast : !1
    }, n = new e.EventFacade, r = {};
    for (s in n) r[s] = !0
}, "@VERSION@", {
    requires: ["event-custom-base"]
});
YUI.add("event-delegate", function(e, t) {
    function f(t, r, u, l) {
        var c = n(arguments, 0, !0),
            h = i(u) ? u : null,
            p, d, v, m, g, y, b, w, E;
        if (s(t)) {
            w = [];
            if (o(t))
                for (y = 0, b = t.length; y < b; ++y) c[0] = t[y], w.push(e.delegate.apply(e, c));
            else {
                c.unshift(null);
                for (y in t) t.hasOwnProperty(y) && (c[0] = y, c[1] = t[y], w.push(e.delegate.apply(e, c)))
            }
            return new e.EventHandle(w)
        }
        p = t.split(/\|/), p.length > 1 && (g = p.shift(), c[0] = t = p.shift()), d = e.Node.DOM_EVENTS[t], s(d) && d.delegate && (E = d.delegate.apply(d, arguments));
        if (!E) {
            if (!t || !r || !u || !l) return;
            v = h ? e.Selector.query(h, null, !0) : u, !v && i(u) && (E = e.on("available", function() {
                e.mix(E, e.delegate.apply(e, c), !0)
            }, u)), !E && v && (c.splice(2, 2, v), E = e.Event._attach(c, {
                facade: !1
            }), E.sub.filter = l, E.sub._notify = f.notifySub)
        }
        return E && g && (m = a[g] || (a[g] = {}), m = m[t] || (m[t] = []), m.push(E)), E
    }
    var n = e.Array,
        r = e.Lang,
        i = r.isString,
        s = r.isObject,
        o = r.isArray,
        u = e.Selector.test,
        a = e.Env.evt.handles;
    f.notifySub = function(t, r, i) {
        r = r.slice(), this.args && r.push.apply(r, this.args);
        var s = f._applyFilter(this.filter, r, i),
            o, u, a, l;
        if (s) {
            s = n(s), o = r[0] = new e.DOMEventFacade(r[0], i.el, i), o.container = e.one(i.el);
            for (u = 0, a = s.length; u < a && !o.stopped; ++u) {
                o.currentTarget = e.one(s[u]), l = this.fn.apply(this.context || o.currentTarget, r);
                if (l === !1) break
            }
            return l
        }
    }, f.compileFilter = e.cached(function(e) {
        return function(t, n) {
            return u(t._node, e, n.currentTarget === n.target ? null : n.currentTarget._node)
        }
    }), f._disabledRE = /^(?:button|input|select|textarea)$/i, f._applyFilter = function(t, n, r) {
        var s = n[0],
            o = r.el,
            a = s.target || s.srcElement,
            l = [],
            c = !1;
        a.nodeType === 3 && (a = a.parentNode);
        if (a.disabled && f._disabledRE.test(a.nodeName)) return l;
        n.unshift(a);
        if (i(t))
            while (a) {
                c = a === o, u(a, t, c ? null : o) && l.push(a);
                if (c) break;
                a = a.parentNode
            } else {
                n[0] = e.one(a), n[1] = new e.DOMEventFacade(s, o, r);
                while (a) {
                    t.apply(n[0], n) && l.push(a);
                    if (a === o) break;
                    a = a.parentNode, n[0] = e.one(a)
                }
                n[1] = s
            }
        return l.length <= 1 && (l = l[0]), n.shift(), l
    }, e.delegate = e.Event.delegate = f
}, "@VERSION@", {
    requires: ["node-base"]
});
YUI.add("event-flick", function(e, t) {
    var n = e.Event._GESTURE_MAP,
        r = {
            start: n.start,
            end: n.end,
            move: n.move
        },
        i = "start",
        s = "end",
        o = "move",
        u = "ownerDocument",
        a = "minVelocity",
        f = "minDistance",
        l = "preventDefault",
        c = "_fs",
        h = "_fsh",
        p = "_feh",
        d = "_fmh",
        v = "nodeType";
    e.Event.define("flick", {
        on: function(e, t, n) {
            var s = e.on(r[i], this._onStart, this, e, t, n);
            t[h] = s
        },
        detach: function(e, t, n) {
            var r = t[h],
                i = t[p];
            r && (r.detach(), t[h] = null), i && (i.detach(), t[p] = null)
        },
        processArgs: function(t) {
            var n = t.length > 3 ? e.merge(t.splice(3, 1)[0]) : {};
            return a in n || (n[a] = this.MIN_VELOCITY), f in n || (n[f] = this.MIN_DISTANCE), l in n || (n[l] = this.PREVENT_DEFAULT), n
        },
        _onStart: function(t, n, i, a) {
            var f = !0,
                l, h, m, g = i._extra.preventDefault,
                y = t;
            t.touches && (f = t.touches.length === 1, t = t.touches[0]), f && (g && (!g.call || g(t)) && y.preventDefault(), t.flick = {
                time: (new Date).getTime()
            }, i[c] = t, l = i[p], m = n.get(v) === 9 ? n : n.get(u), l || (l = m.on(r[s], e.bind(this._onEnd, this), null, n, i, a), i[p] = l), i[d] = m.once(r[o], e.bind(this._onMove, this), null, n, i, a))
        },
        _onMove: function(e, t, n, r) {
            var i = n[c];
            i && i.flick && (i.flick.time = (new Date).getTime())
        },
        _onEnd: function(e, t, n, r) {
            var i = (new Date).getTime(),
                s = n[c],
                o = !!s,
                u = e,
                h, p, v, m, g, y, b, w, E = n[d];
            E && (E.detach(), delete n[d]), o && (e.changedTouches && (e.changedTouches.length === 1 && e.touches.length === 0 ? u = e.changedTouches[0] : o = !1), o && (m = n._extra, v = m[l], v && (!v.call || v(e)) && e.preventDefault(), h = s.flick.time, i = (new Date).getTime(), p = i - h, g = [u.pageX - s.pageX, u.pageY - s.pageY], m.axis ? w = m.axis : w = Math.abs(g[0]) >= Math.abs(g[1]) ? "x" : "y", y = g[w === "x" ? 0 : 1], b = p !== 0 ? y / p : 0, isFinite(b) && Math.abs(y) >= m[f] && Math.abs(b) >= m[a] && (e.type = "flick", e.flick = {
                time: p,
                distance: y,
                velocity: b,
                axis: w,
                start: s
            }, r.fire(e)), n[c] = null))
        },
        MIN_VELOCITY: 0,
        MIN_DISTANCE: 0,
        PREVENT_DEFAULT: !1
    })
}, "@VERSION@", {
    requires: ["node-base", "event-touch", "event-synthetic"]
});
YUI.add("event-focus", function(e, t) {
    function u(t, r, u) {
        var a = "_" + t + "Notifiers";
        e.Event.define(t, {
            _useActivate: o,
            _attach: function(i, s, o) {
                return e.DOM.isWindow(i) ? n._attach([t, function(e) {
                    s.fire(e)
                }, i]) : n._attach([r, this._proxy, i, this, s, o], {
                    capture: !0
                })
            },
            _proxy: function(t, r, i) {
                var s = t.target,
                    f = t.currentTarget,
                    l = s.getData(a),
                    c = e.stamp(f._node),
                    h = o || s !== f,
                    p;
                r.currentTarget = i ? s : f, r.container = i ? f : null, l ? h = !0 : (l = {}, s.setData(a, l), h && (p = n._attach([u, this._notify, s._node]).sub, p.once = !0)), l[c] || (l[c] = []), l[c].push(r), h || this._notify(t)
            },
            _notify: function(t, n) {
                var r = t.currentTarget,
                    i = r.getData(a),
                    o = r.ancestors(),
                    u = r.get("ownerDocument"),
                    f = [],
                    l = i ? e.Object.keys(i).length : 0,
                    c, h, p, d, v, m, g, y, b, w;
                r.clearData(a), o.push(r), u && o.unshift(u), o._nodes.reverse(), l && (m = l, o.some(function(t) {
                    var n = e.stamp(t),
                        r = i[n],
                        s, o;
                    if (r) {
                        l--;
                        for (s = 0, o = r.length; s < o; ++s) r[s].handle.sub.filter && f.push(r[s])
                    }
                    return !l
                }), l = m);
                while (l && (c = o.shift())) {
                    d = e.stamp(c), h = i[d];
                    if (h) {
                        for (g = 0, y = h.length; g < y; ++g) {
                            p = h[g], b = p.handle.sub, v = !0, t.currentTarget = c, b.filter && (v = b.filter.apply(c, [c, t].concat(b.args || [])), f.splice(s(f, p), 1)), v && (t.container = p.container, w = p.fire(t));
                            if (w === !1 || t.stopped === 2) break
                        }
                        delete h[d], l--
                    }
                    if (t.stopped !== 2)
                        for (g = 0, y = f.length; g < y; ++g) {
                            p = f[g], b = p.handle.sub, b.filter.apply(c, [c, t].concat(b.args || [])) && (t.container = p.container, t.currentTarget = c, w = p.fire(t));
                            if (w === !1 || t.stopped === 2 || t.stopped && f[g + 1] && f[g + 1].container !== p.container) break
                        }
                    if (t.stopped) break
                }
            },
            on: function(e, t, n) {
                t.handle = this._attach(e._node, n)
            },
            detach: function(e, t) {
                t.handle.detach()
            },
            delegate: function(t, n, r, s) {
                i(s) && (n.filter = function(n) {
                    return e.Selector.test(n._node, s, t === n ? null : t._node)
                }), n.handle = this._attach(t._node, r, !0)
            },
            detachDelegate: function(e, t) {
                t.handle.detach()
            }
        }, !0)
    }
    var n = e.Event,
        r = e.Lang,
        i = r.isString,
        s = e.Array.indexOf,
        o = function() {
            var t = !1,
                n = e.config.doc,
                r;
            return n && (r = n.createElement("p"), r.setAttribute("onbeforeactivate", ";"), t = r.onbeforeactivate !== undefined), t
        }();
    o ? (u("focus", "beforeactivate", "focusin"), u("blur", "beforedeactivate", "focusout")) : (u("focus", "focus", "focus"), u("blur", "blur", "blur"))
}, "@VERSION@", {
    requires: ["event-synthetic"]
});
YUI.add("event-hover", function(e, t) {
    var n = e.Lang.isFunction,
        r = function() {},
        i = {
            processArgs: function(e) {
                var t = n(e[2]) ? 2 : 3;
                return n(e[t]) ? e.splice(t, 1)[0] : r
            },
            on: function(e, t, n, r) {
                var i = t.args ? t.args.slice() : [];
                i.unshift(null), t._detach = e[r ? "delegate" : "on"]({
                    mouseenter: function(e) {
                        e.phase = "over", n.fire(e)
                    },
                    mouseleave: function(e) {
                        var n = t.context || this;
                        i[0] = e, e.type = "hover", e.phase = "out", t._extra.apply(n, i)
                    }
                }, r)
            },
            detach: function(e, t, n) {
                t._detach.detach()
            }
        };
    i.delegate = i.on, i.detachDelegate = i.detach, e.Event.define("hover", i)
}, "@VERSION@", {
    requires: ["event-mouseenter"]
});
YUI.add("event-key", function(e, t) {
    var n = "+alt",
        r = "+ctrl",
        i = "+meta",
        s = "+shift",
        o = e.Lang.trim,
        u = {
            KEY_MAP: {
                enter: 13,
                esc: 27,
                backspace: 8,
                tab: 9,
                pageup: 33,
                pagedown: 34
            },
            _typeRE: /^(up|down|press):/,
            _keysRE: /^(?:up|down|press):|\+(alt|ctrl|meta|shift)/g,
            processArgs: function(t) {
                var n = t.splice(3, 1)[0],
                    r = e.Array.hash(n.match(/\+(?:alt|ctrl|meta|shift)\b/g) || []),
                    i = {
                        type: this._typeRE.test(n) ? RegExp.$1 : null,
                        mods: r,
                        keys: null
                    },
                    s = n.replace(this._keysRE, ""),
                    u, a, f, l;
                if (s) {
                    s = s.split(","), i.keys = {};
                    for (l = s.length - 1; l >= 0; --l) {
                        u = o(s[l]);
                        if (!u) continue; + u == u ? i.keys[u] = r : (f = u.toLowerCase(), this.KEY_MAP[f] ? (i.keys[this.KEY_MAP[f]] = r, i.type || (i.type = "down")) : (u = u.charAt(0), a = u.toUpperCase(), r["+shift"] && (u = a), i.keys[u.charCodeAt(0)] = u === a ? e.merge(r, {
                            "+shift": !0
                        }) : r))
                    }
                }
                return i.type || (i.type = "press"), i
            },
            on: function(e, t, o, u) {
                var a = t._extra,
                    f = "key" + a.type,
                    l = a.keys,
                    c = u ? "delegate" : "on";
                t._detach = e[c](f, function(e) {
                    var t = l ? l[e.which] : a.mods;
                    t && (!t[n] || t[n] && e.altKey) && (!t[r] || t[r] && e.ctrlKey) && (!t[i] || t[i] && e.metaKey) && (!t[s] || t[s] && e.shiftKey) && o.fire(e)
                }, u)
            },
            detach: function(e, t, n) {
                t._detach.detach()
            }
        };
    u.delegate = u.on, u.detachDelegate = u.detach, e.Event.define("key", u, !0)
}, "@VERSION@", {
    requires: ["event-synthetic"]
});
YUI.add("event-mouseenter", function(e, t) {
    var n = e.Env.evt.dom_wrappers,
        r = e.DOM.contains,
        i = e.Array,
        s = function() {},
        o = {
            proxyType: "mouseover",
            relProperty: "fromElement",
            _notify: function(t, i, s) {
                var o = this._node,
                    u = t.relatedTarget || t[i];
                o !== u && !r(o, u) && s.fire(new e.DOMEventFacade(t, o, n["event:" + e.stamp(o) + t.type]))
            },
            on: function(t, n, r) {
                var i = e.Node.getDOMNode(t),
                    s = [this.proxyType, this._notify, i, null, this.relProperty, r];
                n.handle = e.Event._attach(s, {
                    facade: !1
                })
            },
            detach: function(e, t) {
                t.handle.detach()
            },
            delegate: function(t, n, r, i) {
                var o = e.Node.getDOMNode(t),
                    u = [this.proxyType, s, o, null, r];
                n.handle = e.Event._attach(u, {
                    facade: !1
                }), n.handle.sub.filter = i, n.handle.sub.relProperty = this.relProperty, n.handle.sub._notify = this._filterNotify
            },
            _filterNotify: function(t, n, s) {
                n = n.slice(), this.args && n.push.apply(n, this.args);
                var o = e.delegate._applyFilter(this.filter, n, s),
                    u = n[0].relatedTarget || n[0][this.relProperty],
                    a, f, l, c, h;
                if (o) {
                    o = i(o);
                    for (f = 0, l = o.length && (!a || !a.stopped); f < l; ++f) {
                        h = o[0];
                        if (!r(h, u)) {
                            a || (a = new e.DOMEventFacade(n[0], h, s), a.container = e.one(s.el)), a.currentTarget = e.one(h), c = n[1].fire(a);
                            if (c === !1) break
                        }
                    }
                }
                return c
            },
            detachDelegate: function(e, t) {
                t.handle.detach()
            }
        };
    e.Event.define("mouseenter", o, !0), e.Event.define("mouseleave", e.merge(o, {
        proxyType: "mouseout",
        relProperty: "toElement"
    }), !0)
}, "@VERSION@", {
    requires: ["event-synthetic"]
});
YUI.add("event-mousewheel", function(e, t) {
    var n = "DOMMouseScroll",
        r = function(t) {
            var r = e.Array(t, 0, !0),
                i;
            return e.UA.gecko ? (r[0] = n, i = e.config.win) : i = e.config.doc, r.length < 3 ? r[2] = i : r.splice(2, 0, i), r
        };
    e.Env.evt.plugins.mousewheel = {
        on: function() {
            return e.Event._attach(r(arguments))
        },
        detach: function() {
            return e.Event.detach.apply(e.Event, r(arguments))
        }
    }
}, "@VERSION@", {
    requires: ["node-base"]
});
YUI.add("event-move", function(e, t) {
    var n = e.Event._GESTURE_MAP,
        r = {
            start: n.start,
            end: n.end,
            move: n.move
        },
        i = "start",
        s = "move",
        o = "end",
        u = "gesture" + s,
        a = u + o,
        f = u + i,
        l = "_msh",
        c = "_mh",
        h = "_meh",
        p = "_dmsh",
        d = "_dmh",
        v = "_dmeh",
        m = "_ms",
        g = "_m",
        y = "minTime",
        b = "minDistance",
        w = "preventDefault",
        E = "button",
        S = "ownerDocument",
        x = "currentTarget",
        T = "target",
        N = "nodeType",
        C = e.config.win && "msPointerEnabled" in e.config.win.navigator,
        k = "msTouchActionCount",
        L = "msInitTouchAction",
        A = function(t, n, r) {
            var i = r ? 4 : 3,
                s = n.length > i ? e.merge(n.splice(i, 1)[0]) : {};
            return w in s || (s[w] = t.PREVENT_DEFAULT), s
        },
        O = function(e, t) {
            return t._extra.root || e.get(N) === 9 ? e : e.get(S)
        },
        M = function(t) {
            var n = t.getDOMNode();
            return t.compareTo(e.config.doc) && n.documentElement ? n.documentElement : !1
        },
        _ = function(e, t, n) {
            e.pageX = t.pageX, e.pageY = t.pageY, e.screenX = t.screenX, e.screenY = t.screenY, e.clientX = t.clientX, e.clientY = t.clientY, e[T] = e[T] || t[T], e[x] = e[x] || t[x], e[E] = n && n[E] || 1
        },
        D = function(t) {
            var n = M(t) || t.getDOMNode(),
                r = t.getData(k);
            C && (r || (r = 0, t.setData(L, n.style.msTouchAction)), n.style.msTouchAction = e.Event._DEFAULT_TOUCH_ACTION, r++, t.setData(k, r))
        },
        P = function(e) {
            var t = M(e) || e.getDOMNode(),
                n = e.getData(k),
                r = e.getData(L);
            C && (n--, e.setData(k, n), n === 0 && t.style.msTouchAction !== r && (t.style.msTouchAction = r))
        },
        H = function(e, t) {
            t && (!t.call || t(e)) && e.preventDefault()
        },
        B = e.Event.define;
    e.Event._DEFAULT_TOUCH_ACTION = "none", B(f, {
        on: function(e, t, n) {
            D(e), t[l] = e.on(r[i], this._onStart, this, e, t, n)
        },
        delegate: function(e, t, n, s) {
            var o = this;
            t[p] = e.delegate(r[i], function(r) {
                o._onStart(r, e, t, n, !0)
            }, s)
        },
        detachDelegate: function(e, t, n, r) {
            var i = t[p];
            i && (i.detach(), t[p] = null), P(e)
        },
        detach: function(e, t, n) {
            var r = t[l];
            r && (r.detach(), t[l] = null), P(e)
        },
        processArgs: function(e, t) {
            var n = A(this, e, t);
            return y in n || (n[y] = this.MIN_TIME), b in n || (n[b] = this.MIN_DISTANCE), n
        },
        _onStart: function(t, n, i, u, a) {
            a && (n = t[x]);
            var f = i._extra,
                l = !0,
                c = f[y],
                h = f[b],
                p = f.button,
                d = f[w],
                v = O(n, i),
                m;
            t.touches ? t.touches.length === 1 ? _(t, t.touches[0], f) : l = !1 : l = p === undefined || p === t.button, l && (H(t, d), c === 0 || h === 0 ? this._start(t, n, u, f) : (m = [t.pageX, t.pageY], c > 0 && (f._ht = e.later(c, this, this._start, [t, n, u, f]), f._hme = v.on(r[o], e.bind(function() {
                this._cancel(f)
            }, this))), h > 0 && (f._hm = v.on(r[s], e.bind(function(e) {
                (Math.abs(e.pageX - m[0]) > h || Math.abs(e.pageY - m[1]) > h) && this._start(t, n, u, f)
            }, this)))))
        },
        _cancel: function(e) {
            e._ht && (e._ht.cancel(), e._ht = null), e._hme && (e._hme.detach(), e._hme = null), e._hm && (e._hm.detach(), e._hm = null)
        },
        _start: function(e, t, n, r) {
            r && this._cancel(r), e.type = f, t.setData(m, e), n.fire(e)
        },
        MIN_TIME: 0,
        MIN_DISTANCE: 0,
        PREVENT_DEFAULT: !1
    }), B(u, {
        on: function(e, t, n) {
            D(e);
            var i = O(e, t, r[s]),
                o = i.on(r[s], this._onMove, this, e, t, n);
            t[c] = o
        },
        delegate: function(e, t, n, i) {
            var o = this;
            t[d] = e.delegate(r[s], function(r) {
                o._onMove(r, e, t, n, !0)
            }, i)
        },
        detach: function(e, t, n) {
            var r = t[c];
            r && (r.detach(), t[c] = null), P(e)
        },
        detachDelegate: function(e, t, n, r) {
            var i = t[d];
            i && (i.detach(), t[d] = null), P(e)
        },
        processArgs: function(e, t) {
            return A(this, e, t)
        },
        _onMove: function(e, t, n, r, i) {
            i && (t = e[x]);
            var s = n._extra.standAlone || t.getData(m),
                o = n._extra.preventDefault;
            s && (e.touches && (e.touches.length === 1 ? _(e, e.touches[0]) : s = !1), s && (H(e, o), e.type = u, r.fire(e)))
        },
        PREVENT_DEFAULT: !1
    }), B(a, {
        on: function(e, t, n) {
            D(e);
            var i = O(e, t),
                s = i.on(r[o], this._onEnd, this, e, t, n);
            t[h] = s
        },
        delegate: function(e, t, n, i) {
            var s = this;
            t[v] = e.delegate(r[o], function(r) {
                s._onEnd(r, e, t, n, !0)
            }, i)
        },
        detachDelegate: function(e, t, n, r) {
            var i = t[v];
            i && (i.detach(), t[v] = null), P(e)
        },
        detach: function(e, t, n) {
            var r = t[h];
            r && (r.detach(), t[h] = null), P(e)
        },
        processArgs: function(e, t) {
            return A(this, e, t)
        },
        _onEnd: function(e, t, n, r, i) {
            i && (t = e[x]);
            var s = n._extra.standAlone || t.getData(g) || t.getData(m),
                o = n._extra.preventDefault;
            s && (e.changedTouches && (e.changedTouches.length === 1 ? _(e, e.changedTouches[0]) : s = !1), s && (H(e, o), e.type = a, r.fire(e), t.clearData(m), t.clearData(g)))
        },
        PREVENT_DEFAULT: !1
    })
}, "@VERSION@", {
    requires: ["node-base", "event-touch", "event-synthetic"]
});
YUI.add("event-outside", function(e, t) {
    var n = ["blur", "change", "click", "dblclick", "focus", "keydown", "keypress", "keyup", "mousedown", "mousemove", "mouseout", "mouseover", "mouseup", "select", "submit"];
    e.Event.defineOutside = function(t, n) {
        n = n || t + "outside";
        var r = {
            on: function(n, r, i) {
                r.handle = e.one("doc").on(t, function(e) {
                    this.isOutside(n, e.target) && (e.currentTarget = n, i.fire(e))
                }, this)
            },
            detach: function(e, t, n) {
                t.handle.detach()
            },
            delegate: function(n, r, i, s) {
                r.handle = e.one("doc").delegate(t, function(e) {
                    this.isOutside(n, e.target) && i.fire(e)
                }, s, this)
            },
            isOutside: function(e, t) {
                return t !== e && !t.ancestor(function(t) {
                    return t === e
                })
            }
        };
        r.detachDelegate = r.detach, e.Event.define(n, r)
    }, e.Array.each(n, function(t) {
        e.Event.defineOutside(t)
    })
}, "@VERSION@", {
    requires: ["event-synthetic"]
});
YUI.add("event-resize", function(e, t) {
    e.Event.define("windowresize", {
        on: e.UA.gecko && e.UA.gecko < 1.91 ? function(t, n, r) {
            n._handle = e.Event.attach("resize", function(e) {
                r.fire(e)
            })
        } : function(t, n, r) {
            var i = e.config.windowResizeDelay || 100;
            n._handle = e.Event.attach("resize", function(t) {
                n._timer && n._timer.cancel(), n._timer = e.later(i, e, function() {
                    r.fire(t)
                })
            })
        },
        detach: function(e, t) {
            t._timer && t._timer.cancel(), t._handle.detach()
        }
    })
}, "@VERSION@", {
    requires: ["node-base", "event-synthetic"]
});
YUI.add("event-simulate", function(e, t) {
    (function() {
        function v(t, n, a, f, l, c, h, p, d, v, m) {
            t || e.error("simulateKeyEvent(): Invalid target.");
            if (i(n)) {
                n = n.toLowerCase();
                switch (n) {
                    case "textevent":
                        n = "keypress";
                        break;
                    case "keyup":
                    case "keydown":
                    case "keypress":
                        break;
                    default:
                        e.error("simulateKeyEvent(): Event type '" + n + "' not supported.")
                }
            } else e.error("simulateKeyEvent(): Event type must be a string.");
            s(a) || (a = !0), s(f) || (f = !0), o(l) || (l = e.config.win), s(c) || (c = !1), s(h) || (h = !1), s(p) || (p = !1), s(d) || (d = !1), u(v) || (v = 0), u(m) || (m = 0);
            var g = null;
            if (r(e.config.doc.createEvent)) {
                try {
                    g = e.config.doc.createEvent("KeyEvents"), g.initKeyEvent(n, a, f, l, c, h, p, d, v, m)
                } catch (y) {
                    try {
                        g = e.config.doc.createEvent("Events")
                    } catch (b) {
                        g = e.config.doc.createEvent("UIEvents")
                    } finally {
                        g.initEvent(n, a, f), g.view = l, g.altKey = h, g.ctrlKey = c, g.shiftKey = p, g.metaKey = d, g.keyCode = v, g.charCode = m
                    }
                }
                t.dispatchEvent(g)
            } else o(e.config.doc.createEventObject) ? (g = e.config.doc.createEventObject(), g.bubbles = a, g.cancelable = f, g.view = l, g.ctrlKey = c, g.altKey = h, g.shiftKey = p, g.metaKey = d, g.keyCode = m > 0 ? m : v, t.fireEvent("on" + n, g)) : e.error("simulateKeyEvent(): No event simulation framework present.")
        }

        function m(t, n, l, c, h, p, d, v, m, g, y, b, w, E, S, x) {
            t || e.error("simulateMouseEvent(): Invalid target."), i(n) ? !a[n.toLowerCase()] && !f[n] && e.error("simulateMouseEvent(): Event type '" + n + "' not supported.") : e.error("simulateMouseEvent(): Event type must be a string."), s(l) || (l = !0), s(c) || (c = n !== "mousemove"), o(h) || (h = e.config.win), u(p) || (p = 1), u(d) || (d = 0), u(v) || (v = 0), u(m) || (m = 0), u(g) || (g = 0), s(y) || (y = !1), s(b) || (b = !1), s(w) || (w = !1), s(E) || (E = !1), u(S) || (S = 0), x = x || null;
            var T = null;
            if (r(e.config.doc.createEvent)) T = e.config.doc.createEvent("MouseEvents"), T.initMouseEvent ? T.initMouseEvent(n, l, c, h, p, d, v, m, g, y, b, w, E, S, x) : (T = e.config.doc.createEvent("UIEvents"), T.initEvent(n, l, c), T.view = h, T.detail = p, T.screenX = d, T.screenY = v, T.clientX = m, T.clientY = g, T.ctrlKey = y, T.altKey = b, T.metaKey = E, T.shiftKey = w, T.button = S, T.relatedTarget = x), x && !T.relatedTarget && (n === "mouseout" ? T.toElement = x : n === "mouseover" && (T.fromElement = x)), t.dispatchEvent(T);
            else if (o(e.config.doc.createEventObject)) {
                T = e.config.doc.createEventObject(), T.bubbles = l, T.cancelable = c, T.view = h, T.detail = p, T.screenX = d, T.screenY = v, T.clientX = m, T.clientY = g, T.ctrlKey = y, T.altKey = b, T.metaKey = E, T.shiftKey = w;
                switch (S) {
                    case 0:
                        T.button = 1;
                        break;
                    case 1:
                        T.button = 4;
                        break;
                    case 2:
                        break;
                    default:
                        T.button = 0
                }
                T.relatedTarget = x, t.fireEvent("on" + n, T)
            } else e.error("simulateMouseEvent(): No event simulation framework present.")
        }

        function g(t, n, a, f, l, p) {
            t || e.error("simulateUIEvent(): Invalid target."), i(n) ? (n = n.toLowerCase(), c[n] || e.error("simulateUIEvent(): Event type '" + n + "' not supported.")) : e.error("simulateUIEvent(): Event type must be a string.");
            var d = null;
            s(a) || (a = n in h), s(f) || (f = n === "submit"), o(l) || (l = e.config.win), u(p) || (p = 1), r(e.config.doc.createEvent) ? (d = e.config.doc.createEvent("UIEvents"), d.initUIEvent(n, a, f, l, p), t.dispatchEvent(d)) : o(e.config.doc.createEventObject) ? (d = e.config.doc.createEventObject(), d.bubbles = a, d.cancelable = f, d.view = l, d.detail = p, t.fireEvent("on" + n, d)) : e.error("simulateUIEvent(): No event simulation framework present.")
        }

        function y(t, n, r, i, s, o, u, a, f, l, c, h, p, v, m, g) {
            var y;
            (!e.UA.ios || e.UA.ios < 2) && e.error("simulateGestureEvent(): Native gesture DOM eventframe is not available in this platform."), t || e.error("simulateGestureEvent(): Invalid target."), e.Lang.isString(n) ? (n = n.toLowerCase(), d[n] || e.error("simulateTouchEvent(): Event type '" + n + "' not supported.")) : e.error("simulateGestureEvent(): Event type must be a string."), e.Lang.isBoolean(r) || (r = !0), e.Lang.isBoolean(i) || (i = !0), e.Lang.isObject(s) || (s = e.config.win), e.Lang.isNumber(o) || (o = 2), e.Lang.isNumber(u) || (u = 0), e.Lang.isNumber(a) || (a = 0), e.Lang.isNumber(f) || (f = 0), e.Lang.isNumber(l) || (l = 0), e.Lang.isBoolean(c) || (c = !1), e.Lang.isBoolean(h) || (h = !1), e.Lang.isBoolean(p) || (p = !1), e.Lang.isBoolean(v) || (v = !1), e.Lang.isNumber(m) || (m = 1), e.Lang.isNumber(g) || (g = 0), y = e.config.doc.createEvent("GestureEvent"), y.initGestureEvent(n, r, i, s, o, u, a, f, l, c, h, p, v, t, m, g), t.dispatchEvent(y)
        }

        function b(t, n, r, i, s, o, u, a, f, l, c, h, d, v, m, g, y, b, w) {
            var E;
            t || e.error("simulateTouchEvent(): Invalid target."), e.Lang.isString(n) ? (n = n.toLowerCase(), p[n] || e.error("simulateTouchEvent(): Event type '" + n + "' not supported.")) : e.error("simulateTouchEvent(): Event type must be a string."), n === "touchstart" || n === "touchmove" ? m.length === 0 && e.error("simulateTouchEvent(): No touch object in touches") : n === "touchend" && y.length === 0 && e.error("simulateTouchEvent(): No touch object in changedTouches"), e.Lang.isBoolean(r) || (r = !0), e.Lang.isBoolean(i) || (i = n !== "touchcancel"), e.Lang.isObject(s) || (s = e.config.win), e.Lang.isNumber(o) || (o = 1), e.Lang.isNumber(u) || (u = 0), e.Lang.isNumber(a) || (a = 0), e.Lang.isNumber(f) || (f = 0), e.Lang.isNumber(l) || (l = 0), e.Lang.isBoolean(c) || (c = !1), e.Lang.isBoolean(h) || (h = !1), e.Lang.isBoolean(d) || (d = !1), e.Lang.isBoolean(v) || (v = !1), e.Lang.isNumber(b) || (b = 1), e.Lang.isNumber(w) || (w = 0), e.Lang.isFunction(e.config.doc.createEvent) ? (e.UA.android ? e.UA.android < 4 ? (E = e.config.doc.createEvent("MouseEvents"), E.initMouseEvent(n, r, i, s, o, u, a, f, l, c, h, d, v, 0, t), E.touches = m, E.targetTouches = g, E.changedTouches = y) : (E = e.config.doc.createEvent("TouchEvent"), E.initTouchEvent(m, g, y, n, s, u, a, f, l, c, h, d, v)) : e.UA.ios ? e.UA.ios >= 2 ? (E = e.config.doc.createEvent("TouchEvent"), E.initTouchEvent(n, r, i, s, o, u, a, f, l, c, h, d, v, m, g, y, b, w)) : e.error("simulateTouchEvent(): No touch event simulation framework present for iOS, " + e.UA.ios + ".") : e.error("simulateTouchEvent(): Not supported agent yet, " + e.UA.userAgent), t.dispatchEvent(E)) : e.error("simulateTouchEvent(): No event simulation framework present.")
        }
        var t = e.Lang,
            n = e.config.win,
            r = t.isFunction,
            i = t.isString,
            s = t.isBoolean,
            o = t.isObject,
            u = t.isNumber,
            a = {
                click: 1,
                dblclick: 1,
                mouseover: 1,
                mouseout: 1,
                mousedown: 1,
                mouseup: 1,
                mousemove: 1,
                contextmenu: 1
            },
            f = n && n.PointerEvent ? {
                pointerover: 1,
                pointerout: 1,
                pointerdown: 1,
                pointerup: 1,
                pointermove: 1
            } : {
                MSPointerOver: 1,
                MSPointerOut: 1,
                MSPointerDown: 1,
                MSPointerUp: 1,
                MSPointerMove: 1
            },
            l = {
                keydown: 1,
                keyup: 1,
                keypress: 1
            },
            c = {
                submit: 1,
                blur: 1,
                change: 1,
                focus: 1,
                resize: 1,
                scroll: 1,
                select: 1
            },
            h = {
                scroll: 1,
                resize: 1,
                reset: 1,
                submit: 1,
                change: 1,
                select: 1,
                error: 1,
                abort: 1
            },
            p = {
                touchstart: 1,
                touchmove: 1,
                touchend: 1,
                touchcancel: 1
            },
            d = {
                gesturestart: 1,
                gesturechange: 1,
                gestureend: 1
            };
        e.mix(h, a), e.mix(h, l), e.mix(h, p), e.Event.simulate = function(t, n, r) {
            r = r || {}, a[n] || f[n] ? m(t, n, r.bubbles, r.cancelable, r.view, r.detail, r.screenX, r.screenY, r.clientX, r.clientY, r.ctrlKey, r.altKey, r.shiftKey, r.metaKey, r.button, r.relatedTarget) : l[n] ? v(t, n, r.bubbles, r.cancelable, r.view, r.ctrlKey, r.altKey, r.shiftKey, r.metaKey, r.keyCode, r.charCode) : c[n] ? g(t, n, r.bubbles, r.cancelable, r.view, r.detail) : p[n] ? e.config.win && "ontouchstart" in e.config.win && !e.UA.phantomjs && !(e.UA.chrome && e.UA.chrome < 6) ? b(t, n, r.bubbles, r.cancelable, r.view, r.detail, r.screenX, r.screenY, r.clientX, r.clientY, r.ctrlKey, r.altKey, r.shiftKey, r.metaKey, r.touches, r.targetTouches, r.changedTouches, r.scale, r.rotation) : e.error("simulate(): Event '" + n + "' can't be simulated. Use gesture-simulate module instead.") : e.UA.ios && e.UA.ios >= 2 && d[n] ? y(t, n, r.bubbles, r.cancelable, r.view, r.detail, r.screenX, r.screenY, r.clientX, r.clientY, r.ctrlKey, r.altKey, r.shiftKey, r.metaKey, r.scale, r.rotation) : e.error("simulate(): Event '" + n + "' can't be simulated.")
        }
    })()
}, "@VERSION@", {
    requires: ["event-base"]
});
YUI.add("event-synthetic", function(e, t) {
    function c(e, t) {
        this.handle = e, this.emitFacade = t
    }

    function h(e, t, n) {
        this.handles = [], this.el = e, this.key = n, this.domkey = t
    }

    function p() {
        this._init.apply(this, arguments)
    }
    var n = e.CustomEvent,
        r = e.Env.evt.dom_map,
        i = e.Array,
        s = e.Lang,
        o = s.isObject,
        u = s.isString,
        a = s.isArray,
        f = e.Selector.query,
        l = function() {};
    c.prototype.fire = function(t) {
        var n = i(arguments, 0, !0),
            r = this.handle,
            s = r.evt,
            u = r.sub,
            a = u.context,
            f = u.filter,
            l = t || {},
            c;
        if (this.emitFacade) {
            if (!t || !t.preventDefault) l = s._getFacade(), o(t) && !t.preventDefault ? (e.mix(l, t, !0), n[0] = l) : n.unshift(l);
            l.type = s.type, l.details = n.slice(), f && (l.container = s.host)
        } else f && o(t) && t.currentTarget && n.shift();
        return u.context = a || l.currentTarget || s.host, c = s.fire.apply(s, n), t.prevented && s.preventedFn && s.preventedFn.apply(s, n), t.stopped && s.stoppedFn && s.stoppedFn.apply(s, n), u.context = a, c
    }, h.prototype = {
        constructor: h,
        type: "_synth",
        fn: l,
        capture: !1,
        register: function(e) {
            e.evt.registry = this, this.handles.push(e)
        },
        unregister: function(t) {
            var n = this.handles,
                i = r[this.domkey],
                s;
            for (s = n.length - 1; s >= 0; --s)
                if (n[s].sub === t) {
                    n.splice(s, 1);
                    break
                }
            n.length || (delete i[this.key], e.Object.size(i) || delete r[this.domkey])
        },
        detachAll: function() {
            var e = this.handles,
                t = e.length;
            while (--t >= 0) e[t].detach()
        }
    }, e.mix(p, {
        Notifier: c,
        SynthRegistry: h,
        getRegistry: function(t, n, i) {
            var s = t._node,
                o = e.stamp(s),
                u = "event:" + o + n + "_synth",
                a = r[o];
            return i && (a || (a = r[o] = {}), a[u] || (a[u] = new h(s, o, u))), a && a[u] || null
        },
        _deleteSub: function(e) {
            if (e && e.fn) {
                var t = this.eventDef,
                    r = e.filter ? "detachDelegate" : "detach";
                this._subscribers = [], n.keepDeprecatedSubs && (this.subscribers = {}), t[r](e.node, e, this.notifier, e.filter), this.registry.unregister(e), delete e.fn, delete e.node, delete e.context
            }
        },
        prototype: {
            constructor: p,
            _init: function() {
                var e = this.publishConfig || (this.publishConfig = {});
                this.emitFacade = "emitFacade" in e ? e.emitFacade : !0, e.emitFacade = !1
            },
            processArgs: l,
            on: l,
            detach: l,
            delegate: l,
            detachDelegate: l,
            _on: function(t, n) {
                var r = [],
                    s = t.slice(),
                    o = this.processArgs(t, n),
                    a = t[2],
                    l = n ? "delegate" : "on",
                    c, h;
                return c = u(a) ? f(a) : i(a || e.one(e.config.win)), !c.length && u(a) ? (h = e.on("available", function() {
                    e.mix(h, e[l].apply(e, s), !0)
                }, a), h) : (e.Array.each(c, function(i) {
                    var s = t.slice(),
                        u;
                    i = e.one(i), i && (n && (u = s.splice(3, 1)[0]), s.splice(0, 4, s[1], s[3]), (!this.preventDups || !this.getSubs(i, t, null, !0)) && r.push(this._subscribe(i, l, s, o, u)))
                }, this), r.length === 1 ? r[0] : new e.EventHandle(r))
            },
            _subscribe: function(t, n, r, i, s) {
                var o = new e.CustomEvent(this.type, this.publishConfig),
                    u = o.on.apply(o, r),
                    a = new c(u, this.emitFacade),
                    f = p.getRegistry(t, this.type, !0),
                    l = u.sub;
                return l.node = t, l.filter = s, i && this.applyArgExtras(i, l), e.mix(o, {
                    eventDef: this,
                    notifier: a,
                    host: t,
                    currentTarget: t,
                    target: t,
                    el: t._node,
                    _delete: p._deleteSub
                }, !0), u.notifier = a, f.register(u), this[n](t, l, a, s), u
            },
            applyArgExtras: function(e, t) {
                t._extra = e
            },
            _detach: function(t) {
                var n = t[2],
                    r = u(n) ? f(n) : i(n),
                    s, o, a, l, c;
                t.splice(2, 1);
                for (o = 0, a = r.length; o < a; ++o) {
                    s = e.one(r[o]);
                    if (s) {
                        l = this.getSubs(s, t);
                        if (l)
                            for (c = l.length - 1; c >= 0; --c) l[c].detach()
                    }
                }
            },
            getSubs: function(e, t, n, r) {
                var i = p.getRegistry(e, this.type),
                    s = [],
                    o, u, a, f;
                if (i) {
                    o = i.handles, n || (n = this.subMatch);
                    for (u = 0, a = o.length; u < a; ++u) {
                        f = o[u];
                        if (n.call(this, f.sub, t)) {
                            if (r) return f;
                            s.push(o[u])
                        }
                    }
                }
                return s.length && s
            },
            subMatch: function(e, t) {
                return !t[1] || e.fn === t[1]
            }
        }
    }, !0), e.SyntheticEvent = p, e.Event.define = function(t, n, r) {
        var s, o, f;
        t && t.type ? (s = t, r = n) : n && (s = e.merge({
            type: t
        }, n));
        if (s) {
            if (r || !e.Node.DOM_EVENTS[s.type]) o = function() {
                p.apply(this, arguments)
            }, e.extend(o, p, s), f = new o, t = f.type, e.Node.DOM_EVENTS[t] = e.Env.evt.plugins[t] = {
                eventDef: f,
                on: function() {
                    return f._on(i(arguments))
                },
                delegate: function() {
                    return f._on(i(arguments), !0)
                },
                detach: function() {
                    return f._detach(i(arguments))
                }
            }
        } else(u(t) || a(t)) && e.Array.each(i(t), function(t) {
            e.Node.DOM_EVENTS[t] = 1
        });
        return f
    }
}, "@VERSION@", {
    requires: ["node-base", "event-custom-complex"]
});
YUI.add("event-tap", function(e, t) {
    function a(t, n) {
        n = n || e.Object.values(u), e.Array.each(n, function(e) {
            var n = t[e];
            n && (n.detach(), t[e] = null)
        })
    }
    var n = e.config.doc,
        r = e.Event._GESTURE_MAP,
        i = r.start,
        s = "tap",
        o = /pointer/i,
        u = {
            START: "Y_TAP_ON_START_HANDLE",
            END: "Y_TAP_ON_END_HANDLE",
            CANCEL: "Y_TAP_ON_CANCEL_HANDLE"
        };
    e.Event.define(s, {
        publishConfig: {
            preventedFn: function(e) {
                var t = e.target.once("click", function(e) {
                    e.preventDefault()
                });
                setTimeout(function() {
                    t.detach()
                }, 100)
            }
        },
        processArgs: function(e, t) {
            if (!t) {
                var n = e[3];
                return e.splice(3, 1), n
            }
        },
        on: function(e, t, n) {
            t[u.START] = e.on(i, this._start, this, e, t, n)
        },
        detach: function(e, t, n) {
            a(t)
        },
        delegate: function(t, n, r, s) {
            n[u.START] = e.delegate(i, function(e) {
                this._start(e, t, n, r, !0)
            }, t, s, this)
        },
        detachDelegate: function(e, t, n) {
            a(t)
        },
        _start: function(e, t, n, i, s) {
            var a = {
                    canceled: !1,
                    eventType: e.type
                },
                f = n.preventMouse || !1;
            if (e.button && e.button === 3) return;
            if (e.touches && e.touches.length !== 1) return;
            a.node = s ? e.currentTarget : t, e.touches ? a.startXY = [e.touches[0].pageX, e.touches[0].pageY] : a.startXY = [e.pageX, e.pageY], e.touches ? (n[u.END] = t.once("touchend", this._end, this, t, n, i, s, a), n[u.CANCEL] = t.once("touchcancel", this.detach, this, t, n, i, s, a), n.preventMouse = !0) : a.eventType.indexOf("mouse") !== -1 && !f ? (n[u.END] = t.once("mouseup", this._end, this, t, n, i, s, a), n[u.CANCEL] = t.once("mousecancel", this.detach, this, t, n, i, s, a)) : a.eventType.indexOf("mouse") !== -1 && f ? n.preventMouse = !1 : o.test(a.eventType) && (n[u.END] = t.once(r.end, this._end, this, t, n, i, s, a), n[u.CANCEL] = t.once(r.cancel, this.detach, this, t, n, i, s, a))
        },
        _end: function(e, t, n, r, i, o) {
            var f = o.startXY,
                l, c, h = 15;
            n._extra && n._extra.sensitivity >= 0 && (h = n._extra.sensitivity), e.changedTouches ? (l = [e.changedTouches[0].pageX, e.changedTouches[0].pageY], c = [e.changedTouches[0].clientX, e.changedTouches[0].clientY]) : (l = [e.pageX, e.pageY], c = [e.clientX, e.clientY]), Math.abs(l[0] - f[0]) <= h && Math.abs(l[1] - f[1]) <= h && (e.type = s, e.pageX = l[0], e.pageY = l[1], e.clientX = c[0], e.clientY = c[1], e.currentTarget = o.node, r.fire(e)), a(n, [u.END, u.CANCEL])
        }
    })
}, "@VERSION@", {
    requires: ["node-base", "event-base", "event-touch", "event-synthetic"]
});
YUI.add("event-touch", function(e, t) {
    var n = "scale",
        r = "rotation",
        i = "identifier",
        s = e.config.win,
        o = {};
    e.DOMEventFacade.prototype._touch = function(t, s, o) {
        var u, a, f, l, c;
        if (t.touches) {
            this.touches = [], c = {};
            for (u = 0, a = t.touches.length; u < a; ++u) l = t.touches[u], c[e.stamp(l)] = this.touches[u] = new e.DOMEventFacade(l, s, o)
        }
        if (t.targetTouches) {
            this.targetTouches = [];
            for (u = 0, a = t.targetTouches.length; u < a; ++u) l = t.targetTouches[u], f = c && c[e.stamp(l, !0)], this.targetTouches[u] = f || new e.DOMEventFacade(l, s, o)
        }
        if (t.changedTouches) {
            this.changedTouches = [];
            for (u = 0, a = t.changedTouches.length; u < a; ++u) l = t.changedTouches[u], f = c && c[e.stamp(l, !0)], this.changedTouches[u] = f || new e.DOMEventFacade(l, s, o)
        }
        n in t && (this[n] = t[n]), r in t && (this[r] = t[r]), i in t && (this[i] = t[i])
    }, e.Node.DOM_EVENTS && e.mix(e.Node.DOM_EVENTS, {
        touchstart: 1,
        touchmove: 1,
        touchend: 1,
        touchcancel: 1,
        gesturestart: 1,
        gesturechange: 1,
        gestureend: 1,
        MSPointerDown: 1,
        MSPointerUp: 1,
        MSPointerMove: 1,
        MSPointerCancel: 1,
        pointerdown: 1,
        pointerup: 1,
        pointermove: 1,
        pointercancel: 1
    }), s && "ontouchstart" in s && !(e.UA.chrome && e.UA.chrome < 6) ? (o.start = ["touchstart", "mousedown"], o.end = ["touchend", "mouseup"], o.move = ["touchmove", "mousemove"], o.cancel = ["touchcancel", "mousecancel"]) : s && s.PointerEvent ? (o.start = "pointerdown", o.end = "pointerup", o.move = "pointermove", o.cancel = "pointercancel") : s && "msPointerEnabled" in s.navigator ? (o.start = "MSPointerDown", o.end = "MSPointerUp", o.move = "MSPointerMove", o.cancel = "MSPointerCancel") : (o.start = "mousedown", o.end = "mouseup", o.move = "mousemove", o.cancel = "mousecancel"), e.Event._GESTURE_MAP = o
}, "@VERSION@", {
    requires: ["node-base"]
});
YUI.add("event-valuechange", function(e, t) {
    var n = "_valuechange",
        r = "value",
        i = "nodeName",
        s, o = {
            POLL_INTERVAL: 50,
            TIMEOUT: 1e4,
            _poll: function(t, r) {
                var i = t._node,
                    s = r.e,
                    u = t._data && t._data[n],
                    a = 0,
                    f, l, c, h, p, d;
                if (!i || !u) {
                    o._stopPolling(t);
                    return
                }
                l = u.prevVal, h = u.nodeName, u.isEditable ? c = i.innerHTML : h === "input" || h === "textarea" ? c = i.value : h === "select" && (p = i.options[i.selectedIndex], c = p.value || p.text), c !== l && (u.prevVal = c, f = {
                    _event: s,
                    currentTarget: s && s.currentTarget || t,
                    newVal: c,
                    prevVal: l,
                    target: s && s.target || t
                }, e.Object.some(u.notifiers, function(e) {
                    var t = e.handle.evt,
                        n;
                    a !== 1 ? e.fire(f) : t.el === d && e.fire(f), n = t && t._facade ? t._facade.stopped : 0, n > a && (a = n, a === 1 && (d = t.el));
                    if (a === 2) return !0
                }), o._refreshTimeout(t))
            },
            _refreshTimeout: function(e, t) {
                if (!e._node) return;
                var r = e.getData(n);
                o._stopTimeout(e), r.timeout = setTimeout(function() {
                    o._stopPolling(e, t)
                }, o.TIMEOUT)
            },
            _startPolling: function(t, s, u) {
                var a, f;
                if (!t.test("input,textarea,select") && !(f = o._isEditable(t))) return;
                a = t.getData(n), a || (a = {
                    nodeName: t.get(i).toLowerCase(),
                    isEditable: f,
                    prevVal: f ? t.getDOMNode().innerHTML : t.get(r)
                }, t.setData(n, a)), a.notifiers || (a.notifiers = {});
                if (a.interval) {
                    if (!u.force) {
                        a.notifiers[e.stamp(s)] = s;
                        return
                    }
                    o._stopPolling(t, s)
                }
                a.notifiers[e.stamp(s)] = s, a.interval = setInterval(function() {
                    o._poll(t, u)
                }, o.POLL_INTERVAL), o._refreshTimeout(t, s)
            },
            _stopPolling: function(t, r) {
                if (!t._node) return;
                var i = t.getData(n) || {};
                clearInterval(i.interval), delete i.interval, o._stopTimeout(t), r ? i.notifiers && delete i.notifiers[e.stamp(r)] : i.notifiers = {}
            },
            _stopTimeout: function(e) {
                var t = e.getData(n) || {};
                clearTimeout(t.timeout), delete t.timeout
            },
            _isEditable: function(e) {
                var t = e._node;
                return t.contentEditable === "true" || t.contentEditable === ""
            },
            _onBlur: function(e, t) {
                o._stopPolling(e.currentTarget, t)
            },
            _onFocus: function(e, t) {
                var s = e.currentTarget,
                    u = s.getData(n);
                u || (u = {
                    isEditable: o._isEditable(s),
                    nodeName: s.get(i).toLowerCase()
                }, s.setData(n, u)), u.prevVal = u.isEditable ? s.getDOMNode().innerHTML : s.get(r), o._startPolling(s, t, {
                    e: e
                })
            },
            _onKeyDown: function(e, t) {
                o._startPolling(e.currentTarget, t, {
                    e: e
                })
            },
            _onKeyUp: function(e, t) {
                (e.charCode === 229 || e.charCode === 197) && o._startPolling(e.currentTarget, t, {
                    e: e,
                    force: !0
                })
            },
            _onMouseDown: function(e, t) {
                o._startPolling(e.currentTarget, t, {
                    e: e
                })
            },
            _onSubscribe: function(t, s, u, a) {
                var f, l, c, h, p;
                l = {
                    blur: o._onBlur,
                    focus: o._onFocus,
                    keydown: o._onKeyDown,
                    keyup: o._onKeyUp,
                    mousedown: o._onMouseDown
                }, f = u._valuechange = {};
                if (a) f.delegated = !0, f.getNodes = function() {
                    return h = t.all("input,textarea,select").filter(a), p = t.all('[contenteditable="true"],[contenteditable=""]').filter(a), h.concat(p)
                }, f.getNodes().each(function(e) {
                    e.getData(n) || e.setData(n, {
                        nodeName: e.get(i).toLowerCase(),
                        isEditable: o._isEditable(e),
                        prevVal: c ? e.getDOMNode().innerHTML : e.get(r)
                    })
                }), u._handles = e.delegate(l, t, a, null, u);
                else {
                    c = o._isEditable(t);
                    if (!t.test("input,textarea,select") && !c) return;
                    t.getData(n) || t.setData(n, {
                        nodeName: t.get(i).toLowerCase(),
                        isEditable: c,
                        prevVal: c ? t.getDOMNode().innerHTML : t.get(r)
                    }), u._handles = t.on(l, null, null, u)
                }
            },
            _onUnsubscribe: function(e, t, n) {
                var r = n._valuechange;
                n._handles && n._handles.detach(), r.delegated ? r.getNodes().each(function(e) {
                    o._stopPolling(e, n)
                }) : o._stopPolling(e, n)
            }
        };
    s = {
        detach: o._onUnsubscribe,
        on: o._onSubscribe,
        delegate: o._onSubscribe,
        detachDelegate: o._onUnsubscribe,
        publishConfig: {
            emitFacade: !0
        }
    }, e.Event.define("valuechange", s), e.Event.define("valueChange", s), e.ValueChange = o
}, "@VERSION@", {
    requires: ["event-focus", "event-synthetic"]
});
YUI.add("gesture-simulate", function(e, t) {
    function T(n) {
        n || e.error(t + ": invalid target node"), this.node = n, this.target = e.Node.getDOMNode(n);
        var r = this.node.getXY(),
            i = this._getDims();
        a = r[0] + i[0] / 2, f = r[1] + i[1] / 2
    }
    var t = "gesture-simulate",
        n = e.config.win && "ontouchstart" in e.config.win && !e.UA.phantomjs && !(e.UA.chrome && e.UA.chrome < 6),
        r = {
            tap: 1,
            doubletap: 1,
            press: 1,
            move: 1,
            flick: 1,
            pinch: 1,
            rotate: 1
        },
        i = {
            touchstart: 1,
            touchmove: 1,
            touchend: 1,
            touchcancel: 1
        },
        s = e.config.doc,
        o, u = 20,
        a, f, l = {
            HOLD_TAP: 10,
            DELAY_TAP: 10,
            HOLD_PRESS: 3e3,
            MIN_HOLD_PRESS: 1e3,
            MAX_HOLD_PRESS: 6e4,
            DISTANCE_MOVE: 200,
            DURATION_MOVE: 1e3,
            MAX_DURATION_MOVE: 5e3,
            MIN_VELOCITY_FLICK: 1.3,
            DISTANCE_FLICK: 200,
            DURATION_FLICK: 1e3,
            MAX_DURATION_FLICK: 5e3,
            DURATION_PINCH: 1e3
        },
        c = "touchstart",
        h = "touchmove",
        p = "touchend",
        d = "gesturestart",
        v = "gesturechange",
        m = "gestureend",
        g = "mouseup",
        y = "mousemove",
        b = "mousedown",
        w = "click",
        E = "dblclick",
        S = "x",
        x = "y";
    T.prototype = {
        _toRadian: function(e) {
            return e * (Math.PI / 180)
        },
        _getDims: function() {
            var e, t, n;
            return this.target.getBoundingClientRect ? (e = this.target.getBoundingClientRect(), "height" in e ? n = e.height : n = Math.abs(e.bottom - e.top), "width" in e ? t = e.width : t = Math.abs(e.right - e.left)) : (e = this.node.get("region"), t = e.width, n = e.height), [t, n]
        },
        _calculateDefaultPoint: function(t) {
            var n;
            return !e.Lang.isArray(t) || t.length === 0 ? t = [a, f] : (t.length == 1 && (n = this._getDims[1], t[1] = n / 2), t[0] = this.node.getX() + t[0], t[1] = this.node.getY() + t[1]), t
        },
        rotate: function(n, r, i, s, o, u, a) {
            var f, l = i,
                c = s;
            if (!e.Lang.isNumber(l) || !e.Lang.isNumber(c) || l < 0 || c < 0) f = this.target.offsetWidth < this.target.offsetHeight ? this.target.offsetWidth / 4 : this.target.offsetHeight / 4, l = f, c = f;
            e.Lang.isNumber(a) || e.error(t + "Invalid rotation detected."), this.pinch(n, r, l, c, o, u, a)
        },
        pinch: function(n, r, i, s, o, a, f) {
            var g, y, b = u,
                w, E = 0,
                S = i,
                x = s,
                T, N, C, k, L, A, O, M, _, D = {
                    start: [],
                    end: []
                },
                P = {
                    start: [],
                    end: []
                },
                H, B;
            r = this._calculateDefaultPoint(r), (!e.Lang.isNumber(S) || !e.Lang.isNumber(x) || S < 0 || x < 0) && e.error(t + "Invalid startRadius and endRadius detected.");
            if (!e.Lang.isNumber(o) || o <= 0) o = l.DURATION_PINCH;
            if (!e.Lang.isNumber(a)) a = 0;
            else {
                a %= 360;
                while (a < 0) a += 360
            }
            e.Lang.isNumber(f) || (f = 0), e.AsyncQueue.defaults.timeout = b, g = new e.AsyncQueue, N = r[0], C = r[1], O = a, M = a + f, D.start = [N + S * Math.sin(this._toRadian(O)), C - S * Math.cos(this._toRadian(O))], D.end = [N + x * Math.sin(this._toRadian(M)), C - x * Math.cos(this._toRadian(M))], P.start = [N - S * Math.sin(this._toRadian(O)), C + S * Math.cos(this._toRadian(O))], P.end = [N - x * Math.sin(this._toRadian(M)), C + x * Math.cos(this._toRadian(M))], k = 1, L = s / i, g.add({
                fn: function() {
                    var t, n, r, i;
                    t = {
                        pageX: D.start[0],
                        pageY: D.start[1],
                        clientX: D.start[0],
                        clientY: D.start[1]
                    }, n = {
                        pageX: P.start[0],
                        pageY: P.start[1],
                        clientX: P.start[0],
                        clientY: P.start[1]
                    }, i = this._createTouchList([e.merge({
                        identifier: E++
                    }, t), e.merge({
                        identifier: E++
                    }, n)]), r = {
                        pageX: (D.start[0] + P.start[0]) / 2,
                        pageY: (D.start[0] + P.start[1]) / 2,
                        clientX: (D.start[0] + P.start[0]) / 2,
                        clientY: (D.start[0] + P.start[1]) / 2
                    }, this._simulateEvent(this.target, c, e.merge({
                        touches: i,
                        targetTouches: i,
                        changedTouches: i,
                        scale: k,
                        rotation: O
                    }, r)), e.UA.ios >= 2 && this._simulateEvent(this.target, d, e.merge({
                        scale: k,
                        rotation: O
                    }, r))
                },
                timeout: 0,
                context: this
            }), H = Math.floor(o / b), T = (x - S) / H, A = (L - k) / H, _ = (M - O) / H, B = function(t) {
                var n = S + T * t,
                    r = N + n * Math.sin(this._toRadian(O + _ * t)),
                    i = C - n * Math.cos(this._toRadian(O + _ * t)),
                    s = N - n * Math.sin(this._toRadian(O + _ * t)),
                    o = C + n * Math.cos(this._toRadian(O + _ * t)),
                    u = (r + s) / 2,
                    a = (i + o) / 2,
                    f, l, c, p;
                f = {
                    pageX: r,
                    pageY: i,
                    clientX: r,
                    clientY: i
                }, l = {
                    pageX: s,
                    pageY: o,
                    clientX: s,
                    clientY: o
                }, p = this._createTouchList([e.merge({
                    identifier: E++
                }, f), e.merge({
                    identifier: E++
                }, l)]), c = {
                    pageX: u,
                    pageY: a,
                    clientX: u,
                    clientY: a
                }, this._simulateEvent(this.target, h, e.merge({
                    touches: p,
                    targetTouches: p,
                    changedTouches: p,
                    scale: k + A * t,
                    rotation: O + _ * t
                }, c)), e.UA.ios >= 2 && this._simulateEvent(this.target, v, e.merge({
                    scale: k + A * t,
                    rotation: O + _ * t
                }, c))
            };
            for (y = 0; y < H; y++) g.add({
                fn: B,
                args: [y],
                context: this
            });
            g.add({
                fn: function() {
                    var t = this._getEmptyTouchList(),
                        n, r, i, s;
                    n = {
                        pageX: D.end[0],
                        pageY: D.end[1],
                        clientX: D.end[0],
                        clientY: D.end[1]
                    }, r = {
                        pageX: P.end[0],
                        pageY: P.end[1],
                        clientX: P.end[0],
                        clientY: P.end[1]
                    }, s = this._createTouchList([e.merge({
                        identifier: E++
                    }, n), e.merge({
                        identifier: E++
                    }, r)]), i = {
                        pageX: (D.end[0] + P.end[0]) / 2,
                        pageY: (D.end[0] + P.end[1]) / 2,
                        clientX: (D.end[0] + P.end[0]) / 2,
                        clientY: (D.end[0] + P.end[1]) / 2
                    }, e.UA.ios >= 2 && this._simulateEvent(this.target, m, e.merge({
                        scale: L,
                        rotation: M
                    }, i)), this._simulateEvent(this.target, p, e.merge({
                        touches: t,
                        targetTouches: t,
                        changedTouches: s,
                        scale: L,
                        rotation: M
                    }, i))
                },
                context: this
            }), n && e.Lang.isFunction(n) && g.add({
                fn: n,
                context: this.node
            }), g.run()
        },
        tap: function(t, r, i, s, o) {
            var u = new e.AsyncQueue,
                a = this._getEmptyTouchList(),
                f, h, d, v, m;
            r = this._calculateDefaultPoint(r);
            if (!e.Lang.isNumber(i) || i < 1) i = 1;
            e.Lang.isNumber(s) || (s = l.HOLD_TAP), e.Lang.isNumber(o) || (o = l.DELAY_TAP), h = {
                pageX: r[0],
                pageY: r[1],
                clientX: r[0],
                clientY: r[1]
            }, f = this._createTouchList([e.merge({
                identifier: 0
            }, h)]), v = function() {
                this._simulateEvent(this.target, c, e.merge({
                    touches: f,
                    targetTouches: f,
                    changedTouches: f
                }, h))
            }, m = function() {
                this._simulateEvent(this.target, p, e.merge({
                    touches: a,
                    targetTouches: a,
                    changedTouches: f
                }, h))
            };
            for (d = 0; d < i; d++) u.add({
                fn: v,
                context: this,
                timeout: d === 0 ? 0 : o
            }), u.add({
                fn: m,
                context: this,
                timeout: s
            });
            i > 1 && !n && u.add({
                fn: function() {
                    this._simulateEvent(this.target, E, h)
                },
                context: this
            }), t && e.Lang.isFunction(t) && u.add({
                fn: t,
                context: this.node
            }), u.run()
        },
        flick: function(n, r, i, s, o) {
            var u;
            r = this._calculateDefaultPoint(r), e.Lang.isString(i) ? (i = i.toLowerCase(), i !== S && i !== x && e.error(t + "(flick): Only x or y axis allowed")) : i = S, e.Lang.isNumber(s) || (s = l.DISTANCE_FLICK), e.Lang.isNumber(o) ? o > l.MAX_DURATION_FLICK && (o = l.MAX_DURATION_FLICK) : o = l.DURATION_FLICK, Math.abs(s) / o < l.MIN_VELOCITY_FLICK && (o = Math.abs(s) / l.MIN_VELOCITY_FLICK), u = {
                start: e.clone(r),
                end: [i === S ? r[0] + s : r[0], i === x ? r[1] + s : r[1]]
            }, this._move(n, u, o)
        },
        move: function(t, n, r) {
            var i;
            e.Lang.isObject(n) ? (e.Lang.isArray(n.point) ? n.point = this._calculateDefaultPoint(n.point) : n.point = this._calculateDefaultPoint([]), e.Lang.isNumber(n.xdist) || (n.xdist = l.DISTANCE_MOVE), e.Lang.isNumber(n.ydist) || (n.ydist = 0)) : n = {
                point: this._calculateDefaultPoint([]),
                xdist: l.
                DISTANCE_MOVE,
                ydist: 0
            }, e.Lang.isNumber(r) ? r > l.MAX_DURATION_MOVE && (r = l.MAX_DURATION_MOVE) : r = l.DURATION_MOVE, i = {
                start: e.clone(n.point),
                end: [n.point[0] + n.xdist, n.point[1] + n.ydist]
            }, this._move(t, i, r)
        },
        _move: function(t, n, r) {
            var i, s, o = u,
                d, v, m, g = 0,
                y;
            e.Lang.isNumber(r) ? r > l.MAX_DURATION_MOVE && (r = l.MAX_DURATION_MOVE) : r = l.DURATION_MOVE, e.Lang.isObject(n) ? (e.Lang.isArray(n.start) || (n.start = [a, f]), e.Lang.isArray(n.end) || (n.end = [a + l.DISTANCE_MOVE, f])) : n = {
                start: [a, f],
                end: [a + l.DISTANCE_MOVE, f]
            }, e.AsyncQueue.defaults.timeout = o, i = new e.AsyncQueue, i.add({
                fn: function() {
                    var t = {
                            pageX: n.start[0],
                            pageY: n.start[1],
                            clientX: n.start[0],
                            clientY: n.start[1]
                        },
                        r = this._createTouchList([e.merge({
                            identifier: g++
                        }, t)]);
                    this._simulateEvent(this.target, c, e.merge({
                        touches: r,
                        targetTouches: r,
                        changedTouches: r
                    }, t))
                },
                timeout: 0,
                context: this
            }), d = Math.floor(r / o), v = (n.end[0] - n.start[0]) / d, m = (n.end[1] - n.start[1]) / d, y = function(t) {
                var r = n.start[0] + v * t,
                    i = n.start[1] + m * t,
                    s = {
                        pageX: r,
                        pageY: i,
                        clientX: r,
                        clientY: i
                    },
                    o = this._createTouchList([e.merge({
                        identifier: g++
                    }, s)]);
                this._simulateEvent(this.target, h, e.merge({
                    touches: o,
                    targetTouches: o,
                    changedTouches: o
                }, s))
            };
            for (s = 0; s < d; s++) i.add({
                fn: y,
                args: [s],
                context: this
            });
            i.add({
                fn: function() {
                    var t = {
                            pageX: n.end[0],
                            pageY: n.end[1],
                            clientX: n.end[0],
                            clientY: n.end[1]
                        },
                        r = this._createTouchList([e.merge({
                            identifier: g
                        }, t)]);
                    this._simulateEvent(this.target, h, e.merge({
                        touches: r,
                        targetTouches: r,
                        changedTouches: r
                    }, t))
                },
                timeout: 0,
                context: this
            }), i.add({
                fn: function() {
                    var t = {
                            pageX: n.end[0],
                            pageY: n.end[1],
                            clientX: n.end[0],
                            clientY: n.end[1]
                        },
                        r = this._getEmptyTouchList(),
                        i = this._createTouchList([e.merge({
                            identifier: g
                        }, t)]);
                    this._simulateEvent(this.target, p, e.merge({
                        touches: r,
                        targetTouches: r,
                        changedTouches: i
                    }, t))
                },
                context: this
            }), t && e.Lang.isFunction(t) && i.add({
                fn: t,
                context: this.node
            }), i.run()
        },
        _getEmptyTouchList: function() {
            return o || (o = this._createTouchList([])), o
        },
        _createTouchList: function(n) {
            var r = [],
                i, o = this;
            return !!n && e.Lang.isArray(n) ? e.UA.android && e.UA.android >= 4 || e.UA.ios && e.UA.ios >= 2 ? (e.each(n, function(t) {
                t.identifier || (t.identifier = 0), t.pageX || (t.pageX = 0), t.pageY || (t.pageY = 0), t.screenX || (t.screenX = 0), t.screenY || (t.screenY = 0), r.push(s.createTouch(e.config.win, o.target, t.identifier, t.pageX, t.pageY, t.screenX, t.screenY))
            }), i = s.createTouchList.apply(s, r)) : e.UA.ios && e.UA.ios < 2 ? e.error(t + ": No touch event simulation framework present.") : (i = [], e.each(n, function(e) {
                e.identifier || (e.identifier = 0), e.clientX || (e.clientX = 0), e.clientY || (e.clientY = 0), e.pageX || (e.pageX = 0), e.pageY || (e.pageY = 0), e.screenX || (e.screenX = 0), e.screenY || (e.screenY = 0), i.push({
                    target: o.target,
                    identifier: e.identifier,
                    clientX: e.clientX,
                    clientY: e.clientY,
                    pageX: e.pageX,
                    pageY: e.pageY,
                    screenX: e.screenX,
                    screenY: e.screenY
                })
            }), i.item = function(e) {
                return i[e]
            }) : e.error(t + ": Invalid touchPoints passed"), i
        },
        _simulateEvent: function(t, r, s) {
            var o;
            i[r] ? n ? e.Event.simulate(t, r, s) : this._isSingleTouch(s.touches, s.targetTouches, s.changedTouches) ? (r = {
                touchstart: b,
                touchmove: y,
                touchend: g
            }[r], s.button = 0, s.relatedTarget = null, o = r === g ? s.changedTouches : s.touches, s = e.mix(s, {
                screenX: o.item(0).screenX,
                screenY: o.item(0).screenY,
                clientX: o.item(0).clientX,
                clientY: o.item(0).clientY
            }, !0), e.Event.simulate(t, r, s), r == g && e.Event.simulate(t, w, s)) : e.error("_simulateEvent(): Event '" + r + "' has multi touch objects that can't be simulated in your platform.") : e.Event.simulate(t, r, s)
        },
        _isSingleTouch: function(e, t, n) {
            return e && e.length <= 1 && t && t.length <= 1 && n && n.length <= 1
        }
    }, e.GestureSimulation = T, e.GestureSimulation.defaults = l, e.GestureSimulation.GESTURES = r, e.Event.simulateGesture = function(n, i, s, o) {
        n = e.one(n);
        var u = new e.GestureSimulation(n);
        i = i.toLowerCase(), !o && e.Lang.isFunction(s) && (o = s, s = {}), s = s || {};
        if (r[i]) switch (i) {
            case "tap":
                u.tap(o, s.point, s.times, s.hold, s.delay);
                break;
            case "doubletap":
                u.tap(o, s.point, 2);
                break;
            case "press":
                e.Lang.isNumber(s.hold) ? s.hold < l.MIN_HOLD_PRESS ? s.hold = l.MIN_HOLD_PRESS : s.hold > l.MAX_HOLD_PRESS && (s.hold = l.MAX_HOLD_PRESS) : s.hold = l.HOLD_PRESS, u.tap(o, s.point, 1, s.hold);
                break;
            case "move":
                u.move(o, s.path, s.duration);
                break;
            case "flick":
                u.flick(o, s.point, s.axis, s.distance, s.duration);
                break;
            case "pinch":
                u.pinch(o, s.center, s.r1, s.r2, s.duration, s.start, s.rotation);
                break;
            case "rotate":
                u.rotate(o, s.center, s.r1, s.r2, s.duration, s.start, s.rotation)
        } else e.error(t + ": Not a supported gesture simulation: " + i)
    }
}, "@VERSION@", {
    requires: ["async-queue", "event-simulate", "node-screen"]
});
YUI.add("history-base", function(e, t) {
    function p() {
        this._init.apply(this, arguments)
    }

    function d(e) {
        return n.type(e) === "object"
    }
    var n = e.Lang,
        r = e.Object,
        i = YUI.namespace("Env.History"),
        s = e.Array,
        o = e.config.doc,
        u = o.documentMode,
        a = e.config.win,
        f = {
            merge: !0
        },
        l = "change",
        c = "add",
        h = "replace";
    e.augment(p, e.EventTarget, null, null, {
        emitFacade: !0,
        prefix: "history",
        preventable: !1,
        queueable: !0
    }), i._state || (i._state = {}), p.NAME = "historyBase", p.SRC_ADD = c, p.SRC_REPLACE = h, p.html5 = !!(a.history && a.history.pushState && a.history.replaceState && ("onpopstate" in a || e.UA.gecko >= 2) && (!e.UA.android || e.UA.android >= 2.4)), p.nativeHashChange = ("onhashchange" in a || "onhashchange" in o) && (!u || u > 7), e.mix(p.prototype, {
        _init: function(e) {
            var t;
            e = this._config = e || {}, this.force = !!e.force, t = this._initialState = this._initialState || e.initialState || null, this.publish(l, {
                broadcast: 2,
                defaultFn: this._defChangeFn
            }), t && this.replace(t)
        },
        add: function() {
            var e = s(arguments, 0, !0);
            return e.unshift(c), this._change.apply(this, e)
        },
        addValue: function(e, t, n) {
            var r = {};
            return r[e] = t, this._change(c, r, n)
        },
        get: function(t) {
            var n = i._state,
                s = d(n);
            return t ? s && r.owns(n, t) ? n[t] : undefined : s ? e.mix({}, n, !0) : n
        },
        replace: function() {
            var e = s(arguments, 0, !0);
            return e.unshift(h), this._change.apply(this, e)
        },
        replaceValue: function(e, t, n) {
            var r = {};
            return r[e] = t, this._change(h, r, n)
        },
        _change: function(t, n, r) {
            return r = r ? e.merge(f, r) : f, r.merge && d(n) && d(i._state) && (n = e.merge(i._state, n)), this._resolveChanges(t, n, r), this
        },
        _fireEvents: function(e, t, n) {
            this.fire(l, {
                _options: n,
                changed: t.changed,
                newVal: t.newState,
                prevVal: t.prevState,
                removed: t.removed,
                src: e
            }), r.each(t.changed, function(t, n) {
                this._fireChangeEvent(e, n, t)
            }, this), r.each(t.removed, function(t, n) {
                this._fireRemoveEvent(e, n, t)
            }, this)
        },
        _fireChangeEvent: function(e, t, n) {
            this.fire(t + "Change", {
                newVal: n.newVal,
                prevVal: n.prevVal,
                src: e
            })
        },
        _fireRemoveEvent: function(e, t, n) {
            this.fire(t + "Remove", {
                prevVal: n,
                src: e
            })
        },
        _resolveChanges: function(e, t, n) {
            var s = {},
                o, u = i._state,
                a = {};
            t || (t = {}), n || (n = {}), d(t) && d(u) ? (r.each(t, function(e, t) {
                var n = u[t];
                e !== n && (s[t] = {
                    newVal: e,
                    prevVal: n
                }, o = !0)
            }, this), r.each(u, function(e, n) {
                if (!r.owns(t, n) || t[n] === null) delete t[n], a[n] = e, o = !0
            }, this)) : o = t !== u, (o || this.force) && this._fireEvents(e, {
                changed: s,
                newState: t,
                prevState: u,
                removed: a
            }, n)
        },
        _storeState: function(e, t) {
            i._state = t || {}
        },
        _defChangeFn: function(e) {
            this._storeState(e.src, e.newVal, e._options)
        }
    }, !0), e.HistoryBase = p
}, "@VERSION@", {
    requires: ["event-custom-complex"]
});
YUI.add("history-hash", function(e, t) {
    function p() {
        p.superclass.constructor.apply(this, arguments)
    }
    var n = e.HistoryBase,
        r = e.Lang,
        i = e.Array,
        s = e.Object,
        o = YUI.namespace("Env.HistoryHash"),
        u = "hash",
        a, f, l, c = e.config.win,
        h = e.config.useHistoryHTML5;
    e.extend(p, n, {
        _init: function(t) {
            var n = p.parseHash();
            t = t || {}, this._initialState = t.initialState ? e.merge(t.initialState, n) : n, e.after("hashchange", e.bind(this._afterHashChange, this), c), p.superclass._init.apply(this, arguments)
        },
        _change: function(e, t, n) {
            return s.each(t, function(e, n) {
                r.isValue(e) && (t[n] = e.toString())
            }), p.superclass._change.call(this, e, t, n)
        },
        _storeState: function(e, t) {
            var r = p.decode,
                i = p.createHash(t);
            p.superclass._storeState.apply(this, arguments), e !== u && r(p.getHash()) !== r(i) && p[e === n.SRC_REPLACE ? "replaceHash" : "setHash"](i)
        },
        _afterHashChange: function(e) {
            this._resolveChanges(u, p.parseHash(e.newHash), {})
        }
    }, {
        NAME: "historyHash",
        SRC_HASH: u,
        hashPrefix: "",
        _REGEX_HASH: /([^\?#&=]+)=?([^&=]*)/g,
        createHash: function(e) {
            var t = p.encode,
                n = [];
            return s.each(e, function(e, i) {
                r.isValue(e) && n.push(t(i) + "=" + t(e))
            }), n.join("&")
        },
        decode: function(e) {
            return decodeURIComponent(e.replace(/\+/g, " "))
        },
        encode: function(e) {
            return encodeURIComponent(e).replace(/%20/g, "+")
        },
        getHash: e.UA.gecko ? function() {
            var t = e.getLocation(),
                n = /#(.*)$/.exec(t.href),
                r = n && n[1] || "",
                i = p.hashPrefix;
            return i && r.indexOf(i) === 0 ? r.replace(i, "") : r
        } : function() {
            var t = e.getLocation(),
                n = t.hash.substring(1),
                r = p.hashPrefix;
            return r && n.indexOf(r) === 0 ? n.replace(r, "") : n
        },
        getUrl: function() {
            return location.href
        },
        parseHash: function(e) {
            var t = p.decode,
                n, i, s, o, u, a = {},
                f = p.hashPrefix,
                l;
            e = r.isValue(e) ? e : p.getHash();
            if (f) {
                l = e.indexOf(f);
                if (l === 0 || l === 1 && e.charAt(0) === "#") e = e.replace(f, "")
            }
            o = e.match(p._REGEX_HASH) || [];
            for (n = 0, i = o.length; n < i; ++n) s = o[n], u = s.split("="), u.length > 1 ? a[t(u[0])] = t(u[1]) : a[t(s)] = "";
            return a
        },
        replaceHash: function(t) {
            var n = e.getLocation(),
                r = n.href.replace(/#.*$/, "");
            t.charAt(0) === "#" && (t = t.substring(1)), n.replace(r + "#" + (p.hashPrefix || "") + t)
        },
        setHash: function(t) {
            var n = e.getLocation();
            t.charAt(0) === "#" && (t = t.substring(1)), n.hash = (p.hashPrefix || "") + t
        }
    }), a = o._notifiers, a || (a = o._notifiers = []), e.Event.define("hashchange", {
        on: function(t, n, r) {
            (t.compareTo(c) || t.compareTo(e.config.doc.body)) && a.push(r)
        },
        detach: function(e, t, n) {
            var r = i.indexOf(a, n);
            r !== -1 && a.splice(r, 1)
        }
    }), f = p.getHash(), l = p.getUrl(), n.nativeHashChange ? o._hashHandle || (o._hashHandle = e.Event.attach("hashchange", function(e) {
        var t = p.getHash(),
            n = p.getUrl();
        i.each(a.concat(), function(r) {
            r.fire({
                _event: e,
                oldHash: f,
                oldUrl: l,
                newHash: t,
                newUrl: n
            })
        }), f = t, l = n
    }, c)) : o._hashPoll || (o._hashPoll = e.later(50, null, function() {
        var e = p.getHash(),
            t, n;
        f !== e && (n = p.getUrl(), t = {
            oldHash: f,
            oldUrl: l,
            newHash: e,
            newUrl: n
        }, f = e, l = n, i.each(a.concat(), function(e) {
            e.fire(t)
        }))
    }, null, !0)), e.HistoryHash = p;
    if (h === !1 || !e.History && h !== !0 && (!n.html5 || !e.HistoryHTML5)) e.History = p
}, "@VERSION@", {
    requires: ["event-synthetic", "history-base", "yui-later"]
});
YUI.add("history-html5", function(e, t) {
    function a() {
        a.superclass.constructor.apply(this, arguments)
    }
    var n = e.HistoryBase,
        r = e.Lang,
        i = e.config.win,
        s = e.config.useHistoryHTML5,
        o = "popstate",
        u = n.SRC_REPLACE;
    e.extend(a, n, {
        _init: function(t) {
            var n;
            try {
                n = i.history.state
            } catch (s) {
                n = null
            }
            e.Object.isEmpty(n) && (n = null), t || (t = {}), t.initialState && r.type(t.initialState) === "object" && r.type(n) === "object" ? this._initialState = e.merge(t.initialState, n) : this._initialState = n, e.on("popstate", this._onPopState, i, this), a.superclass._init.apply(this, arguments)
        },
        _storeState: function(t, n, r) {
            t !== o && i.history[t === u ? "replaceState" : "pushState"](n, r.title || e.config.doc.title || "", r.url || e.config.doc.URL), a.superclass._storeState.apply(this, arguments)
        },
        _onPopState: function(e) {
            this._resolveChanges(o, e._event.state || null)
        }
    }, {
        NAME: "historyhtml5",
        SRC_POPSTATE: o
    }), e.Node.DOM_EVENTS.popstate || (e.Node.DOM_EVENTS.popstate = 1), e.HistoryHTML5 = a;
    if (s === !0 || s !== !1 && n.html5) e.History = a
}, "@VERSION@", {
    optional: ["json"],
    requires: ["event-base", "history-base", "node-base"]
});
YUI.add("intl", function(e, t) {
    var n = {},
        r = "yuiRootLang",
        i = "yuiActiveLang",
        s = [];
    e.mix(e.namespace("Intl"), {
        _mod: function(e) {
            return n[e] || (n[e] = {}), n[e]
        },
        setLang: function(e, t) {
            var n = this._mod(e),
                s = n[i],
                o = !!n[t];
            return o && t !== s && (n[i] = t, this.fire("intl:langChange", {
                module: e,
                prevVal: s,
                newVal: t === r ? "" : t
            })), o
        },
        getLang: function(e) {
            var t = this._mod(e)[i];
            return t === r ? "" : t
        },
        add: function(e, t, n) {
            t = t || r, this._mod(e)[t] = n, this.setLang(e, t)
        },
        get: function(t, n, r) {
            var s = this._mod(t),
                o;
            return r = r || s[i], o = s[r] || {}, n ? o[n] : e.merge(o)
        },
        getAvailableLangs: function(t) {
            var n = e.Env._loader,
                r = n && n.moduleInfo[t],
                i = r && r.lang;
            return i ? i.concat() : s
        }
    }), e.augment(e.Intl, e.EventTarget), e.Intl.publish("intl:langChange", {
        emitFacade: !0
    })
}, "@VERSION@", {
    requires: ["intl-base", "event-custom"]
});
YUI.add("io-base", function(e, t) {
    function o(t) {
        var n = this;
        n._uid = "io:" + s++, n._init(t), e.io._map[n._uid] = n
    }
    var n = ["start", "complete", "end", "success", "failure", "progress"],
        r = ["status", "statusText", "responseText", "responseXML"],
        i = e.config.win,
        s = 0;
    o.prototype = {
        _id: 0,
        _headers: {
            "X-Requested-With": "XMLHttpRequest"
        },
        _timeout: {},
        _init: function(t) {
            var r = this,
                i, s;
            r.cfg = t || {}, e.augment(r, e.EventTarget);
            for (i = 0, s = n.length; i < s; ++i) r.publish("io:" + n[i], e.merge({
                broadcast: 1
            }, t)), r.publish("io-trn:" + n[i], t)
        },
        _create: function(t, n) {
            var r = this,
                s = {
                    id: e.Lang.isNumber(n) ? n : r._id++,
                    uid: r._uid
                },
                o = t.xdr ? t.xdr.use : null,
                u = t.form && t.form.upload ? "iframe" : null,
                a;
            return o === "native" && (o = e.UA.ie && !l ? "xdr" : null, r.setHeader("X-Requested-With")), a = o || u, s = a ? e.merge(e.IO.customTransport(a), s) : e.merge(e.IO.defaultTransport(), s), s.notify && (t.notify = function(e, t, n) {
                r.notify(e, t, n)
            }), a || i && i.FormData && t.data instanceof i.FormData && (s.c.upload.onprogress = function(e) {
                r.progress(s, e, t)
            }, s.c.onload = function(e) {
                r.load(s, e, t)
            }, s.c.onerror = function(e) {
                r.error(s, e, t)
            }, s.upload = !0), s
        },
        _destroy: function(t) {
            i && !t.notify && !t.xdr && (u && !t.upload ? t.c.onreadystatechange = null : t.upload ? (t.c.upload.onprogress = null, t.c.onload = null, t.c.onerror = null) : e.UA.ie && !t.e && t.c.abort()), t = t.c = null
        },
        _evt: function(t, r, i) {
            var s = this,
                o, u = i.arguments,
                a = s.cfg.emitFacade,
                f = "io:" + t,
                l = "io-trn:" + t;
            this.detach(l), r.e && (r.c = {
                status: 0,
                statusText: r.e
            }), o = [a ? {
                id: r.id,
                data: r.c,
                cfg: i,
                arguments: u
            } : r.id], a || (t === n[0] || t === n[2] ? u && o.push(u) : (r.evt ? o.push(r.evt) : o.push(r.c), u && o.push(u))), o.unshift(f), s.fire.apply(s, o), i.on && (o[0] = l, s.once(l, i.on[t], i.context || e), s.fire.apply(s, o))
        },
        start: function(e, t) {
            this._evt(n[0], e, t)
        },
        complete: function(e, t) {
            this._evt(n[1], e, t)
        },
        end: function(e, t) {
            this._evt(n[2], e, t), this._destroy(e)
        },
        success: function(e, t) {
            this._evt(n[3], e, t), this.end(e, t)
        },
        failure: function(e, t) {
            this._evt(n[4], e, t), this.end(e, t)
        },
        progress: function(e, t, r) {
            e.evt = t, this._evt(n[5], e, r)
        },
        load: function(e, t, r) {
            e.evt = t.target, this._evt(n[1], e, r)
        },
        error: function(e, t, r) {
            e.evt = t, this._evt(n[4], e, r)
        },
        _retry: function(e, t, n) {
            return this._destroy(e), n.xdr.use = "flash", this.send(t, n, e.id)
        },
        _concat: function(e, t) {
            return e += (e.indexOf("?") === -1 ? "?" : "&") + t, e
        },
        setHeader: function(e, t) {
            t ? this._headers[e] = t : delete this._headers[e]
        },
        _setHeaders: function(t, n) {
            n = e.merge(this._headers, n), e.Object.each(n, function(e, r) {
                e !== "disable" && t.setRequestHeader(r, n[r])
            })
        },
        _startTimeout: function(e, t) {
            var n = this;
            n._timeout[e.id] = setTimeout(function() {
                n._abort(e, "timeout")
            }, t)
        },
        _clearTimeout: function(e) {
            clearTimeout(this._timeout[e]), delete this._timeout[e]
        },
        _result: function(e, t) {
            var n;
            try {
                n = e.c.status
            } catch (r) {
                n = 0
            }
            n >= 200 && n < 300 || n === 304 || n === 1223 ? this.success(e, t) : this.failure(e, t)
        },
        _rS: function(e, t) {
            var n = this;
            e.c.readyState === 4 && (t.timeout && n._clearTimeout(e.id), setTimeout(function() {
                n.complete(e, t), n._result(e, t)
            }, 0))
        },
        _abort: function(e, t) {
            e && e.c && (e.e = t, e.c.abort())
        },
        send: function(t, n, i) {
            var s, o, u, a, f, c, h = this,
                p = t,
                d = {};
            n = n ? e.Object(n) : {}, s = h._create(n, i), o = n.method ? n.method.toUpperCase() : "GET", f = n.sync, c = n.data, e.Lang.isObject(c) && !c.nodeType && !s.upload && e.QueryString && e.QueryString.stringify && (n.data = c = e.QueryString.stringify(c));
            if (n.form) {
                if (n.form.upload) return h.upload(s, t, n);
                c = h._serialize(n.form, c)
            }
            c || (c = "");
            if (c) switch (o) {
                case "GET":
                case "HEAD":
                case "DELETE":
                    p = h._concat(p, c), c = "";
                    break;
                case "POST":
                case "PUT":
                    n.headers = e.merge({
                        "Content-Type": "application/x-www-form-urlencoded; charset=UTF-8"
                    }, n.headers)
            }
            if (s.xdr) return h.xdr(p, s, n);
            if (s.notify) return s.c.send(s, t, n);
            !f && !s.upload && (s.c.onreadystatechange = function() {
                h._rS(s, n)
            });
            try {
                s.c.open(o, p, !f, n.username || null, n.password || null), h._setHeaders(s.c, n.headers || {}), h.start(s, n), n.xdr && n.xdr.credentials && l && (s.c.withCredentials = !0), s.c.send(c);
                if (f) {
                    for (u = 0, a = r.length; u < a; ++u) d[r[u]] = s.c[r[u]];
                    return d.getAllResponseHeaders = function() {
                        return s.c.getAllResponseHeaders()
                    }, d.getResponseHeader = function(e) {
                        return s.c.getResponseHeader(e)
                    }, h.complete(s, n), h._result(s, n), d
                }
            } catch (v) {
                if (s.xdr) return h._retry(s, t, n);
                h.complete(s, n), h._result(s, n)
            }
            return n.timeout && h._startTimeout(s, n.timeout), {
                id: s.id,
                abort: function() {
                    return s.c ? h._abort(s, "abort") : !1
                },
                isInProgress: function() {
                    return s.c ? s.c.readyState % 4 : !1
                },
                io: h
            }
        }
    }, e.io = function(t, n) {
        var r = e.io._map["io:0"] || new o;
        return r.send.apply(r, [t, n])
    }, e.io.header = function(t, n) {
        var r = e.io._map["io:0"] || new o;
        r.setHeader(t, n)
    }, e.IO = o, e.io._map = {};
    var u = i && i.XMLHttpRequest,
        a = i && i.XDomainRequest,
        f = i && i.ActiveXObject,
        l = u && "withCredentials" in new XMLHttpRequest;
    e.mix(e.IO, {
        _default: "xhr",
        defaultTransport: function(t) {
            if (!t) {
                var n = {
                    c: e.IO.transports[e.IO._default](),
                    notify: e.IO._default === "xhr" ? !1 : !0
                };
                return n
            }
            e.IO._default = t
        },
        transports: {
            xhr: function() {
                return u ? new XMLHttpRequest : f ? new ActiveXObject("Microsoft.XMLHTTP") : null
            },
            xdr: function() {
                return a ? new XDomainRequest : null
            },
            iframe: function() {
                return {}
            },
            flash: null,
            nodejs: null
        },
        customTransport: function(t) {
            var n = {
                c: e.IO.transports[t]()
            };
            return n[t === "xdr" || t === "flash" ? "xdr" : "notify"] = !0, n
        }
    }), e.mix(e.IO.prototype, {
        notify: function(e, t, n) {
            var r = this;
            switch (e) {
                case "timeout":
                case "abort":
                case "transport error":
                    t.c = {
                        status: 0,
                        statusText: e
                    }, e = "failure";
                default:
                    r[e].apply(r, [t, n])
            }
        }
    })
}, "@VERSION@", {
    requires: ["event-custom-base", "querystring-stringify-simple"]
});
YUI.add("io-form", function(e, t) {
    var n = encodeURIComponent;
    e.IO.stringify = function(t, n) {
        n = n || {};
        var r = e.IO.prototype._serialize({
            id: t,
            useDisabled: n.useDisabled
        }, n.extra && typeof n.extra == "object" ? e.QueryString.stringify(n.extra) : n.extra);
        return r
    }, e.mix(e.IO.prototype, {
        _serialize: function(t, r) {
            var i = [],
                s = t.useDisabled || !1,
                o = 0,
                u = typeof t.id == "string" ? t.id : t.id.getAttribute("id"),
                a, f, l, c, h, p, d, v, m, g;
            u || (u = e.guid("io:"), t.id.setAttribute("id", u)), f = e.config.doc.getElementById(u);
            if (!f || !f.elements) return r || "";
            for (p = 0, d = f.elements.length; p < d; ++p) {
                a = f.elements[p], h = a.disabled, l = a.name;
                if (s ? l : l && !h) {
                    l = n(l) + "=", c = n(a.value);
                    switch (a.type) {
                        case "select-one":
                            a.selectedIndex > -1 && (g = a.options[a.selectedIndex], i[o++] = l + n(g.attributes.value && g.attributes.value.specified ? g.value : g.text));
                            break;
                        case "select-multiple":
                            if (a.selectedIndex > -1)
                                for (v = a.selectedIndex, m = a.options.length; v < m; ++v) g = a.options[v], g.selected && (i[o++] = l + n(g.attributes.value && g.attributes.value.specified ? g.value : g.text));
                            break;
                        case "radio":
                        case "checkbox":
                            a.checked && (i[o++] = l + c);
                            break;
                        case "file":
                        case undefined:
                        case "reset":
                        case "button":
                            break;
                        case "submit":
                        default:
                            i[o++] = l + c
                    }
                }
            }
            return r && (i[o++] = r), i.join("&")
        }
    }, !0)
}, "@VERSION@", {
    requires: ["io-base", "node-base"]
});
YUI.add("io-nodejs", function(e, t) {
    e.IO.request || (e.IO.request = require("request").defaults({
        jar: !1
    }));
    var n = require("http").STATUS_CODES,
        r = function(e) {
            var t = [];
            return Object.keys(e).forEach(function(n) {
                t.push(n + ": " + e[n])
            }), t.join("\n")
        };
    e.IO.transports.nodejs = function() {
        return {
            send: function(t, i, s) {
                s.notify("start", t, s), s.method = s.method || "GET", s.method = s.method.toUpperCase();
                var o = {
                    method: s.method,
                    uri: i
                };
                s.data && (e.Lang.isString(s.data) && (o.body = s.data), o.body && o.method === "GET" && (o.uri += (o.uri.indexOf("?") > -1 ? "&" : "?") + o.body, o.body = "")), s.headers && (o.headers = s.headers), s.timeout && (o.timeout = s.timeout), s.request && e.mix(o, s.request), e.IO.request(o, function(e, i) {
                    if (e) {
                        t.c = e, s.notify(e.code === "ETIMEDOUT" ? "timeout" : "failure", t, s);
                        return
                    }
                    i && (t.c = {
                        status: i.statusCode,
                        statusCode: i.statusCode,
                        statusText: n[i.statusCode],
                        headers: i.headers,
                        responseText: i.body || "",
                        responseXML: null,
                        getResponseHeader: function(e) {
                            return this.headers[e]
                        },
                        getAllResponseHeaders: function() {
                            return r(this.headers)
                        }
                    }), s.notify("complete", t, s), s.notify(i && i.statusCode >= 200 && i.statusCode <= 299 ? "success" : "failure", t, s)
                });
                var u = {
                    io: t
                };
                return u
            }
        }
    }, e.IO.defaultTransport("nodejs")
}, "@VERSION@", {
    requires: ["io-base"]
});
YUI.add("io-queue", function(e, t) {
    function r(e, t) {
        return n.queue.apply(n, [e, t])
    }
    var n = e.io._map["io:0"] || new e.IO;
    e.mix(e.IO.prototype, {
        _q: new e.Queue,
        _qActiveId: null,
        _qInit: !1,
        _qState: 1,
        _qShift: function() {
            var e = this,
                t = e._q.next();
            e._qActiveId = t.id, e._qState = 0, e.send(t.uri, t.cfg, t.id)
        },
        queue: function(t, n) {
            var r = this,
                i = {
                    uri: t,
                    cfg: n,
                    id: this._id++
                };
            return r._qInit || (e.on("io:complete", function(e, t) {
                r._qNext(e)
            }, r), r._qInit = !0), r._q.add(i), r._qState === 1 && r._qShift(), i
        },
        _qNext: function(e) {
            var t = this;
            t._qState = 1, t._qActiveId === e && t._q.size() > 0 && t._qShift()
        },
        qPromote: function(e) {
            this._q.promote(e)
        },
        qRemove: function(e) {
            this._q.remove(e)
        },
        qEmpty: function() {
            this._q = new e.Queue
        },
        qStart: function() {
            var e = this;
            e._qState = 1, e._q.size() > 0 && e._qShift()
        },
        qStop: function() {
            this._qState = 0
        },
        qSize: function() {
            return this._q.size()
        }
    }, !0), r.start = function() {
        n.qStart()
    }, r.stop = function() {
        n.qStop()
    }, r.promote = function(e) {
        n.qPromote(e)
    }, r.remove = function(e) {
        n.qRemove(e)
    }, r.size = function() {
        n.qSize()
    }, r.empty = function() {
        n.qEmpty()
    }, e.io.queue = r
}, "@VERSION@", {
    requires: ["io-base", "queue-promote"]
});
YUI.add("io-upload-iframe", function(e, t) {
    function u(t, n, r) {
        var i = e.Node.create('<iframe src="#" id="io_iframe' + t.id + '" name="io_iframe' + t.id + '" />');
        i._node.style.position = "absolute", i._node.style.top = "-1000px", i._node.style.left = "-1000px", e.one("body").appendChild(i), e.on("load", function() {
            r._uploadComplete(t, n)
        }, "#io_iframe" + t.id)
    }

    function a(t) {
        e.Event.purgeElement("#io_iframe" + t, !1), e.one("body").removeChild(e.one("#io_iframe" + t))
    }
    var n = e.config.win,
        r = e.config.doc,
        i = r.documentMode && r.documentMode >= 8,
        s = decodeURIComponent,
        o = e.IO.prototype.end;
    e.mix(e.IO.prototype, {
        _addData: function(t, n) {
            e.Lang.isObject(n) && (n = e.QueryString.stringify(n));
            var i = [],
                o = n.split("="),
                u, a;
            for (u = 0, a = o.length - 1; u < a; u++) i[u] = r.createElement("input"), i[u].type = "hidden", i[u].name = s(o[u].substring(o[u].lastIndexOf("&") + 1)), i[u].value = u + 1 === a ? s(o[u + 1]) : s(o[u + 1].substring(0, o[u + 1].lastIndexOf("&"))), t.appendChild(i[u]);
            return i
        },
        _removeData: function(e, t) {
            var n, r;
            for (n = 0, r = t.length; n < r; n++) e.removeChild(t[n])
        },
        _setAttrs: function(t, n, r) {
            this._originalFormAttrs = {
                action: t.getAttribute("action"),
                target: t.getAttribute("target")
            }, t.setAttribute("action", r), t.setAttribute("method", "POST"), t.setAttribute("target", "io_iframe" + n), t.setAttribute(e.UA.ie && !i ? "encoding" : "enctype", "multipart/form-data")
        },
        _resetAttrs: function(t, n) {
            e.Object.each(n, function(e, n) {
                e ? t.setAttribute(n, e) : t.removeAttribute(n)
            })
        },
        _startUploadTimeout: function(e, t) {
            var r = this;
            r._timeout[e.id] = n.setTimeout(function() {
                e.status = 0, e.statusText = "timeout", r.complete(e, t), r.end(e, t)
            }, t.timeout)
        },
        _clearUploadTimeout: function(e) {
            var t = this;
            n.clearTimeout(t._timeout[e]), delete t._timeout[e]
        },
        _uploadComplete: function(t, r) {
            var i = this,
                s = e.one("#io_iframe" + t.id).get("contentWindow.document"),
                o = s.one("body"),
                u;
            r.timeout && i._clearUploadTimeout(t.id);
            try {
                o ? (u = o.one("pre:first-child"), t.c.responseText = u ? u.get("text") : o.get("text")) : t.c.responseXML = s._node
            } catch (f) {
                t.e = "upload failure"
            }
            i.complete(t, r), i.end(t, r), n.setTimeout(function() {
                a(t.id)
            }, 0)
        },
        _upload: function(t, n, i) {
            var s = this,
                o = typeof i.form.id == "string" ? r.getElementById(i.form.id) : i.form.id,
                u;
            return s._setAttrs(o, t.id, n), i.data && (u = s._addData(o, i.data)), i.timeout && s._startUploadTimeout(t, i), o.submit(), s.start(t, i), i.data && s._removeData(o, u), {
                id: t.id,
                abort: function() {
                    t.status = 0, t.statusText = "abort";
                    if (!e.one("#io_iframe" + t.id)) return !1;
                    a(t.id), s.complete(t, i), s.end(t, i)
                },
                isInProgress: function() {
                    return e.one("#io_iframe" + t.id) ? !0 : !1
                },
                io: s
            }
        },
        upload: function(e, t, n) {
            return u(e, n, this), this._upload(e, t, n)
        },
        end: function(e, t) {
            var n, i;
            return t && (n = t.form, n && n.upload && (i = this, n = typeof n.id == "string" ? r.getElementById(n.id) : n.id, n && i._resetAttrs(n, this._originalFormAttrs))), o.call(this, e, t)
        }
    }, !0)
}, "@VERSION@", {
    requires: ["io-base", "node-base"]
});
YUI.add("io-xdr", function(e, t) {
    function a(e, t, n) {}

    function f(t, n, r) {
        return r === "xml" && (t.c.responseXML = e.DataType.XML.parse(t.c.responseText)), t
    }

    function l(e, t) {
        return e.c.abort(e.id, t)
    }

    function c(e) {
        return u ? i[e.id] !== 4 : e.c.isInProgress(e.id)
    }
    var n = e.publish("io:xdrReady", {
            fireOnce: !0
        }),
        r = {},
        i = {},
        s = e.config.doc,
        o = e.config.win,
        u = o && o.XDomainRequest;
    e.mix(e.IO.prototype, {
        _transport: {},
        _ieEvt: function(e, t) {
            var n = this,
                r = e.id,
                s = "timeout";
            e.c.onprogress = function() {
                i[r] = 3
            }, e.c.onload = function() {
                i[r] = 4, n.xdrResponse("success", e, t)
            }, e.c.onerror = function() {
                i[r] = 4, n.xdrResponse("failure", e, t)
            }, e.c.ontimeout = function() {
                i[r] = 4, n.xdrResponse(s, e, t)
            }, e.c[s] = t[s] || 0
        },
        xdr: function(e, t, n) {
            var r = this;
            if (n.xdr.use === "flash") throw new Error("Y.io.xdr: Flash XDR is not supported in this build of YUI.");
            return u ? (r._ieEvt(t, n), t.c.open(n.method || "GET", e), setTimeout(function() {
                t.c.send(n.data)
            }, 0)) : t.c.send(e, t, n), {
                id: t.id,
                abort: function() {
                    return t.c ? l(t, n) : !1
                },
                isInProgress: function() {
                    return t.c ? c(t.id) : !1
                },
                io: r
            }
        },
        xdrResponse: function(e, t, n) {
            n = r[t.id] ? r[t.id] : n;
            var s = this,
                o = u ? i : r,
                a = n.xdr.use,
                l = n.xdr.dataType;
            switch (e) {
                case "start":
                    s.start(t, n);
                    break;
                case "success":
                    s.success(f(t, a, l), n), delete o[t.id];
                    break;
                case "timeout":
                case "abort":
                case "transport error":
                    t.c = {
                        status: 0,
                        statusText: e
                    };
                case "failure":
                    s.failure(f(t, a, l), n), delete o[t.id]
            }
        },
        _xdrReady: function(t, r) {
            e.fire(n, t, r)
        },
        transport: function(e) {
            if (e.id === "flash") throw new Error("Y.io.xdr: Flash XDR is not supported in this build of YUI.")
        }
    }), e.io.xdrReady = function(t, n) {
        var r = e.io._map[n];
        e.io.xdr.delay = 0, r._xdrReady.apply(r, [t, n])
    }, e.io.xdrResponse = function(t, n, r) {
        var i = e.io._map[n.uid];
        i.xdrResponse.apply(i, [t, n, r])
    }, e.io.transport = function(t) {
        var n = e.io._map["io:0"] || new e.IO;
        t.uid = n._uid, n.transport.apply(n, [t])
    }, e.io.xdr = {
        delay: 100
    }
}, "@VERSION@", {
    requires: ["io-base", "datatype-xml-parse"]
});
YUI.add("json-parse", function(e, t) {
    var n = e.config.global.JSON;
    e.namespace("JSON").parse = function(e, t, r) {
        return n.parse(typeof e == "string" ? e : e + "", t, r)
    }
}, "@VERSION@", {
    requires: ["yui-base"]
});
YUI.add("json-stringify", function(e, t) {
    var n = ":",
        r = e.config.global.JSON;
    e.mix(e.namespace("JSON"), {
        dateToString: function(e) {
            function t(e) {
                return e < 10 ? "0" + e : e
            }
            return e.getUTCFullYear() + "-" + t(e.getUTCMonth() + 1) + "-" + t(e.getUTCDate()) + "T" + t(e.getUTCHours()) + n + t(e.getUTCMinutes()) + n + t(e.getUTCSeconds()) + "Z"
        },
        stringify: function() {
            return r.stringify.apply(r, arguments)
        },
        charCacheThreshold: 100
    })
}, "@VERSION@", {
    requires: ["yui-base"]
});
YUI.add("lazy-model-list", function(e, t) {
    var n = e.Attribute.prototype,
        r = YUI.namespace("Env.Model"),
        i = e.Lang,
        s = e.Array,
        o = "add",
        u = "error",
        a = "reset";
    e.LazyModelList = e.Base.create("lazyModelList", e.ModelList, [], {
        initializer: function() {
            this.after("*:change", this._afterModelChange)
        },
        free: function(e) {
            var t;
            return e ? (t = i.isNumber(e) ? e : this.indexOf(e), t >= 0 && delete this._models[t]) : this._models = [], this
        },
        get: function(e) {
            return this.attrAdded(e) ? n.get.apply(this, arguments) : s.map(this._items, function(t) {
                return t[e]
            })
        },
        getAsHTML: function(t) {
            return this.attrAdded(t) ? e.Escape.html(n.get.apply(this, arguments)) : s.map(this._items, function(n) {
                return e.Escape.html(n[t])
            })
        },
        getAsURL: function(e) {
            return this.attrAdded(e) ? encodeURIComponent(n.get.apply(this, arguments)) : s.map(this._items, function(t) {
                return encodeURIComponent(t[e])
            })
        },
        indexOf: function(e) {
            return s.indexOf(e && e._isYUIModel ? this._models : this._items, e)
        },
        reset: function(t, n) {
            t || (t = []), n || (n = {});
            var r = e.merge({
                src: "reset"
            }, n);
            return t = t._isYUIModelList ? t.map(this._modelToObject) : s.map(t, this._modelToObject), r.models = t, n.silent ? this._defResetFn(r) : (this.comparator && t.sort(e.bind(this._sort, this)), this.fire(a, r)), this
        },
        revive: function(e) {
            var t, n, r;
            if (e || e === 0) return this._revive(i.isNumber(e) ? e : this.indexOf(e));
            r = [];
            for (t = 0, n = this._items.length; t < n; t++) r.push(this._revive(t));
            return r
        },
        toJSON: function() {
            return this.toArray()
        },
        _add: function(t, n) {
            var r;
            n || (n = {}), t = this._modelToObject(t), "clientId" in t || (t.clientId = this._generateClientId());
            if (this._isInList(t)) {
                this.fire(u, {
                    error: "Model is already in the list.",
                    model: t,
                    src: "add"
                });
                return
            }
            return r = e.merge(n, {
                index: "index" in n ? n.index : this._findIndex(t),
                model: t
            }), n.silent ? this._defAddFn(r) : this.fire(o, r), t
        },
        _clear: function() {
            s.each(this._models, this._detachList, this), this._clientIdMap = {}, this._idMap = {}, this._items = [], this._models = []
        },
        _generateClientId: function() {
            return r.lastId || (r.lastId = 0), this.model.NAME + "_" + (r.lastId += 1)
        },
        _isInList: function(e) {
            return !!("clientId" in e && this._clientIdMap[e.clientId] || "id" in e && this._idMap[e.id])
        },
        _modelToObject: function(e) {
            return e._isYUIModel && (e = e.getAttrs(), delete e.destroyed, delete e.initialized), e
        },
        _remove: function(t, n) {
            return t._isYUIModel && (t = this.indexOf(t)), e.ModelList.prototype._remove.call(this, t, n)
        },
        _revive: function(e) {
            var t, n;
            return e < 0 ? null : (t = this._items[e], t ? (n = this._models[e], n || (n = new this.model(t), n._set("clientId", t.clientId), this._attachList(n), this._models[e] = n), n) : null)
        },
        _afterModelChange: function(e) {
            var t = e.changed,
                n = this._clientIdMap[e.target.get("clientId")],
                r;
            if (n)
                for (r in t) t.hasOwnProperty(r) && (n[r] = t[r].newVal)
        },
        _defAddFn: function(e) {
            var t = e.model;
            this._clientIdMap[t.clientId] = t, i.isValue(t.id) && (this._idMap[t.id] = t), this._items.splice(e.index, 0, t)
        },
        _defRemoveFn: function(e) {
            var t = e.index,
                n = e.model,
                r = this._models[t];
            delete this._clientIdMap[n.clientId], "id" in n && delete this._idMap[n.id], r && this._detachList(r), this._items.splice(t, 1), this._models.splice(t, 1)
        }
    })
}, "@VERSION@", {
    requires: ["model-list"]
});
YUI.add("model-list", function(e, t) {
    function c() {
        c.superclass.constructor.apply(this, arguments)
    }
    var n = e.Attribute.prototype,
        r = e.Lang,
        i = e.Array,
        s = "add",
        o = "create",
        u = "error",
        a = "load",
        f = "remove",
        l = "reset";
    e.ModelList = e.extend(c, e.Base, {
        model: e.Model,
        _isYUIModelList: !0,
        initializer: function(t) {
            t || (t = {});
            var n = this.model = t.model || this.model;
            typeof n == "string" && (this.model = e.Object.getValue(e, n.split(".")), this.model || e.error("ModelList: Model class not found: " + n)), this.publish(s, {
                defaultFn: this._defAddFn
            }), this.publish(l, {
                defaultFn: this._defResetFn
            }), this.publish(f, {
                defaultFn: this._defRemoveFn
            }), this.after("*:idChange", this._afterIdChange), this._clear(), t.items && this.add(t.items, {
                silent: !0
            })
        },
        destructor: function() {
            this._clear()
        },
        add: function(t, n) {
            var s = t._isYUIModelList;
            return s || r.isArray(t) ? i.map(s ? t.toArray() : t, function(t, r) {
                var i = n || {};
                return "index" in i && (i = e.merge(i, {
                    index: i.index + r
                })), this._add(t, i)
            }, this) : this._add(t, n)
        },
        create: function(t, n, r) {
            var i = this;
            return typeof n == "function" && (r = n, n = {}), n || (n = {}), t._isYUIModel || (t = new this.model(t)), i.fire(o, e.merge(n, {
                model: t
            })), t.save(n, function(e) {
                e || i.add(t, n), r && r.apply(null, arguments)
            })
        },
        each: function(e, t) {
            var n = this._items.concat(),
                r, i, s;
            for (r = 0, s = n.length; r < s; r++) i = n[r], e.call(t || i, i, r, this);
            return this
        },
        filter: function(e, t) {
            var n = [],
                r = this._items,
                i, s, o, u;
            typeof e == "function" && (t = e, e = {});
            for (i = 0, o = r.length; i < o; ++i) s = r[i], t.call(this, s, i, this) && n.push(s);
            return e.asList ? (u = new this.constructor({
                model: this.model
            }), n.length && u.add(n, {
                silent: !0
            }), u) : n
        },
        get: function(e) {
            return this.attrAdded(e) ? n.get.apply(this, arguments) : this.invoke("get", e)
        },
        getAsHTML: function(t) {
            return this.attrAdded(t) ? e.Escape.html(n.get.apply(this, arguments)) : this.invoke("getAsHTML", t)
        },
        getAsURL: function(e) {
            return this.attrAdded(e) ? encodeURIComponent(n.get.apply(this, arguments)) : this.invoke("getAsURL", e)
        },
        getByClientId: function(e) {
            return this._clientIdMap[e] || null
        },
        getById: function(e) {
            return this._idMap[e] || null
        },
        invoke: function(e) {
            var t = [this._items, e].concat(i(arguments, 1, !0));
            return i.invoke.apply(i, t)
        },
        load: function(e, t) {
            var n = this;
            return typeof e == "function" && (t = e, e = {}), e || (e = {}), this.sync("read", e, function(r, i) {
                var s = {
                        options: e,
                        response: i
                    },
                    o;
                r ? (s.error = r, s.src = "load", n.fire(u, s)) : (n._loadEvent || (n._loadEvent = n.publish(a, {
                    preventable: !1
                })), o = s.parsed = n._parse(i), n.reset(o, e), n.fire(a, s)), t && t.apply(null, arguments)
            }), this
        },
        map: function(e, t) {
            return i.map(this._items, e, t)
        },
        parse: function(t) {
            if (typeof t == "string") try {
                return e.JSON.parse(t) || []
            } catch (n) {
                return this.fire(u, {
                    error: n,
                    response: t,
                    src: "parse"
                }), null
            }
            return t || []
        },
        remove: function(e, t) {
            var n = e._isYUIModelList;
            return n || r.isArray(e) ? (e = i.map(n ? e.toArray() : e, function(e) {
                return r.isNumber(e) ? this.item(e) : e
            }, this), i.map(e, function(e) {
                return this._remove(e, t)
            }, this)) : this._remove(e, t)
        },
        reset: function(t, n) {
            t || (t = []), n || (n = {});
            var r = e.merge({
                src: "reset"
            }, n);
            return t._isYUIModelList ? t = t.toArray() : t = i.map(t, function(e) {
                return e._isYUIModel ? e : new this.model(e)
            }, this), r.models = t, n.silent ? this._defResetFn(r) : (this.comparator && t.sort(e.bind(this._sort, this)), this.fire(l, r)), this
        },
        some: function(e, t) {
            var n = this._items.concat(),
                r, i, s;
            for (r = 0, s = n.length; r < s; r++) {
                i = n[r];
                if (e.call(t || i, i, r, this)) return !0
            }
            return !1
        },
        sort: function(t) {
            if (!this.comparator) return this;
            var n = this._items.concat(),
                r;
            return t || (t = {}), n.sort(e.rbind(this._sort, this, t)), r = e.merge(t, {
                models: n,
                src: "sort"
            }), t.silent ? this._defResetFn(r) : this.fire(l, r), this
        },
        sync: function() {
            var e = i(arguments, 0, !0).pop();
            typeof e == "function" && e()
        },
        toArray: function() {
            return this._items.concat()
        },
        toJSON: function() {
            return this.map(function(e) {
                return e.toJSON()
            })
        },
        _add: function(t, n) {
            var i, o;
            n || (n = {}), t._isYUIModel || (t = new this.model(t)), o = t.get("id");
            if (this._clientIdMap[t.get("clientId")] || r.isValue(o) && this._idMap[o]) {
                this.fire(u, {
                    error: "Model is already in the list.",
                    model: t,
                    src: "add"
                });
                return
            }
            return i = e.merge(n, {
                index: "index" in n ? n.index : this._findIndex(t),
                model: t
            }), n.silent ? this._defAddFn(i) : this.fire(s, i), t
        },
        _attachList: function(e) {
            e.lists.push(this), e.addTarget(this)
        },
        _clear: function() {
            i.each(this._items, this._detachList, this), this._clientIdMap = {}, this._idMap = {}, this._items = []
        },
        _compare: function(e, t) {
            return e < t ? -1 : e > t ? 1 : 0
        },
        _detachList: function(e) {
            var t = i.indexOf(e.lists, this);
            t > -1 && (e.lists.splice(t, 1), e.removeTarget(this))
        },
        _findIndex: function(e) {
            var t = this._items,
                n = t.length,
                r = 0,
                i, s, o;
            if (!this.comparator || !n) return n;
            o = this.comparator(e);
            while (r < n) s = r + n >> 1, i = t[s], this._compare(this.comparator(i), o) < 0 ? r = s + 1 : n = s;
            return r
        },
        _parse: function(e) {
            return this.parse(e)
        },
        _remove: function(t, n) {
            var i, s;
            n || (n = {}), r.isNumber(t) ? (i = t, t = this.item(i)) : i = this.indexOf(t);
            if (i === -1 || !t) {
                this.fire(u, {
                    error: "Model is not in the list.",
                    index: i,
                    model: t,
                    src: "remove"
                });
                return
            }
            return s = e.merge(n, {
                index: i,
                model: t
            }), n.silent ? this._defRemoveFn(s) : this.fire(f, s), t
        },
        _sort: function(e, t, n) {
            var r = this._compare(this.comparator(e), this.comparator(t));
            return r === 0 ? r : n && n.descending ? -r : r
        },
        _afterIdChange: function(e) {
            var t = e.newVal,
                n = e.prevVal,
                i = e.target;
            if (r.isValue(n)) {
                if (this._idMap[n] !== i) return;
                delete this._idMap[n]
            } else if (this.indexOf(i) === -1) return;
            r.isValue(t) && (this._idMap[t] = i)
        },
        _defAddFn: function(e) {
            var t = e.model,
                n = t.get("id");
            this._clientIdMap[t.get("clientId")] = t, r.isValue(n) && (this._idMap[n] = t), this._attachList(t), this._items.splice(e.index, 0, t)
        },
        _defRemoveFn: function(e) {
            var t = e.model,
                n = t.get("id");
            this._detachList(t), delete this._clientIdMap[t.get("clientId")], r.isValue(n) && delete this._idMap[n], this._items.splice(e.index, 1)
        },
        _defResetFn: function(e) {
            if (e.src === "sort") {
                this._items = e.models.concat();
                return
            }
            this._clear(), e.models.length && this.add(e.models, {
                silent: !0
            })
        }
    }, {
        NAME: "modelList"
    }), e.augment(c, e.ArrayList)
}, "@VERSION@", {
    requires: ["array-extras", "array-invoke", "arraylist", "base-build", "escape", "json-parse", "model"]
});
YUI.add("model", function(e, t) {
    function l() {
        l.superclass.constructor.apply(this, arguments)
    }
    var n = YUI.namespace("Env.Model"),
        r = e.Lang,
        i = e.Array,
        s = e.Object,
        o = "change",
        u = "error",
        a = "load",
        f = "save";
    e.Model = e.extend(l, e.Base, {
        idAttribute: "id",
        _allowAdHocAttrs: !0,
        _isYUIModel: !0,
        initializer: function(e) {
            this.changed = {}, this.lastChange = {}, this.lists = []
        },
        destroy: function(e, t) {
            var n = this;
            return typeof e == "function" && (t = e, e = null), n.onceAfter("destroy", function() {
                function r(r) {
                    r || i.each(n.lists.concat(), function(t) {
                        t.remove(n, e)
                    }), t && t.apply(null, arguments)
                }
                e && (e.remove || e["delete"]) ? n.sync("delete", e, r) : r()
            }), l.superclass.destroy.call(n)
        },
        generateClientId: function() {
            return n.lastId || (n.lastId = 0), this.constructor.NAME + "_" + (n.lastId += 1)
        },
        getAsHTML: function(t) {
            var n = this.get(t);
            return e.Escape.html(r.isValue(n) ? String(n) : "")
        },
        getAsURL: function(e) {
            var t = this.get(e);
            return encodeURIComponent(r.isValue(t) ? String(t) : "")
        },
        isModified: function() {
            return this.isNew() || !s.isEmpty(this.changed)
        },
        isNew: function() {
            return !r.isValue(this.get("id"))
        },
        load: function(e, t) {
            var n = this;
            return typeof e == "function" && (t = e, e = {}), e || (e = {}), n.sync("read", e, function(r, i) {
                var s = {
                        options: e,
                        response: i
                    },
                    o;
                r ? (s.error = r, s.src = "load", n.fire(u, s)) : (n._loadEvent || (n._loadEvent = n.publish(a, {
                    preventable: !1
                })), o = s.parsed = n._parse(i), n.setAttrs(o, e), n.changed = {}, n.fire(a, s)), t && t.apply(null, arguments)
            }), n
        },
        parse: function(t) {
            if (typeof t == "string") try {
                return e.JSON.parse(t)
            } catch (n) {
                return this.fire(u, {
                    error: n,
                    response: t,
                    src: "parse"
                }), null
            }
            return t
        },
        save: function(e, t) {
            var n = this;
            return typeof e == "function" && (t = e, e = {}), e || (e = {}), n._validate(n.toJSON(), function(r) {
                if (r) {
                    t && t.call(null, r);
                    return
                }
                n.sync(n.isNew() ? "create" : "update", e, function(r, i) {
                    var s = {
                            options: e,
                            response: i
                        },
                        o;
                    r ? (s.error = r, s.src = "save", n.fire(u, s)) : (n._saveEvent || (n._saveEvent = n.publish(f, {
                        preventable: !1
                    })), i && (o = s.parsed = n._parse(i), n.setAttrs(o, e)), n.changed = {}, n.fire(f, s)), t && t.apply(null, arguments)
                })
            }), n
        },
        set: function(e, t, n) {
            var r = {};
            return r[e] = t, this.setAttrs(r, n)
        },
        setAttrs: function(t, n) {
            var r = this.idAttribute,
                i, u, a, f, l;
            n = e.merge(n), l = n._transaction = {}, r !== "id" && (t = e.merge(t), s.owns(t, r) ? t.id = t[r] : s.owns(t, "id") && (t[r] = t.id));
            for (a in t) s.owns(t, a) && this._setAttr(a, t[a], n);
            if (!s.isEmpty(l)) {
                i = this.changed, f = this.lastChange = {};
                for (a in l) s.owns(l, a) && (u = l[a], i[a] = u.newVal, f[a] = {
                    newVal: u.newVal,
                    prevVal: u.prevVal,
                    src: u.src || null
                });
                n.silent || (this._changeEvent || (this._changeEvent = this.publish(o, {
                    preventable: !1
                })), n.changed = f, this.fire(o, n))
            }
            return this
        },
        sync: function() {
            var e = i(arguments, 0, !0).pop();
            typeof e == "function" && e()
        },
        toJSON: function() {
            var e = this.getAttrs();
            return delete e.clientId, delete e.destroyed, delete e.initialized, this.idAttribute !== "id" && delete e.id, e
        },
        undo: function(e, t) {
            var n = this.lastChange,
                r = this.idAttribute,
                o = {},
                u;
            return e || (e = s.keys(n)), i.each(e, function(e) {
                s.owns(n, e) && (e = e === r ? "id" : e, u = !0, o[e] = n[e].prevVal)
            }), u ? this.setAttrs(o, t) : this
        },
        validate: function(e, t) {
            t && t()
        },
        addAttr: function(e, t, n) {
            var i = this.idAttribute,
                s, o;
            return i && e === i && (s = this._isLazyAttr("id") || this._getAttrCfg("id"), o = t.value === t.defaultValue ? null : t.value, r.isValue(o) || (o = s.value === s.defaultValue ? null : s.value, r.isValue(o) || (o = r.isValue(t.defaultValue) ? t.defaultValue : s.defaultValue)), t.value = o, s.value !== o && (s.value = o, this._isLazyAttr("id") ? this._state.add("id", "lazy", s) : this._state.add("id", "value", o))), l.superclass.addAttr.apply(this, arguments)
        },
        _parse: function(e) {
            return this.parse(e)
        },
        _validate: function(e, t) {
            function i(i) {
                if (r.isValue(i)) {
                    n.fire(u, {
                        attributes: e,
                        error: i,
                        src: "validate"
                    }), t(i);
                    return
                }
                t()
            }
            var n = this;
            n.validate.length === 1 ? i(n.validate(e, i)) : n.validate(e, i)
        },
        _setAttrVal: function(e, t, n, r, i, s) {
            var o = l.superclass._setAttrVal.apply(this, arguments),
                u = i && i._transaction,
                a = s && s.initializing;
            return o && u && !a && (u[e] = {
                newVal: this.get(e),
                prevVal: n,
                src: i.src || null
            }), o
        }
    }, {
        NAME: "model",
        ATTRS: {
            clientId: {
                valueFn: "generateClientId",
                readOnly: !0
            },
            id: {
                value: null
            }
        }
    })
}, "@VERSION@", {
    requires: ["base-build", "escape", "json-parse"]
});
YUI.add("node-base", function(e, t) {
    var n = ["hasClass", "addClass", "removeClass", "replaceClass", "toggleClass"];
    e.Node.importMethod(e.DOM, n), e.NodeList.importMethod(e.Node.prototype, n);
    var r = e.Node,
        i = e.DOM;
    r.create = function(t, n) {
        return n && n._node && (n = n._node), e.one(i.create(t, n))
    }, e.mix(r.prototype, {
        create: r.create,
        insert: function(e, t) {
            return this._insert(e, t), this
        },
        _insert: function(e, t) {
            var n = this._node,
                r = null;
            return typeof t == "number" ? t = this._node.childNodes[t] : t && t._node && (t = t._node), e && typeof e != "string" && (e = e._node || e._nodes || e), r = i.addHTML(n, e, t), r
        },
        prepend: function(e) {
            return this.insert(e, 0)
        },
        append: function(e) {
            return this.insert(e, null)
        },
        appendChild: function(e) {
            return r.scrubVal(this._insert(e))
        },
        insertBefore: function(t, n) {
            return e.Node.scrubVal(this._insert(t, n))
        },
        appendTo: function(t) {
            return e.one(t).append(this), this
        },
        setContent: function(e) {
            return this._insert(e, "replace"), this
        },
        getContent: function() {
            var e = this;
            return e._node.nodeType === 11 && (e = e.create("<div/>").append(e.cloneNode(!0))), e.get("innerHTML")
        }
    }), e.Node.prototype.setHTML = e.Node.prototype.setContent, e.Node.prototype.getHTML = e.Node.prototype.getContent, e.NodeList.importMethod(e.Node.prototype, ["append", "insert", "appendChild", "insertBefore", "prepend", "setContent", "getContent", "setHTML", "getHTML"]);
    var r = e.Node,
        i = e.DOM;
    r.ATTRS = {
        text: {
            getter: function() {
                return i.getText(this._node)
            },
            setter: function(e) {
                return i.setText(this._node, e), e
            }
        },
        "for": {
            getter: function() {
                return i.getAttribute(this._node, "for")
            },
            setter: function(e) {
                return i.setAttribute(this._node, "for", e), e
            }
        },
        options: {
            getter: function() {
                return this._node.getElementsByTagName("option")
            }
        },
        children: {
            getter: function() {
                var t = this._node,
                    n = t.children,
                    r, i, s;
                if (!n) {
                    r = t.childNodes, n = [];
                    for (i = 0, s = r.length; i < s; ++i) r[i].tagName && (n[n.length] = r[i])
                }
                return e.all(n)
            }
        },
        value: {
            getter: function() {
                return i.getValue(this._node)
            },
            setter: function(e) {
                return i.setValue(this._node, e), e
            }
        }
    }, e.Node.importMethod(e.DOM, ["setAttribute", "getAttribute"]);
    var r = e.Node,
        s = e.NodeList;
    r.DOM_EVENTS = {
        abort: 1,
        beforeunload: 1,
        blur: 1,
        change: 1,
        click: 1,
        close: 1,
        command: 1,
        contextmenu: 1,
        copy: 1,
        cut: 1,
        dblclick: 1,
        DOMMouseScroll: 1,
        drag: 1,
        dragstart: 1,
        dragenter: 1,
        dragover: 1,
        dragleave: 1,
        dragend: 1,
        drop: 1,
        error: 1,
        focus: 1,
        key: 1,
        keydown: 1,
        keypress: 1,
        keyup: 1,
        load: 1,
        message: 1,
        mousedown: 1,
        mouseenter: 1,
        mouseleave: 1,
        mousemove: 1,
        mousemultiwheel: 1,
        mouseout: 1,
        mouseover: 1,
        mouseup: 1,
        mousewheel: 1,
        orientationchange: 1,
        paste: 1,
        reset: 1,
        resize: 1,
        select: 1,
        selectstart: 1,
        submit: 1,
        scroll: 1,
        textInput: 1,
        unload: 1
    }, e.mix(r.DOM_EVENTS, e.Env.evt.plugins), e.augment(r, e.EventTarget), e.mix(r.prototype, {
        purge: function(t, n) {
            return e.Event.purgeElement(this._node, t, n), this
        }
    }), e.mix(e.NodeList.prototype, {
        _prepEvtArgs: function(t, n, r) {
            var i = e.Array(arguments, 0, !0);
            return i.length < 2 ? i[2] = this._nodes : i.splice(2, 0, this._nodes), i[3] = r || this, i
        },
        on: function(t, n, r) {
            return e.on.apply(e, this._prepEvtArgs.apply(this, arguments))
        },
        once: function(t, n, r) {
            return e.once.apply(e, this._prepEvtArgs.apply(this, arguments))
        },
        after: function(t, n, r) {
            return e.after.apply(e, this._prepEvtArgs.apply(this, arguments))
        },
        onceAfter: function(t, n, r) {
            return e.onceAfter.apply(e, this._prepEvtArgs.apply(this, arguments))
        }
    }), s.importMethod(e.Node.prototype, ["detach", "detachAll"]), e.mix(e.Node.ATTRS, {
        offsetHeight: {
            setter: function(t) {
                return e.DOM.setHeight(this._node, t), t
            },
            getter: function() {
                return this._node.offsetHeight
            }
        },
        offsetWidth: {
            setter: function(t) {
                return e.DOM.setWidth(this._node, t), t
            },
            getter: function() {
                return this._node.offsetWidth
            }
        }
    }), e.mix(e.Node.prototype, {
        sizeTo: function(t, n) {
            var r;
            arguments.length < 2 && (r = e.one(t), t = r.get("offsetWidth"), n = r.get("offsetHeight")), this.setAttrs({
                offsetWidth: t,
                offsetHeight: n
            })
        }
    }), e.config.doc.documentElement.hasAttribute || (e.Node.prototype.hasAttribute = function(e) {
        return e === "value" && this.get("value") !== "" ? !0 : !!this._node.attributes[e] && !!this._node.attributes[e].specified
    }), e.Node.prototype.focus = function() {
        try {
            this._node.focus()
        } catch (e) {}
        return this
    }, e.Node.ATTRS.type = {
        setter: function(e) {
            if (e === "hidden") try {
                this._node.type = "hidden"
            } catch (t) {
                this._node.style.display = "none", this._inputType = "hidden"
            } else try {
                this._node.type = e
            } catch (t) {}
            return e
        },
        getter: function() {
            return this._inputType || this._node.type
        },
        _bypassProxy: !0
    }, e.config.doc.createElement("form").elements.nodeType && (e.Node.ATTRS.elements = {
        getter: function() {
            return this.all("input, textarea, button, select")
        }
    }), e.mix(e.Node.prototype, {
        _initData: function() {
            "_data" in this || (this._data = {})
        },
        getData: function(t) {
            this._initData();
            var n = this._data,
                r = n;
            return arguments.length ? t in n ? r = n[t] : r = this._getDataAttribute(t) : typeof n == "object" && n !== null && (r = {}, e.Object.each(n, function(e, t) {
                r[t] = e
            }), r = this._getDataAttributes(r)), r
        },
        _getDataAttributes: function(e) {
            e = e || {};
            var t = 0,
                n = this._node.attributes,
                r = n.length,
                i = this.DATA_PREFIX,
                s = i.length,
                o;
            while (t < r) o = n[t].name, o.indexOf(i) === 0 && (o = o.substr(s), o in e || (e[o] = this._getDataAttribute(o))), t += 1;
            return e
        },
        _getDataAttribute: function(e) {
            e = this.DATA_PREFIX + e;
            var t = this._node,
                n = t.attributes,
                r = n && n[e] && n[e].value;
            return r
        },
        setData: function(e, t) {
            return this._initData(), arguments.length > 1 ? this._data[e] = t : this._data = e, this
        },
        clearData: function(e) {
            return "_data" in this && (typeof e != "undefined" ? delete this._data[e] : delete this._data), this
        }
    }), e.mix(e.NodeList.prototype, {
        getData: function(e) {
            var t = arguments.length ? [e] : [];
            return this._invoke("getData", t, !0)
        },
        setData: function(e, t) {
            var n = arguments.length > 1 ? [e, t] : [e];
            return this._invoke("setData", n)
        },
        clearData: function(e) {
            var t = arguments.length ? [e] : [];
            return this._invoke("clearData", [e])
        }
    })
}, "@VERSION@", {
    requires: ["event-base", "node-core", "dom-base", "dom-style"]
});
YUI.add("node-core", function(e, t) {
    var n = ".",
        r = "nodeName",
        i = "nodeType",
        s = "ownerDocument",
        o = "tagName",
        u = "_yuid",
        a = {},
        f = Array.prototype.slice,
        l = e.DOM,
        c = function(t) {
            if (!this.getDOMNode) return new c(t);
            if (typeof t == "string") {
                t = c._fromString(t);
                if (!t) return null
            }
            var n = t.nodeType !== 9 ? t.uniqueID : t[u];
            n && c._instances[n] && c._instances[n]._node !== t && (t[u] = null), n = n || e.stamp(t), n || (n = e.guid()), this[u] = n, this._node = t, this._stateProxy = t, this._initPlugins && this._initPlugins()
        },
        h = function(t) {
            var n = null;
            return t && (n = typeof t == "string" ? function(n) {
                return e.Selector.test(n, t)
            } : function(n) {
                return t(e.one(n))
            }), n
        };
    c.ATTRS = {}, c.DOM_EVENTS = {}, c._fromString = function(t) {
        return t && (t.indexOf("doc") === 0 ? t = e.config.doc : t.indexOf("win") === 0 ? t = e.config.win : t = e.Selector.query(t, null, !0)), t || null
    }, c.NAME = "node", c.re_aria = /^(?:role$|aria-)/, c.SHOW_TRANSITION = "fadeIn", c.HIDE_TRANSITION = "fadeOut", c._instances = {}, c.getDOMNode = function(e) {
        return e ? e.nodeType ? e : e._node || null : null
    }, c.scrubVal = function(t, n) {
        if (t) {
            if (typeof t == "object" || typeof t == "function")
                if (i in t || l.isWindow(t)) t = e.one(t);
                else if (t.item && !t._nodes || t[0] && t[0][i]) t = e.all(t)
        } else typeof t == "undefined" ? t = n : t === null && (t = null);
        return t
    }, c.addMethod = function(e, t, n) {
        e && t && typeof t == "function" && (c.prototype[e] = function() {
            var e = f.call(arguments),
                r = this,
                i;
            return e[0] && e[0]._node && (e[0] = e[0]._node), e[1] && e[1]._node && (e[1] = e[1]._node), e.unshift(r._node), i = t.apply(n || r, e), i && (i = c.scrubVal(i, r)), typeof i != "undefined" || (i = r), i
        })
    }, c.importMethod = function(t, n, r) {
        typeof n == "string" ? (r = r || n, c.addMethod(r, t[n], t)) : e.Array.each(n, function(e) {
            c.importMethod(t, e)
        })
    }, c.one = function(t) {
        var n = null,
            r, i;
        if (t) {
            if (typeof t == "string") {
                t = c._fromString(t);
                if (!t) return null
            } else if (t.getDOMNode && !t._reactInternalComponent) return t;
            if (t.nodeType || e.DOM.isWindow(t)) {
                i = t.uniqueID && t.nodeType !== 9 ? t.uniqueID : t._yuid, n = c._instances[i], r = n ? n._node : null;
                if (!n || r && t !== r) n = new c(t), t.nodeType != 11 && (c._instances[n[u]] = n)
            }
        }
        return n
    }, c.DEFAULT_SETTER = function(t, r) {
        var i = this._stateProxy,
            s;
        return t.indexOf(n) > -1 ? (s = t, t = t.split(n), e.Object.setValue(i, t, r)) : typeof i[t] != "undefined" && (i[t] = r), r
    }, c.DEFAULT_GETTER = function(t) {
        var r = this._stateProxy,
            i;
        return t.indexOf && t.indexOf(n) > -1 ? i = e.Object.getValue(r, t.split(n)) : typeof r[t] != "undefined" && (i = r[t]), i
    }, e.mix(c.prototype, {
        DATA_PREFIX: "data-",
        toString: function() {
            var e = this[u] + ": not bound to a node",
                t = this._node,
                n, i, s;
            return t && (n = t.attributes, i = n && n.id ? t.getAttribute("id") : null, s = n && n.className ? t.getAttribute("className") : null, e = t[r], i && (e += "#" + i), s && (e += "." + s.replace(" ", ".")), e += " " + this[u]), e
        },
        get: function(e) {
            var t;
            return this._getAttr ? t = this._getAttr(e) : t = this._get(e), t ? t = c.scrubVal(t, this) : t === null && (t = null), t
        },
        _get: function(e) {
            var t = c.ATTRS[e],
                n;
            return t && t.getter ? n = t.getter.call(this) : c.re_aria.test(e) ? n = this._node.getAttribute(e, 2) : n = c.DEFAULT_GETTER.apply(this, arguments), n
        },
        set: function(e, t) {
            var n = c.ATTRS[e];
            return this._setAttr ? this._setAttr.apply(this, arguments) : n && n.setter ? n.setter.call(this, t, e) : c.re_aria.test(e) ? this._node.setAttribute(e, t) : c.DEFAULT_SETTER.apply(this, arguments), this
        },
        setAttrs: function(t) {
            return this._setAttrs ? this._setAttrs(t) : e.Object.each(t, function(e, t) {
                this.set(t, e)
            }, this), this
        },
        getAttrs: function(t) {
            var n = {};
            return this._getAttrs ? this._getAttrs(t) : e.Array.each(t, function(e, t) {
                n[e] = this.get(e)
            }, this), n
        },
        compareTo: function(e) {
            var t = this._node;
            return e && e._node && (e = e._node), t === e
        },
        inDoc: function(e) {
            var t = this._node;
            if (t) {
                e = e ? e._node || e : t[s];
                if (e.documentElement) return l.contains(e.documentElement, t)
            }
            return !1
        },
        getById: function(t) {
            var n = this._node,
                r = l.byId(t, n[s]);
            return r && l.contains(n, r) ? r = e.one(r) : r = null, r
        },
        ancestor: function(t, n, r) {
            return arguments.length === 2 && (typeof n == "string" || typeof n == "function") && (r = n), e.one(l.ancestor(this._node, h(t), n, h(r)))
        },
        ancestors: function(t, n, r) {
            return arguments.length === 2 && (typeof n == "string" || typeof n == "function") && (r = n), e.all(l.ancestors(this._node, h(t), n, h(r)))
        },
        previous: function(t, n) {
            return e.one(l.elementByAxis(this._node, "previousSibling", h(t), n))
        },
        next: function(t, n) {
            return e.one(l.elementByAxis(this._node, "nextSibling", h(t), n))
        },
        siblings: function(t) {
            return e.all(l.siblings(this._node, h(t)))
        },
        one: function(t) {
            return e.one(e.Selector.query(t, this._node, !0))
        },
        all: function(t) {
            var n;
            return this._node && (n = e.all(e.Selector.query(t, this._node)), n._query = t, n._queryRoot = this._node), n || e.all([])
        },
        test: function(t) {
            return e.Selector.test(this._node, t)
        },
        remove: function(e) {
            var t = this._node;
            return t && t.parentNode && t.parentNode.removeChild(t), e && this.destroy(), this
        },
        replace: function(e) {
            var t = this._node;
            return typeof e == "string" && (e = c.create(e)), t.parentNode.replaceChild(c.getDOMNode(e), t), this
        },
        replaceChild: function(t, n) {
            return typeof t == "string" && (t = l.create(t)), e.one(this._node.replaceChild(c.getDOMNode(t), c.getDOMNode(n)))
        },
        destroy: function(t) {
            var n = e.config.doc.uniqueID ? "uniqueID" : "_yuid",
                r;
            this.purge(), this.unplug && this.unplug(), this.clearData(), t && e.NodeList.each(this.all("*"), function(t) {
                r = c._instances[t[n]], r ? r.destroy() : e.Event.purgeElement(t)
            }), this._node = null, this._stateProxy = null, delete c._instances[this._yuid]
        },
        invoke: function(e, t, n, r, i, s) {
            var o = this._node,
                u;
            return t && t._node && (t = t._node), n && n._node && (n = n._node), u = o[e](t, n, r, i, s), c.scrubVal(u, this)
        },
        swap: e.config.doc.documentElement.swapNode ? function(e) {
            this._node.swapNode(c.getDOMNode(e))
        } : function(e) {
            e = c.getDOMNode(e);
            var t = this._node,
                n = e.parentNode,
                r = e.nextSibling;
            return r === t ? n.insertBefore(t, e) : e === t.nextSibling ? n.insertBefore(e, t) : (t.parentNode.replaceChild(e, t), l.addHTML(n, t, r)), this
        },
        hasMethod: function(e) {
            var t = this._node;
            return !(!(t && e in t && typeof t[e] != "unknown") || typeof t[e] != "function" && String(t[e]).indexOf("function") !== 1)
        },
        isFragment: function() {
            return this.get("nodeType") === 11
        },
        empty: function() {
            return this.get("childNodes").remove().destroy(!0), this
        },
        getDOMNode: function() {
            return this._node
        }
    }, !0), e.Node = c, e.one = c.one;
    var p = function(t) {
        var n = [];
        t && (typeof t == "string" ? (this._query = t, t = e.Selector.query(t)) : t.nodeType || l.isWindow(t) ? t = [t] : t._node ? t = [t._node] : t[0] && t[0]._node ? (e.Array.each(t, function(e) {
            e._node && n.push(e._node)
        }), t = n) : t = e.Array(t, 0, !0)), this._nodes = t || []
    };
    p.NAME = "NodeList", p.getDOMNodes = function(e) {
        return e && e._nodes ? e._nodes : e
    }, p.each = function(t, n, r) {
        var i = t._nodes;
        i && i.length && e.Array.each(i, n, r || t)
    }, p.addMethod = function(t, n, r) {
        t && n && (p.prototype[t] = function() {
            var t = [],
                i = arguments;
            return e.Array.each(this._nodes, function(s) {
                var o = s.uniqueID && s.nodeType !== 9 ? "uniqueID" : "_yuid",
                    u = e.Node._instances[s[o]],
                    a, f;
                u || (u = p._getTempNode(s)), a = r || u, f = n.apply(a, i), f !== undefined && f !== u && (t[t.length] = f)
            }), t.length ? t : this
        })
    }, p.importMethod = function(t, n, r) {
        typeof n == "string" ? (r = r || n, p.addMethod(n, t[n])) : e.Array.each(n, function(e) {
            p.importMethod(t, e)
        })
    }, p._getTempNode = function(t) {
        var n = p._tempNode;
        return n || (n = e.Node.create("<div></div>"), p._tempNode = n), n._node = t, n._stateProxy = t, n
    }, e.mix(p.prototype, {
        _invoke: function(e, t, n) {
            var r = n ? [] : this;
            return this.each(function(i) {
                var s = i[e].apply(i, t);
                n && r.push(s)
            }), r
        },
        item: function(t) {
            return e.one((this._nodes || [])[t])
        },
        each: function(t, n) {
            var r = this;
            return e.Array.each(this._nodes, function(i, s) {
                return i = e.one(i), t.call(n || i, i, s, r)
            }), r
        },
        batch: function(t, n) {
            var r = this;
            return e.Array.each(this._nodes, function(i, s) {
                var o = e.Node._instances[i[u]];
                return o || (o = p._getTempNode(i)), t.call(n || o, o, s, r)
            }), r
        },
        some: function(t, n) {
            var r = this;
            return e.Array.some(this._nodes, function(i, s) {
                return i = e.one(i), n = n || i, t.call(n, i, s, r)
            })
        },
        toFrag: function() {
            return e.one(e.DOM._nl2frag(this._nodes))
        },
        indexOf: function(t) {
            return e.Array.indexOf(this._nodes, e.Node.getDOMNode(t))
        },
        filter: function(t) {
            return e.all(e.Selector.filter(this._nodes, t))
        },
        modulus: function(t, n) {
            n = n || 0;
            var r = [];
            return p.each(this, function(e, i) {
                i % t === n && r.push(e)
            }), e.all(r)
        },
        odd: function() {
            return this.modulus(2, 1)
        },
        even: function() {
            return this.modulus(2)
        },
        destructor: function() {},
        refresh: function() {
            var t, n = this._nodes,
                r = this._query,
                i = this._queryRoot;
            return r && (i || n && n[0] && n[0].ownerDocument && (i = n[0].ownerDocument), this._nodes = e.Selector.query(r, i)), this
        },
        size: function() {
            return this._nodes.length
        },
        isEmpty: function() {
            return this._nodes.length < 1
        },
        toString: function() {
            var e = "",
                t = this[u] + ": not bound to any nodes",
                n = this._nodes,
                i;
            return n && n[0] && (i = n[0], e += i[r], i.id && (e += "#" + i.id), i.className && (e += "." + i.className.replace(" ", ".")), n.length > 1 && (e += "...[" + n.length + " items]")), e || t
        },
        getDOMNodes: function() {
            return this._nodes
        }
    }, !0), p.importMethod(e.Node.prototype, ["destroy", "empty", "remove", "set"]), p.prototype.get = function(t) {
        var n = [],
            r = this._nodes,
            i = !1,
            s = p._getTempNode,
            o, u;
        return r[0] && (o = e.Node._instances[r[0]._yuid] || s(r[0]), u = o._get(t), u && u.nodeType && (i = !0)), e.Array.each(r, function(r) {
            o = e.Node._instances[r._yuid], o || (o = s(r)), u = o._get(t), i || (u = e.Node.scrubVal(u, o)), n.push(u)
        }), i ? e.all(n) : n
    }, e.NodeList = p, e.all = function(e) {
        return new p(e)
    }, e.Node.all = e.all;
    var d = e.NodeList,
        v = Array.prototype,
        m = {
            concat: 1,
            pop: 0,
            push: 0,
            shift: 0,
            slice: 1,
            splice: 1,
            unshift: 0
        };
    e.Object.each(m, function(t, n) {
        d.prototype[n] = function() {
            var r = [],
                i = 0,
                s, o;
            while (typeof(s = arguments[i++]) != "undefined") r.push(s._node || s._nodes || s);
            return o = v[n].apply(this._nodes, r), t ? o = e.all(o) : o = e.Node.scrubVal(o), o
        }
    }), e.Array.each(["removeChild", "hasChildNodes", "cloneNode", "hasAttribute", "scrollIntoView", "getElementsByTagName", "focus", "blur", "submit", "reset", "select", "createCaption"], function(t) {
        e.Node.prototype[t] = function(e, n, r) {
            var i = this.invoke(t, e, n, r);
            return i
        }
    }), e.Node.prototype.removeAttribute = function(e) {
        var t = this._node;
        return t && t.removeAttribute(e, 0), this
    }, e.Node.importMethod(e.DOM, ["contains", "setAttribute", "getAttribute", "wrap", "unwrap", "generateID"]), e.NodeList.importMethod(e.Node.prototype, ["getAttribute", "setAttribute", "removeAttribute", "unwrap", "wrap", "generateID"])
}, "@VERSION@", {
    requires: ["dom-core", "selector"]
});
YUI.add("node-event-delegate", function(e, t) {
    e.Node.prototype.delegate = function(t) {
        var n = e.Array(arguments, 0, !0),
            r = e.Lang.isObject(t) && !e.Lang.isArray(t) ? 1 : 2;
        return n.splice(r, 0, this._node), e.delegate.apply(e, n)
    }
}, "@VERSION@", {
    requires: ["node-base", "event-delegate"]
});
YUI.add("node-event-simulate", function(e, t) {
    e.Node.prototype.simulate = function(t, n) {
        e.Event.simulate(e.Node.getDOMNode(this), t, n)
    }, e.Node.prototype.simulateGesture = function(t, n, r) {
        e.Event.simulateGesture(this, t, n, r)
    }
}, "@VERSION@", {
    requires: ["node-base", "event-simulate", "gesture-simulate"]
});
YUI.add("node-focusmanager", function(e, t) {
    var n = "activeDescendant",
        r = "id",
        i = "disabled",
        s = "tabIndex",
        o = "focused",
        u = "focusClass",
        a = "circular",
        f = "UI",
        l = "key",
        c = n + "Change",
        h = "host",
        p = {
            37: !0,
            38: !0,
            39: !0,
            40: !0
        },
        d = {
            a: !0,
            button: !0,
            input: !0,
            object: !0
        },
        v = e.Lang,
        m = e.UA,
        g = function() {
            g.superclass.constructor.apply(this, arguments)
        };
    g.ATTRS = {
        focused: {
            value: !1,
            readOnly: !0
        },
        descendants: {
            getter: function(e) {
                return this.get(h).all(e)
            }
        },
        activeDescendant: {
            setter: function(t) {
                var n = v.isNumber,
                    i = e.Attribute.INVALID_VALUE,
                    s = this._descendantsMap,
                    o = this._descendants,
                    u, a, f;
                return n(t) ? (u = t, a = u) : t instanceof e.Node && s ? (u = s[t.get(r)], n(u) ? a = u : a = i) : a = i, o && (f = o.item(u), f && f.get("disabled") && (a = i)), a
            }
        },
        keys: {
            value: {
                next: null,
                previous: null
            }
        },
        focusClass: {},
        circular: {
            value: !0
        }
    }, e.extend(g, e.Plugin.Base, {
        _stopped: !0,
        _descendants: null,
        _descendantsMap: null,
        _focusedNode: null,
        _lastNodeIndex: 0,
        _eventHandlers: null,
        _initDescendants: function() {
            var t = this.get("descendants"),
                o = {},
                u = -1,
                a, f = this.get(n),
                l, c, h = 0;
            v.isUndefined(f) && (f = -1);
            if (t) {
                a = t.size();
                for (h = 0; h < a; h++) l = t.item(h), u === -1 && !l.get(i) && (u = h), f < 0 && parseInt(l.getAttribute(s, 2), 10) === 0 && (f = h), l && l.set(s, -1), c = l.get(r), c || (c = e.guid(), l.set(r, c)), o[c] = h;
                f < 0 && (f = 0), l = t.item(f);
                if (!l || l.get(i)) l = t.item(u), f = u;
                this._lastNodeIndex = a - 1, this._descendants = t, this._descendantsMap = o, this.set(n, f), l && l.set(s, 0)
            }
        },
        _isDescendant: function(e) {
            return e.get(r) in this._descendantsMap
        },
        _removeFocusClass: function() {
            var e = this._focusedNode,
                t = this.get(u),
                n;
            t && (n = v.isString(t) ? t : t.className), e && n && e.removeClass(n)
        },
        _detachKeyHandler: function() {
            var e = this._prevKeyHandler,
                t = this._nextKeyHandler;
            e && e.detach(), t && t.detach()
        },
        _preventScroll: function(e) {
            p[e.keyCode] && this._isDescendant(e.target) && e.preventDefault()
        },
        _fireClick: function(e) {
            var t = e.target,
                n = t.get("nodeName").toLowerCase();
            e.keyCode === 13 && (!d[n] || n === "a" && !t.getAttribute("href")) && t.simulate("click")
        },
        _attachKeyHandler: function() {
            this._detachKeyHandler();
            var t = this.get("keys.next"),
                n = this.get("keys.previous"),
                r = this.get(h),
                i = this._eventHandlers;
            n && (this._prevKeyHandler = e.on(l, e.bind(this._focusPrevious, this), r, n)), t && (this._nextKeyHandler = e.on(l, e.bind(this._focusNext, this), r, t)), m.opera && i.push(r.on("keypress", this._preventScroll, this)), m.opera || i.push(r.on("keypress", this._fireClick, this))
        },
        _detachEventHandlers: function() {
            this._detachKeyHandler();
            var t = this._eventHandlers;
            t && (e.Array.each(t, function(e) {
                e.detach()
            }), this._eventHandlers = null)
        },
        _attachEventHandlers: function() {
            var t = this._descendants,
                n, r, i;
            t && t.size() && (n = this._eventHandlers || [], r = this.get(h).get("ownerDocument"), n.length === 0 && (n.push(r.on("focus", this._onDocFocus, this)), n.push(r.on("mousedown", this._onDocMouseDown, this)), n.push(this.after("keysChange", this._attachKeyHandler)), n.push(this.after("descendantsChange", this._initDescendants)), n.push(this.after(c, this._afterActiveDescendantChange)), i = this.after("focusedChange", e.bind(function(e) {
                e.newVal && (this._attachKeyHandler(), i.detach())
            }, this)), n.push(i)), this._eventHandlers = n)
        },
        _onDocMouseDown: function(e) {
            var t = this.get(h),
                n = e.target,
                r = t.contains(n),
                i, s = function(e) {
                    var n = !1;
                    return e.compareTo(t) || (n = this._isDescendant(e) ? e : s.call(this, e.get("parentNode"))), n
                };
            r && (i = s.call(this, n), i ? n = i : !i && this.get(o) && (this._set(o, !1), this._onDocFocus(e))), r && this._isDescendant(n) ? this.focus(n) : m.webkit && this.get(o) && (!r || r && !this._isDescendant(n)) && (this._set(o, !1), this._onDocFocus(e))
        },
        _onDocFocus: function(e) {
            var t = this._focusTarget || e.target,
                n = this.get(o),
                r = this.get(u),
                i = this._focusedNode,
                s;
            this._focusTarget && (this._focusTarget = null), this.get(h).contains(t) ? (s = this._isDescendant(t), !n && s ? n = !0 : n && !s && (n = !1)) : n = !1, r && (i && (!i.compareTo(t) || !n) && this._removeFocusClass(), s && n && (r.fn ? (t = r.fn(t), t.addClass(r.className)) : t.addClass(r), this._focusedNode = t)), this._set(o, n)
        },
        _focusNext: function(e, t) {
            var r = t || this.get(n),
                i;
            this._isDescendant(e.target) && r <= this._lastNodeIndex && (r += 1, r === this._lastNodeIndex + 1 && this.get(a) && (r = 0), i = this._descendants.item(r), i && (i.get("disabled") ? this._focusNext(e, r) : this.focus(r))), this._preventScroll(e)
        },
        _focusPrevious: function(e, t) {
            var r = t || this.get(n),
                i;
            this._isDescendant(e.target) && r >= 0 && (r -= 1, r === -1 && this.get(a) && (r = this._lastNodeIndex), i = this._descendants.item(r), i && (i.get("disabled") ? this._focusPrevious(e, r) : this.focus(r))), this._preventScroll(e)
        },
        _afterActiveDescendantChange: function(e) {
            var t = this._descendants.item(e.prevVal);
            t && t.set(s, -1), t = this._descendants.item(e.newVal), t && t.set(s, 0)
        },
        initializer: function(e) {
            this.start()
        },
        destructor: function() {
            this.stop(), this.get(h).focusManager = null
        },
        focus: function(e) {
            v.isUndefined(e) && (e = this.get(n)), this.set(n, e, {
                src: f
            });
            var t = this._descendants.item(this.get(n));
            t && (t.focus(), m.opera && t.get("nodeName").toLowerCase() === "button" && (this._focusTarget = t))
        },
        blur: function() {
            var e;
            this.get(o) && (e = this._descendants.item(this.get(n)), e && (e.blur(), this._removeFocusClass()), this._set(o, !1, {
                src: f
            }))
        },
        start: function() {
            this._stopped && (this._initDescendants(), this._attachEventHandlers(), this._stopped = !1)
        },
        stop: function() {
            this._stopped || (this._detachEventHandlers(), this._descendants = null, this._focusedNode = null, this._lastNodeIndex = 0, this._stopped = !0)
        },
        refresh: function() {
            this._initDescendants(), this._eventHandlers || this._attachEventHandlers()
        }
    }), g.NAME = "nodeFocusManager", g.NS = "focusManager", e.namespace("Plugin"), e.Plugin.NodeFocusManager = g
}, "@VERSION@", {
    requires: ["attribute", "node", "plugin", "node-event-simulate", "event-key", "event-focus"]
});
YUI.add("node-pluginhost", function(e, t) {
    e.Node.plug = function() {
        var t = e.Array(arguments);
        return t.unshift(e.Node), e.Plugin.Host.plug.apply(e.Base, t), e.Node
    }, e.Node.unplug = function() {
        var t = e.Array(arguments);
        return t.unshift(e.Node), e.Plugin.Host.unplug.apply(e.Base, t), e.Node
    }, e.mix(e.Node, e.Plugin.Host, !1, null, 1), e.Object.each(e.Node._instances, function(t) {
        e.Plugin.Host.apply(t)
    }), e.NodeList.prototype.plug = function() {
        var t = arguments;
        return e.NodeList.each(this, function(n) {
            e.Node.prototype.plug.apply(e.one(n), t)
        }), this
    }, e.NodeList.prototype.unplug = function() {
        var t = arguments;
        return e.NodeList.each(this, function(n) {
            e.Node.prototype.unplug.apply(e.one(n), t)
        }), this
    }
}, "@VERSION@", {
    requires: ["node-base", "pluginhost"]
});
YUI.add("node-screen", function(e, t) {
    e.each(["winWidth", "winHeight", "docWidth", "docHeight", "docScrollX", "docScrollY"], function(t) {
        e.Node.ATTRS[t] = {
            getter: function() {
                var n = Array.prototype.slice.call(arguments);
                return n.unshift(e.Node.getDOMNode(this)), e.DOM[t].apply(this, n)
            }
        }
    }), e.Node.ATTRS.scrollLeft = {
        getter: function() {
            var t = e.Node.getDOMNode(this);
            return "scrollLeft" in t ? t.scrollLeft : e.DOM.docScrollX(t)
        },
        setter: function(t) {
            var n = e.Node.getDOMNode(this);
            n && ("scrollLeft" in n ? n.scrollLeft = t : (n.document || n.nodeType === 9) && e.DOM._getWin(n).scrollTo(t, e.DOM.docScrollY(n)))
        }
    }, e.Node.ATTRS.scrollTop = {
        getter: function() {
            var t = e.Node.getDOMNode(this);
            return "scrollTop" in t ? t.scrollTop : e.DOM.docScrollY(t)
        },
        setter: function(t) {
            var n = e.Node.getDOMNode(this);
            n && ("scrollTop" in n ? n.scrollTop = t : (n.document || n.nodeType === 9) && e.DOM._getWin(n).scrollTo(e.DOM.docScrollX(n), t))
        }
    }, e.Node.importMethod(e.DOM, ["getXY", "setXY", "getX", "setX", "getY", "setY", "swapXY"]), e.Node.ATTRS.region = {
        getter: function() {
            var t = this.getDOMNode(),
                n;
            return t && !t.tagName && t.nodeType === 9 && (t = t.documentElement), e.DOM.isWindow(t) ? n = e.DOM.viewportRegion(t) : n = e.DOM.region(t), n
        }
    }, e.Node.ATTRS.viewportRegion = {
        getter: function() {
            return e.DOM.viewportRegion(e.Node.getDOMNode(this))
        }
    }, e.Node.importMethod(e.DOM, "inViewportRegion"), e.Node.prototype.intersect = function(t, n) {
        var r = e.Node.getDOMNode(this);
        return e.instanceOf(t, e.Node) && (t = e.Node.getDOMNode(t)), e.DOM.intersect(r, t, n)
    }, e.Node.prototype.inRegion = function(t, n, r) {
        var i = e.Node.getDOMNode(this);
        return e.instanceOf(t, e.Node) && (t = e.Node.getDOMNode(t)), e.DOM.inRegion(i, t, n, r)
    }
}, "@VERSION@", {
    requires: ["dom-screen", "node-base"]
});
YUI.add("node-style", function(e, t) {
    (function(e) {
        e.mix(e.Node.prototype, {
            setStyle: function(t, n) {
                return e.DOM.setStyle(this._node, t, n), this
            },
            setStyles: function(t) {
                return e.DOM.setStyles(this._node, t), this
            },
            getStyle: function(t) {
                return e.DOM.getStyle(this._node, t)
            },
            getComputedStyle: function(t) {
                return e.DOM.getComputedStyle(this._node, t)
            }
        }), e.NodeList.importMethod(e.Node.prototype, ["getStyle", "getComputedStyle", "setStyle", "setStyles"])
    })(e);
    var n = e.Node;
    e.mix(n.prototype, {
        show: function(e) {
            return e = arguments[arguments.length - 1], this.toggleView(!0, e), this
        },
        _show: function() {
            this.removeAttribute("hidden"), this.setStyle("display", "")
        },
        _isHidden: function() {
            return this.hasAttribute("hidden") || e.DOM.getComputedStyle(this._node, "display") === "none"
        },
        toggleView: function(e, t) {
            return this._toggleView.apply(this, arguments), this
        },
        _toggleView: function(e, t) {
            return t = arguments[arguments.length - 1], typeof e != "boolean" && (e = this._isHidden() ? 1 : 0), e ? this._show() : this._hide(), typeof t == "function" && t.call(this), this
        },
        hide: function(e) {
            return e = arguments[arguments.length - 1], this.toggleView(!1, e), this
        },
        _hide: function() {
            this.setAttribute("hidden", "hidden"), this.setStyle("display", "none")
        }
    }), e.NodeList.importMethod(e.Node.prototype, ["show", "hide", "toggleView"])
}, "@VERSION@", {
    requires: ["dom-style", "node-base"]
});
YUI.add("oop", function(Y, NAME) {
    function dispatch(o, f, c, proto, action) {
        if (o && o[action] && o !== Y) return o[action].call(o, f, c);
        switch (A.test(o)) {
            case 1:
                return A[action](o, f, c);
            case 2:
                return A[action](Y.Array(o, 0, !0), f, c);
            default:
                return Y.Object[action](o, f, c, proto)
        }
    }
    var L = Y.Lang,
        A = Y.Array,
        OP = Object.prototype,
        CLONE_MARKER = "_~yuim~_",
        hasOwn = OP.hasOwnProperty,
        toString = OP.toString;
    Y.augment = function(receiver, supplier, overwrite, whitelist, args) {
        var copy, newPrototype, replacements, sequestered, unsequester, rProto = receiver.prototype,
            sequester = rProto && supplier,
            sProto = supplier.prototype,
            to = rProto || receiver;
        return args = args ? Y.Array(args) : [], sequester && (newPrototype = {}, replacements = {}, sequestered = {}, copy = function(value, key) {
            !overwrite && key in rProto || ("[object Function]" === toString.call(value) ? (sequestered[key] = value, newPrototype[key] = replacements[key] = function() {
                return unsequester(this, value, arguments)
            }) : newPrototype[key] = value)
        }, unsequester = function(instance, fn, fnArgs) {
            for (var key in sequestered) hasOwn.call(sequestered, key) && instance[key] === replacements[key] && (instance[key] = sequestered[key]);
            return supplier.apply(instance, args), fn.apply(instance, fnArgs)
        }, whitelist ? Y.Array.each(whitelist, function(name) {
            name in sProto && copy(sProto[name], name)
        }) : Y.Object.each(sProto, copy, null, !0)), Y.mix(to, newPrototype || sProto, overwrite, whitelist), sequester || supplier.apply(to, args), receiver
    }, Y.aggregate = function(r, s, ov, wl) {
        return Y.mix(r, s, ov, wl, 0, !0)
    }, Y.extend = function(r, s, px, sx) {
        s && r || Y.error("extend failed, verify dependencies");
        var sp = s.prototype,
            rp = Y.Object(sp);
        return r.prototype = rp, rp.constructor = r, r.superclass = sp, s != Object && sp.constructor == OP.constructor && (sp.constructor = s), px && Y.mix(rp, px, !0), sx && Y.mix(r, sx, !0), r
    }, Y.each = function(o, f, c, proto) {
        return dispatch(o, f, c, proto, "each")
    }, Y.some = function(o, f, c, proto) {
        return dispatch(o, f, c, proto, "some")
    }, Y.clone = function(o, safe, f, c, owner, cloned) {
        var o2, marked, stamp;
        if (!L.isObject(o) || Y.instanceOf(o, YUI) || o.addEventListener || o.attachEvent) return o;
        switch (marked = cloned || {}, L.type(o)) {
            case "date":
                return new Date(o);
            case "regexp":
                return o;
            case "function":
                return o;
            case "array":
                o2 = [];
                break;
            default:
                if (o[CLONE_MARKER]) return marked[o[CLONE_MARKER]];
                stamp = Y.guid(), o2 = safe ? {} : Y.Object(o), o[CLONE_MARKER] = stamp, marked[stamp] = o
        }
        return Y.each(o, function(v, k) {
            !k && 0 !== k || f && f.call(c || this, v, k, this, o) === !1 || k !== CLONE_MARKER && ("prototype" == k || (this[k] = Y.clone(v, safe, f, c, owner || o, marked)))
        }, o2), cloned || (Y.Object.each(marked, function(v, k) {
            if (v[CLONE_MARKER]) try {
                delete v[CLONE_MARKER]
            } catch (e) {
                v[CLONE_MARKER] = null
            }
        }, this), marked = null), o2
    }, Y.bind = function(f, c) {
        var xargs = arguments.length > 2 ? Y.Array(arguments, 2, !0) : null;
        return function() {
            var fn = L.isString(f) ? c[f] : f,
                args = xargs ? xargs.concat(Y.Array(arguments, 0, !0)) : arguments;
            return fn.apply(c || fn, args)
        }
    }, Y.rbind = function(f, c) {
        var xargs = arguments.length > 2 ? Y.Array(arguments, 2, !0) : null;
        return function() {
            var fn = L.isString(f) ? c[f] : f,
                args = xargs ? Y.Array(arguments, 0, !0).concat(xargs) : arguments;
            return fn.apply(c || fn, args)
        }
    }
}, "@VERSION@", {
    requires: ["yui-base"]
});
YUI.add("overlay", function(e, t) {
    e.Overlay = e.Base.create("overlay", e.Widget, [e.WidgetStdMod, e.WidgetPosition, e.WidgetStack, e.WidgetPositionAlign, e.WidgetPositionConstrain])
}, "@VERSION@", {
    requires: ["widget", "widget-stdmod", "widget-position", "widget-position-align", "widget-stack", "widget-position-constrain"],
    skinnable: !0
});
YUI.add("panel", function(e, t) {
    var n = e.ClassNameManager.getClassName;
    e.Panel = e.Base.create("panel", e.Widget, [e.WidgetPosition, e.WidgetStdMod, e.WidgetAutohide, e.WidgetButtons, e.WidgetModality, e.WidgetPositionAlign, e.WidgetPositionConstrain, e.WidgetStack], {
        BUTTONS: {
            close: {
                label: "Close",
                action: "hide",
                section: "header",
                template: '<button type="button" />',
                classNames: n("button", "close")
            }
        }
    }, {
        ATTRS: {
            buttons: {
                value: ["close"]
            }
        }
    })
}, "@VERSION@", {
    requires: ["widget", "widget-autohide", "widget-buttons", "widget-modality", "widget-position", "widget-position-align", "widget-position-constrain", "widget-stack", "widget-stdmod"],
    skinnable: !0
});
YUI.add("plugin", function(e, t) {
    function n(t) {
        !this.hasImpl || !this.hasImpl(e.Plugin.Base) ? n.superclass.constructor.apply(this, arguments) : n.prototype.initializer.apply(this, arguments)
    }
    n.ATTRS = {
        host: {
            writeOnce: !0
        }
    }, n.NAME = "plugin", n.NS = "plugin", e.extend(n, e.Base, {
        _handles: null,
        initializer: function(e) {
            this._handles = []
        },
        destructor: function() {
            if (this._handles)
                for (var e = 0, t = this._handles.length; e < t; e++) this._handles[e].detach()
        },
        doBefore: function(e, t, n) {
            var r = this.get("host"),
                i;
            return e in r ? i = this.beforeHostMethod(e, t, n) : r.on && (i = this.onHostEvent(e, t, n)), i
        },
        doAfter: function(e, t, n) {
            var r = this.get("host"),
                i;
            return e in r ? i = this.afterHostMethod(e, t, n) : r.after && (i = this.afterHostEvent(e, t, n)), i
        },
        onHostEvent: function(e, t, n) {
            var r = this.get("host").on(e, t, n || this);
            return this._handles.push(r), r
        },
        onceHostEvent: function(e, t, n) {
            var r = this.get("host").once(e, t, n || this);
            return this._handles.push(r), r
        },
        afterHostEvent: function(e, t, n) {
            var r = this.get("host").after(e, t, n || this);
            return this._handles.push(r), r
        },
        onceAfterHostEvent: function(e, t, n) {
            var r = this.get("host").onceAfter(e, t, n || this);
            return this._handles.push(r), r
        },
        beforeHostMethod: function(t, n, r) {
            var i = e.Do.before(n, this.get("host"), t, r || this);
            return this._handles.push(i), i
        },
        afterHostMethod: function(t, n, r) {
            var i = e.Do.after(n, this.get("host"), t, r || this);
            return this._handles.push(i), i
        },
        toString: function() {
            return this.constructor.NAME + "[" + this.constructor.NS + "]"
        }
    }), e.namespace("Plugin").Base = n
}, "@VERSION@", {
    requires: ["base-base"]
});
YUI.add("pluginhost-base", function(e, t) {
    function r() {
        this._plugins = {}
    }
    var n = e.Lang;
    r.prototype = {
        plug: function(e, t) {
            var r, i, s;
            if (n.isArray(e))
                for (r = 0, i = e.length; r < i; r++) this.plug(e[r]);
            else e && !n.isFunction(e) && (t = e.cfg, e = e.fn), e && e.NS && (s = e.NS, t = t || {}, t.host = this, this.hasPlugin(s) ? this[s].setAttrs && this[s].setAttrs(t) : (this[s] = new e(t), this._plugins[s] = e));
            return this
        },
        unplug: function(e) {
            var t = e,
                r = this._plugins;
            if (e) n.isFunction(e) && (t = e.NS, t && (!r[t] || r[t] !== e) && (t = null)), t && (this[t] && (this[t].destroy && this[t].destroy(), delete this[t]), r[t] && delete r[t]);
            else
                for (t in this._plugins) this._plugins.hasOwnProperty(t) && this.unplug(t);
            return this
        },
        hasPlugin: function(e) {
            return this._plugins[e] && this[e]
        },
        _initPlugins: function(e) {
            this._plugins = this._plugins || {}, this._initConfigPlugins && this._initConfigPlugins(e)
        },
        _destroyPlugins: function() {
            this.unplug()
        }
    }, e.namespace("Plugin").Host = r
}, "@VERSION@", {
    requires: ["yui-base"]
});
YUI.add("pluginhost-config", function(e, t) {
    var n = e.Plugin.Host,
        r = e.Lang;
    n.prototype._initConfigPlugins = function(t) {
        var n = this._getClasses ? this._getClasses() : [this.constructor],
            r = [],
            i = {},
            s, o, u, a, f;
        for (o = n.length - 1; o >= 0; o--) s = n[o], a = s._UNPLUG, a && e.mix(i, a, !0), u = s._PLUG, u && e.mix(r, u, !0);
        for (f in r) r.hasOwnProperty(f) && (i[f] || this.plug(r[f]));
        t && t.plugins && this.plug(t.plugins)
    }, n.plug = function(t, n, i) {
        var s, o, u, a;
        if (t !== e.Base) {
            t._PLUG = t._PLUG || {}, r.isArray(n) || (i && (n = {
                fn: n,
                cfg: i
            }), n = [n]);
            for (o = 0, u = n.length; o < u; o++) s = n[o], a = s.NAME || s.fn.NAME, t._PLUG[a] = s
        }
    }, n.unplug = function(t, n) {
        var i, s, o, u;
        if (t !== e.Base) {
            t._UNPLUG = t._UNPLUG || {}, r.isArray(n) || (n = [n]);
            for (s = 0, o = n.length; s < o; s++) i = n[s], u = i.NAME, t._PLUG[u] ? delete t._PLUG[u] : t._UNPLUG[u] = i
        }
    }
}, "@VERSION@", {
    requires: ["pluginhost-base"]
});
YUI.add("promise", function(e, t) {
    function i(e) {
        if (!(this instanceof i)) return new i(e);
        var t = new i.Resolver(this);
        this._resolver = t, e.call(this, function(e) {
            t.resolve(e)
        }, function(e) {
            t.reject(e)
        })
    }

    function s(e) {
        this._callbacks = [], this._errbacks = [], this.promise = e, this._status = "pending", this._result = null
    }
    var n = e.Lang,
        r = [].slice;
    e.mix(i.prototype, {
        then: function(e, t) {
            var n = this.constructor,
                r = this._resolver;
            return new n(function(n, s) {
                r._addCallbacks(typeof e == "function" ? i._wrap(n, s, e) : n, typeof t == "function" ? i._wrap(n, s, t) : s)
            })
        },
        "catch": function(e) {
            return this.then(undefined, e)
        },
        getStatus: function() {
            return this._resolver.getStatus()
        }
    }), i._wrap = function(e, t, n) {
        return function(r) {
            var i;
            try {
                i = n(r)
            } catch (s) {
                t(s);
                return
            }
            e(i)
        }
    }, i.isPromise = function(e) {
        var t;
        try {
            t = e.then
        } catch (n) {}
        return typeof t == "function"
    }, i.resolve = function(e) {
        return i.isPromise(e) && e.constructor === this ? e : new this(function(t) {
            t(e)
        })
    }, i.reject = function(e) {
        return new this(function(t, n) {
            n(e)
        })
    }, i.all = function(e) {
        var t = this;
        return new t(function(r, i) {
            function f(e) {
                return function(t) {
                    a[e] = t, s--, s || r(a)
                }
            }
            if (!n.isArray(e)) {
                i(new TypeError("Promise.all expects an array of values or promises"));
                return
            }
            var s = e.length,
                o = 0,
                u = e.length,
                a = [];
            if (u < 1) return r(a);
            for (; o < u; o++) t.resolve(e[o]).then(f(o), i)
        })
    }, i.race = function(e) {
        var t = this;
        return new t(function(r, i) {
            if (!n.isArray(e)) {
                i(new TypeError("Promise.race expects an array of values or promises"));
                return
            }
            for (var s = 0, o = e.length; s < o; s++) t.resolve(e[s]).then(r, i)
        })
    }, e.Promise = i, e.mix(s.prototype, {
        fulfill: function(e) {
            this._status === "pending" && (this._result = e, this._status = "fulfilled"), this._status === "fulfilled" && (this._notify(this._callbacks, this._result), this._callbacks = [], this._errbacks = null)
        },
        reject: function(e) {
            this._status === "pending" && (this._result = e, this._status = "rejected"), this._status === "rejected" && (this._notify(this._errbacks, this._result), this._callbacks = null, this._errbacks = [])
        },
        resolve: function(e) {
            var t = this;
            i.isPromise(e) ? e.then(function(e) {
                t.resolve(e)
            }, function(e) {
                t.reject(e)
            }) : this.fulfill(e)
        },
        then: function(e, t) {
            return this.promise.then(e, t)
        },
        _addCallbacks: function(e, t) {
            var n = this._callbacks,
                r = this._errbacks,
                i = this._status,
                s = this._result;
            n && typeof e == "function" && n.push(e), r && typeof t == "function" && r.push(t), i === "fulfilled" ? this.fulfill(s) : i === "rejected" && this.reject(s)
        },
        getStatus: function() {
            return this._status
        },
        _notify: function(t, n) {
            t.length && e.soon(function() {
                var e, r;
                for (e = 0, r = t.length; e < r; ++e) t[e](n)
            })
        }
    }, !0), e.Promise.Resolver = s, e.when = function(e, t, n) {
        return e = i.resolve(e), t || n ? e.then(t, n) : e
    }, e.batch = function() {
        return i.all(r.call(arguments))
    }
}, "@VERSION@", {
    requires: ["timers"]
});
YUI.add("querystring-parse", function(e, t) {
    var n = e.namespace("QueryString"),
        r = function(t) {
            return function r(i, s) {
                var o, u, a, f, l;
                return arguments.length !== 2 ? (i = i.split(t), r(n.unescape(i.shift()), n.unescape(i.join(t)))) : (i = i.replace(/^\s+|\s+$/g, ""), e.Lang.isString(s) && (s = s.replace(/^\s+|\s+$/g, ""), isNaN(s) || (u = +s, s === u.toString(10) && (s = u))), o = /(.*)\[([^\]]*)\]$/.exec(i), o ? (f = o[2], a = o[1], f ? (l = {}, l[f] = s, r(a, l)) : r(a, [s])) : (l = {}, i && (l[i] = s), l))
            }
        },
        i = function(t, n) {
            return t ? e.Lang.isArray(t) ? t.concat(n) : !e.Lang.isObject(t) || !e.Lang.isObject(n) ? [t].concat(n) : s(t, n) : n
        },
        s = function(e, t) {
            for (var n in t) n && t.hasOwnProperty(n) && (e[n] = i(e[n], t[n]));
            return e
        };
    n.parse = function(t, n, s) {
        return e.Array.reduce(e.Array.map(t.split(n || "&"), r(s || "=")), {}, i)
    }, n.unescape = function(e) {
        return decodeURIComponent(e.replace(/\+/g, " "))
    }
}, "@VERSION@", {
    requires: ["yui-base", "array-extras"]
});
YUI.add("querystring-stringify-simple", function(e, t) {
    var n = e.namespace("QueryString"),
        r = encodeURIComponent;
    n.stringify = function(t, n) {
        var i = [],
            s = n && n.arrayKey ? !0 : !1,
            o, u, a;
        for (o in t)
            if (t.hasOwnProperty(o))
                if (e.Lang.isArray(t[o]))
                    for (u = 0, a = t[o].length; u < a; u++) i.push(r(s ? o + "[]" : o) + "=" + r(t[o][u]));
                else i.push(r(o) + "=" + r(t[o]));
        return i.join("&")
    }
}, "@VERSION@", {
    requires: ["yui-base"]
});
YUI.add("querystring-stringify", function(e, t) {
    var n = e.namespace("QueryString"),
        r = [],
        i = e.Lang;
    n.escape = encodeURIComponent, n.stringify = function(e, t, s) {
        var o, u, a, f, l, c, h = t && t.sep ? t.sep : "&",
            p = t && t.eq ? t.eq : "=",
            d = t && t.arrayKey ? t.arrayKey : !1;
        if (i.isNull(e) || i.isUndefined(e) || i.isFunction(e)) return s ? n.escape(s) + p : "";
        if (i.isBoolean(e) || Object.prototype.toString.call(e) === "[object Boolean]") e = +e;
        if (i.isNumber(e) || i.isString(e)) return n.escape(s) + p + n.escape(e);
        if (i.isArray(e)) {
            c = [], s = d ? s + "[]" : s, f = e.length;
            for (a = 0; a < f; a++) c.push(n.stringify(e[a], t, s));
            return c.join(h)
        }
        for (a = r.length - 1; a >= 0; --a)
            if (r[a] === e) throw new Error("QueryString.stringify. Cyclical reference");
        r.push(e), c = [], o = s ? s + "[" : "", u = s ? "]" : "";
        for (a in e) e.hasOwnProperty(a) && (l = o + a + u, c.push(n.stringify(e[a], t, l)));
        return r.pop(), c = c.join(h), !c && s ? s + "=" : c
    }
}, "@VERSION@", {
    requires: ["yui-base"]
});
YUI.add("queue-promote", function(e, t) {
    e.mix(e.Queue.prototype, {
        indexOf: function(t) {
            return e.Array.indexOf(this._q, t)
        },
        promote: function(e) {
            var t = this.indexOf(e);
            t > -1 && this._q.unshift(this._q.splice(t, 1)[0])
        },
        remove: function(e) {
            var t = this.indexOf(e);
            t > -1 && this._q.splice(t, 1)
        }
    })
}, "@VERSION@", {
    requires: ["yui-base"]
});
YUI.add("range-slider", function(e, t) {
    e.Slider = e.Base.build("slider", e.SliderBase, [e.SliderValueRange, e.ClickableRail])
}, "@VERSION@", {
    requires: ["slider-base", "slider-value-range", "clickable-rail"]
});
YUI.add("router", function(e, t) {
    function c() {
        c.superclass.constructor.apply(this, arguments)
    }
    var n = e.HistoryHash,
        r = e.QueryString,
        i = e.Array,
        s = e.Lang,
        o = e.Object,
        u = e.config.win,
        a = [],
        f = [],
        l = "ready";
    e.Router = e.extend(c, e.Base, {
        _regexURL: /^((?:[^\/#?:]+:\/\/|\/\/)[^\/]*)?([^?#]*)(\?[^#]*)?(#.*)?$/,
        _regexPathParam: /([:*])([\w\-]+)?/g,
        _regexUrlQuery: /\?([^#]*).*$/,
        _regexUrlOrigin: /^(?:[^\/#?:]+:\/\/|\/\/)[^\/]*/,
        initializer: function(t) {
            var n = this;
            n._html5 = n.get("html5"), n._params = {}, n._routes = [], n._url = n._getURL(), n._setRoutes(t && t.routes ? t.routes : n.get("routes")), n._html5 ? (n._history = new e.HistoryHTML5({
                force: !0
            }), n._historyEvents = e.after("history:change", n._afterHistoryChange, n)) : n._historyEvents = e.on("hashchange", n._afterHistoryChange, u, n), n.publish(l, {
                defaultFn: n._defReadyFn,
                fireOnce: !0,
                preventable: !1
            }), n.once("initializedChange", function() {
                e.once("load", function() {
                    setTimeout(function() {
                        n.fire(l, {
                            dispatched: !!n._dispatched
                        })
                    }, 20)
                })
            }), a.push(this)
        },
        destructor: function() {
            var e = i.indexOf(a, this);
            e > -1 && a.splice(e, 1), this._historyEvents && this._historyEvents.detach()
        },
        dispatch: function() {
            return this.once(l, function() {
                var e, t;
                this._ready = !0, this.upgrade() || (e = this._getRequest("dispatch"), t = this._getResponse(e), this._dispatch(e, t))
            }), this
        },
        getPath: function() {
            return this._getPath()
        },
        hasRoute: function(e) {
            var t;
            return this._hasSameOrigin(e) ? (this._html5 || (e = this._upgradeURL(e)), t = this.removeQuery(e.replace(this._regexUrlOrigin, "")), !!this.match(t).length) : !1
        },
        match: function(e) {
            var t = this.get("root");
            if (t) {
                if (!this._pathHasRoot(t, e)) return [];
                e = this.removeRoot(e)
            }
            return i.filter(this._routes, function(t) {
                return e.search(t.regex) > -1
            })
        },
        param: function(e, t) {
            return this._params[e] = t, this
        },
        removeRoot: function(e) {
            var t = this.get("root"),
                n;
            e = e.replace(this._regexUrlOrigin, "");
            if (!t) return e;
            n = this.removeQuery(e);
            if (n === t || this._pathHasRoot(t, n)) e = e.substring(t.length);
            return e.charAt(0) === "/" ? e : "/" + e
        },
        removeQuery: function(e) {
            return e.replace(/\?.*$/, "")
        },
        replace: function(e) {
            return this._queue(e, !0)
        },
        route: function(t, n) {
            n = i(arguments, 1, !0);
            var r, o;
            return typeof t == "string" || s.isRegExp(t) ? (n = i.flatten(n), r = [], o = this._getRegex(t, r), t = {
                callbacks: n,
                keys: r,
                path: t,
                regex: o
            }) : (n = i.flatten([t.callbacks || t.callback || []].concat(n)), r = t.keys, o = t.regex || t.regexp, o || (r = [], o = this._getRegex(t.path, r)), t = e.merge(t, {
                callbacks: n,
                keys: r,
                path: t.path || o,
                regex: o
            })), this._routes.push(t), this
        },
        save: function(e) {
            return this._queue(e)
        },
        upgrade: function() {
            if (!this._html5) return !1;
            var e = this._getHashPath();
            return e ? (this.once(l, function() {
                this.replace(e)
            }), !0) : !1
        },
        _decode: function(e) {
            return decodeURIComponent(e.replace(/\+/g, " "))
        },
        _dequeue: function() {
            var t = this,
                n;
            return YUI.Env.windowLoaded ? (n = f.shift(), n ? n() : this) : (e.once("load", function() {
                t._dequeue()
            }), this)
        },
        _dispatch: function(t, n) {
            function h(p) {
                var d, v, m;
                if (p) p === "route" ? (a = [], h()) : e.error(p);
                else if (d = a.shift()) typeof d == "string" && (v = d, d = r[v], d || e.error("Router: Callback not found: " + v, null, "router")), t.pendingCallbacks = a.length, d.call(r, t, n, h);
                else if (m = u.shift()) a = m.callbacks.concat(), f = i.map(m.regex.exec(c) || [], function(e) {
                    return e && o(e) || ""
                }), l = !0, f.length === m.keys.length + 1 ? (f = f.slice(1), t.params = i.hash(m.keys, f), l = i.every(m.keys, function(e, n) {
                    var i = r._params[e],
                        o = f[n];
                    return i && o && typeof o == "string" ? (o = s.isRegExp(i) ? i.exec(o) : i.call(r, o, e), o !== !1 && s.isValue(o) ? (t.params[e] = o, !0) : !1) : !0
                })) : t.params = f.concat(), t.route = m, t.pendingRoutes = u.length, l ? h() : h("route")
            }
            var r = this,
                o = r._decode,
                u = r.match(t.path),
                a = [],
                f, l, c;
            return r._dispatching = r._dispatched = !0, !u || !u.length ? (r._dispatching = !1, r) : (c = r.removeRoot(t.path), h(), r._dispatching = !1, r._dequeue())
        },
        _getHashPath: function(e) {
            return e || (e = n.getHash()), e && e.charAt(0) === "/" ? this._joinURL(e) : ""
        },
        _getOrigin: function() {
            var t = e.getLocation();
            return t.origin || t.protocol + "//" + t.host
        },
        _getParams: function() {
            return e.merge(this._params)
        },
        _getPath: function() {
            var t = !this._html5 && this._getHashPath() || e.getLocation().pathname;
            return this.removeQuery(t)
        },
        _getPathRoot: function() {
            var t = "/",
                n = e.getLocation().pathname,
                r;
            return n.charAt(n.length - 1) === t ? n : (r = n.split(t), r.pop(), r.join(t) + t)
        },
        _getQuery: function() {
            var t = e.getLocation(),
                r, i;
            return this._html5 ? t.search.substring(1) : (r = n.getHash(), i = r.match(this._regexUrlQuery), r && i ? i[1] : t.search.substring(1))
        },
        _getRegex: function(e, t) {
            return s.isRegExp(e) ? e : e === "*" ? /.*/ : (e = e.replace(this._regexPathParam, function(e, n, r) {
                return r ? (t.push(r), n === "*" ? "(.*?)" : "([^/#?]*)") : n === "*" ? ".*" : e
            }), new RegExp("^" + e + "$"))
        },
        _getRequest: function(e) {
            return {
                path: this._getPath(),
                query: this._parseQuery(this._getQuery()),
                url: this._getURL(),
                router: this,
                src: e
            }
        },
        _getResponse: function(e) {
            return {
                req: e
            }
        },
        _getRoutes: function() {
            return this._routes.concat()
        },
        _getURL: function() {
            var t = e.getLocation().toString();
            return this._html5 || (t = this._upgradeURL(t)), t
        },
        _hasSameOrigin: function(t) {
            var n = (t && t.match(this._regexUrlOrigin) || [])[0];
            return n && n.indexOf("//") === 0 && (n = e.getLocation().protocol + n), !n || n === this._getOrigin()
        },
        _joinURL: function(e) {
            var t = this.get("root");
            return e = this.removeRoot(e), e.charAt(0) === "/" && (e = e.substring(1)), t && t.charAt(t.length - 1) === "/" ? t + e : t + "/" + e
        },
        _normalizePath: function(e) {
            var t = "..",
                n = "/",
                r, i, s, o, u, a;
            if (!e || e === n) return n;
            o = e.split(n), a = [];
            for (r = 0, i = o.length; r < i; ++r) u = o[r], u === t ? a.pop() : u && a.push(u);
            return s = n + a.join(n), s !== n && e.charAt(e.length - 1) === n && (s += n), s
        },
        _parseQuery: r && r.parse ? r.parse : function(e) {
            var t = this._decode,
                n = e.split("&"),
                r = 0,
                i = n.length,
                s = {},
                o;
            for (; r < i; ++r) o = n[r].split("="), o[0] && (s[t(o[0])] = t(o[1] || ""));
            return s
        },
        _pathHasRoot: function(e, t) {
            var n = e.charAt(e.length - 1) === "/" ? e : e + "/";
            return t.indexOf(n) === 0
        },
        _queue: function() {
            var t = arguments,
                n = this;
            return f.push(function() {
                return n._html5 ? e.UA.ios && e.UA.ios < 5 ? n._save.apply(n, t) : setTimeout(function() {
                    n._save.apply(n, t)
                }, 1) : (n._dispatching = !0, n._save.apply(n, t)), n
            }), this._dispatching ? this : this._dequeue()
        },
        _resolvePath: function(t) {
            return t ? (t.charAt(0) !== "/" && (t = this._getPathRoot() + t), this._normalizePath(t)) : e.getLocation().pathname
        },
        _resolveURL: function(t) {
            var n = t && t.match(this._regexURL),
                r, i, s, o, u;
            return n ? (r = n[1], i = n[2], s = n[3], o = n[4], r ? (r.indexOf("//") === 0 && (r = e.getLocation().protocol + r), r + (i || "/") + (s || "") + (o || "")) : (u = this._getOrigin() + this._resolvePath(i), i || s ? u + (s || "") + (o || "") : (s = this._getQuery(), u + (s ? "?" + s : "") + (o || "")))) : e.getLocation().toString()
        },
        _save: function(t, r) {
            var i = typeof t == "string",
                s, o, u;
            if (i && !this._hasSameOrigin(t)) return e.error("Security error: The new URL must be of the same origin as the current URL."), this;
            i && (t = this._joinURL(t)), this._ready = !0;
            if (this._html5) this._history[r ? "replace" : "add"](null, {
                url: t
            });
            else {
                s = e.getLocation().pathname, o = this.get("root"), u = n.getHash(), i || (t = u);
                if (o === s || o === this._getPathRoot()) t = this.removeRoot(t);
                t === u ? e.Router.dispatch() : n[r ? "replaceHash" : "setHash"](t)
            }
            return this
        },
        _setParams: function(t) {
            return this._params = {}, o.each(t, function(e, t) {
                this.param(t, e)
            }, this), e.merge(this._params)
        },
        _setRoutes: function(e) {
            return this._routes = [], i.each(e, function(e) {
                this.route(e)
            }, this), this._routes.concat()
        },
        _upgradeURL: function(t) {
            if (!this._hasSameOrigin(t)) return t;
            var n = (t.match(/#(.*)$/) || [])[1] || "",
                r = e.HistoryHash.hashPrefix,
                i;
            r && n.indexOf(r) === 0 && (n = n.replace(r, ""));
            if (n) {
                i = this._getHashPath(n);
                if (i) return this._resolveURL(i)
            }
            return t
        },
        _afterHistoryChange: function(e) {
            var t = this,
                n = e.src,
                r = t._url,
                i = t._getURL(),
                s, o;
            t._url = i;
            if (n === "popstate" && (!t._ready || r.replace(/#.*$/, "") === i.replace(/#.*$/, ""))) return;
            s = t._getRequest(n), o = t._getResponse(s), t._dispatch(s, o)
        },
        _defReadyFn: function(e) {
            this._ready = !0
        }
    }, {
        NAME: "router",
        ATTRS: {
            html5: {
                valueFn: function() {
                    return e.Router.html5
                },
                writeOnce: "initOnly"
            },
            params: {
                value: {},
                getter: "_getParams",
                setter: "_setParams"
            },
            root: {
                value: ""
            },
            routes: {
                value: [],
                getter: "_getRoutes",
                setter: "_setRoutes"
            }
        },
        html5: e.HistoryBase.html5 && (!e.UA.android || e.UA.android >= 3),
        _instances: a,
        dispatch: function() {
            var e, t, n, r, i;
            for (e = 0, t = a.length; e < t; e += 1) n = a[e], n && (r = n._getRequest("dispatch"), i = n._getResponse(r), n._dispatch(r, i))
        }
    }), e.Controller = e.Router
}, "@VERSION@", {
    optional: ["querystring-parse"],
    requires: ["array-extras", "base-build", "history"]
});
YUI.add("selector-native", function(e, t) {
    (function(e) {
        e.namespace("Selector");
        var t = "compareDocumentPosition",
            n = "ownerDocument",
            r = {
                _types: {
                    esc: {
                        token: "\ue000",
                        re: /\\[:\[\]\(\)#\.\'\>+~"]/gi
                    },
                    attr: {
                        token: "\ue001",
                        re: /(\[[^\]]*\])/g
                    },
                    pseudo: {
                        token: "\ue002",
                        re: /(\([^\)]*\))/g
                    }
                },
                useNative: !0,
                _escapeId: function(e) {
                    return e && (e = e.replace(/([:\[\]\(\)#\.'<>+~"])/g, "\\$1")), e
                },
                _compare: "sourceIndex" in e.config.doc.documentElement ? function(e, t) {
                    var n = e.sourceIndex,
                        r = t.sourceIndex;
                    return n === r ? 0 : n > r ? 1 : -1
                } : e.config.doc.documentElement[t] ? function(e, n) {
                    return e[t](n) & 4 ? -1 : 1
                } : function(e, t) {
                    var r, i, s;
                    return e && t && (r = e[n].createRange(), r.setStart(e, 0), i = t[n].createRange(), i.setStart(t, 0), s = r.compareBoundaryPoints(1, i)), s
                },
                _sort: function(t) {
                    return t && (t = e.Array(t, 0, !0), t.sort && t.sort(r._compare)), t
                },
                _deDupe: function(e) {
                    var t = [],
                        n, r;
                    for (n = 0; r = e[n++];) r._found || (t[t.length] = r, r._found = !0);
                    for (n = 0; r = t[n++];) r._found = null, r.removeAttribute("_found");
                    return t
                },
                query: function(t, n, i, s) {
                    n = n || e.config.doc;
                    var o = [],
                        u = e.Selector.useNative && e.config.doc.querySelector && !s,
                        a = [
                            [t, n]
                        ],
                        f, l, c, h = u ? e.Selector._nativeQuery : e.Selector._bruteQuery;
                    if (t && h) {
                        !s && (!u || n.tagName) && (a = r._splitQueries(t, n));
                        for (c = 0; f = a[c++];) l = h(f[0], f[1], i), i || (l = e.Array(l, 0, !0)), l && (o = o.concat(l));
                        a.length > 1 && (o = r._sort(r._deDupe(o)))
                    }
                    return i ? o[0] || null : o
                },
                _replaceSelector: function(t) {
                    var n = e.Selector._parse("esc", t),
                        i, s;
                    return t = e.Selector._replace("esc", t), s = e.Selector._parse("pseudo", t), t = r._replace("pseudo", t), i = e.Selector._parse("attr", t), t = e.Selector._replace("attr", t), {
                        esc: n,
                        attrs: i,
                        pseudos: s,
                        selector: t
                    }
                },
                _restoreSelector: function(t) {
                    var n = t.selector;
                    return n = e.Selector._restore("attr", n, t.attrs), n = e.Selector._restore("pseudo", n, t.pseudos), n = e.Selector._restore("esc", n, t.esc), n
                },
                _replaceCommas: function(t) {
                    var n = e.Selector._replaceSelector(t),
                        t = n.selector;
                    return t && (t = t.replace(/,/g, "\ue007"), n.selector = t, t = e.Selector._restoreSelector(n)), t
                },
                _splitQueries: function(t, n) {
                    t.indexOf(",") > -1 && (t = e.Selector._replaceCommas(t));
                    var r = t.split("\ue007"),
                        i = [],
                        s = "",
                        o, u, a;
                    if (n) {
                        n.nodeType === 1 && (o = e.Selector._escapeId(e.DOM.getId(n)), o || (o = e.guid(), e.DOM.setId(n, o)), s = '[id="' + o + '"] ');
                        for (u = 0, a = r.length; u < a; ++u) t = s + r[u], i.push([t, n])
                    }
                    return i
                },
                _nativeQuery: function(t, n, r) {
                    if ((e.UA.webkit || e.UA.opera) && t.indexOf(":checked") > -1 && e.Selector.pseudos && e.Selector.pseudos.checked) return e.Selector.query(t, n, r, !0);
                    try {
                        return n["querySelector" + (r ? "" : "All")](t)
                    } catch (i) {
                        return e.Selector.query(t, n, r, !0)
                    }
                },
                filter: function(t, n) {
                    var r = [],
                        i, s;
                    if (t && n)
                        for (i = 0; s = t[i++];) e.Selector.test(s, n) && (r[r.length] = s);
                    return r
                },
                test: function(t, r, i) {
                    var s = !1,
                        o = !1,
                        u, a, f, l, c, h, p, d, v;
                    if (t && t.tagName)
                        if (typeof r == "function") s = r.call(t, t);
                        else {
                            u = r.split(","), !i && !e.DOM.inDoc(t) && (a = t.parentNode, a ? i = a : (c = t[n].createDocumentFragment(), c.appendChild(t), i = c, o = !0)), i = i || t[n], h = e.Selector._escapeId(e.DOM.getId(t)), h || (h = e.guid(), e.DOM.setId(t, h));
                            for (p = 0; v = u[p++];) {
                                v += '[id="' + h + '"]', l = e.Selector.query(v, i);
                                for (d = 0; f = l[d++];)
                                    if (f === t) {
                                        s = !0;
                                        break
                                    }
                                if (s) break
                            }
                            o && c.removeChild(t)
                        }
                    return s
                },
                ancestor: function(t, n, r) {
                    return e.DOM.ancestor(t, function(t) {
                        return e.Selector.test(t, n)
                    }, r)
                },
                _parse: function(t, n) {
                    return n.match(e.Selector._types[t].re)
                },
                _replace: function(t, n) {
                    var r = e.Selector._types[t];
                    return n.replace(r.re, r.token)
                },
                _restore: function(t, n, r) {
                    if (r) {
                        var i = e.Selector._types[t].token,
                            s, o;
                        for (s = 0, o = r.length; s < o; ++s) n = n.replace(i, r[s])
                    }
                    return n
                }
            };
        e.mix(e.Selector, r, !0)
    })(e)
}, "@VERSION@", {
    requires: ["dom-base"]
});
YUI.add("selector", function(e, t) {}, "@VERSION@", {
    requires: ["selector-native"]
});
YUI.add("slider-base", function(e, t) {
    function r() {
        r.superclass.constructor.apply(this, arguments)
    }
    var n = e.Attribute.INVALID_VALUE;
    e.SliderBase = e.extend(r, e.Widget, {
        initializer: function() {
            this.axis = this.get("axis"), this._key = {
                dim: this.axis === "y" ? "height" : "width",
                minEdge: this.axis === "y" ? "top" : "left",
                maxEdge: this.axis === "y" ? "bottom" : "right",
                xyIndex: this.axis === "y" ? 1 : 0
            }, this.publish("thumbMove", {
                defaultFn: this._defThumbMoveFn,
                queuable: !0
            })
        },
        renderUI: function() {
            var e = this.get("contentBox");
            this.rail = this.renderRail(), this._uiSetRailLength(this.get("length")), this.thumb = this.renderThumb(), this.rail.appendChild(this.thumb), e.appendChild(this.rail), e.addClass(this.getClassName(this.axis))
        },
        renderRail: function() {
            var t = this.getClassName("rail", "cap", this._key.minEdge),
                n = this.getClassName("rail", "cap", this._key.maxEdge);
            return e.Node.create(e.Lang.sub(this.RAIL_TEMPLATE, {
                railClass: this.getClassName("rail"),
                railMinCapClass: t,
                railMaxCapClass: n
            }))
        },
        _uiSetRailLength: function(e) {
            this.rail.setStyle(this._key.dim, e)
        },
        renderThumb: function() {
            this._initThumbUrl();
            var t = this.get("thumbUrl");
            return e.Node.create(e.Lang.sub(this.THUMB_TEMPLATE, {
                thumbClass: this.getClassName("thumb"),
                thumbShadowClass: this.getClassName("thumb", "shadow"),
                thumbImageClass: this.getClassName("thumb", "image"),
                thumbShadowUrl: t,
                thumbImageUrl: t,
                thumbAriaLabelId: this.getClassName("label", e.guid())
            }))
        },
        _onThumbClick: function(e) {
            this.thumb.focus()
        },
        bindUI: function() {
            var t = this.get("boundingBox"),
                n = e.UA.opera ? "press:" : "down:",
                r = n + "38,40,33,34,35,36",
                i = n + "37,39",
                s = n + "37+meta,39+meta";
            t.on("key", this._onDirectionKey, r, this), t.on("key", this._onLeftRightKey, i, this), t.on("key", this._onLeftRightKeyMeta, s, this), this.thumb.on("click", this._onThumbClick, this), this._bindThumbDD(), this._bindValueLogic(), this.after("disabledChange", this._afterDisabledChange), this.after("lengthChange", this._afterLengthChange)
        },
        _incrMinor: function() {
            this.set("value", this.get("value") + this.get("minorStep"))
        },
        _decrMinor: function() {
            this.set("value", this.get("value") - this.get("minorStep"))
        },
        _incrMajor: function() {
            this.set("value", this.get("value") + this.get("majorStep"))
        },
        _decrMajor: function() {
            this.set("value", this.get("value") - this.get("majorStep"))
        },
        _setToMin: function(e) {
            this.set("value", this.get("min"))
        },
        _setToMax: function(e) {
            this.set("value", this.get("max"))
        },
        _onDirectionKey: function(e) {
            e.preventDefault();
            if (this.get("disabled") === !1) switch (e.charCode) {
                case 38:
                    this._incrMinor();
                    break;
                case 40:
                    this._decrMinor();
                    break;
                case 36:
                    this._setToMin();
                    break;
                case 35:
                    this._setToMax();
                    break;
                case 33:
                    this._incrMajor();
                    break;
                case 34:
                    this._decrMajor()
            }
        },
        _onLeftRightKey: function(e) {
            e.preventDefault();
            if (this.get("disabled") === !1) switch (e.charCode) {
                case 37:
                    this._decrMinor();
                    break;
                case 39:
                    this._incrMinor()
            }
        },
        _onLeftRightKeyMeta: function(e) {
            e.preventDefault();
            if (this.get("disabled") === !1) switch (e.charCode) {
                case 37:
                    this._setToMin();
                    break;
                case 39:
                    this._setToMax()
            }
        },
        _bindThumbDD: function() {
            var t = {
                constrain: this.rail
            };
            t["stick" + this.axis.toUpperCase()] = !0, this._dd = new e.DD.Drag({
                node: this.thumb,
                bubble: !1,
                on: {
                    "drag:start": e.bind(this._onDragStart, this)
                },
                after: {
                    "drag:drag": e.bind(this._afterDrag, this),
                    "drag:end": e.bind(this._afterDragEnd, this)
                }
            }), this._dd.plug(e.Plugin.DDConstrained, t)
        },
        _bindValueLogic: function() {},
        _uiMoveThumb: function(e, t) {
            this.thumb && (this.thumb.setStyle(this._key.minEdge, e + "px"), t || (t = {}), t.offset = e, this.fire("thumbMove", t))
        },
        _onDragStart: function(e) {
            this.fire("slideStart", {
                ddEvent: e,
                originEvent: e
            })
        },
        _afterDrag: function(e) {
            var t = e.info.xy[this._key.xyIndex],
                n = e.target.con._regionCache[this._key.minEdge];
            this.fire("thumbMove", {
                offset: t - n,
                ddEvent: e,
                originEvent: e
            })
        },
        _afterDragEnd: function(e) {
            this.fire("slideEnd", {
                ddEvent: e,
                originEvent: e
            })
        },
        _afterDisabledChange: function(e) {
            this._dd.set("lock", e.newVal)
        },
        _afterLengthChange: function(e) {
            this.get("rendered") && (this._uiSetRailLength(e.newVal), this.syncUI())
        },
        syncUI: function() {
            this._dd.con.resetCache(), this._syncThumbPosition(), this.thumb.set("aria-valuemin", this.get("min")), this.thumb.set("aria-valuemax", this.get("max")), this._dd.set("lock", this.get("disabled"))
        },
        _syncThumbPosition: function() {},
        _setAxis: function(e) {
            return e = (e + "").toLowerCase(), e === "x" || e === "y" ? e : n
        },
        _setLength: function(e) {
            e = (e + "").toLowerCase();
            var t = parseFloat(e, 10),
                r = e.replace(/[\d\.\-]/g, "") || this.DEF_UNIT;
            return t > 0 ? t + r : n
        },
        _initThumbUrl: function() {
            if (!this.get("thumbUrl")) {
                var t = this.getSkinName() || "sam",
                    n = e.config.base;
                n.indexOf("http://yui.yahooapis.com/combo") === 0 && (n = "http://yui.yahooapis.com/" + e.version + "/build/"), this.set("thumbUrl", n + "slider-base/assets/skins/" + t + "/thumb-" + this.axis + ".png")
            }
        },
        BOUNDING_TEMPLATE: "<span></span>",
        CONTENT_TEMPLATE: "<span></span>",
        RAIL_TEMPLATE: '<span class="{railClass}"><span class="{railMinCapClass}"></span><span class="{railMaxCapClass}"></span></span>',
        THUMB_TEMPLATE: '<span class="{thumbClass}" aria-labelledby="{thumbAriaLabelId}" aria-valuetext="" aria-valuemax="" aria-valuemin="" aria-valuenow="" role="slider" tabindex="0"><img src="{thumbShadowUrl}" alt="Slider thumb shadow" class="{thumbShadowClass}"><img src="{thumbImageUrl}" alt="Slider thumb" class="{thumbImageClass}"></span>'
    }, {
        NAME: "sliderBase",
        ATTRS: {
            axis: {
                value: "x",
                writeOnce: !0,
                setter: "_setAxis",
                lazyAdd: !1
            },
            length: {
                value: "150px",
                setter: "_setLength"
            },
            thumbUrl: {
                value: null,
                validator: e.Lang.isString
            }
        }
    })
}, "@VERSION@", {
    requires: ["widget", "dd-constrain", "event-key"],
    skinnable: !0
});
YUI.add("slider-value-range", function(e, t) {
    function o() {
        this._initSliderValueRange()
    }
    var n = "min",
        r = "max",
        i = "value",
        s = Math.round;
    e.SliderValueRange = e.mix(o, {
        prototype: {
            _factor: 1,
            _initSliderValueRange: function() {},
            _bindValueLogic: function() {
                this.after({
                    minChange: this._afterMinChange,
                    maxChange: this._afterMaxChange,
                    valueChange: this._afterValueChange
                })
            },
            _syncThumbPosition: function() {
                this._calculateFactor(), this._setPosition(this.get(i))
            },
            _calculateFactor: function() {
                var e = this.get("length"),
                    t = this.thumb.getStyle(this._key.dim),
                    i = this.get(n),
                    s = this.get(r);
                e = parseFloat(e) || 150, t = parseFloat(t) || 15, this._factor = (s - i) / (e - t)
            },
            _defThumbMoveFn: function(e) {
                e.source !== "set" && this.set(i, this._offsetToValue(e.offset))
            },
            _offsetToValue: function(e) {
                var t = s(e * this._factor) + this.get(n);
                return s(this._nearestValue(t))
            },
            _valueToOffset: function(e) {
                var t = s((e - this.get(n)) / this._factor);
                return t
            },
            getValue: function() {
                return this.get(i)
            },
            setValue: function(e) {
                return this.set(i, e)
            },
            _afterMinChange: function(e) {
                this._verifyValue(), this._syncThumbPosition()
            },
            _afterMaxChange: function(e) {
                this._verifyValue(), this._syncThumbPosition()
            },
            _verifyValue: function() {
                var e = this.get(i),
                    t = this._nearestValue(e);
                e !== t && this.set(i, t)
            },
            _afterValueChange: function(e) {
                var t = e.newVal;
                this._setPosition(t, {
                    source: "set"
                })
            },
            _setPosition: function(e, t) {
                this._uiMoveThumb(this._valueToOffset(e), t), this.thumb.set("aria-valuenow", e), this.thumb.set("aria-valuetext", e)
            },
            _validateNewMin: function(t) {
                return e.Lang.isNumber(t)
            },
            _validateNewMax: function(t) {
                return e.Lang.isNumber(t)
            },
            _setNewValue: function(t) {
                return e.Lang.isNumber(t) ? s(this._nearestValue(t)) : e.Attribute.INVALID_VALUE
            },
            _nearestValue: function(e) {
                var t = this.get(n),
                    i = this.get(r),
                    s;
                return s = i > t ? i : t, t = i > t ? t : i, i = s, e < t ? t : e > i ? i : e
            }
        },
        ATTRS: {
            min: {
                value: 0,
                validator: "_validateNewMin"
            },
            max: {
                value: 100,
                validator: "_validateNewMax"
            },
            minorStep: {
                value: 1
            },
            majorStep: {
                value: 10
            },
            value: {
                value: 0,
                setter: "_setNewValue"
            }
        }
    }, !0)
}, "@VERSION@", {
    requires: ["slider-base"]
});
YUI.add("stylesheet", function(e, t) {
    function v(t, r) {
        var o, a, f, l = {},
            h, p, m, g, y, b;
        if (!e.instanceOf(this, v)) return new v(t, r);
        if (t) {
            if (e.Node && t instanceof e.Node) a = t._node;
            else if (t.nodeName) a = t;
            else if (s(t)) {
                if (t && u[t]) return u[t];
                a = n.getElementById(t.replace(/^#/, d))
            }
            if (a && u[e.stamp(a)]) return u[e.stamp(a)]
        }
        if (!a || !/^(?:style|link)$/i.test(a.nodeName)) a = n.createElement("style"), a.type = "text/css";
        s(t) && (t.indexOf("{") != -1 ? a.styleSheet ? a.styleSheet.cssText = t : a.appendChild(n.createTextNode(t)) : r || (r = t));
        if (!a.parentNode || a.parentNode.nodeName.toLowerCase() !== "head") o = (a.ownerDocument || n).getElementsByTagName("head")[0], o.appendChild(a);
        f = a.sheet || a.styleSheet, h = f && "cssRules" in f ? "cssRules" : "rules", m = "deleteRule" in f ? function(e) {
            f.deleteRule(e)
        } : function(e) {
            f.removeRule(e)
        }, p = "insertRule" in f ? function(e, t, n) {
            f.insertRule(e + " {" + t + "}", n)
        } : function(e, t, n) {
            f.addRule(e, t, n)
        };
        for (g = f[h].length - 1; g >= 0; --g) y = f[h][g], b = y.selectorText, l[b] ? (l[b].style.cssText += ";" + y.style.cssText, m(g)) : l[b] = y;
        v.register(e.stamp(a), this), r && v.register(r, this), e.mix(this, {
            getId: function() {
                return e.stamp(a)
            },
            enable: function() {
                return f.disabled = !1, this
            },
            disable: function() {
                return f.disabled = !0, this
            },
            isEnabled: function() {
                return !f.disabled
            },
            set: function(e, t) {
                var n = l[e],
                    r = e.split(/\s*,\s*/),
                    i, s;
                if (r.length > 1) {
                    for (i = r.length - 1; i >= 0; --i) this.set(r[i], t);
                    return this
                }
                return v.isValidSelector(e) ? (n ? n.style.cssText = v.toCssText(t, n.style.cssText) : (s = f[h].length, t = v.toCssText(t), t && (p(e, t, s), l[e] = f[h][s])), this) : this
            },
            unset: function(t, n) {
                var r = l[t],
                    s = t.split(/\s*,\s*/),
                    o = !n,
                    u, a;
                if (s.length > 1) {
                    for (a = s.length - 1; a >= 0; --a) this.unset(s[a], n);
                    return this
                }
                if (r) {
                    if (!o) {
                        n = e.Array(n), i.cssText = r.style.cssText;
                        for (a = n.length - 1; a >= 0; --a) c(i, n[a]);
                        i.cssText ? r.style.cssText = i.cssText : o = !0
                    }
                    if (o) {
                        u = f[h];
                        for (a = u.length - 1; a >= 0; --a)
                            if (u[a] === r) {
                                delete l[t], m(a);
                                break
                            }
                    }
                }
                return this
            },
            getCssText: function(e) {
                var t, n, r;
                if (s(e)) return t = l[e.split(/\s*,\s*/)[0]], t ? t.style.cssText : null;
                n = [];
                for (r in l) l.hasOwnProperty(r) && (t = l[r], n.push(t.selectorText + " {" + t.style.cssText + "}"));
                return n.join("\n")
            }
        })
    }
    var n = e.config.doc,
        r = n.createElement("p"),
        i = r.style,
        s = e.Lang.isString,
        o = {},
        u = {},
        a = "cssFloat" in i ? "cssFloat" : "styleFloat",
        f, l, c, h = "opacity",
        p = "float",
        d = "";
    l = h in i ? function(e) {
        e.opacity = d
    } : function(e) {
        e.filter = d
    }, i.border = "1px solid red", i.border = d, c = i.borderLeft ? function(e, t) {
        var n;
        t !== a && t.toLowerCase().indexOf(p) != -1 && (t = a);
        if (s(e[t])) switch (t) {
            case h:
            case "filter":
                l(e);
                break;
            case "font":
                e.font = e.fontStyle = e.fontVariant = e.fontWeight = e.fontSize = e.lineHeight = e.fontFamily = d;
                break;
            default:
                for (n in e) n.indexOf(t) === 0 && (e[n] = d)
        }
    } : function(e, t) {
        t !== a && t.toLowerCase().indexOf(p) != -1 && (t = a), s(e[t]) && (t === h ? l(e) : e[t] = d)
    }, f = function(t, s) {
        var o = t.styleFloat || t.cssFloat || t[p],
            u = e.Lang.trim,
            f;
        try {
            i.cssText = s || d
        } catch (l) {
            r = n.createElement("p"), i = r.style, i.cssText = s || d
        }
        o && !t[a] && (t = e.merge(t), delete t.styleFloat, delete t.cssFloat, delete t[p], t[a] = o);
        for (f in t)
            if (t.hasOwnProperty(f)) try {
                i[f] = u(t[f])
            } catch (c) {}
        return i.cssText
    }, e.mix(v, {
        toCssText: h in i ? f : function(t, n) {
            return h in t && (t = e.merge(t, {
                filter: "alpha(opacity=" + t.opacity * 100 + ")"
            }), delete t.opacity), f(t, n)
        },
        register: function(e, t) {
            return !!(e && t instanceof v && !u[e] && (u[e] = t))
        },
        isValidSelector: function(e) {
            var t = !1;
            return e && s(e) && (o.hasOwnProperty(e) || (o[e] = !/\S/.test(e.replace(/\s+|\s*[+~>]\s*/g, " ").replace(/([^ ])\[.*?\]/g, "$1").replace(/([^ ])::?[a-z][a-z\-]+[a-z](?:\(.*?\))?/ig, "$1").replace(/(?:^| )[a-z0-6]+/ig, " ").replace(/\\./g, d).replace(/[.#]\w[\w\-]*/g, d))), t = o[e]), t
        }
    }, !0), e.StyleSheet = v
}, "@VERSION@", {
    requires: ["yui-base"]
});
YUI.add("substitute", function(e, t) {
    var n = e.Lang,
        r = "dump",
        i = " ",
        s = "{",
        o = "}",
        u = /(~-(\d+)-~)/g,
        a = /\{LBRACE\}/g,
        f = /\{RBRACE\}/g,
        l = function(t, l, c, h) {
            var p, d, v, m, g, y, b = [],
                w, E, S = t.length;
            for (;;) {
                p = t.lastIndexOf(s, S);
                if (p < 0) break;
                d = t.indexOf(o, p);
                if (p + 1 >= d) break;
                w = t.substring(p + 1, d), m = w, y = null, v = m.indexOf(i), v > -1 && (y = m.substring(v + 1), m = m.substring(0, v)), g = l[m], c && (g = c(m, g, y)), n.isObject(g) ? e.dump ? n.isArray(g) ? g = e.dump(g, parseInt(y, 10)) : (y = y || "", E = y.indexOf(r), E > -1 && (y = y.substring(4)), g.toString === Object.prototype.toString || E > -1 ? g = e.dump(g, parseInt(y, 10)) : g = g.toString()) : g = g.toString() : n.isUndefined(g) && (g = "~-" + b.length + "-~", b.push(w)), t = t.substring(0, p) + g + t.substring(d + 1), h || (S = p - 1)
            }
            return t.replace(u, function(e, t, n) {
                return s + b[parseInt(n, 10)] + o
            }).replace(a, s).replace(f, o)
        };
    e.substitute = l, n.substitute = l
}, "@VERSION@", {
    requires: ["yui-base"],
    optional: ["dump"]
});
YUI.add("tabview-base", function(e, t) {
    var n = e.ClassNameManager.getClassName,
        r = "tabview",
        i = "tab",
        s = "panel",
        o = "selected",
        u = {},
        a = ".",
        f = function() {
            this.init.apply(this, arguments)
        };
    f.NAME = "tabviewBase", f._classNames = {
        tabview: n(r),
        tabviewPanel: n(r, s),
        tabviewList: n(r, "list"),
        tab: n(i),
        tabLabel: n(i, "label"),
        tabPanel: n(i, s),
        selectedTab: n(i, o),
        selectedPanel: n(i, s, o)
    }, f._queries = {
        tabview: a + f._classNames.tabview,
        tabviewList: "> ul",
        tab: "> ul > li",
        tabLabel: "> ul > li > a",
        tabviewPanel: "> div",
        tabPanel: "> div > div",
        selectedTab: "> ul > " + a + f._classNames.selectedTab,
        selectedPanel: "> div " + a + f._classNames.selectedPanel
    }, e.mix(f.prototype, {
        init: function(t) {
            t = t || u, this._node = t.host || e.one(t.node), this.refresh()
        },
        initClassNames: function(t) {
            var n = e.TabviewBase._classNames;
            e.Object.each(e.TabviewBase._queries, function(e, r) {
                if (n[r]) {
                    var i = this.all(e);
                    t !== undefined && (i = i.item(t)), i && i.addClass(n[r])
                }
            }, this._node), this._node.addClass(n.tabview)
        },
        _select: function(t) {
            var n = e.TabviewBase._classNames,
                r = e.TabviewBase._queries,
                i = this._node,
                s = i.one(r.selectedTab),
                o = i.one(r.selectedPanel),
                u = i.all(r.tab).item(t),
                a = i.all(r.tabPanel).item(t);
            s && s.removeClass(n.selectedTab), o && o.removeClass(n.selectedPanel), u && u.addClass(n.selectedTab), a && a.addClass(n.selectedPanel)
        },
        initState: function() {
            var t = e.TabviewBase._queries,
                n = this._node,
                r = n.one(t.selectedTab),
                i = r ? n.all(t.tab).indexOf(r) : 0;
            this._select(i)
        },
        _scrubTextNodes: function() {
            this._node.one(e.TabviewBase._queries.tabviewList).get("childNodes").each(function(e) {
                e.get("nodeType") === 3 && e.remove()
            })
        },
        refresh: function() {
            this._scrubTextNodes(), this.initClassNames(), this.initState(), this.initEvents()
        },
        tabEventName: "click",
        initEvents: function() {
            this._node.delegate(this.tabEventName, this.onTabEvent, e.TabviewBase._queries.tab, this)
        },
        onTabEvent: function(t) {
            t.preventDefault(), this._select(this._node.all(e.TabviewBase._queries.tab).indexOf(t.currentTarget))
        },
        destroy: function() {
            this._node.detach(this.tabEventName)
        }
    }), e.TabviewBase = f
}, "@VERSION@", {
    requires: ["node-event-delegate", "classnamemanager"]
});
YUI.add("tabview", function(e, t) {
    var n = ".",
        r = e.Base.create("tabView", e.Widget, [e.WidgetParent], {
            _afterChildAdded: function() {
                this.get("contentBox").focusManager.refresh()
            },
            _defListNodeValueFn: function() {
                var t = e.Node.create(this.LIST_TEMPLATE);
                return t.addClass(e.TabviewBase._classNames.tabviewList), t
            },
            _defPanelNodeValueFn: function() {
                var t = e.Node.create(this.PANEL_TEMPLATE);
                return t.addClass(e.TabviewBase._classNames.tabviewPanel), t
            },
            _afterChildRemoved: function(e) {
                var t = e.index,
                    n = this.get("selection");
                n || (n = this.item(t - 1) || this.item(0), n && n.set("selected", 1)), this.get("contentBox").focusManager.refresh()
            },
            _initAria: function(t) {
                var n = t.one(e.TabviewBase._queries.tabviewList);
                n && n.setAttrs({
                    role: "tablist"
                })
            },
            bindUI: function() {
                this.get("contentBox").plug(e.Plugin.NodeFocusManager, {
                    descendants: n + e.TabviewBase._classNames.tabLabel,
                    keys: {
                        next: "down:39",
                        previous: "down:37"
                    },
                    circular: !0
                }), this.after("render", this._setDefSelection), this.after("addChild", this._afterChildAdded), this.after("removeChild", this._afterChildRemoved)
            },
            renderUI: function() {
                var e = this.get("contentBox");
                this._renderListBox(e), this._renderPanelBox(e), this._childrenContainer = this.get("listNode"), this._renderTabs(e), this._initAria(e)
            },
            _setDefSelection: function() {
                var e = this.get("selection") || this.item(0);
                this.some(function(t) {
                    if (t.get("selected")) return e = t, !0
                }), e && (this.set("selection", e), e.set("selected", 1))
            },
            _renderListBox: function(e) {
                var t = this.get("listNode");
                t.inDoc() || e.append(t)
            },
            _renderPanelBox: function(e) {
                var t = this.get("panelNode");
                t.inDoc() || e.append(t)
            },
            _renderTabs: function(t) {
                var r = e.TabviewBase._classNames,
                    i = e.TabviewBase._queries,
                    s = t.all(i.tab),
                    o = this.get("panelNode"),
                    u = o ? this.get("panelNode").get("children") : null,
                    a = this;
                s && (s.addClass(r.tab), t.all(i.tabLabel).addClass(r.tabLabel), t.all(i.tabPanel).addClass(r.tabPanel), s.each(function(e, t) {
                    var i = u ? u.item(t) : null;
                    a.add({
                        boundingBox: e,
                        contentBox: e.one(n + r.tabLabel),
                        panelNode: i
                    })
                }))
            }
        }, {
            ATTRS: {
                defaultChildType: {
                    value: "Tab"
                },
                listNode: {
                    setter: function(t) {
                        return t = e.one(t), t && t.addClass(e.TabviewBase._classNames.tabviewList), t
                    },
                    valueFn: "_defListNodeValueFn"
                },
                panelNode: {
                    setter: function(t) {
                        return t = e.one(t), t && t.addClass(e.TabviewBase._classNames.tabviewPanel), t
                    },
                    valueFn: "_defPanelNodeValueFn"
                },
                tabIndex: {
                    value: null
                }
            },
            HTML_PARSER: {
                listNode: function(t) {
                    return t.one(e.TabviewBase._queries.tabviewList)
                },
                panelNode: function(t) {
                    return t.one(e.TabviewBase._queries.tabviewPanel)
                }
            },
            LIST_TEMPLATE: "<ul></ul>",
            PANEL_TEMPLATE: "<div></div>"
        });
    r.prototype.LIST_TEMPLATE = r.LIST_TEMPLATE, r.prototype.PANEL_TEMPLATE = r.PANEL_TEMPLATE, e.TabView = r, e.Tab = e.Base.create("tab", e.Widget, [e.WidgetChild], {
        BOUNDING_TEMPLATE: "<li></li>",
        CONTENT_TEMPLATE: "<a></a>",
        PANEL_TEMPLATE: "<div></div>",
        _uiSetSelectedPanel: function(t) {
            this.get("panelNode").toggleClass(e.TabviewBase._classNames.selectedPanel, t)
        },
        _afterTabSelectedChange: function(e) {
            this._uiSetSelectedPanel(e.newVal)
        },
        _afterParentChange: function(e) {
            e.newVal ? this._add() : this._remove()
        },
        _initAria: function() {
            var t = this.get("contentBox"),
                n = t.get("id"),
                r = this.get("panelNode");
            n || (n = e.guid(), t.set("id", n)), t.set("role", "tab"), t.get("parentNode").set("role", "presentation"), r.setAttrs({
                role: "tabpanel",
                "aria-labelledby": n
            })
        },
        syncUI: function() {
            var t = e.TabviewBase._classNames;
            this.get("boundingBox").addClass(t.tab), this.get("contentBox").addClass(t.tabLabel), this.set("label", this.get("label")), this.set("content", this.get("content")), this._uiSetSelectedPanel(this.get("selected"))
        },
        bindUI: function() {
            this.after("selectedChange", this._afterTabSelectedChange), this.after("parentChange", this._afterParentChange)
        },
        renderUI: function() {
            this._renderPanel(), this._initAria()
        },
        _renderPanel: function() {
            this.get("parent").get("panelNode").appendChild(this.get("panelNode"))
        },
        _add: function() {
            var e = this.get("parent").get("contentBox"),
                t = e.get("listNode"),
                n = e.get("panelNode");
            t && t.appendChild(this.get("boundingBox")), n && n.appendChild(this.get("panelNode"))
        },
        _remove: function() {
            this.get("boundingBox").remove(), this.get("panelNode").remove()
        },
        _onActivate: function(e) {
            e.target === this && (e.domEvent.preventDefault(), e.target.set("selected", 1))
        },
        initializer: function() {
            this.publish(this.get("triggerEvent"), {
                defaultFn: this._onActivate
            })
        },
        _defLabelGetter: function() {
            return this.get("contentBox").getHTML()
        },
        _defLabelSetter: function(e) {
            var t = this.get("contentBox");
            return t.getHTML() !== e && t.setHTML(e), e
        },
        _defContentSetter: function(e) {
            var t = this.get("panelNode");
            return t.getHTML() !== e && t.setHTML(e), e
        },
        _defContentGetter: function() {
            return this.get("panelNode").getHTML()
        },
        _defPanelNodeValueFn: function() {
            var t = e.TabviewBase._classNames,
                n = this.get("contentBox").get("href") || "",
                r = this.get("parent"),
                i = n.indexOf("#"),
                s;
            return n = n.substr(i), n.charAt(0) === "#" && (s = e.one(n), s && s.addClass(t.tabPanel)), !s && r && (s = r.get("panelNode").get("children").item(this.get("index"))), s || (s = e.Node.create(this.PANEL_TEMPLATE), s.addClass(t.tabPanel)), s
        }
    }, {
        ATTRS: {
            triggerEvent: {
                value: "click"
            },
            label: {
                setter: "_defLabelSetter",
                getter: "_defLabelGetter"
            },
            content: {
                setter: "_defContentSetter",
                getter: "_defContentGetter"
            },
            panelNode: {
                setter: function(t) {
                    return t = e.one(t), t && t.addClass(e.TabviewBase._classNames.tabPanel), t
                },
                valueFn: "_defPanelNodeValueFn"
            },
            tabIndex: {
                value: null,
                validator: "_validTabIndex"
            }
        },
        HTML_PARSER: {
            selected: function() {
                var t = this.get("boundingBox").hasClass(e.TabviewBase._classNames.selectedTab) ? 1 : 0;
                return t
            }
        }
    })
}, "@VERSION@", {
    requires: ["widget", "widget-parent", "widget-child", "tabview-base", "node-pluginhost", "node-focusmanager"],
    skinnable: !0
});
YUI.add("template-base", function(e, t) {
    function n(t, n) {
        this.defaults = n, this.engine = t || e.Template.Micro, this.engine || e.error("No template engine loaded.")
    }
    n._registry = {}, n.register = function(e, t) {
        return n._registry[e] = t, t
    }, n.get = function(e) {
        return n._registry[e]
    }, n.render = function(t, r, i) {
        var s = n._registry[t],
            o = "";
        return s ? o = s(r, i) : e.error('Unregistered template: "' + t + '"'), o
    }, n.prototype = {
        compile: function(t, n) {
            return n = n ? e.merge(this.defaults, n) : this.defaults, this.engine.compile(t, n)
        },
        precompile: function(t, n) {
            return n = n ? e.merge(this.defaults, n) : this.defaults, this.engine.precompile(t, n)
        },
        render: function(t, n, r) {
            return r = r ? e.merge(this.defaults, r) : this.defaults, this.engine.render ? this.engine.render(t, n, r) : this.engine.compile(t, r)(n, r)
        },
        revive: function(t, n) {
            return n = n ? e.merge(this.defaults, n) : this.defaults, this.engine.revive ? this.engine.revive(t, n) : t
        }
    }, e.Template = e.Template ? e.mix(n, e.Template) : n
}, "@VERSION@", {
    requires: ["yui-base"]
});
YUI.add("template-micro", function(e, t) {
    var n = e.namespace("Template.Micro");
    n.options = {
        code: /<%([\s\S]+?)%>/g,
        escapedOutput: /<%=([\s\S]+?)%>/g,
        rawOutput: /<%==([\s\S]+?)%>/g,
        stringEscape: /\\|'|\r|\n|\t|\u2028|\u2029/g,
        stringReplace: {
            "\\": "\\\\",
            "'": "\\'",
            "\r": "\\r",
            "\n": "\\n",
            "    ": "\\t",
            "\u2028": "\\u2028",
            "\u2029": "\\u2029"
        }
    }, n.compile = function(t, r) {
        var i = [],
            s = "\uffff",
            o = "\ufffe",
            u;
        return r = e.merge(n.options, r), u = "var $b='', $v=function (v){return v || v === 0 ? v : $b;}, $t='" + t.replace(/\ufffe|\uffff/g, "").replace(r.rawOutput, function(e, t) {
            return o + (i.push("'+\n$v(" + t + ")+\n'") - 1) + s
        }).replace(r.escapedOutput, function(e, t) {
            return o + (i.push("'+\n$e($v(" + t + "))+\n'") - 1) + s
        }).replace(r.code, function(e, t) {
            return o + (i.push("';\n" + t + "\n$t+='") - 1) + s
        }).replace(r.stringEscape, function(e) {
            return r.stringReplace[e] || ""
        }).replace(/\ufffe(\d+)\uffff/g, function(e, t) {
            return i[parseInt(t, 10)]
        }).replace(/\n\$t\+='';\n/g, "\n") + "';\nreturn $t;", r.precompile ? "function (Y, $e, data) {\n" + u + "\n}" : this.revive(new Function("Y", "$e", "data", u))
    }, n.precompile = function(e, t) {
        return t || (t = {}), t.precompile = !0, this.compile(e, t)
    }, n.render = function(e, t, n) {
        return this.compile(e, n)(t)
    }, n.revive = function(t) {
        return function(n) {
            return n || (n = {}), t.call(n, e, e.Escape.html, n)
        }
    }
}, "@VERSION@", {
    requires: ["escape"]
});
YUI.add("timers", function(e, t) {
    function i(e) {
        return s
    }

    function s(e) {
        this.capacity = this.snap(e), this.length = 0, this.front = 0, this.initialize()
    }

    function o(e, t, n, r, i) {
        for (var s = 0; s < i; ++s) n[s + r] = e[s + t]
    }

    function u(e) {
        return e >>>= 0, e -= 1, e |= e >> 1, e |= e >> 2, e |= e >> 4, e |= e >> 8, e |= e >> 16, e + 1
    }

    function v() {
        while (a.length > 0) {
            var e = a.shift();
            try {
                e.call()
            } catch (t) {
                if (d) throw l(), t;
                setTimeout(function() {
                    throw t
                }, 0)
            }
        }
        f = !1
    }

    function y(e) {
        d && p.domain && (e = p.domain.bind(e)), a.push(e), f || (l(), f = !0)
    }

    function b(e) {
        var t;
        return b._asynchronizer(function() {
            t || e()
        }), {
            cancel: function() {
                t = 1
            }
        }
    }
    var n = {},
        r = e.config.global;
    "use strict", n.exports = s, s.prototype.push = function(e) {
        var t = this.length;
        this.capacity <= t && this.grow(this.snap(this.capacity * this.growFactor));
        var n = this.front + t & this.capacity - 1;
        this[n] = e, this.length = t + 1
    }, s.prototype.shift = function() {
        var e = this.front,
            t = this[e];
        return this[e] = void 0, this.front = e + 1 & this.capacity - 1, this.length--, t
    }, s.prototype.grow = function(e) {
        var t = this.front,
            n = this.capacity,
            r = new Array(n),
            i = this.length;
        o(this, 0, r, 0, n), this.capacity = e, this.initialize(), this.front = 0;
        if (t + i <= n) o(r, t, this, 0, i);
        else {
            var s = i - (t + i & n - 1);
            o(r, t, this, 0, s), o(r, 0, this, s, i - s)
        }
    }, s.prototype.initialize = function() {
        var e = this.capacity;
        for (var t = 0; t < e; ++t) this[t] = void 0
    }, s.prototype.snap = function(e) {
        return typeof e != "number" ? this.minCapacity : u(Math.min(this.maxCapacity, Math.max(this.minCapacity, e)))
    }, s.prototype.maxCapacity = 1 << 30 | 0, s.prototype.minCapacity = 16, s.prototype.growFactor = 8, "use strict";
    var s = i("./queue"),
        a = new s(1024),
        f = !1,
        l = void 0,
        c = typeof setImmediate == "function",
        h, p = r.process,
        d = !!p && {}.toString.call(p) === "[object process]";
    if (d) l = function() {
        var e = p.domain;
        e && (h = h || (1, i)("domain"), h.active = p.domain = null), f && c ? setImmediate(v) : p.nextTick(v), e && (h.active = p.domain = e)
    };
    else if (c) l = function() {
        setImmediate(v)
    };
    else if (typeof MessageChannel != "undefined") {
        var m = new MessageChannel;
        m.port1.onmessage = function() {
            l = g, m.port1.onmessage = v, v()
        };
        var g = function() {
            m.port2.postMessage(0)
        };
        l = function() {
            setTimeout(v, 0), g()
        }
    } else l = function() {
        setTimeout(v, 0)
    };
    n.exports = y, b._asynchronizer = y, b._impl = "asap", e.soon = b
}, "@VERSION@", {
    requires: ["yui-base"]
});
YUI.add("transition-timer", function(e, t) {
    var n = e.Transition;
    e.mix(n.prototype, {
        _start: function() {
            n.useNative ? this._runNative() : this._runTimer()
        },
        _runTimer: function() {
            var t = this;
            t._initAttrs(), n._running[e.stamp(t)] = t, t._startTime = new Date, n._startTimer()
        },
        _endTimer: function() {
            var t = this;
            delete n._running[e.stamp(t)], t._startTime = null
        },
        _runFrame: function() {
            var e = new Date - this._startTime;
            this._runAttrs(e)
        },
        _runAttrs: function(t) {
            var r = this,
                i = r._node,
                s = r._config,
                o = e.stamp(i),
                u = n._nodeAttrs[o],
                a = n.behaviors,
                f = !1,
                l = !1,
                c, h, p, d, v, m, g, y, b;
            for (h in u)
                if ((p = u[h]) && p.transition === r) {
                    g = p.duration, m = p.delay, v = (t - m) / 1e3, y = t, c = {
                        type: "propertyEnd",
                        propertyName: h,
                        config: s,
                        elapsedTime: v
                    }, d = b in a && "set" in a[b] ? a[b].set : n.DEFAULT_SETTER, f = y >= g, y > g && (y = g);
                    if (!m || t >= m) d(r, h, p.from, p.to, y - m, g - m, p.easing, p.unit), f && (delete u[h], r._count--, s[h] && s[h].on && s[h].on.end && s[h].on.end.call(e.one(i), c), !l && r._count <= 0 && (l = !0, r._end(v), r._endTimer()))
                }
        },
        _initAttrs: function() {
            var t = this,
                r = n.behaviors,
                i = e.stamp(t._node),
                s = n._nodeAttrs[i],
                o, u, a, f, l, c, h, p, d, v, m;
            for (c in s)(o = s[c]) && o.transition === t && (u = o.duration * 1e3, a = o.delay * 1e3, f = o.easing, l = o.value, c in t._node.style || c in e.DOM.CUSTOM_STYLES ? (v = c in r && "get" in r[c] ? r[c].get(t, c) : n.DEFAULT_GETTER(t, c), p = n.RE_UNITS.exec(v), h = n.RE_UNITS.exec(l), v = p ? p[1] : v, m = h ? h[1] : l, d = h ? h[2] : p ? p[2] : "", !d && n.RE_DEFAULT_UNIT.test(c) && (d = n.DEFAULT_UNIT), typeof f == "string" && (f.indexOf("cubic-bezier") > -1 ? f = f.substring(13, f.length - 1).split(",") : n.easings[f] && (f = n.easings[f])), o.from = Number(v), o.to = Number(m), o.unit = d, o.easing = f, o.duration = u + a, o.delay = a) : (delete s[c], t._count--))
        },
        destroy: function() {
            this.detachAll(), this._node = null
        }
    }, !0), e.mix(e.Transition, {
        _runtimeAttrs: {},
        RE_DEFAULT_UNIT: /^width|height|top|right|bottom|left|margin.*|padding.*|border.*$/i,
        DEFAULT_UNIT: "px",
        intervalTime: 20,
        behaviors: {
            left: {
                get: function(t, n) {
                    return e.DOM._getAttrOffset(t._node, n)
                }
            }
        },
        DEFAULT_SETTER: function(t, r, i, s, o, u, a, f) {
            i = Number(i), s = Number(s);
            var l = t._node,
                c = n.cubicBezier(a, o / u);
            c = i + c[0] * (s - i);
            if (l) {
                if (r in l.style || r in e.DOM.CUSTOM_STYLES) f = f || "", e.DOM.setStyle(l, r, c + f)
            } else t._end()
        },
        DEFAULT_GETTER: function(t, n) {
            var r = t._node,
                i = "";
            if (n in r.style || n in e.DOM.CUSTOM_STYLES) i = e.DOM.getComputedStyle(r, n);
            return i
        },
        _startTimer: function() {
            n._timer || (n._timer = setInterval(n._runFrame, n.intervalTime))
        },
        _stopTimer: function() {
            clearInterval(n._timer), n._timer = null
        },
        _runFrame: function() {
            var e = !0,
                t;
            for (t in n._running) n._running[t]._runFrame && (e = !1, n._running[t]._runFrame());
            e && n._stopTimer()
        },
        cubicBezier: function(e, t) {
            var n = 0,
                r = 0,
                i = e[0],
                s = e[1],
                o = e[2],
                u = e[3],
                a = 1,
                f = 0,
                l = a - 3 * o + 3 * i - n,
                c = 3 * o - 6 * i + 3 * n,
                h = 3 * i - 3 * n,
                p = n,
                d = f - 3 * u + 3 * s - r,
                v = 3 * u - 6 * s + 3 * r,
                m = 3 * s - 3 * r,
                g = r,
                y = ((l * t + c) * t + h) * t + p,
                b = ((d * t + v) * t + m) * t + g;
            return [y, b]
        },
        easings: {
            ease: [.25, 0, 1, .25],
            linear: [0, 0, 1, 1],
            "ease-in": [.42, 0, 1, 1],
            "ease-out": [0, 0, .58, 1],
            "ease-in-out": [.42, 0, .58, 1]
        },
        _running: {},
        _timer: null,
        RE_UNITS: /^(-?\d*\.?\d*){1}(em|ex|px|in|cm|mm|pt|pc|%)*$/
    }, !0), n.behaviors.top = n.behaviors.bottom = n.behaviors.right = n.behaviors.left, e.Transition = n
}, "@VERSION@", {
    requires: ["transition"]
});
YUI.add("transition", function(e, t) {
    var n = "",
        r = "",
        i = e.config.doc,
        s = "documentElement",
        o = i[s].style,
        u = "transition",
        a = "transitionProperty",
        f, l, c, h, p, d, v = {},
        m = ["Webkit", "Moz"],
        g = {
            Webkit: "webkitTransitionEnd"
        },
        y = function() {
            this.init.apply(this, arguments)
        };
    y._TRANSFORM = "transform", y._toCamel = function(e) {
        return e = e.replace(/-([a-z])/gi, function(e, t) {
            return t.toUpperCase()
        }), e
    }, y._toHyphen = function(e) {
        return e = e.replace(/([A-Z]?)([a-z]+)([A-Z]?)/g, function(e, t, n, r) {
            var i = (t ? "-" + t.toLowerCase() : "") + n;
            return r && (i += "-" + r.toLowerCase()), i
        }), e
    }, y.SHOW_TRANSITION = "fadeIn", y.HIDE_TRANSITION = "fadeOut", y.useNative = !1, "transition" in o && "transitionProperty" in o && "transitionDuration" in o && "transitionTimingFunction" in o && "transitionDelay" in o ? (y.useNative = !0, y.supported = !0) : e.Array.each(m, function(e) {
        var t = e + "Transition";
        t in i[s].style && (n = e, r = y._toHyphen(e) + "-", y.useNative = !0, y.supported = !0, y._VENDOR_PREFIX = e)
    }), typeof o.transform == "undefined" && e.Array.each(m, function(e) {
        var t = e + "Transform";
        typeof o[t] != "undefined" && (y._TRANSFORM = t)
    }), n && (u = n + "Transition", a = n + "TransitionProperty"), f = r + "transition-property", l = r + "transition-duration", c = r + "transition-timing-function", h = r + "transition-delay", p = "transitionend", d = "on" + n.toLowerCase() + "transitionend", p = g[n] || p, y.fx = {}, y.toggles = {}, y._hasEnd = {}, y._reKeywords = /^(?:node|duration|iterations|easing|delay|on|onstart|onend)$/i, e.Node.DOM_EVENTS[p] = 1, y.NAME = "transition", y.DEFAULT_EASING = "ease", y.DEFAULT_DURATION = .5, y.DEFAULT_DELAY = 0, y._nodeAttrs = {}, y.prototype = {
        constructor: y,
        init: function(e, t) {
            var n = this;
            return n._node = e, !n._running && t && (n._config = t, e._transition = n, n._duration = "duration" in t ? t.duration : n.constructor.DEFAULT_DURATION, n._delay = "delay" in t ? t.delay : n.constructor.DEFAULT_DELAY, n._easing = t.easing || n.constructor.DEFAULT_EASING, n._count = 0, n._running = !1), n
        },
        addProperty: function(t, n) {
            var r = this,
                i = this._node,
                s = e.stamp(i),
                o = e.one(i),
                u = y._nodeAttrs[s],
                a, f, l, c, h;
            u || (u = y._nodeAttrs[s] = {}), c = u[t], n && n.value !== undefined ? h = n.value : n !== undefined && (h = n, n = v), typeof h == "function" && (h = h.call(o, o)), c && c.transition && c.transition !== r && c.transition._count--, r._count++, l = (typeof n.duration != "undefined" ? n.duration : r._duration) || 1e-4, u[t] = {
                value: h,
                duration: l,
                delay: typeof n.delay != "undefined" ? n.delay : r._delay,
                easing: n.easing || r._easing,
                transition: r
            }, a = e.DOM.getComputedStyle(i, t), f = typeof h == "string" ? a : parseFloat(a), y.useNative && f === h && setTimeout(function() {
                r._onNativeEnd.call(i, {
                    propertyName: t,
                    elapsedTime: l
                })
            }, l * 1e3)
        },
        removeProperty: function(t) {
            var n = this,
                r = y._nodeAttrs[e.stamp(n._node)];
            r && r[t] && (delete r[t], n._count--)
        },
        initAttrs: function(t) {
            var n, r = this._node;
            t.transform && !t[y._TRANSFORM] && (t[y._TRANSFORM] = t.transform, delete t.transform);
            for (n in t) t.hasOwnProperty(n) && !y._reKeywords.test(n) && (this.addProperty(n, t[n]), r.style[n] === "" && e.DOM.setStyle(r, n, e.DOM.getComputedStyle(r, n)))
        },
        run: function(t) {
            var n = this,
                r = n._node,
                i = n._config,
                s = {
                    type: "transition:start",
                    config: i
                };
            return n._running || (n._running = !0, i.on && i.on.start && i.on.start.call(e.one(r), s), n.initAttrs(n._config), n._callback = t, n._start()), n
        },
        _start: function() {
            this._runNative()
        },
        _prepDur: function(e) {
            return e = parseFloat(e) * 1e3, e + "ms"
        },
        _runNative: function() {
            var t = this,
                n = t._node,
                r = e.stamp(n),
                i = n.style,
                s = n.ownerDocument.defaultView.getComputedStyle(n),
                o = y._nodeAttrs[r],
                u = "",
                a = s[y._toCamel(f)],
                d = f + ": ",
                v = l + ": ",
                m = c + ": ",
                g = h + ": ",
                b, w, E;
            a !== "all" && (d += a + ",", v += s[y._toCamel(l)] + ",", m += s[y._toCamel(c)] + ",", g += s[y._toCamel(h)] + ",");
            for (E in o) b = y._toHyphen(E), w = o[E], (w = o[E]) && w.transition === t && (E in n.style ? (v += t._prepDur(w.duration) + ",", g += t._prepDur(w.delay) + ",", m += w.easing + ",", d += b + ",", u += b + ": " + w.value + "; ") : this.removeProperty(E));
            d = d.replace(/,$/, ";"), v = v.replace(/,$/, ";"), m = m.replace(/,$/, ";"), g = g.replace(/,$/, ";"), y._hasEnd[r] || (n.addEventListener(p, t._onNativeEnd, ""), y._hasEnd[r] = !0), i.cssText += d + v + m + g + u
        },
        _end: function(t) {
            var n = this,
                r = n._node,
                i = n._callback,
                s = n._config,
                o = {
                    type: "transition:end",
                    config: s,
                    elapsedTime: t
                },
                u = e.one(r);
            n._running = !1, n._callback = null, r && (s.on && s.on.end ? setTimeout(function() {
                s.on.end.call(u, o), i && i.call(u, o)
            }, 1) : i && setTimeout(function() {
                i.call(u, o)
            }, 1))
        },
        _endNative: function(e) {
            var t = this._node,
                n = t.ownerDocument.defaultView.getComputedStyle(t, "")[y._toCamel(f)];
            e = y._toHyphen(e), typeof n == "string" && (n = n.replace(new RegExp("(?:^|,\\s)" + e + ",?"), ","), n = n.replace(/^,|,$/, ""), t.style[u] = n)
        },
        _onNativeEnd: function(t) {
            var n = this,
                r = e.stamp(n),
                i = t,
                s = y._toCamel(i.propertyName),
                o = i.elapsedTime,
                u = y._nodeAttrs[r],
                f = u[s],
                l = f ? f.transition : null,
                c, h;
            l && (l.removeProperty(s), l._endNative(s), h = l._config[s], c = {
                type: "propertyEnd",
                propertyName: s,
                elapsedTime: o,
                config: h
            }, h && h.on && h.on.end && h.on.end.call(e.one(n), c), l._count <= 0 && (l._end(o), n.style[a] = ""))
        },
        destroy: function() {
            var e = this,
                t = e._node;
            t && (t.removeEventListener(p, e._onNativeEnd, !1), e._node = null)
        }
    }, e.Transition = y, e.TransitionNative = y, e.Node.prototype.transition = function(t, n, r) {
        var i = y._nodeAttrs[e.stamp(this._node)],
            s = i ? i.transition || null : null,
            o, u;
        if (typeof t == "string") {
            typeof n == "function" && (r = n, n = null), o = y.fx[t];
            if (n && typeof n == "object") {
                n = e.clone(n);
                for (u in o) o.hasOwnProperty(u) && (u in n || (n[u] = o[u]))
            } else n = o
        } else r = n, n = t;
        return s && !s._running ? s.init(this, n) : s = new y(this._node, n), s.run(r), this
    }, e.Node.prototype.show = function(t, n, r) {
        return this._show(), t && e.Transition && (typeof t != "string" && !t.push && (typeof n == "function" && (r = n, n = t), t = y.SHOW_TRANSITION), this.transition(t, n, r)), this
    }, e.NodeList.prototype.show = function(t, n, r) {
        var i = this._nodes,
            s = 0,
            o;
        while (o = i[s++]) e.one(o).show(t, n, r);
        return this
    };
    var b = function(e, t, n) {
        return function() {
            t && t.call(e), n && typeof n == "function" && n.apply(e._node, arguments)
        }
    };
    e.Node.prototype.hide = function(t, n, r) {
            return t && e.Transition ? (typeof n == "function" && (r = n, n = null), r = b(this, this._hide, r), typeof t != "string" && !t.push && (typeof n == "function" && (r = n, n = t), t = y.HIDE_TRANSITION), this.transition(t, n, r)) : this._hide(), this
        }, e.NodeList.prototype.hide = function(t, n, r) {
            var i = this._nodes,
                s = 0,
                o;
            while (o = i[s++]) e.one(o).hide(t, n, r);
            return this
        }, e.NodeList.prototype
        .transition = function(t, n, r) {
            var i = this._nodes,
                s = this.size(),
                o = 0,
                r = r === !0,
                u;
            while (u = i[o++]) o < s && r ? e.one(u).transition(t) : e.one(u).transition(t, n);
            return this
        }, e.Node.prototype.toggleView = function(t, n, r) {
            this._toggles = this._toggles || [], r = arguments[arguments.length - 1];
            if (typeof t != "string") {
                n = t, this._toggleView(n, r);
                return
            }
            return typeof n == "function" && (n = undefined), typeof n == "undefined" && t in this._toggles && (n = !this._toggles[t]), n = n ? 1 : 0, n ? this._show() : r = b(this, this._hide, r), this._toggles[t] = n, this.transition(e.Transition.toggles[t][n], r), this
        }, e.NodeList.prototype.toggleView = function(t, n, r) {
            var i = this._nodes,
                s = 0,
                o;
            while (o = i[s++]) o = e.one(o), o.toggleView.apply(o, arguments);
            return this
        }, e.mix(y.fx, {
            fadeOut: {
                opacity: 0,
                duration: .5,
                easing: "ease-out"
            },
            fadeIn: {
                opacity: 1,
                duration: .5,
                easing: "ease-in"
            },
            sizeOut: {
                height: 0,
                width: 0,
                duration: .75,
                easing: "ease-out"
            },
            sizeIn: {
                height: function(e) {
                    return e.get("scrollHeight") + "px"
                },
                width: function(e) {
                    return e.get("scrollWidth") + "px"
                },
                duration: .5,
                easing: "ease-in",
                on: {
                    start: function() {
                        var e = this.getStyle("overflow");
                        e !== "hidden" && (this.setStyle("overflow", "hidden"), this._transitionOverflow = e)
                    },
                    end: function() {
                        this._transitionOverflow && (this.setStyle("overflow", this._transitionOverflow), delete this._transitionOverflow)
                    }
                }
            }
        }), e.mix(y.toggles, {
            size: ["sizeOut", "sizeIn"],
            fade: ["fadeOut", "fadeIn"]
        })
}, "@VERSION@", {
    requires: ["node-style"]
});
YUI.add("tree-labelable", function(e, t) {
    function n() {}

    function r(e, t) {
        this._serializable = this._serializable.concat("label"), "label" in t && (this.label = t.label)
    }
    n.prototype = {
        initializer: function() {
            this.nodeExtensions = this.nodeExtensions.concat(e.Tree.Node.Labelable)
        }
    }, e.Tree.Labelable = n, r.prototype = {
        label: ""
    }, e.Tree.Node.Labelable = r
}, "@VERSION@", {
    requires: ["tree"]
});
YUI.add("tree-node", function(e, t) {
    function n(t, n) {
        n || (n = {}), this.id = this._yuid = n.id || this.id || e.guid("treeNode-"), this.tree = t, this.children = n.children || [], this.data = n.data || {}, this.state = n.state || {}, n.canHaveChildren ? this.canHaveChildren = n.canHaveChildren : this.children.length && (this.canHaveChildren = !0), e.mix(this, n);
        for (var r = 0, i = this.children.length; r < i; r++) this.children[r].parent = this
    }
    n.prototype = {
        _isIndexStale: !0,
        _isYUITreeNode: !0,
        _serializable: ["canHaveChildren", "data", "id", "state"],
        append: function(e, t) {
            return this.tree.appendNode(this, e, t)
        },
        depth: function() {
            if (this.isRoot()) return 0;
            var e = 0,
                t = this.parent;
            while (t) e += 1, t = t.parent;
            return e
        },
        empty: function(e) {
            return this.tree.emptyNode(this, e)
        },
        find: function(e, t, n) {
            return this.tree.findNode(this, e, t, n)
        },
        hasChildren: function() {
            return !!this.children.length
        },
        index: function() {
            return this.parent ? this.parent.indexOf(this) : -1
        },
        indexOf: function(e) {
            var t;
            return this._isIndexStale && this._reindex(), t = this._indexMap[e.id], typeof t == "undefined" ? -1 : t
        },
        insert: function(e, t) {
            return this.tree.insertNode(this, e, t)
        },
        isInTree: function() {
            return this.tree && this.tree.rootNode === this ? !0 : !!this.parent && !!this.parent.isInTree()
        },
        isRoot: function() {
            return !!this.tree && this.tree.rootNode === this
        },
        next: function() {
            if (this.parent) return this.parent.children[this.index() + 1]
        },
        prepend: function(e, t) {
            return this.tree.prependNode(this, e, t)
        },
        previous: function() {
            if (this.parent) return this.parent.children[this.index() - 1]
        },
        remove: function(e) {
            return this.tree.removeNode(this, e)
        },
        size: function() {
            var e = this.children,
                t = e.length,
                n = t;
            for (var r = 0; r < t; r++) n += e[r].size();
            return n
        },
        toJSON: function() {
            var e = {},
                t = this.state,
                n, r, i;
            if (t.destroyed) return null;
            for (n = 0, i = this._serializable.length; n < i; n++) r = this._serializable[n], r in this && (e[r] = this[r]);
            if (this.canHaveChildren) {
                e.children = [];
                for (n = 0, i = this.children.length; n < i; n++) e.children.push(this.children[n].toJSON())
            }
            return e
        },
        traverse: function(e, t, n) {
            return this.tree.traverseNode(this, e, t, n)
        },
        _reindex: function() {
            var e = this.children,
                t = {},
                n, r;
            for (n = 0, r = e.length; n < r; n++) t[e[n].id] = n;
            this._indexMap = t, this._isIndexStale = !1
        }
    }, e.namespace("Tree").Node = n
}, "@VERSION@");
YUI.add("tree-openable", function(e, t) {
    function i() {}

    function s() {}
    var n = "close",
        r = "open";
    i.prototype = {
        initializer: function() {
            this.nodeExtensions = this.nodeExtensions.concat(e.Tree.Node.Openable)
        },
        closeNode: function(e, t) {
            return e.canHaveChildren && e.isOpen() && this._fireTreeEvent(n, {
                node: e,
                src: t && t.src
            }, {
                defaultFn: this._defCloseFn,
                silent: t && t.silent
            }), this
        },
        openNode: function(e, t) {
            return e.canHaveChildren && !e.isOpen() && this._fireTreeEvent(r, {
                node: e,
                src: t && t.src
            }, {
                defaultFn: this._defOpenFn,
                silent: t && t.silent
            }), this
        },
        toggleOpenNode: function(e, t) {
            return e.isOpen() ? this.closeNode(e, t) : this.openNode(e, t)
        },
        _defCloseFn: function(e) {
            delete e.node.state.open
        },
        _defOpenFn: function(e) {
            e.node.state.open = !0
        }
    }, e.Tree.Openable = i, s.prototype = {
        close: function(e) {
            return this.tree.closeNode(this, e), this
        },
        isOpen: function() {
            return !!this.state.open || this.isRoot()
        },
        open: function(e) {
            return this.tree.openNode(this, e), this
        },
        toggleOpen: function(e) {
            return this.tree.toggleOpenNode(this, e), this
        }
    }, e.Tree.Node.Openable = s
}, "@VERSION@", {
    requires: ["tree"]
});
YUI.add("tree", function(e, t) {
    var n = e.Lang,
        r = "add",
        i = "clear",
        s = "remove",
        o = e.Base.create("tree", e.Base, [], {
            nodeClass: e.Tree.Node,
            nodeExtensions: [],
            _isYUITree: !0,
            _rootNodeConfig: {
                canHaveChildren: !0
            },
            initializer: function(e) {
                e || (e = {}), e.nodeClass && (this.nodeClass = e.nodeClass), e.nodeExtensions && (this.nodeExtensions = this.nodeExtensions.concat(e.nodeExtensions)), this._published || (this._published = {}), this._nodeMap = {}, this.onceAfter("initializedChange", function() {
                    this._composeNodeClass(), this.clear(e.rootNode, {
                        silent: !0
                    }), e.nodes && this.insertNode(this.rootNode, e.nodes, {
                        silent: !0
                    })
                })
            },
            destructor: function() {
                this.destroyNode(this.rootNode, {
                    silent: !0
                }), this.children = null, this.rootNode = null, this._nodeClass = null, this._nodeMap = null, this._published = null
            },
            appendNode: function(t, n, r) {
                return this.insertNode(t, n, e.merge(r, {
                    index: t.children.length,
                    src: "append"
                }))
            },
            clear: function(e, t) {
                return this._fireTreeEvent(i, {
                    rootNode: this.createNode(e || this._rootNodeConfig),
                    src: t && t.src
                }, {
                    defaultFn: this._defClearFn,
                    silent: t && t.silent
                })
            },
            createNode: function(t) {
                t || (t = {});
                if (t._isYUITreeNode) return t.state.destroyed ? (e.error("Cannot insert a node that has already been destroyed.", null, "tree"), null) : (this._adoptNode(t), t);
                if (t.children) {
                    var n = [];
                    for (var r = 0, i = t.children.length; r < i; r++) n.push(this.createNode(t.children[r]));
                    t = e.merge(t, {
                        children: n
                    })
                }
                var s = new this._nodeClass(this, t);
                return this._nodeMap[s.id] = s
            },
            destroyNode: function(e, t) {
                var n, r, i;
                t || (t = {});
                for (r = 0, i = e.children.length; r < i; r++) n = e.children[r], n.parent = null, this.destroyNode(n, t);
                return e.parent && this.removeNode(e, t), e.children = [], e.data = {}, e.state = {
                    destroyed: !0
                }, e.tree = null, e._indexMap = {}, delete this._nodeMap[e.id], this
            },
            emptyNode: function(e, t) {
                var n = e.children,
                    r = [];
                for (var i = n.length - 1; i > -1; --i) r[i] = this.removeNode(n[i], t);
                return r
            },
            findNode: function(e, t, n, r) {
                var i = null;
                return typeof t == "function" && (r = n, n = t, t = {}), this.traverseNode(e, t, function(e) {
                    if (n.call(r, e)) return i = e, o.STOP_TRAVERSAL
                }), i
            },
            getNodeById: function(e) {
                return this._nodeMap[e]
            },
            insertNode: function(e, t, i) {
                i || (i = {}), e || (e = this.rootNode);
                if ("length" in t && n.isArray(t)) {
                    var s = "index" in i,
                        o = [],
                        u;
                    for (var a = 0, f = t.length; a < f; a++) u = this.insertNode(e, t[a], i), u && (o.push(u), s && (i.index += 1));
                    return o
                }
                t = this.createNode(t);
                if (t) {
                    var l = i.index;
                    typeof l == "undefined" && (l = this._getDefaultNodeIndex(e, t, i)), this._fireTreeEvent(r, {
                        index: l,
                        node: t,
                        parent: e,
                        src: i.src || "insert"
                    }, {
                        defaultFn: this._defAddFn,
                        silent: i.silent
                    })
                }
                return t
            },
            prependNode: function(t, n, r) {
                return this.insertNode(t, n, e.merge(r, {
                    index: 0,
                    src: "prepend"
                }))
            },
            removeNode: function(e, t) {
                return t || (t = {}), this._fireTreeEvent(s, {
                    destroy: !!t.destroy,
                    node: e,
                    parent: e.parent,
                    src: t.src || "remove"
                }, {
                    defaultFn: this._defRemoveFn,
                    silent: t.silent
                }), e
            },
            size: function() {
                return this.rootNode.size() + 1
            },
            toJSON: function() {
                return this.rootNode.toJSON()
            },
            traverseNode: function(t, n, r, i) {
                if (t.state.destroyed) {
                    e.error("Cannot traverse a node that has been destroyed.", null, "tree");
                    return
                }
                typeof n == "function" && (i = r, r = n, n = {}), n || (n = {});
                var s = o.STOP_TRAVERSAL,
                    u = typeof n.depth == "undefined";
                if (r.call(i, t) === s) return s;
                var a = t.children;
                if (u || n.depth > 0) {
                    var f = u ? n : {
                        depth: n.depth - 1
                    };
                    for (var l = 0, c = a.length; l < c; l++)
                        if (this.traverseNode(a[l], f, r, i) === s) return s
                }
            },
            _adoptNode: function(e, t) {
                var n = e.tree;
                if (n === this) return;
                for (var r = 0, i = e.children.length; r < i; r++) this._adoptNode(e.children[r], {
                    silent: !0
                });
                n.removeNode(e, t), delete n._nodeMap[e.id];
                if (!(e instanceof this._nodeClass) || n._nodeClass !== this._nodeClass) e = this.createNode(e.toJSON());
                e.tree = this, this._nodeMap[e.id] = e
            },
            _composeNodeClass: function() {
                var t = this.nodeClass,
                    n = this.nodeExtensions,
                    r;
                if (typeof t == "string") {
                    t = e.Object.getValue(e, t.split("."));
                    if (!t) {
                        e.error("Node class not found: " + t, null, "tree");
                        return
                    }
                    this.nodeClass = t
                }
                if (!n.length) {
                    this._nodeClass = t;
                    return
                }
                r = function() {
                    var e = r._nodeExtensions;
                    t.apply(this, arguments);
                    for (var n = 0, i = e.length; n < i; n++) e[n].apply(this, arguments)
                }, e.extend(r, t);
                for (var i = 0, s = n.length; i < s; i++) e.mix(r.prototype, n[i].prototype, !0);
                r._nodeExtensions = n, this._nodeClass = r
            },
            _fireTreeEvent: function(e, t, n) {
                return n && n.silent ? n.defaultFn && (t.silent = !0, n.defaultFn.call(this, t)) : (n && n.defaultFn && !this._published[e] && (this._published[e] = this.publish(e, {
                    defaultFn: n.defaultFn
                })), this.fire(e, t)), this
            },
            _getDefaultNodeIndex: function(e) {
                return e.children.length
            },
            _removeNodeFromParent: function(e) {
                var t = e.parent,
                    n;
                if (t) {
                    n = t.indexOf(e);
                    if (n > -1) {
                        var r = t.children;
                        n === r.length - 1 ? r.pop() : (r.splice(n, 1), t._isIndexStale = !0), e.parent = null
                    }
                }
            },
            _defAddFn: function(e) {
                var t = e.index,
                    n = e.node,
                    r = e.parent,
                    i;
                if (n.parent) {
                    if (n.parent === r) {
                        i = r.indexOf(n);
                        if (i === t) return;
                        i < t && (t -= 1)
                    }
                    this.removeNode(n, {
                        silent: e.silent,
                        src: "add"
                    })
                }
                n.parent = r, r.children.splice(t, 0, n), r.canHaveChildren = !0, r._isIndexStale = !0
            },
            _defClearFn: function(e) {
                var t = e.rootNode;
                this.rootNode && this.destroyNode(this.rootNode, {
                    silent: !0
                }), this._nodeMap = {}, this._nodeMap[t.id] = t, this.rootNode = t, this.children = t.children
            },
            _defRemoveFn: function(e) {
                var t = e.node;
                e.destroy ? this.destroyNode(t, {
                    silent: !0
                }) : e.parent ? this._removeNodeFromParent(t) : this.rootNode === t && (this.rootNode = this.createNode(this._rootNodeConfig), this.children = this.rootNode.children)
            }
        }, {
            STOP_TRAVERSAL: {}
        });
    e.Tree = e.mix(o, e.Tree)
}, "@VERSION@", {
    requires: ["base-build", "tree-node"]
});
YUI.add("view", function(e, t) {
    function n() {
        n.superclass.constructor.apply(this, arguments)
    }
    e.View = e.extend(n, e.Base, {
        containerTemplate: "<div/>",
        events: {},
        template: "",
        _allowAdHocAttrs: !0,
        initializer: function(t) {
            t || (t = {}), t.containerTemplate && (this.containerTemplate = t.containerTemplate), t.template && (this.template = t.template), this.events = t.events ? e.merge(this.events, t.events) : this.events, this.after("containerChange", this._afterContainerChange)
        },
        destroy: function(e) {
            return e && (e.remove || e["delete"]) && this.onceAfter("destroy", function() {
                this._destroyContainer()
            }), n.superclass.destroy.call(this)
        },
        destructor: function() {
            this.detachEvents(), delete this._container
        },
        attachEvents: function(t) {
            var n = this.get("container"),
                r = e.Object.owns,
                i, s, o, u;
            this.detachEvents(), t || (t = this.events);
            for (u in t) {
                if (!r(t, u)) continue;
                s = t[u];
                for (o in s) {
                    if (!r(s, o)) continue;
                    i = s[o], typeof i == "string" && (i = this[i]);
                    if (!i) continue;
                    this._attachedViewEvents.push(n.delegate(o, i, u, this))
                }
            }
            return this
        },
        create: function(t) {
            return t ? e.one(t) : e.Node.create(this.containerTemplate)
        },
        detachEvents: function() {
            return e.Array.each(this._attachedViewEvents, function(e) {
                e && e.detach()
            }), this._attachedViewEvents = [], this
        },
        remove: function() {
            var e = this.get("container");
            return e && e.remove(), this
        },
        render: function() {
            return this
        },
        _destroyContainer: function() {
            var e = this.get("container");
            e && e.remove(!0)
        },
        _getContainer: function(e) {
            return this._container || (e ? (this._container = e, this.attachEvents()) : (e = this._container = this.create(), this._set("container", e))), e
        },
        _afterContainerChange: function() {
            this.attachEvents(this.events)
        }
    }, {
        NAME: "view",
        ATTRS: {
            container: {
                getter: "_getContainer",
                setter: e.one,
                writeOnce: !0
            }
        },
        _NON_ATTRS_CFG: ["containerTemplate", "events", "template"]
    })
}, "@VERSION@", {
    requires: ["base-build", "node-event-delegate"]
});
YUI.add("widget-autohide", function(e, t) {
    function m(t) {
        e.after(this._bindUIAutohide, this, f), e.after(this._syncUIAutohide, this, l), this.get(c) && (this._bindUIAutohide(), this._syncUIAutohide())
    }
    var n = "widgetAutohide",
        r = "autohide",
        i = "clickoutside",
        s = "focusoutside",
        o = "document",
        u = "key",
        a = "esc",
        f = "bindUI",
        l = "syncUI",
        c = "rendered",
        h = "boundingBox",
        p = "visible",
        d = "Change",
        v = e.ClassNameManager.getClassName;
    m.ATTRS = {
        hideOn: {
            validator: e.Lang.isArray,
            valueFn: function() {
                return [{
                    node: e.one(o),
                    eventName: u,
                    keyCode: a
                }]
            }
        }
    }, m.prototype = {
        _uiHandlesAutohide: null,
        destructor: function() {
            this._detachUIHandlesAutohide()
        },
        _bindUIAutohide: function() {
            this.after(p + d, this._afterHostVisibleChangeAutohide), this.after("hideOnChange", this._afterHideOnChange)
        },
        _syncUIAutohide: function() {
            this._uiSetHostVisibleAutohide(this.get(p))
        },
        _uiSetHostVisibleAutohide: function(t) {
            t ? e.later(1, this, "_attachUIHandlesAutohide") : this._detachUIHandlesAutohide()
        },
        _attachUIHandlesAutohide: function() {
            if (this._uiHandlesAutohide) return;
            var t = this.get(h),
                n = e.bind(this.hide, this),
                r = [],
                i = this,
                s = this.get("hideOn"),
                o = 0,
                u = {
                    node: undefined,
                    ev: undefined,
                    keyCode: undefined
                };
            for (; o < s.length; o++) u.node = s[o].node, u.ev = s[o].eventName, u.keyCode = s[o].keyCode, !u.node && !u.keyCode && u.ev ? r.push(t.on(u.ev, n)) : u.node && !u.keyCode && u.ev ? r.push(u.node.on(u.ev, n)) : u.node && u.keyCode && u.ev && r.push(u.node.on(u.ev, n, u.keyCode));
            this._uiHandlesAutohide = r
        },
        _detachUIHandlesAutohide: function() {
            e.each(this._uiHandlesAutohide, function(e) {
                e.detach()
            }), this._uiHandlesAutohide = null
        },
        _afterHostVisibleChangeAutohide: function(e) {
            this._uiSetHostVisibleAutohide(e.newVal)
        },
        _afterHideOnChange: function(e) {
            this._detachUIHandlesAutohide(), this.get(p) && this._attachUIHandlesAutohide()
        }
    }, e.WidgetAutohide = m
}, "@VERSION@", {
    requires: ["base-build", "event-key", "event-outside", "widget"]
});
YUI.add("widget-base", function(e, t) {
    function R(e) {
        var t = this,
            n, r, i = t.constructor;
        t._strs = {}, t._cssPrefix = i.CSS_PREFIX || s(i.NAME.toLowerCase()), e = e || {}, R.superclass.constructor.call(t, e), r = t.get(T), r && (r !== P && (n = r), t.render(n))
    }
    var n = e.Lang,
        r = e.Node,
        i = e.ClassNameManager,
        s = i.getClassName,
        o, u = e.cached(function(e) {
            return e.substring(0, 1).toUpperCase() + e.substring(1)
        }),
        a = "content",
        f = "visible",
        l = "hidden",
        c = "disabled",
        h = "focused",
        p = "width",
        d = "height",
        v = "boundingBox",
        m = "contentBox",
        g = "parentNode",
        y = "ownerDocument",
        b = "auto",
        w = "srcNode",
        E = "body",
        S = "tabIndex",
        x = "id",
        T = "render",
        N = "rendered",
        C = "destroyed",
        k = "strings",
        L = "<div></div>",
        A = "Change",
        O = "loading",
        M = "_uiSet",
        _ = "",
        D = function() {},
        P = !0,
        H = !1,
        B, j = {},
        F = [f, c, d, p, h, S],
        I = e.UA.webkit,
        q = {};
    R.NAME = "widget", B = R.UI_SRC = "ui", R.ATTRS = j, j[x] = {
        valueFn: "_guid",
        writeOnce: P
    }, j[N] = {
        value: H,
        readOnly: P
    }, j[v] = {
        valueFn: "_defaultBB",
        setter: "_setBB",
        writeOnce: P
    }, j[m] = {
        valueFn: "_defaultCB",
        setter: "_setCB",
        writeOnce: P
    }, j[S] = {
        value: null,
        validator: "_validTabIndex"
    }, j[h] = {
        value: H,
        readOnly: P
    }, j[c] = {
        value: H
    }, j[f] = {
        value: P
    }, j[d] = {
        value: _
    }, j[p] = {
        value: _
    }, j[k] = {
        value: {},
        setter: "_strSetter",
        getter: "_strGetter"
    }, j[T] = {
        value: H,
        writeOnce: P
    }, R.CSS_PREFIX = s(R.NAME.toLowerCase()), R.getClassName = function() {
        return s.apply(i, [R.CSS_PREFIX].concat(e.Array(arguments), !0))
    }, o = R.getClassName, R.getByNode = function(t) {
        var n, i = o();
        return t = r.one(t), t && (t = t.ancestor("." + i, !0), t && (n = q[e.stamp(t, !0)])), n || null
    }, e.extend(R, e.Base, {
        getClassName: function() {
            return s.apply(i, [this._cssPrefix].concat(e.Array(arguments), !0))
        },
        initializer: function(t) {
            var n = this.get(v);
            n instanceof r && this._mapInstance(e.stamp(n))
        },
        _mapInstance: function(e) {
            q[e] = this
        },
        destructor: function() {
            var t = this.get(v),
                n;
            t instanceof r && (n = e.stamp(t, !0), n in q && delete q[n], this._destroyBox())
        },
        destroy: function(e) {
            return this._destroyAllNodes = e, R.superclass.destroy.apply(this)
        },
        _destroyBox: function() {
            var e = this.get(v),
                t = this.get(m),
                n = this._destroyAllNodes,
                r;
            r = e && e.compareTo(t), this.UI_EVENTS && this._destroyUIEvents(), this._unbindUI(e), t && (n && t.empty(), t.remove(P)), r || (n && e.empty(), e.remove(P))
        },
        render: function(e) {
            return !this.get(C) && !this.get(N) && (this.publish(T, {
                queuable: H,
                fireOnce: P,
                defaultTargetOnly: P,
                defaultFn: this._defRenderFn
            }), this.fire(T, {
                parentNode: e ? r.one(e) : null
            })), this
        },
        _defRenderFn: function(e) {
            this._parentNode = e.parentNode, this.renderer(), this._set(N, P), this._removeLoadingClassNames()
        },
        renderer: function() {
            var e = this;
            e._renderUI(), e.renderUI(), e._bindUI(), e.bindUI(), e._syncUI(), e.syncUI()
        },
        bindUI: D,
        renderUI: D,
        syncUI: D,
        hide: function() {
            return this.set(f, H)
        },
        show: function() {
            return this.set(f, P)
        },
        focus: function() {
            return this._set(h, P)
        },
        blur: function() {
            return this._set(h, H)
        },
        enable: function() {
            return this.set(c, H)
        },
        disable: function() {
            return this.set(c, P)
        },
        _uiSizeCB: function(e) {
            this.get(m).toggleClass(o(a, "expanded"), e)
        },
        _renderBox: function(e) {
            var t = this,
                n = t.get(m),
                i = t.get(v),
                s = t.get(w),
                o = t.DEF_PARENT_NODE,
                u = s && s.get(y) || i.get(y) || n.get(y);
            s && !s.compareTo(n) && !n.inDoc(u) && s.replace(n), !i.compareTo(n.get(g)) && !i.compareTo(n) && (n.inDoc(u) && n.replace(i), i.appendChild(n)), e = e || o && r.one(o), e ? e.appendChild(i) : i.inDoc(u) || r.one(E).insert(i, 0)
        },
        _setBB: function(e) {
            return this._setBox(this.get(x), e, this.BOUNDING_TEMPLATE, !0)
        },
        _setCB: function(e) {
            return this.CONTENT_TEMPLATE === null ? this.get(v) : this._setBox(null, e, this.CONTENT_TEMPLATE, !1)
        },
        _defaultBB: function() {
            var e = this.get(w),
                t = this.CONTENT_TEMPLATE === null;
            return e && t ? e : null
        },
        _defaultCB: function(e) {
            return this.get(w) || null
        },
        _setBox: function(t, n, i, s) {
            return n = r.one(n), n || (n = r.create(i), s ? this._bbFromTemplate = !0 : this._cbFromTemplate = !0), n.get(x) || n.set(x, t || e.guid()), n
        },
        _renderUI: function() {
            this._renderBoxClassNames(), this._renderBox(this._parentNode)
        },
        _renderBoxClassNames: function() {
            var e = this._getClasses(),
                t, n = this.get(v),
                r;
            n.addClass(o());
            for (r = e.length - 3; r >= 0; r--) t = e[r], n.addClass(t.CSS_PREFIX || s(t.NAME.toLowerCase()));
            this.get(m).addClass(this.getClassName(a))
        },
        _removeLoadingClassNames: function() {
            var e = this.get(v),
                t = this.get(m),
                n = this.getClassName(O),
                r = o(O);
            e.removeClass(r).removeClass(n), t.removeClass(r).removeClass(n)
        },
        _bindUI: function() {
            this._bindAttrUI(this._UI_ATTRS.BIND), this._bindDOM()
        },
        _unbindUI: function(e) {
            this._unbindDOM(e)
        },
        _bindDOM: function() {
            var t = this.get(v).get(y),
                n = R._hDocFocus;
            n || (n = R._hDocFocus = t.on("focus", this._onDocFocus, this), n.listeners = {
                count: 0
            }), n.listeners[e.stamp(this, !0)] = !0, n.listeners.count++, I && (this._hDocMouseDown = t.on("mousedown", this._onDocMouseDown, this))
        },
        _unbindDOM: function(t) {
            var n = R._hDocFocus,
                r = e.stamp(this, !0),
                i, s = this._hDocMouseDown;
            n && (i = n.listeners, i[r] && (delete i[r], i.count--), i.count === 0 && (n.detach(), R._hDocFocus = null)), I && s && s.detach()
        },
        _syncUI: function() {
            this._syncAttrUI(this._UI_ATTRS.SYNC)
        },
        _uiSetHeight: function(e) {
            this._uiSetDim(d, e), this._uiSizeCB(e !== _ && e !== b)
        },
        _uiSetWidth: function(e) {
            this._uiSetDim(p, e)
        },
        _uiSetDim: function(e, t) {
            this.get(v).setStyle(e, n.isNumber(t) ? t + this.DEF_UNIT : t)
        },
        _uiSetVisible: function(e) {
            this.get(v).toggleClass(this.getClassName(l), !e)
        },
        _uiSetDisabled: function(e) {
            this.get(v).toggleClass(this.getClassName(c), e)
        },
        _uiSetFocused: function(e, t) {
            var n = this.get(v);
            n.toggleClass(this.getClassName(h), e), t !== B && (e ? n.focus() : n.blur())
        },
        _uiSetTabIndex: function(e) {
            var t = this.get(v);
            n.isNumber(e) ? t.set(S, e) : t.removeAttribute(S)
        },
        _onDocMouseDown: function(e) {
            this._domFocus && this._onDocFocus(e)
        },
        _onDocFocus: function(e) {
            var t = R.getByNode(e.target),
                n = R._active;
            n && n !== t && (n._domFocus = !1, n._set(h, !1, {
                src: B
            }), R._active = null), t && (t._domFocus = !0, t._set(h, !0, {
                src: B
            }), R._active = t)
        },
        toString: function() {
            return this.name + "[" + this.get(x) + "]"
        },
        DEF_UNIT: "px",
        DEF_PARENT_NODE: null,
        CONTENT_TEMPLATE: L,
        BOUNDING_TEMPLATE: L,
        _guid: function() {
            return e.guid()
        },
        _validTabIndex: function(e) {
            return n.isNumber(e) || n.isNull(e)
        },
        _bindAttrUI: function(e) {
            var t, n = e.length;
            for (t = 0; t < n; t++) this.after(e[t] + A, this._setAttrUI)
        },
        _syncAttrUI: function(e) {
            var t, n = e.length,
                r;
            for (t = 0; t < n; t++) r = e[t], this[M + u(r)](this.get(r))
        },
        _setAttrUI: function(e) {
            e.target === this && this[M + u(e.attrName)](e.newVal, e.src)
        },
        _strSetter: function(t) {
            return e.merge(this.get(k), t)
        },
        getString: function(e) {
            return this.get(k)[e]
        },
        getStrings: function() {
            return this.get(k)
        },
        _UI_ATTRS: {
            BIND: F,
            SYNC: F
        }
    }), e.Widget = R
}, "@VERSION@", {
    requires: ["attribute", "base-base", "base-pluginhost", "classnamemanager", "event-focus", "node-base", "node-style"],
    skinnable: !0
});
YUI.add("widget-buttons", function(e, t) {
    function p(e) {
        return !!e.getDOMNode
    }

    function d() {
        this._buttonsHandles = {}
    }
    var n = e.Array,
        r = e.Lang,
        i = e.Object,
        s = e.Plugin.Button,
        o = e.Widget,
        u = e.WidgetStdMod,
        a = e.ClassNameManager.getClassName,
        f = r.isArray,
        l = r.isNumber,
        c = r.isString,
        h = r.isValue;
    d.ATTRS = {
        buttons: {
            getter: "_getButtons",
            setter: "_setButtons",
            value: {}
        },
        defaultButton: {
            readOnly: !0,
            value: null
        }
    }, d.CLASS_NAMES = {
        button: a("button"),
        buttons: o.getClassName("buttons"),
        primary: a("button", "primary")
    }, d.HTML_PARSER = {
        buttons: function(e) {
            return this._parseButtons(e)
        }
    }, d.NON_BUTTON_NODE_CFG = ["action", "classNames", "context", "events", "isDefault", "section"], d.prototype = {
        BUTTONS: {},
        BUTTONS_TEMPLATE: "<span />",
        DEFAULT_BUTTONS_SECTION: u.FOOTER,
        initializer: function() {
            this._stdModNode || e.error("WidgetStdMod must be added to a Widget before WidgetButtons."), this._mapButtons(this.get("buttons")), this._updateDefaultButton(), this.after({
                buttonsChange: e.bind("_afterButtonsChange", this),
                defaultButtonChange: e.bind("_afterDefaultButtonChange", this)
            }), e.after(this._bindUIButtons, this, "bindUI"), e.after(this._syncUIButtons, this, "syncUI")
        },
        destructor: function() {
            i.each(this._buttonsHandles, function(e) {
                e.detach()
            }), delete this._buttonsHandles, delete this._buttonsMap, delete this._defaultButton
        },
        addButton: function(e, t, r) {
            var i = this.get("buttons"),
                s, o;
            return p(e) || (e = this._mergeButtonConfig(e), t || (t = e.section)), t || (t = this.DEFAULT_BUTTONS_SECTION), s = i[t] || (i[t] = []), l(r) || (r = s.length), s.splice(r, 0, e), o = n.indexOf(s, e), this.set("buttons", i, {
                button: e,
                section: t,
                index: o,
                src: "add"
            }), this
        },
        getButton: function(e, t) {
            if (!h(e)) return;
            var n = this._buttonsMap,
                r;
            return t || (t = this.DEFAULT_BUTTONS_SECTION), l(e) ? (r = this.get("buttons"), r[t] && r[t][e]) : arguments.length > 1 ? n[t + ":" + e] : n[e]
        },
        removeButton: function(e, t) {
            if (!h(e)) return this;
            var r = this.get("buttons"),
                s;
            return l(e) ? (t || (t = this.DEFAULT_BUTTONS_SECTION), s = e, e = r[t][s]) : (c(e) && (e = this.getButton.apply(this, arguments)), i.some(r, function(r, i) {
                s = n.indexOf(r, e);
                if (s > -1) return t = i, !0
            })), e && s > -1 && (r[t].splice(s, 1), this.set("buttons", r, {
                button: e,
                section: t,
                index: s,
                src: "remove"
            })), this
        },
        _bindUIButtons: function() {
            var t = e.bind("_afterContentChangeButtons", this);
            this.after({
                visibleChange: e.bind("_afterVisibleChangeButtons", this),
                headerContentChange: t,
                bodyContentChange: t,
                footerContentChange: t
            })
        },
        _createButton: function(t) {
            var r, i, o, u, a, f, l, h;
            if (p(t)) return e.one(t.getDOMNode()).plug(s);
            r = e.merge({
                context: this,
                events: "click",
                label: t.value
            }, t), i = e.merge(r), o = d.NON_BUTTON_NODE_CFG;
            for (u = 0, a = o.length; u < a; u += 1) delete i[o[u]];
            return t = s.createNode(i), l = r.context, f = r.action, c(f) && (f = e.bind(f, l)), h = t.on(r.events, f, l), this._buttonsHandles[e.stamp(t, !0)] = h, t.setData("name", this._getButtonName(r)), t.setData("default", this._getButtonDefault(r)), n.each(n(r.classNames), t.addClass, t), t
        },
        _getButtonContainer: function(t, n) {
            var r = u.SECTION_CLASS_NAMES[t],
                i = d.CLASS_NAMES.buttons,
                s = this.get("contentBox"),
                o, a;
            return o = "." + r + " ." + i, a = s.one(o), !a && n && (a = e.Node.create(this.BUTTONS_TEMPLATE), a.addClass(i)), a
        },
        _getButtonDefault: function(e) {
            var t = p(e) ? e.getData("default") : e.isDefault;
            return c(t) ? t.toLowerCase() === "true" : !!t
        },
        _getButtonName: function(e) {
            var t;
            return p(e) ? t = e.getData("name") || e.get("name") : t = e && (e.name || e.type), t
        },
        _getButtons: function(e) {
            var t = {};
            return i.each(e, function(e, n) {
                t[n] = e.concat()
            }), t
        },
        _mapButton: function(e, t) {
            var n = this._buttonsMap,
                r = this._getButtonName(e),
                i = this._getButtonDefault(e);
            r && (n[r] = e, n[t + ":" + r] = e), i && (this._defaultButton = e)
        },
        _mapButtons: function(e) {
            this._buttonsMap = {}, this._defaultButton = null, i.each(e, function(e, t) {
                var n, r;
                for (n = 0, r = e.length; n < r; n += 1) this._mapButton(e[n], t)
            }, this)
        },
        _mergeButtonConfig: function(t) {
            var n, r, i, s, o, u;
            return t = c(t) ? {
                name: t
            } : e.merge(t), t.srcNode && (s = t.srcNode, o = s.get("tagName").toLowerCase(), u = s.get(o === "input" ? "value" : "text"), n = {
                disabled: !!s.get("disabled"),
                isDefault: this._getButtonDefault(s),
                name: this._getButtonName(s)
            }, u && (n.label = u), e.mix(t, n, !1, null, 0, !0)), i = this._getButtonName(t), r = this.BUTTONS && this.BUTTONS[i], r && e.mix(t, r, !1, null, 0, !0), t
        },
        _parseButtons: function(e) {
            var t = "." + d.CLASS_NAMES.button,
                r = ["header", "body", "footer"],
                i = null;
            return n.each(r, function(e) {
                var n = this._getButtonContainer(e),
                    r = n && n.all(t),
                    s;
                if (!r || r.isEmpty()) return;
                s = [], r.each(function(e) {
                    s.push({
                        srcNode: e
                    })
                }), i || (i = {}), i[e] = s
            }, this), i
        },
        _setButtons: function(e) {
            function r(e, r) {
                if (!f(e)) return;
                var i, s, o, u;
                for (i = 0, s = e.length; i < s; i += 1) o = e[i], u = r, p(o) || (o = this._mergeButtonConfig(o), u || (u = o.section)), o = this._createButton(o), u || (u = t), (n[u] || (n[u] = [])).push(o)
            }
            var t = this.DEFAULT_BUTTONS_SECTION,
                n = {};
            return f(e) ? r.call(this, e) : i.each(e, r, this), n
        },
        _syncUIButtons: function() {
            this._uiSetButtons(this.get("buttons")), this._uiSetDefaultButton(this.get("defaultButton")), this._uiSetVisibleButtons(this.get("visible"))
        },
        _uiInsertButton: function(e, t, n) {
            var r = d.CLASS_NAMES.button,
                i = this._getButtonContainer(t, !0),
                s = i.all("." + r);
            i.insertBefore(e, s.item(n)), this.setStdModContent(t, i, "after")
        },
        _uiRemoveButton: function(t, n, r) {
            var i = e.stamp(t, this),
                s = this._buttonsHandles,
                o = s[i],
                u, a;
            o && o.detach(), delete s[i], t.remove(), r || (r = {}), r.preserveContent || (u = this._getButtonContainer(n), a = d.CLASS_NAMES.button, u && u.all("." + a).isEmpty() && (u.remove(), this._updateContentButtons(n)))
        },
        _uiSetButtons: function(e) {
            var t = d.CLASS_NAMES.button,
                r = ["header", "body", "footer"];
            n.each(r, function(n) {
                var r = e[n] || [],
                    i = r.length,
                    s = this._getButtonContainer(n, i),
                    o = !1,
                    u, a, f, l;
                if (!s) return;
                u = s.all("." + t);
                for (a = 0; a < i; a += 1) f = r[a], l = u.indexOf(f), l > -1 ? (u.splice(l, 1), l !== a && (s.insertBefore(f, a + 1), o = !0)) : (s.appendChild(f), o = !0);
                u.each(function(e) {
                    this._uiRemoveButton(e, n, {
                        preserveContent: !0
                    }), o = !0
                }, this);
                if (i === 0) {
                    s.remove(), this._updateContentButtons(n);
                    return
                }
                o && this.setStdModContent(n, s, "after")
            }, this)
        },
        _uiSetDefaultButton: function(e, t) {
            var n = d.CLASS_NAMES.primary;
            e && e.addClass(n), t && t.removeClass(n)
        },
        _uiSetVisibleButtons: function(e) {
            if (!e) return;
            var t = this.get("defaultButton");
            t && t.focus()
        },
        _unMapButton: function(e, t) {
            var n = this._buttonsMap,
                r = this._getButtonName(e),
                i;
            r && (n[r] === e && delete n[r], i = t + ":" + r, n[i] === e && delete n[i]), this._defaultButton === e && (this._defaultButton = null)
        },
        _updateDefaultButton: function() {
            var e = this._defaultButton;
            this.get("defaultButton") !== e && this._set("defaultButton", e)
        },
        _updateContentButtons: function(e) {
            var t = this.getStdModNode(e).get("childNodes");
            this.set(e + "Content", t.isEmpty() ? null : t, {
                src: "buttons"
            })
        },
        _afterButtonsChange: function(e) {
            var t = e.newVal,
                n = e.section,
                r = e.index,
                i = e.src,
                s;
            if (i === "add") {
                s = t[n][r], this._mapButton(s, n), this._updateDefaultButton(), this._uiInsertButton(s, n, r);
                return
            }
            if (i === "remove") {
                s = e.button, this._unMapButton(s, n), this._updateDefaultButton(), this._uiRemoveButton(s, n);
                return
            }
            this._mapButtons(t), this._updateDefaultButton(), this._uiSetButtons(t)
        },
        _afterContentChangeButtons: function(e) {
            var t = e.src,
                n = e.stdModPosition,
                r = !n || n === u.REPLACE;
            r && t !== "buttons" && t !== o.UI_SRC && this._uiSetButtons(this.get("buttons"))
        },
        _afterDefaultButtonChange: function(e) {
            this._uiSetDefaultButton(e.newVal, e.prevVal)
        },
        _afterVisibleChangeButtons: function(e) {
            this._uiSetVisibleButtons(e.newVal)
        }
    }, e.WidgetButtons = d
}, "@VERSION@", {
    requires: ["button-plugin", "cssbutton", "widget-stdmod"]
});
YUI.add("widget-child", function(e, t) {
    function r() {
        e.after(this._syncUIChild, this, "syncUI"), e.after(this._bindUIChild, this, "bindUI")
    }
    var n = e.Lang;
    r.ATTRS = {
        selected: {
            value: 0,
            validator: n.isNumber
        },
        index: {
            readOnly: !0,
            getter: function() {
                var e = this.get("parent"),
                    t = -1;
                return e && (t = e.indexOf(this)), t
            }
        },
        parent: {
            readOnly: !0
        },
        depth: {
            readOnly: !0,
            getter: function() {
                var e = this.get("parent"),
                    t = this.get("root"),
                    n = -1;
                while (e) {
                    n += 1;
                    if (e == t) break;
                    e = e.get("parent")
                }
                return n
            }
        },
        root: {
            readOnly: !0,
            getter: function() {
                var t = function(n) {
                    var r = n.get("parent"),
                        i = n.ROOT_TYPE,
                        s = r;
                    return i && (s = r && e.instanceOf(r, i)), s ? t(r) : n
                };
                return t(this)
            }
        }
    }, r.prototype = {
        ROOT_TYPE: null,
        _getUIEventNode: function() {
            var e = this.get("root"),
                t;
            return e && (t = e.get("boundingBox")), t
        },
        next: function(e) {
            var t = this.get("parent"),
                n;
            return t && (n = t.item(this.get("index") + 1)), !n && e && (n = t.item(0)), n
        },
        previous: function(e) {
            var t = this.get("parent"),
                n = this.get("index"),
                r;
            return t && n > 0 && (r = t.item([n - 1])), !r && e && (r = t.item(t.size() - 1)), r
        },
        remove: function(t) {
            var r, i;
            return n.isNumber(t) ? i = e.WidgetParent.prototype.remove.apply(this, arguments) : (r = this.get("parent"), r && (i = r.remove(this.get("index")))), i
        },
        isRoot: function() {
            return this == this.get("root")
        },
        ancestor: function(e) {
            var t = this.get("root"),
                n;
            if (this.get("depth") > e) {
                n = this.get("parent");
                while (n != t && n.get("depth") > e) n = n.get("parent")
            }
            return n
        },
        _uiSetChildSelected: function(e) {
            var t = this.get("boundingBox"),
                n = this.getClassName("selected");
            e === 0 ? t.removeClass(n) : t.addClass(n)
        },
        _afterChildSelectedChange: function(e) {
            this._uiSetChildSelected(e.newVal)
        },
        _syncUIChild: function() {
            this._uiSetChildSelected(this.get("selected"))
        },
        _bindUIChild: function() {
            this.after("selectedChange", this._afterChildSelectedChange)
        }
    }, e.WidgetChild = r
}, "@VERSION@", {
    requires: ["base-build", "widget"]
});
YUI.add("widget-htmlparser", function(e, t) {
    var n = e.Widget,
        r = e.Node,
        i = e.Lang,
        s = "srcNode",
        o = "contentBox";
    n.HTML_PARSER = {}, n._buildCfg = {
        aggregates: ["HTML_PARSER"]
    }, n.ATTRS[s] = {
        value: null,
        setter: r.one,
        getter: "_getSrcNode",
        writeOnce: !0
    }, e.mix(n.prototype, {
        _getSrcNode: function(e) {
            return e || this.get(o)
        },
        _preAddAttrs: function(e, t, n) {
            var r = {
                id: e.id,
                boundingBox: e.boundingBox,
                contentBox: e.contentBox,
                srcNode: e.srcNode
            };
            this.addAttrs(r, t, n), delete e.boundingBox, delete e.contentBox, delete e.srcNode, delete e.id, this._applyParser && this._applyParser(t)
        },
        _applyParsedConfig: function(t, n, r) {
            return r ? e.mix(n, r, !1) : n
        },
        _applyParser: function(t) {
            var n = this,
                r = this._getNodeToParse(),
                s = n._getHtmlParser(),
                o, u;
            s && r && e.Object.each(s, function(e, t, s) {
                u = null, i.isFunction(e) ? u = e.call(n, r) : i.isArray(e) ? (u = r.all(e[0]), u.isEmpty() && (u = null)) : u = r.one(e), u !== null && u !== undefined && (o = o || {}, o[t] = u)
            }), t = n._applyParsedConfig(r, t, o)
        },
        _getNodeToParse: function() {
            var e = this.get("srcNode");
            return this._cbFromTemplate ? null : e
        },
        _getHtmlParser: function() {
            var t = this._getClasses(),
                n = {},
                r, i;
            for (r = t.length - 1; r >= 0; r--) i = t[r].HTML_PARSER, i && e.mix(n, i, !0);
            return n
        }
    })
}, "@VERSION@", {
    requires: ["widget-base"]
});
YUI.add("widget-modality", function(e, t) {
    function b(e) {}
    var n = "widget",
        r = "renderUI",
        i = "bindUI",
        s = "syncUI",
        o = "boundingBox",
        u = "contentBox",
        a = "rendered",
        f = "visible",
        l = "zIndex",
        c = "Change",
        h = e.Lang.isBoolean,
        p = e.ClassNameManager.getClassName,
        d = "maskShow",
        v = "maskHide",
        m = "clickoutside",
        g = "focusoutside",
        y = function() {
            /*! IS_POSITION_FIXED_SUPPORTED - Juriy Zaytsev (kangax) - http://yura.thinkweb2.com/cft/ */
            ;
            var t = e.config.doc,
                n = null,
                r, i;
            return t.createElement && (r = t.createElement("div"), r && r.style && (r.style.position = "fixed", r.style.top = "10px", i = t.body, i && i.appendChild && i.removeChild && (i.appendChild(r), n = r.offsetTop === 10, i.removeChild(r)))), n
        }(),
        w = "modal",
        E = "mask",
        S = {
            modal: p(n, w),
            mask: p(n, E)
        };
    b.ATTRS = {
        maskNode: {
            getter: "_getMaskNode",
            readOnly: !0
        },
        modal: {
            value: !1,
            validator: h
        },
        focusOn: {
            valueFn: function() {
                return [{
                    eventName: m
                }, {
                    eventName: g
                }]
            },
            validator: e.Lang.isArray
        }
    }, b.CLASSES = S, b._GET_MASK = function() {
        var t = e.one("." + S.mask),
            n = e.one("win");
        return t ? t : (t = e.Node.create("<div></div>").addClass(S.mask), y ? t.setStyles({
            position: "fixed",
            width: "100%",
            height: "100%",
            top: "0",
            left: "0",
            display: "block"
        }) : t.setStyles({
            position: "absolute",
            width: n.get("winWidth") + "px",
            height: n.get("winHeight") + "px",
            top: "0",
            left: "0",
            display: "block"
        }), t)
    }, b.STACK = [], b.prototype = {
        initializer: function() {
            e.after(this._renderUIModal, this, r), e.after(this._syncUIModal, this, s), e.after(this._bindUIModal, this, i)
        },
        destructor: function() {
            this._uiSetHostVisibleModal(!1)
        },
        _uiHandlesModal: null,
        _renderUIModal: function() {
            var e = this.get(o);
            this._repositionMask(this), e.addClass(S.modal)
        },
        _bindUIModal: function() {
            this.after(f + c, this._afterHostVisibleChangeModal), this.after(l + c, this._afterHostZIndexChangeModal), this.after("focusOnChange", this._afterFocusOnChange), (!y || e.UA.ios && e.UA.ios < 5 || e.UA.android && e.UA.android < 3) && e.one("win").on("scroll", this._resyncMask, this)
        },
        _syncUIModal: function() {
            this._uiSetHostVisibleModal(this.get(f))
        },
        _focus: function(e) {
            var t = this.get(o),
                n = t.get("tabIndex");
            t.set("tabIndex", n >= 0 ? n : 0), this.focus()
        },
        _blur: function() {
            this.blur()
        },
        _getMaskNode: function() {
            return b._GET_MASK()
        },
        _uiSetHostVisibleModal: function(t) {
            var n = b.STACK,
                r = this.get("maskNode"),
                i = this.get("modal"),
                s, o;
            t ? (e.Array.each(n, function(e) {
                e._detachUIHandlesModal(), e._blur()
            }), n.unshift(this), this._repositionMask(this), this._uiSetHostZIndexModal(this.get(l)), i && (r.show(), e.later(1, this, "_attachUIHandlesModal"), this.get(a) && this._focus())) : (o = e.Array.indexOf(n, this), o >= 0 && n.splice(o, 1), this._detachUIHandlesModal(), this._blur(), n.length ? (s = n[0], this._repositionMask(s), s._uiSetHostZIndexModal(s.get(l)), s.get("modal") && (e.later(1, s, "_attachUIHandlesModal"), s._focus())) : r.getStyle("display") === "block" && r.hide())
        },
        _uiSetHostZIndexModal: function(e) {
            this.get("modal") && this.get("maskNode").setStyle(l, e || 0)
        },
        _attachUIHandlesModal: function() {
            if (this._uiHandlesModal || b.STACK[0] !== this) return;
            var t = this.get(o),
                n = this.get("maskNode"),
                r = this.get("focusOn"),
                i = e.bind(this._focus, this),
                s = [],
                u, a, f;
            for (u = 0, a = r.length; u < a; u++) f = {}, f.node = r[u].node, f.ev = r[u].eventName, f.keyCode = r[u].keyCode, !f.node && !f.keyCode && f.ev ? s.push(t.on(f.ev, i)) : f.node && !f.keyCode && f.ev ? s.push(f.node.on(f.ev, i)) : f.node && f.keyCode && f.ev && s.push(f.node.on(f.ev, i, f.keyCode));
            y || s.push(e.one("win").on("scroll", e.bind(function(e) {
                n.setStyle("top", n.get("docScrollY"))
            }, this))), this._uiHandlesModal = s
        },
        _detachUIHandlesModal: function() {
            e.each(this._uiHandlesModal, function(e) {
                e.detach()
            }), this._uiHandlesModal = null
        },
        _afterHostVisibleChangeModal: function(e) {
            this._uiSetHostVisibleModal(e.newVal)
        },
        _afterHostZIndexChangeModal: function(e) {
            this._uiSetHostZIndexModal(e.newVal)
        },
        isNested: function() {
            var e = b.STACK.length,
                t = e > 1 ? !0 : !1;
            return t
        },
        _repositionMask: function(t) {
            var n = this.get("modal"),
                r = t.get("modal"),
                i = this.get("maskNode"),
                s, u;
            if (n && !r) i.remove(), this.fire(v);
            else if (!n && r || n && r) i.remove(), this.fire(v), s = t.get(o), u = s.get("parentNode") || e.one("body"), u.insert(i, s), this.fire(d)
        },
        _resyncMask: function(e) {
            var t = e.currentTarget,
                n = t.get("docScrollX"),
                r = t.get("docScrollY"),
                i = t.get("innerWidth") || t.get("winWidth"),
                s = t.get("innerHeight") || t.get("winHeight"),
                o = this.get("maskNode");
            o.setStyles({
                top: r + "px",
                left: n + "px",
                width: i + "px",
                height: s + "px"
            })
        },
        _afterFocusOnChange: function(e) {
            this._detachUIHandlesModal(), this.get(f) && this._attachUIHandlesModal()
        }
    }, e.WidgetModality = b
}, "@VERSION@", {
    requires: ["base-build", "event-outside", "widget"],
    skinnable: !0
});
YUI.add("widget-parent", function(e, t) {
    function s(t) {
        this.publish("addChild", {
            defaultTargetOnly: !0,
            defaultFn: this._defAddChildFn
        }), this.publish("removeChild", {
            defaultTargetOnly: !0,
            defaultFn: this._defRemoveChildFn
        }), this._items = [];
        var n, r;
        t && t.children && (n = t.children, r = this.after("initializedChange", function(e) {
            this._add(n), r.detach()
        })), e.after(this._renderChildren, this, "renderUI"), e.after(this._bindUIParent, this, "bindUI"), this.after("selectionChange", this._afterSelectionChange), this.after("selectedChange", this._afterParentSelectedChange), this.after("activeDescendantChange", this._afterActiveDescendantChange), this._hDestroyChild = this.after("*:destroy", this._afterDestroyChild), this.after("*:focusedChange", this._updateActiveDescendant)
    }
    var n = e.Lang,
        r = "rendered",
        i = "boundingBox";
    s.ATTRS = {
        defaultChildType: {
            setter: function(t) {
                var r = e.Attribute.INVALID_VALUE,
                    i = n.isString(t) ? e[t] : t;
                return n.isFunction(i) && (r = i), r
            }
        },
        activeDescendant: {
            readOnly: !0
        },
        multiple: {
            value: !1,
            validator: n.isBoolean,
            writeOnce: !0,
            getter: function(e) {
                var t = this.get("root");
                return t && t != this ? t.get("multiple") : e
            }
        },
        selection: {
            readOnly: !0,
            setter: "_setSelection",
            getter: function(t) {
                var r = n.isArray(t) ? new e.ArrayList(t) : t;
                return r
            }
        },
        selected: {
            setter: function(t) {
                var n = t;
                return t === 1 && !this.get("multiple") && (n = e.Attribute.INVALID_VALUE), n
            }
        }
    }, s.prototype = {
        destructor: function() {
            this._destroyChildren()
        },
        _afterDestroyChild: function(e) {
            var t = e.target;
            t.get("parent") == this && t.remove()
        },
        _afterSelectionChange: function(t) {
            if (t.target == this && t.src != this) {
                var n = t.newVal,
                    r = 0;
                n && (r = 2, e.instanceOf(n, e.ArrayList) && n.size() === this.size() && (r = 1)), this.set("selected", r, {
                    src: this
                })
            }
        },
        _afterActiveDescendantChange: function(e) {
            var t = this.get("parent");
            t && t._set("activeDescendant", e.newVal)
        },
        _afterParentSelectedChange: function(e) {
            var t = e.newVal;
            this == e.target && e.src != this && (t === 0 || t === 1) && this.each(function(e) {
                e.set("selected", t, {
                    src: this
                })
            }, this)
        },
        _setSelection: function(e) {
            var t = null,
                n;
            return this.get("multiple") && !this.isEmpty() ? (n = [], this.each(function(e) {
                e.get("selected") > 0 && n.push(e)
            }), n.length > 0 && (t = n)) : e.get("selected") > 0 && (t = e), t
        },
        _updateSelection: function(e) {
            var t = e.target,
                n;
            t.get("parent") == this && (e.src != "_updateSelection" && (n = this.get("selection"), !this.get("multiple") && n && e.newVal > 0 && n.set("selected", 0, {
                src: "_updateSelection"
            }), this._set("selection", t)), e.src == this && this._set("selection", t, {
                src: this
            }))
        },
        _updateActiveDescendant: function(e) {
            var t = e.newVal === !0 ? e.target : null;
            this._set("activeDescendant", t)
        },
        _createChild: function(t) {
            var r = this.get("defaultChildType"),
                i = t.childType || t.type,
                s, o, u;
            return i && (o = n.isString(i) ? e[i] : i), n.isFunction(o) ? u = o : r && (u = r), u ? s = new u(t) : e.error("Could not create a child instance because its constructor is either undefined or invalid."), s
        },
        _defAddChildFn: function(t) {
            var r = t.child,
                i = t.index,
                s = this._items;
            r.get("parent") && r.remove(), n.isNumber(i) ? s.splice(i, 0, r) : s.push(r), r._set("parent", this), r.addTarget(this), t.index = r.get("index"), r.after("selectedChange", e.bind(this._updateSelection, this))
        },
        _defRemoveChildFn: function(e) {
            var t = e.child,
                n = e.index,
                r = this._items;
            t.get("focused") && t.blur(), t.get("selected") && t.set("selected", 0), r.splice(n, 1), t.removeTarget(this), t._oldParent = t.get("parent"), t._set("parent", null)
        },
        _add: function(t, r) {
            var i, s, o;
            return n.isArray(t) ? (i = [], e.each(t, function(e, t) {
                s = this._add(e, r + t), s && i.push(s)
            }, this), i.length > 0 && (o = i)) : (e.instanceOf(t, e.Widget) ? s = t : s = this._createChild(t), s && this.fire("addChild", {
                child: s,
                index: r
            }) && (o = s)), o
        },
        add: function() {
            var t = this._add.apply(this, arguments),
                r = t ? n.isArray(t) ? t : [t] : [];
            return new e.ArrayList(r)
        },
        remove: function(e) {
            var t = this._items[e],
                n;
            return t && this.fire("removeChild", {
                child: t,
                index: e
            }) && (n = t), n
        },
        removeAll: function() {
            var t = [],
                n;
            return e.each(this._items.concat(), function() {
                n = this.remove(0), n && t.push(n)
            }, this), new e.ArrayList(t)
        },
        selectChild: function(e) {
            this.item(e).set("selected", 1)
        },
        selectAll: function() {
            this.set("selected", 1)
        },
        deselectAll: function() {
            this.set("selected", 0)
        },
        _uiAddChild: function(e, t) {
            e.render(t);
            var n = e.get("boundingBox"),
                s, o = e.next(!1),
                u;
            o && o.get(r) ? (s = o.get(i), s.insert(n, "before")) : (u = e.previous(!1), u && u.get(r) ? (s = u.get(i), s.insert(n, "after")) : t.contains(n) || t.appendChild(n))
        },
        _uiRemoveChild: function(e) {
            e.get("boundingBox").remove()
        },
        _afterAddChild: function(e) {
            var t = e.child;
            t.get("parent") == this && this._uiAddChild(t, this._childrenContainer)
        },
        _afterRemoveChild: function(e) {
            var t = e.child;
            t._oldParent == this && this._uiRemoveChild(t)
        },
        _bindUIParent: function() {
            this.after("addChild", this._afterAddChild), this.after("removeChild", this._afterRemoveChild)
        },
        _renderChildren: function() {
            var e = this._childrenContainer || this.get("contentBox");
            this._childrenContainer = e, this.each(function(t) {
                t.render(e)
            })
        },
        _destroyChildren: function() {
            this._hDestroyChild.detach(), this.each(function(e) {
                e.destroy()
            })
        }
    }, e.augment(s, e.ArrayList), e.WidgetParent = s
}, "@VERSION@", {
    requires: ["arraylist", "base-build", "widget"]
});
YUI.add("widget-position-align", function(e, t) {
    function c(e) {}
    var n = e.Lang,
        r = "align",
        i = "alignOn",
        s = "visible",
        o = "boundingBox",
        u = "offsetWidth",
        a = "offsetHeight",
        f = "region",
        l = "viewportRegion";
    c.ATTRS = {
        align: {
            value: null
        },
        centered: {
            setter: "_setAlignCenter",
            lazyAdd: !1,
            value: !1
        },
        alignOn: {
            value: [],
            validator: e.Lang.isArray
        }
    }, c.TL = "tl", c.TR = "tr", c.BL = "bl", c.BR = "br", c.TC = "tc", c.RC = "rc", c.BC = "bc", c.LC = "lc", c.CC = "cc", c.prototype = {
        initializer: function() {
            this._posNode || e.error("WidgetPosition needs to be added to the Widget, before WidgetPositionAlign is added"), e.after(this._bindUIPosAlign, this, "bindUI"), e.after(this._syncUIPosAlign, this, "syncUI")
        },
        _posAlignUIHandles: null,
        destructor: function() {
            this._detachPosAlignUIHandles()
        },
        _bindUIPosAlign: function() {
            this.after("alignChange", this._afterAlignChange), this.after("alignOnChange", this._afterAlignOnChange), this.after("visibleChange", this._syncUIPosAlign)
        },
        _syncUIPosAlign: function() {
            var e = this.get(r);
            this._uiSetVisiblePosAlign(this.get(s)), e && this._uiSetAlign(e.node, e.points)
        },
        align: function(e, t) {
            return arguments.length ? this.set(r, {
                node: e,
                points: t
            }) : this._syncUIPosAlign(), this
        },
        centered: function(e) {
            return this.align(e, [c.CC, c.CC])
        },
        _setAlignCenter: function(e) {
            return e && this.set(r, {
                node: e === !0 ? null : e,
                points: [c.CC, c.CC]
            }), e
        },
        _uiSetAlign: function(t, r) {
            if (!n.isArray(r) || r.length !== 2) {
                e.error("align: Invalid Points Arguments");
                return
            }
            var i = this._getRegion(t),
                s, o, u;
            if (!i) return;
            s = r[0], o = r[1];
            switch (o) {
                case c.TL:
                    u = [i.left, i.top];
                    break;
                case c.TR:
                    u = [i.right, i.top];
                    break;
                case c.BL:
                    u = [i.left, i.bottom];
                    break;
                case c.BR:
                    u = [i.right, i.bottom];
                    break;
                case c.TC:
                    u = [i.left + Math.floor(i.width / 2), i.top];
                    break;
                case c.BC:
                    u = [i.left + Math.floor(i.width / 2), i.bottom];
                    break;
                case c.LC:
                    u = [i.left, i.top + Math.floor(i.height / 2)];
                    break;
                case c.RC:
                    u = [i.right, i.top + Math.floor(i.height / 2)];
                    break;
                case c.CC:
                    u = [i.left + Math.floor(i.width / 2), i.top + Math.floor(i.height / 2)];
                    break;
                default:
            }
            u && this._doAlign(s, u[0], u[1])
        },
        _uiSetVisiblePosAlign: function(e) {
            e ? this._attachPosAlignUIHandles() : this._detachPosAlignUIHandles()
        },
        _attachPosAlignUIHandles: function() {
            if (this._posAlignUIHandles) return;
            var t = this.get(o),
                n = e.bind(this._syncUIPosAlign, this),
                r = [];
            e.Array.each(this.get(i), function(i) {
                var s = i.eventName,
                    o = e.one(i.node) || t;
                s && r.push(o.on(s, n))
            }), this._posAlignUIHandles = r
        },
        _detachPosAlignUIHandles: function() {
            var t = this._posAlignUIHandles;
            t && ((new e.EventHandle(t)).detach(), this._posAlignUIHandles = null)
        },
        _doAlign: function(e, t, n) {
            var r = this._posNode,
                i;
            switch (e) {
                case c.TL:
                    i = [t, n];
                    break;
                case c.TR:
                    i = [t - r.get(u), n];
                    break;
                case c.BL:
                    i = [t, n - r.get(a)];
                    break;
                case c.BR:
                    i = [t - r.get(u), n - r.get(a)];
                    break;
                case c.TC:
                    i = [t - r.get(u) / 2, n];
                    break;
                case c.BC:
                    i = [t - r.get(u) / 2, n - r.get(a)];
                    break;
                case c.LC:
                    i = [t, n - r.get(a) / 2];
                    break;
                case c.RC:
                    i = [t - r.get(u), n - r.get(a) / 2];
                    break;
                case c.CC:
                    i = [t - r.get(u) / 2, n - r.get(a) / 2];
                    break;
                default:
            }
            i && this.move(i)
        },
        _getRegion: function(t) {
            var n;
            return t ? (t = e.Node.one(t), t && (n = t.get(f))) : n = this._posNode.get(l), n
        },
        _afterAlignChange: function(e) {
            var t = e.newVal;
            t && this._uiSetAlign(t.node, t.points)
        },
        _afterAlignOnChange: function(e) {
            this._detachPosAlignUIHandles(), this.get(s) && this._attachPosAlignUIHandles()
        }
    }, e.WidgetPositionAlign = c
}, "@VERSION@", {
    requires: ["widget-position"]
});
YUI.add("widget-position-constrain", function(e, t) {
    function m(e) {}
    var n = "constrain",
        r = "constrain|xyChange",
        i = "constrainChange",
        s = "preventOverlap",
        o = "align",
        u = "",
        a = "bindUI",
        f = "xy",
        l = "x",
        c = "y",
        h = e.Node,
        p = "viewportRegion",
        d = "region",
        v;
    m.ATTRS = {
        constrain: {
            value: null,
            setter: "_setConstrain"
        },
        preventOverlap: {
            value: !1
        }
    }, v = m._PREVENT_OVERLAP = {
        x: {
            tltr: 1,
            blbr: 1,
            brbl: 1,
            trtl: 1
        },
        y: {
            trbr: 1,
            tlbl: 1,
            bltl: 1,
            brtr: 1
        }
    }, m.prototype = {
        initializer: function() {
            this._posNode || e.error("WidgetPosition needs to be added to the Widget, before WidgetPositionConstrain is added"), e.after(this._bindUIPosConstrained, this, a)
        },
        getConstrainedXY: function(e, t) {
            t = t || this.get(n);
            var r = this._getRegion(t === !0 ? null : t),
                i = this._posNode.get(d);
            return [this._constrain(e[0], l, i, r), this._constrain(e[1], c, i, r)]
        },
        constrain: function(e, t) {
            var r, i, s = t || this.get(n);
            s && (r = e || this.get(f), i = this.getConstrainedXY(r, s), (i[0] !== r[0] || i[1] !== r[1]) && this.set(f, i, {
                constrained: !0
            }))
        },
        _setConstrain: function(e) {
            return e === !0 ? e : h.one(e)
        },
        _constrain: function(e, t, n, r) {
            if (r) {
                this.get(s) && (e = this._preventOverlap(e, t, n, r));
                var i = t == l,
                    o = i ? r.width : r.height,
                    u = i ? n.width : n.height,
                    a = i ? r.left : r.top,
                    f = i ? r.right - u : r.bottom - u;
                if (e < a || e > f) u < o ? e < a ? e = a : e > f && (e = f) : e = a
            }
            return e
        },
        _preventOverlap: function(e, t, n, r) {
            var i = this.get(o),
                s = t === l,
                a, f, c, h, p, d;
            return i && i.points && v[t][i.points.join(u)] && (f = this._getRegion(i.node), f && (a = s ? n.width : n.height, c = s ? f.left : f.top, h = s ? f.right : f.bottom, p = s ? f.left - r.left : f.top - r.top, d = s ? r.right - f.right : r.bottom - f.bottom), e > c ? d < a && p > a && (e = c - a) : p < a && d > a && (e = h)), e
        },
        _bindUIPosConstrained: function() {
            this.after(i, this._afterConstrainChange), this._enableConstraints(this.get(n))
        },
        _afterConstrainChange: function(e) {
            this._enableConstraints(e.newVal)
        },
        _enableConstraints: function(e) {
            e ? (this.constrain(), this._cxyHandle = this._cxyHandle || this.on(r, this._constrainOnXYChange)) : this._cxyHandle && (this._cxyHandle.detach(), this._cxyHandle = null)
        },
        _constrainOnXYChange: function(e) {
            e.constrained || (e.newVal = this.getConstrainedXY(e.newVal))
        },
        _getRegion: function(e) {
            var t;
            return e ? (e = h.one(e), e && (t = e.get(d))) : t = this._posNode.get(p), t
        }
    }, e.WidgetPositionConstrain = m
}, "@VERSION@", {
    requires: ["widget-position"]
});
YUI.add("widget-position", function(e, t) {
    function d(e) {}
    var n = e.Lang,
        r = e.Widget,
        i = "xy",
        s = "position",
        o = "positioned",
        u = "boundingBox",
        a = "relative",
        f = "renderUI",
        l = "bindUI",
        c = "syncUI",
        h = r.UI_SRC,
        p = "xyChange";
    d.ATTRS = {
        x: {
            setter: function(e) {
                this._setX(e)
            },
            getter: function() {
                return this._getX()
            },
            lazyAdd: !1
        },
        y: {
            setter: function(e) {
                this._setY(e)
            },
            getter: function() {
                return this._getY()
            },
            lazyAdd: !1
        },
        xy: {
            value: [0, 0],
            validator: function(e) {
                return this._validateXY(e)
            }
        }
    }, d.POSITIONED_CLASS_NAME = r.getClassName(o), d.prototype = {
        initializer: function() {
            this._posNode = this.get(u), e.after(this._renderUIPosition, this, f), e.after(this._syncUIPosition, this, c), e.after(this._bindUIPosition, this, l)
        },
        _renderUIPosition: function() {
            this._posNode.addClass(d.POSITIONED_CLASS_NAME)
        },
        _syncUIPosition: function() {
            var e = this._posNode;
            e.getStyle(s) === a && this.syncXY(), this._uiSetXY(this.get(i))
        },
        _bindUIPosition: function() {
            this.after(p, this._afterXYChange)
        },
        move: function() {
            var e = arguments,
                t = n.isArray(e[0]) ? e[0] : [e[0], e[1]];
            this.set(i, t)
        },
        syncXY: function() {
            this.set(i, this._posNode.getXY(), {
                src: h
            })
        },
        _validateXY: function(e) {
            return n.isArray(e) && n.isNumber(e[0]) && n.isNumber(e[1])
        },
        _setX: function(e) {
            this.set(i, [e, this.get(i)[1]])
        },
        _setY: function(e) {
            this.set(i, [this.get(i)[0], e])
        },
        _getX: function() {
            return this.get(i)[0]
        },
        _getY: function() {
            return this.get(i)[1]
        },
        _afterXYChange: function(e) {
            e.src != h && this._uiSetXY(e.newVal)
        },
        _uiSetXY: function(e) {
            this._posNode.setXY(e)
        }
    }, e.WidgetPosition = d
}, "@VERSION@", {
    requires: ["base-build", "node-screen", "widget"]
});
YUI.add("widget-skin", function(e, t) {
    var n = "boundingBox",
        r = "contentBox",
        i = "skin",
        s = e.ClassNameManager.getClassName;
    e.Widget.prototype.getSkinName = function(e) {
        var t = this.get(r) || this.get(n),
            o, u;
        return e = e || s(i, ""), u = new RegExp("\\b" + e + "(\\S+)"), t && t.ancestor(function(e) {
            return o = e.get("className").match(u), o
        }), o ? o[1] : null
    }
}, "@VERSION@", {
    requires: ["widget-base"]
});
YUI.add("widget-stack", function(e, t) {
    function O(e) {}
    var n = e.Lang,
        r = e.UA,
        i = e.Node,
        s = e.Widget,
        o = "zIndex",
        u = "shim",
        a = "visible",
        f = "boundingBox",
        l = "renderUI",
        c = "bindUI",
        h = "syncUI",
        p = "offsetWidth",
        d = "offsetHeight",
        v = "parentNode",
        m = "firstChild",
        g = "ownerDocument",
        y = "width",
        b = "height",
        w = "px",
        E = "shimdeferred",
        S = "shimresize",
        x = "visibleChange",
        T = "widthChange",
        N = "heightChange",
        C = "shimChange",
        k = "zIndexChange",
        L = "contentUpdate",
        A = "stacked";
    O.ATTRS = {
        shim: {
            value: r.ie == 6
        },
        zIndex: {
            value: 0,
            setter: "_setZIndex"
        }
    }, O.HTML_PARSER = {
        zIndex: function(e) {
            return this._parseZIndex(e)
        }
    }, O.SHIM_CLASS_NAME = s.getClassName(u), O.STACKED_CLASS_NAME = s.getClassName(A), O.SHIM_TEMPLATE = '<iframe class="' + O.SHIM_CLASS_NAME + '" frameborder="0" title="Widget Stacking Shim" src="javascript:false" tabindex="-1" role="presentation"></iframe>', O.prototype = {
        initializer: function() {
            this._stackNode = this.get(f), this._stackHandles = {}, e.after(this._renderUIStack, this, l), e.after(this._syncUIStack, this, h), e.after(this._bindUIStack, this, c)
        },
        _syncUIStack: function() {
            this._uiSetShim(this.get(u)), this._uiSetZIndex(this.get(o))
        },
        _bindUIStack: function() {
            this.after(C, this._afterShimChange), this.after(k, this._afterZIndexChange)
        },
        _renderUIStack: function() {
            this._stackNode.addClass(O.STACKED_CLASS_NAME)
        },
        _parseZIndex: function(e) {
            var t;
            return !e.inDoc() || e.getStyle("position") === "static" ? t = "auto" : t = e.getComputedStyle("zIndex"), t === "auto" ? null : t
        },
        _setZIndex: function(e) {
            return n.isString(e) && (e = parseInt(e, 10)), n.isNumber(e) || (e = 0), e
        },
        _afterShimChange: function(e) {
            this._uiSetShim(e.newVal)
        },
        _afterZIndexChange: function(e) {
            this._uiSetZIndex(e.newVal)
        },
        _uiSetZIndex: function(e) {
            this._stackNode.setStyle(o, e)
        },
        _uiSetShim: function(e) {
            e ? (this.get(a) ? this._renderShim() : this._renderShimDeferred(), r.ie == 6 && this._addShimResizeHandlers()) : this._destroyShim()
        },
        _renderShimDeferred: function() {
            this._stackHandles[E] = this._stackHandles[E] || [];
            var e = this._stackHandles[E],
                t = function(e) {
                    e.newVal && this._renderShim()
                };
            e.push(this.on(x, t))
        },
        _addShimResizeHandlers: function() {
            this._stackHandles[S] = this._stackHandles[S] || [];
            var e = this.sizeShim,
                t = this._stackHandles[S];
            t.push(this.after(x, e)), t.push(this.after(T, e)), t.push(this.after(N, e)), t.push(this.after(L, e))
        },
        _detachStackHandles: function(e) {
            var t = this._stackHandles[e],
                n;
            if (t && t.length > 0)
                while (n = t.pop()) n.detach()
        },
        _renderShim: function() {
            var e = this._shimNode,
                t = this._stackNode;
            e || (e = this._shimNode = this._getShimTemplate(), t.insertBefore(e, t.get(m)), this._detachStackHandles(E), this.sizeShim())
        },
        _destroyShim: function() {
            this._shimNode && (this._shimNode.get(v).removeChild(this._shimNode), this._shimNode = null, this._detachStackHandles(E), this._detachStackHandles(S))
        },
        sizeShim: function() {
            var e = this._shimNode,
                t = this._stackNode;
            e && r.ie === 6 && this.get(a) && (e.setStyle(y, t.get(p) + w), e.setStyle(b, t.get(d) + w))
        },
        _getShimTemplate: function() {
            return i.create(O.SHIM_TEMPLATE, this._stackNode.get(g))
        }
    }, e.WidgetStack = O
}, "@VERSION@", {
    requires: ["base-build", "widget"],
    skinnable: !0
});
YUI.add("widget-stdmod", function(e, t) {
    function H(e) {}
    var n = e.Lang,
        r = e.Node,
        i = e.UA,
        s = e.Widget,
        o = "",
        u = "hd",
        a = "bd",
        f = "ft",
        l = "header",
        c = "body",
        h = "footer",
        p = "fillHeight",
        d = "stdmod",
        v = "Node",
        m = "Content",
        g = "firstChild",
        y = "childNodes",
        b = "ownerDocument",
        w = "contentBox",
        E = "height",
        S = "offsetHeight",
        x = "auto",
        T = "headerContentChange",
        N = "bodyContentChange",
        C = "footerContentChange",
        k = "fillHeightChange",
        L = "heightChange",
        A = "contentUpdate",
        O = "renderUI",
        M = "bindUI",
        _ = "syncUI",
        D = "_applyParsedConfig",
        P = e.Widget.UI_SRC;
    H.HEADER = l, H.BODY = c, H.FOOTER = h, H.AFTER = "after", H.BEFORE = "before", H.REPLACE = "replace";
    var B = H.HEADER,
        j = H.BODY,
        F = H.FOOTER,
        I = B + m,
        q = F + m,
        R = j + m;
    H.ATTRS = {
        headerContent: {
            value: null
        },
        footerContent: {
            value: null
        },
        bodyContent: {
            value: null
        },
        fillHeight: {
            value: H.BODY,
            validator: function(e) {
                return this._validateFillHeight(e)
            }
        }
    }, H.HTML_PARSER = {
        headerContent: function(e) {
            return this._parseStdModHTML(B)
        },
        bodyContent: function(e) {
            return this._parseStdModHTML(j)
        },
        footerContent: function(e) {
            return this._parseStdModHTML(F)
        }
    }, H.SECTION_CLASS_NAMES = {
        header: s.getClassName(u),
        body: s.getClassName(a),
        footer: s.getClassName(f)
    }, H.TEMPLATES = {
        header: '<div class="' + H.SECTION_CLASS_NAMES[B] + '"></div>',
        body: '<div class="' + H.SECTION_CLASS_NAMES[j] + '"></div>',
        footer: '<div class="' + H.SECTION_CLASS_NAMES[F] + '"></div>'
    }, H.prototype = {
        initializer: function() {
            this._stdModNode = this.get(w), e.before(this._renderUIStdMod, this, O), e.before(this._bindUIStdMod, this, M), e.before(this._syncUIStdMod, this, _)
        },
        _syncUIStdMod: function() {
            var e = this._stdModParsed;
            (!e || !e[I]) && this._uiSetStdMod(B, this.get(I)), (!e || !e[R]) && this._uiSetStdMod(j, this.get(R)), (!e || !e[q]) && this._uiSetStdMod(F, this.get(q)), this._uiSetFillHeight(this.get(p))
        },
        _renderUIStdMod: function() {
            this._stdModNode.addClass(s.getClassName(d)), this._renderStdModSections(), this.after(T, this._afterHeaderChange), this.after(N, this._afterBodyChange), this.after(C, this._afterFooterChange)
        },
        _renderStdModSections: function() {
            n.isValue(this.get(I)) && this._renderStdMod(B), n.isValue(this.get(R)) && this._renderStdMod(j), n.isValue(this.get(q)) && this._renderStdMod(F)
        },
        _bindUIStdMod: function() {
            this.after(k, this._afterFillHeightChange), this.after(L, this._fillHeight), this.after(A, this._fillHeight)
        },
        _afterHeaderChange: function(e) {
            e.src !== P && this._uiSetStdMod(B, e.newVal, e.stdModPosition)
        },
        _afterBodyChange: function(e) {
            e.src !== P && this._uiSetStdMod(j, e.newVal, e.stdModPosition)
        },
        _afterFooterChange: function(e) {
            e.src !== P && this._uiSetStdMod(F, e.newVal, e.stdModPosition)
        },
        _afterFillHeightChange: function(e) {
            this._uiSetFillHeight(e.newVal)
        },
        _validateFillHeight: function(e) {
            return !e || e == H.BODY || e == H.HEADER || e == H.FOOTER
        },
        _uiSetFillHeight: function(e) {
            var t = this.getStdModNode(e),
                n = this._currFillNode;
            n && t !== n && n.setStyle(E, o), t && (this._currFillNode = t), this._fillHeight()
        },
        _fillHeight: function() {
            if (this.get(p)) {
                var e = this.get(E);
                e != o && e != x && this.fillHeight(this.getStdModNode(this.get(p)))
            }
        },
        _uiSetStdMod: function(e, t, r) {
            if (n.isValue(t)) {
                var i = this.getStdModNode(e, !0);
                this._addStdModContent(i, t, r), this.set(e + m, this._getStdModContent(e), {
                    src: P
                })
            } else this._eraseStdMod(e);
            this.fire(A)
        },
        _renderStdMod: function(e) {
            var t = this.get(w),
                n = this._findStdModSection(e);
            return n || (n = this._getStdModTemplate(e)), this._insertStdModSection(t, e, n), this[e + v] = n, this[e + v]
        },
        _eraseStdMod: function(e) {
            var t = this.getStdModNode(e);
            t && (t.remove(!0), delete this[e + v])
        },
        _insertStdModSection: function(e, t, n) {
            var r = e.get(g);
            if (t === F || !r) e.appendChild(n);
            else if (t === B) e.insertBefore(n, r);
            else {
                var i = this[F + v];
                i ? e.insertBefore(n, i) : e.appendChild(n)
            }
        },
        _getStdModTemplate: function(e) {
            return r.create(H.TEMPLATES[e], this._stdModNode.get(b))
        },
        _addStdModContent: function(e, t, n) {
            switch (n) {
                case H.BEFORE:
                    n = 0;
                    break;
                case H.AFTER:
                    n = undefined;
                    break;
                default:
                    n = H.REPLACE
            }
            e.insert(t, n)
        },
        _getPreciseHeight: function(e) {
            var t = e ? e.get(S) : 0,
                n = "getBoundingClientRect";
            if (e && e.hasMethod(n)) {
                var r = e.invoke(n);
                r && (t = r.bottom - r.top)
            }
            return t
        },
        _findStdModSection: function(e) {
            return this.get(w).one("> ." + H.SECTION_CLASS_NAMES[e])
        },
        _parseStdModHTML: function(t) {
            var n = this._findStdModSection(t);
            return n ? (this._stdModParsed || (this._stdModParsed = {}, e.before(this._applyStdModParsedConfig, this, D)), this._stdModParsed[t + m] = 1, n.get("innerHTML")) : null
        },
        _applyStdModParsedConfig: function(e, t, n) {
            var r = this._stdModParsed;
            r && (r[I] = !(I in t) && I in r, r[R] = !(R in t) && R in r, r[q] = !(q in t) && q in r)
        },
        _getStdModContent: function(e) {
            return this[e + v] ? this[e + v].get(y) : null
        },
        setStdModContent: function(e, t, n) {
            this.set(e + m, t, {
                stdModPosition: n
            })
        },
        getStdModNode: function(e, t) {
            var n = this[e + v] || null;
            return !n && t && (n = this._renderStdMod(e)), n
        },
        fillHeight: function(e) {
            if (e) {
                var t = this.get(w),
                    r = [this.headerNode, this.bodyNode, this.footerNode],
                    s, o, u = 0,
                    a = 0,
                    f = !1;
                for (var l = 0, c = r.length; l < c; l++) s = r[l], s && (s !== e ? u += this._getPreciseHeight(s) : f = !0);
                f && ((i.ie || i.opera) && e.set(S, 0), o = t.get(S) - parseInt(t.getComputedStyle("paddingTop"), 10) - parseInt(t.getComputedStyle("paddingBottom"), 10) - parseInt(t.getComputedStyle("borderBottomWidth"), 10) - parseInt(t.getComputedStyle("borderTopWidth"), 10), n.isNumber(o) && (a = o - u, a >= 0 && e.set(S, a)))
            }
        }
    }, e.WidgetStdMod = H
}, "@VERSION@", {
    requires: ["base-build", "widget"]
});
YUI.add("widget-uievents", function(e, t) {
    var n = "boundingBox",
        r = e.Widget,
        i = "render",
        s = e.Lang,
        o = ":",
        u = e.Widget._uievts = e.Widget._uievts || {};
    e.mix(r.prototype, {
        _destroyUIEvents: function() {
            var t = e.stamp(this, !0);
            e.each(u, function(n, r) {
                n.instances[t] && (delete n.instances[t], e.Object.isEmpty(n.instances) && (n.handle.detach(), u[r] && delete u[r]))
            })
        },
        UI_EVENTS: e.Node.DOM_EVENTS,
        _getUIEventNode: function() {
            return this.get(n)
        },
        _createUIEvent: function(t) {
            var n = this._getUIEventNode(),
                i = e.stamp(n) + t,
                s = u[i],
                o;
            s || (o = n.delegate(t, function(e) {
                var t = r.getByNode(this);
                t && t._filterUIEvent(e) && t.fire(e.type, {
                    domEvent: e
                })
            }, "." + e.Widget.getClassName()), u[i] = s = {
                instances: {},
                handle: o
            }), s.instances[e.stamp(this)] = 1
        },
        _filterUIEvent: function(e) {
            return e.currentTarget.compareTo(e.container) || e.container.compareTo(this._getUIEventNode())
        },
        _getUIEvent: function(e) {
            if (s.isString(e)) {
                var t = this.parseType(e)[1],
                    n, r;
                return t && (n = t.indexOf(o), n > -1 && (t = t.substring(n + o.length)), this.UI_EVENTS[t] && (r = t)), r
            }
        },
        _initUIEvent: function(e) {
            var t = this._getUIEvent(e),
                n = this._uiEvtsInitQueue || {};
            t && !n[t] && (this._uiEvtsInitQueue = n[t] = 1, this.after(i, function() {
                this._createUIEvent(t), delete this._uiEvtsInitQueue[t]
            }))
        },
        on: function(e) {
            return this._initUIEvent(e), r.superclass.on.apply(this, arguments)
        },
        publish: function(e, t) {
            var n = this._getUIEvent(e);
            return n && t && t.defaultFn && this._initUIEvent(n), r.superclass.publish.apply(this, arguments)
        }
    }, !0)
}, "@VERSION@", {
    requires: ["node-event-delegate", "widget-base"]
});
YUI.add("yui-throttle", function(e, t) {
    /*! Based on work by Simon Willison: http://gist.github.com/292562 */
    ;
    e.throttle = function(t, n) {
        n = n ? n : e.config.throttleTime || 150;
        if (n === -1) return function() {
            t.apply(this, arguments)
        };
        var r = e.Lang.now();
        return function() {
            var i = e.Lang.now();
            i - r > n && (r = i, t.apply(this, arguments))
        }
    }
}, "@VERSION@", {
    requires: ["yui-base"]
});
YUI.add("gallery-sm-editor-base", function(e, t) {
    e.Node.DOM_EVENTS.paste = 1;
    var n = e.config.doc,
        r = e.config.win,
        i = e.ClassNameManager.getClassName,
        s = e.Editor.DOM,
        o = "blur",
        u = "focus",
        a = "render",
        f = "selectionChange",
        l = e.Base.create("editorBase", e.View, [], {
            classNames: {
                cursor: i("sm-editor-cursor", !0),
                editor: i("sm-editor", !0),
                input: i("sm-editor-input", !0)
            },
            commands: {
                insertHTML: {
                    commandFn: "_insertHTML"
                },
                insertText: {
                    commandFn: "_insertText"
                }
            },
            supportedTags: "a, br, div, p, span",
            initializer: function() {
                this.selection = new e.Selection, this.selectors = {}, this._cursorHTML = '<span class="' + this.classNames.cursor + '"></span>', e.Object.each(this.classNames, function(e, t) {
                    this.selectors[t] = "." + e
                }, this), this._attachEvents()
            },
            destructor: function() {
                this._detachEvents(), this.selection = null
            },
            blur: function() {
                return this._rendered && this._inputNode.blur(), this
            },
            command: function(t) {
                var n, r, i = t,
                    s = e.Array(arguments, 1, !0);
                return "string" == typeof i && (n = this.commands[i], n && (i = n.commandFn, n.style && s.unshift(t)), "string" == typeof i && (i = this[i])), this.focus(), "function" == typeof i && (r = i.apply(this, s), this._updateSelection({
                    force: !0
                })), r || this.query(t)
            },
            focus: function() {
                return this._rendered && this._inputNode.focus(), this
            },
            query: function(t) {
                var n, r, i = t,
                    s = e.Array(arguments, 0, !0);
                return "string" == typeof i && (n = this.commands[i], n && (i = n.queryFn), i = this[i]), this.focus(), "function" == typeof i && (r = i.apply(this, s)), r
            },
            render: function() {
                var e = this.get("container"),
                    t = e.one(this.selectors.input);
                e.addClass(this.classNames.editor), t || (t = e.appendChild("<div/>").addClass(this.classNames.input));
                var n = this.get("html"),
                    r = this.get("text");
                return n ? t.setHTML(n) : r ? t.set("text", r) : t.setHTML("<p><br></p>"), t.set("contentEditable", !0), this._inputNode = t, this._rendered = !0, this.fire(a), this
            },
            _attachEvents: function() {
                if (this._events) return;
                var e = this.get("container"),
                    t = this.selectors;
                this._events = [e.delegate("blur", this._onBlur, t.input, this), e.delegate("copy", this._onCopy, t.input, this), e.delegate("cut", this._onCut, t.input, this), e.delegate("dblclick", this._onDblClick, t.input, this), e.delegate("focus", this._onFocus, t.input, this), e.delegate("paste", this._onPaste, t.input, this)]
            },
            _detachEvents: function() {
                this._events && ((new e.EventHandle(this._events)).detach(), this._events = null)
            },
            _execCommand: function(e, t) {
                if (!n.queryCommandSupported(e) || !n.queryCommandEnabled(e)) return;
                n.execCommand(e, !1, t)
            },
            _getHTML: function(e) {
                return this._rendered ? this._inputNode.getHTML() : e
            },
            _getNodes: function(t, n) {
                var r, i, o, u = [];
                t = t.clone().shrink(), r = t.startNode(), i = t.startOffset();
                if (t.isCollapsed()) {
                    var a = r.get("childNodes");
                    !s.isTextNode(r) && a.item(i - 1) ? o = a.item(i - 1) : o = r
                } else o = r.get("parentNode");
                while (o && o !== this._inputNode && this._inputNode.contains(o)) o.test(n) && u.push(o), o = o.get("parentNode");
                return t.traverse(function(e) {
                    e.test(n) && u.push(e)
                }), e.all(u)
            },
            _getText: function(e) {
                return this._rendered ? this._inputNode.get("text") : e
            },
            _insertHTML: function(t) {
                var n = typeof t == "string" ? e.Node.create(t) : t,
                    r = this.selection,
                    i = r.range();
                if (!i) return;
                return i.expand({
                    stopAt: this._inputNode
                }), n = i.deleteContents().insertNode(n), i.collapse(), r.select(i), n
            },
            _insertTab: function() {
                this._insertHTML('<span style="white-space:pre;">   </span>')
            },
            _insertText: function(e) {
                return e = e.replace(/\n+/g, " "), this._insertHTML(n.createTextNode(e))
            },
            _noCommand: function() {},
            _queryCommandValue: function(e) {
                return n.queryCommandSupported(e) ? n.queryCommandValue(e) : null
            },
            _setHTML: function(e) {
                return this._rendered && this._inputNode.setHTML(e), e
            },
            _setText: function(e) {
                return this._rendered && this._inputNode.set("text", e), e
            },
            _updateSelection: function(e) {
                var t = this._selectedRange || null,
                    n = this.selection.range() || null,
                    r = e && e.force,
                    i = e && e.silent;
                if (!r && (n === t || t && t.isEquivalent(n) && t.toHTML() === n.toHTML())) return;
                this._selectedRange = n, !i && (!n || n.isInsideNode(this._inputNode)) && this.fire(f, {
                    prevRange: t,
                    range: n,
                    selection: this.selection
                })
            },
            _onBlur: function() {
                if (!this._rendered) return;
                clearInterval(this._selectionMonitor), this.fire(o)
            },
            _onCopy: function(e) {
                var t = e._event.clipboardData || r.clipboardData,
                    n = this.selection.range(),
                    i = n.cloneContents().getHTML();
                e.preventDefault();
                try {
                    t.setData("text/html", i), t.setData("text/plain", i)
                } catch (s) {
                    t.setData("text", i)
                }
            },
            _onCut: function(e) {
                var t = e._event.clipboardData || r.clipboardData,
                    n = this.selection.range(),
                    i;
                n.expand({
                    stopAt: this._inputNode
                }), i = n.extractContents().getHTML(), e.preventDefault(), this.selection.select(n);
                try {
                    t.setData("text/html", i), t.setData("text/plain", i)
                } catch (s) {
                    t.setData("text", i)
                }
            },
            _onDblClick: function() {
                var e = this.selection.range();
                this.selection.select(e.shrink({
                    trim: !0
                }))
            },
            _onFocus: function() {
                var t = this,
                    n = this.selection,
                    r;
                if (!this._rendered) return;
                if (!(r = this._selectedRange)) {
                    var i = this._inputNode.get("firstChild") || this._inputNode;
                    r = new e.Range, r.selectNodeContents(i), r.collapse({
                        toStart: !0
                    })
                }
                n.select(r), this._updateSelection(), clearInterval(this._selectionMonitor), this._selectionMonitor = setInterval(function() {
                    t._updateSelection()
                }, 200), this.fire(u)
            },
            _onPaste: function(t) {
                var n = t._event.clipboardData || r.clipboardData,
                    i = n.getData("text");
                t.preventDefault(), i = e.Node.create(i).get("text"), this.command("insertText", i)
            }
        }, {
            ATTRS: {
                html: {
                    getter: "_getHTML",
                    setter: "_setHTML",
                    value: ""
                },
                outputName: {
                    value: "editor",
                    writeOnce: "initOnly"
                },
                text: {
                    getter: "_getText",
                    setter: "_setText",
                    value: ""
                }
            }
        });
    e.namespace("Editor").Base = l
}, "@VERSION@", {
    requires: ["base-build", "classnamemanager", "event-custom", "event-focus", "gallery-sm-editor-dom", "gallery-sm-selection", "node-base", "node-event-delegate", "view"]
});
YUI.add("gallery-sm-editor-block", function(e, t) {
    (function() {
        var t = e.Editor.DOM,
            n = e.Base.create("editorBlock", e.Base, [], {
                blockCommands: {
                    formatBlock: {
                        commandFn: "_formatBlock",
                        queryFn: "_queryBlockCommand"
                    },
                    heading: {
                        commandFn: "_formatBlock",
                        queryFn: "_queryBlockCommand"
                    },
                    insertBreak: {
                        commandFn: "_noCommand"
                    },
                    insertParagraph: {
                        commandFn: "_insertReturn",
                        queryFn: "_queryBlockCommand"
                    }
                },
                blockKeyCommands: {
                    "alt+c": "justifyCenter",
                    "alt+f": "justifyFull",
                    "alt+l": "justifyLeft",
                    "alt+r": "justifyRight",
                    enter: "insertParagraph",
                    "ctrl+enter": {
                        fn: "insertBreak",
                        allowDefault: !0,
                        async: !0
                    },
                    "shift+enter": {
                        fn: "insertBreak",
                        allowDefault: !0,
                        async: !0
                    }
                },
                blockTags: "div, p, h1, h2, h3, h4, h5",
                initializer: function() {
                    this.commands = e.merge(this.commands, this.blockCommands), this.supportedTags ? this.supportedTags += "," + this.blockTags : this.supportedTags = this.blockTags, this.keyCommands && (this.keyCommands = e.merge(this.keyCommands, this.blockKeyCommands)), this._attachBlockEvents()
                },
                destructor: function() {
                    this._detachBlockEvents()
                },
                _attachBlockEvents: function() {
                    if (this._blockEvents) return;
                    this._blockEvents = [this.on("selectionChange", this._blockOnSelectionChange, this)]
                },
                _detachBlockEvents: function() {
                    this._blockEvents && ((new e.EventHandle(this._blockEvents)).detach(), this._blockEvents = null)
                },
                _formatBlock: function(n) {
                    n = n.replace(/[<>]/g, "");
                    if (-1 < this.blockTags.indexOf(n)) {
                        n = "<" + n + ">";
                        var r = this.selection,
                            i = r.range(),
                            s = [];
                        this._getNodes(i, this.blockTags).each(function(r) {
                            var i = e.Node.create(n);
                            i.insert(r.get("childNodes")), t.copyStyles(r, i, this.supportedStyles, {
                                explicit: !0,
                                overwrite: !1
                            }), r.replace(i).remove(!0), s.push(i)
                        }, this), i.startNode(s[0]), i.endNode(s[s.length]), i.shrink().collapse({
                            toStart: !0
                        }), r.select(i)
                    }
                },
                _insertReturn: function() {
                    var e = this.selection,
                        n = e.range().shrink(),
                        r, i, s;
                    n.deleteContents(), r = this._getNodes(n, this.blockTags).item(0), "" === r.get("text") && n.selectNodeContents(r).collapse(), n.expand({
                        stopAt: r
                    }), i = n.clone().selectNodeContents(r).collapse({
                        toStart: !0
                    }), s = n.clone().selectNodeContents(r).collapse(), 0 === n.compare(i, {
                        myPoint: "start",
                        otherPoint: "start"
                    }) ? r = r.insert(r.cloneNode(), "before").previous() : 0 === n.compare(s, {
                        myPoint: "end",
                        otherPoint: "end"
                    }) ? r = r.insert("<p></p>", "after").next() : r = this._splitRange(n, this.blockTags), t.isEmptyNode(r) && r.setHTML("<br>"), n.selectNodeContents(r).collapse({
                        toStart: !0
                    }), e.select(n)
                },
                _queryBlockCommand: function() {
                    return this._getNodes(this.selection.range(), this.blockTags)
                },
                _splitRange: function(e, n) {
                    var r, i;
                    r = e.endNode(), i = e.endOffset();
                    while (!r.test(n)) i = t.split(r, i), r = i.get("parentNode");
                    return this._inputNode !== r && (i = t.split(r, i), r = i.get("parentNode")), i._node || (i = r.get("childNodes").item(i)), i
                },
                _blockOnSelectionChange: function(t) {
                    var n = t.range,
                        r;
                    if (!n || !n.isCollapsed()) return;
                    r = n.startNode(), this._inputNode === r.ancestor(this.blockTags, !0) && e.Editor.Base.prototype._execCommand.call(this, "formatBlock", "<p>")
                }
            });
        e.namespace("Editor").Block = n
    })()
}, "@VERSION@", {
    requires: ["base-build", "event-custom", "gallery-sm-editor-base", "gallery-sm-editor-dom", "gallery-sm-editor-keys", "node-base"]
});
YUI.add("gallery-sm-editor-delete", function(e, t) {
    (function() {
        var t = !!e.UA.ie,
            n = e.Base.create("editorDelete", e.Base, [], {
                deleteCommands: {
                    "delete": {
                        commandFn: "_delete"
                    },
                    forwardDelete: {
                        commandFn: "_forwardDelete"
                    }
                },
                deleteKeyCommands: t ? {
                    backspace: {
                        fn: "delete",
                        allowDefault: !0,
                        async: !0
                    },
                    "delete": {
                        fn: "forwardDelete",
                        allowDefault: !0,
                        async: !0
                    }
                } : {
                    backspace: {
                        fn: "delete",
                        allowDefault: !1,
                        async: !1
                    },
                    "delete": {
                        fn: "forwardDelete",
                        allowDefault: !1,
                        async: !1
                    }
                },
                initializer: function() {
                    this.commands = e.merge(this.commands, this.deleteCommands), this.keyCommands && (this.keyCommands = e.merge(this.keyCommands, this.deleteKeyCommands))
                },
                _delete: t ? function(e) {} : function(e) {
                    var t = this.selection,
                        n = t.range(),
                        r = n.startNode().ancestor(this.blockTags, !0),
                        i = n.endNode().ancestor(this.blockTags, !0);
                    "forward" !== e && (e = "back");
                    if (n.isCollapsed()) {
                        n.expand({
                            stopAt: r
                        });
                        var s = n.clone().selectNodeContents(r),
                            o = "forward" === e ? "end" : "start",
                            u = n.compare(s, {
                                myPoint: o,
                                otherPoint: o
                            });
                        0 === u && ("forward" === e ? i = r.next() : (i = r, r = i.previous())), n.collapse()
                    }
                    r && i && r !== i ? (n.deleteContents(), n.endNode(r.get("lastChild"), "after"), n.collapse(), i.get("text").length && r.append(i.get("childNodes")), i.remove(!0)) : ("forward" === e ? this._execCommand("forwardDelete") : this._execCommand("delete"), this._inputNode === n.parentNode() && (r = this._inputNode.get("childNodes").item(n.startOffset() - 1), r && n.selectNodeContents(r))), n.collapse({
                        toStart: "back" === e
                    }), t.select(n)
                },
                _forwardDelete: t ? function() {} : function() {
                    return this._delete("forward")
                }
            });
        e.namespace("Editor").Delete = n
    })()
}, "@VERSION@", {
    requires: ["base-build", "gallery-sm-editor-base", "gallery-sm-editor-block", "gallery-sm-editor-keys", "node-base"]
});
YUI.add("gallery-sm-editor-dom", function(e, t) {
    var n = {};
    n.copyStyles = function(t, r, i, s) {
        var o = {},
            u = s && s.explicit,
            a = s && s.overwrite;
        t = e.one(t), r = e.one(r);
        if (!n.isElementNode(t) || !n.isElementNode(r)) return;
        e.Array.each(i, function(e) {
            var n = u ? t._node.style[e] : t.getStyle(e);
            "" !== n && (a || "" === r._node.style[e]) && (o[e] = n)
        }), r.setStyles(o)
    }, n.isElementNode = function(t) {
        return t = e.one(t), t._node && 1 === t._node.nodeType
    }, n.isEmptyNode = function(t) {
        return t = e.one(t), t && t.test("br") ? !1 : /^[^\S ]*$/.test(t ? t.get("text") : "") && !t.one("br")
    }, n.isTextNode = function(t) {
        return t = e.one(t), t._node && 3 === t._node.nodeType
    }, n.maxOffset = function(t) {
        return t = e.one(t), t.get("childNodes").size() || t.get("length")
    }, n.split = function(t, r) {
        var i = t.get("childNodes"),
            s;
        return t = e.one(t), r && r._node ? r = i.indexOf(r) : r = parseInt(r, 10), isNaN(r) || r < 0 || r > n.maxOffset(t) ? t : n.isTextNode(t) ? e.one(t._node.splitText(r)) : (s = t.cloneNode(!1).append(i.splice(r)), t.insert(s, "after"), s)
    }, e.namespace("Editor").DOM = n
}, "@VERSION@", {
    requires: ["node-base", "node-style"]
});
YUI.add("gallery-sm-editor-format", function(e, t) {
    (function() {
        var t = e.config.doc,
            n = e.Editor.DOM,
            r = "<span></span>",
            i = e.Base.create("editorFormat", e.Base, [], {
                initializer: function() {
                    this.supportedStyles = [], e.Object.each(this.styleCommands, function(e) {
                        this.supportedStyles.push(e.style.property)
                    }, this)
                },
                _formatHTML: function(i) {
                    function s(t) {
                        var i = t.get("childNodes")._nodes;
                        e.Array.each(i.reverse(), function(t) {
                            var i;
                            t = e.one(t), i = t.get("parentNode"), n.isTextNode(t) ? this._isBlockNode(i) ? t.wrap(r) : t.get("previousSibling") && n.split(i, t) : (t.test(this.supportedTags) ? !this._isBlockNode(i) && !i.test("a") && (i.insert(t, "after"), this._isBlockNode(t) || (t.addClass(i.get("className")), n.copyStyles(i, t, this.supportedStyles, {
                                explicit: !0,
                                overwrite: !1
                            }))) : t.replace(t.get("text")), s.call(this, t), n.isEmptyNode(t) && t.remove(!0), t.removeAttribute("id"))
                        }, this)
                    }
                    var o = e.one(t.createDocumentFragment()).setHTML(i);
                    return s.call(this, o), o
                },
                _getHTML: function(t) {
                    return t = e.Editor.Base.prototype._getHTML.call(this, t), this.get("formatFn")(t).getHTML()
                },
                _isBlockNode: function(t) {
                    return t = e.one(t), !n.isTextNode(t) && (t.get("nodeName") === "#document-fragment" || t.test(this.blockTags))
                },
                _isStyleNode: function(t) {
                    return t = e.one(t), t && !n.isTextNode(t) && t.test(this.styleTags)
                },
                _setHTML: function(t) {
                    return t = this.get("formatFn")(t).getHTML(), e.Editor.Base.prototype._setHTML.call(this, t)
                }
            }, {
                ATTRS: {
                    formatFn: {
                        readOnly: !0,
                        setter: function(t) {
                            return e.bind(t, this)
                        },
                        validator: e.Lang.isFunction,
                        valueFn: function() {
                            return this._formatHTML
                        }
                    }
                }
            });
        e.namespace("Editor").Format = i
    })()
}, "@VERSION@", {
    requires: ["base-build", "gallery-sm-editor-base", "gallery-sm-editor-dom", "node-base"]
});
YUI.add("gallery-sm-editor-keys", function(e, t) {
    var n = e.Base.create("editorKeys", e.Base, [], {
        ignoreKeyCodes: {
            16: "shift",
            17: "ctrl",
            18: "alt",
            91: "leftmeta",
            93: "rightmeta",
            224: "meta"
        },
        keyCodeMap: {
            8: "backspace",
            9: "tab",
            13: "enter",
            27: "esc",
            32: "space",
            33: "pgup",
            34: "pgdown",
            35: "end",
            36: "home",
            37: "left",
            38: "up",
            39: "right",
            40: "down",
            46: "delete",
            49: "!",
            61: "=",
            173: "-",
            187: "=",
            189: "-",
            190: ".",
            191: "?",
            219: "[",
            221: "]"
        },
        keyCommands: {
            "ctrl+-": "decreaseFontSize",
            "ctrl+=": "increaseFontSize",
            tab: "_insertTab"
        },
        initializer: function() {
            this._attachKeyEvents()
        },
        destructor: function() {
            this._detachKeyEvents()
        },
        _attachKeyEvents: function() {
            if (this._keyEvents) return;
            var e = this.get("container");
            this._keyEvents = [e.delegate("keydown", this._onKeyDown, this.selectors.input, this)]
        },
        _detachKeyEvents: function() {
            this._keyEvents && ((new e.EventHandle(this._keyEvents)).detach(), this._keyEvents = null)
        },
        _onKeyDown: function(t) {
            var n = t.keyCode;
            if (this.ignoreKeyCodes[n]) return;
            var r = [];
            t.altKey && r.push("alt"), (t.ctrlKey || t.metaKey) && r.push("ctrl"), t.shiftKey && r.push("shift"), r.push(this.keyCodeMap[n] || String.fromCharCode(n).toLowerCase());
            var i = this.keyCommands[r.join("+")];
            if (i) {
                var s = i.fn || i,
                    o = [t, r];
                typeof s == "string" && (this.commands[s] && (o.unshift(s), s = "command"), s = this[s]), i.allowDefault || t.preventDefault(), i.async ? e.later(0, this, s, o) : s.apply(this, o)
            }
        }
    });
    e.namespace("Editor").Keys = n
}, "@VERSION@", {
    requires: ["base-build", "event-custom", "gallery-sm-editor-base", "node-event-delegate"]
});
YUI.add("gallery-sm-editor-link", function(e, t) {
    (function() {
        var t = e.Base.create("editorLink", e.Base, [], {
            linkCommands: {
                createLink: {
                    commandFn: "_createLink",
                    queryFn: "isLink"
                },
                unlink: {
                    commandFn: "_unlink",
                    queryFn: "isLink"
                }
            },
            linkTags: "a",
            linkTemplate: '<a href="{href}" target="{target}"></a>',
            initializer: function() {
                this.commands = e.merge(this.commands, this.linkCommands), this.supportedTags ? this.supportedTags += "," + this.linkTags : this.supportedTags = this.linkTags
            },
            isLink: function() {
                return !!this._getAnchorNode()
            },
            _getAnchorNode: function() {
                this.focus();
                var e = this.selection.range().shrink().parentNode();
                return e.ancestor(this.linkTags, !0)
            },
            _createLink: function(t) {
                var n = this.selection.range(),
                    r, i;
                if (!n) return;
                this.isLink() && (this._unlink(), n = this.selection.range()), t || (t = {}), t.href = encodeURI(t.href || ""), t.target = encodeURIComponent(t.target || "_self"), r = e.Node.create(e.Lang.sub(this.linkTemplate, t)), i = this._getStyleNodes(n), r.append(i), n.insertNode(r);
                if (t.text && t.text !== n.toString()) {
                    var s = r.get("firstChild");
                    this._isStyleNode(s) ? (s.set("text", t.text), r.setHTML(s)) : r.set("text", t.text)
                }
                n.selectNode(r).collapse(), this.selection.select(n)
            },
            _unlink: function() {
                var e = this.selection,
                    t;
                if (t = this._getAnchorNode()) {
                    var n = t.get("firstChild"),
                        r = t.get("lastChild"),
                        i = e.range();
                    n.unwrap(), t.destroy(), i.startNode(n, 0), i.endNode(r, "after"), e.select(i.shrink({
                        trim: !0
                    }))
                }
            }
        });
        e.namespace("Editor").Link = t
    })()
}, "@VERSION@", {
    requires: ["base-build", "gallery-sm-editor-base", "node-base"]
});
YUI.add("gallery-sm-editor-queue", function(e, t) {
    (function() {
        var t = e.Base.create("editorStyle", e.Base, [], {
            queueKeyCommands: {
                down: {
                    fn: "_clearCommandQueue",
                    allowDefault: !0
                },
                end: {
                    fn: "_clearCommandQueue",
                    allowDefault: !0
                },
                esc: {
                    fn: "_clearCommandQueue",
                    allowDefault: !0
                },
                home: {
                    fn: "_clearCommandQueue",
                    allowDefault: !0
                },
                left: {
                    fn: "_clearCommandQueue",
                    allowDefault: !0
                },
                pgdown: {
                    fn: "_clearCommandQueue",
                    allowDefault: !0
                },
                pgup: {
                    fn: "_clearCommandQueue",
                    allowDefault: !0
                },
                right: {
                    fn: "_clearCommandQueue",
                    allowDefault: !0
                },
                tab: {
                    fn: "_clearCommandQueue",
                    allowDefault: !0
                },
                up: {
                    fn: "_clearCommandQueue",
                    allowDefault: !0
                }
            },
            initializer: function() {
                this.keyCommands && (this.keyCommands = e.merge(this.keyCommands, this.queueKeyCommands)), this._attachQueueEvents()
            },
            destructor: function() {
                this._detachQueueEvents()
            },
            _attachQueueEvents: function() {
                if (this._queueEvents) return;
                var t = this.get("container");
                this._queueEvents = [t.delegate("keypress", this._onKeyPress, this.selectors.input, this), e.Do.before(this._queueDoBeforeCommand, this, "command", this), e.Do.before(this._queueDoBeforeQuery, this, "query", this)]
            },
            _clearCommandQueue: function() {
                this._commandQueue = null
            },
            _detachQueueEvents: function() {
                this._queueEvents && ((new e.EventHandle(this._queueEvents)).detach(), this._queueEvents = null)
            },
            _flushCommandQueue: function() {
                if (!this._commandQueue) return;
                var t = e.merge(this._commandQueue);
                e.Object.each(t, function(e, t) {
                    this.command(t, e)
                }, this), this._clearCommandQueue()
            },
            _queueCommand: function(t, n) {
                var r = this.commands[t];
                return this._commandQueue || (this._commandQueue = {}), r.style && e.Lang.isValue(r.style.value) && (n = this._commandQueue[t] ? "" : r.style.value), this._commandQueue[t] = n, n
            },
            _onKeyPress: function(t) {
                if (t.metaKey) return;
                var n = this.selection,
                    r = n.range(),
                    i;
                r.shrink().isCollapsed() && this._commandQueue ? (t.preventDefault(), i = r.insertNode(e.Node.create(String.fromCharCode(t.charCode))), n.select(r.selectNode(i)), this._flushCommandQueue(), n.select(r.selectNode(i).shrink().collapse())) : this._clearCommandQueue()
            },
            _queueDoBeforeCommand: function(t, n) {
                var r = this.styleCommands[t],
                    i, s;
                if (r && "block" !== r.type) {
                    i = this.selection.range();
                    if (i && i.isCollapsed()) return s = this._queueCommand(t, n), this._updateSelection({
                        force: !0
                    }), new e.Do.Halt("Editor.Queue prevented command", s)
                } else this._clearCommandQueue()
            },
            _queueDoBeforeQuery: function(t) {
                var n = this._commandQueue && this._commandQueue[t],
                    r = this.styleCommands[t];
                if (r && e.Lang.isValue(n)) return e.Lang.isValue(r.style.value) && (n = n === r.style.value), new e.Do.Halt("Editor.Queue prevented query", n)
            }
        });
        e.namespace("Editor").Queue = t
    })()
}, "@VERSION@", {
    requires: ["base-build", "event-custom", "gallery-sm-editor-base", "gallery-sm-editor-keys", "node-event-delegate"]
});
YUI.add("gallery-sm-editor-style", function(e, t) {
    (function() {
        var t = e.Editor.DOM,
            n = "<span></span>",
            r = e.Base.create("editorStyle", e.Base, [], {
                styleCommands: {
                    bold: {
                        commandFn: "_execStyleCommand",
                        queryFn: "_queryStyleCommand",
                        style: {
                            property: "fontWeight",
                            value: "bold"
                        }
                    },
                    fontName: {
                        commandFn: "_execStyleCommand",
                        queryFn: "_queryStyleCommand",
                        style: {
                            property: "fontFamily"
                        }
                    },
                    fontSize: {
                        commandFn: "_execStyleCommand",
                        queryFn: "_queryStyleCommand",
                        style: {
                            property: "fontSize"
                        }
                    },
                    italic: {
                        commandFn: "_execStyleCommand",
                        queryFn: "_queryStyleCommand",
                        style: {
                            property: "fontStyle",
                            value: "italic"
                        }
                    },
                    justifyCenter: {
                        commandFn: "_execStyleCommand",
                        queryFn: "_queryStyleCommand",
                        style: {
                            property: "textAlign",
                            value: "center"
                        },
                        type: "block"
                    },
                    justifyFull: {
                        commandFn: "_execStyleCommand",
                        queryFn: "_queryStyleCommand",
                        style: {
                            property: "textAlign",
                            value: "justify"
                        },
                        type: "block"
                    },
                    justifyLeft: {
                        commandFn: "_execStyleCommand",
                        queryFn: "_queryStyleCommand",
                        style: {
                            property: "textAlign",
                            value: ""
                        },
                        type: "block"
                    },
                    justifyRight: {
                        commandFn: "_execStyleCommand",
                        queryFn: "_queryStyleCommand",
                        style: {
                            property: "textAlign",
                            value: "right"
                        },
                        type: "block"
                    },
                    strikeThrough: {
                        commandFn: "_execStyleCommand",
                        queryFn: "_queryStyleCommand",
                        style: {
                            property: "textDecoration",
                            value: "line-through"
                        }
                    },
                    underline: {
                        commandFn: "_execStyleCommand",
                        queryFn: "_queryStyleCommand",
                        style: {
                            property: "textDecoration",
                            value: "underline"
                        }
                    }
                },
                styleKeyCommands: {
                    "ctrl+b": "bold",
                    "ctrl+i": "italic",
                    "ctrl+u": "underline"
                },
                styleTags: "span",
                initializer: function() {
                    this.commands = e.merge(this.commands, this.styleCommands), this.supportedTags ? this.supportedTags += "," + this.styleTags : this.supportedTags = this.styleTags, this.keyCommands && (this.keyCommands = e.merge(this.keyCommands, this.styleKeyCommands))
                },
                styles: function(e) {
                    var t = {},
                        n;
                    if (e)
                        for (n in e) e.hasOwnProperty(n) && (t[n] = this.command(n, e[n]));
                    else {
                        var r = this.styleCommands;
                        for (n in r) r.hasOwnProperty(n) && (t[n] = this.query(n))
                    }
                    return t
                },
                _execStyleCommand: function(t, n) {
                    var r = this.commands[t],
                        i = this.selection.range(),
                        s, o;
                    if (!i || !r || !r.style) return;
                    "block" === r.type ? s = this._getNodes(i, this.blockTags) : s = this._getStyleNodes(i), o = s.item(0)._node.style[r.style.property], e.Lang.isValue(r.style.value) ? o && o === r.style.value ? o = "" : o = r.style.value : n ? o = r.style.value || n : o = "", s.setStyle(r.style.property, o), "block" !== r.type && (i.startNode(s.item(0)), i.endNode(s.item(s.size() - 1), "after"), this.selection.select(i.shrink()))
                },
                _getStyleNodes: function(r) {
                    var i, s = [];
                    r.shrink(), i = r.parentNode().ancestor(this.styleTags, !0, this.selectors.input);
                    if (i) {
                        if (r.toString() === i.get("text")) return new e.NodeList([i])
                    } else i = e.Node.create(n);
                    var o = r.startNode(),
                        u = r.startOffset(),
                        a = r.endNode(),
                        f = r.endOffset();
                    return r.traverse(function(e) {
                        if (!t.isTextNode(e)) return;
                        a === e && f !== t.maxOffset(a) && (e = t.split(e, f).get("previousSibling")), o === e && u && (e = t.split(e, u)), this._isStyleNode(e.get("parentNode")) ? (e.get("nextSibling") && t.split(e.get("parentNode"), e.get("nextSibling")), e.get("previousSibling") && t.split(e.get("parentNode"), e), s.push(e.get("parentNode"))) : s.push(e.wrap(i).get("parentNode"))
                    }, this), new e.NodeList(s)
                },
                _queryStyleCommand: function(t) {
                    var n = this.commands[t],
                        r = this.selection.range().clone(),
                        i = "span",
                        s = [],
                        o;
                    return r && n.style && ("block" === n.type && (i = this.blockTags), this._getNodes(r, i).each(function(e) {
                        var t;
                        n.style.computed ? t = e.getStyle(n.style.property) : t = e._node.style[n.style.property], s.push(t || "")
                    }), s = e.Array.dedupe(s), 1 === s.length && (o = s[0]), e.Lang.isValue(n.style.value) ? o = o == n.style.value : "" === o && (o = null)), o
                }
            });
        e.namespace("Editor").Style = r
    })()
}, "@VERSION@", {
    requires: ["base-build", "gallery-sm-editor-base", "gallery-sm-editor-dom", "gallery-sm-editor-keys", "node-base", "node-style"]
});
YUI.add("gallery-sm-editor-undo", function(e, t) {
    var n = e.Base.create("editorUndo", e.Base, [], {
        undoKeyCommands: {
            "ctrl+z": "undo",
            "ctrl+shift+z": "redo",
            backspace: {
                fn: "_addUndo",
                allowDefault: !0
            },
            "ctrl+x": {
                fn: "_addUndo",
                allowDefault: !0
            },
            "ctrl+v": {
                fn: "_addUndo",
                allowDefault: !0
            },
            "delete": {
                fn: "_addUndo",
                allowDefault: !0
            },
            enter: {
                fn: "_addUndo",
                allowDefault: !0,
                async: !0
            },
            ".": {
                fn: "_addUndo",
                allowDefault: !0,
                async: !0
            },
            "shift+!": {
                fn: "_addUndo",
                allowDefault: !0,
                async: !0
            },
            "shift+?": {
                fn: "_addUndo",
                allowDefault: !0,
                async: !0
            }
        },
        initializer: function() {
            this.keyCommands && (this.keyCommands = e.merge(this.keyCommands, this.undoKeyCommands)), this._redoStack = [], this._undoStack = [], e.Do.before(this._addUndo, this, "insertHTML", this), e.Do.before(this._beforeExecCommand, this, "_execCommand", this), this._attachUndoEvents()
        },
        destructor: function() {
            this._detachUndoEvents(), this._redoStack = null, this._undoStack = null
        },
        redo: function() {
            var t = this._redoStack.pop();
            if (typeof t != "string") return this;
            if (t.replace(this._cursorHTML, "") === this._inputNode.getHTML()) return this.redo();
            this._addUndo(), this._inputNode.setHTML(t);
            var n = this._inputNode.one(this.selectors.cursor);
            if (n) {
                var r = new e.Range;
                r.startNode(n, "after"), this.selection.select(r), n.remove(!0)
            }
            return this
        },
        undo: function() {
            var t = this._undoStack.pop();
            if (typeof t != "string") return this;
            if (t.replace(this._cursorHTML, "") === this._inputNode.getHTML()) return this.undo();
            this._addRedo(), this._inputNode.setHTML(t);
            var n = this._inputNode.one(this.selectors.cursor);
            if (n) {
                var r = new e.Range;
                r.startNode(n, "after"), this.selection.select(r), n.remove(!0)
            }
            return this
        },
        _addUndo: function() {
            var t = this.selection.range(),
                n = this._undoStack,
                r;
            t && (r = t.insertNode(e.Node.create(this._cursorHTML)), this.selection.select(t));
            var i = this._inputNode.getHTML();
            r && r.remove(!0), n.push(i) > this.get("undoLevels") && n.shift()
        },
        _addRedo: function() {
            var t = this.selection.range(),
                n = this._redoStack,
                r;
            t && (r = t.insertNode(e.Node.create(this._cursorHTML)), this.selection.select(t));
            var i = this._inputNode.getHTML();
            r && r.remove(!0), n.push(i) > this.get("undoLevels") && n.shift()
        },
        _attachUndoEvents: function() {
            if (this._undoEvents) return;
            this._undoEvents = [this.after("render", this._afterRender)]
        },
        _beforeExecCommand: function(e) {
            /^(?:redo|undo)$/i.test(e) || this._addUndo()
        },
        _detachUndoEvents: function() {
            this._undoEvents && ((new e.EventHandle(this._undoEvents)).detach(), this._undoEvents = null)
        },
        _afterRender: function() {
            this._addUndo()
        }
    }, {
        ATTRS: {
            undoLevels: {
                value: 20
            }
        }
    });
    e.namespace("Editor").Undo = n
}, "@VERSION@", {
    requires: ["base-build", "event-custom", "gallery-sm-editor-base", "gallery-sm-editor-keys", "gallery-sm-range"]
});
YUI.add("gallery-sm-editor", function(e, t) {
    e.Editor = e.mix(e.Base.create("editor", e.Editor.Base, [e.Editor.Delete, e.Editor.Keys, e.Editor.Link, e.Editor.Queue, e.Editor.Block, e.Editor.Style, e.Editor.Format], {}), e.Editor)
}, "@VERSION@", {
    use: ["gallery-sm-editor-base", "gallery-sm-editor-block", "gallery-sm-editor-delete", "gallery-sm-editor-format", "gallery-sm-editor-keys", "gallery-sm-editor-link", "gallery-sm-editor-queue", "gallery-sm-editor-style", "gallery-sm-editor-undo"],
    skinnable: !0
});
YUI.add("gallery-sm-menu-base", function(e, t) {
    var n = "disable",
        r = "enable",
        i = "hide",
        s = "show",
        o = e.Base.create("menuBase", e.Tree, [e.Tree.Labelable, e.Tree.Openable], {
            nodeClass: e.Menu.Item,
            initializer: function(e) {
                e && (e.nodes = e.items)
            },
            closeSubMenus: function() {
                return e.Object.each(this._openMenus, function(e) {
                    e.close()
                }, this), this
            },
            disableItem: function(e, t) {
                return e.isDisabled() || this._fireTreeEvent(n, {
                    item: e
                }, {
                    defaultFn: this._defDisableFn,
                    silent: t && t.silent
                }), this
            },
            enableItem: function(e, t) {
                return e.isDisabled() && this._fireTreeEvent(r, {
                    item: e
                }, {
                    defaultFn: this._defEnableFn,
                    silent: t && t.silent
                }), this
            },
            hideItem: function(e, t) {
                return e.isHidden() || this._fireTreeEvent(i, {
                    item: e
                }, {
                    defaultFn: this._defHideFn,
                    silent: t && t.silent
                }), this
            },
            showItem: function(e, t) {
                return e.isHidden() && this._fireTreeEvent(s, {
                    item: e
                }, {
                    defaultFn: this._defShowFn,
                    silent: t && t.silent
                }), this
            },
            _defDisableFn: function(e) {
                e.item.state.disabled = !0
            },
            _defEnableFn: function(e) {
                delete e.item.state.disabled
            },
            _defHideFn: function(e) {
                e.item.state.hidden = !0
            },
            _defShowFn: function(e) {
                delete e.item.state.hidden
            }
        });
    e.namespace("Menu").Base = o
}, "@VERSION@", {
    requires: ["gallery-sm-menu-item", "tree-labelable", "tree-openable"]
});
YUI.add("gallery-sm-menu-item", function(e, t) {
    function n(t, r) {
        r || (r = {}), this.id = this._yuid = r.id || e.guid("menuItem-"), this.type = r.type || "item", this.url = r.url || "#", n.superclass.constructor.call(this, t, r)
    }
    e.extend(n, e.Tree.Node, {
        _serializable: e.Tree.Node.prototype._serializable.concat("type", "url"),
        disable: function(e) {
            return this.tree.disableItem(this, e), this
        },
        enable: function(e) {
            return this.tree.enableItem(this, e), this
        },
        hide: function(e) {
            return this.tree.hideItem(this, e), this
        },
        isDisabled: function() {
            return !!this.state.disabled || (this.parent ? this.parent.isDisabled() : !1)
        },
        isHidden: function() {
            return !!this.state.hidden || (this.parent ? this.parent.isHidden() : !1)
        },
        show: function(e) {
            return this.tree.showItem(this, e), this
        }
    }), e.namespace("Menu").Item = n
}, "@VERSION@", {
    requires: ["tree-node", "oop"]
});
YUI.add("gallery-sm-menu-plugin", function(e, t) {
    e.namespace("Plugin").Menu = e.Base.create("menuPlugin", e.Menu, [e.Plugin.Base], {
        initializer: function(t) {
            this._host = t.host, this._hostIsBody = this._host === e.one("body"), this._attachMenuPluginEvents()
        },
        destructor: function() {
            clearTimeout(this._pluginHideTimeout)
        },
        reposition: function(t) {
            return e.Menu.prototype.reposition.call(this, t || this._host)
        },
        _attachMenuPluginEvents: function() {
            this.get("showOnClick") && this.afterHostEvent("click", this._afterHostClick), this.get("showOnContext") && (this._hostIsBody ? this._menuEvents.push(e.one("doc").on("contextmenu", this._onHostContext, this)) : this.onHostEvent("contextmenu", this._onHostContext)), this.get("showOnHover") && this.afterHostEvent({
                blur: this._afterHostBlur,
                focus: this._afterHostFocus,
                mouseenter: this._afterHostMouseEnter,
                mouseleave: this._afterHostMouseLeave
            })
        },
        _getAncestorTestFn: function() {
            var e = this.get("container"),
                t = this._host;
            return function(n) {
                return n === e || n === t
            }
        },
        _afterHostBlur: function() {
            this.hide()
        },
        _afterHostClick: function() {
            this.rendered || this.render(), this.toggleVisible({
                anchorPoint: this._host
            })
        },
        _afterHostFocus: function() {
            clearTimeout(this._timeouts.menu), this.rendered || this.render(), this.show({
                anchorPoint: this._host
            })
        },
        _afterHostMouseEnter: function() {
            clearTimeout(this._timeouts.menu), this.rendered || this.render(), this.show({
                anchorPoint: this._host
            })
        },
        _afterHostMouseLeave: function() {
            var e = this;
            this._timeouts.menu = setTimeout(function() {
                e.hide()
            }, 300)
        },
        _onHostContext: function(e) {
            e.preventDefault(), this.rendered || this.render(), this.show({
                anchorPoint: [e.clientX, e.clientY]
            })
        }
    }, {
        NS: "menu",
        ATTRS: {
            showOnClick: {
                value: !0,
                writeOnce: "initOnly"
            },
            showOnContext: {
                value: !1,
                writeOnce: "initOnly"
            },
            showOnHover: {
                value: !1,
                writeOnce: "initOnly"
            }
        }
    })
}, "@VERSION@", {
    requires: ["event-focus", "gallery-sm-menu", "node-pluginhost", "plugin"]
});
YUI.add("gallery-sm-menu-templates", function(e, t) {
    var n = e.Template.Micro;
    e.namespace("Menu").Templates = {
        children: n.compile('<ul class="<%= data.classNames.children %>"></ul>'),
        item: n.compile('<% switch (data.item.type) { %><% case "item": %><li id="<%= data.item.id %>" class="<%= data.classNames.item %>"><a href="<%= data.item.url %>" class="<%= data.classNames.label %>" data-item-id="<%= data.item.id %>"<% if (data.item.title) { %> title="<%= data.item.title %>"<% } %>></a></li><% break; %><% case "heading": %><li class="<%= data.classNames.heading %>"><span class="<%= data.classNames.label %>"></span></li><% break; %><% case "separator": %><li class="<%= data.classNames.separator %>"></li><% break; %><% } %>')
    }
}, "@VERSION@", {
    requires: ["template-micro"]
});
YUI.add("gallery-sm-menu", function(e, t) {
    var n = e.config.doc,
        r = e.ClassNameManager.getClassName,
        i = "itemClick",
        s = e.Base.create("menu", e.Menu.Base, [e.View], {
            classNames: {
                canHaveChildren: r("menu-can-have-children"),
                children: r("menu-children"),
                disabled: r("menu-disabled"),
                hasChildren: r("menu-has-children"),
                heading: r("menu-heading"),
                hidden: r("menu-hidden"),
                horizontal: r("menu-horizontal"),
                item: r("menu-item"),
                label: r("menu-label"),
                menu: r("menu"),
                noTouch: r("menu-notouch"),
                open: r("menu-open"),
                selected: r("menu-selected"),
                separator: r("menu-separator"),
                touch: r("menu-touch"),
                vertical: r("menu-vertical")
            },
            rendered: !1,
            sourceSelectors: {
                item: "> li",
                label: "> a, > span",
                subtree: "> ul, > ol"
            },
            initializer: function(t) {
                this._openMenus = {}, this._published = {}, this._timeouts = {}, t && t.sourceNode && (t.nodes = (t.nodes || []).concat(this.parseHTML(t.sourceNode)), e.one(t.sourceNode).remove(!0)), this._attachMenuEvents()
            },
            destructor: function() {
                this._detachMenuEvents(), delete this._openMenus, delete this._published, e.Object.each(this._timeouts, function(e) {
                    clearTimeout(e)
                }, this), delete this._timeouts
            },
            getHTMLNode: function(e) {
                return e._htmlNode || (e._htmlNode = this.get("container").one("#" + e.id)), e._htmlNode
            },
            hide: function() {
                return this.set("visible", !1), this
            },
            parseHTML: function(t) {
                t = e.one(t);
                var r = this.classNames,
                    i = [],
                    s = this.sourceSelectors,
                    o = this;
                return t.all(s.item).each(function(t) {
                    var u = {},
                        a = t._node,
                        f = t.one(s.label),
                        l = t.one(s.subtree);
                    t.hasClass(r.heading) ? u.type = "heading" : t.hasClass(r.separator) && (u.type = "separator"), t.hasClass(r.disabled) && (u.state || (u.state = {}), u.state.disabled = !0), t.hasClass(r.hidden) && (u.state || (u.state = {}), u.state.hidden = !0);
                    if (f) {
                        var c = f.getAttribute("href");
                        u.label = f.getHTML(), c && c !== "#" && (u.url = c)
                    } else {
                        var h;
                        for (var p = 0, d = a.childNodes.length; p < d; p++) {
                            h = a.childNodes[p];
                            if (h.nodeType === n.TEXT_NODE) {
                                u.label = e.Escape.html(h.nodeValue);
                                break
                            }
                        }
                    }
                    l && (u.children = o.parseHTML(l)), i.push(u)
                }), i
            },
            render: function() {
                var t = this.classNames,
                    n = this.get("container");
                return n.addClass(t.menu), n.addClass(t[this.get("orientation")]), "ontouchstart" in e.config.win ? n.addClass(t.touch) : n.addClass(t.noTouch), this._childrenNode = this.renderChildren(this.rootNode, {
                    container: n
                }), n.inDoc() || e.one("body").append(n), this.rendered = !0, this
            },
            renderChildren: function(t, n) {
                n || (n = {});
                var r = n.container,
                    i = r && r.one("." + this.classNames.children);
                i || (i = e.Node.create(s.Templates.children({
                    classNames: this.classNames,
                    menu: this,
                    item: t
                }))), t.isRoot() && (i.set("tabIndex", 0), i.set("role", "menu")), t.hasChildren() && i.set("aria-expanded", t.isOpen());
                for (var o = 0, u = t.children.length; o < u; o++) this.renderNode(t.children[o], {
                    container: i,
                    renderChildren: !0
                });
                return r && r.append(i), i
            },
            renderNode: function(t, n) {
                n || (n = {});
                var r = this.classNames,
                    i = t._htmlNode,
                    o = t.isHidden();
                i || (i = t._htmlNode = e.Node.create(s.Templates.item({
                    classNames: r,
                    item: t,
                    menu: this
                }))), i.set("aria-hidden", o), i.toggleClass(r.hidden, o);
                switch (t.type) {
                    case "separator":
                        i.set("role", "separator");
                        break;
                    case "item":
                    case "heading":
                        var u = i.one("." + r.label),
                            a = u.get("id");
                        u.setHTML(t.label), a || (a = e.guid(), u.set("id", a)), i.set("aria-labelledby", a), t.type === "heading" ? i.set("role", "heading") : (i.set("role", "menuitem"), i.toggleClass(r.disabled, t.isDisabled()), t.canHaveChildren && (i.addClass(r.canHaveChildren), i.toggleClass(r.open, t.isOpen()), t.hasChildren() && (i.addClass(r.hasChildren), n.renderChildren && this.renderChildren(t, {
                            container: i
                        }))))
                }
                return n.container && n.container.append(i), i
            },
            reposition: function(t) {
                var n = this.get("container"),
                    r, i;
                return e.Lang.isArray(t) ? r = {
                    bottom: t[1],
                    left: t[0],
                    right: t[0],
                    top: t[1]
                } : t._node ? r = t.get("region") : r = t, i = this._getSortedAnchorRegions(this.get("alignments"), n.get("region"), r)[0].region, n.setXY([i.left, i.top]), this
            },
            show: function(e) {
                return this.rendered || this.render(), e && e.anchorPoint && this.reposition(e.anchorPoint), this.set("visible", !0), this
            },
            toggleVisible: function(e) {
                return this[this.get("visible") ? "hide" : "show"](e)
            },
            _attachMenuEvents: function() {
                this._menuEvents || (this._menuEvents = []);
                var t = this.classNames,
                    n = this.get("container");
                this._menuEvents.push(this.after({
                    add: this._afterAdd,
                    clear: this._afterClear,
                    close: this._afterClose,
                    disable: this._afterDisable,
                    enable: this._afterEnable,
                    hide: this._afterHide,
                    open: this._afterOpen,
                    orientationChange: this._afterOrientationChange,
                    remove: this._afterRemove,
                    show: this._afterShow,
                    visibleChange: this._afterVisibleChange
                }), n.on("hover", this._onMenuMouseEnter, this._onMenuMouseLeave, this), n.delegate("click", this._onItemClick, "." + t.item + ">." + t.label, this), n.delegate("hover", this._onItemMouseEnter, this._onItemMouseLeave, "." + t.canHaveChildren, this), e.one("doc").after("mousedown", this._afterDocMouseDown, this))
            },
            _detachMenuEvents: function() {
                (new e.EventHandle(this._menuEvents)).detach()
            },
            _getAncestorTestFn: function() {
                var e = this.get("container");
                return function(t) {
                    return t === e
                }
            },
            _getAnchorRegion: function(e, t, n) {
                var r = {};
                return e.replace(/^([bt])([lr])-([bt])([lr])/i, function(e, t, i, s, o) {
                    var u = {
                        b: "bottom",
                        l: "left",
                        r: "right",
                        t: "top"
                    };
                    r[u[t]] = n[u[s]], r[u[i]] = n[u[o]]
                }), "bottom" in r || (r.bottom = r.top + t.height), "left" in r || (r.left = r.right - t.width), "right" in r || (r.right = r.left + t.width), "top" in r || (r.top = r.bottom - t.height), r
            },
            _getSortedAnchorRegions: function(t, n, r, i) {
                i || (i = e.DOM.viewportRegion());
                var s = [],
                    o, u, a, f;
                for (o = 0, u = t.length; o < u; o++) a = t[o], a.point && (a = a.point), f = this._getAnchorRegion(a, n, r), s.push({
                    point: a,
                    region: f,
                    score: this._inRegion(f, i)
                });
                return s.sort(function(e, t) {
                    return e.score === t.score ? 0 : e.score === !0 ? -1 : t.score === !0 ? 1 : t.score - e.score
                }), s
            },
            _hideMenu: function(e, t) {
                t || (t = this.getHTMLNode(e));
                var n = t.one("." + this.classNames.children);
                n.setXY([-1e4, -1e4]), delete e.data.menuAnchor
            },
            _inRegion: function(e, t) {
                return e.bottom <= t.bottom && e.left >= t.left && e.right <= t.right && e.top >= t.top ? !0 : Math.min(t.bottom - e.bottom, 0) + Math.min(e.left - t.left, 0) + Math.min(t.right - e.right, 0) + Math.min(e.top - t.top, 0)
            },
            _positionMenu: function(e, t) {
                t || (t = this.getHTMLNode(e));
                var n = t.one("." + this.classNames.children),
                    r = this.get("orientation"),
                    i, s;
                e.parent.isRoot() && r === "horizontal" ? i = this.get("alignments") :
                    i = e.parent && e.parent.data.menuAnchors || this.get("subMenuAlignments"), s = this._getSortedAnchorRegions(i, n.get("region"), t.get("region"));
                if (r === "vertical" || !e.parent.isRoot()) e.data.menuAnchors = s;
                var o = s[0].region;
                n.setXY([o.left, o.top])
            },
            _afterAdd: function(e) {
                if (!this.rendered) return;
                var t = e.parent,
                    n, r;
                if (t === this.rootNode) n = this._childrenNode;
                else {
                    r = this.getHTMLNode(t), n = r && r.one("." + this.classNames.children);
                    if (!n) {
                        r || (r = this.renderNode(t)), this.renderChildren(t, {
                            container: r
                        });
                        return
                    }
                }
                n.insert(this.renderNode(e.node, {
                    renderChildren: !0
                }), e.index)
            },
            _afterClear: function() {
                this._openMenus = {};
                if (!this.rendered) return;
                delete this._childrenNode, this.rendered = !1, this.get("container").empty(), this.render()
            },
            _afterDocMouseDown: function(e) {
                if (!this.get("visible")) return;
                e.target.ancestor(this._getAncestorTestFn(), !0) || (this.closeSubMenus(), this.get("hideOnOutsideClick") && this.hide())
            },
            _afterClose: function(e) {
                var t = e.node,
                    n = this.getHTMLNode(t);
                for (var r = 0, i = t.children.length; r < i; r++) t.children[r].close();
                t.close(), delete this._openMenus[t.id], n && (this._hideMenu(t, n), n.removeClass(this.classNames.open))
            },
            _afterDisable: function(e) {
                var t = this.getHTMLNode(e.item);
                t && t.addClass(this.classNames.disabled)
            },
            _afterEnable: function(e) {
                var t = this.getHTMLNode(e.item);
                t && t.removeClass(this.classNames.disabled)
            },
            _afterHide: function(e) {
                var t = this.getHTMLNode(e.item);
                t && (t.addClass(this.classNames.hidden), t.set("aria-hidden", !0))
            },
            _afterOpen: function(e) {
                var t = e.node,
                    n = this.getHTMLNode(t),
                    r = t.parent,
                    i;
                if (r)
                    if (r.isOpen())
                        for (var s = 0, o = r.children.length; s < o; s++) i = r.children[s], i !== t && i.close();
                    else r.open();
                this._openMenus[t.id] = t, n && (this._positionMenu(t, n), n.addClass(this.classNames.open))
            },
            _afterOrientationChange: function(e) {
                this.rendered && this.get("container").removeClass(this.classNames.horizontal).removeClass(this.classNames.vertical).addClass(this.classNames[e.newVal])
            },
            _afterRemove: function(e) {
                delete this._openMenus[e.node.id];
                if (!this.rendered) return;
                var t = this.getHTMLNode(e.node);
                t && (t.remove(!0), delete e.node._htmlNode)
            },
            _afterShow: function(e) {
                var t = this.getHTMLNode(e.item);
                t && (t.removeClass(this.classNames.hidden), t.set("aria-hidden", !1))
            },
            _afterVisibleChange: function(e) {
                var t = this.get("container");
                t.toggleClass(this.classNames.open, e.newVal), e.newVal || t.removeAttribute("style")
            },
            _onItemClick: function(e) {
                var t = this.getNodeById(e.currentTarget.getData("item-id")),
                    n = i + "#" + t.id,
                    r = t.isDisabled() || t.isHidden();
                (r || t.url === "#") && e.preventDefault();
                if (r) return;
                this._published[n] || (this._published[n] = this.publish(n, {
                    defaultFn: this._defSpecificItemClickFn
                })), this._published[i] || (this._published[i] = this.publish(i, {
                    defaultFn: this._defItemClickFn
                })), this.fire(n, {
                    originEvent: e,
                    item: t
                })
            },
            _onItemMouseEnter: function(e) {
                var t = this.getNodeById(e.currentTarget.get("id"));
                clearTimeout(this._timeouts.item);
                if (t.isOpen() || t.isDisabled()) return;
                this._timeouts.item = setTimeout(function() {
                    t.open()
                }, 200)
            },
            _onItemMouseLeave: function(e) {
                var t = this.getNodeById(e.currentTarget.get("id"));
                clearTimeout(this._timeouts.item);
                if (!t.isOpen()) return;
                this._timeouts.item = setTimeout(function() {
                    t.close()
                }, 300)
            },
            _onMenuMouseEnter: function() {
                clearTimeout(this._timeouts.menu)
            },
            _onMenuMouseLeave: function() {
                var e = this;
                clearTimeout(this._timeouts.menu), this._timeouts.menu = setTimeout(function() {
                    e.closeSubMenus(), e.get("hideOnMouseLeave") && e.hide()
                }, 500)
            },
            _defItemClickFn: function(e) {
                var t = e.item;
                t.canHaveChildren ? (clearTimeout(this._timeouts.item), clearTimeout(this._timeouts.menu), e.item.toggleOpen()) : this.get("hideOnClick") && (this.closeSubMenus(), this.hide())
            },
            _defSpecificItemClickFn: function(e) {
                this.fire(i, {
                    originEvent: e.originEvent,
                    item: e.item
                })
            }
        }, {
            ATTRS: {
                alignments: {
                    valueFn: function() {
                        return ["tl-bl", "tr-br", "bl-tl", "br-tr"]
                    }
                },
                hideOnClick: {
                    value: !0
                },
                hideOnMouseLeave: {
                    value: !1
                },
                hideOnOutsideClick: {
                    value: !0
                },
                orientation: {
                    value: "vertical"
                },
                subMenuAlignments: {
                    valueFn: function() {
                        return ["tl-tr", "bl-br", "tr-tl", "br-bl"]
                    }
                },
                visible: {
                    value: !1
                }
            }
        });
    e.Menu = e.mix(s, e.Menu)
}, "@VERSION@", {
    requires: ["classnamemanager", "escape", "event-hover", "gallery-sm-menu-base", "gallery-sm-menu-templates", "node-screen", "view"],
    skinnable: !0
});
YUI.add("gallery-sm-promise-events", function(e, t) {
    "use strict";
    var n = e.Array,
        r;
    r = e.Promise.EventNotifier = function() {
        this._targets = []
    }, r.decorate = function(e) {
        return e._evts ? e : (e._evts = {
            subs: {},
            targets: []
        }, e.on = function(t, n) {
            return t && n && (e._evts.subs[t] || (e._evts.subs[t] = []), e._evts.subs[t].push(n)), e
        }, e.then = function(e) {
            return function(t, n) {
                var i = r.decorate(e.call(this, t, n));
                return this._evts.targets.push(i), i
            }
        }(e.then), e)
    }, e.mix(r.prototype, {
        addEvents: function(e) {
            return this._targets.push(e), r.decorate(e)
        },
        fire: function(t) {
            var r = this._targets.slice(),
                i = {},
                s = arguments.length > 1 && n(arguments, 1, !0),
                o, u, a, f, l, c, h;
            s && s.unshift(null, null);
            for (a = 0; a < r.length; ++a) {
                o = r[a];
                if (r[a]._evts) {
                    c = e.stamp(r[a]);
                    if (i[c]) continue;
                    i[c] = 1, r.push.apply(r, r[a]._evts.targets), u = o._evts.subs[t];
                    if (u)
                        for (f = 0, l = u.length; f < l; ++f) h = u[f], s && (s[0] = h, h = e.bind.apply(e, s)), e.soon(h)
                }
            }
            return this
        }
    })
}, "@VERSION@", {
    requires: ["promise"]
});
YUI.add("gallery-sm-range", function(e, t) {
    var n = e.config.doc,
        r = e.config.win,
        i = !!(r && r.Range && n.createRange),
        s = 1,
        o = 3,
        u = i ? function(e) {
            this._range = e || n.createRange()
        } : function(e) {
            this._range = e || n.body.createTextRange()
        };
    u.prototype = {
        clone: i ? function() {
            return new e.Range(this._range.cloneRange())
        } : function() {
            throw new Error("Not yet implemented.")
        },
        cloneContents: i ? function() {
            return e.one(this._range.cloneContents())
        } : function() {
            throw new Error("Not yet implemented.")
        },
        collapse: function(e) {
            return this._range.collapse(e && e.toStart), this
        },
        compare: i ? function(e, t) {
            e._range && (e = e._range);
            var n = t && t.myPoint || "start",
                i = t && t.otherPoint || "start",
                s = r.Range[i.toUpperCase() + "_TO_" + n.toUpperCase()];
            return this._range.compareBoundaryPoints(s, e)
        } : function() {
            throw new Error("Not yet implemented.")
        },
        deleteContents: i ? function() {
            return this._range.deleteContents(), this
        } : function() {
            throw new Error("Not yet implemented.")
        },
        endNode: i ? function(t, n) {
            if (t) {
                var r = e.one(t)._node;
                n || (n = 0), typeof n == "number" ? this._range.setEnd(r, n) : n === "before" ? this._range.setEndBefore(r) : n === "after" && this._range.setEndAfter(r)
            }
            return e.one(this._range.endContainer)
        } : function(e, t) {
            throw new Error("Not yet implemented.")
        },
        endOffset: i ? function(e) {
            return (e || e === 0) && this.endNode(this._range.endContainer, e), this._range.endOffset
        } : function(e) {
            throw new Error("Not yet implemented.")
        },
        expand: function(e) {
            return this.expandStart(e).expandEnd(e)
        },
        expandEnd: function(t) {
            function u(e) {
                var t;
                return e = e._node, o === e.nodeType ? t = e.length : t = e.childNodes.length, t
            }
            var n = this.endNode(),
                r = this.endOffset(),
                i, s;
            t || (t = {}), t.stopAt && (i = t.stopAt), "string" == typeof i || "function" == typeof i ? i = n.ancestor(i, !0) : i = e.one(i);
            while (n !== i && u(n) === r) s = n.get("parentNode"), r = s.get("childNodes").indexOf(n) + 1, n = s;
            return this.endNode(n, r), this
        },
        expandStart: function(t) {
            var n = this.startNode(),
                r = this.startOffset(),
                i, s;
            t || (t = {}), t.stopAt && (i = t.stopAt), "string" == typeof i || "function" == typeof i ? i = n.ancestor(i, !0) : i = e.one(i);
            while (n !== i && 0 === r) s = n.get("parentNode"), r = s.get("childNodes").indexOf(n), n = s;
            return this.startNode(n, r), this
        },
        extractContents: i ? function() {
            return e.one(this._range.extractContents())
        } : function() {
            throw new Error("Not yet implemented.")
        },
        insertNode: i ? function(t) {
            return t = e.one(t), this._range.insertNode(t._node), t
        } : function() {
            throw new Error("Not yet implemented.")
        },
        isCollapsed: i ? function() {
            return this._range.collapsed
        } : function() {
            throw new Error("Not yet implemented.")
        },
        isEquivalent: function(e) {
            return e && this.compare(e) === 0 && this.compare(e, {
                myPoint: "end",
                otherPoint: "end"
            }) === 0
        },
        isInsideNode: function(t) {
            var n = e.one(t)._node,
                r = this.parentNode()._node;
            if (n === r) return !0;
            while (r = r.parentNode)
                if (n === r) return !0;
            return !1
        },
        parentNode: i ? function() {
            return e.one(this._range.commonAncestorContainer)
        } : function() {
            return e.one(this._range.parentElement())
        },
        selectNode: i ? function(t) {
            return this._range.selectNode(e.one(t)._node), this
        } : function(e) {
            throw new Error("Not yet implemented.")
        },
        selectNodeContents: i ? function(t) {
            return this._range.selectNodeContents(e.one(t)._node), this
        } : function(e) {
            throw new Error("Not yet implemented.")
        },
        shrink: function(e) {
            return this.shrinkStart(e).shrinkEnd(e)
        },
        shrinkEnd: function(t) {
            var n = t && t.trim;
            if (!this.isCollapsed()) {
                var r = this.endNode(),
                    i = r,
                    u = this.endOffset(),
                    a = i.get("nodeType"),
                    f, l;
                if (o === a) {
                    f = i.get("text"), l = n && "" === e.Lang.trim(f.substring(0, u));
                    if (!u || l) {
                        var c;
                        while (!(c = i.get("previousSibling"))) i = i.get("parentNode");
                        i = c
                    } else if (!n) return this
                } else {
                    var h = i.get("childNodes"),
                        p = h.item(u - 1);
                    p && (i = p)
                }
                s === i.get("nodeType") && (this.endNode(i, i.get("childNodes").size()), this.traverse(function(e) {
                    o === e.get("nodeType") && (i = e)
                })), r !== i && (u = i.get("text").length), f = i.get("text").substring(0, u), u = (n ? e.Lang.trimRight(f) : f).length, this.endNode(i, u)
            }
            return this
        },
        shrinkStart: function(t) {
            var n = t && t.trim;
            if (!this.isCollapsed()) {
                var r = this.startNode(),
                    i = r,
                    u = this.startOffset(),
                    a = i.get("nodeType"),
                    f, l;
                if (o === a) {
                    f = i.get("text"), l = n && "" === e.Lang.trim(f.substring(u));
                    if (f.length === u || l) {
                        var c;
                        while (!(c = i.get("nextSibling"))) i = i.get("parentNode");
                        i = c
                    } else if (!n) return this
                } else {
                    var h = i.get("childNodes"),
                        p = h.item(u);
                    p && (i = p)
                }
                s === i.get("nodeType") && (this.startNode(i), this.traverse(function(e) {
                    if (o === e.get("nodeType")) return i = e, !0
                })), r !== i && (u = 0), f = i.get("text").substring(u), u += n ? f.indexOf(e.Lang.trimLeft(f)) : 0, this.startNode(i, u)
            }
            return this
        },
        startNode: i ? function(t, n) {
            if (t) {
                var r = e.one(t)._node;
                n || (n = 0), typeof n == "number" ? this._range.setStart(r, n) : n === "before" ? this._range.setStartBefore(r) : n === "after" && this._range.setStartAfter(r)
            }
            return e.one(this._range.startContainer)
        } : function(e, t) {
            throw new Error("Not yet implemented.")
        },
        startOffset: i ? function(e) {
            return (e || e === 0) && this.startNode(this._range.startContainer, e), this._range.startOffset
        } : function(e) {
            throw new Error("Not yet implemented.")
        },
        toHTML: i ? function() {
            var e = n.createElement("div");
            return e.appendChild(this._range.cloneContents()), e.innerHTML
        } : function() {
            return this._range.htmlText
        },
        toString: i ? function() {
            return this._range.toString()
        } : function() {
            return this._range.text
        },
        traverse: function(t, n) {
            function o(s) {
                var u = t.call(n, e.one(s));
                if (u || s === i) return;
                if (s.firstChild) o(s.firstChild);
                else if (s.nextSibling) o(s.nextSibling);
                else {
                    var a = s;
                    while (a = a.parentNode)
                        if (a !== r && a.nextSibling) {
                            o(a.nextSibling);
                            break
                        }
                }
            }
            if (this.isCollapsed()) return this;
            var r = this.parentNode()._node,
                i = this.endNode()._node,
                s = this.endOffset();
            if (s && i.childNodes.length) {
                i = i.childNodes[s - 1];
                while (i.lastChild) i = i.lastChild
            }
            return o(this.startNode()._node), this
        },
        wrap: i ? function(t, n) {
            var r = this._range.extractContents(),
                i = e.DOM.create(t);
            return i.appendChild(r), this._range.insertNode(i), n && n.includeWrapper ? this._range.selectNode(i) : this._range.selectNodeContents(i), e.one(i)
        } : function(e) {
            throw new Error("Not yet implemented.")
        }
    }, e.Range = u
}, "@VERSION@", {
    requires: ["node-base"]
});
YUI.add("gallery-sm-selection", function(e, t) {
    var n = e.config.doc,
        r = e.config.win,
        i = !!r && !!r.getSelection,
        s = i ? function() {
            this._selection = r.getSelection()
        } : function() {
            this._selection = n.selection
        };
    s.prototype = {
        anchorNode: i ? function() {
            return this._selection.anchorNode
        } : function() {
            throw new Error("Not yet implemented.")
        },
        rangeCount: i ? function() {
            return this._selection.rangeCount
        } : function() {
            throw new Error("Not yet implemented.")
        },
        range: i ? function(t) {
            return this.rangeCount() ? new e.Range(this._selection.getRangeAt(t || 0)) : null
        } : function() {
            throw new Error("Not yet implemented.")
        },
        ranges: function() {
            var e = [];
            for (var t = 0, n = this.rangeCount(); t < n; t++) e.push(this.range(t));
            return e
        },
        select: i ? function(e, t) {
            return (!t || !t.multi) && this.unselect(), this._selection.addRange(e._range), this
        } : function() {
            throw new Error("Not yet implemented.")
        },
        unselect: i ? function(e) {
            return e ? this._selection.removeRange(e._range) : this._selection.removeAllRanges(), this
        } : function() {
            throw new Error("Not yet implemented.")
        },
        toString: function() {
            var e = this.ranges(),
                t = "";
            for (var n = 0, r = e.length; n < r; n++) t += e[n].toString();
            return t
        }
    }, e.Selection = s
}, "@VERSION@", {
    requires: ["gallery-sm-range"]
});